import{g as dt,h as _t,r as x,j as ut,i as xt,f as ft,c as i,b as f,a as t,k as D,A as pt,l as e,m as ht,F as N,E as $,L as P,t as o,n as u,d as S,q as mt,x as v,y as Y,o as c,B as vt,H as gt,_ as bt}from"./entry.2e8b78c1.js";import yt from"./Header.47406e40.js";import wt from"./Table2Column.95289184.js";import kt from"./Calendar.62dd2f0a.js";import Tt from"./CarTag.3d252cee.js";import Dt from"./TruckDriver.2b92b0d3.js";import Yt from"./TruckDriverOutline.68fef973.js";import jt from"./LocationOn.fe5eef24.js";import{_ as At}from"./HeaderPopup.vue.f669f300.js";import Mt from"./Image.59aeb546.js";import{u as Ct}from"./useUtils.49acee3f.js";import{u as j}from"./useMyFetch.e6d47c09.js";import{u as Lt}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.1251e55b.js";const Ht=vt(()=>bt(()=>import("./GAPIN.b5b76b46.js"),["./GAPIN.b5b76b46.js","./entry.2e8b78c1.js","./entry.493f9183.css","./useMyFetch.e6d47c09.js"],import.meta.url).then(A=>A.default||A)),It={class:"w-full h-full flex flex-col relative"},Nt={class:"grow flex flex-col"},$t={class:"w-full flex items-center p-1"},Pt={class:"grow"},St={class:"grow overflow-auto h-0"},Bt={class:"p-1 grow"},Ft={class:"bg-white flex py-2 justify-between"},Rt={class:"flex flex-wrap"},Vt={class:"flex items-center justify-center m-2 text-xs"},zt={class:"bg-blue-400 p-2 font-bold text-white"},Et={class:"flex flex-col m-2"},Kt=t("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Ut={class:"flex items-center justify-center"},qt={class:"flex flex-col m-2"},Ot=t("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Jt={class:"flex items-center justify-center"},Wt=["data-real"],Gt={class:"flex flex-col m-2"},Qt=t("span",{class:"text-xs"}," Nama Supir ",-1),Xt={class:"flex items-center justify-center"},Zt=["data-real"],te={key:0,class:"flex flex-col m-2"},ee=t("span",{class:"text-xs"}," Nama Kernet ",-1),se={class:"flex items-center justify-center"},oe=["data-real"],le={class:"flex flex-col m-2"},ne=t("span",{class:"text-xs"}," Tujuan ",-1),ae={class:"flex items-center justify-center"},re=["onClick"],ie={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},ce={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},de={class:"p-1 flex flex-wrap overflow-auto items-start"},_e={class:"w-full flex flex-wrap"},ue={class:"w-full flex flex-wrap"},xe={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},fe=t("span",{class:"text-xs font-bold"}," ID ",-1),pe={class:""},he={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},me=t("span",{class:"text-xs font-bold"}," Tgl Terima U.Jalan ",-1),ve={class:""},ge={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},be=t("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),ye={class:""},we={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ke={class:"flex flex-col"},Te=t("span",{class:"text-xs font-bold"}," Nama Supir ",-1),De={class:""},Ye={class:"flex flex-col pl-2"},je=t("span",{class:"text-xs font-bold"}," No rek ",-1),Ae={class:""},Me={key:0,class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ce={class:"flex flex-col"},Le=t("span",{class:"text-xs font-bold"}," Nama Kernet ",-1),He={class:""},Ie={class:"flex flex-col pl-2"},Ne=t("span",{class:"text-xs font-bold"}," No rek ",-1),$e={class:""},Pe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Se=t("span",{class:"text-xs font-bold"}," Tujuan ",-1),Be={class:""},Fe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Re=t("span",{class:"text-xs font-bold"}," Info ",-1),Ve={class:""},ze={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ee=t("span",{class:"text-xs font-bold"}," Tipe ",-1),Ke={class:""},Ue={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},qe=t("span",{class:"text-xs font-bold"}," Jenis ",-1),Oe={class:""},Je={key:1,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},We=t("span",{class:"text-xs font-bold"}," Pengalihan ",-1),Ge={class:""},Qe={class:"w-full flex flex-wrap justify-center"},Xe={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ze=t("span",{class:"text-xs font-bold"}," App Kasir ",-1),ts={class:"text-xs"},es={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ss=t("span",{class:"text-xs font-bold"}," App Mandor ",-1),os={class:"text-xs"},ls={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ns=t("span",{class:"text-xs font-bold"}," App KTU/W ",-1),as={class:"text-xs"},rs={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},is=t("span",{class:"text-xs font-bold"}," App Marketing ",-1),cs={class:"text-xs"},ds={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},_s=t("span",{class:"text-xs font-bold"}," App Logistik ",-1),us={class:"text-xs"},xs={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},fs=t("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),ps={class:"text-xs"},hs={class:"w-full sm:w-1/2 text-sm flex justify-center"},ms={class:"border border-collapse border-black"},vs=t("tr",null,[t("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),gs={class:"p-1"},bs={class:"p-1"},ys=t("td",{class:"p-1"},"= Rp.",-1),ws={class:"text-right p-1"},ks={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Ts=t("th",{colspan:"2",class:"text-right"},"Total",-1),Ds=t("th",{class:"p-1 text-right"},"Rp.",-1),Ys={class:"p-1 text-right"},js={key:0,class:"text-red-500 font-bold"},As=t("td",{colspan:"2",class:"text-right"},"Potongan Supir",-1),Ms=t("td",{class:"p-1 text-right"},"Rp.",-1),Cs={class:"p-1 text-right"},Ls={key:1,class:"text-red-500 font-bold"},Hs=t("td",{colspan:"2",class:"text-right"},"Potongan Kernet",-1),Is=t("td",{class:"p-1 text-right"},"Rp.",-1),Ns={class:"p-1 text-right"},$s={key:2,class:"text-red-500 font-bold"},Ps=t("td",{colspan:"2",class:"text-right"},"Total Potongan",-1),Ss=t("td",{class:"p-1 text-right"},"Rp.",-1),Bs={class:"p-1 text-right"},Fs={key:3,class:"font-bold"},Rs=t("td",{colspan:"2",class:"text-right"},"Total Diterima",-1),Vs=t("td",{class:"p-1 text-right"},"Rp.",-1),zs={class:"p-1 text-right"},Es={class:"w-full sm:w-1/2 h-full"},Ks=["src"],Us={key:1,class:"flex flex-col justify-center items-center px-2 py-8 border border-gray-700 bg-gray-300"},qs={class:"w-full border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200 mt-2 flex flex-row flex-wrap"},Os={class:"flex flex-col mr-5"},Js=t("span",{class:"text-xs font-bold"}," EM#ID ",-1),Ws={class:""},Gs={class:"flex flex-col mr-5"},Qs=t("span",{class:"text-xs font-bold"}," Nama Penerima ",-1),Xs={class:""},Zs={class:"flex flex-col mr-5"},to=t("span",{class:"text-xs font-bold"}," No rek ",-1),eo={class:""},so={class:"flex flex-col mr-5"},oo=t("span",{class:"text-xs font-bold"}," Tanggal ",-1),lo={class:""},no={class:"flex flex-col mr-5"},ao=t("span",{class:"text-xs font-bold"}," Tujuan ",-1),ro={class:""},io={class:"flex flex-col mr-5"},co=t("span",{class:"text-xs font-bold"}," Desc ",-1),_o={class:""},uo={class:"flex flex-col mr-5"},xo=t("span",{class:"text-xs font-bold"}," Total ",-1),fo={class:""},po={class:"flex p-1 justify-end flex-wrap"},ho={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},mo=t("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),No={__name:"transfer",async setup(A){let y,B;const{$moment:h}=gt(),{pointFormat:p}=Ct(),w=dt("token");new Date().getTimezoneOffset();const{data:W}=([y,B]=_t(async()=>mt(async()=>{v().loading_full=!0;let n=[];const[l,d]=await Promise.all([j("/trx_trp/transfers",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},retry:0})]);return l.status.value==="error"?(Y().trigger(l.error),{trx_trps:n}):(v().loading_full=!1,n=l.data.value.data,{trx_trps:n})},"$pIgiM26TjW")),y=await y,B(),y),M=x(W.value.trx_trps||[]),C=x({}),s=x({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),L=x(-1),m=x(""),G=async n=>{v().loading_full=!0;const{data:l,error:d,status:r}=await j("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(v().loading_full=!1,r.value==="error"){Y().trigger(d,C);return}s.value=l.value.data},H=x(!1),Q=async()=>{if(H.value)return;H.value=!0,v().loading_full=!0,C.value={};const n=new FormData;n.append("id",s.value.id),n.append("_method","PUT");let l="post";const{data:d,error:r,status:_}=await j("/trx_trp/transfer",{method:l,headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},body:n,retry:0});if(v().loading_full=!1,H.value=!1,_.value==="error"){Y().trigger(r,C);return}M.value.splice(L.value,1),L.value=-1,b.value=!1,g.value=!1},g=x(!1),X=x(0),b=x(!1);ut();const Z=(n,l)=>{L.value=n,X.value=l,g.value=!0,G(l)},F=xt(()=>m.value!=""?M.value.filter(n=>n.no_pol.toLowerCase().includes(m.value.toLowerCase())||n.supir.toLowerCase().includes(m.value.toLowerCase())||n.kernet.toLowerCase().includes(m.value.toLowerCase())):M.value),k=n=>n.potongan&&n.potongan.length>0?n.potongan.map(l=>parseInt(l.nominal_cut)).reduce((l,d)=>(l+=d,l)):0,R=n=>{if(n.potongan&&n.potongan.length>0){let l=n.potongan.filter(r=>r.potongan_mst.employee_id==n.supir_id);if(l.length==0)return 0;let d=l.map(r=>parseInt(r.nominal_cut));return d.length==0?0:d.reduce((r,_)=>(r+=_,r))}return 0},V=n=>{if(n.potongan&&n.potongan.length>0){let l=n.potongan.filter(r=>r.potongan_mst.employee_id==n.kernet_id);if(l.length==0)return 0;let d=l.map(r=>parseInt(r.nominal_cut));return d.length==0?0:d.reduce((r,_)=>(r+=_,r))}return 0},tt=()=>{let n=m.value;document.querySelectorAll(".to_hl").forEach(l=>{let d=l.dataset.real;var r=l.innerHTML,_=d.toLowerCase().indexOf(n.toLowerCase());_>-1&&n!=""?(r=d.substring(0,_)+"<span class='highlight'>"+d.substring(_,_+n.length)+"</span>"+d.substring(_+n.length),l.innerHTML=r):l.innerHTML=r=d})};ft(()=>F,(n,l)=>{setTimeout(()=>{tt()},0)},{deep:!0,immediate:!0});const{downloadFile:et,viewFile:vo}=Lt(),st=async()=>{v().loading_full=!0;const{data:n,error:l,status:d}=await j("/trx_trp/manual_tf",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{},retry:0});if(v().loading_full=!1,d.value==="error"){Y().trigger(l);return}et(n.value)},z=x(0);return(n,l)=>{var E,K;const d=yt,r=wt,_=kt,ot=Tt,lt=Dt,nt=Yt,at=jt,rt=At,it=Mt,ct=Ht;return c(),i("div",It,[f(d,{title:"List Transaction"}),t("section",Nt,[t("div",$t,[t("div",Pt,[D(t("input",{class:"flex-grow",type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>ht(m)?m.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[pt,e(m)]])]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[1]||(l[1]=a=>st())},[f(r)])]),t("div",St,[(c(!0),i(N,null,$(e(F),(a,T)=>(c(),i("div",Bt,[t("div",Ft,[t("div",Rt,[t("div",Vt,[t("div",zt,o(a.id),1)]),t("div",Et,[Kt,t("div",Ut,[f(_,{class:"mr-1"}),S(" "+o(e(h)(a.tanggal).format("DD-MM-YYYY")),1)])]),t("div",qt,[Ot,t("div",Jt,[f(ot,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.no_pol},o(a.no_pol),9,Wt)])]),t("div",Gt,[Qt,t("div",Xt,[f(lt,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.supir},o(a.supir),9,Zt)])]),a.kernet?(c(),i("div",te,[ee,t("div",se,[f(nt,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.kernet},o(a.kernet),9,oe)])])):u("",!0),t("div",le,[ne,t("div",ae,[f(at,{class:"mr-1"}),S(" "+o(a.xto),1)])])]),t("button",{class:"bg-blue-500 text-white rounded",onClick:I=>Z(T,a)}," Detail ",8,re)])]))),256))])]),D(t("div",ie,[t("div",ce,[f(rt,{title:"Detail Information",fn:()=>{g.value=!1,b.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("div",de,[t("div",_e,[t("div",ue,[t("div",xe,[fe,t("div",pe,o(e(s).id),1)]),t("div",he,[me,t("div",ve,o(e(h)(e(s).tanggal).format("DD-MM-YYYY")),1)]),t("div",ge,[be,t("div",ye,o(e(s).no_pol),1)]),t("div",we,[t("div",ke,[Te,t("div",De,o(e(s).supir),1)]),t("div",Ye,[je,t("div",Ae,o(e(s).supir_rek_no),1)])]),e(s).kernet?(c(),i("div",Me,[t("div",Ce,[Le,t("div",He,o(e(s).kernet),1)]),t("div",Ie,[Ne,t("div",$e,o(e(s).kernet_rek_no),1)])])):u("",!0),t("div",Pe,[Se,t("div",Be,o(e(s).xto),1)]),t("div",Fe,[Re,t("div",Ve,o((E=e(s).uj)==null?void 0:E.asst_opt),1)]),t("div",ze,[Ee,t("div",Ke,o(e(s).tipe),1)]),t("div",Ue,[qe,t("div",Oe,o(e(s).jenis),1)]),e(s).transition_type=="From"?(c(),i("div",Je,[We,t("div",Ge,o(e(s).transition_target),1)])):u("",!0)]),t("div",Qe,[e(s).val?(c(),i("div",Xe,[Ze,t("div",null," ( "+o(e(s).val_by.username)+" ) ",1),t("div",ts,o(e(h)(e(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val1?(c(),i("div",es,[ss,t("div",null," ( "+o(e(s).val1_by.username)+" ) ",1),t("div",os,o(e(h)(e(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val2?(c(),i("div",ls,[ns,t("div",null," ( "+o(e(s).val2_by.username)+" ) ",1),t("div",as,o(e(h)(e(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val3?(c(),i("div",rs,[is,t("div",null," ( "+o(e(s).val3_by.username)+" ) ",1),t("div",cs,o(e(h)(e(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val4?(c(),i("div",ds,[_s,t("div",null," ( "+o(e(s).val4_by.username)+" ) ",1),t("div",us,o(e(h)(e(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val5?(c(),i("div",xs,[fs,t("div",null," ( "+o(e(s).val5_by.username)+" ) ",1),t("div",ps,o(e(h)(e(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0)])]),t("div",hs,[t("table",ms,[vs,(c(!0),i(N,null,$(e(s).details_uj,a=>(c(),i("tr",null,[t("td",gs,o(a.ordinal)+". ",1),t("td",bs,o(a.xdesc)+" "+o(a.qty<=1?"":e(p)(a.qty||0)+" x Rp."+e(p)(a.harga||0)),1),ys,t("td",ws,o(e(p)(a.qty*a.harga)),1)]))),256)),t("tr",ks,[Ts,Ds,t("th",Ys,o(e(p)(e(s).amount)),1)]),R(e(s))>0?(c(),i("tr",js,[As,Ms,t("td",Cs,o(e(p)(R(e(s)))),1)])):u("",!0),V(e(s))>0?(c(),i("tr",Ls,[Hs,Is,t("td",Ns,o(e(p)(V(e(s)))),1)])):u("",!0),k(e(s))>0?(c(),i("tr",$s,[Ps,Ss,t("td",Bs,o(e(p)(k(e(s)))),1)])):u("",!0),k(e(s))>0?(c(),i("tr",Fs,[Rs,Vs,t("td",zs,o(e(p)(e(s).amount-k(e(s)))),1)])):u("",!0)])]),t("div",Es,[((K=e(s).trx_absens)==null?void 0:K.length)>0?(c(),i("img",{key:0,class:"w-full",src:e(s).trx_absens[0].gambar},null,8,Ks)):(c(),i("div",Us,[f(it),S(" Tidak Ada Foto Berangkat ")]))]),(c(!0),i(N,null,$(e(s).extra_money_trxs,a=>{var T,I,U,q,O,J;return c(),i("div",qs,[t("div",Os,[Js,t("div",Ws,o(a.id),1)]),t("div",Gs,[Qs,t("div",Xs,o((T=a.employee)==null?void 0:T.name),1)]),t("div",Zs,[to,t("div",eo,o((I=a.employee)==null?void 0:I.rek_no),1)]),t("div",so,[oo,t("div",lo,o(a.tanggal),1)]),t("div",no,[ao,t("div",ro,o((U=a.extra_money)==null?void 0:U.xto),1)]),t("div",io,[co,t("div",_o,o((q=a.extra_money)==null?void 0:q.description),1)]),t("div",uo,[xo,t("div",fo,o(e(p)(((O=a.extra_money)==null?void 0:O.nominal)*((J=a.extra_money)==null?void 0:J.qty))),1)])])}),256))]),D(t("div",po,[t("button",{class:"rounded m-1",onClick:l[2]||(l[2]=a=>g.value=!1)}," Cancel "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:l[3]||(l[3]=a=>b.value=!0)}," Transfer ")],512),[[P,!e(b)]]),D(t("div",ho,[mo,t("button",{class:"rounded m-1 bg-white",onClick:l[4]||(l[4]=a=>(b.value=!1,g.value=!1))}," Tidak "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:l[5]||(l[5]=a=>Q())}," Ya ")],512),[[P,e(b)]])])],512),[[P,e(g)]]),f(ct,{show:e(z),onSetTimeout:l[6]||(l[6]=a=>z.value=a)},null,8,["show"])])}}};export{No as default};
