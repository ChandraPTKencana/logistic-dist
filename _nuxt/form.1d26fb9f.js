import{_ as E}from"./HeaderCustom.vue.4980ce7e.js";import{_ as M}from"./InputPointFormat.vue.cf7816a7.js";import T from"./Search.b6d608eb.js";import z from"./Delete.8d50b6e4.js";import H from"./units.69a11a42.js";import{f as K,g as Q,h as L,r as x,i as G,j as J,k as O,l as W,o as y,c as b,a as e,b as _,m as l,n as w,v as $,t as u,q as j,s as X,F as Y,x as g,y as A}from"./entry.9b8fbe30.js";import{u as F}from"./useMyFetch.a6b0cb71.js";import"./CaretLeft.19082229.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./HeaderPopup.vue.132f678e.js";import"./Times.30ad854a.js";import"./useUtils.f37c7c08.js";const Z={class:"w-full h-full flex flex-col"},ee={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},te={class:"w-full align-items-center justify-content-center grow overflow-auto"},oe={class:"w-full flex flex-col flex-wrap p-1"},se=e("label",{for:""},"Foto",-1),le={class:"flex justify-center items-center w-24 h-24"},ne=["src"],ae=e("small",null,"Upload file image : jpg, jpeg",-1),ie={class:"help-err"},re={class:"w-full flex flex-col flex-wrap p-1"},ue=e("label",{for:""},"Name",-1),ce={class:"text-red-500"},de={class:"w-full flex flex-col flex-wrap p-1"},pe=e("label",{for:""},"Value",-1),fe={class:"text-red-500"},_e={class:"w-full flex flex-col flex-wrap p-1"},me=e("label",{for:""},"Note",-1),ve={class:"text-red-500"},he={class:"w-full flex flex-col flex-wrap p-1"},xe=e("label",{for:""},"Unit",-1),we={class:"card-border flex flex-row flex-wrap"},ge={key:0,class:"w-full flex"},ye=e("div",{class:"flex items-center grow p-1"}," Pilih Unit ",-1),be={key:1,class:"w-full flex",style:{}},ke={class:"flex flex-row flex-wrap grow"},Se={class:"p-1"},Ce=e("div",{class:"text-sm text-gray-600"},"ID",-1),Ue={class:"bold"},$e={class:"p-1"},je=e("div",{class:"text-sm text-gray-600"},"Email",-1),Ae={class:"bold"},Fe={class:"text-red-500"},De={class:"w-full flex items-center justify-end"},Qe=K({__name:"form",async setup(Ie){let m,k;Q();const S=L("token"),i=x({}),D=G(),C=J();let U={id:"",name:""};const p=x(!1),{data:s}=([m,k]=O(async()=>W(async()=>{const o=C.query.id;if(o!==void 0&&o!==""){g().loading_full=!0;const{data:t,error:a,status:c}=await F("/item",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:{id:o},retry:0});if(g().loading_full=!1,c.value==="error")A().trigger(a,i);else{let r=t.value.data;return t.value.data.photo&&(p.value=!0),r}}return{id:-1,name:"",value:0,note:"",unit:{...U},photo:""}},"$eQTKQHw4Kq")),m=await m,k(),m);let v=x(!1);const I=()=>{s.value.unit={...U}},N=()=>{v.value=!0},P=()=>{v.value=!1},B=o=>{s.value.unit=o,v.value=!1},R=async()=>{var h;g().loading_full=!0,i.value={};const o=new FormData;o.append("name",s.value.name),o.append("value",s.value.value),o.append("note",s.value.note),o.append("unit_id",s.value.unit.id),(h=f.value)!=null&&h.files&&o.append("photo",f.value.files[0]||""),f.value&&o.append("photo_preview",s.value.photo);let t="post",a=C.query.id;a===""||(t="post",o.append("id",a),o.append("_method","PUT"));const{data:c,error:r,status:d}=await F("/item",{method:t,headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,d.value==="error"){A().trigger(r,i);return}D.go(-1)},f=x(null),V=o=>{var t=o.target.files;if(t.length>0){let a=new FileReader;a.onload=function(c){var d;let r=(d=c.target)==null?void 0:d.result;r.match(/image/)&&(s.value.photo=r)},a.readAsDataURL(t[0]),p.value=!0}},q=()=>{p.value=!1,s.value.photo="";let o=f.value;o&&(o.value="")};return(o,t)=>{const a=E,c=M,r=T,d=z,h=H;return y(),b(Y,null,[e("div",Z,[_(a,{title:"Form Item",back:!0}),e("form",ee,[e("div",te,[e("div",oe,[se,e("div",le,[e("img",{src:l(s).photo||"/logistik/user-default.png",alt:"",class:"max-w-full max-h-full"},null,8,ne)]),w(e("button",{type:"button",class:"bg-gray-600 w-24 text-white",onClick:t[0]||(t[0]=n=>q())},"Remove",512),[[$,l(p)]]),w(e("input",{onChange:t[1]||(t[1]=n=>V(n)),ref_key:"photo_input",ref:f,type:"file",name:"photo",value:""},null,544),[[$,!l(p)]]),ae,e("p",ie,u(l(i).photo),1)]),e("div",re,[ue,w(e("input",{class:"",type:"text","onUpdate:modelValue":t[2]||(t[2]=n=>l(s).name=n)},null,512),[[j,l(s).name]]),e("p",ce,u(l(i).name),1)]),e("div",de,[pe,_(c,{class:"",type:"text",value:l(s).value,onInput:t[3]||(t[3]=n=>l(s).value=n)},null,8,["value"]),e("p",fe,u(l(i).value),1)]),e("div",_e,[me,w(e("textarea",{class:"","onUpdate:modelValue":t[4]||(t[4]=n=>l(s).note=n)},null,512),[[j,l(s).note]]),e("p",ve,u(l(i).note),1)]),e("div",he,[xe,e("div",we,[!l(s).unit||!l(s).unit.id?(y(),b("div",ge,[e("button",{type:"button",onClick:t[5]||(t[5]=n=>N()),class:"flex items-center grow"},[_(r,{class:"text-2xl text-black"}),ye])])):(y(),b("div",be,[e("div",ke,[e("div",Se,[Ce,e("div",Ue,u(l(s).unit.id),1)]),e("div",$e,[je,e("div",Ae,u(l(s).unit.name),1)])]),e("button",{type:"button",class:"w-10 bg-red-600 flex items-center justify-center",onClick:t[6]||(t[6]=n=>I())},[_(d,{class:"text-2xl text-white"})])]))]),e("p",Fe,u(l(i).unit_id),1)])]),e("div",De,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:t[7]||(t[7]=n=>o.$router.go(-1))}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:t[8]||(t[8]=X(n=>R(),["prevent"]))}," Save ")])])]),_(h,{show:l(v),fnClose:P,fnSelect:B,excludes:"item_had_which_item_id"},null,8,["show"])],64)}}});export{Qe as default};
