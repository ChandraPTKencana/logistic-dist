import{r as a,P as w,g as y,$ as h,o as x,c as g,a as s,d as k,k as T,A as C,l as N,m as I,C as A,n as B,x as d,y as M}from"./entry.4e8b375c.js";import{u as P}from"./useMyFetch.0b4b0401.js";const S={key:0,class:"flex items-center justify-center absolute top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},V={action:"#",class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},$={class:"w-full"},j={class:"flex w-full justify-between mt-5"},z={__name:"GAPIN",props:{show:{type:Number,required:!0}},emits:["setTimeout"],setup(f,{emit:r}){const i=a(null);w(()=>{setTimeout(()=>{i.value.focus()},1)});const c=a({}),m=y("token"),o=a(""),n=a(0),p=async()=>{d().loading_full=!0,c.value={};const u=new FormData;u.append("pin",o.value);let t="post";const{data:l,error:b,status:_}=await P("/ga_pin",{method:t,headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},body:u,retry:0});if(d().loading_full=!1,_.value==="error"){M().trigger(b,c);return}r("setTimeout",l.value),n.value=l.value,o.value="",v()};let e=null;const v=()=>{e==null&&(e=setInterval(()=>{n.value--,n.value<=0&&(clearInterval(e),e=null,r("setTimeout",0))},1e3))};return h(()=>{clearInterval(e),e=null,r("setTimeout",0)}),(u,t)=>f.show==0?(x(),g("div",S,[s("form",V,[s("div",$,[k(" Enter PIN "),T(s("input",{ref_key:"it_pin",ref:i,type:"text",class:"w-full","onUpdate:modelValue":t[0]||(t[0]=l=>I(o)?o.value=l:null)},null,512),[[C,N(o)]])]),s("div",j,[s("button",{type:"submit",onClick:t[1]||(t[1]=A(l=>p(),["prevent"])),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Submit ")])])])):B("",!0)}};export{z as default};
