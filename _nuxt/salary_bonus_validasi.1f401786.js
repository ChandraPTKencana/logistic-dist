import{_ as $}from"./HeaderPopup.vue.b957002f.js";import{_ as B}from"./WidthMiniPart.vue.5fc5af70.js";import H from"./AttachmentSingle.19029613.js";import{r as f,g as P,f as F,k as V,L as q,o as v,c,a as t,b,t as o,l,n as p,D as j,H as T,x as y,y as N,p as O,e as z}from"./entry.b6435505.js";import{u as E}from"./useUtils.0b394513.js";import{u as Y}from"./useMyFetch.f12a4475.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.cfc2c3dd.js";import"./PDFJsView.46ea3f3d.js";const m=i=>(O("data-v-9d945206"),i=i(),z(),i),K={class:"box-fixed"},U={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},L={class:"w-full flex flex-col items-center grow overflow-auto"},W={class:"w-full flex flex-row flex-wrap"},G={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Q=m(()=>t("label",{for:""},"Tipe",-1)),R={class:"card-border"},X={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Z=m(()=>t("label",{for:""},"Tanggal",-1)),ee={class:"card-border"},ae={class:"w-full sm:w-8/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},le=m(()=>t("label",{for:""},"Pekerja",-1)),te={class:"card-border"},se={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},oe=m(()=>t("label",{for:""},"Nominal",-1)),ie={class:"card-border"},ne={class:"w-full sm:w-6/12 md:w-full lg:w-full flex flex-col flex-wrap p-1"},re=m(()=>t("label",{for:""},"Note",-1)),_e={class:"card-border"},de={class:"p-1 w-full"},ue={class:"w-full flex items-center justify-end"},ve={class:"w-full flex flex-wrap p-3 items-center"},ce=m(()=>t("div",null," Di Validasi oleh : ",-1)),me={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},fe={key:0},pe={key:1},we={key:2},ye={__name:"salary_bonus_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const n=i,{$moment:w}=T(),{pointFormat:A}=E(),x={id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""},e=f({...x}),g=P("token"),k=f({}),D=f(null);f([]);const r=f(JSON.parse(JSON.stringify({_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},ktp_no:{tcon:"IconsNumber",text:"No KTP",val:""},sim_no:{tcon:"IconsCreditCard",text:"No SIM",val:""}},id:"",name:"",title:""}))),C=async()=>{y().loading_full=!0,k.value={};const _=new FormData;let s="post",u=n.id;u==0||(_.append("id",u),_.append("_method","PUT"));const{data:a,error:h,status:d}=await Y("/salary_bonus_validasi",{method:s,headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:_,retry:0});if(y().loading_full=!1,d.value==="error"){N().trigger(h,k);return}e.value.val=a.value.val,e.value.val_user=a.value.val_user,e.value.val_by=a.value.val_by,e.value.val_at=a.value.val_at,e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at;let S=n.p_data.map(I=>I.id).indexOf(n.id);S>-1&&n.p_data.splice(S,1,{...e.value}),n.fnClose()},M=async()=>{y().loading_full=!0;const{data:_,error:s,status:u}=await Y("/salary_bonus",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(y().loading_full=!1,u.value==="error"){N().trigger(s);return}let a=_.value.data;e.value=a,r.value._.id.val=a.employee.id,r.value._.name.val=a.employee.name,r.value._.ktp_no.val=a.employee.ktp_no,r.value._.sim_no.val=a.employee.sim_no,r.value.id=a.employee.id,r.value.name=a.employee.name,r.value.ktp_no=(a.employee.ktp_no||"")+" "+(a.employee.sim_no||"")};return F(()=>n.show,(_,s)=>{_==!0&&(e.value={...x},n.is_view==!1&&setTimeout(()=>{D.value.focus()},1),M())},{immediate:!0}),(_,s)=>{const u=$,a=B,h=H;return V((v(),c("section",K,[t("div",null,[b(u,{title:"Form Salary Additional Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",U,[t("div",L,[t("div",W,[t("div",G,[Q,t("div",R,o(l(e).type),1)]),t("div",X,[Z,t("div",ee,o(l(w)(l(e).tanggal).format("DD-MM-Y")),1)]),t("div",ae,[le,t("div",te,[b(a,{selected:l(r)},null,8,["selected"])])]),t("div",se,[oe,t("div",ie,o(l(A)(l(e).nominal||0)),1)]),t("div",ne,[re,t("div",_e,o(l(e).note),1)]),t("div",de,[b(h,{label:"Attachment",value:l(e).attachment_1_preview,onSetFile:s[0]||(s[0]=d=>l(e).attachment_1=d),onSetPreview:s[1]||(s[1]=d=>l(e).attachment_1_preview=d)},null,8,["value"])])])]),t("div",ue,[t("div",ve,[ce,l(e).val1||l(e).val2||l(e).val3?(v(),c("div",me,[l(e).val1?(v(),c("div",fe," App 1 : "+o(l(e).val1_by.username)+" ( "+o(l(e).val1_at?l(w)(l(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):p("",!0),l(e).val2?(v(),c("div",pe," App 2 : "+o(l(e).val2_by.username)+" ( "+o(l(e).val2_at?l(w)(l(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):p("",!0),l(e).val3?(v(),c("div",we," App 2 : "+o(l(e).val3_by.username)+" ( "+o(l(e).val3_at?l(w)(l(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):p("",!0)])):p("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[2]||(s[2]=d=>i.fnClose())}," Cancel "),i.is_view==0?(v(),c("button",{key:0,ref_key:"it_val",ref:D,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[3]||(s[3]=j(d=>C(),["prevent"]))}," Validasi ",512)):p("",!0)])])])],512)),[[q,i.show]])}}},Ce=J(ye,[["__scopeId","data-v-9d945206"]]);export{Ce as default};
