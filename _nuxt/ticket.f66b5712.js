import{_ as et}from"./Header.71ed6a7a.js";import{_ as tt}from"./Edit.468b824a.js";import{_ as lt}from"./Eyes.a945b41c.js";import{_ as at}from"./Void.93e3bfbf.js";import{_ as ot}from"./Signature.51267873.js";import{_ as st}from"./Cog.2717c1b9.js";import{_ as it,a as _t}from"./trx_absen.1f0716fb.js";import{_ as rt,a as nt}from"./Check.35d029cf.js";import{_ as dt}from"./TableView.8cb0d023.js";import{_ as ct}from"./PopupMini.vue.47efb420.js";import{_ as $e}from"./HeaderPopup.vue.185b5495.js";import{_ as De}from"./client-only.5c3a87a2.js";import{_ as ut}from"./InputPointFormat.vue.fff0433c.js";import{r as h,f as te,J as R,g as Z,L as Te,h as z,v as Me,o as r,c,a as t,b as g,t as o,k as e,G as u,l as je,j as xe,F as he,n as ye,w as K,m as Se,s as de,x as j,y as q,p as Pe,e as Ae,M as Ce,D as ft,B as pt,H as ge,I as vt,i as bt,d as X,q as mt,E as wt,K as L}from"./entry.d239d820.js";import{u as Be}from"./useUtils.807de404.js";import{u as I}from"./useMyFetch.75d43dc0.js";import{_ as Ne}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as kt}from"./Times.74e0f3d2.js";import"./Search.547d4f6a.js";const m=T=>(Pe("data-v-354c0a18"),T=T(),Ae(),T),xt={class:"box-fixed"},ht={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},yt={class:"w-full flex flex-col items-center grow overflow-auto"},gt={class:"w-full flex flex-row flex-wrap"},$t={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dt=m(()=>t("label",{for:""},"U.Jalan Per",-1)),Tt={class:"card-border"},Mt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jt=m(()=>t("label",{for:""},"Jenis",-1)),St={class:"card-border"},Pt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},At=m(()=>t("label",{for:""},"Supir",-1)),Ct={class:"card-border"},Bt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nt=m(()=>t("label",{for:""},"Kernet",-1)),Ht={class:"card-border"},Ot={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yt=m(()=>t("label",{for:""},"No Pol",-1)),Kt={class:"card-border"},qt={key:0,class:"w-full flex flex-wrap"},It={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ft=m(()=>t("label",{for:""},"Tujuan",-1)),Vt={class:"card-border"},Ut={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Lt=m(()=>t("label",{for:""},"Tipe",-1)),Rt={class:"card-border"},zt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Jt=m(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Et={class:"card-border"},Gt=m(()=>t("label",{for:""},"Peralihan",-1)),Xt=Ce('<option value="" data-v-354c0a18></option><option value="KPN" data-v-354c0a18>KPN</option><option value="KAS" data-v-354c0a18>KAS</option><option value="KUS" data-v-354c0a18>KUS</option><option value="ARP" data-v-354c0a18>ARP</option><option value="KAP" data-v-354c0a18>KAP</option><option value="SMP" data-v-354c0a18>SMP</option>',7),Zt=[Xt],Qt={class:"text-red-500"},Wt={key:2,class:"w-full flex flex-col flex-wrap p-1"},el=m(()=>t("label",{for:""},"Tiket A",-1)),tl={id:"ticket_a"},ll=["value"],al={class:"text-red-500"},ol={key:3,class:"w-full flex flex-wrap"},sl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},il=m(()=>t("label",{for:""},"In At",-1)),_l={class:"card-border disabled"},rl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},nl=m(()=>t("label",{for:""},"Out At",-1)),dl={class:"card-border disabled"},cl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ul=m(()=>t("label",{for:""},"Bruto",-1)),fl={class:"card-border disabled"},pl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},vl=m(()=>t("label",{for:""},"Tara",-1)),bl={class:"card-border disabled"},ml={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},wl=m(()=>t("label",{for:""},"Netto",-1)),kl={class:"card-border disabled"},xl={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},hl=m(()=>t("label",{for:""},"No Pol",-1)),yl={class:"card-border disabled"},gl={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},$l=m(()=>t("label",{for:""},"Supir",-1)),Dl={class:"card-border disabled"},Tl={key:4,class:"w-full flex flex-col flex-wrap p-1"},Ml=m(()=>t("label",{for:""},"Tiket B",-1)),jl={id:"ticket_b"},Sl=["value"],Pl={class:"text-red-500"},Al={key:5,class:"w-full flex flex-wrap"},Cl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bl=m(()=>t("label",{for:""},"In At",-1)),Nl={class:"card-border disabled"},Hl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ol=m(()=>t("label",{for:""},"Out At",-1)),Yl={class:"card-border disabled"},Kl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ql=m(()=>t("label",{for:""},"Bruto ",-1)),Il={class:"card-border disabled"},Fl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Vl=m(()=>t("label",{for:""},"Tara ",-1)),Ul={class:"card-border disabled"},Ll={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Rl=m(()=>t("label",{for:""},"Netto ",-1)),zl={class:"card-border disabled"},Jl={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},El=m(()=>t("label",{for:""},"No Pol",-1)),Gl={class:"card-border disabled"},Xl={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Zl=m(()=>t("label",{for:""},"Supir",-1)),Ql={class:"card-border disabled"},Wl={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},ea=m(()=>t("label",{for:""},"In At",-1)),ta={class:"text-red-500"},la={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},aa=m(()=>t("label",{for:""},"Out At",-1)),oa={class:"text-red-500"},sa={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ia=m(()=>t("label",{for:""},"Bruto",-1)),_a={class:"text-red-500"},ra={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},na=m(()=>t("label",{for:""},"Tara",-1)),da={class:"text-red-500"},ca={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ua=m(()=>t("label",{for:""},"Netto",-1)),fa={class:"card-border disabled"},pa={class:"w-full flex items-center justify-end"},va={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(T){const w=T,{$moment:$}=de(),{pointFormat:y}=Be(),F={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",transition_to:""};let a={...F};const l=h({...F}),D=te("token"),A=h({}),C=s=>{l.value.jenis=="TBS"&&w.fnLoadDBData(l.value.jenis,s.target.value)},S=async()=>{j().loading_full=!0,A.value={};const s=new FormData;if(s.append("tanggal",$(l.value.tanggal).format("Y-MM-DD")),s.append("jenis",l.value.jenis),s.append("id_uj",l.value.id_uj),s.append("xto",l.value.xto),s.append("online_status",w.online_status),s.append("transition_to",l.value.transition_to),l.value.ticket_a_no){let _=H.value.filter(V=>V.TicketNo==l.value.ticket_a_no);_.length==0&&l.value.ticket_a_no==a.ticket_a_no?s.append("ticket_a_id",a.ticket_a_id):s.append("ticket_a_id",_[0].TicketID)}if(l.value.ticket_b_no){let _=M.value.filter(V=>V.TicketNo==l.value.ticket_b_no);_.length==0&&l.value.ticket_b_no==a.ticket_b_no?s.append("ticket_b_id",a.ticket_b_id):s.append("ticket_b_id",_[0].TicketID)}s.append("ticket_a_no",l.value.ticket_a_no),s.append("ticket_b_no",l.value.ticket_b_no),s.append("ticket_b_bruto",l.value.ticket_b_bruto),s.append("ticket_b_tara",l.value.ticket_b_tara),l.value.ticket_b_in_at&&s.append("ticket_b_in_at",$(l.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),l.value.ticket_b_out_at&&s.append("ticket_b_out_at",$(l.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),s.append("supir",l.value.supir),s.append("kernet",l.value.kernet),s.append("no_pol",l.value.no_pol);let f="post",d=w.id;d==0||(s.append("id",d),s.append("_method","PUT"));const{data:B,error:b,status:N}=await I("/trx_trp_ticket",{method:f,headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:s,retry:0});if(j().loading_full=!1,N.value==="error"){q().trigger(b,A);return}if(l.value.ticket_a_netto=parseFloat(l.value.ticket_a_bruto)-parseFloat(l.value.ticket_a_tara),l.value.ticket_b_netto=parseFloat(l.value.ticket_b_bruto)-parseFloat(l.value.ticket_b_tara),l.value.updated_at=B.value.updated_at,w.id<=0)l.value.id=B.value.id,l.value.created_at=B.value.created_at,w.p_data.unshift(l.value);else{let _=w.p_data.map(V=>V.id).indexOf(w.id);_>=-1&&w.p_data.splice(_,1,{...l.value})}w.fnClose()},H=R(()=>{let s=[];return l.value.jenis=="CPO"?s=["cpo"]:l.value.jenis=="PK"?s=["kernel"]:s=["mtbs"],w.list_ticket.filter(f=>s.indexOf(f.ProductName.toLowerCase())>-1)}),M=R(()=>{let s=[];return l.value.jenis=="TBSK"||l.value.transition_to!=""?s=["tbs"]:l.value.jenis=="TBS"&&(s=["rtbs"]),w.list_ticket.filter(f=>s.indexOf(f.ProductName.toLowerCase())>-1)}),J=R(()=>!1),x=async()=>{j().loading_full=!0;const{data:s,error:f,status:d}=await I("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(j().loading_full=!1,d.value==="error"){q().trigger(f);return}l.value=s.value.data,a={...s.value.data},w.fnLoadDBData(l.value.jenis,l.value.transition_to)};Z(()=>w.show,(s,f)=>{s==!0&&(l.value={...F},A.value={},w.id!=0&&x())},{immediate:!0});let k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return Z(()=>l.value.ticket_a_no,(s,f)=>{if(s==""||s){if(s){let d=H.value.filter(B=>B.TicketNo==l.value.ticket_a_no);d.length>0?k={id:d[0].TicketID,bruto:d[0].Bruto,tara:d[0].Tara,netto:d[0].Netto,supir:d[0].NamaSupir,no_pol:d[0].VehicleNo,in_at:d[0].DateTimeIn,out_at:d[0].DateTimeOut}:l.value.ticket_a_no==a.ticket_a_no&&(k={id:a.ticket_a_id,bruto:a.ticket_a_bruto,tara:a.ticket_a_tara,netto:a.ticket_a_netto,supir:a.ticket_a_supir,no_pol:a.ticket_a_no_pol,in_at:a.ticket_a_in_at,out_at:a.ticket_a_out_at})}s==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),l.value.ticket_a_id=k.id,l.value.ticket_a_bruto=k.bruto,l.value.ticket_a_tara=k.tara,l.value.ticket_a_netto=k.netto,l.value.ticket_a_in_at=k.in_at,l.value.ticket_a_out_at=k.out_at,l.value.ticket_a_supir=k.supir,l.value.ticket_a_no_pol=k.no_pol}},{deep:!0,immediate:!0}),Z(()=>l.value.ticket_b_no,(s,f)=>{if(["TBS","TBSK"].indexOf(l.value.jenis)>-1&&(s==""||s)){if(s){let d=M.value.filter(B=>B.TicketNo==l.value.ticket_b_no);d.length>0?k={id:d[0].TicketID,bruto:d[0].Bruto,tara:d[0].Tara,netto:d[0].Netto,supir:d[0].NamaSupir,no_pol:d[0].VehicleNo,in_at:d[0].DateTimeIn,out_at:d[0].DateTimeOut}:l.value.ticket_b_no==a.ticket_b_no&&(k={id:a.ticket_b_id,bruto:a.ticket_b_bruto,tara:a.ticket_b_tara,netto:a.ticket_b_netto,supir:a.ticket_b_supir,no_pol:a.ticket_b_no_pol,in_at:a.ticket_b_in_at,out_at:a.ticket_b_out_at})}s==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),l.value.ticket_b_id=k.id,l.value.ticket_b_bruto=k.bruto,l.value.ticket_b_tara=k.tara,l.value.ticket_b_netto=k.netto,l.value.ticket_b_in_at=k.in_at,l.value.ticket_b_out_at=k.out_at,l.value.ticket_b_supir=k.supir,l.value.ticket_b_no_pol=k.no_pol}},{deep:!0,immediate:!0}),(s,f)=>{const d=$e,B=Te("vue-date-picker"),b=De,N=ut;return z((r(),c("section",xt,[t("div",null,[g(d,{title:"Form Transaction",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ht,[t("div",yt,[t("div",gt,[t("div",$t,[Dt,t("div",Tt,o(e(l).tanggal?e($)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Mt,[jt,t("div",St,o(e(l).jenis),1)]),t("div",Pt,[At,t("div",Ct,o(e(l).supir),1)]),t("div",Bt,[Nt,t("div",Ht,o(e(l).kernet),1)]),t("div",Ot,[Yt,t("div",Kt,o(e(l).no_pol),1)]),e(l).jenis!=""?(r(),c("div",qt,[t("div",It,[Ft,t("div",Vt,o(e(l).xto),1)]),t("div",Ut,[Lt,t("div",Rt,o(e(l).tipe),1)]),t("div",zt,[Jt,t("div",Et,o(e(y)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis=="TBS"?(r(),c("div",{key:1,class:"w-full p-1",onChange:f[1]||(f[1]=_=>C(_))},[Gt,z(t("select",{"onUpdate:modelValue":f[0]||(f[0]=_=>e(l).transition_to=_)},Zt,512),[[je,e(l).transition_to]]),t("p",Qt,o(e(A).transition_to),1)],32)):u("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),c("div",Wt,[el,z(t("input",{type:"text",list:"ticket_a","onUpdate:modelValue":f[2]||(f[2]=_=>e(l).ticket_a_no=_)},null,512),[[xe,e(l).ticket_a_no]]),t("datalist",tl,[(r(!0),c(he,null,ye(e(H),_=>(r(),c("option",{value:_.TicketNo},o(_.TicketNo+"-"+_.VehicleNo+"-"+_.NamaSupir),9,ll))),256))]),t("p",al,o(e(A).ticket),1)])):u("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),c("div",ol,[t("div",sl,[il,t("div",_l,o(e(l).ticket_a_in_at?e($)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",rl,[nl,t("div",dl,o(e(l).ticket_a_out_at?e($)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",cl,[ul,t("div",fl,o(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto):0),1)]),t("div",pl,[vl,t("div",bl,o(e(l).ticket_a_tara?e(y)(e(l).ticket_a_tara):0),1)]),t("div",ml,[wl,t("div",kl,o(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto-e(l).ticket_a_tara):0),1)]),t("div",xl,[hl,t("div",yl,o(e(l).ticket_a_no_pol),1)]),t("div",gl,[$l,t("div",Dl,o(e(l).ticket_a_supir),1)])])):u("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),c("div",Tl,[Ml,z(t("input",{type:"text",list:"ticket_b","onUpdate:modelValue":f[3]||(f[3]=_=>e(l).ticket_b_no=_)},null,512),[[xe,e(l).ticket_b_no]]),t("datalist",jl,[(r(!0),c(he,null,ye(e(M),_=>(r(),c("option",{value:_.TicketNo},o(_.TicketNo+"-"+_.VehicleNo+"-"+_.NamaSupir),9,Sl))),256))]),t("p",Pl,o(e(A).ticket),1)])):u("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),c("div",Al,[t("div",Cl,[Bl,t("div",Nl,o(e(l).ticket_b_in_at?e($)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Hl,[Ol,t("div",Yl,o(e(l).ticket_b_out_at?e($)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Kl,[ql,t("div",Il,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto):0),1)]),t("div",Fl,[Vl,t("div",Ul,o(e(l).ticket_b_tara?e(y)(e(l).ticket_b_tara):0),1)]),t("div",Ll,[Rl,t("div",zl,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)]),t("div",Jl,[El,t("div",Gl,o(e(l).ticket_b_no_pol),1)]),t("div",Xl,[Zl,t("div",Ql,o(e(l).ticket_b_supir),1)])])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),c("div",Wl,[ea,g(b,null,{default:K(()=>[g(B,{modelValue:e(l).ticket_b_in_at,"onUpdate:modelValue":f[4]||(f[4]=_=>e(l).ticket_b_in_at=_),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",ta,o(e(A).ticket_b_in_at),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),c("div",la,[aa,g(b,null,{default:K(()=>[g(B,{modelValue:e(l).ticket_b_out_at,"onUpdate:modelValue":f[5]||(f[5]=_=>e(l).ticket_b_out_at=_),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",oa,o(e(A).ticket_b_out_at),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),c("div",sa,[ia,t("div",null,[g(N,{class:"card-border p-1",type:"text",value:e(l).ticket_b_bruto||0,onInput:f[6]||(f[6]=_=>e(l).ticket_b_bruto=_),show:T.show},null,8,["value","show"])]),t("p",_a,o(e(A).ticket_b_bruto),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),c("div",ra,[na,t("div",null,[g(N,{class:"card-border p-1",type:"text",value:e(l).ticket_b_tara||0,onInput:f[7]||(f[7]=_=>e(l).ticket_b_tara=_),show:T.show},null,8,["value","show"])]),t("p",da,o(e(A).ticket_b_tara),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),c("div",ca,[ua,t("div",fa,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)])):u("",!0)])]),t("div",pa,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:f[8]||(f[8]=_=>T.fnClose())}," Cancel "),e(J)?u("",!0):(r(),c("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:f[9]||(f[9]=Se(_=>S(),["prevent"]))}," Save "))])])])],512)),[[Me,T.show]])}}},ba=Ne(va,[["__scopeId","data-v-354c0a18"]]);const v=T=>(Pe("data-v-19b2ff48"),T=T(),Ae(),T),ma={class:"box-fixed"},wa={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ka={class:"w-full flex flex-col items-center grow overflow-auto"},xa={class:"w-full flex flex-row flex-wrap"},ha={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ya=v(()=>t("label",{for:""},"U.Jalan Per",-1)),ga={class:"card-border"},$a={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Da=v(()=>t("label",{for:""},"Jenis",-1)),Ta={class:"card-border"},Ma={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ja=v(()=>t("label",{for:""},"Supir",-1)),Sa={class:"card-border"},Pa={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Aa=v(()=>t("label",{for:""},"Kernet",-1)),Ca={class:"card-border"},Ba={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Na=v(()=>t("label",{for:""},"No Pol",-1)),Ha={class:"card-border"},Oa={key:0,class:"w-full flex flex-wrap"},Ya={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ka=v(()=>t("label",{for:""},"Tujuan",-1)),qa={class:"card-border"},Ia={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Fa=v(()=>t("label",{for:""},"Tipe",-1)),Va={class:"card-border"},Ua={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},La=v(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Ra={class:"card-border"},za={key:1,class:"w-full p-1"},Ja=v(()=>t("label",{for:""},"Peralihan",-1)),Ea={class:"card-border"},Ga={key:2,class:"w-full flex flex-col flex-wrap p-1"},Xa=v(()=>t("label",{for:""},"Tiket A",-1)),Za={class:"card-border"},Qa={key:3,class:"w-full flex flex-wrap"},Wa={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},eo=v(()=>t("label",{for:""},"In At",-1)),to={class:"card-border disabled"},lo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ao=v(()=>t("label",{for:""},"Out At",-1)),oo={class:"card-border disabled"},so={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},io=v(()=>t("label",{for:""},"Bruto",-1)),_o={class:"card-border disabled"},ro={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},no=v(()=>t("label",{for:""},"Tara",-1)),co={class:"card-border disabled"},uo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fo=v(()=>t("label",{for:""},"Netto",-1)),po={class:"card-border disabled"},vo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},bo=v(()=>t("label",{for:""},"No Pol",-1)),mo={class:"card-border disabled"},wo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ko=v(()=>t("label",{for:""},"Supir",-1)),xo={class:"card-border disabled"},ho={key:4,class:"w-full flex flex-col flex-wrap p-1"},yo=v(()=>t("label",{for:""},"Tiket B",-1)),go={class:"card-border"},$o={key:5,class:"w-full flex flex-wrap"},Do={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},To=v(()=>t("label",{for:""},"In At",-1)),Mo={class:"card-border disabled"},jo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},So=v(()=>t("label",{for:""},"Out At",-1)),Po={class:"card-border disabled"},Ao={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Co=v(()=>t("label",{for:""},"Bruto ",-1)),Bo={class:"card-border disabled"},No={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ho=v(()=>t("label",{for:""},"Tara ",-1)),Oo={class:"card-border disabled"},Yo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ko=v(()=>t("label",{for:""},"Netto ",-1)),qo={class:"card-border disabled"},Io={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Fo=v(()=>t("label",{for:""},"No Pol",-1)),Vo={class:"card-border disabled"},Uo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Lo=v(()=>t("label",{for:""},"Supir",-1)),Ro={class:"card-border disabled"},zo={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Jo=v(()=>t("label",{for:""},"In At",-1)),Eo={class:"card-border"},Go={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Xo=v(()=>t("label",{for:""},"Out At",-1)),Zo={class:"card-border"},Qo={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Wo=v(()=>t("label",{for:""},"Bruto",-1)),es={class:"card-border"},ts={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ls=v(()=>t("label",{for:""},"Tara",-1)),as={class:"card-border"},os={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ss=v(()=>t("label",{for:""},"Netto",-1)),is={class:"card-border"},_s={class:"w-full flex items-center justify-end"},rs={class:"w-full flex flex-wrap p-3 items-center"},ns=v(()=>t("div",null," Di Validasi oleh : ",-1)),ds={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},cs={key:0},us={key:1},fs={key:2},ps={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(T){const w=T,{$moment:$}=de(),{pointFormat:y}=Be(),a=h({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),l=te("token"),D=async()=>{j().loading_full=!0;const C=new FormData;let S="post",H=w.id;H==0||(C.append("id",H),C.append("_method","PUT"));const{data:M,error:J,status:x}=await I("/trx_trp_validasi",{method:S,headers:{Authorization:`Bearer ${l.value}`,Accept:"application/json"},body:C,retry:0});if(j().loading_full=!1,x.value==="error"){q().trigger(J);return}a.value.val=M.value.val,a.value.val_user=M.value.val_user,a.value.val_by=M.value.val_by,a.value.val_at=M.value.val_at,a.value.val1=M.value.val1,a.value.val1_user=M.value.val1_user,a.value.val1_by=M.value.val1_by,a.value.val1_at=M.value.val1_at,a.value.val2=M.value.val2,a.value.val2_user=M.value.val2_user,a.value.val2_by=M.value.val2_by,a.value.val2_at=M.value.val2_at;let k=w.p_data.map(s=>s.id).indexOf(w.id);k>=-1&&w.p_data.splice(k,1,{...a.value}),w.fnClose()},A=async()=>{j().loading_full=!0;const{data:C,error:S,status:H}=await I("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${l.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(j().loading_full=!1,H.value==="error"){q().trigger(S);return}a.value=C.value.data};return Z(()=>w.show,(C,S)=>{C==!0&&A()},{immediate:!0}),(C,S)=>{const H=$e;return z((r(),c("section",ma,[t("div",null,[g(H,{title:"Form Transaction Validation",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",wa,[t("div",ka,[t("div",xa,[t("div",ha,[ya,t("div",ga,o(e(a).tanggal?e($)(e(a).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",$a,[Da,t("div",Ta,o(e(a).jenis),1)]),t("div",Ma,[ja,t("div",Sa,o(e(a).supir),1)]),t("div",Pa,[Aa,t("div",Ca,o(e(a).kernet),1)]),t("div",Ba,[Na,t("div",Ha,o(e(a).no_pol),1)]),e(a).jenis!=""?(r(),c("div",Oa,[t("div",Ya,[Ka,t("div",qa,o(e(a).xto),1)]),t("div",Ia,[Fa,t("div",Va,o(e(a).tipe),1)]),t("div",Ua,[La,t("div",Ra,o(e(y)(e(a).amount||0)),1)])])):u("",!0),e(a).jenis=="TBS"?(r(),c("div",za,[Ja,t("div",Ea,o(e(a).transition_to),1)])):u("",!0),e(a).jenis!=""&&e(a).jenis!="TBSK"?(r(),c("div",Ga,[Xa,t("div",Za,o(e(a).ticket_a_no),1)])):u("",!0),e(a).jenis!=""&&e(a).jenis!="TBSK"?(r(),c("div",Qa,[t("div",Wa,[eo,t("div",to,o(e(a).ticket_a_in_at?e($)(e(a).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",lo,[ao,t("div",oo,o(e(a).ticket_a_out_at?e($)(e(a).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",so,[io,t("div",_o,o(e(a).ticket_a_bruto?e(y)(e(a).ticket_a_bruto):0),1)]),t("div",ro,[no,t("div",co,o(e(a).ticket_a_tara?e(y)(e(a).ticket_a_tara):0),1)]),t("div",uo,[fo,t("div",po,o(e(a).ticket_a_bruto?e(y)(e(a).ticket_a_bruto-e(a).ticket_a_tara):0),1)]),t("div",vo,[bo,t("div",mo,o(e(a).ticket_a_no_pol),1)]),t("div",wo,[ko,t("div",xo,o(e(a).ticket_a_supir),1)])])):u("",!0),["TBS","TBSK"].indexOf(e(a).jenis)>-1?(r(),c("div",ho,[yo,t("div",go,o(e(a).ticket_b_no),1)])):u("",!0),["TBS","TBSK"].indexOf(e(a).jenis)>-1?(r(),c("div",$o,[t("div",Do,[To,t("div",Mo,o(e(a).ticket_b_in_at?e($)(e(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",jo,[So,t("div",Po,o(e(a).ticket_b_out_at?e($)(e(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ao,[Co,t("div",Bo,o(e(a).ticket_b_bruto?e(y)(e(a).ticket_b_bruto):0),1)]),t("div",No,[Ho,t("div",Oo,o(e(a).ticket_b_tara?e(y)(e(a).ticket_b_tara):0),1)]),t("div",Yo,[Ko,t("div",qo,o(e(a).ticket_b_bruto?e(y)(e(a).ticket_b_bruto-e(a).ticket_b_tara):0),1)]),t("div",Io,[Fo,t("div",Vo,o(e(a).ticket_b_no_pol),1)]),t("div",Uo,[Lo,t("div",Ro,o(e(a).ticket_b_supir),1)])])):u("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),c("div",zo,[Jo,t("div",Eo,o(e(a).ticket_b_in_at?e($)(e(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),c("div",Go,[Xo,t("div",Zo,o(e(a).ticket_b_out_at?e($)(e(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),c("div",Qo,[Wo,t("div",es,o(e(y)(e(a).ticket_b_bruto||0)),1)])):u("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),c("div",ts,[ls,t("div",as,o(e(y)(e(a).ticket_b_tara||0)),1)])):u("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),c("div",os,[ss,t("div",is,o(e(y)(e(a).ticket_b_netto||0)),1)])):u("",!0)])]),t("div",_s,[t("div",rs,[ns,e(a).val||e(a).val1||e(a).val2?(r(),c("div",ds,[e(a).val?(r(),c("div",cs," App 1 : "+o(e(a).val_by.username)+" ( "+o(e(a).val_at?e($)(e(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(a).val1?(r(),c("div",us," App 2 : "+o(e(a).val1_by.username)+" ( "+o(e(a).val1_at?e($)(e(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(a).val2?(r(),c("div",fs," App 3 : "+o(e(a).val2_by.username)+" ( "+o(e(a).val2_at?e($)(e(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:S[0]||(S[0]=M=>T.fnClose())}," Cancel "),T.is_view==0?(r(),c("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:S[1]||(S[1]=Se(M=>D(),["prevent"]))}," Validasi ")):u("",!0)])])])],512)),[[Me,T.show]])}}},vs=Ne(ps,[["__scopeId","data-v-19b2ff48"]]),bs={class:"w-full h-full flex flex-col"},ms={class:"w-full flex grow flex-col overflow-auto h-0"},ws={class:"w-full flex justify-between flex-wrap"},ks={class:"grow flex"},xs={class:"m-1"},hs=Ce('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),ys=[hs],gs={class:"flex"},$s=t("span",{class:"text-xs"},"Mode",-1),Ds=t("b",null,"tidak dapat dibatalkan lagi",-1),Ts={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Ms={class:"relative",style:{width:"95%",height:"90%"}},js={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ss={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Ps={class:"w-full p-1"},As={class:"w-full p-1 bg-gray-200"},Cs=t("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),Bs={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},Ns={class:"flex flex-col flex-wrap p-1"},Hs=t("label",{for:""},"From",-1),Os={class:"grow"},Ys={class:"flex flex-col flex-wrap p-1"},Ks=t("label",{for:""},"To",-1),qs={class:"grow"},ii={__name:"ticket",async setup(T){let w,$;const{$moment:y}=de(),F=n=>n.deleted==1?"!bg-red-400":n.req_deleted==1?"!bg-yellow-300":["CPO","PK"].indexOf(n.jenis)>-1&&(n.ticket_a_id>0||n.ticket_b_bruto>0||n.ticket_b_tara>0||n.ticket_b_netto>0||n.ticket_b_in_at!=""||n.ticket_b_out_at!="")||n.jenis=="TBS"&&(n.ticket_a_id>0||n.ticket_b_id>0)||n.jenis=="TBSK"&&n.ticket_b_id>0?"!bg-blue-300":"",a=n=>(n.map(i=>{i.class_h=F(i)}),n),l=h("ticket_not_done");Z(()=>l.value,n=>{me.value.map(i=>{let Y=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(i.key)>-1;return["all","deleted","req_deleted"].indexOf(n)>-1?Y&&(i.tbl_show=1):Y&&(i.tbl_show=0),i}),ue()},{immediate:!1});const D={};D._TimeZoneOffset=new Date().getTimezoneOffset(),D.sort="tanggal:desc";const A=h({}),C=h({from:"",to:""}),S=te("token"),H=te("role"),M=n=>n.includes(H.value),{data:J}=([w,$]=ft(async()=>wt(async()=>{j().loading_full=!0;let n=[];const[i,Y]=await Promise.all([I("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:{filter_status:l},retry:0})]);return i.status.value!=="error"&&(n=a(i.data.value.data)),i.status.value==="error"?(q().trigger(i.error),{trx_trps:n}):(j().loading_full=!1,{trx_trps:n})},"$X4xCu6yBOs")),w=await w,$(),w),x=h(J.value.trx_trps||[]),k=h([]),s=h(!1),f=async(n,i="")=>{j().loading_full=!0;let Y=P.value.from?y(P.value.from).format("Y-MM-DD"):"",G=P.value.to?y(P.value.to).format("Y-MM-DD"):"";const{data:O,error:ie,status:_e}=await I("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:{jenis:n,online_status:s.value,from:Y,to:G,transition_to:i},retry:0});if(j().loading_full=!1,_e.value==="error"){q().trigger(ie);return}k.value=O.value.list_ticket},d=h(""),B=h({field:"tanggal",by:"desc"}),b=h(-1),N=R(()=>x.value[b.value]),_=h({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),V=()=>{D.like="",d.value!=""&&(D.like=`id:%${d.value}%,xto:%${d.value}%,jenis:%${d.value}%,pv_no:%${d.value}%,ticket_a_no:%${d.value}%,ticket_b_no:%${d.value}%,no_pol:%${d.value}%,supir:%${d.value}%,kernet:%${d.value}%,cost_center_code:%${d.value}%,cost_center_desc:%${d.value}%,pvr_id:%${d.value}%,pvr_no:%${d.value}%,tanggal:%${d.value}%,transition_to:%${d.value}%`),D.sort="",B.value.field&&(D.sort=B.value.field+":"+B.value.by),D.date_from=C.value.from?y(C.value.from).format("YYYY-MM-DD"):"",D.date_to=C.value.to?y(C.value.to).format("YYYY-MM-DD"):"",D.filter_model=JSON.stringify(j()._tv.filter_model)},ce=async()=>{j().loading_full=!0,A.value={},_.value.may_get_data=!1,D.page=_.value.page,D.page==1&&(x.value=[]),D.first_row&&delete D.first_row,D.page>1&&(D.first_row=JSON.stringify(x.value[0])),D.filter_status=l.value;const{data:n,error:i,status:Y}=await I("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},params:D,retry:0});if(j().loading_full=!1,_.value.may_get_data=!0,Y.value==="error"){q().trigger(i,A);return}_.value.page==1?x.value=a(n.value.data):_.value.page>1&&(x.value=[...x.value,...a(n.value.data)]),n.value.data.length==0&&(_.value.is_last_record=!0),j()._tv.filter_box=!1},ue=()=>{b.value=-1,_.value.page=1,_.value.is_last_record=!1,V(),ce()};pt();const le=h(!1),fe=h(0),{display:Q}=ge();vt(ge());const He=()=>{b.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(fe.value=x.value[b.value].id,le.value=!0)},W=h(!1),ae=h(0),oe=h(!1),Oe=()=>{b.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ae.value=x.value[b.value].id,W.value=!0,oe.value=!1)},Ye=()=>{b.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ae.value=x.value[b.value].id,W.value=!0,oe.value=!0)},se=h(!1),pe=h(0),Ke=n=>{pe.value=n,se.value=!0},ve=h({}),E=h(!1),qe=h(""),Ie=async()=>{E.value&&(E.value=!1)},Fe=()=>{var n;b.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(qe.value="",ve.value={id:x.value[b.value].id,"no pol":x.value[b.value].no_pol,tujuan:x.value[b.value].xto,permintaan:(n=x.value[b.value].req_deleted_by)==null?void 0:n.username,alasan:x.value[b.value].req_deleted_reason},E.value=!0)},Ve=async()=>{j().loading_full=!0;const n=new FormData;n.append("id",x.value[b.value].id),n.append("_method","DELETE");const{data:i,error:Y,status:G}=await I("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${S.value}`,Accept:"application/json"},body:n,retry:0});if(j().loading_full=!1,G.value==="error"){q().trigger(Y);return}let O={...x.value[b.value]};O.deleted=i.value.deleted,O.deleted_user=i.value.deleted_user,O.deleted_at=i.value.deleted_at,O.deleted_by=i.value.deleted_by,O.deleted_reason=i.value.deleted_reason,O.class_h=F(O),l.value!="all"?x.value.splice(b.value,1):x.value.splice(b.value,1,{...O}),b.value=-1,E.value=!1},ee=h(!1),P=h({from:new Date().setDate(new Date().getDate()-3),to:new Date}),be=n=>{n=="from"?P.value.from-P.value.to>0&&(P.value.from=P.value.to):P.value.to-P.value.from<0&&(P.value.to=P.value.from)},me=h([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition_to",label:"Peralihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Ue=R(()=>b.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Le=R(()=>!M(["PabrikTransport"])&&b.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Re=R(()=>!M(["PabrikTransport"])&&b.value>-1&&N.value.deleted==0&&N.value.req_deleted==1&&N.value.val2==0);return(n,i)=>{const Y=et,G=tt,O=lt,ie=at,_e=ot,ze=st,Je=_t,re=rt,ne=nt,Ee=dt,Ge=ct,Xe=ba,Ze=vs,Qe=it,We=kt,we=Te("vue-date-picker"),ke=De;return r(),c("div",bs,[g(Y,{title:"List Transaction"}),t("div",ms,[t("div",ws,[t("div",ks,[t("div",xs,[z(t("select",{class:"","onUpdate:modelValue":i[0]||(i[0]=p=>bt(l)?l.value=p:null)},ys,512),[[je,e(l)]])]),e(Ue)?(r(),c("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[1]||(i[1]=p=>He())},[g(G)])):u("",!0),e(b)>-1?(r(),c("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[2]||(i[2]=p=>Ye())},[g(O)])):u("",!0),e(Re)?(r(),c("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[3]||(i[3]=p=>Fe())},[g(ie)])):u("",!0),e(Le)?(r(),c("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[4]||(i[4]=p=>Oe())},[g(_e)])):u("",!0)]),t("div",gs,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[5]||(i[5]=p=>ee.value=!0)},[g(ze)]),t("div",{class:"m-1 card-border cursor-pointer",onClick:i[6]||(i[6]=p=>s.value=!e(s))},[$s,X(" : "),t("span",{class:mt(["font-bold",e(s)?"text-green-600":"text-red-600"])},o(e(s)?"ONLINE":"OFFLINE"),3)])])]),g(Ee,{thead:e(me),selected:e(b),onSetSelected:i[7]||(i[7]=p=>b.value=p),tbody:e(x),fnCallData:ce,scrolling:e(_),onSetScrollingPage:i[8]||(i[8]=p=>e(_).page=p),onDoFilter:i[9]||(i[9]=p=>ue())},{absen:K(({item:p,index:U})=>[p.trx_absens&&p.trx_absens.length>0?(r(),L(Je,{key:0,class:"cursor-pointer",onClick:Is=>Ke(U)},null,8,["onClick"])):u("",!0)]),val:K(({item:p})=>[p.val?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),val1:K(({item:p})=>[p.val1?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),val2:K(({item:p})=>[p.val2?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),deleted_by_username:K(({item:p})=>{var U;return[X(o((U=p.deleted_by)==null?void 0:U.username),1)]}),req_deleted_by_username:K(({item:p})=>{var U;return[X(o((U=p.req_deleted_by)==null?void 0:U.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),g(Ge,{type:"custome",show:e(E),data:e(ve),fnClose:Ie,fnConfirm:Ve},{words:K(()=>[X(" Data akan diproses dan "),Ds,X(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),g(Xe,{show:e(le),fnClose:()=>{le.value=!1},fnLoadDBData:f,id:e(fe),p_data:e(x),list_ticket:e(k),online_status:e(s)},null,8,["show","fnClose","id","p_data","list_ticket","online_status"]),g(Ze,{show:e(W),fnClose:()=>{W.value=!1},id:e(ae),p_data:e(x),is_view:e(oe)},null,8,["show","fnClose","id","p_data","is_view"]),g(Qe,{show:e(se),fnClose:()=>{se.value=!1},index:e(pe),p_data:e(x)},null,8,["show","fnClose","index","p_data"]),e(ee)?(r(),c("div",Ts,[t("div",Ms,[t("div",js,[g(We,{style:{color:"black",cursor:"pointer"},onClick:i[10]||(i[10]=p=>ee.value=!1)})]),t("div",Ss,[t("div",Ps,[t("div",As,[Cs,t("div",Bs,[t("div",Ns,[Hs,t("div",Os,[g(ke,null,{default:K(()=>[g(we,{modelValue:e(P).from,"onUpdate:modelValue":i[11]||(i[11]=p=>e(P).from=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:i[12]||(i[12]=p=>be("from"))},null,8,["modelValue"])]),_:1})])]),t("div",Ys,[Ks,t("div",qs,[g(ke,null,{default:K(()=>[g(we,{modelValue:e(P).to,"onUpdate:modelValue":i[13]||(i[13]=p=>e(P).to=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:i[14]||(i[14]=p=>be("to"))},null,8,["modelValue"])]),_:1})])])])])])]),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:i[15]||(i[15]=p=>ee.value=!1)})])])):u("",!0)])}}};export{ii as default};
