import it from"./Header.e4dfe113.js";import _t from"./Edit.5b9278c0.js";import ut from"./Eyes.3eb2a4b8.js";import dt from"./Void.b76f9109.js";import ct from"./Signature.9bba33d2.js";import pt from"./SignatureOff.b2a86803.js";import ft from"./Table2Column.54d30247.js";import vt from"./Cog.f24cb965.js";import mt from"./Image.7221e508.js";import kt from"./Line.9fba0e9a.js";import bt from"./Check.8244bf68.js";import yt from"./TableView.8f2657ea.js";import{_ as ht}from"./PopupMini.vue.03d1b493.js";import gt from"./trx_trp_ticket.2a70a4d8.js";import xt from"./trx_trp_ticket_validasi.8dc50816.js";import wt from"./trx_absen.b03e85a8.js";import Dt from"./trx_trp_ticket_over.db91f74b.js";import Ct from"./Times.77ef99a0.js";import{_ as Tt}from"./client-only.651bf732.js";import{_ as $t}from"./SelectMulti.vue.47432844.js";import{g as $e,r as _,f as At,h as St,i as F,B as Mt,j as Ae,s as jt,x as c,I as Bt,c as g,b as i,a as s,k as ue,v as Nt,l as n,m as de,n as C,d as v,w as f,F as Ft,D as Pt,q as qt,y as A,o as m,z as B,t as w,E as Ut,A as Ot,J as Vt,H as Yt,G as zt}from"./entry.bb254157.js";import{u as M}from"./useUtils.aa8346c8.js";import{u as T}from"./useMyFetch.8d074570.js";import{u as Et}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Search.30e856e6.js";import"./Adjust.7a42bfd6.js";import"./TableHeaderEye.8a7efc11.js";import"./ClearAll.65547163.js";import"./ClearEach.5fa42cc9.js";import"./CaretLeftDoubleBold.99ab29f6.js";import"./CaretLeftBold.82a1d916.js";import"./CaretRightBold.6059bc10.js";import"./CaretRightDoubleBold.9f3e93a6.js";import"./Exclamation.bb124804.js";import"./HeaderPopup.vue.6d5d622c.js";import"./InputPointFormat.vue.09dd03a6.js";import"./Refresh.0e37c071.js";const It={class:"w-full h-full flex flex-col"},Ht={class:"w-full flex grow flex-col overflow-auto h-0"},Rt={class:"w-full flex justify-between flex-wrap"},Jt={class:"grow flex"},Lt={class:"m-1"},Kt=Yt('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Gt=[Kt],Xt=s("span",{class:"text-xs ml-1"}," Download ",-1),Zt={class:"flex"},Qt={class:"relative z-[1]"},Wt=s("b",null,"tidak dapat dibatalkan lagi",-1),ea={class:"grow mb-5"},ta=s("b",{class:"text-red-500"},"dibersihkan",-1),aa=s("b",{class:"text-red-500"},"divalidasi",-1),la=s("b",{class:"text-red-500"},"di unvalidasi",-1),oa={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},sa={class:"relative",style:{width:"95%",height:"90%"}},na={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},ra={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},ia={class:"w-full p-1"},_a={class:"w-full p-1 bg-gray-200"},ua=s("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),da={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},ca={class:"flex flex-col flex-wrap p-1"},pa=s("label",{for:""},"From",-1),fa={class:"grow"},va={class:"flex flex-col flex-wrap p-1"},ma=s("label",{for:""},"To",-1),ka={class:"grow"},ba={key:1,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-10 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},ya={class:"relative",style:{border:"solid 1px #ccc"}},ha={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},ga={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},xa={class:"w-full p-1"},wa={class:"w-full p-1"},Da=s("div",{class:"w-full text-gray-600 font-bold text-center"}," Set Mobil Yang Tidak Di Izinkan Untuk Di Update Tiketnya ",-1),Ca={class:"w-full flex my-2"},Ta=s("div",{class:"text-gray-600"}," Data Luar: ",-1),$a={class:"flex mx-2"},Aa={class:"flex cursor-pointer"},Sa=["value"],Ma={class:"w-full"},ja={class:"w-full grid grid-cols-2 gap-1 p-1 mt-5"},bl={__name:"ticket",async setup(Ba){let z,ce;const{$moment:P}=zt(),{pointFormat:pe}=M(),fe=t=>t.deleted==1?"!bg-red-400":t.req_deleted==1?"!bg-yellow-300":t.val_ticket==1?"!bg-blue-300":"",Q=t=>(t.map(e=>{e.class_h=fe(e)}),t),Se=$e("company_code"),E=_([]);let I=_({clearCheckBox:!1});const S=_("ticket_not_done");At(()=>S.value,t=>{ye()},{immediate:!1});const k={};k._TimeZoneOffset=new Date().getTimezoneOffset(),k.sort="tanggal:desc";const ve=_({}),H=_({from:"",to:""}),D=$e("token"),{data:W}=([z,ce]=St(async()=>qt(async()=>{c().loading_full=!0;let t=[],e=[],d=[];const[b,l,p]=await Promise.all([T("/trx_trp_tickets",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{filter_status:S},retry:0}),T("/vehicles_available",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},retry:0}),T("/temp_data/vehiclesAllowedUpdateTicket",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},retry:0})]);return b.status.value!=="error"&&(t=Q(b.data.value.data)),b.status.value==="error"?(A().trigger(b.error),{trx_trps:t}):(l.status.value!=="error"&&(e=l.data.value.data),p.status.value!=="error"&&(d=p.data.value.data),c().loading_full=!1,{trx_trps:t,list_vehicle:e,vehicles_allowed:d})},"$X4xCu6yBOs")),z=await z,ce(),z),r=_(W.value.trx_trps||[]),ee=_([]);W.value.list_vehicle.forEach(t=>{ee.value.push({id:t.id,name:t.no_pol,title:"",checked:W.value.vehicles_allowed.indexOf(t.id)>-1})});const me=_([]),Me=async(t,e="")=>{c().loading_full=!0;let d=h.value.from?P(h.value.from).format("Y-MM-DD"):"",b=h.value.to?P(h.value.to).format("Y-MM-DD"):"";const{data:l,error:p,status:o}=await T("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{jenis:t,from:d,to:b,transition_target:e},retry:0});if(c().loading_full=!1,o.value==="error"){A().trigger(p);return}me.value=l.value.list_ticket},te=_({field:"tanggal",by:"desc"}),u=_(-1),x=F(()=>r.value[u.value]),$=_({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),ke=()=>{k.like="";let t=JSON.parse(JSON.stringify(c()._tv.global_keyword));t!=""&&(k.like=`id:%${t}%,xto:%${t}%,jenis:%${t}%,pv_no:%${t}%,ticket_a_no:%${t}%,ticket_b_no:%${t}%,no_pol:%${t}%,supir:%${t}%,kernet:%${t}%,cost_center_code:%${t}%,cost_center_desc:%${t}%,pvr_no:%${t}%,tanggal:%${t}%,transition_target:%${t}%,uj_asst_opt:%${t}%`),k.sort="",te.value.field&&(k.sort=te.value.field+":"+te.value.by),k.date_from=H.value.from?P(H.value.from).format("YYYY-MM-DD"):"",k.date_to=H.value.to?P(H.value.to).format("YYYY-MM-DD"):"",k.filter_model=JSON.stringify(c()._tv.filter_model)},be=async()=>{c().loading_full=!0,ve.value={},$.value.may_get_data=!1,k.page=$.value.page,k.page==1&&(r.value=[]),k.first_row&&delete k.first_row,k.page>1&&(k.first_row=JSON.stringify(r.value[0])),k.filter_status=S.value;const{data:t,error:e,status:d}=await T("/trx_trp_tickets",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:k,retry:0});if(c().loading_full=!1,$.value.may_get_data=!0,d.value==="error"){A().trigger(e,ve);return}$.value.page==1?r.value=Q(t.value.data):$.value.page>1&&(r.value=[...r.value,...Q(t.value.data)]),t.value.data.length==0&&($.value.is_last_record=!0),c()._tv.filter_box=!1},ye=()=>{u.value=-1,$.value.page=1,$.value.is_last_record=!1,ke(),be()};Mt();const ae=_(!1),he=_(0),{display:N}=Ae();jt(Ae());const q=_(1),je=()=>{u.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(he.value=r.value[u.value].id,q.value=-1,ae.value=!0)},U=_(!1),R=_(0),Be=()=>{u.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=r.value[u.value].id,q.value=1,U.value=!0)},Ne=()=>{u.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=r.value[u.value].id,q.value=0,U.value=!0)},Fe=()=>{u.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=r.value[u.value].id,q.value=-1,U.value=!0)},le=_(!1),ge=_(0),Pe=t=>{ge.value=t,le.value=!0},xe=_({}),O=_(!1),qe=_(""),Ue=async()=>{O.value&&(O.value=!1)},J=_(!1),L=_(!1),K=_(!1),V=_(""),Oe=()=>{var t;u.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(qe.value="",V.value="",xe.value={id:r.value[u.value].id,"no pol":r.value[u.value].no_pol,tujuan:r.value[u.value].xto,permintaan:(t=r.value[u.value].req_deleted_by)==null?void 0:t.username,alasan:r.value[u.value].req_deleted_reason},O.value=!0)},Ve=async()=>{c().loading_full=!0;const t=new FormData;t.append("id",r.value[u.value].id),t.append("_method","DELETE"),t.append("reason_adder",V.value);const{data:e,error:d,status:b}=await T("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:t,retry:0});if(c().loading_full=!1,b.value==="error"){A().trigger(d);return}let l={...r.value[u.value]};l.deleted=e.value.deleted,l.deleted_user=e.value.deleted_user,l.deleted_at=e.value.deleted_at,l.deleted_by=e.value.deleted_by,l.deleted_reason=e.value.deleted_reason,l.class_h=fe(l),S.value!="all"?r.value.splice(u.value,1):r.value.splice(u.value,1,{...l}),u.value=-1,O.value=!1},Ye=async()=>{c().loading_full=!0;const t=new FormData;t.append("ids",JSON.stringify(j.value)),t.append("_method","PUT");const{data:e,error:d,status:b}=await T("/trx_trp_val_tickets",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:t,retry:0});if(c().loading_full=!1,b.value==="error"){A().trigger(d);return}L.value=!1,e.value.val_lists.forEach(l=>{let p=r.value.map(o=>o.id).indexOf(l.id);if(p>-1){let o=r.value[p];o.val_ticket=l.val_ticket,o.val_ticket_by=l.val_ticket_by,o.val_ticket_at=l.val_ticket_at,o.updated_at=l.updated_at,r.value.splice(p,1,{...o})}}),I.value.clearCheckBox=!0},ze=async()=>{c().loading_full=!0;const t=new FormData;t.append("ids",JSON.stringify(j.value)),t.append("_method","PUT");const{data:e,error:d,status:b}=await T("/trx_trp_unval_tickets",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:t,retry:0});if(c().loading_full=!1,b.value==="error"){A().trigger(d);return}K.value=!1,e.value.val_lists.forEach(l=>{let p=r.value.map(o=>o.id).indexOf(l.id);if(p>-1){let o=r.value[p];o.val_ticket=l.val_ticket,o.val_ticket_by=l.val_ticket_by,o.val_ticket_at=l.val_ticket_at,o.updated_at=l.updated_at,r.value.splice(p,1,{...o})}}),I.value.clearCheckBox=!0},Ee=async()=>{c().loading_full=!0;const t=new FormData;t.append("ids",JSON.stringify(j.value)),t.append("_method","PUT");const{data:e,error:d,status:b}=await T("/trx_trp_clear_tickets",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:t,retry:0});if(c().loading_full=!1,b.value==="error"){A().trigger(d);return}J.value=!1,e.value.clear_lists.forEach(l=>{let p=r.value.map(o=>o.id).indexOf(l.id);if(p>-1){let o=r.value[p];o.ticket_a_id=l.ticket_a_id,o.ticket_a_no=l.ticket_a_no,o.ticket_b_id=l.ticket_b_id,o.ticket_b_no=l.ticket_b_no,o.updated_at=l.updated_at,r.value.splice(p,1,{...o})}}),I.value.clearCheckBox=!0},oe=_(!1),Ie=t=>{oe.value=!0},G=_(!1),h=_({from:new Date().setDate(new Date().getDate()-3),to:new Date}),we=t=>{t=="from"?h.value.from-h.value.to>0&&(h.value.from=h.value.to):h.value.to-h.value.from<0&&(h.value.to=h.value.from)},He=async()=>{c().loading_full=!0;const t=new FormData;t.append("vehicles",JSON.stringify(ee.value.filter(l=>l.checked).map(l=>l.id))),t.append("pabriks",JSON.stringify(E.value));const{data:e,error:d,status:b}=await T("/trx_trp_do_update_ticket",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:t,retry:0});if(c().loading_full=!1,b.value==="error"){A().trigger(d);return}e.value.data.forEach(l=>{let p=r.value.map(o=>o.id).indexOf(l.id);if(p!==-1){let o=r.value[p];o.ticket_a_id=l.ticket_a_id,o.ticket_a_no=l.ticket_a_no,o.ticket_a_bruto=l.ticket_a_bruto,o.ticket_a_tara=l.ticket_a_tara,o.ticket_a_netto=l.ticket_a_netto,o.ticket_a_supir=l.ticket_a_supir,o.ticket_a_no_pol=l.ticket_a_no_pol,o.ticket_a_in_at=l.ticket_a_in_at,o.ticket_a_out_at=l.ticket_a_out_at,o.ticket_b_id=l.ticket_b_id,o.ticket_b_no=l.ticket_b_no,o.ticket_b_bruto=l.ticket_b_bruto,o.ticket_b_tara=l.ticket_b_tara,o.ticket_b_netto=l.ticket_b_netto,o.ticket_b_supir=l.ticket_b_supir,o.ticket_b_no_pol=l.ticket_b_no_pol,o.ticket_b_in_at=l.ticket_b_in_at,o.ticket_b_out_at=l.ticket_b_out_at,o.updated_at=l.updated_at,r.value.splice(p,1,{...o})}}),N({show:!0,status:"Success",message:"Update PV Done"})},j=_([]),Re=_([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val_ticket",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:1,type:"desc"}},{key:"status_batas_susut",label:"Batas Susut",type:"string"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:c().list_pabrik}]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"susut",label:"Susut",childs:[{key:"susut_bruto",label:"Bruto",childs:[{key:"susut_bruto_b_a",label:"Selisih"},{key:"susut_bruto_b_a_persen",label:"%"}]},{key:"susut_tara",label:"Tara",childs:[{key:"susut_tara_b_a",label:"Selisih"},{key:"susut_tara_b_a_persen",label:"%"}]},{key:"susut_netto",label:"Netto",childs:[{key:"susut_netto_b_a",label:"Selisih"},{key:"susut_netto_b_a_persen",label:"%"}]}]},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"pv_no",label:"PV No",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:1,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:1},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:1,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:1,type:"string",filter_on:1}]),Je=F(()=>u.value>-1&&M().checkPermission("trp_trx.ticket.view")),Le=F(()=>u.value>-1&&x.value.deleted==0&&x.value.req_deleted==0&&x.value.val_ticket==0&&M().checkPermission("trp_trx.ticket.modify")),Ke=F(()=>u.value>-1&&x.value.deleted==0&&x.value.req_deleted==0&&x.value.val_ticket==0&&M().checkPermission("trp_trx.ticket.val_ticket")),Ge=F(()=>u.value>-1&&x.value.deleted==0&&x.value.req_deleted==0&&x.value.val_ticket==1&&M().checkPermission("trp_trx.ticket.unval_ticket")),Xe=F(()=>u.value>-1&&x.value.deleted==0&&x.value.req_deleted==1&&x.value.val_ticket==0&&M().checkPermission("trp_trx.approve_request_remove")),X=_(!1),se=(t,e)=>{t=parseFloat(t)||0,e=parseFloat(e)||0;let d=parseFloat(e-t);if((d>0?e:t)==0)return 0;let l=M().round(d/t*100,2);return l<0?"("+Math.abs(l*100)/100+")":l},ne=(t,e)=>{t=parseFloat(t)||0,e=parseFloat(e)||0;let d=parseFloat(e-t);return d<0?"("+pe(Math.abs(d))+")":pe(d)},{downloadFile:Ze,viewFile:Na}=Et(),Qe=async()=>{ke(),c().loading_full=!0,k.filter_status=S.value;const{data:t,error:e,status:d}=await T("/trx_trp_tickets/download_excel",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:k,retry:0});if(c().loading_full=!1,d.value==="error"){A().trigger(e);return}Ze(t.value)};return(t,e)=>{const d=it,b=_t,l=ut,p=dt,o=ct,Y=pt,We=ft,et=vt,tt=mt,re=kt,ie=bt,at=yt,Z=ht,lt=gt,ot=xt,st=wt,nt=Dt,De=Ct,Ce=Bt("vue-date-picker"),Te=Tt,rt=$t;return m(),g("div",It,[i(d,{title:"List Transaction"}),s("div",Ht,[s("div",Rt,[s("div",Jt,[s("div",Lt,[ue(s("select",{class:"","onUpdate:modelValue":e[0]||(e[0]=a=>de(S)?S.value=a:null)},Gt,512),[[Nt,n(S)]])]),n(Le)?(m(),g("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[1]||(e[1]=a=>je())},[i(b)])):C("",!0),n(Je)?(m(),g("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[2]||(e[2]=a=>Fe())},[i(l)])):C("",!0),n(Xe)?(m(),g("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[3]||(e[3]=a=>Oe())},[i(p)])):C("",!0),n(Ke)?(m(),g("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[4]||(e[4]=a=>Be())},[i(o)])):C("",!0),n(Ge)?(m(),g("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[5]||(e[5]=a=>Ne())},[i(Y)])):C("",!0),s("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[6]||(e[6]=a=>Qe())},[i(We),v(),Xt])]),s("div",Zt,[n(j).length>0&&("useUtils"in t?t.useUtils:n(M))().checkPermission("trp_trx.ticket.unval_ticket")?(m(),g("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:e[7]||(e[7]=a=>K.value=!0)},[i(Y),i(Y),i(Y),i(Y)])):C("",!0),n(j).length>0?(m(),g("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[8]||(e[8]=a=>J.value=!0)}," Multi Clear Ticket ")):C("",!0),n(j).length>0?(m(),g("button",{key:2,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:e[9]||(e[9]=a=>L.value=!0)},[i(o),i(o),i(o),i(o)])):C("",!0),s("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[10]||(e[10]=a=>Ie())}," Check Tickets "),s("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:e[11]||(e[11]=a=>G.value=!0)},[i(et)]),s("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[12]||(e[12]=a=>X.value=!0)}," Update Ticket ")])]),i(at,{thead:n(Re),selected:n(u),onSetSelected:e[13]||(e[13]=a=>u.value=a),tbody:n(r),fnCallData:be,scrolling:n($),onSetScrollingPage:e[14]||(e[14]=a=>n($).page=a),onDoFilter:e[15]||(e[15]=a=>ye()),onSetCheckbox:e[16]||(e[16]=a=>j.value=a),deep_state:n(I)},{absen:f(({item:a,index:y})=>[a.trx_absens&&a.trx_absens.length>0?(m(),B(tt,{key:0,class:"cursor-pointer",onClick:_e=>Pe(y)},null,8,["onClick"])):C("",!0)]),val:f(({item:a})=>[a.val?(m(),B(ie,{key:1})):(m(),B(re,{key:0}))]),val1:f(({item:a})=>[a.val1?(m(),B(ie,{key:1})):(m(),B(re,{key:0}))]),val_ticket:f(({item:a})=>[a.val_ticket?(m(),B(ie,{key:1})):(m(),B(re,{key:0}))]),uj_asst_opt:f(({item:a})=>{var y;return[v(w((y=a.uj)==null?void 0:y.asst_opt),1)]}),salary_paid:f(({item:a})=>{var y,_e;return[v(w(a.salary_paid?n(P)((y=a.salary_paid)==null?void 0:y.period_end).format("MM-Y")+"["+((_e=a.salary_paid)==null?void 0:_e.period_part)+"]":""),1)]}),susut_bruto_b_a:f(({item:a})=>[v(w(ne(a.ticket_a_bruto,a.ticket_b_bruto)),1)]),susut_tara_b_a:f(({item:a})=>[v(w(ne(a.ticket_a_tara,a.ticket_b_tara)),1)]),susut_netto_b_a:f(({item:a})=>[v(w(ne(a.ticket_a_netto,a.ticket_b_netto)),1)]),susut_bruto_b_a_persen:f(({item:a})=>[v(w(se(a.ticket_a_bruto,a.ticket_b_bruto)),1)]),susut_tara_b_a_persen:f(({item:a})=>[v(w(se(a.ticket_a_tara,a.ticket_b_tara)),1)]),susut_netto_b_a_persen:f(({item:a})=>[v(w(se(a.ticket_a_netto,a.ticket_b_netto)),1)]),status_batas_susut:f(({item:a})=>{var y;return[s("div",{class:Ut(["btn p-1 rounded-sm text-white text-xs mr-1 relative",[a.uj&&a.uj.status_batas_susut=="Terisi"?"bg-green-600":"bg-red-500"]])},[s("div",Qt,w((y=a.uj)==null?void 0:y.status_batas_susut),1)],2)]}),deleted_by_username:f(({item:a})=>{var y;return[v(w((y=a.deleted_by)==null?void 0:y.username),1)]}),req_deleted_by_username:f(({item:a})=>{var y;return[v(w((y=a.req_deleted_by)==null?void 0:y.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),i(Z,{type:"custome",show:n(O),data:n(xe),fnClose:Ue,fnConfirm:Ve},{words:f(()=>[v(" Data akan diproses dan "),Wt,v(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),footer:f(()=>[v(" Alasan Tambahan: "),s("div",ea,[ue(s("textarea",{"onUpdate:modelValue":e[17]||(e[17]=a=>de(V)?V.value=a:null)},null,512),[[Ot,n(V)]])])]),_:1},8,["show","data"]),i(Z,{type:"custome",show:n(J),fnClose:()=>J.value=!1,fnConfirm:Ee},{words:f(()=>[v(" Ticket akan "),ta,v(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),i(Z,{type:"custome",show:n(L),fnClose:()=>L.value=!1,fnConfirm:Ye},{words:f(()=>[v(" Ticket akan "),aa,v(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),i(Z,{type:"custome",show:n(K),fnClose:()=>K.value=!1,fnConfirm:ze},{words:f(()=>[v(" Ticket akan "),la,v(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),i(lt,{show:n(ae),fnClose:()=>{ae.value=!1},fnLoadDBData:Me,id:n(he),p_data:n(r),list_ticket:n(me)},null,8,["show","fnClose","id","p_data","list_ticket"]),i(ot,{show:n(U),fnClose:()=>{U.value=!1},id:n(R),p_data:n(r),it_state:n(q)},null,8,["show","fnClose","id","p_data","it_state"]),i(st,{show:n(le),fnClose:()=>{le.value=!1},index:n(ge),p_data:n(r)},null,8,["show","fnClose","index","p_data"]),i(nt,{show:n(oe),fnClose:()=>{oe.value=!1}},null,8,["show","fnClose"]),n(G)?(m(),g("div",oa,[s("div",sa,[s("div",na,[i(De,{style:{color:"black",cursor:"pointer"},onClick:e[18]||(e[18]=a=>G.value=!1)})]),s("div",ra,[s("div",ia,[s("div",_a,[ua,s("div",da,[s("div",ca,[pa,s("div",fa,[i(Te,null,{default:f(()=>[i(Ce,{modelValue:n(h).from,"onUpdate:modelValue":e[19]||(e[19]=a=>n(h).from=a),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:e[20]||(e[20]=a=>we("from"))},null,8,["modelValue"])]),_:1})])]),s("div",va,[ma,s("div",ka,[i(Te,null,{default:f(()=>[i(Ce,{modelValue:n(h).to,"onUpdate:modelValue":e[21]||(e[21]=a=>n(h).to=a),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:e[22]||(e[22]=a=>we("to"))},null,8,["modelValue"])]),_:1})])])])])])]),s("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:e[23]||(e[23]=a=>G.value=!1)})])])):C("",!0),n(X)?(m(),g("div",ba,[s("div",ya,[s("div",ha,[i(De,{style:{color:"black",cursor:"pointer"},onClick:e[24]||(e[24]=a=>X.value=!1)})]),s("div",ga,[s("div",xa,[s("div",wa,[Da,s("div",Ca,[Ta,(m(!0),g(Ft,null,Pt(n(c)().list_pabrik.filter(a=>a!=n(Se)),a=>(m(),g("div",$a,[s("label",Aa,[ue(s("input",{type:"checkbox",value:a,"onUpdate:modelValue":e[25]||(e[25]=y=>de(E)?E.value=y:null),class:"mr-1"},null,8,Sa),[[Vt,n(E)]]),v(" "+w(a),1)])]))),256))]),s("div",Ma,[i(rt,{arr:n(ee)},null,8,["arr"]),s("div",ja,[s("button",{type:"button",name:"button",class:"bg-blue-500 text-white",onClick:e[26]||(e[26]=a=>He())}," Set & Update "),s("button",{type:"button",name:"button",class:"bg-white",onClick:e[27]||(e[27]=a=>X.value=!1)}," Close ")])])])])])])])):C("",!0)])}}};export{bl as default};
