import{_ as q}from"./HeaderPopup.vue.1e12c737.js";import{_ as J}from"./WidthMiniPart.vue.ce35bf63.js";import O from"./AttachmentSingle.078e0b9f.js";import{r as m,f as z,G as B,j as E,m as U,J as G,o as d,c as n,a as e,b as g,t as a,k as s,F as T,y as K,l as w,x as L,E as W,A as k,B as V,p as Q,e as X}from"./entry.89e85ed5.js";import{u as Z}from"./useUtils.cacc80a9.js";import{u as $}from"./useMyFetch.626d98fa.js";import{_ as ee}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.6908c55f.js";import"./PDFJsView.4746e60a.js";const o=_=>(Q("data-v-e094d736"),_=_(),X(),_),te={class:"box-fixed"},se={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},le={class:"w-full flex flex-col items-center grow overflow-auto"},ae={class:"w-full flex flex-row flex-wrap"},oe={class:"w-full sm:w-9/12 flex px-2 py-3"},ie={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},re=o(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),_e={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"ID",-1)),ne={class:"card-border"},ce={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ve=o(()=>e("label",{for:""},"Name",-1)),fe={class:"card-border"},ue={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},pe=o(()=>e("label",{for:""},"Type",-1)),me={class:"card-border"},we={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},he=o(()=>e("label",{for:""},"Amount",-1)),xe={class:"card-border"},be={class:"w-full sm:w-3/12 flex px-2 py-3"},ye={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},ge=o(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ke={class:"w-6/12 flex flex-col flex-wrap p-1"},Se={class:"card-border"},Ne={class:"w-6/12 flex flex-col flex-wrap p-1"},De={class:"card-border"},Ye={class:"w-full flex flex-wrap"},Ce={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ae=o(()=>e("label",{for:""},"Supir",-1)),Fe={class:"card-border"},Me={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ie=o(()=>e("label",{for:""},"Kernet",-1)),Pe={class:"card-border"},Be={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Te=o(()=>e("label",{for:""},"No Pol",-1)),Ve={class:"card-border"},$e={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},je=o(()=>e("label",{for:""},"Tujuan",-1)),He={class:"card-border"},Re={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},qe=o(()=>e("label",{for:""},"Note For Remarks",-1)),Je={class:"card-border"},Oe={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ze=o(()=>e("label",{for:""},"Referensi",-1)),Ee={class:"card-border"},Ue={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Ge={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ke=o(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Le={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},We=o(()=>e("label",{for:""}," Code",-1)),Qe={class:"card-border"},Xe={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ze=o(()=>e("label",{for:""},"Desc",-1)),et={class:"card-border disabled"},tt={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},st={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},lt=o(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),at={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ot=o(()=>e("label",{for:""},"No",-1)),it={class:"card-border disabled"},rt={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_t=o(()=>e("label",{for:""},"Total",-1)),dt={class:"card-border disabled"},nt={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ct={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},vt=o(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ft={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ut=o(()=>e("label",{for:""},"No",-1)),pt={class:"card-border disabled"},mt={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},wt=o(()=>e("label",{for:""},"Total",-1)),ht={class:"card-border disabled"},xt={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},bt={class:"w-full",role:"sticky"},yt={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},gt={class:"sticky -top-1 !z-[2]"},kt=["colspan"],St=o(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto")],-1)),Nt={ref:"to_move"},Dt=["data-index"],Yt={class:"cell"},Ct={class:"w-full h-full flex items-center justify-center relative"},At={class:"cell"},Ft={style:{width:"70vw"},class:"h-full flex items-center justify-center"},Mt={class:"w-full flex items-center justify-end"},It={class:"w-full flex flex-wrap p-3 items-center"},Pt=o(()=>e("div",null," Di Validasi oleh : ",-1)),Bt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Tt={key:0},Vt={key:1},$t={key:2},jt={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const c=_,{$moment:x}=W(),{pointFormat:S}=Z(),A={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""},t=m({...A}),F=z("token"),M=m({}),I=m(null),N=m([]),P={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""},v=m(JSON.parse(JSON.stringify(P))),f=m(JSON.parse(JSON.stringify(P))),j=async()=>{k().loading_full=!0,M.value={};const i=new FormData;let r="post",p=c.id;p==0||(i.append("id",p),i.append("_method","PUT"));const{data:l,error:D,status:b}=await $("/standby_trx_validasi",{method:r,headers:{Authorization:`Bearer ${F.value}`,Accept:"application/json"},body:i,retry:0});if(k().loading_full=!1,b.value==="error"){V().trigger(D,M);return}t.value.val=l.value.val,t.value.val_user=l.value.val_user,t.value.val_by=l.value.val_by,t.value.val_at=l.value.val_at,t.value.val1=l.value.val1,t.value.val1_user=l.value.val1_user,t.value.val1_by=l.value.val1_by,t.value.val1_at=l.value.val1_at,t.value.val2=l.value.val2,t.value.val2_user=l.value.val2_user,t.value.val2_by=l.value.val2_by,t.value.val2_at=l.value.val2_at;let h=c.p_data.map(y=>y.id).indexOf(c.id);h>=-1&&c.p_data.splice(h,1,{...t.value}),c.fnClose()},H=async()=>{k().loading_full=!0;const{data:i,error:r,status:p}=await $("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${F.value}`,Accept:"application/json"},params:{id:c.id},retry:0});if(k().loading_full=!1,p.value==="error"){V().trigger(r);return}let l=i.value.data;t.value=l,v.value._.id.val=l.supir_id,v.value._.name.val=l.supir,v.value._.rek_no.val=l.supir_rek_no,v.value._.rek_name.val=l.supir_rek_name,v.value.id=l.supir_id,v.value.name=l.supir,v.value.rek_no=(l.supir_rek_no||"")+" "+(l.supir_rek_name||""),f.value._.id.val=l.kernet_id,f.value._.name.val=l.kernet,f.value._.rek_no.val=l.kernet_rek_no,f.value._.rek_name.val=l.kernet_rek_name,f.value.id=l.kernet_id,f.value.name=l.kernet,f.value.rek_no=(l.kernet_rek_no||"")+" "+(l.kernet_rek_name||""),N.value=i.value.data.details};B(()=>{let i=0;return N.value.forEach(r=>{r.p_status!="Remove"&&(i+=r.amount)}),i});const R=B(()=>!1);return E(()=>c.show,(i,r)=>{i==!0&&(t.value={...A},c.is_view==!1&&setTimeout(()=>{I.value.focus()},1),H())},{immediate:!0}),(i,r)=>{var b,h,y;const p=q,l=J,D=O;return U((d(),n("section",te,[e("div",null,[g(p,{title:"Form Transaction Standby Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",se,[e("div",le,[e("div",ae,[e("div",oe,[e("div",ie,[re,e("div",_e,[de,e("div",ne,a(s(t).standby_mst_id),1)]),e("div",ce,[ve,e("div",fe,a((b=s(t).standby_mst_)==null?void 0:b.name),1)]),e("div",ue,[pe,e("div",me,a((h=s(t).standby_mst_)==null?void 0:h.tipe),1)]),e("div",we,[he,e("div",xe,a(s(S)((y=s(t).standby_mst_)==null?void 0:y.amount)),1)])])]),e("div",be,[e("div",ye,[ge,e("div",ke,[e("div",Se,a(s(t).transition_type),1)]),e("div",Ne,[e("div",De,a(s(t).transition_target),1)])])]),e("div",Ye,[e("div",Ce,[Ae,e("div",Fe,[g(l,{selected:s(v)},null,8,["selected"])])]),e("div",Me,[Ie,e("div",Pe,[g(l,{selected:s(f)},null,8,["selected"])])]),e("div",Be,[Te,e("div",Ve,a(s(t).no_pol),1)]),e("div",$e,[je,e("div",He,a(s(t).xto),1)]),e("div",Re,[qe,e("div",Je,a(s(t).note_for_remarks),1)]),e("div",Oe,[ze,e("div",Ee,a(s(t).ref),1)])]),e("div",Ue,[e("div",Ge,[Ke,e("div",Le,[We,e("div",Qe,a(s(t).cost_center_code),1)]),e("div",Xe,[Ze,e("div",et,a(s(t).cost_center_desc),1)])])]),e("div",tt,[e("div",st,[lt,e("div",at,[ot,e("div",it,a(s(t).pvr_no),1)]),e("div",rt,[_t,e("div",dt,a(s(S)(s(t).pvr_total||0)),1)])])]),e("div",nt,[e("div",ct,[vt,e("div",ft,[ut,e("div",pt,a(s(t).pv_no),1)]),e("div",mt,[wt,e("div",ht,a(s(S)(s(t).pv_total)),1)])])]),e("div",xt,[e("div",bt,[e("table",yt,[e("thead",null,[e("tr",gt,[e("td",{colspan:s(R)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,kt)]),St]),e("tbody",Nt,[(d(!0),n(T,null,K(s(N),(u,Y)=>(d(),n(T,{key:Y},[u.p_status!="Remove"?(d(),n("tr",{key:0,"data-index":Y},[e("td",null,a(Y+1)+".",1),e("td",Yt,[e("div",Ct,a(s(x)(u.tanggal).format("DD-MM-YYYY")),1)]),e("td",At,[e("div",Ft,[g(D,{value:u.attachment_1_preview,onSetFile:C=>u.attachment_1=C,onSetPreview:C=>u.attachment_1_preview=C},null,8,["value","onSetFile","onSetPreview"])])])],8,Dt)):w("",!0)],64))),128))],512)])])])])]),e("div",Mt,[e("div",It,[Pt,s(t).val||s(t).val1||s(t).val2?(d(),n("div",Bt,[s(t).val?(d(),n("div",Tt," App 1 : "+a(s(t).val_by.username)+" ( "+a(s(t).val_at?s(x)(s(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),s(t).val1?(d(),n("div",Vt," App 2 : "+a(s(t).val1_by.username)+" ( "+a(s(t).val1_at?s(x)(s(t).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),s(t).val2?(d(),n("div",$t," App 3 : "+a(s(t).val2_by.username)+" ( "+a(s(t).val2_at?s(x)(s(t).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=u=>_.fnClose())}," Cancel "),_.is_view==0?(d(),n("button",{key:0,ref_key:"it_val",ref:I,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=L(u=>j(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[G,_.show]])}}},Kt=ee(jt,[["__scopeId","data-v-e094d736"]]);export{Kt as default};
