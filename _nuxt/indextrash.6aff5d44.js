import ce from"./Header.f4f1ee70.js";import de from"./Plus.9f5f997b.js";import _e from"./Edit.ee1f63a2.js";import me from"./Eyes.979cfbf0.js";import fe from"./Delete.3c4808f1.js";import pe from"./Signature.331175d9.js";import ve from"./Line.771f1e02.js";import he from"./Check.a15db1bc.js";import ye from"./TypeIcon.5d414138.js";import{_ as ge}from"./PopupMini.vue.574bf002.js";import ke from"./salary_bonus.1751daa0.js";import we from"./salary_bonus_validasi.c78cc392.js";import{g as xe,h as be,r,B as De,j as V,s as Ce,f as Ae,c as d,b as _,a as e,l as a,n as w,F as Te,D as $e,w as Pe,q as Se,x as v,y as L,o as i,E as Me,z as h,t as m,d as Ue,k as Be,A as Fe,m as Ie,G as Ne}from"./entry.aa3fda92.js";import{u as y}from"./useUtils.647d3ea4.js";import{u as j}from"./useMyFetch.9afcdb0b.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./DocJPEG.f0157b19.js";import"./DocJPG.f835fc7c.js";import"./DocPNG.44d5fcfa.js";import"./DocPDF.b7a3eb1c.js";import"./Times.29115eb5.js";import"./Exclamation.e8cb86dc.js";import"./HeaderPopup.vue.232e2279.js";import"./client-only.ce07a1c2.js";import"./WidthMiniList.vue.44a3f157.js";import"./WidthMiniPart.vue.a9af2591.js";import"./InputPointFormat.vue.b8bcbc23.js";import"./AttachmentSingle.867ef67e.js";import"./PDFJsView.278a9411.js";const Le={class:"w-full h-full flex flex-col"},je={class:"w-full flex grow flex-col overflow-auto h-0"},Ee={class:"w-full flex"},ze={class:"w-full flex justify-center items-center grow h-0 p-1"},He={key:0,class:""},Oe={class:"tacky"},Re=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App 1"),e("th",null,"App 2"),e("th",null,"App 3"),e("th",null,"ID"),e("th",null,"Tanggal"),e("th",null,"Tipe"),e("th",null,"Nama Karyawan"),e("th",null,"No KTP"),e("th",null,"No SIM"),e("th",null,"Nominal"),e("th",null,"Note"),e("th",null,"File"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),Ve=["onClick"],Ye={class:"flex items-center justify-center"},Ke={class:"flex items-center justify-center"},qe={class:"flex items-center justify-center"},Ge={class:"bold"},Je={style:{"max-width":"350px","text-wrap":"wrap"}},Ze={style:{"max-width":"350px","text-wrap":"wrap"}},Qe={class:"grow mb-5"},Pt={__name:"indextrash",async setup(We){let x,E;const{$moment:T}=Ne(),{pointFormat:Y}=y(),c={};c._TimeZoneOffset=new Date().getTimezoneOffset(),c.sort="created_at:desc";const $=xe("token"),{data:K}=([x,E]=be(async()=>Se(async()=>{let t=[];v().loading_full=!0;const{data:o,error:f,status:k}=await j("/salary_bonuses",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:c,retry:0});return v().loading_full=!1,k.value==="error"?(L().trigger(f),{salary_bonuses:t}):(t=o.value.data,{salary_bonuses:t})},"$c1PCBIP8Uk")),x=await x,E(),x),n=r(K.value.salary_bonuses);r(""),r({field:"created_at",by:"desc"});const s=r(-1),u=r({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),b=r(null),q=async()=>{v().loading_full=!0,u.value.may_get_data=!1,c.page=u.value.page,c.page==1&&(n.value=[]),c.first_row&&delete c.first_row,c.page>1&&(c.first_row=JSON.stringify(n.value[0]));const{data:t,error:o,status:f}=await j("/salary_bonuses",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:c,retry:0});if(v().loading_full=!1,u.value.may_get_data=!0,f.value==="error"){L().trigger(o);return}u.value.page==1?(n.value=t.value.data,b.value&&(b.value.scrollTop=0)):u.value.page>1&&(n.value=[...n.value,...t.value.data]),t.value.data.length==0&&(u.value.is_last_record=!0)},G=async()=>{if(!u.value.may_get_data)return;let t=b.value;if(t.scrollLeft!=u.value.scrollLeft){u.value.scrollLeft=t.scrollLeft;return}u.value.is_last_record||!(Math.round(t.scrollTop)+t.clientHeight>=t.scrollHeight-1)||(u.value.page++,await q())};De();const D=r(!1),P=r(0),S=r(0),J=()=>{P.value=0,D.value=!0,S.value=!1},{display:C}=V();Ce(V());const Z=()=>{s.value==-1?C({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=n.value[s.value].id,D.value=!0,S.value=!1)},A=r(!1),M=r(0),U=r(!1),Q=()=>{s.value==-1?C({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=n.value[s.value].id,A.value=!0,U.value=!1)},W=()=>{s.value==-1?C({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=n.value[s.value].id,A.value=!0,U.value=!0)},B=r(!1),z=r({}),g=r(!1),p=r(""),X=async()=>{g.value&&(g.value=!1)},ee=()=>{s.value==-1?C({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(p.value="",z.value={id:n.value[s.value].id},g.value=!0)};Ae(()=>p.value,t=>{t.trim().length>0?B.value=!0:B.value=!1},{immediate:!1});const te=async()=>{v().loading_full=!0;const t=new FormData;t.append("id",n.value[s.value].id),t.append("deleted_reason",p.value),t.append("_method","DELETE");const{data:o,error:f,status:k}=await j("/salary_bonus",{method:"post",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},body:t,retry:0});if(v().loading_full=!1,k.value==="error"){L().trigger(f);return}n.value.splice(s.value,1),s.value=-1,g.value=!1};return(t,o)=>{const f=ce,k=de,ae=_e,le=me,se=fe,oe=pe,F=ve,I=he,ne=ye,re=ge,ie=ke,ue=we;return i(),d("div",Le,[_(f,{title:"List Salary Additional"}),e("div",je,[e("div",Ee,[("useUtils"in t?t.useUtils:a(y))().checkPermission("salary_bonus.create")?(i(),d("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[0]||(o[0]=l=>J())},[_(k)])):w("",!0),("useUtils"in t?t.useUtils:a(y))().checkPermissions(["salary_bonus.modify"])&&a(s)>-1&&[void 0,0].indexOf(a(n)[a(s)].val3)>-1?(i(),d("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[1]||(o[1]=l=>Z())},[_(ae)])):w("",!0),("useUtils"in t?t.useUtils:a(y))().checkPermissions(["salary_bonus.view"])&&a(s)>-1?(i(),d("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[2]||(o[2]=l=>W())},[_(le)])):w("",!0),("useUtils"in t?t.useUtils:a(y))().checkPermission("salary_bonus.remove")&&a(s)>-1?(i(),d("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[3]||(o[3]=l=>ee())},[_(se)])):w("",!0),("useUtils"in t?t.useUtils:a(y))().checkPermissions(["salary_bonus.val1","salary_bonus.val2","salary_bonus.val3"])&&a(s)>-1?(i(),d("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[4]||(o[4]=l=>Q())},[_(oe)])):w("",!0)]),e("div",ze,[a(n).length==0?(i(),d("div",He," Maaf Tidak Ada Record ")):(i(),d("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:b,onScroll:G},[e("table",Oe,[Re,e("tbody",null,[(i(!0),d(Te,null,$e(a(n),(l,N)=>{var H,O,R;return i(),d("tr",{key:N,onClick:Xe=>s.value=N,class:Me(a(s)==N?"active":"")},[e("td",null,[e("div",Ye,[l.val1?(i(),h(I,{key:1})):(i(),h(F,{key:0}))])]),e("td",null,[e("div",Ke,[l.val2?(i(),h(I,{key:1})):(i(),h(F,{key:0}))])]),e("td",null,[e("div",qe,[l.val3?(i(),h(I,{key:1})):(i(),h(F,{key:0}))])]),e("td",Ge,m(l.id),1),e("td",null,m(l.tanggal?a(T)(l.tanggal).format("DD-MM-Y"):""),1),e("td",null,m(l.type),1),e("td",null,[e("div",Je,m((H=l.employee)==null?void 0:H.name),1)]),e("td",null,m((O=l.employee)==null?void 0:O.ktp_no),1),e("td",null,m((R=l.employee)==null?void 0:R.sim_no),1),e("td",null,m(a(Y)(l.nominal||0)),1),e("td",null,[e("div",Ze,m(l.note),1)]),e("td",null,[_(ne,{value:l.attachment_1_type},null,8,["value"])]),e("td",null,m(l.created_at?a(T)(l.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,m(l.updated_at?a(T)(l.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Ve)}),128))])])],544))])]),_(re,{type:"delete",show:a(g),data:a(z),fnClose:X,fnConfirm:te,enabledOk:a(B)},{footer:Pe(()=>[Ue(" Masukkan Alasan Penghapusan: "),e("div",Qe,[Be(e("textarea",{"onUpdate:modelValue":o[5]||(o[5]=l=>Ie(p)?p.value=l:null)},null,512),[[Fe,a(p)]])])]),_:1},8,["show","data","enabledOk"]),_(ie,{show:a(D),fnClose:()=>{D.value=!1},id:a(P),p_data:a(n),is_copy:a(S)},null,8,["show","fnClose","id","p_data","is_copy"]),_(ue,{show:a(A),fnClose:()=>{A.value=!1},id:a(M),p_data:a(n),is_view:a(U)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{Pt as default};
