var Ks=Object.defineProperty,Gs=Object.defineProperties;var Zs=Object.getOwnPropertyDescriptors;var ha=Object.getOwnPropertySymbols;var Ws=Object.prototype.hasOwnProperty,Qs=Object.prototype.propertyIsEnumerable;var ba=(n,o,x)=>o in n?Ks(n,o,{enumerable:!0,configurable:!0,writable:!0,value:x}):n[o]=x,ie=(n,o)=>{for(var x in o||(o={}))Ws.call(o,x)&&ba(n,x,o[x]);if(ha)for(var x of ha(o))Qs.call(o,x)&&ba(n,x,o[x]);return n},il=(n,o)=>Gs(n,Zs(o));var Y=(n,o,x)=>new Promise((f,d)=>{var a=i=>{try{p(x.next(i))}catch(c){d(c)}},r=i=>{try{p(x.throw(i))}catch(c){d(c)}},p=i=>i.done?f(i.value):Promise.resolve(i.value).then(a,r);p((x=x.apply(n,o)).next())});import{j as $a,u as Xs,a as eo,b as ka,c as Ht,n as ct,_ as zt,d as to,e as Ke,f as pt,g as lo,h as ao,i as ja}from"./entry.9d4c4f80.js";import{c as ne,d as Lt,o as s,a as _,b as e,t as l,r as u,w as je,e as Vt,f as ae,v as Te,u as t,i as Ee,g as so,h as j,F as ye,j as Ae,n as Ue,k as O,l as We,m as Q,p as Be,q as ya,s as pe,x as Ul,y as F,z as Da,A as nt,B as rt,C as Sa,D as ze,E as Dl,G as vt,H as Ta,I as Nl,J as Et,K as xa}from"./vue-vendor.ccf46959.js";import{d as Rl,s as Dt}from"./state-vendor.7641a25c.js";const oo=()=>{var n;return((n=window==null?void 0:window.__NUXT__)==null?void 0:n.config)||{}},El=oo().app,vbe=()=>El.baseURL,no=()=>El.buildAssetsDir,ro=(...n)=>$a(Ca(),no(),...n),Ca=(...n)=>{const o=El.cdnURL||El.baseURL;return n.length?$a(o,...n):o};globalThis.__buildAssetsURL=ro,globalThis.__publicAssetsURL=Ca;const $=Rl("common",{state:()=>({list_pabrik:["KPN","KAS","KUS","ARP","KAP","SMP"],is_sidebar_open:!1,loading_full:!1,_tv:{filter_box:!1,filter_model:{},global_keyword:""}}),actions:{triggerSidebar(n){this.is_sidebar_open=n}}});function Pa(){const n=Xs();return{apiBase:{"192.168.1.163/logistik":"http://192.168.1.163/transport-be/a9p/","localhost:3000/logistik":"http://192.168.1.163/transport-be/a9p/","localhost/logistik":"http://192.168.1.163/transport-be/a9p/","10.10.30.196/logistik":"http://10.10.30.196/transport-be/a9p/","10.10.7.197/logistik":"http://10.10.7.197/transport-be/a9p/","10.10.88.197/logistik":"http://10.10.88.197/transport-be/a9p/","10.10.26.197/logistik":"http://10.10.26.197/transport-be/a9p/","10.10.29.196/logistik":"http://10.10.29.196/transport-be/a9p/","10.10.77.196/logistik":"http://10.10.77.196/transport-be/a9p/","110.232.82.16:8882/logistik":"http://110.232.82.16:8882/transport-be/a9p/","110.232.82.16:8885/logistik":"http://110.232.82.16:8885/transport-be/a9p/","110.232.82.16:8883/logistik":"http://110.232.82.16:8883/transport-be/a9p/","110.232.82.16:8881/logistik":"http://110.232.82.16:8881/transport-be/a9p/","110.232.82.16:8884/logistik":"http://110.232.82.16:8884/transport-be/a9p/","110.232.82.16:8886/logistik":"http://110.232.82.16:8886/transport-be/a9p/","192.168.99.246/arp":"http://192.168.99.246:8001","192.168.99.246/kap":"http://192.168.99.246:8002","192.168.99.246/kas":"http://192.168.99.246:8003","192.168.99.246/kpn":"http://192.168.99.246:8004","192.168.99.246/kus":"http://192.168.99.246:8005","192.168.99.246/smp":"http://192.168.99.246:8006","110.232.82.16:8880/arp":"http://110.232.82.16:9001","110.232.82.16:8880/kap":"http://110.232.82.16:9002","110.232.82.16:8880/kas":"http://110.232.82.16:9003","110.232.82.16:8880/kpn":"http://110.232.82.16:9004","110.232.82.16:8880/kus":"http://110.232.82.16:9005","110.232.82.16:8880/smp":"http://110.232.82.16:9006"}[n.host+"/"+n.pathname.split("/")[1]]}}const wa=(n,o)=>{const{apiBase:x}=Pa();return eo(n,ie({baseURL:x},o),"$YHbKoe5XgP")},ke=(n,o,x)=>{const f=()=>window.location.port||"80",d=ne(()=>`app_port_${f()}_${n}`),a=ne(()=>il(ie({},x),{path:"/",sameSite:"lax",secure:!1})),r=ka(d.value,a.value);return o!==void 0&&(r.value=o),r},Je=Rl("alert",{state:()=>({show:!1,status:"",message:"",permit_close:!0}),actions:{display({show:n,status:o="",message:x=""}){this.show=n,this.show?(this.status=o,this.message=x,this.permit_close=!1,setTimeout(()=>{this.permit_close=!0},100)):(this.status="",this.message="")}}}),X=Rl("error",{state:()=>({}),actions:{trigger(n,o={}){let x=n.value.statusCode;Dt(Je());const{display:f}=Je();if(n.value.data==null||x==500||x==404){f({show:!0,status:"Failed",message:"Aplikasi mengalami kegagalan mohon di informasikan ke bagian Terkait"});return}let d=n.value.data.message;if(x==422){this.setErrors(o,n.value.data);return}if(x==400){f({show:!0,status:"Failed",message:d});return}(x==401||x==403)&&(x==403&&f({show:!0,status:"Failed",message:d}),ot().clearAuth())},setErrors(n={},o=[]){for(let x in o)n.value[x]=o[x][0]}}}),ot=Rl("auth",{state:()=>({authenticated:!1,loading:!1,done_get_user_info:!1}),actions:{authenticateUser(x){return Y(this,arguments,function*({username:n,password:o}){return new Promise((f,d)=>Y(this,null,function*(){var c;const{data:a,error:r,status:p,pending:i}=wa("/login",{method:"post",headers:{},body:{username:n,password:o},timeout:1e3});for(this.loading=i.value;i.value;)yield new Promise(h=>setTimeout(h,1e3));if(this.loading=i.value,p.value=="error")d(r);else{if(a.value){const h=ke("token");h.value=(c=a==null?void 0:a.value)==null?void 0:c.token,this.authenticated=!0}f(a)}}))})},checkUser(){return Y(this,null,function*(){const n=ke("token"),{data:o,error:x,status:f,pending:d}=wa("/check_user",{method:"get",headers:{Authorization:`Bearer ${n.value}`,Accept:"application/json"},timeout:1e3});for($().loading_full=d.value;d.value;)yield new Promise(a=>setTimeout(a,1e3));return $().loading_full=d.value,yield new Promise((a,r)=>{var p,i,c,h,k,C,y,g,b,v,w,m;if(f.value=="error"){const{trigger:S}=X();S(x),r(x)}else{if(o.value){const S=ke("username");S.value=(i=(p=o==null?void 0:o.value)==null?void 0:p.user)==null?void 0:i.username;const A=ke("fullname");A.value=(h=(c=o==null?void 0:o.value)==null?void 0:c.user)==null?void 0:h.fullname;const D=ke("role");D.value=(C=(k=o==null?void 0:o.value)==null?void 0:k.user)==null?void 0:C.role,localStorage.setItem("permissions",JSON.stringify((g=(y=o==null?void 0:o.value)==null?void 0:y.user)==null?void 0:g.permissions));const M=ke("scopes");M.value=(v=(b=o==null?void 0:o.value)==null?void 0:b.user)==null?void 0:v.scopes;let T=(m=(w=o==null?void 0:o.value)==null?void 0:w.user)==null?void 0:m.company_info,q=T.map(te=>te.dkey),P=q.indexOf("company_code"),N=q.indexOf("company_name"),L=q.indexOf("company_email");const R=ke("company_name");R.value=N>-1?T[N].dval:"";const J=ke("company_email");J.value=L>-1?T[L].dval:"";const re=ke("company_code");re.value=P>-1?T[P].dval:"",this.done_get_user_info=!0}a(o)}})})},logUserOut(){this.clearAuth()},checkScopes(n=[]){const o=ke("scopes"),x=new Set(o.value),f=new Set(n),d=new Set([...x].filter(a=>f.has(a)));return Array.from(d).length>0},checkRole(n=[]){const o=ke("role");return n.includes(o.value)},checkPermission(n=""){let o=localStorage.getItem("permissions");return o?(o=JSON.parse(o),o?o.includes(n):!1):!1},checkPermissions(n){let o=localStorage.getItem("permissions");return o&&(o=JSON.parse(o),o&&Array.isArray(o))?o.filter(x=>n.includes(x)).length>0:0},clearAuth(){this.authenticated=!1,this.done_get_user_info=!1;const n=ke("token");n.value=null;const o=ke("username");o.value=null;const x=ke("fullname");x.value=null;const f=ke("role");f.value=null,localStorage.clear();const d=ke("scopes");d.value=null;const a=ke("locs");a.value=null;const r=ke("company_name");r.value=null;const p=ke("company_email");p.value=null;const i=ke("company_code");i.value=null,Ht().push("/login")}}}),io={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("standby_mst.views"))return $().loading_full=!1,ct("/")}]},fbe=io,_o={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("standby_mst.views"))return $().loading_full=!1,ct("/")}]},mbe=_o,uo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("standby_trx.views"))return $().loading_full=!1,ct("/")}]},hbe=uo,co={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.absen.views"))return $().loading_full=!1,ct("/")}]},bbe=co,po={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.views"))return $().loading_full=!1,ct("/")}]},ybe=po,vo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.ritase.views"))return $().loading_full=!1,ct("/")}]},xbe=vo,fo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.ticket.views"))return $().loading_full=!1,ct("/")}]},wbe=fo,mo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.ticket.views"))return $().loading_full=!1,ct("/")}]},gbe=mo,ho={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.transfer.views"))return $().loading_full=!1,ct("/")}]},$be=ho,bo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.transfer.views"))return $().loading_full=!1,ct("/")}]},kbe=bo,yo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("ujalan.views"))return $().loading_full=!1,ct("/")}]},jbe=yo,xo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("ujalan.views"))return $().loading_full=!1,ct("/")}]},Dbe=xo,wo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("destination_location.views"))return $().loading_full=!1,ct("/")}]},Sbe=wo,go={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("employee.views"))return $().loading_full=!1,ct("/")}]},Tbe=go,$o={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("extra_money.views"))return $().loading_full=!1,ct("/")}]},Cbe=$o,ko={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("extra_money_trx.transfer.views"))return $().loading_full=!1,ct("/")}]},Pbe=ko,jo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("extra_money_trx.views"))return $().loading_full=!1,ct("/")}]},Abe=jo,Do={ssr:!1,middleware:[function(n,o){if(!ot().checkRole(["SuperAdmin","Finance"]))return ct("/")}]},Mbe=Do,So={layout:"clear"},Obe=So,To={layout:"clear",ssr:!1,middleware:[function(n,o){}]},Nbe=To,Co={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("permission_group.views"))return $().loading_full=!1,ct("/")}]},Fbe=Co,Po={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("potongan_mst.views"))return $().loading_full=!1,ct("/")}]},Ibe=Po,Ao={layout:"clear",ssr:!1},Ybe=Ao,Mo={layout:"clear",ssr:!1},Bbe=Mo,Oo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("report.ast_n_driver.views"))return $().loading_full=!1,ct("/")}]},qbe=Oo,No={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("report.distance.views"))return $().loading_full=!1,ct("/")}]},Ube=No,Fo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("report.ramp.views"))return $().loading_full=!1,ct("/")}]},Hbe=Fo,Io={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.report.views"))return $().loading_full=!1,ct("/")}]},zbe=Io,Yo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.report.views"))return $().loading_full=!1,ct("/")}]},Vbe=Yo,Bo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("trp_trx.report.views"))return $().loading_full=!1,ct("/")}]},Lbe=Bo,qo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("salary_bonus.views"))return $().loading_full=!1,ct("/")}]},Ebe=qo,Uo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("salary_paid.views"))return $().loading_full=!1,ct("/")}]},Rbe=Uo,Ho={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("rpt_salary.views"))return $().loading_full=!1,ct("/")}]},Jbe=Ho,zo=null,Kbe=zo,Vo={ssr:!1,middleware:[function(n,o){}]},Gbe=Vo,Lo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("user.views"))return $().loading_full=!1,ct("/")}]},Zbe=Lo,Eo={ssr:!1,middleware:[function(n,o){if(!ot().checkPermission("vehicle.views"))return $().loading_full=!1,ct("/")}]},Wbe=Eo,Ro=Lt({props:{title:{type:String,required:!0,default:"Header Info"}}}),Oe=(n,o)=>{const x=n.__vccOpts||n;for(const[f,d]of o)x[f]=d;return x},Jo={class:"w-full flex min-h-[2rem] items-center bg-slate-600 p-1 pl-8 sm:pl-1 text-white"};function Ko(n,o,x,f,d,a){return s(),_("div",Jo,[e("h1",null,l(n.title),1)])}const _t=Oe(Ro,[["render",Ko]]),Qbe=Object.freeze(Object.defineProperty({__proto__:null,default:_t},Symbol.toStringTag,{value:"Module"})),Go={name:"MaterialSymbolsContentCopy"},Zo={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Wo=e("path",{fill:"currentColor",d:"M9 18q-.825 0-1.412-.587T7 16V4q0-.825.588-1.412T9 2h9q.825 0 1.413.588T20 4v12q0 .825-.587 1.413T18 18zm-4 4q-.825 0-1.412-.587T3 20V6h2v14h11v2z"},null,-1),Qo=[Wo];function Xo(n,o,x,f,d,a){return s(),_("svg",Zo,Qo)}const fl=Oe(Go,[["render",Xo]]),Xbe=Object.freeze(Object.defineProperty({__proto__:null,default:fl},Symbol.toStringTag,{value:"Module"})),en={name:"MaterialSymbolsAdd"},tn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ln=e("path",{fill:"currentColor",d:"M11 13H5v-2h6V5h2v6h6v2h-6v6h-2v-6Z"},null,-1),an=[ln];function sn(n,o,x,f,d,a){return s(),_("svg",tn,an)}const gt=Oe(en,[["render",sn]]),eye=Object.freeze(Object.defineProperty({__proto__:null,default:gt},Symbol.toStringTag,{value:"Module"})),on={name:"MaterialSymbolsEditOutlineRounded"},nn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},rn=e("path",{fill:"currentColor",d:"M5 19h1.4l8.625-8.625l-1.4-1.4L5 17.6V19ZM19.3 8.925l-4.25-4.2l1.4-1.4q.575-.575 1.413-.575t1.412.575l1.4 1.4q.575.575.6 1.388t-.55 1.387L19.3 8.925ZM4 21q-.425 0-.713-.288T3 20v-2.825q0-.2.075-.388t.225-.337l10.3-10.3l4.25 4.25l-10.3 10.3q-.15.15-.337.225T6.825 21H4ZM14.325 9.675l-.7-.7l1.4 1.4l-.7-.7Z"},null,-1),dn=[rn];function _n(n,o,x,f,d,a){return s(),_("svg",nn,dn)}const Pt=Oe(on,[["render",_n]]),tye=Object.freeze(Object.defineProperty({__proto__:null,default:Pt},Symbol.toStringTag,{value:"Module"})),un={name:"IconParkOutlineEyes"},cn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},pn=e("g",{fill:"none",stroke:"currentColor","stroke-width":"4"},[e("path",{"stroke-linejoin":"round",d:"M24 41c9.941 0 18-8.322 18-14c0-5.678-8.059-14-18-14S6 21.328 6 27c0 5.672 8.059 14 18 14Z",clipRule:"evenodd"}),e("path",{"stroke-linejoin":"round",d:"M24 33a6 6 0 1 0 0-12a6 6 0 0 0 0 12Z"}),e("path",{"stroke-linecap":"round",d:"m13.264 11.266l2.594 3.62m19.767-3.176l-2.595 3.62M24.009 7v6"})],-1),vn=[pn];function fn(n,o,x,f,d,a){return s(),_("svg",cn,vn)}const Nt=Oe(un,[["render",fn]]),lye=Object.freeze(Object.defineProperty({__proto__:null,default:Nt},Symbol.toStringTag,{value:"Module"})),mn={name:"MaterialSymbolsDeleteOutline"},hn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},bn=e("path",{fill:"currentColor",d:"M7 21q-.825 0-1.413-.588T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.588 1.413T17 21H7ZM17 6H7v13h10V6ZM9 17h2V8H9v9Zm4 0h2V8h-2v9ZM7 6v13V6Z"},null,-1),yn=[bn];function xn(n,o,x,f,d,a){return s(),_("svg",hn,yn)}const Zt=Oe(mn,[["render",xn]]),aye=Object.freeze(Object.defineProperty({__proto__:null,default:Zt},Symbol.toStringTag,{value:"Module"})),wn={name:"PhSignature"},gn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},$n=e("path",{fill:"currentColor",d:"M232 168H63.86c2.66-5.24 5.33-10.63 8-16.11c14.93 1.65 32.62-8.8 52.74-31.22c.6 1.66 1.27 3.37 2 5.1c6.51 15.25 14.91 23.94 25 25.85c10.34 2 20.58-3.23 31.08-15.82C189.5 143.87 203.5 152 232 152a8 8 0 0 0 0-16c-30.63 0-39.55-10.59-40-16.22a8 8 0 0 0-15.51-2.54c-12.17 18.25-19.38 19.14-22 18.66c-8.33-1.57-16.08-20.93-18.69-33.51a8 8 0 0 0-14.8-2.23c-19.8 24.62-33.08 33-41.41 35.14c8.49-18.88 14.83-35.45 18.89-49.4c6.82-23.44 7.32-39.83 1.51-50.1c-3-5.36-9.29-11.75-21.91-11.8h-.25c-16 .11-28.6 15.3-34.62 41.7c-3.59 15.71-4.18 33.19-1.63 48s7.86 25.51 15.55 31.89c-3.72 7.73-7.53 15.28-11.23 22.43H24a8 8 0 0 0 0 16h13.41c-11.32 21-20.12 35.64-20.26 35.88a8 8 0 1 0 13.71 8.24c.15-.26 11.27-18.79 24.7-44.12H232a8 8 0 0 0 0-16Zm-40-48v-.21a1.11 1.11 0 0 1 0 .21M58.79 69.26C62.78 51.78 70.48 40 78 40c5.25 0 7 1.86 8 3.67c3 5.33 6.52 24.19-21.65 86.37c-8.19-11.29-10.98-37.04-5.56-60.78"},null,-1),kn=[$n];function jn(n,o,x,f,d,a){return s(),_("svg",gn,kn)}const Ft=Oe(wn,[["render",jn]]),sye=Object.freeze(Object.defineProperty({__proto__:null,default:Ft},Symbol.toStringTag,{value:"Module"})),Dn={name:"TablerSignatureOff"},Sn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Tn=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M3 17q5-5 5-8c0-.394-.017-.735-.05-1.033M6 6C5 6 3.968 7.085 4 9c.034 2.048 1.658 4.877 2.5 6C8 17 9 17.5 10 16l2-3q.5 4 3 4c.219 0 .708-.341 1.231-.742M20 16c.303.245.64.677 1 1M3 3l18 18"},null,-1),Cn=[Tn];function Pn(n,o,x,f,d,a){return s(),_("svg",Sn,Cn)}const wl=Oe(Dn,[["render",Pn]]),oye=Object.freeze(Object.defineProperty({__proto__:null,default:wl},Symbol.toStringTag,{value:"Module"})),An={name:"MaterialSymbolsCheckIndeterminateSmall"},Mn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},On=e("path",{fill:"currentColor",d:"M6 13v-2h12v2z"},null,-1),Nn=[On];function Fn(n,o,x,f,d,a){return s(),_("svg",Mn,Nn)}const $t=Oe(An,[["render",Fn]]),nye=Object.freeze(Object.defineProperty({__proto__:null,default:$t},Symbol.toStringTag,{value:"Module"})),In={name:"MaterialSymbolsCheckSmall"},Yn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Bn=e("path",{fill:"currentColor",d:"m10 16.4l-4-4L7.4 11l2.6 2.6L16.6 7L18 8.4z"},null,-1),qn=[Bn];function Un(n,o,x,f,d,a){return s(),_("svg",Yn,qn)}const ft=Oe(In,[["render",Un]]),rye=Object.freeze(Object.defineProperty({__proto__:null,default:ft},Symbol.toStringTag,{value:"Module"})),Hn={name:"MaterialSymbolsSearch"},zn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Vn=e("path",{fill:"currentColor",d:"m19.6 21l-6.3-6.3q-.75.6-1.725.95T9.5 16q-2.725 0-4.612-1.888T3 9.5q0-2.725 1.888-4.612T9.5 3q2.725 0 4.612 1.888T16 9.5q0 1.1-.35 2.075T14.7 13.3l6.3 6.3l-1.4 1.4ZM9.5 14q1.875 0 3.188-1.313T14 9.5q0-1.875-1.313-3.188T9.5 5Q7.625 5 6.312 6.313T5 9.5q0 1.875 1.313 3.188T9.5 14Z"},null,-1),Ln=[Vn];function En(n,o,x,f,d,a){return s(),_("svg",zn,Ln)}const gl=Oe(Hn,[["render",En]]),iye=Object.freeze(Object.defineProperty({__proto__:null,default:gl},Symbol.toStringTag,{value:"Module"})),Rn={name:"ElAdjustAlt"},Jn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 1200 1200"},Kn=e("path",{fill:"currentColor",d:"M104.312 0v699.844H0v254.062h367.281V699.844H262.969V0zM520.75 0v451.75H416.344v254.062h367.312V451.75H679.312V0zm416.281 0v201.625H832.719v254.062H1200V201.625h-104.312V0zm-51.093 252.031h260.844v50.438H885.938zm51.093 246.094V1200h158.656V498.125zm-467.437 4.031h260.812v50.438H469.594zm51.156 244.032V1200h158.562V746.188zm-467.531 4.031h260.844v50.438H53.219zm51.125 246.093V1200H263V996.312z"},null,-1),Gn=[Kn];function Zn(n,o,x,f,d,a){return s(),_("svg",Jn,Gn)}const Aa=Oe(Rn,[["render",Zn]]),dye=Object.freeze(Object.defineProperty({__proto__:null,default:Aa},Symbol.toStringTag,{value:"Module"})),Wn={name:"MdiTableHeadersEye"},Qn={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Xn=e("path",{fill:"currentColor",d:"M1 6v13a2 2 0 0 0 2 2h6V11h12V6a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2m2 0h4v3H3m4 10H3v-3h4m0-2H3v-3h4m2-2V6h4v3m6 0h-4V6h4m-2 10a1 1 0 1 1-1 1a1 1 0 0 1 1-1m0-3a6.45 6.45 0 0 1 6 4a6.5 6.5 0 0 1-12 0a6.45 6.45 0 0 1 6-4m0 1.5a2.5 2.5 0 1 0 2.5 2.5a2.5 2.5 0 0 0-2.5-2.5"},null,-1),er=[Xn];function tr(n,o,x,f,d,a){return s(),_("svg",Qn,er)}const Ma=Oe(Wn,[["render",tr]]),_ye=Object.freeze(Object.defineProperty({__proto__:null,default:Ma},Symbol.toStringTag,{value:"Module"})),lr={name:"IconamoonSignTimesBold"},ar={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},sr=e("path",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2.5",d:"M17 7L7 17M7 7l10 10"},null,-1),or=[sr];function nr(n,o,x,f,d,a){return s(),_("svg",ar,or)}const At=Oe(lr,[["render",nr]]),uye=Object.freeze(Object.defineProperty({__proto__:null,default:At},Symbol.toStringTag,{value:"Module"})),rr={name:"TdesignClear"},ir={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},dr=e("path",{fill:"currentColor",d:"M9 1h6v8.5h6V23H3V9.5h6zm2 2v8.5H5V14h14v-2.5h-6V3zm8 13H5v5h9v-3h2v3h3z"},null,-1),_r=[dr];function ur(n,o,x,f,d,a){return s(),_("svg",ir,_r)}const Oa=Oe(rr,[["render",ur]]),cye=Object.freeze(Object.defineProperty({__proto__:null,default:Oa},Symbol.toStringTag,{value:"Module"})),cr={name:"TdesignClearFormatting1"},pr={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},vr=e("path",{fill:"currentColor",d:"m14.03 1.889l9.657 9.657l-8.345 8.345l-.27.27H20v2H6.747l-3.666-3.666a4 4 0 0 1 0-5.657zm.322 16.163l6.507-6.506l-6.829-6.829l-6.828 6.829l6.828 6.828l.32-.323zM5.788 12.96l-1.293 1.293a2 2 0 0 0 0 2.828l3.08 3.08h4.68l.366-.368z"},null,-1),fr=[vr];function mr(n,o,x,f,d,a){return s(),_("svg",pr,fr)}const Na=Oe(cr,[["render",mr]]),pye=Object.freeze(Object.defineProperty({__proto__:null,default:Na},Symbol.toStringTag,{value:"Module"})),hr={name:"PhCaretDoubleLeftBold"},br={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},yr=e("path",{fill:"currentColor",d:"M208.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L137 128ZM57 128l71.52-71.51a12 12 0 0 0-17-17l-80 80a12 12 0 0 0 0 17l80 80a12 12 0 0 0 17-17Z"},null,-1),xr=[yr];function wr(n,o,x,f,d,a){return s(),_("svg",br,xr)}const Fa=Oe(hr,[["render",wr]]),vye=Object.freeze(Object.defineProperty({__proto__:null,default:Fa},Symbol.toStringTag,{value:"Module"})),gr={name:"PhCaretLeftBold"},$r={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},kr=e("path",{fill:"currentColor",d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"},null,-1),jr=[kr];function Dr(n,o,x,f,d,a){return s(),_("svg",$r,jr)}const Ia=Oe(gr,[["render",Dr]]),fye=Object.freeze(Object.defineProperty({__proto__:null,default:Ia},Symbol.toStringTag,{value:"Module"})),Sr={name:"PhCaretRightBold"},Tr={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Cr=e("path",{fill:"currentColor",d:"m184.49 136.49l-80 80a12 12 0 0 1-17-17L159 128L87.51 56.49a12 12 0 1 1 17-17l80 80a12 12 0 0 1-.02 17"},null,-1),Pr=[Cr];function Ar(n,o,x,f,d,a){return s(),_("svg",Tr,Pr)}const Ya=Oe(Sr,[["render",Ar]]),mye=Object.freeze(Object.defineProperty({__proto__:null,default:Ya},Symbol.toStringTag,{value:"Module"})),Mr={name:"PhCaretDoubleRightBold"},Or={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Nr=e("path",{fill:"currentColor",d:"m144.49 136.49l-80 80a12 12 0 0 1-17-17L119 128L47.51 56.49a12 12 0 0 1 17-17l80 80a12 12 0 0 1-.02 17m80-17l-80-80a12 12 0 1 0-17 17L199 128l-71.52 71.51a12 12 0 0 0 17 17l80-80a12 12 0 0 0 .01-17Z"},null,-1),Fr=[Nr];function Ir(n,o,x,f,d,a){return s(),_("svg",Or,Fr)}const Ba=Oe(Mr,[["render",Ir]]),hye=Object.freeze(Object.defineProperty({__proto__:null,default:Ba},Symbol.toStringTag,{value:"Module"})),K=()=>{const n=()=>{},o=h=>h?new Intl.NumberFormat("id-ID",{minimumFractionDigits:0}).format(h):0;let x=0,f=-1,d=null;return{sayHello:n,pointFormat:o,countClickListFn:(h,...k)=>{f!=h&&(f=h,x=0,d&&clearTimeout(d),d=null),x++,d==null&&(d=setTimeout(()=>{x>k.length&&(x=k.length),x!==0&&(x>1&&k[0](),x=x-1,k[x]()),x=0,d&&clearTimeout(d),d=null},200))},checkRole:h=>{const k=ka("role");return h.includes(k.value)},checkPermission:h=>{{let k=localStorage.getItem("permissions");if(k)return k=JSON.parse(k),k?k.includes(h):!1}return!1},checkPermissions:h=>{let k=localStorage.getItem("permissions");return k&&(k=JSON.parse(k),k&&Array.isArray(k))?k.filter(C=>h.includes(C)).length>0:0},round:(h,k)=>+(Math.round(+(h+"e+"+k))+"e-"+k)}};const sl=n=>(nt("data-v-faac480f"),n=n(),rt(),n),Yr={class:"w-full flex justify-center items-center grow h-0 pb-1 px-1 flex-col"},Br={class:"w-full flex justify-end"},qr={class:"w-6/12 p-1 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col"},Ur={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Hr={class:"relative",style:{width:"320px",height:"90%"}},zr={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Vr={class:"w-full h-full flex flex-col items-center justify-content-center bg-white ring-1 ring-gray-300 p-2"},Lr=sl(()=>e("div",{class:"w-full text-blue-600 font-bold grid-"}," Set Show Column Field ",-1)),Er={class:"w-full flex flex-wrap overflow-auto text-xs"},Rr=["onClick"],Jr={class:"w-full flex justify-end"},Kr={key:1,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-1 text-xs",style:{"background-color":"rgba(255,255,255,0.9)"}},Gr={class:"relative w-full sm:max-w-[95%]",style:{height:"90%"}},Zr={class:"absolute -top-6 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Wr={class:"w-full h-full flex flex-col items-center justify-content-center bg-white ring-1 ring-gray-300 p-2"},Qr={class:"w-full flex flex-wrap overflow-auto sm:justify-center"},Xr={id:"tbl_filter",class:"border-separate"},ei={class:"sticky top-0 !z-[2] bg-slate-500"},ti=sl(()=>e("th",{class:"border-black border-[1px]",colspan:"2"},"Sort",-1)),li=sl(()=>e("th",{class:"border-black border-[1px]",rowspan:"2"},"Column",-1)),ai=sl(()=>e("th",{class:"border-black border-[1px]",rowspan:"2"},"Operator",-1)),si=sl(()=>e("th",{class:"border-black border-[1px]",rowspan:"2"},"Value",-1)),oi={class:"border-black border-[1px] p-2",rowspan:"2"},ni=sl(()=>e("tr",null,[e("th",{class:"border-black border-[1px]",style:{"min-width":"55px"}},"Priority"),e("th",{class:"border-black border-[1px]",style:{"min-width":"45px"}},"Type")],-1)),ri={key:0},ii=["onUpdate:modelValue","onChange"],di=["value"],_i={key:1,disabled:""},ui=sl(()=>e("option",{value:""},null,-1)),ci=["value"],pi=["onUpdate:modelValue","disabled"],vi=sl(()=>e("option",{value:""},null,-1)),fi=sl(()=>e("option",{value:"asc"},"ASC",-1)),mi=sl(()=>e("option",{value:"desc"},"DESC",-1)),hi=[vi,fi,mi],bi=["onUpdate:modelValue"],yi={key:0,value:"exactly_same"},xi={key:1,value:"exactly_not_same"},wi={key:2,value:"same"},gi={key:3,value:"not_same"},$i={key:4,value:"more_then"},ki={key:5,value:"more_and"},ji={key:6,value:"less_then"},Di={key:7,value:"less_and"},Si={key:8,value:"specific"},Ti={key:9,value:"fullday"},Ci={style:{"min-width":"180px"}},Pi=["onUpdate:modelValue"],Ai=sl(()=>e("option",{value:""},null,-1)),Mi=["value"],Oi=["onUpdate:modelValue"],Ni={key:2,class:"flex flex-wrap"},Fi={class:"w-full sm:w-1/2"},Ii=sl(()=>e("div",{class:"w-full"},"From",-1)),Yi={class:"w-full sm:w-1/2"},Bi=sl(()=>e("div",{class:"w-full"},"To",-1)),qi=["onClick"],Ui={class:"w-full flex justify-end"},Hi={class:"w-full flex justify-center items-center grow h-0 text-sm flex-col"},zi={key:0,class:""},Vi={class:"tacky"},Li={class:"sticky top-0 !z-[5]"},Ei=["rowspan","colspan"],Ri=["onClick"],Ji={key:0,class:"w-7 h-5 flex items-center justify-center"},Ki=["onClick","checked"],Gi={key:2,class:"w-full pt-1 flex justify-end"},Zi={class:"flex gap-2"},Wi={class:"flex gap-2"},Qi=["onClick"],Xi={__name:"TableView",props:{title:{type:String,required:!1,default:"Header Info"},thead:{type:Array,required:!0,default:[]},tbody:{type:Array,required:!1,default:[]},selected:{type:Number,required:!1,default:-1},scrolling:{type:Object,required:!1,default:{page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}},fnCallData:{type:Function,required:!0},loadDataType:{type:String,required:!1,default:"scroll"},rowBgColor:{type:Function,required:!1,default:null},deep_state:{type:Object,required:!1,default:{}}},emits:["doFilter","setSelected","setScrollingPage","setCheckbox"],setup(n,{emit:o}){const x=n,{_tv:f}=Dt($()),d=u([]),a=u([]);let r=[],p=1;const i=(le,z="",G=[])=>{le.forEach((oe,se)=>{if(oe.tbl_show==1&&(z&&(oe.dChild=z,oe.parentIdx=G),r.push(oe),oe.childs!=null&&oe.childs.length>0)){let _e=oe.key;G=[se],z&&(_e=z+","+_e,G.push(se)),p=p>=_e.split(",").length+1?p:_e.split(",").length+1,i(oe.childs,_e,G)}})},c=(le,z=[])=>{le.forEach((G,oe)=>{z.length>0&&(G.parentIdx=[...z]),G.childs==null||G.childs.length==0?d.value.push(G):(z.length>0?z.push(oe):z=[oe],c(G.childs,z))}),z.pop()},h=le=>{let z=JSON.parse(JSON.stringify(le)),G=JSON.parse(JSON.stringify(le));a.value.push(G.map(se=>(se.tbl_show==null&&(se.tbl_show=1),se.permit==null&&(se.permit=1),se.freeze==null&&(se.freeze=0),delete se.childs,se)));let oe=[];if(z.filter(se=>se.childs!=null&&se.childs.length>0).forEach(se=>{let _e=JSON.parse(JSON.stringify(se.childs));oe=oe.concat(_e)}),oe.length>0)return h(oe)};let k=0;const C=le=>{let z=le.map(G=>G.key);return r.every(G=>{if(G.tbl_show==1){let oe=G.childs==null?[]:G.childs.filter(se=>se.tbl_show==1);if(k=oe.length>0&&G.tbl_show==1?oe.length:1,g(G.childs),G.dChild==null){let se=z.indexOf(G.key);se>-1&&((G.childs==null||G.childs.length==0)&&(le[se].rowspan=p),G.childs!=null&&G.childs.length>0&&(le[se].rowspan=1),le[se].colspan=k)}else{let se=G.dChild.split(","),_e=y(le,se,1,G);G.childs==null||G.childs.length==0?_e.rowspan=p-G.dChild.split(",").length:_e.rowspan=1,_e.colspan=k}}return!0}),le},y=(le,z=[],G,oe)=>{if(z.length==0){let se=le.childs.map(_e=>_e.key).indexOf(oe.key);return le.childs[se]}if(z.length>0){let se=le;G==0&&(se=le.childs);let _e=se.map(ue=>ue.key).indexOf(z[0]);if(_e==-1){console.error("ID not found");return}return z.shift(),y(se[_e],z,0,oe)}},g=le=>{(le==null?[]:le.filter(G=>G.tbl_show==1)).length>0&&le.forEach(G=>{let oe=G.childs==null?[]:G.childs.filter(se=>se.tbl_show==1);oe.length>0&&G.tbl_show==1&&(k+=oe.length-1,g(G.childs))})},b=u([]),v=(le,z=[])=>{le.forEach((G,oe)=>{G.permit!=null&&G.permit==0?le.splice(oe,1):(G.permit==null&&(G.permit=1),G.tbl_show==null&&(G.tbl_show=1),G.freeze==null&&(G.freeze=0),le.splice(oe,1,G),G.childs!=null&&G.childs.length>0&&(z.push(G),v(G.childs,z)))}),z.reverse(),z.forEach((G,oe)=>{G.childs.filter(_e=>_e.tbl_show==1).length==0?G.tbl_show=0:G.tbl_show=1}),z.reverse(),z.shift()},w=(le,z=[])=>{le.forEach((G,oe)=>{G.childs!=null&&G.childs.length>0&&(z.push(G),w(G.childs,z))}),z.reverse(),z.forEach((G,oe)=>{G.childs.filter(_e=>_e.tbl_show==1).length==0?G.tbl_show=0:G.tbl_show=1}),z.reverse(),z.shift()};je(()=>x.thead,(le,z)=>{b.value=JSON.parse(JSON.stringify(le)),v(b.value)},{deep:!0,immediate:!0}),je(()=>b.value,(le,z)=>{r=[],a.value=[],d.value=[],w(le),i(JSON.parse(JSON.stringify(le)));let G=C(JSON.parse(JSON.stringify(le)));c(G),h(G)},{deep:!0,immediate:!0}),je(()=>x.tbody,(le,z)=>{if(x.rowBgColor){let G=[...le];G.map(oe=>{oe.class_h=x.rowBgColor(oe)}),le=[...G]}},{deep:!0,immediate:!0}),je(()=>x.deep_state,(le,z)=>{le.clearCheckBox&&(le.clearCheckBox=!1,ve.value=[],o("setCheckbox",ve.value))},{deep:!0,immediate:!0});const{pointFormat:m}=K(),S=(le,z="")=>z=="string"?le:le==parseFloat(le)?m(le):le,A=u(null),D=()=>Y(this,null,function*(){if(x.loadDataType!="scroll"||!x.scrolling.may_get_data)return;let le=A.value;if(le.scrollLeft!=x.scrolling.scrollLeft){x.scrolling.scrollLeft=le.scrollLeft;return}if(x.scrolling.is_last_record||!(Math.round(le.scrollTop)+le.clientHeight>=le.scrollHeight-1))return;let G=x.scrolling.page+1;o("setScrollingPage",G),yield x.fnCallData()}),M=u(!1),T=le=>{let z=le.label;if(le.parentIdx!=null&&le.parentIdx.length>0){let G="",oe=[];le.parentIdx.forEach((se,_e)=>{_e==0?G=b.value[se]:G=G.childs[se],oe.push(G.label)}),z=oe.join(" ")+" "+z}return z},q=le=>{if(le.parentIdx!=null&&le.parentIdx.length>0){let z="";le.parentIdx.forEach((oe,se)=>{se==0?z=b.value[oe]:z=z.childs[oe]});let G=z.childs.map(oe=>oe.key).indexOf(le.key);G!=-1&&(z.childs[G].tbl_show=!z.childs[G].tbl_show)}else{let z=b.value.map(G=>G.key).indexOf(le.key);z!=-1&&(b.value[z].tbl_show=!b.value[z].tbl_show)}},P=le=>{let z=JSON.parse(JSON.stringify(b.value));le=="select"?N(z,1):N(z,0),b.value=z},N=(le,z)=>{le.forEach(G=>{G.tbl_show=z,G.childs!==void 0&&G.childs.length>0&&N(G.childs,z)})},L=u({current_page:1,list_page:[],last_page:7,piece:2}),R=()=>{if(L.value.current_page=x.scrolling.page,x.scrolling.is_last_record&&L.value.current_page--,L.value.list_page=[],L.value.current_page>0){let le=0,z=0,G=0,oe=0;for(let se=L.value.current_page;se>=L.value.current_page-L.value.piece;se--)se>0?le=se:G++;if(G+=L.value.piece,L.value.current_page+G>L.value.last_page){z=L.value.last_page;for(let se=le-1;se>=le-(L.value.current_page+G-z);se--)se>0&&oe++;le-=oe}else z=L.value.current_page+G;for(let se=le;se<=z;se++)L.value.list_page.push(se)}},J=()=>{ve.value=[],o("setCheckbox",ve.value),o("doFilter")};je(()=>x.scrolling.page,(le,z)=>{le==1&&A.value&&(A.value.scrollTop=0),R()},{deep:!0,immediate:!0}),je(()=>x.scrolling.is_last_record,(le,z)=>{R()},{deep:!0,immediate:!0});const re=le=>Y(this,null,function*(){x.loadDataType=="paginate"&&(o("setScrollingPage",le),yield x.fnCallData(),A.value&&(A.value.scrollTop=0))}),te=u({});$()._tv.filter_model=te;const ee=u(JSON.parse(JSON.stringify(d.value.map((le,z)=>(z+1).toString()))));d.value.forEach((le,z)=>{let G=JSON.parse(JSON.stringify(le)),oe={};if(oe[G.key]={sort_priority:"",sort_type:"",operator:["date"].indexOf(G.type)>-1?"fullday":["datetime"].indexOf(G.type)>-1?"specific":"exactly_same",value_1:"",value_2:"",type:G.type,label:G.label},f.filter_model=ie(ie({},f.filter_model),oe),G.sort){f.filter_model[G.key].sort_priority=G.sort.priority,f.filter_model[G.key].sort_type=G.sort.type;let se=G.sort.priority.toString(),_e=ee.value.indexOf(se);_e>-1&&ee.value.splice(_e,1)}if(te.value=ie(ie({},te.value),oe),G.sort){te.value[G.key].sort_priority=G.sort.priority,te.value[G.key].sort_type=G.sort.type;let se=G.sort.priority.toString(),_e=ee.value.indexOf(se);_e>-1&&ee.value.splice(_e,1)}});let ce="";const U=le=>{ce=le.target.value},I=(le,z)=>{ce!=""&&ee.value.push(ce);let G=le.target.value,oe=ee.value.indexOf(G);oe>-1&&ee.value.splice(oe,1),G==""&&(te.value[z].sort_type=""),le.target.blur()},Z=ne(()=>{let le=ee.value;return le.sort((z,G)=>z-G),le}),E=()=>{for(let le in te.value)te.value[le].value_1="",te.value[le].value_2=""},H=u("");$()._tv.global_keyword=H;const ve=u([]),Ie=le=>{let z=ve.value.indexOf(le);z==-1?ve.value.push(le):ve.value.splice(z,1),o("setCheckbox",ve.value)};return(le,z)=>{const G=gl,oe=Aa,se=Ma,_e=At,ue=Oa,B=Vt("vue-date-picker"),de=zt,V=Na,me=Fa,Me=Ia,tt=Ya,ut=Ba;return s(),_("div",Yr,[e("div",Br,[e("div",qr,[ae(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":z[0]||(z[0]=he=>Ee(H)?H.value=he:null),name:"search",placeholder:"Keyword",onKeyup:z[1]||(z[1]=so(he=>J(),["enter"]))},null,544),[[Te,t(H)]])]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:z[2]||(z[2]=he=>J())},[j(G)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:z[3]||(z[3]=he=>t(f).filter_box=!t(f).filter_box)},[j(oe)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:z[4]||(z[4]=he=>M.value=!t(M))},[j(se)])]),t(M)?(s(),_("div",Ur,[e("div",Hr,[e("div",zr,[j(_e,{style:{color:"black",cursor:"pointer"},onClick:z[5]||(z[5]=he=>M.value=!1)})]),e("div",Vr,[Lr,e("div",Er,[(s(!0),_(ye,null,Ae(t(d),(he,Re)=>(s(),_("div",{class:Ue(["p-2 m-1 font-bold cursor-pointer rounded-sm",he.tbl_show==1?"bg-green-600 text-white":"bg-gray-400 text-black"]),onClick:Ne=>q(he)},l(T(he)),11,Rr))),256))]),e("div",Jr,[e("button",{class:"bg-white font-bold mr-2",onClick:z[6]||(z[6]=he=>P("select"))}," Select All "),e("button",{class:"bg-white font-bold",onClick:z[7]||(z[7]=he=>P("invert"))}," Invert All ")])])])])):O("",!0),t(f).filter_box?(s(),_("div",Kr,[e("div",Gr,[e("div",Zr,[j(_e,{style:{color:"black",cursor:"pointer"},onClick:z[8]||(z[8]=he=>t(f).filter_box=!1)})]),e("div",Wr,[e("div",Qr,[e("table",Xr,[e("thead",ei,[e("tr",null,[ti,li,ai,si,e("th",oi,[e("button",{type:"button",class:"ring-1 ring-gray-700 text-white bg-slate-700",onClick:z[9]||(z[9]=he=>E())},[j(ue)])])]),ni]),e("tbody",null,[(s(!0),_(ye,null,Ae(t(d),(he,Re)=>(s(),_(ye,null,[he.filter_on&&he.filter_on==1?(s(),_("tr",ri,[e("td",null,[he.sort_off!=1?ae((s(),_("select",{key:0,"onUpdate:modelValue":Ne=>t(te)[he.key].sort_priority=Ne,onFocus:z[10]||(z[10]=Ne=>U(Ne)),onChange:Ne=>I(Ne,he.key)},[t(te)[he.key].sort_priority?(s(),_("option",{key:0,value:t(te)[he.key].sort_priority},l(t(te)[he.key].sort_priority),9,di)):O("",!0),t(te)[he.key].sort_priority?(s(),_("option",_i)):O("",!0),ui,(s(!0),_(ye,null,Ae(t(Z),Ne=>(s(),_("option",{value:Ne},l(Ne),9,ci))),256))],40,ii)),[[We,t(te)[he.key].sort_priority]]):O("",!0)]),e("td",null,[he.sort_off!=1?ae((s(),_("select",{key:0,"onUpdate:modelValue":Ne=>t(te)[he.key].sort_type=Ne,disabled:t(te)[he.key].sort_priority==""},hi,8,pi)),[[We,t(te)[he.key].sort_type]]):O("",!0)]),e("td",null,l(T(he)),1),e("td",null,[ae(e("select",{"onUpdate:modelValue":Ne=>t(te)[he.key].operator=Ne},[["select","number","string"].indexOf(he.type)>-1?(s(),_("option",yi,"==")):O("",!0),["select","number","string"].indexOf(he.type)>-1?(s(),_("option",xi,"!==")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",wi,"=")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",gi,"!=")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",$i,">")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",ki,">=")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",ji,"<")):O("",!0),["number","string"].indexOf(he.type)>-1?(s(),_("option",Di,"<=")):O("",!0),["datetime"].indexOf(he.type)>-1?(s(),_("option",Si,"Specific")):O("",!0),["date","datetime"].indexOf(he.type)>-1?(s(),_("option",Ti,"Fullday")):O("",!0)],8,bi),[[We,t(te)[he.key].operator]])]),e("td",Ci,[he.type=="select"?ae((s(),_("select",{key:0,"onUpdate:modelValue":Ne=>t(te)[he.key].value_1=Ne},[Ai,(s(!0),_(ye,null,Ae(he.select_item,Ne=>(s(),_("option",{value:Ne.k==null?Ne:Ne.k},l(Ne.v==null?Ne:Ne.v),9,Mi))),256))],8,Pi)),[[We,t(te)[he.key].value_1]]):O("",!0),["string","number"].indexOf(he.type)>-1?ae((s(),_("input",{key:1,"onUpdate:modelValue":Ne=>t(te)[he.key].value_1=Ne,class:"flex-grow",type:"text",placeholder:"Keyword"},null,8,Oi)),[[Te,t(te)[he.key].value_1]]):O("",!0),["date","datetime"].indexOf(he.type)>-1?(s(),_("div",Ni,[e("div",Fi,[Ii,e("div",null,[j(de,null,{default:Q(()=>[j(B,{modelValue:t(te)[he.key].value_1,"onUpdate:modelValue":Ne=>t(te)[he.key].value_1=Ne,type:"datetime",format:he.type=="date"||t(te)[he.key].operator=="fullday"?"dd-MM-yyyy":"dd-MM-yyyy HH:mm:ss","enable-time-picker":he.type=="datetime"&&t(te)[he.key].operator=="specific","text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue","onUpdate:modelValue","format","enable-time-picker"])]),_:2},1024)])]),e("div",Yi,[Bi,e("div",null,[j(de,null,{default:Q(()=>[j(B,{type:"datetime",modelValue:t(te)[he.key].value_2,"onUpdate:modelValue":Ne=>t(te)[he.key].value_2=Ne,format:he.type=="date"||t(te)[he.key].operator=="fullday"?"dd-MM-yyyy":"dd-MM-yyyy HH:mm:ss","enable-time-picker":he.type=="datetime"&&t(te)[he.key].operator=="specific","text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue","onUpdate:modelValue","format","enable-time-picker"])]),_:2},1024)])])])):O("",!0)]),e("td",null,[e("button",{type:"button",class:"ring-1 ring-gray-700 text-white bg-slate-700",onClick:Ne=>(t(te)[he.key].value_1="",t(te)[he.key].value_2="")},[j(V)],8,qi)])])):O("",!0)],64))),256))])])]),e("div",Ui,[e("button",{type:"button",class:"bg-white font-bold mt-3 mr-2",onClick:z[11]||(z[11]=he=>t(f).filter_box=!1)}," Cancel "),e("button",{type:"button",class:"bg-white font-bold mt-3",onClick:z[12]||(z[12]=he=>J())}," Filter ")])])])])):O("",!0),e("div",Hi,[n.tbody.length==0?(s(),_("div",zi," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:A,onScroll:D},[e("table",Vi,[e("thead",Li,[(s(!0),_(ye,null,Ae(t(a),(he,Re)=>(s(),_("tr",null,[(s(!0),_(ye,null,Ae(he,Ne=>(s(),_(ye,null,[Ne.permit?ae((s(),_("th",{key:0,rowspan:Ne.rowspan,colspan:Ne.colspan,class:Ue(Ne.freeze==1?"freeze":""),style:ya({left:Ne.freeze&&Ne.freeze_left?Ne.freeze_left:"none"})},l(Ne.label),15,Ei)),[[Be,Ne.tbl_show]]):O("",!0)],64))),256))]))),256))]),e("tbody",null,[(s(!0),_(ye,null,Ae(n.tbody,(he,Re)=>(s(),_("tr",{key:Re,onClick:Ne=>le.$emit("setSelected",Re),class:Ue(n.selected==Re?"active":"")},[(s(!0),_(ye,null,Ae(t(d),Ne=>(s(),_(ye,null,[Ne.permit?ae((s(),pe(Da(Ne.freeze==0?"td":"th"),{key:0,class:Ue(["my-list",he.class_h?he.class_h:""]),style:ya({left:Ne.freeze&&Ne.freeze_left?Ne.freeze_left:"none"})},{default:Q(()=>[Ne.checkbox?Ul(le.$slots,Ne.key,{key:1,item:he,index:Re},()=>[Ne.checkbox?(s(),_("label",Ji,[e("input",{type:"checkbox",onClick:Ze=>Ie(he[Ne.checkbox]),checked:t(ve).indexOf(he[Ne.checkbox])>-1},null,8,Ki)])):O("",!0)],!0):(s(),_("div",{key:0,class:Ue(["w-full h-auto flex items-center",Ne.class?Ne.class:"justify-center"])},[Ul(le.$slots,Ne.key,{item:he,index:Re},()=>[Ne.isai?(s(),_(ye,{key:0},[F(l(Re+1),1)],64)):O("",!0),Ne.dateformat?(s(),_(ye,{key:1},[F(l(he[Ne.key]?le.$moment(he[Ne.key]).format(Ne.dateformat):""),1)],64)):(s(),_(ye,{key:2},[F(l(he[Ne.key]?S(he[Ne.key],Ne.type):""),1)],64))],!0)],2))]),_:2},1032,["class","style"])),[[Be,Ne.tbl_show]]):O("",!0)],64))),256))],10,Ri))),128))])])],544)),n.loadDataType=="paginate"?(s(),_("div",Gi,[e("div",Zi,[t(L).list_page.indexOf(1)==-1?(s(),_("div",{key:0,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:z[13]||(z[13]=he=>re(1))},[j(me)])):O("",!0),t(L).list_page.indexOf(1)==-1?(s(),_("div",{key:1,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:z[14]||(z[14]=he=>re(t(L).current_page-1))},[j(Me)])):O("",!0),e("div",Wi,[(s(!0),_(ye,null,Ae(t(L).list_page,he=>(s(),_("div",{class:Ue([he==t(L).current_page?"bg-slate-800 text-white":"bg-white text-slate-800","px-3 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm"]),onClick:Re=>re(he)},l(he),11,Qi))),256))]),t(L).list_page.indexOf(t(L).last_page)==-1?(s(),_("div",{key:2,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:z[15]||(z[15]=he=>re(t(L).current_page+1))},[j(tt)])):O("",!0),t(L).list_page.indexOf(t(L).last_page)==-1?(s(),_("div",{key:3,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:z[16]||(z[16]=he=>re(t(L).last_page))},[j(ut)])):O("",!0)])])):O("",!0)])])}}},Ot=Oe(Xi,[["__scopeId","data-v-faac480f"]]),bye=Object.freeze(Object.defineProperty({__proto__:null,default:Ot},Symbol.toStringTag,{value:"Module"})),ed={name:"MaterialSymbolsExclamation"},td={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},ld=e("path",{fill:"currentColor",d:"M11 14V5h2v9zm0 5v-2h2v2z"},null,-1),ad=[ld];function sd(n,o,x,f,d,a){return s(),_("svg",td,ad)}const qa=Oe(ed,[["render",sd]]),yye=Object.freeze(Object.defineProperty({__proto__:null,default:qa},Symbol.toStringTag,{value:"Module"})),od={key:0,class:"flex items-center justify-center fixed top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},nd={class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},rd={class:"absolute -top-7 right-0 py-1 px-2 bg-white border-solid border-2 border-gray-600 border-b-0 rounded-tl-md"},id={class:"flex items-center justify-center p-2 border-red-600 border-solid border-2 rounded-full"},dd={class:"mx-0 my-2 text-justify"},_d={key:0},ud={key:1},cd=e("b",null,"tidak dapat dikembalikan lagi",-1),pd={key:0,class:"w-full text-left mt-3"},vd=e("b",{class:"text-gray-600"},"Data Information :",-1),fd={key:0,class:"w-full border-solid border-2 border-black p-1 capitalize bg-slate-800 text-white text-center"},md={key:1,class:"w-full border-solid border-2 border-black"},hd={class:"border-solid border-2 border-black p-1 capitalize bg-slate-800 text-white text-right"},bd={class:"border-solid border-2 border-black p-1 text-left"},yd={key:2,class:"w-full border-solid border-2 border-black"},xd={class:"border-solid border-2 border-black p-1 capitalize bg-slate-800 text-white text-right"},wd={class:"border-solid border-2 border-black p-1 text-left"},gd={class:"w-full text-left mt-3"},$d={class:"flex w-full justify-between mt-5"},kd=["disabled"],It=Lt({__name:"PopupMini",props:{show:{type:Boolean,required:!0},data:{type:Object,required:!1,default:{}},fnClose:{type:Function,required:!0},fnConfirm:{type:Function,required:!0},type:{type:String,required:!0},info_type:{type:String,required:!1,default:"default"},enabledOk:{type:Boolean,required:!1,default:!0}},setup(n){const o=n;let x=null;const f=u(0),d=()=>{x==null&&(f.value=1,x=setInterval(()=>{f.value--,f.value<=0&&(clearInterval(x),x=null)},1e3))};return je(()=>o.show,(a,r)=>{a?d():(clearInterval(x),x=null)},{immediate:!0,deep:!0}),je(()=>o.enabledOk,(a,r)=>{a&&o.show&&d()},{immediate:!0,deep:!0}),Sa(()=>{clearInterval(x),x=null}),(a,r)=>{const p=At,i=qa;return n.show?(s(),_("div",od,[e("div",nd,[e("div",rd,[j(p,{class:"text-2xl text-black cursor-pointer",onClick:r[0]||(r[0]=c=>n.fnClose())})]),e("div",id,[j(i,{class:"text-4xl text-red-600"})]),e("div",dd,[n.type=="custome"?(s(),_("div",_d,[Ul(a.$slots,"words")])):n.type=="delete"?(s(),_("div",ud,[F(" Data yang akan dihapus "),cd,F(", yakin untuk menghapus data ini ? ")])):O("",!0)]),n.data.length>0||n.info_type=="custome"||!Array.isArray(n.data)?(s(),_("div",pd,[vd,n.info_type=="custome"?(s(),_("div",fd,[Ul(a.$slots,"info")])):O("",!0),n.data.length>0?(s(),_("table",md,[(s(!0),_(ye,null,Ae(n.data,(c,h)=>(s(),_("tr",null,[e("td",hd,l(h),1),e("td",bd,l(c),1)]))),256))])):O("",!0),Array.isArray(n.data)?O("",!0):(s(),_("table",yd,[(s(!0),_(ye,null,Ae(Object.keys(n.data),(c,h)=>(s(),_("tr",null,[e("td",xd,l(c),1),e("td",wd,l(n.data[c]),1)]))),256))]))])):O("",!0),e("div",gd,[Ul(a.$slots,"footer")]),e("div",$d,[e("button",{onClick:r[1]||(r[1]=c=>n.fnClose()),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Batal "),e("button",{onClick:r[2]||(r[2]=c=>n.fnConfirm()),disabled:!o.enabledOk||t(f)>0,class:Ue(["w-full border-solid border-2 p-1 text-white",o.enabledOk&&t(f)<=0?"bg-red-600 border-red-600":"bg-slate-600 border-slate-600"])}," Lanjutkan "+l(t(f)>0?t(f):""),11,kd)])])])):O("",!0)}}}),xye=Object.freeze(Object.defineProperty({__proto__:null,default:It},Symbol.toStringTag,{value:"Module"})),jd={class:"w-full flex min-h-[2rem] items-center bg-slate-600 p-1 sm:pl-1 text-white"},Dd={class:"grow",style:{"padding-left":"10px"}},Sd={class:"text-center w-10 flex justify-center"},Xe=Lt({__name:"HeaderPopup",props:{title:{type:String,required:!1,default:""},fn:{type:Function,required:!1}},setup(n){const o=n,x=Ht(),f=()=>{o.fn?o.fn():x.go(-1)};return(d,a)=>{const r=At;return s(),_("div",jd,[e("div",Dd,l(n.title||" "),1),e("div",Sd,[j(r,{class:"text-2xl cursor-pointer text-white",onClick:a[0]||(a[0]=p=>f())})])])}}}),wye=Object.freeze(Object.defineProperty({__proto__:null,default:Xe},Symbol.toStringTag,{value:"Module"})),Td={name:"TablerTools"},Cd={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Pd=e("g",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2"},[e("path",{d:"M3 21h4L20 8a1.5 1.5 0 0 0-4-4L3 17zM14.5 5.5l4 4"}),e("path",{d:"M12 8L7 3L3 7l5 5M7 8L5.5 9.5M16 12l5 5l-4 4l-5-5m4 1l-1.5 1.5"})],-1),Ad=[Pd];function Md(n,o,x,f,d,a){return s(),_("svg",Cd,Ad)}const Jl=Oe(Td,[["render",Md]]),gye=Object.freeze(Object.defineProperty({__proto__:null,default:Jl},Symbol.toStringTag,{value:"Module"})),Od=["value"],dl=Lt({__name:"InputPointFormat",props:{value:{type:[Number,String],required:!0,default:0},show:{type:Boolean,required:!1,default:!0}},emits:["input","nextBlur"],setup(n,{emit:o}){const x=n;let f=-1;u(!0);const d=u(0),a=g=>{let b=typeof g=="object"?g.target.value:g;b=b||x.value;let[v,w]=i(b);w!=b&&(w=0,v=0),d.value=w,o("input",v)};ne(g=>g?new Intl.NumberFormat("id-ID",{minimumFractionDigits:2}).format(g):0);const r=/[a-zA-Z .<>?/\\|:;'"\[\]{}=+=_()*&^%$#@!~`]/,p=g=>{f+=1,h(g)},i=g=>{let b=g.toString().replace(/(?!^-)[^,0-9]/g,"");if(b=="")return[0,0];let v=b.split(","),w=v.shift(),m=w+(v.length==0?"":"."+v.join("")),S=w.replace(/\B(?=(\d{3})+(?!\d))/g,".")+(v.length==0?"":","+v.join(""));return[m,S]},c=g=>{let b=g.toString().replace(/\./g,",");if(b=="")return 0;let v=b.split(",");return v.shift().replace(/\B(?=(\d{3})+(?!\d))/g,".")+(v.length==0?"":","+v.join(""))},h=(g,b=!1)=>{let v=0,w="";f==0||b?(v=g,w=c(g)):[v,w]=i(g),w!=""&&(d.value=w)},k=["Backspace","ArrowLeft","ArrowRight","ArrowUp","ArrowDown","Delete","Tab"],C=g=>{g.ctrlKey==!1&&!k.includes(g.key)&&g.key.match(r)&&g.preventDefault(),g.key=="0"&&(g.target.value===0||g.target.value==="0")&&g.preventDefault()},y=g=>{g.target.select(),g.target.setSelectionRange(0,99999)};return je(()=>x.show,(g,b)=>{f=0},{immediate:!0}),je(()=>x.value,(g,b)=>{h(g,!0)},{immediate:!0,deep:!0}),(g,b)=>(s(),_("input",{type:"text",value:t(d),onKeydown:b[0]||(b[0]=v=>C(v)),onKeyup:b[1]||(b[1]=v=>p(v.target.value)),onBlur:b[2]||(b[2]=v=>(a(v),g.$emit("nextBlur",v))),onFocus:b[3]||(b[3]=v=>y(v))},null,40,Od))}}),$ye=Object.freeze(Object.defineProperty({__proto__:null,default:dl},Symbol.toStringTag,{value:"Module"})),Nd=Lt({__name:"ToolsPopup",props:{show:{type:Boolean,required:!0},coor:{type:Object,required:!1},fn:{type:Function,required:!0},only:{type:Object},except:{type:Object},data_index:{type:Number},data:{type:Array}},setup(n){const o=n,x=u(null),f=r=>{r.target.classList.contains("box")&&o.fn()};je(()=>o.coor,(r,p)=>{r&&x.value&&(x.value.style.left=r.left+"px",x.value.style.top=r.top+"px")},{immediate:!0,deep:!0});const d=()=>{let r=o.data[o.data_index];o.data.splice(o.data_index,1),o.data.splice(o.data_index-1,0,ie({},r)),o.fn()},a=()=>{let r=o.data[o.data_index];o.data.splice(o.data_index,1),o.data.splice(o.data_index+1,0,ie({},r)),o.fn()};return(r,p)=>ae((s(),_("div",{class:"box",onClick:p[4]||(p[4]=i=>f(i))},[e("div",{ref_key:"popup",ref:x},[e("ul",null,[(!n.only||n.only.length==0||n.only.indexOf("insert")>-1)&&(!n.except||n.except.length==0||n.except.indexOf("insert")==-1)?(s(),_("li",{key:0,onClick:p[0]||(p[0]=i=>r.$emit("replyAct","insert"))},"Insert")):O("",!0),(!n.only||n.only.length==0||n.only.indexOf("delete")>-1)&&(!n.except||n.except.length==0||n.except.indexOf("delete")==-1)?(s(),_("li",{key:1,onClick:p[1]||(p[1]=i=>r.$emit("replyAct","delete"))},"Delete")):O("",!0),(!n.only||n.only.length==0||n.only.indexOf("moveTop")>-1)&&(!n.except||n.except.length==0||n.except.indexOf("moveTop")==-1)&&n.data_index!=0&&n.data.length>0?(s(),_("li",{key:2,onClick:p[2]||(p[2]=i=>d())},"Move Top")):O("",!0),(!n.only||n.only.length==0||n.only.indexOf("moveBottom")>-1)&&(!n.except||n.except.length==0||n.except.indexOf("moveBottom"))==-1&&n.data_index!=n.data.length-1&&n.data.length>0?(s(),_("li",{key:3,onClick:p[3]||(p[3]=i=>a())},"Move Bottom")):O("",!0)])],512)],512)),[[Be,n.show]])}});const Kl=Oe(Nd,[["__scopeId","data-v-64f1a18c"]]),kye=Object.freeze(Object.defineProperty({__proto__:null,default:Kl},Symbol.toStringTag,{value:"Module"})),W=(n,o)=>{const{apiBase:x}=Pa();return to(n,ie({baseURL:x},o),"$0wcHT2tPqX")};const ml=n=>(nt("data-v-d266d567"),n=n(),rt(),n),Fd={class:"box-fixed"},Id={action:"#",class:"w-full flex p-1"},Yd={class:"grow"},Bd=ml(()=>e("div",{class:"font-bold"}," Keyword ",-1)),qd={class:"pl-1"},Ud=ml(()=>e("div",{class:"font-bold"}," Sort By ",-1)),Hd=ml(()=>e("option",{value:"AccountID"},"ID",-1)),zd=ml(()=>e("option",{value:"AccountCode"},"Code",-1)),Vd=ml(()=>e("option",{value:"AccountName"},"Nama",-1)),Ld=[Hd,zd,Vd],Ed={class:"pl-1"},Rd=ml(()=>e("div",{class:"font-bold"}," Sort Order ",-1)),Jd=ml(()=>e("option",{value:"asc"},"Asc",-1)),Kd=ml(()=>e("option",{value:"desc"},"Desc",-1)),Gd=[Jd,Kd],Zd={class:"flex items-end pl-1"},Wd={class:"w-full flex justify-center items-center grow h-0 p-1"},Qd={key:0,class:""},Xd={class:"tacky w-full"},e_=ml(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No."),e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"ID"),e("th",null,"Code"),e("th",null,"Name")])],-1)),t_=["onClick"],l_={class:"bold"},a_={class:"whitespace-normal break-words"},s_={class:"flex",style:{"justify-content":"end",padding:"5px"}},o_={__name:"ac_accs",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1}},setup(n){const o=n,{countClickListFn:x}=K(),f=ke("token"),d=u([]),a=u(""),r=u({field:"AccountID",by:"desc"}),p=u(-1),i=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),c={};c._TimeZoneOffset=new Date().getTimezoneOffset();const h=()=>{c.like="",a.value!=""&&(c.like=`AccountID:%${a.value}%,AccountCode:%${a.value}%,AccountName:%${a.value}%`),c.sort="",r.value.field&&(c.sort=r.value.field+":"+r.value.by)},k=u(null),C=()=>Y(this,null,function*(){$().loading_full=!0,i.value.may_get_data=!1,c.page=i.value.page,c.page==1&&(d.value=[]),c.first_row&&delete c.first_row,c.page>1&&(c.first_row=JSON.stringify(d.value[0]));const{data:A,error:D,status:M}=yield W("/ac_accounts",{method:"get",headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},params:c,retry:0});if($().loading_full=!1,i.value.may_get_data=!0,M.value==="error"){X().trigger(D);return}i.value.page==1?(d.value=A.value.data,k.value&&(k.value.scrollTop=0)):i.value.page>1&&(d.value=[...d.value,...A.value.data]),A.value.data.length==0&&(i.value.is_last_record=!0)}),y=()=>Y(this,null,function*(){if(!i.value.may_get_data)return;let A=k.value;if(A.scrollLeft!=i.value.scrollLeft){i.value.scrollLeft=A.scrollLeft;return}i.value.is_last_record||!(Math.round(A.scrollTop)+A.clientHeight>=A.scrollHeight-1)||(i.value.page++,yield C())}),g=()=>{i.value.page=1,i.value.is_last_record=!1,h(),C()},b=()=>{p.value>-1?o.fnSelect(d.value[p.value]):o.fnSelect({ac_account_id:"",ac_account_code:"",ac_account_name:""})},v=A=>{x(A,()=>{p.value=A},b)},w=u(null);let m=null;const S=A=>{m&&clearTimeout(m),m=setTimeout(()=>{g()},500)};return je(()=>o.show,(A,D)=>{A==!0&&(g(),setTimeout(()=>{w.value.focus()},100))},{immediate:!0}),(A,D)=>{const M=Xe,T=gl;return ae((s(),_("section",Fd,[e("div",null,[j(M,{title:"Search And Select Ac Account",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Id,[e("div",Yd,[Bd,ae(e("input",{ref_key:"ref_keyword",ref:w,class:"",type:"text","onUpdate:modelValue":D[0]||(D[0]=q=>Ee(a)?a.value=q:null),name:"search",placeholder:"Keyword",onKeyup:D[1]||(D[1]=q=>S())},null,544),[[Te,t(a)]])]),e("div",qd,[Ud,ae(e("select",{class:"","onUpdate:modelValue":D[2]||(D[2]=q=>t(r).field=q)},Ld,512),[[We,t(r).field]])]),e("div",Ed,[Rd,ae(e("select",{class:"","onUpdate:modelValue":D[3]||(D[3]=q=>t(r).by=q)},Gd,512),[[We,t(r).by]])]),e("div",Zd,[e("button",{class:"",type:"submit",name:"button",onClick:D[4]||(D[4]=ze(q=>g(),["prevent"]))},[j(T,{class:"text-2xl"})])])]),e("div",Wd,[t(d).length==0?(s(),_("div",Qd," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:k,onScroll:y},[e("table",Xd,[e_,e("tbody",null,[(s(!0),_(ye,null,Ae(t(d),(q,P)=>(s(),_("tr",{key:P,onClick:N=>v(P),class:Ue(t(p)==P?"active":"")},[e("td",null,l(P+1)+".",1),e("td",l_,l(q.ac_account_id),1),e("td",null,l(q.ac_account_code),1),e("td",a_,l(q.ac_account_name),1)],10,t_))),128))])])],544))]),e("div",s_,[e("button",{onClick:D[5]||(D[5]=q=>b()),class:"w-36 m-1 bg-blue-600 text-white rounded-sm"}," Select ")])])],512)),[[Be,n.show]])}}},aa=Oe(o_,[["__scopeId","data-v-d266d567"]]),jye=Object.freeze(Object.defineProperty({__proto__:null,default:aa},Symbol.toStringTag,{value:"Module"}));const Wt=n=>(nt("data-v-96493e3d"),n=n(),rt(),n),n_={class:"box-fixed"},r_={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},i_={class:"w-full flex flex-col items-center grow overflow-auto"},d_={class:"w-full flex flex-row flex-wrap"},__={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},u_=Wt(()=>e("label",{for:""},"Name",-1)),c_=["disabled"],p_={class:"text-red-500"},v_={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},f_=Wt(()=>e("label",{for:""},"Tipe",-1)),m_=["disabled"],h_={class:"text-red-500"},b_={class:"w-full sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},y_=Wt(()=>e("label",{for:""},"Amount",-1)),x_={class:"card-border disabled"},w_={class:"text-red-500"},g_={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},$_=Wt(()=>e("label",{for:""},"Peralihan?",-1)),k_={class:"card-border !flex flex-row items-center"},j_=["checked"],D_={for:"checkbox",class:"w-full ml-1"},S_={class:"text-red-500"},T_={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},C_=Wt(()=>e("label",{for:""},"Trip?",-1)),P_={class:"card-border !flex flex-row items-center"},A_=["checked"],M_={for:"checkbox1",class:"w-full ml-1"},O_={class:"text-red-500"},N_={class:"w-full flex p-1 2xl:overflow-hidden justify-between flex-wrap"},F_={class:"w-full",role:"sticky"},I_={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Y_={class:"sticky -top-1 !z-[2]"},B_=["colspan"],q_={class:"sticky top-7 !z-[2]"},U_={key:0,class:"min-w-[30px] !w-[30px] max-w-[30px]"},H_=Wt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),z_={key:1,class:"min-w-[30px] !w-[30px] max-w-[30px]"},V_=Wt(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),L_=Wt(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),E_=Wt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),R_=Wt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),J_={class:"min-w-[100px] !w-[100px] max-w-[100px]"},K_=Wt(()=>e("br",null,null,-1)),G_={class:"text-sm"},Z_=Wt(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),W_={ref:"to_move"},Q_=["data-index"],X_={key:0,class:"tools cell"},eu={class:"w-full h-full flex items-center justify-center"},tu=["onClick"],lu={key:1,class:"cell"},au={class:"w-full h-auto flex items-center justify-center"},su=["onClick"],ou=["onClick","disabled"],nu={class:"w-full h-auto flex items-center justify-center"},ru={class:"w-full h-auto flex items-center justify-center"},iu={class:"w-full h-auto flex items-center justify-center"},du={class:"cell"},_u={class:"w-full h-auto flex items-center justify-center"},uu=["disabled","onUpdate:modelValue"],cu={class:"w-full h-auto flex items-center justify-center"},pu={class:"w-full h-auto flex items-center justify-center"},vu=["onUpdate:modelValue","disabled"],fu=Wt(()=>e("option",{value:"Supir"},"Supir",-1)),mu=Wt(()=>e("option",{value:"Kernet"},"Kernet",-1)),hu=[fu,mu],bu={key:0},yu={class:"tools cell"},xu={class:"w-full flex items-center justify-end"},wu={__name:"standby_mst",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{pointFormat:x}=K(),f={id:-1,name:"",tipe:"",amount:0,is_transition:!1,is_trip:!0,details:[]},d=u(ie({},f)),a=ke("token"),r=u({});u([{xdesc:"Gaji Kernet",qty:1,harga:0},{xdesc:"U.Extrafooding",qty:1,harga:2e4}]);const p=u([]),i=u({ordinal:0,id:-1,ac_account_id:"",ac_account_name:"",ac_account_code:"",description:"",amount:0,xfor:"",p_status:""}),c=u(!1),h=()=>{c.value=!1},k=P=>{p.value[v.value].ac_account_id=P.ac_account_id,p.value[v.value].ac_account_code=P.ac_account_code,p.value[v.value].ac_account_name=P.ac_account_name,c.value=!1},C=(P,N)=>{v.value=N,c.value=!0},y=(P,N)=>{p.value[N].ac_account_id="",p.value[N].ac_account_code="",p.value[N].ac_account_name=""},g=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const P=new FormData;P.append("name",d.value.name),P.append("tipe",d.value.tipe),P.append("is_transition",d.value.is_transition),P.append("is_trip",d.value.is_trip),P.append("amount",d.value.amount),P.append("details",JSON.stringify(p.value));let N="post",L=o.is_copy?0:o.id;L==0||(P.append("id",L),P.append("_method","PUT"));const{data:R,error:J,status:re}=yield W("/standby_mst",{method:N,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:P,retry:0});if($().loading_full=!1,re.value==="error"){X().trigger(J,r);return}if(L<=0)d.value.id=R.value.id,d.value.created_at=R.value.created_at,d.value.updated_at=R.value.updated_at,o.p_data.unshift(d.value);else{d.value.updated_at=R.value.updated_at;let te=o.p_data.map(ee=>ee.id).indexOf(L);te>-1&&o.p_data.splice(te,1,ie({},d.value))}o.fnClose()}),b=ne(()=>{let P=0;return p.value.forEach(N=>{N.p_status!="Remove"&&(P+=1*N.amount)}),d.value.amount=P,P}),v=u(-1),w=u(!1),m=u({left:0,top:0}),S=(P,N)=>{v.value=N,w.value=!0,m.value={left:P.clientX,top:P.clientY}},A=()=>{p.value.push(il(ie({},i.value),{p_status:"Add"}))},D=()=>{w.value=!1},M=(P="")=>{if(P=="insert")p.value.splice(v.value,0,il(ie({},i.value),{p_status:"Add"}));else if(P=="delete")p.value[v.value].p_status=="Edit"?p.value[v.value].p_status="Remove":p.value.splice(v.value,1);else if(P=="move_top"){let N=p.value[v.value];p.value.splice(v.value,1),p.value.splice(v.value-1,0,ie({},N))}else if(P=="move_bottom"){let N=p.value[v.value];p.value.splice(v.value,1),p.value.splice(v.value+1,0,ie({},N))}w.value=!1};ke("role");const T=ne(()=>d.value.val&&d.value.val1||K().checkPermission("standby_mst.val")&&d.value.val||K().checkPermission("standby_mst.val1")&&d.value.val1),q=()=>Y(this,null,function*(){$().loading_full=!0;const{data:P,error:N,status:L}=yield W("/standby_mst",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,L.value==="error"){X().trigger(N);return}d.value=P.value.data;let R="Edit";o.is_copy&&(R="Add",d.value.val=0,d.value.val1=0),p.value=P.value.data.details.map(J=>(J.p_status=R,J.key=J.ordinal,J))});return je(()=>o.show,(P,N)=>{P==!0&&(d.value=ie({},f),p.value=[],o.id!=0&&q())},{immediate:!0}),(P,N)=>{const L=Xe,R=Jl,J=At,re=dl,te=gt,ee=Kl,ce=aa;return s(),_(ye,null,[ae(e("section",n_,[e("div",null,[j(L,{title:"Form StandBy Mst",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",r_,[e("div",i_,[e("div",d_,[e("div",__,[u_,ae(e("input",{"onUpdate:modelValue":N[0]||(N[0]=U=>t(d).name=U),disabled:t(T)},null,8,c_),[[Te,t(d).name]]),e("p",p_,l(t(r).name),1)]),e("div",v_,[f_,ae(e("input",{"onUpdate:modelValue":N[1]||(N[1]=U=>t(d).tipe=U),disabled:t(T)},null,8,m_),[[Te,t(d).tipe]]),e("p",h_,l(t(r).tipe),1)]),e("div",b_,[y_,e("div",x_,l(t(x)(t(b))),1),e("p",w_,l(t(r).amount),1)]),e("div",g_,[$_,e("div",k_,[ae(e("input",{id:"checkbox",checked:t(d).is_transition,"onUpdate:modelValue":N[2]||(N[2]=U=>t(d).is_transition=U),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,j_),[[Dl,t(d).is_transition]]),e("label",D_,l(t(d).is_transition?"Ya":"Tidak"),1)]),e("p",S_,l(t(r).is_transition),1)]),e("div",T_,[C_,e("div",P_,[ae(e("input",{id:"checkbox1",checked:t(d).is_trip,"onUpdate:modelValue":N[3]||(N[3]=U=>t(d).is_trip=U),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,A_),[[Dl,t(d).is_trip]]),e("label",M_,l(t(d).is_trip?"Ya":"Tidak"),1)]),e("p",O_,l(t(r).is_trip),1)])]),e("div",N_,[e("div",F_,[e("table",I_,[e("thead",null,[e("tr",Y_,[e("td",{colspan:t(T)?7:9,class:"!bg-slate-800 text-white font-bold"}," Detail ",8,B_)]),e("tr",q_,[t(T)?O("",!0):(s(),_("th",U_)),H_,t(T)?O("",!0):(s(),_("th",z_)),V_,L_,E_,R_,e("th",J_,[F("Amount "),K_,F(),e("span",G_,"("+l(t(x)(t(b)))+")",1)]),Z_])]),e("tbody",W_,[(s(!0),_(ye,null,Ae(t(p),(U,I)=>(s(),_(ye,{key:I},[U.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":I},[t(T)?O("",!0):(s(),_("td",X_,[e("div",eu,[e("button",{type:"button",name:"button",onClick:Z=>S(Z,I)},[j(R)],8,tu)])])),e("td",null,l(I+1)+".",1),t(T)?O("",!0):(s(),_("td",lu,[e("div",au,[U.ac_account_id?(s(),_("button",{key:1,type:"button",onClick:Z=>y(Z,I),disabled:U.confirm_by},[j(J,{class:"font-bold text-2xl"})],8,ou)):(s(),_("button",{key:0,type:"button",name:"button",onClick:Z=>C(Z,I)}," ... ",8,su))])])),e("td",{class:Ue(["cell bold",t(T)?"unselectable":""])},[e("div",nu,l(U.ac_account_id),1)],2),e("td",{class:Ue(["cell bold",t(T)?"unselectable":""])},[e("div",ru,l(U.ac_account_code),1)],2),e("td",{class:Ue(["cell bold",t(T)?"unselectable":""])},[e("div",iu,l(U.ac_account_name),1)],2),e("td",du,[e("div",_u,[ae(e("textarea",{disabled:t(T),class:"p-1 w-full","onUpdate:modelValue":Z=>U.description=Z,cols:"7",rows:"2"},null,8,uu),[[Te,U.description]])])]),e("td",{class:Ue(["cell bold",t(T)?"unselectable":""])},[e("div",cu,[(s(),pe(re,{key:I,class:"w-full h-full p-1",type:"text",value:U.amount||0,onInput:Z=>U.amount=Z,show:n.show,disabled:t(T)},null,8,["value","onInput","show","disabled"]))])],2),e("td",{class:Ue(["cell",t(T)?"unselectable":""])},[e("div",pu,[ae(e("select",{"onUpdate:modelValue":Z=>U.xfor=Z,disabled:t(T)},hu,8,vu),[[We,U.xfor]])])],2)],8,Q_)):O("",!0)],64))),128)),t(T)?O("",!0):(s(),_("tr",bu,[e("td",yu,[e("button",{type:"button",name:"button",onClick:N[4]||(N[4]=U=>A())},[j(te)])])]))],512)])])])]),e("div",xu,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:N[5]||(N[5]=U=>n.fnClose())}," Cancel "),t(T)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:N[6]||(N[6]=ze(U=>g(),["prevent"]))}," Save "))])])])],512),[[Be,n.show]]),j(ee,{show:t(w),coor:t(m),fn:D,data:t(p),data_index:t(v),onReplyAct:N[7]||(N[7]=U=>M(U))},null,8,["show","coor","data","data_index"]),j(ce,{show:t(c),fnClose:h,fnSelect:k},null,8,["show"])],64)}}},sa=Oe(wu,[["__scopeId","data-v-96493e3d"]]),Dye=Object.freeze(Object.defineProperty({__proto__:null,default:sa},Symbol.toStringTag,{value:"Module"}));const Qt=n=>(nt("data-v-298e9f66"),n=n(),rt(),n),gu={class:"box-fixed"},$u={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ku={class:"w-full flex flex-col items-center grow overflow-auto"},ju={class:"w-full flex flex-row flex-wrap"},Du={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Su=Qt(()=>e("label",{for:""},"Name",-1)),Tu={class:"card-border"},Cu={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pu=Qt(()=>e("label",{for:""},"Tipe",-1)),Au={class:"card-border"},Mu={class:"w-full sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ou=Qt(()=>e("label",{for:""},"Amount",-1)),Nu={class:"card-border"},Fu={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Iu=Qt(()=>e("label",{for:""},"Peralihan?",-1)),Yu={class:"card-border !flex flex-row items-center"},Bu=["checked"],qu={class:"w-full ml-1"},Uu={class:"text-red-500"},Hu={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},zu=Qt(()=>e("label",{for:""},"Trip?",-1)),Vu={class:"card-border !flex flex-row items-center"},Lu=["checked"],Eu={class:"w-full ml-1"},Ru={class:"text-red-500"},Ju={class:"w-full flex grow p-1 2xl:overflow-hidden justify-between flex-wrap"},Ku={class:"w-full",role:"sticky"},Gu={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Zu=Qt(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"7",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),Wu={class:"sticky top-8 !z-[2]"},Qu=Qt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),Xu=Qt(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),ec=Qt(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),tc=Qt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),lc=Qt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),ac={class:"min-w-[100px] !w-[100px] max-w-[100px]"},sc=Qt(()=>e("br",null,null,-1)),oc={class:"text-sm"},nc=Qt(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),rc={ref:"to_move"},ic=["data-index"],dc={class:"w-full h-auto flex items-center justify-center"},_c={class:"w-full h-auto flex items-center justify-center"},uc={class:"w-full h-auto flex items-center justify-center"},cc={key:0,class:"cell"},pc={class:"w-full h-auto flex items-center justify-center"},vc={class:"w-full h-auto flex items-center justify-center"},fc={class:"w-full flex items-center justify-end"},mc={class:"w-full flex flex-wrap p-3 items-center"},hc=Qt(()=>e("div",null," Di Validasi oleh : ",-1)),bc={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},yc={key:0},xc={key:1},wc={__name:"standby_mst_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""})),r=ke("token"),p=u({}),i=u(null),c=u(null),h=u([]),k=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const v=new FormData;let w="post",m=o.id;m==0||(v.append("id",m),v.append("_method","PUT"));const{data:S,error:A,status:D}=yield W("/standby_mst_validasi",{method:w,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:v,retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A,p);return}a.value.val=S.value.val,a.value.val_user=S.value.val_user,a.value.val_by=S.value.val_by,a.value.val_at=S.value.val_at,a.value.val1=S.value.val1,a.value.val1_user=S.value.val1_user,a.value.val1_by=S.value.val1_by,a.value.val1_at=S.value.val1_at;let M=o.p_data.map(T=>T.id).indexOf(o.id);M>-1&&o.p_data.splice(M,1,ie({},a.value)),o.fnClose()}),C=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const v=new FormData;let w="post",m=o.id;m==0||(v.append("id",m),v.append("_method","PUT"));const{data:S,error:A,status:D}=yield W("/standby_mst_unvalidasi",{method:w,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:v,retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A,p);return}a.value.val=S.value.val,a.value.val_user=S.value.val_user,a.value.val_by=S.value.val_by,a.value.val_at=S.value.val_at,a.value.val1=S.value.val1,a.value.val1_user=S.value.val1_user,a.value.val1_by=S.value.val1_by,a.value.val1_at=S.value.val1_at;let M=o.p_data.map(T=>T.id).indexOf(o.id);M>-1&&o.p_data.splice(M,1,ie({},a.value)),o.fnClose()}),y=()=>Y(this,null,function*(){$().loading_full=!0;const{data:v,error:w,status:m}=yield W("/standby_mst",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w);return}a.value=v.value.data,h.value=v.value.data.details}),g=ne(()=>{let v=0;return h.value.forEach(w=>{w.p_status!="Remove"&&(v+=parseInt(w.amount))}),v}),b=ne(()=>!1);return je(()=>o.show,(v,w)=>{v==!0&&(o.it_state==1&&setTimeout(()=>{i.value.focus()},1),o.it_state==0&&setTimeout(()=>{c.value.focus()},1),y())},{immediate:!0}),(v,w)=>{const m=Xe;return ae((s(),_("section",gu,[e("div",null,[j(m,{title:"Form Master Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",$u,[e("div",ku,[e("div",ju,[e("div",Du,[Su,e("div",Tu,l(t(a).name),1)]),e("div",Cu,[Pu,e("div",Au,l(t(a).tipe),1)]),e("div",Mu,[Ou,e("div",Nu,l(t(f)(t(a).amount||0)),1)]),e("div",Fu,[Iu,e("div",Yu,[e("input",{checked:t(a).is_transition,disabled:"disabled",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,Bu),e("label",qu,l(t(a).is_transition?"Ya":"Tidak"),1)]),e("p",Uu,l(t(p).is_transition),1)]),e("div",Hu,[zu,e("div",Vu,[e("input",{checked:t(a).is_trip,disabled:"disabled",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded"},null,8,Lu),e("label",Eu,l(t(a).is_trip?"Ya":"Tidak"),1)]),e("p",Ru,l(t(p).is_trip),1)])]),e("div",Ju,[e("div",Ku,[e("table",Gu,[e("thead",null,[Zu,e("tr",Wu,[Qu,Xu,ec,tc,lc,e("th",ac,[F("Amount "),sc,F(),e("span",oc,"("+l(t(f)(t(g)))+")",1)]),nc])]),e("tbody",rc,[(s(!0),_(ye,null,Ae(t(h),(S,A)=>(s(),_(ye,{key:A},[S.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":A},[e("td",null,l(A+1)+".",1),e("td",{class:Ue(["cell bold",t(b)?"unselectable":""])},[e("div",dc,l(S.ac_account_id),1)],2),e("td",{class:Ue(["cell bold",t(b)?"unselectable":""])},[e("div",_c,l(S.ac_account_code),1)],2),e("td",{class:Ue(["cell bold",t(b)?"unselectable":""])},[e("div",uc,l(S.ac_account_name),1)],2),t(b)?O("",!0):(s(),_("td",cc,[e("div",pc,l(S.description),1)])),e("td",{class:Ue(["cell bold",t(b)?"unselectable":""])},[e("div",vc,l(t(f)(S.amount||0)),1)],2),e("td",{class:Ue(["cell",t(b)?"unselectable":""])},l(S.xfor),3)],8,ic)):O("",!0)],64))),128))],512)])])])]),e("div",fc,[e("div",mc,[hc,t(a).val||t(a).val1?(s(),_("div",bc,[t(a).val?(s(),_("div",yc," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val1?(s(),_("div",xc," App 2 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:w[0]||(w[0]=S=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:w[1]||(w[1]=ze(S=>k(),["prevent"]))}," Validasi ",512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:w[2]||(w[2]=ze(S=>C(),["prevent"]))}," Unvalidasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},oa=Oe(wc,[["__scopeId","data-v-298e9f66"]]),Sye=Object.freeze(Object.defineProperty({__proto__:null,default:oa},Symbol.toStringTag,{value:"Module"})),gc={class:"w-full h-full flex flex-col"},$c={class:"w-full flex grow flex-col overflow-auto h-0"},kc={class:"w-full flex justify-between flex-wrap"},jc={class:"grow flex"},Dc={class:"m-1"},Sc=e("option",{value:"available"},"Available",-1),Tc=e("option",{value:"unapprove"},"Unapprove",-1),Cc=e("option",{value:"deleted"},"Trash",-1),Pc=e("option",{value:"all"},"All",-1),Ac=[Sc,Tc,Cc,Pc],Mc={class:"grow mb-5"},Oc={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=G=>G.deleted==1?"!bg-red-400":G.val==0||G.val1==0?"!bg-gray-300":"",d=u("available");je(()=>d.value,G=>{b()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let G=[];$().loading_full=!0;const{data:oe,error:se,status:_e}=yield W("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,_e.value==="error"?(X().trigger(se),{standby_msts:G}):(G=oe.value.data,{standby_msts:G})}),"$rczbThuP8g")})),o=yield o,x(),o),i=u(p.value.standby_msts);u("");const c=u({field:"created_at",by:"desc"}),h=u(-1),k=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),C=ne(()=>i.value[h.value]),y=()=>{a.like="";let G=JSON.parse(JSON.stringify($()._tv.global_keyword));G!=""&&(a.like=`id:%${G}%,name:%${G}%,amount:%${G}%`),a.sort="",c.value.field&&(a.sort=c.value.field+":"+c.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)};u(null);const g=()=>Y(this,null,function*(){$().loading_full=!0,k.value.may_get_data=!1,a.page=k.value.page,a.page==1&&(i.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(i.value[0])),a.filter_status=d.value;const{data:G,error:oe,status:se}=yield W("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,k.value.may_get_data=!0,se.value==="error"){X().trigger(oe);return}k.value.page==1?i.value=G.value.data:k.value.page>1&&(i.value=[...i.value,...G.value.data]),G.value.data.length==0&&(k.value.is_last_record=!0),$()._tv.filter_box=!1}),b=()=>{h.value=-1,k.value.page=1,k.value.is_last_record=!1,y(),g()},v=u(!1),w=u(0),m=u(0),S=u(-1),A=()=>{w.value=0,S.value=-1,m.value=!1,v.value=!0},{display:D}=Je();Dt(Je());const M=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=i.value[h.value].id,S.value=-1,m.value=!1,v.value=!0)},T=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=i.value[h.value].id,S.value=-1,m.value=!0,v.value=!0)},q=u(!1),P=u(0),N=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=i.value[h.value].id,S.value=1,m.value=!1,q.value=!0)},L=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=i.value[h.value].id,S.value=0,m.value=!1,q.value=!0)},R=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=i.value[h.value].id,S.value=-1,m.value=!1,q.value=!0)},J=u(!1),re=u({}),te=u(!1),ee=u(""),ce=()=>Y(this,null,function*(){te.value&&(te.value=!1)}),U=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value="",re.value={id:i.value[h.value].id},te.value=!0)};je(()=>ee.value,G=>{G.trim().length>0?J.value=!0:J.value=!1},{immediate:!1});const I=()=>Y(this,null,function*(){$().loading_full=!0;const G=new FormData;G.append("id",i.value[h.value].id),G.append("deleted_reason",ee.value),G.append("_method","DELETE");const{data:oe,error:se,status:_e}=yield W("/standby_mst",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:G,retry:0});if($().loading_full=!1,_e.value==="error"){X().trigger(se);return}let ue=ie({},i.value[h.value]);ue.deleted=oe.value.deleted,ue.deleted_user=oe.value.deleted_user,ue.deleted_at=oe.value.deleted_at,ue.deleted_by=oe.value.deleted_by,ue.deleted_reason=oe.value.deleted_reason,d.value!="all"?i.value.splice(h.value,1):i.value.splice(h.value,1,ie({},ue)),h.value=-1,te.value=!1}),Z=u([{key:"no",label:"No",isai:!0},{key:"valx",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"name",label:"Nama",freeze:1,filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"amount",label:"Amount",class:" justify-end",type:"number"},{key:"is_transition",label:"Peralihan",filter_on:1,type:"select",select_item:[{k:"1",v:"Ya"},{k:"0",v:"Tidak"}]},{key:"is_trip",label:"Trip",filter_on:1,type:"select",select_item:[{k:"1",v:"Ya"},{k:"0",v:"Tidak"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]),E=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&K().checkPermission("standby_mst.create")),H=ne(()=>["available","all","unapprove"].indexOf(d.value)>-1&&K().checkPermission("standby_mst.create")),ve=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&(K().checkPermission("standby_mst.val")&&[void 0,0].indexOf(C.value.val)>-1||K().checkPermission("standby_mst.val1")&&[void 0,0].indexOf(C.value.val1)>-1)&&K().checkPermissions(["standby_mst.modify"])),Ie=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&(K().checkPermission("standby_mst.val")&&[void 0,0].indexOf(C.value.val)>-1||K().checkPermission("standby_mst.val1")&&[void 0,0].indexOf(C.value.val1)>-1)),le=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&(K().checkPermission("standby_mst.unval")&&[1].indexOf(C.value.val)>-1||K().checkPermission("standby_mst.unval1")&&[1].indexOf(C.value.val1)>-1)),z=ne(()=>h.value>-1&&K().checkPermission("standby_mst.remove")&&[void 0,0].indexOf(C.value.deleted)>-1);return(G,oe)=>{const se=_t,_e=fl,ue=gt,B=Pt,de=Nt,V=Zt,me=Ft,Me=wl,tt=$t,ut=ft,he=Ot,Re=It,Ne=sa,Ze=oa;return s(),_("div",gc,[j(se,{title:"List Standby"}),e("div",$c,[e("div",kc,[e("div",jc,[e("div",Dc,[ae(e("select",{class:"","onUpdate:modelValue":oe[0]||(oe[0]=Ve=>Ee(d)?d.value=Ve:null)},Ac,512),[[We,t(d)]])]),t(E)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[1]||(oe[1]=Ve=>T())},[j(_e)])):O("",!0),t(H)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[2]||(oe[2]=Ve=>A())},[j(ue)])):O("",!0),t(ve)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[3]||(oe[3]=Ve=>M())},[j(B)])):O("",!0),t(h)>-1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[4]||(oe[4]=Ve=>R())},[j(de)])):O("",!0),t(z)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[5]||(oe[5]=Ve=>U())},[j(V)])):O("",!0),t(Ie)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[6]||(oe[6]=Ve=>N())},[j(me)])):O("",!0),t(le)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:oe[7]||(oe[7]=Ve=>L())},[j(Me)])):O("",!0)])]),j(he,{thead:t(Z),selected:t(h),onSetSelected:oe[8]||(oe[8]=Ve=>h.value=Ve),tbody:t(i),fnCallData:g,scrolling:t(k),onSetScrollingPage:oe[9]||(oe[9]=Ve=>t(k).page=Ve),onDoFilter:oe[10]||(oe[10]=Ve=>b()),rowBgColor:f},{val:Q(({item:Ve})=>[Ve.val?(s(),pe(ut,{key:1})):(s(),pe(tt,{key:0}))]),val1:Q(({item:Ve})=>[Ve.val1?(s(),pe(ut,{key:1})):(s(),pe(tt,{key:0}))]),is_transition:Q(({item:Ve})=>[F(l(Ve.is_transition?"Ya":"Tidak"),1)]),is_trip:Q(({item:Ve})=>[F(l(Ve.is_trip?"Ya":"Tidak"),1)]),deleted_by_username:Q(({item:Ve})=>{var Bt;return[F(l((Bt=Ve.deleted_by)==null?void 0:Bt.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(Re,{type:"delete",show:t(te),data:t(re),fnClose:ce,fnConfirm:I,enabledOk:t(J)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",Mc,[ae(e("textarea",{"onUpdate:modelValue":oe[11]||(oe[11]=Ve=>Ee(ee)?ee.value=Ve:null)},null,512),[[Te,t(ee)]])])]),_:1},8,["show","data","enabledOk"]),j(Ne,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(i),is_copy:t(m)},null,8,["show","fnClose","id","p_data","is_copy"]),j(Ze,{show:t(q),fnClose:()=>{q.value=!1},id:t(P),p_data:t(i),it_state:t(S)},null,8,["show","fnClose","id","p_data","it_state"])])}})}},Tye=Object.freeze(Object.defineProperty({__proto__:null,default:Oc},Symbol.toStringTag,{value:"Module"})),Nc={class:"w-full h-full flex flex-col"},Fc={class:"w-full flex grow flex-col overflow-auto h-0"},Ic={class:"w-full flex"},Yc={action:"#",class:"w-full flex p-1"},Bc={class:"grow"},qc=e("div",{class:"font-bold"}," Keyword ",-1),Uc={class:"pl-1"},Hc=e("div",{class:"font-bold"}," Sort By ",-1),zc=e("option",{value:""},null,-1),Vc=e("option",{value:"id"},"ID",-1),Lc=e("option",{value:"name"},"Name",-1),Ec=e("option",{value:"tipe"},"Tipe",-1),Rc=[zc,Vc,Lc,Ec],Jc={class:"pl-1"},Kc=e("div",{class:"font-bold"}," Sort Order ",-1),Gc=e("option",{value:"asc"},"Asc",-1),Zc=e("option",{value:"desc"},"Desc",-1),Wc=[Gc,Zc],Qc={class:"flex items-end pl-1"},Xc={class:"w-full flex justify-center items-center grow h-0 p-1"},ep={key:0,class:""},tp={class:"tacky"},lp=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App 1"),e("th",null,"App 2"),e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Tipe"),e("th",null,"Amount"),e("th",null,"Peralihan"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),ap=["onClick"],sp={class:"flex items-center justify-center"},op={class:"flex items-center justify-center"},np={class:"bold"},rp={class:"grow mb-5"},ip={__name:"indextrash",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let E=[];$().loading_full=!0;const{data:H,error:ve,status:Ie}=yield W("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});return $().loading_full=!1,Ie.value==="error"?(X().trigger(ve),{standby_msts:E}):(E=H.value.data,{standby_msts:E})}),"$lwjC6yOixj")})),o=yield o,x(),o),i=u(p.value.standby_msts),c=u(""),h=u({field:"created_at",by:"desc"}),k=u(-1),C=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),y=()=>{a.like="",c.value!=""&&(a.like=`id:%${c.value}%,name:%${c.value}%,amount:%${c.value}%`),a.sort="",h.value.field&&(a.sort=h.value.field+":"+h.value.by)},g=u(null),b=()=>Y(this,null,function*(){$().loading_full=!0,C.value.may_get_data=!1,a.page=C.value.page,a.page==1&&(i.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(i.value[0]));const{data:E,error:H,status:ve}=yield W("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,C.value.may_get_data=!0,ve.value==="error"){X().trigger(H);return}C.value.page==1?(i.value=E.value.data,g.value&&(g.value.scrollTop=0)):C.value.page>1&&(i.value=[...i.value,...E.value.data]),E.value.data.length==0&&(C.value.is_last_record=!0)}),v=()=>Y(this,null,function*(){if(!C.value.may_get_data)return;let E=g.value;if(E.scrollLeft!=C.value.scrollLeft){C.value.scrollLeft=E.scrollLeft;return}C.value.is_last_record||!(Math.round(E.scrollTop)+E.clientHeight>=E.scrollHeight-1)||(C.value.page++,yield b())}),w=()=>{C.value.page=1,C.value.is_last_record=!1,y(),b()};Ht();const m=u(!1),S=u(0),A=u(0),D=()=>{S.value=0,m.value=!0,A.value=!1},{display:M}=Je();Dt(Je());const T=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=i.value[k.value].id,m.value=!0,A.value=!1)},q=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=i.value[k.value].id,m.value=!0,A.value=!0)},P=u(!1),N=u(0),L=u(!1),R=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=i.value[k.value].id,P.value=!0,L.value=!1)},J=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=i.value[k.value].id,P.value=!0,L.value=!0)},re=u(!1),te=u({}),ee=u(!1),ce=u(""),U=()=>Y(this,null,function*(){ee.value&&(ee.value=!1)}),I=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value="",te.value={id:i.value[k.value].id},ee.value=!0)};je(()=>ce.value,E=>{E.trim().length>0?re.value=!0:re.value=!1},{immediate:!1});const Z=()=>Y(this,null,function*(){$().loading_full=!0;const E=new FormData;E.append("id",i.value[k.value].id),E.append("deleted_reason",ce.value),E.append("_method","DELETE");const{data:H,error:ve,status:Ie}=yield W("/standby_mst",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:E,retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}i.value.splice(k.value,1),k.value=-1,ee.value=!1});return(E,H)=>{const ve=_t,Ie=fl,le=gt,z=Pt,G=Nt,oe=Zt,se=Ft,_e=gl,ue=$t,B=ft,de=It,V=sa,me=oa;return s(),_("div",Nc,[j(ve,{title:"List Standby"}),e("div",Fc,[e("div",Ic,[("useUtils"in E?E.useUtils:t(K))().checkPermission("standby_mst.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[0]||(H[0]=Me=>q())},[j(Ie)])):O("",!0),("useUtils"in E?E.useUtils:t(K))().checkPermission("standby_mst.create")?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[1]||(H[1]=Me=>D())},[j(le)])):O("",!0),("useUtils"in E?E.useUtils:t(K))().checkPermission("standby_mst.modify")?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[2]||(H[2]=Me=>T())},[j(z)])):O("",!0),("useUtils"in E?E.useUtils:t(K))().checkPermission("standby_mst.view")?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[3]||(H[3]=Me=>J())},[j(G)])):O("",!0),("useUtils"in E?E.useUtils:t(K))().checkPermission("standby_mst.remove")?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[4]||(H[4]=Me=>I())},[j(oe)])):O("",!0),("useUtils"in E?E.useUtils:t(K))().checkPermissions(["standby_mst.val","standby_mst.val1"])?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[5]||(H[5]=Me=>R())},[j(se)])):O("",!0)]),e("form",Yc,[e("div",Bc,[qc,ae(e("input",{class:"",type:"text","onUpdate:modelValue":H[6]||(H[6]=Me=>Ee(c)?c.value=Me:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(c)]])]),e("div",Uc,[Hc,ae(e("select",{class:"","onUpdate:modelValue":H[7]||(H[7]=Me=>t(h).field=Me)},Rc,512),[[We,t(h).field]])]),e("div",Jc,[Kc,ae(e("select",{class:"","onUpdate:modelValue":H[8]||(H[8]=Me=>t(h).by=Me)},Wc,512),[[We,t(h).by]])]),e("div",Qc,[e("button",{class:"",type:"submit",name:"button",onClick:H[9]||(H[9]=ze(Me=>w(),["prevent"]))},[j(_e,{class:"text-2xl"})])])]),e("div",Xc,[t(i).length==0?(s(),_("div",ep," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:v},[e("table",tp,[lp,e("tbody",null,[(s(!0),_(ye,null,Ae(t(i),(Me,tt)=>(s(),_("tr",{key:tt,onClick:ut=>k.value=tt,class:Ue(t(k)==tt?"active":"")},[e("td",null,[e("div",sp,[Me.val?(s(),pe(B,{key:1})):(s(),pe(ue,{key:0}))])]),e("td",null,[e("div",op,[Me.val1?(s(),pe(B,{key:1})):(s(),pe(ue,{key:0}))])]),e("td",np,l(Me.id),1),e("td",null,l(Me.name),1),e("td",null,l(Me.tipe),1),e("td",null,l(t(d)(Me.amount)),1),e("td",null,l(Me.is_transition?"Ya":"Tidak"),1),e("td",null,l(Me.created_at?t(f)(Me.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,l(Me.updated_at?t(f)(Me.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,ap))),128))])])],544))])]),j(de,{type:"delete",show:t(ee),data:t(te),fnClose:U,fnConfirm:Z,enabledOk:t(re)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",rp,[ae(e("textarea",{"onUpdate:modelValue":H[10]||(H[10]=Me=>Ee(ce)?ce.value=Me:null)},null,512),[[Te,t(ce)]])])]),_:1},8,["show","data","enabledOk"]),j(V,{show:t(m),fnClose:()=>{m.value=!1},id:t(S),p_data:t(i),is_copy:t(A)},null,8,["show","fnClose","id","p_data","is_copy"]),j(me,{show:t(P),fnClose:()=>{P.value=!1},id:t(N),p_data:t(i),is_view:t(L)},null,8,["show","fnClose","id","p_data","is_view"])])}})}},Cye=Object.freeze(Object.defineProperty({__proto__:null,default:ip},Symbol.toStringTag,{value:"Module"})),dp={name:"IcBaselineDeleteSweep"},_p={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},up=e("path",{fill:"currentColor",d:"M15 16h4v2h-4zm0-8h7v2h-7zm0 4h6v2h-6zM3 18c0 1.1.9 2 2 2h6c1.1 0 2-.9 2-2V8H3zM14 5h-3l-1-1H6L5 5H2v2h12z"},null,-1),cp=[up];function pp(n,o,x,f,d,a){return s(),_("svg",_p,cp)}const Hl=Oe(dp,[["render",pp]]),Pye=Object.freeze(Object.defineProperty({__proto__:null,default:Hl},Symbol.toStringTag,{value:"Module"})),vp={name:"MdiPrinterEye"},fp={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},mp=e("path",{fill:"currentColor",d:"M9.8 21c-.2-.4-.5-.8-.6-1.3l-.4-.7H8v-5h5c1.2-.6 2.6-1 4-1c1.9 0 3.6.6 5 1.6V11c0-1.7-1.3-3-3-3H5c-1.7 0-3 1.3-3 3v6h4v4zM19 10c.6 0 1 .4 1 1s-.4 1-1 1s-1-.4-1-1s.4-1 1-1m-1-3H6V3h12zm-1 11c.6 0 1 .4 1 1s-.4 1-1 1s-1-.4-1-1s.4-1 1-1m0-3c-2.7 0-5.1 1.7-6 4c.9 2.3 3.3 4 6 4s5.1-1.7 6-4c-.9-2.3-3.3-4-6-4m0 6.5c-1.4 0-2.5-1.1-2.5-2.5s1.1-2.5 2.5-2.5s2.5 1.1 2.5 2.5s-1.1 2.5-2.5 2.5"},null,-1),hp=[mp];function bp(n,o,x,f,d,a){return s(),_("svg",fp,hp)}const _l=Oe(vp,[["render",bp]]),Aye=Object.freeze(Object.defineProperty({__proto__:null,default:_l},Symbol.toStringTag,{value:"Module"})),yp={name:"IconoirTable2Columns"},xp={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},wp=e("path",{fill:"none",stroke:"currentColor","stroke-width":"1.5",d:"M3 20.4V3.6a.6.6 0 0 1 .6-.6h16.8a.6.6 0 0 1 .6.6v16.8a.6.6 0 0 1-.6.6H3.6a.6.6 0 0 1-.6-.6Zm0-3.9h18M3 12h18m0-4.5H3M12 21V3"},null,-1),gp=[wp];function $p(n,o,x,f,d,a){return s(),_("svg",xp,gp)}const Yt=Oe(yp,[["render",$p]]),Mye=Object.freeze(Object.defineProperty({__proto__:null,default:Yt},Symbol.toStringTag,{value:"Module"})),kp={class:"w-full flex flex-row flex-wrap"},jp={key:0,class:"flex flex-col flex-wrap p-1"},Dp={for:"",class:"text-xs"},Sp={class:"flex"},Tp={class:"flex items-center pr-[1px]"},Cp={key:0,class:"w-full text-red-500 text-xs"},hl=Lt({__name:"WidthMiniPart",props:{selected:{type:Object,required:!1,default:{_:{},id:-1,name:"",title:""}}},setup(n){return(o,x)=>(s(),_(ye,null,[e("div",kp,[(s(!0),_(ye,null,Ae(Object.keys(n.selected._),f=>(s(),_(ye,null,[n.selected._[f].val?(s(),_("div",jp,[e("label",Dp,l(n.selected._[f].text),1),e("div",Sp,[e("div",Tp,[n.selected._[f].tcon?(s(),pe(Da(("resolveComponent"in o?o.resolveComponent:t(Vt))(n.selected._[f].tcon)),{key:0})):O("",!0)]),e("div",null,l(n.selected._[f].val),1)])])):O("",!0)],64))),256))]),n.selected.note?(s(),_("div",Cp,l(n.selected.note),1)):O("",!0)],64))}}),Oye=Object.freeze(Object.defineProperty({__proto__:null,default:hl},Symbol.toStringTag,{value:"Module"})),Pp={class:"relative"},Ap={key:0,class:"absolute w-full h-full"},Mp={key:2,class:"card-border cursor-pointer !flex flex-row flex-nowrap"},Op={key:0,class:"flex items-center"},Np={class:"fixed h-full top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 flex items-center justify-center z-10"},Fp={class:"grow overflow-y-auto"},Ip=["onClick"],Yp={class:"p-1 flex flex-wrap items-center"},Bp={class:"w-full"},qp={class:""},Up={class:"ml-1"},Hp={key:0,class:"w-full"},$l=Lt({__name:"WidthMiniList",props:{arr:{type:Array,required:!0,default:[]},pure:{type:Object,required:!0,default:[]},disabled:{type:Boolean,required:!1,default:!1},selected:{type:Object,required:!1,default:{_:{},id:"",name:"",title:"",note:""}}},emits:["input","nextBlur","setSelected"],setup(n,{emit:o}){const x=n,f=u(!1),d=u(null),a=u(null),r=u(""),p=()=>{setTimeout(()=>{f.value=!0},1),setTimeout(()=>{a!=null&&a.value&&(a==null||a.value.focus())},2)};window.addEventListener("click",k=>{var y;const C=k.target;C instanceof Element&&f.value&&((y=d.value)!=null&&y.contains(C)||(f.value=!1))});const i=ne(()=>r.value!=""?x.arr.filter(k=>k.id.toString().toLowerCase().includes(r.value.toLowerCase())||k.name.toLowerCase().includes(r.value.toLowerCase())||k.title.toLowerCase().includes(r.value.toLowerCase())):x.arr),c=k=>{o("setSelected",k),f.value=!1},h=()=>{o("setSelected",JSON.parse(JSON.stringify(x.pure)))};return(k,C)=>{const y=hl,g=At;return s(),_("div",Pp,[n.disabled?(s(),_("div",Ap)):O("",!0),n.selected.id==""?(s(),_("div",{key:1,class:"card-border cursor-pointer",onClick:C[0]||(C[0]=b=>p())})):(s(),_("div",Mp,[e("div",{class:"flex flex-wrap items-center grow",onClick:C[1]||(C[1]=b=>p())},[j(y,{selected:n.selected},null,8,["selected"])]),n.disabled?O("",!0):(s(),_("div",Op,[e("button",{type:"button",class:"bg-red-500 text-white border-none",onClick:C[2]||(C[2]=b=>h())},[j(g)])]))])),ae(e("div",Np,[e("div",{ref_key:"search_box",ref:d,class:"w-[320px] h-full ring-1 ring-gray-500 p-2 bg-white flex flex-col relative"},[ae(e("input",{ref_key:"search_words",ref:a,type:"text","onUpdate:modelValue":C[3]||(C[3]=b=>Ee(r)?r.value=b:null),placeholder:"search",class:"max-h-8"},null,512),[[Te,t(r)]]),j(g,{class:"absolute right-3 top-4 cursor-pointer",onClick:C[4]||(C[4]=b=>{var v;return r.value="",(v=t(a))==null?void 0:v.focus()})}),e("div",Fp,[(s(!0),_(ye,null,Ae(t(i),(b,v)=>(s(),_("div",{class:"mt-3 flex border-[1px] border-solid border-gray-400 cursor-pointer",onClick:w=>c(b)},[e("div",Yp,[e("div",Bp,[e("span",qp," #"+l(b.id),1),e("span",Up,l(b.name),1)]),b.title?(s(),_("div",Hp,l(b.title||""),1)):O("",!0)])],8,Ip))),256))])],512)],512),[[Be,t(f)]])])}}}),Nye=Object.freeze(Object.defineProperty({__proto__:null,default:$l},Symbol.toStringTag,{value:"Module"}));const zp={class:"max-h-full overflow-y-auto"},Vp={class:"border-solid border-black border-[1px]"},ga=";base64,",Ua={__name:"PDFJsView",props:{pdfBase64:{type:String,required:!0}},setup(n){const o=n;lo.workerSrc=import.meta.url+"pdfjs-dist/build/pdf.worker.mjs",u(null);const x=u(null),f=u(null),d=r=>{for(var p=r.indexOf(ga)+ga.length,i=r.substring(p),c=window.atob(i),h=c.length,k=new Uint8Array(new ArrayBuffer(h)),C=0;C<h;C++)k[C]=c.charCodeAt(C);return k},a=(r,p)=>Y(this,null,function*(){const i=yield r.getPage(p+1),c=i.getViewport({scale:1}),h=f.value[p];h.width=c.width,h.height=c.height;const k=h.getContext("2d");yield i.render({canvasContext:k,viewport:c}).promise,p++,p<x.value&&a(r,p)});return Ta(()=>Y(this,null,function*(){let r=d(o.pdfBase64);const i=yield ao(r).promise;x.value=i._pdfInfo.numPages,a(i,0)})),(r,p)=>(s(),_("div",zp,[(s(!0),_(ye,null,Ae(t(x),(i,c)=>(s(),_("div",Vp,[e("canvas",{ref_for:!0,ref_key:"pdf_canvas",ref:f},null,512)]))),256))]))}},Fye=Object.freeze(Object.defineProperty({__proto__:null,default:Ua},Symbol.toStringTag,{value:"Module"})),Lp={class:"w-full flex flex-col flex-wrap p-1 justify-center items-center border-solid border-gray-300 border-[1px]"},Ep={class:"w-full"},Rp={for:""},Jp={key:0,class:"w-full flex justify-center items-center border-[1px] border-gray-300 mb-1"},Kp=["src"],Xt={__name:"AttachmentSingle",props:{value:{type:[String,null],required:!0,default:null},label:{type:String,required:!1,default:""},can_remove:{type:Boolean,required:!1,default:!1}},emits:["setFile","setPreview"],setup(n,{emit:o}){const x=n;u(!1);const f=u(null),d=u(null),a=p=>{var i=p.target.files;if(i.length>0){let c=new FileReader;c.onload=function(h){var C;let k=(C=h.target)==null?void 0:C.result;d.value=k,o("setPreview",k)},c.readAsDataURL(i[0]),o("setFile",i[0])}},r=()=>{d.value="",o("setPreview","");let p=f.value;p&&(p.value="",o("setFile",""))};return je(()=>x.show,(p,i)=>{},{immediate:!0}),je(()=>x.value,(p,i)=>{if(d.value=p,p==""){let c=f.value;c&&(c.value="")}},{immediate:!0,deep:!0}),(p,i)=>{const c=Ua;return s(),_("div",Lp,[e("div",Ep,[e("label",Rp,l(n.label),1)]),t(d)?(s(),_("div",Jp,[t(d).match(/image/)?(s(),_("img",{key:0,src:t(d),alt:"",class:"max-w-full max-h-full"},null,8,Kp)):O("",!0),t(d).match(/application\/pdf/)?(s(),pe(c,{key:1,pdfBase64:t(d)},null,8,["pdfBase64"])):O("",!0)])):O("",!0),n.can_remove?ae((s(),_("button",{key:1,type:"button",class:"bg-gray-600 w-36 text-white",onClick:i[0]||(i[0]=h=>r())},"Clear",512)),[[Be,t(d)]]):O("",!0),n.can_remove?ae((s(),_("input",{key:2,class:"w-full",onChange:i[1]||(i[1]=h=>a(h)),ref_key:"photo_input",ref:f,type:"file",name:"photo"},null,544)),[[Be,!t(d)]]):O("",!0)])}}},Iye=Object.freeze(Object.defineProperty({__proto__:null,default:Xt},Symbol.toStringTag,{value:"Module"}));const St=n=>(nt("data-v-695d74c7"),n=n(),rt(),n),Gp={class:"box-fixed"},Zp={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Wp={class:"w-full flex flex-col items-center grow overflow-auto"},Qp={class:"w-full flex flex-row flex-wrap"},Xp={class:"w-full sm:w-9/12 flex px-2 py-3"},ev={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},tv=St(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),lv={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},av=St(()=>e("label",{for:""},"ID",-1)),sv=["disabled"],ov={id:"standby_mst"},nv=["value"],rv={class:"text-red-500"},iv={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},dv=St(()=>e("label",{for:""},"Name",-1)),_v={class:"card-border disabled"},uv={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},cv=St(()=>e("label",{for:""},"Type",-1)),pv={class:"card-border disabled"},vv={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},fv=St(()=>e("label",{for:""},"Amount",-1)),mv={class:"card-border disabled"},hv={class:"w-full sm:w-3/12 flex px-2 py-3"},bv={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},yv=St(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),xv={class:"w-6/12 flex flex-col flex-wrap p-1"},wv=["disabled"],gv=St(()=>e("option",{value:""},null,-1)),$v=St(()=>e("option",{value:"From"},"Dari",-1)),kv=St(()=>e("option",{value:"To"},"Ke",-1)),jv=[gv,$v,kv],Dv={class:"text-red-500"},Sv={class:"w-6/12 flex flex-col flex-wrap p-1"},Tv=["disabled"],Cv=St(()=>e("option",{value:""},null,-1)),Pv=["value"],Av={class:"text-red-500"},Mv={class:"w-full flex flex-wrap"},Ov={key:0,class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Nv=St(()=>e("label",{for:""},"Supir",-1)),Fv={class:"text-red-500"},Iv={key:1,class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Yv=St(()=>e("label",{for:""},"Kernet",-1)),Bv={class:"text-red-500"},qv={class:"w-full flex flex-wrap"},Uv={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hv=St(()=>e("label",{for:""},"No Pol",-1)),zv=["disabled"],Vv={id:"vehicle"},Lv=["value"],Ev={class:"text-red-500"},Rv={key:0,class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Jv=St(()=>e("label",{for:""},"Tujuan",-1)),Kv=["disabled"],Gv={id:"xto"},Zv={class:"text-red-500"},Wv={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Qv=St(()=>e("label",{for:""},"Note For Remarks",-1)),Xv=["disabled"],ef={class:"text-red-500"},tf={key:1,class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},lf=St(()=>e("label",{for:""},"Trx Trp ID#",-1)),af=["disabled"],sf={class:"text-red-500"},of={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},nf={class:"w-full",role:"sticky"},rf={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},df={class:"sticky -top-1 !z-[2]"},_f=["colspan"],uf={class:"sticky top-7 !z-[2]"},cf={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},pf=St(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),vf=St(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),ff=St(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Waktu",-1)),mf=St(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto",-1)),hf=St(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Note",-1)),bf=St(()=>e("th",{class:"!min-w-[70px] !w-[70px] !max-w-[70px]"},"Dibayar",-1)),yf={ref:"to_move"},xf=["data-index"],wf={key:0,class:"tools cell"},gf={class:"w-full h-auto flex items-center justify-center"},$f=["onClick"],kf={class:"cell"},jf={class:"w-full h-auto flex items-center justify-center relative"},Df={class:"cell"},Sf={class:"w-full h-auto flex items-center justify-center relative"},Tf={class:"cell"},Cf={style:{width:"60vw"},class:"h-auto flex items-center justify-center"},Pf={class:"cell"},Af={class:"h-auto flex items-center justify-center"},Mf=["onUpdate:modelValue"],Of={class:"w-full h-auto flex items-center justify-center"},Nf={key:0},Ff={class:"tools cell"},If={class:"w-full flex items-center justify-end"},Yf={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0,is_transition:0,is_trip:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",trx_trp_id:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],details_count:0},a=u([]),r=u({ordinal:0,id:"",tanggal:new Date,f_waktu:null,waktu:null,note:"",be_paid:0,p_status:"",attachment_1:"",attachment_1_preview:""});let p=ie({},d);const i=u(ie({},d)),c=ke("token"),h=u({});Je();const k=()=>Y(this,null,function*(){$().loading_full=!0,h.value={};const te=new FormData;te.append("transition_target",i.value.transition_target),te.append("transition_type",i.value.transition_type),te.append("standby_mst_id",i.value.standby_mst_id),te.append("supir_id",y.value.id),te.append("kernet_id",g.value.id),te.append("no_pol",i.value.no_pol),te.append("xto",i.value.xto),te.append("note_for_remarks",i.value.note_for_remarks),te.append("trx_trp_id",i.value.trx_trp_id);let ee=[...a.value];ee=ee.map((H,ve)=>(H.tanggal=H.tanggal?x(H.tanggal).format("Y-MM-DD"):"",H.waktu=H.f_waktu?H.f_waktu.hours.toString().padStart(2,"0")+":"+H.f_waktu.minutes.toString().padStart(2,"0"):"",H.attachment_1_preview=H.attachment_1_preview?"Exists":null,te.append(`attachments[${ve}]`,H.attachment_1),H)),te.append("details",JSON.stringify(ee));let ce="post",U=o.id;U==0||(te.append("id",U),te.append("_method","PUT"));const{data:I,error:Z,status:E}=yield W("/standby_trx",{method:ce,headers:{Authorization:`Bearer ${c.value}`,Accept:"application/json"},body:te,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z,h);return}if(i.value.details=[...a.value].map((H,ve)=>(H.attachment_1_type=H.attachment_1_preview?"Exists":"",H)),i.value.details_count=a.value.filter(H=>H.be_paid==1).length,i.value.supir=y.value.name,i.value.supir_rek_no=y.value._.rek_no.val,i.value.supir_rek_name=y.value._.rek_name.val,i.value.kernet=g.value.name,i.value.kernet_rek_no=g.value._.rek_no.val,i.value.kernet_rek_name=g.value._.rek_name.val,i.value.updated_at=I.value.updated_at,o.id<=0)i.value.id=I.value.id,i.value.created_at=I.value.created_at,o.p_data.unshift(i.value);else{let H=o.p_data.map(ve=>ve.id).indexOf(o.id);H>-1&&o.p_data.splice(H,1,ie({},i.value))}o.fnClose()}),C={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:""},y=u(JSON.parse(JSON.stringify(C))),g=u(JSON.parse(JSON.stringify(C))),b=ne(()=>{let te=[];return D.value.forEach((ee,ce)=>{let U=JSON.parse(JSON.stringify(C));U._.id.val=ee.id,U._.name.val=ee.name,U._.rek_no.val=ee.rek_no,U._.rek_name.val=ee.rek_name,U.id=ee.id,U.name=ee.name,U.title=(ee.rek_no||"")+" "+(ee.rek_name||""),te.push(JSON.parse(JSON.stringify(U)))}),te}),v=ne(()=>!1),w=()=>Y(this,null,function*(){$().loading_full=!0;const{data:te,error:ee,status:ce}=yield W("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${c.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,ce.value==="error"){X().trigger(ee);return}let U=te.value.data;i.value=U,p=ie({},U),y.value._.id.val=U.supir_id,y.value._.name.val=U.supir,y.value._.rek_no.val=U.supir_rek_no,y.value._.rek_name.val=U.supir_rek_name,y.value.id=U.supir_id,y.value.name=U.supir,y.value.rek_no=(U.supir_rek_no||"")+" "+(U.supir_rek_name||""),g.value._.id.val=U.kernet_id,g.value._.name.val=U.kernet,g.value._.rek_no.val=U.kernet_rek_no,g.value._.rek_name.val=U.kernet_rek_name,g.value.id=U.kernet_id,g.value.name=U.kernet,g.value.rek_no=(U.kernet_rek_no||"")+" "+(U.kernet_rek_name||"");let I="Edit";a.value=te.value.data.details.map(Z=>{if(Z.waktu!=""){let E=Z.waktu.split(":");Z.f_waktu={hours:E[0],minutes:E[1]}}else Z.f_waktu=null;return Z.p_status=I,Z.key=Z.ordinal,Z})}),m=u([]),S=u([]),A=u([]),D=u([]),M=()=>Y(this,null,function*(){$().loading_full=!0;const{data:te,error:ee,status:ce}=yield W("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${c.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,ce.value==="error"){X().trigger(ee);return}m.value=te.value.list_standby_mst,S.value=te.value.list_xto,A.value=te.value.list_vehicle,D.value=te.value.list_employee}),T=u(-1),q=u(!1),P=u({left:0,top:0}),N=(te,ee)=>{T.value=ee,q.value=!0,P.value={left:te.clientX,top:te.clientY}},L=()=>{a.value.push(il(ie({},r.value),{p_status:"Add"}))},R=()=>{q.value=!1},J=(te="")=>{if(te=="insert")a.value.splice(T.value,0,il(ie({},r.value),{p_status:"Add"}));else if(te=="delete")a.value[T.value].p_status=="Edit"?a.value[T.value].p_status="Remove":a.value.splice(T.value,1);else if(te=="move_top"){let ee=a.value[T.value];a.value.splice(T.value,1),a.value.splice(T.value-1,0,ie({},ee))}else if(te=="move_bottom"){let ee=a.value[T.value];a.value.splice(T.value,1),a.value.splice(T.value+1,0,ie({},ee))}q.value=!1};je(()=>o.show,(te,ee)=>Y(this,null,function*(){te==!0&&(yield M(),i.value=ie({},d),y.value=JSON.parse(JSON.stringify(C)),g.value=JSON.parse(JSON.stringify(C)),a.value=[],h.value={},o.id!=0&&w())}),{immediate:!0});let re={name:"",tipe:"",amount:0,is_transition:0};return je(()=>i.value.standby_mst_id,(te,ee)=>{var ce;if($().loading_full==!1&&(te==""||te!="")){let U=m.value.filter(Z=>Z.id==te);switch(U.length>0?i.value.standby_mst_=ie({},U[0]):i.value.standby_mst_id==p.standby_mst_id?i.value.standby_mst_=ie({},p.standby_mst_):i.value.standby_mst_=ie({},re),i.value.standby_mst_.is_transition||(i.value.transition_target="",i.value.transition_type=""),(ce=i.value.standby_mst_)==null?void 0:ce.driver_asst_opt){case"SUPIR":g.value=JSON.parse(JSON.stringify(C));break;case"KERNET":y.value=JSON.parse(JSON.stringify(C));break;case"SUPIR KERNET":break;default:y.value=JSON.parse(JSON.stringify(C)),g.value=JSON.parse(JSON.stringify(C));break}i.value.standby_mst_.is_trip==0&&(i.value.xto="",i.value.trx_trp_id="")}},{}),(te,ee)=>{var G,oe,se,_e,ue;const ce=Xe,U=$l,I=Jl,Z=Vt("vue-date-picker"),E=zt,H=Xt,ve=At,Ie=ft,le=gt,z=Kl;return s(),_(ye,null,[ae(e("section",Gp,[e("div",null,[j(ce,{title:"Form Transaction",fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Zp,[e("div",Wp,[e("div",Qp,[e("div",Xp,[e("div",ev,[tv,e("div",lv,[av,ae(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":ee[0]||(ee[0]=B=>t(i).standby_mst_id=B),disabled:t(i).pvr_no!=""},null,8,sv),[[Te,t(i).standby_mst_id]]),e("datalist",ov,[(s(!0),_(ye,null,Ae(t(m),B=>(s(),_("option",{value:B.id},l(B.name+"-"+B.tipe+"-"+t(f)(B.amount||0)),9,nv))),256))]),e("p",rv,l(t(h).standby_mst_id),1)]),e("div",iv,[dv,e("div",_v,l((G=t(i).standby_mst_)==null?void 0:G.name),1)]),e("div",uv,[cv,e("div",pv,l((oe=t(i).standby_mst_)==null?void 0:oe.tipe),1)]),e("div",vv,[fv,e("div",mv,l(t(f)((se=t(i).standby_mst_)==null?void 0:se.amount)),1)])])]),e("div",hv,[e("div",bv,[yv,e("div",xv,[ae(e("select",{"onUpdate:modelValue":ee[1]||(ee[1]=B=>t(i).transition_type=B),disabled:((_e=t(i).standby_mst_)==null?void 0:_e.is_transition)==0},jv,8,wv),[[We,t(i).transition_type]]),e("p",Dv,l(t(h).transition_type),1)]),e("div",Sv,[ae(e("select",{"onUpdate:modelValue":ee[2]||(ee[2]=B=>t(i).transition_target=B),disabled:((ue=t(i).standby_mst_)==null?void 0:ue.is_transition)==0},[Cv,(s(!0),_(ye,null,Ae(t($)().list_pabrik,B=>(s(),_("option",{value:B},l(B),9,Pv))),256))],8,Tv),[[We,t(i).transition_target]]),e("p",Av,l(t(h).transition_target),1)])])]),e("div",Mv,[["SUPIR","SUPIR KERNET"].indexOf(t(i).standby_mst_.driver_asst_opt)>-1?(s(),_("div",Ov,[Nv,j(U,{arr:t(b),selected:t(y),pure:C,onSetSelected:ee[3]||(ee[3]=B=>y.value=B)},null,8,["arr","selected"]),e("p",Fv,l(t(h).supir_id),1)])):O("",!0),["KERNET","SUPIR KERNET"].indexOf(t(i).standby_mst_.driver_asst_opt)>-1?(s(),_("div",Iv,[Yv,j(U,{arr:t(b),selected:t(g),pure:C,onSetSelected:ee[4]||(ee[4]=B=>g.value=B)},null,8,["arr","selected"]),e("p",Bv,l(t(h).kernet_id),1)])):O("",!0)]),e("div",qv,[e("div",Uv,[Hv,ae(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":ee[5]||(ee[5]=B=>t(i).no_pol=B),disabled:t(i).pvr_no!=""},null,8,zv),[[Te,t(i).no_pol]]),e("datalist",Vv,[(s(!0),_(ye,null,Ae(t(A),B=>(s(),_("option",{value:B.no_pol},l(B.no_pol),9,Lv))),256))]),e("p",Ev,l(t(h).no_pol),1)]),t(i).standby_mst_.is_trip==1?(s(),_("div",Rv,[Jv,ae(e("input",{type:"text",list:"xto","onUpdate:modelValue":ee[6]||(ee[6]=B=>t(i).xto=B),disabled:t(i).pvr_no!=""},null,8,Kv),[[Te,t(i).xto]]),e("datalist",Gv,[(s(!0),_(ye,null,Ae(t(S),B=>(s(),_("option",null,l(B),1))),256))]),e("p",Zv,l(t(h).xto),1)])):O("",!0),e("div",Wv,[Qv,ae(e("textarea",{"onUpdate:modelValue":ee[7]||(ee[7]=B=>t(i).note_for_remarks=B),disabled:t(i).pvr_no!=""}," ",8,Xv),[[Te,t(i).note_for_remarks]]),e("p",ef,l(t(h).note_for_remarks),1)]),t(i).standby_mst_.is_trip==1?(s(),_("div",tf,[lf,ae(e("input",{type:"text","onUpdate:modelValue":ee[8]||(ee[8]=B=>t(i).trx_trp_id=B),disabled:t(i).pvr_no!=""},null,8,af),[[Te,t(i).trx_trp_id]]),e("p",sf,l(t(h).trx_trp_id),1)])):O("",!0)]),e("div",of,[e("div",nf,[e("table",rf,[e("thead",null,[e("tr",df,[e("td",{colspan:t(v)?6:7,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,_f)]),e("tr",uf,[t(v)?O("",!0):(s(),_("th",cf)),pf,vf,ff,mf,hf,bf])]),e("tbody",yf,[(s(!0),_(ye,null,Ae(t(a),(B,de)=>(s(),_(ye,{key:de},[B.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":de},[t(v)?O("",!0):(s(),_("td",wf,[e("div",gf,[e("button",{type:"button",name:"button",onClick:V=>N(V,de)},[j(I)],8,$f)])])),e("td",null,l(de+1)+".",1),e("td",kf,[e("div",jf,[j(E,null,{default:Q(()=>[(s(),pe(Z,{key:de,modelValue:B.tanggal,"onUpdate:modelValue":V=>B.tanggal=V,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)])]),e("td",Df,[e("div",Sf,[j(E,null,{default:Q(()=>[(s(),pe(Z,{key:de,modelValue:B.f_waktu,"onUpdate:modelValue":V=>B.f_waktu=V,type:"time",format:"HH:mm","text-input":"","teleport-center":"","time-picker":""},null,8,["modelValue","onUpdate:modelValue"]))]),_:2},1024)])]),e("td",Tf,[e("div",Cf,[j(H,{value:B.attachment_1_preview,onSetFile:V=>B.attachment_1=V,onSetPreview:V=>B.attachment_1_preview=V,can_remove:!0},null,8,["value","onSetFile","onSetPreview"])])]),e("td",Pf,[e("div",Af,[ae(e("textarea",{class:"h-full","onUpdate:modelValue":V=>B.note=V},null,8,Mf),[[Te,B.note]])])]),e("td",{class:Ue(["cell",(!("useUtils"in te?te.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])||t(v),"unselectable")])},[e("div",Of,[B.be_paid==0?(s(),pe(ve,{key:0,class:"text-red-800"})):(s(),pe(Ie,{key:1,class:"text-green-800"}))])],2)],8,xf)):O("",!0)],64))),128)),t(v)?O("",!0):(s(),_("tr",Nf,[e("td",Ff,[e("button",{type:"button",name:"button",onClick:ee[9]||(ee[9]=B=>L())},[j(le)])])]))],512)])])])])]),e("div",If,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:ee[10]||(ee[10]=B=>n.fnClose())}," Cancel "),t(v)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:ee[11]||(ee[11]=ze(B=>k(),["prevent"]))}," Save "))])])])],512),[[Be,n.show]]),j(z,{show:t(q),coor:t(P),fn:R,data:t(a),data_index:t(T),onReplyAct:ee[12]||(ee[12]=B=>J(B))},null,8,["show","coor","data","data_index"])],64)}}},Ha=Oe(Yf,[["__scopeId","data-v-695d74c7"]]),Yye=Object.freeze(Object.defineProperty({__proto__:null,default:Ha},Symbol.toStringTag,{value:"Module"})),Bf={name:"PhCaretUp"},qf={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Uf=e("path",{fill:"currentColor",d:"M213.66 165.66a8 8 0 0 1-11.32 0L128 91.31l-74.34 74.35a8 8 0 0 1-11.32-11.32l80-80a8 8 0 0 1 11.32 0l80 80a8 8 0 0 1 0 11.32"},null,-1),Hf=[Uf];function zf(n,o,x,f,d,a){return s(),_("svg",qf,Hf)}const Sl=Oe(Bf,[["render",zf]]),Bye=Object.freeze(Object.defineProperty({__proto__:null,default:Sl},Symbol.toStringTag,{value:"Module"})),Vf={name:"PhCaretDown"},Lf={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Ef=e("path",{fill:"currentColor",d:"m213.66 101.66l-80 80a8 8 0 0 1-11.32 0l-80-80a8 8 0 0 1 11.32-11.32L128 164.69l74.34-74.35a8 8 0 0 1 11.32 11.32"},null,-1),Rf=[Ef];function Jf(n,o,x,f,d,a){return s(),_("svg",Lf,Rf)}const Tl=Oe(Vf,[["render",Jf]]),qye=Object.freeze(Object.defineProperty({__proto__:null,default:Tl},Symbol.toStringTag,{value:"Module"}));const kt=n=>(nt("data-v-cebd3f03"),n=n(),rt(),n),Kf={class:"box-fixed"},Gf={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Zf={class:"w-full flex flex-col items-center grow overflow-auto"},Wf={class:"w-full flex flex-row flex-wrap"},Qf={class:"w-full sm:w-9/12 flex px-2 py-3"},Xf={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},e1=kt(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),t1={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},l1=kt(()=>e("label",{for:""},"ID",-1)),a1={class:"card-border"},s1={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},o1=kt(()=>e("label",{for:""},"Name",-1)),n1={class:"card-border"},r1={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},i1=kt(()=>e("label",{for:""},"Type",-1)),d1={class:"card-border"},_1={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},u1=kt(()=>e("label",{for:""},"Amount",-1)),c1={class:"card-border"},p1={class:"w-full sm:w-3/12 flex px-2 py-3"},v1={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},f1=kt(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),m1={class:"w-6/12 flex flex-col flex-wrap p-1"},h1={class:"card-border"},b1={class:"w-6/12 flex flex-col flex-wrap p-1"},y1={class:"card-border"},x1={class:"w-full flex flex-wrap"},w1={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},g1=kt(()=>e("label",{for:""},"Supir",-1)),$1={class:"card-border"},k1={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},j1=kt(()=>e("label",{for:""},"Kernet",-1)),D1={class:"card-border"},S1={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},T1=kt(()=>e("label",{for:""},"No Pol",-1)),C1={class:"card-border"},P1={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},A1=kt(()=>e("label",{for:""},"Tujuan",-1)),M1={class:"card-border"},O1={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},N1=kt(()=>e("label",{for:""},"Note For Remarks",-1)),F1={class:"card-border"},I1={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Y1=kt(()=>e("label",{for:""},"Trx Trp ID#",-1)),B1={class:"card-border"},q1={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},U1={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},H1=kt(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),z1={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},V1=kt(()=>e("label",{for:""}," Code",-1)),L1={class:"card-border"},E1={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},R1=kt(()=>e("label",{for:""},"Desc",-1)),J1={class:"card-border disabled"},K1={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},G1={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Z1=kt(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),W1={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Q1=kt(()=>e("label",{for:""},"No",-1)),X1={class:"card-border disabled"},em={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},tm=kt(()=>e("label",{for:""},"Total",-1)),lm={class:"card-border disabled"},am={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},sm={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},om=kt(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),nm={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},rm=kt(()=>e("label",{for:""},"No",-1)),im={class:"card-border disabled"},dm={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_m=kt(()=>e("label",{for:""},"Total",-1)),um={class:"card-border disabled"},cm={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},pm={class:"w-full",role:"sticky"},vm={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},fm={class:"sticky -top-1 !z-[2]"},mm=["colspan"],hm=kt(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[90px] !w-[90px] !max-w-[90px]"},"Tanggal"),e("th",{class:"!min-w-[55px] !w-[55px] !max-w-[55px]"},"Waktu"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Note"),e("th",{class:"!min-w-[70px] !w-[70px] !max-w-[70px]"},"Dibayar")],-1)),bm={ref:"to_move"},ym=["data-index"],xm={class:"cell"},wm={class:"w-full h-auto flex items-center justify-center relative"},gm={class:"cell"},$m={class:"w-full h-auto flex items-center justify-center relative"},km={class:"cell"},jm={style:{width:"60vw"},class:"h-auto flex items-center justify-center"},Dm={class:"cell"},Sm={class:"h-auto flex items-center justify-center"},Tm={class:"w-full h-auto flex items-center justify-center"},Cm={key:0,class:"text-3xl"},Pm=["onClick"],Am={class:"w-full flex items-center justify-end"},Mm={class:"w-full flex flex-wrap p-3 items-center"},Om=kt(()=>e("div",null," Di Validasi oleh : ",-1)),Nm={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Fm={key:0},Im={key:1},Ym={key:2},Bm={key:3},qm={key:4},Um={key:5},Hm={key:0,class:"text-xs font-bold"},zm={key:0,class:"text-xs font-bold"},Vm={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,{$moment:f}=Ke(),{pointFormat:d}=K(),a={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",trx_trp_id:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:""},r=u(ie({},a)),p=ke("token"),i=u({}),c=u(null),h=u(null),k=u([]),C={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""};let y=T=>{T.key=="ArrowUp"&&M(),T.key=="ArrowDown"&&D()};Nl(()=>{document.removeEventListener("keydown",y)});const g=u(JSON.parse(JSON.stringify(C))),b=u(JSON.parse(JSON.stringify(C))),v=u(""),w=T=>Y(this,null,function*(){v.value="PROSES...",$().loading_full=!0,i.value={};const q=new FormData;let P=[...k.value];T=="paid"?P=P.map((ee,ce)=>(ee.be_paid=1,ee)):T=="nopaid"&&(P=P.map((ee,ce)=>(ee.be_paid=0,ee))),q.append("details",JSON.stringify(P));let N="post",L=x.id;L==0||(q.append("id",L),q.append("_method","PUT"));const{data:R,error:J,status:re}=yield W("/standby_trx_validasi",{method:N,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:q,retry:0});if($().loading_full=!1,re.value==="error"){v.value="GAGAL",X().trigger(J,i);return}r.value.val=R.value.val,r.value.val_user=R.value.val_user,r.value.val_by=R.value.val_by,r.value.val_at=R.value.val_at,r.value.val1=R.value.val1,r.value.val1_user=R.value.val1_user,r.value.val1_by=R.value.val1_by,r.value.val1_at=R.value.val1_at,r.value.val2=R.value.val2,r.value.val2_user=R.value.val2_user,r.value.val2_by=R.value.val2_by,r.value.val2_at=R.value.val2_at,r.value.val3=R.value.val3,r.value.val3_user=R.value.val3_user,r.value.val3_by=R.value.val3_by,r.value.val3_at=R.value.val3_at,r.value.val4=R.value.val4,r.value.val4_user=R.value.val4_user,r.value.val4_by=R.value.val4_by,r.value.val4_at=R.value.val4_at,r.value.val5=R.value.val5,r.value.val5_user=R.value.val5_user,r.value.val5_by=R.value.val5_by,r.value.val5_at=R.value.val5_at;let te=x.p_data.map(ee=>ee.id).indexOf(x.id);te>-1&&x.p_data.splice(te,1,ie({},r.value)),v.value="BERHASIL"}),m=()=>Y(this,null,function*(){v.value="PROSES...",$().loading_full=!0,i.value={};const T=new FormData;let q="post",P=x.id;P==0||(T.append("id",P),T.append("_method","PUT"));const{data:N,error:L,status:R}=yield W("/standby_trx_unvalidasi",{method:q,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:T,retry:0});if($().loading_full=!1,R.value==="error"){v.value="GAGAL",X().trigger(L,i);return}r.value.val=N.value.val,r.value.val_user=N.value.val_user,r.value.val_by=N.value.val_by,r.value.val_at=N.value.val_at,r.value.val1=N.value.val1,r.value.val1_user=N.value.val1_user,r.value.val1_by=N.value.val1_by,r.value.val1_at=N.value.val1_at,r.value.val2=N.value.val2,r.value.val2_user=N.value.val2_user,r.value.val2_by=N.value.val2_by,r.value.val2_at=N.value.val2_at,r.value.val3=N.value.val3,r.value.val3_user=N.value.val3_user,r.value.val3_by=N.value.val3_by,r.value.val3_at=N.value.val3_at,r.value.val4=N.value.val4,r.value.val4_user=N.value.val4_user,r.value.val4_by=N.value.val4_by,r.value.val4_at=N.value.val4_at,r.value.val5=N.value.val5,r.value.val5_user=N.value.val5_user,r.value.val5_by=N.value.val5_by,r.value.val5_at=N.value.val5_at;let J=x.p_data.map(re=>re.id).indexOf(x.id);J>-1&&x.p_data.splice(J,1,ie({},r.value)),v.value="BERHASIL"}),S=()=>Y(this,null,function*(){v.value="",$().loading_full=!0;const{data:T,error:q,status:P}=yield W("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q);return}let N=T.value.data;r.value=N,g.value._.id.val=N.supir_id,g.value._.name.val=N.supir,g.value._.rek_no.val=N.supir_rek_no,g.value._.rek_name.val=N.supir_rek_name,g.value.id=N.supir_id,g.value.name=N.supir,g.value.rek_no=(N.supir_rek_no||"")+" "+(N.supir_rek_name||""),b.value._.id.val=N.kernet_id,b.value._.name.val=N.kernet,b.value._.rek_no.val=N.kernet_rek_no,b.value._.rek_name.val=N.kernet_rek_name,b.value.id=N.kernet_id,b.value.name=N.kernet,b.value.rek_no=(N.kernet_rek_no||"")+" "+(N.kernet_rek_name||""),k.value=T.value.data.details});ne(()=>{let T=0;return k.value.forEach(q=>{q.p_status!="Remove"&&(T+=q.amount)}),T});const A=ne(()=>r.value.val5==1);je(()=>x.show,(T,q)=>{T==!0?(document.addEventListener("keydown",y),r.value=ie({},a),S()):document.removeEventListener("keydown",y)},{immediate:!0});const D=()=>{let T=x.p_data.map(q=>q.id).indexOf(x.id);T!=x.p_data.length-1&&(T++,o("setID",x.p_data[T].id),o("setIndex",T),setTimeout(()=>{S()},100))},M=()=>{let T=x.p_data.map(q=>q.id).indexOf(x.id);T!=0&&(T--,o("setID",x.p_data[T].id),o("setIndex",T),setTimeout(()=>{S()},100))};return(T,q)=>{var ee,ce,U;const P=Xe,N=hl,L=Xt,R=At,J=ft,re=Sl,te=Tl;return ae((s(),_("section",Kf,[e("div",null,[j(P,{title:"Form Transaction Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Gf,[e("div",Zf,[e("div",Wf,[e("div",Qf,[e("div",Xf,[e1,e("div",t1,[l1,e("div",a1,l(t(r).standby_mst_id),1)]),e("div",s1,[o1,e("div",n1,l((ee=t(r).standby_mst_)==null?void 0:ee.name),1)]),e("div",r1,[i1,e("div",d1,l((ce=t(r).standby_mst_)==null?void 0:ce.tipe),1)]),e("div",_1,[u1,e("div",c1,l(t(d)((U=t(r).standby_mst_)==null?void 0:U.amount)),1)])])]),e("div",p1,[e("div",v1,[f1,e("div",m1,[e("div",h1,l(t(r).transition_type),1)]),e("div",b1,[e("div",y1,l(t(r).transition_target),1)])])]),e("div",x1,[e("div",w1,[g1,e("div",$1,[j(N,{selected:t(g)},null,8,["selected"])])]),e("div",k1,[j1,e("div",D1,[j(N,{selected:t(b)},null,8,["selected"])])]),e("div",S1,[T1,e("div",C1,l(t(r).no_pol),1)]),e("div",P1,[A1,e("div",M1,l(t(r).xto),1)]),e("div",O1,[N1,e("div",F1,l(t(r).note_for_remarks),1)]),e("div",I1,[Y1,e("div",B1,l(t(r).trx_trp_id),1)])]),e("div",q1,[e("div",U1,[H1,e("div",z1,[V1,e("div",L1,l(t(r).cost_center_code),1)]),e("div",E1,[R1,e("div",J1,l(t(r).cost_center_desc),1)])])]),e("div",K1,[e("div",G1,[Z1,e("div",W1,[Q1,e("div",X1,l(t(r).pvr_no),1)]),e("div",em,[tm,e("div",lm,l(t(d)(t(r).pvr_total||0)),1)])])]),e("div",am,[e("div",sm,[om,e("div",nm,[rm,e("div",im,l(t(r).pv_no),1)]),e("div",dm,[_m,e("div",um,l(t(d)(t(r).pv_total)),1)])])]),e("div",cm,[e("div",pm,[e("table",vm,[e("thead",null,[e("tr",fm,[e("td",{colspan:t(A)?6:7,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,mm)]),hm]),e("tbody",bm,[(s(!0),_(ye,null,Ae(t(k),(I,Z)=>(s(),_(ye,{key:Z},[I.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":Z},[e("td",null,l(Z+1)+".",1),e("td",xm,[e("div",wm,l(t(f)(I.tanggal).format("DD-MM-YYYY")),1)]),e("td",gm,[e("div",$m,l(I.waktu.substring(0,5)),1)]),e("td",km,[e("div",jm,[j(L,{value:I.attachment_1_preview,onSetFile:E=>I.attachment_1=E,onSetPreview:E=>I.attachment_1_preview=E},null,8,["value","onSetFile","onSetPreview"])])]),e("td",Dm,[e("div",Sm,l(I.note),1)]),e("td",{class:Ue(["cell",!("useUtils"in T?T.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])||t(A)?"unselectable":""])},[e("div",Tm,[!("useUtils"in T?T.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])||t(A)?(s(),_("div",Cm,[I.be_paid==0?(s(),pe(R,{key:0,class:"text-red-800"})):(s(),pe(J,{key:1,class:"text-green-800"}))])):(s(),_("button",{key:1,type:"button",onClick:E=>I.be_paid=I.be_paid?0:1,class:Ue(["text-white w-auto rounded text-xl",I.be_paid?"bg-green-600":"bg-red-600"])},[I.be_paid==0?(s(),pe(R,{key:0})):(s(),pe(J,{key:1}))],10,Pm))])],2)],8,ym)):O("",!0)],64))),128))],512)])])])])]),e("div",Am,[e("div",Mm,[Om,t(r).val||t(r).val1||t(r).val2||t(r).val3||t(r).val4||t(r).val5?(s(),_("div",Nm,[t(r).val?(s(),_("div",Fm," Kasir : "+l(t(r).val_by.username)+" ( "+l(t(r).val_at?t(f)(t(r).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val1?(s(),_("div",Im," Mandor : "+l(t(r).val1_by.username)+" ( "+l(t(r).val1_at?t(f)(t(r).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val2?(s(),_("div",Ym," Staff Logistik : "+l(t(r).val2_by.username)+" ( "+l(t(r).val2_at?t(f)(t(r).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val3?(s(),_("div",Bm," Admin Logistik : "+l(t(r).val3_by.username)+" ( "+l(t(r).val3_at?t(f)(t(r).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val4?(s(),_("div",qm," SPV Logistik : "+l(t(r).val4_by.username)+" ( "+l(t(r).val4_at?t(f)(t(r).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val5?(s(),_("div",Um," MGR Logistik : "+l(t(r).val5_by.username)+" ( "+l(t(r).val5_at?t(f)(t(r).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:q[0]||(q[0]=I=>M())},[j(re,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:q[1]||(q[1]=I=>n.fnClose())}," Cancel "),n.it_state==1&&("useUtils"in T?T.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])&&t(r).val5=="0"?(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-green-600 text-white text-xs rounded-sm",onClick:q[2]||(q[2]=ze(I=>w("paid"),["prevent"]))}," Paid ")):O("",!0),n.it_state==1&&("useUtils"in T?T.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])&&t(r).val5=="0"?(s(),_("button",{key:1,type:"submit",name:"button",class:"w-36 m-1 bg-red-600 text-white text-xs rounded-sm",onClick:q[3]||(q[3]=ze(I=>w("nopaid"),["prevent"]))}," NoPaid ")):O("",!0),n.it_state==1?(s(),_("button",{key:2,ref_key:"it_val",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:q[4]||(q[4]=ze(I=>w(),["prevent"]))},[F(" Validasi "),t(v)!=""?(s(),_("div",Hm,l(t(v)),1)):O("",!0)],512)):O("",!0),n.it_state==0?(s(),_("button",{key:3,ref_key:"it_unval",ref:h,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:q[5]||(q[5]=ze(I=>m(),["prevent"]))},[F(" Unvalidasi "),t(v)!=""?(s(),_("div",zm,l(t(v)),1)):O("",!0)],512)):O("",!0),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:q[6]||(q[6]=I=>D())},[j(te,{class:"black"})])])])])],512)),[[Be,n.show]])}}},za=Oe(Vm,[["__scopeId","data-v-cebd3f03"]]),Uye=Object.freeze(Object.defineProperty({__proto__:null,default:za},Symbol.toStringTag,{value:"Module"})),Lm={name:"MaterialSymbolsNestClockFarsightAnalogOutline"},Em={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Rm=e("path",{fill:"currentColor",d:"M14.55 16.55L11 13V8h2v4.175l2.95 2.95zM11 6V4h2v2zm7 7v-2h2v2zm-7 7v-2h2v2zm-7-7v-2h2v2zm8 9q-2.075 0-3.9-.788t-3.175-2.137T2.788 15.9T2 12t.788-3.9t2.137-3.175T8.1 2.788T12 2t3.9.788t3.175 2.137T21.213 8.1T22 12t-.788 3.9t-2.137 3.175t-3.175 2.138T12 22m0-2q3.35 0 5.675-2.325T20 12t-2.325-5.675T12 4T6.325 6.325T4 12t2.325 5.675T12 20m0-8"},null,-1),Jm=[Rm];function Km(n,o,x,f,d,a){return s(),_("svg",Em,Jm)}const Gl=Oe(Lm,[["render",Km]]),Hye=Object.freeze(Object.defineProperty({__proto__:null,default:Gl},Symbol.toStringTag,{value:"Module"})),Gm={name:"MaterialSymbolsCalendarMonth"},Zm={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Wm=e("path",{fill:"currentColor",d:"M12 14q-.425 0-.712-.288T11 13t.288-.712T12 12t.713.288T13 13t-.288.713T12 14m-4 0q-.425 0-.712-.288T7 13t.288-.712T8 12t.713.288T9 13t-.288.713T8 14m8 0q-.425 0-.712-.288T15 13t.288-.712T16 12t.713.288T17 13t-.288.713T16 14m-4 4q-.425 0-.712-.288T11 17t.288-.712T12 16t.713.288T13 17t-.288.713T12 18m-4 0q-.425 0-.712-.288T7 17t.288-.712T8 16t.713.288T9 17t-.288.713T8 18m8 0q-.425 0-.712-.288T15 17t.288-.712T16 16t.713.288T17 17t-.288.713T16 18M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V2h2v2h8V2h2v2h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5z"},null,-1),Qm=[Wm];function Xm(n,o,x,f,d,a){return s(),_("svg",Zm,Qm)}const kl=Oe(Gm,[["render",Xm]]),zye=Object.freeze(Object.defineProperty({__proto__:null,default:kl},Symbol.toStringTag,{value:"Module"})),eh={name:"PhTruckTrailer"},th={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},lh=e("path",{fill:"currentColor",d:"M224 96.8V96a56.06 56.06 0 0 0-56-56h-8a16 16 0 0 0-16 16v120h-16V72a8 8 0 0 0-8-8H16A16 16 0 0 0 0 80v104a32 32 0 0 0 56 21.13A32 32 0 0 0 111 192h82a32 32 0 0 0 63-8v-48a40.07 40.07 0 0 0-32-39.2M160 56h8a40 40 0 0 1 40 40v8a8 8 0 0 0 8 8a24 24 0 0 1 24 24v20.31a31.7 31.7 0 0 0-16-4.31a32.06 32.06 0 0 0-31 24h-33Zm-48 24v96h-1a32 32 0 0 0-55-13.13a31.9 31.9 0 0 0-40-6.56V80ZM32 200a16 16 0 1 1 16-16a16 16 0 0 1-16 16m48 0a16 16 0 1 1 16-16a16 16 0 0 1-16 16m144 0a16 16 0 1 1 16-16a16 16 0 0 1-16 16"},null,-1),ah=[lh];function sh(n,o,x,f,d,a){return s(),_("svg",th,ah)}const Zl=Oe(eh,[["render",sh]]),Vye=Object.freeze(Object.defineProperty({__proto__:null,default:Zl},Symbol.toStringTag,{value:"Module"})),oh={name:"MaterialSymbolsLocationOn"},nh={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},rh=e("path",{fill:"currentColor",d:"M12 12q.825 0 1.413-.587T14 10t-.587-1.412T12 8t-1.412.588T10 10t.588 1.413T12 12m0 10q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 2.5-1.987 5.438T12 22"},null,-1),ih=[rh];function dh(n,o,x,f,d,a){return s(),_("svg",nh,ih)}const jl=Oe(oh,[["render",dh]]),Lye=Object.freeze(Object.defineProperty({__proto__:null,default:jl},Symbol.toStringTag,{value:"Module"})),_h={name:"HealthiconsTruckDriver"},uh={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},ch=e("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 9.5c0-.437 4.516-3.5 9-3.5s9 3.063 9 3.5c0 1.56-.166 2.484-.306 2.987c-.093.33-.402.513-.745.513H16.051c-.343 0-.652-.183-.745-.513C15.166 11.984 15 11.06 15 9.5m7.5-.5a1 1 0 1 0 0 2h3a1 1 0 0 0 0-2zm-6.462 10.218c-3.33-1.03-2.49-2.87-1.22-4.218H33.46c1.016 1.298 1.561 3.049-1.51 4.097a8 8 0 1 1-15.912.12m7.69.782c2.642 0 4.69-.14 6.26-.384a6 6 0 1 1-11.98.069c1.463.202 3.338.315 5.72.315M32.417 34.6A9.992 9.992 0 0 0 24 30a9.992 9.992 0 0 0-8.42 4.602a2.49 2.49 0 0 0-1.447-1.05l-1.932-.517a2.5 2.5 0 0 0-3.062 1.767L8.363 37.7a2.5 2.5 0 0 0 1.768 3.062l1.931.518A2.492 2.492 0 0 0 14 41.006A1 1 0 0 0 16 41v-1c0-.381.027-.756.078-1.123l5.204 1.395a3 3 0 0 0 5.436 0l5.204-1.395c.051.367.078.742.078 1.123v1a1 1 0 0 0 2 .01c.56.336 1.252.453 1.933.27l1.932-.517a2.5 2.5 0 0 0 1.768-3.062l-.777-2.898a2.5 2.5 0 0 0-3.062-1.767l-1.932.517a2.49 2.49 0 0 0-1.445 1.046m-15.814 2.347A8.008 8.008 0 0 1 23 32.062v4.109a3.007 3.007 0 0 0-1.88 1.987zm14.794 0A8.009 8.009 0 0 0 25 32.062v4.109c.904.32 1.61 1.06 1.88 1.987zM24 40a1 1 0 1 0 0-2a1 1 0 0 0 0 2",clipRule:"evenodd"},null,-1),ph=[ch];function vh(n,o,x,f,d,a){return s(),_("svg",uh,ph)}const Cl=Oe(_h,[["render",vh]]),Eye=Object.freeze(Object.defineProperty({__proto__:null,default:Cl},Symbol.toStringTag,{value:"Module"})),fh={class:"box-fixed"},mh={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},hh={class:"w-full flex flex-col items-center grow overflow-auto"},bh={class:"w-full flex flex-row flex-wrap"},yh={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},xh=e("label",{for:""},"U.Jalan Per",-1),wh={key:0,class:"grow"},gh={key:1,class:"grow"},$h={class:"text-red-500"},kh={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jh=e("label",{for:""},"Jenis",-1),Dh=["disabled"],Sh=Et('<option value="TBS">TBS</option><option value="TBSK">TBSK</option><option value="CPO">CPO</option><option value="PK">PK</option><option value="LAIN">LAIN</option><option value="TUNGGU">TUNGGU</option>',6),Th=[Sh],Ch={class:"text-red-500"},Ph={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ah=e("label",{for:""},"Payment Method",-1),Mh=["disabled"],Oh=["value"],Nh={class:"text-red-500"},Fh={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ih=e("label",{for:""},"No Pol",-1),Yh=["disabled"],Bh={id:"vehicle"},qh=["value"],Uh={class:"text-red-500"},Hh={key:0,class:"w-full flex flex-wrap"},zh={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},Vh=e("label",{for:""},"Uang Jalan",-1),Lh={class:"text-red-500"},Eh={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},Rh=e("label",{for:""},"Note For Remarks",-1),Jh={class:"text-red-500"},Kh={key:1,class:"w-full flex flex-wrap"},Gh={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Zh=e("label",{for:""},"Supir",-1),Wh={class:"text-red-500"},Qh={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Xh=e("label",{for:""},"Kernet",-1),eb={class:"text-red-500"},tb={class:"w-full flex items-center justify-end"},lb={__name:"trx_trp",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir_id:"",supir:"",kernet_id:"",kernet:"",no_pol:"",note_for_remarks:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:"",transition_target:"",transition_type:"",payment_method_id:2,payment_method:{id:0,name:""},uj:{}};let a=ie({},d);const r=u(ie({},d)),p=ke("token"),i=u({}),c=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const L=new FormData;L.append("tanggal",x(r.value.tanggal).format("Y-MM-DD")),L.append("jenis",r.value.jenis),L.append("id_uj",v.value.id),L.append("payment_method_id",r.value.payment_method_id),L.append("no_pol",r.value.no_pol),L.append("note_for_remarks",r.value.note_for_remarks),L.append("supir_id",C.value.id),L.append("kernet_id",y.value.id);let R="post",J=o.id;J==0||(L.append("id",J),L.append("_method","PUT"));const{data:re,error:te,status:ee}=yield W("/trx_trp",{method:R,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:L,retry:0});if($().loading_full=!1,ee.value==="error"){X().trigger(te,i);return}r.value.supir=C.value.name,r.value.supir_rek_no=C.value._.rek_no.val,r.value.supir_rek_name=C.value._.rek_name.val,r.value.kernet=y.value.name,r.value.kernet_rek_no=y.value._.rek_no.val,r.value.kernet_rek_name=y.value._.rek_name.val,r.value.uj=v.value._raw;let ce=P.value.map(U=>U.id).indexOf(r.value.payment_method_id);if(r.value.payment_method=ie({},P.value[ce]),r.value.updated_at=re.value.updated_at,o.id<=0)r.value.id=re.value.id,r.value.created_at=re.value.created_at,o.p_data.unshift(r.value);else{let U=o.p_data.map(I=>I.id).indexOf(o.id);U>-1&&o.p_data.splice(U,1,ie({},r.value))}o.fnClose()}),h=ne(()=>M.value.filter(L=>L.jenis==r.value.jenis)),k={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""},C=u(JSON.parse(JSON.stringify(k))),y=u(JSON.parse(JSON.stringify(k))),g=ne(()=>{let L=[];return q.value.forEach((R,J)=>{let re=JSON.parse(JSON.stringify(k));re._.id.val=R.id,re._.name.val=R.name,re._.rek_no.val=R.rek_no,re._.rek_name.val=R.rek_name,re.id=R.id,re.name=R.name,re.title=(R.rek_no||"")+" "+(R.rek_name||""),re.note=S(R),re._raw=R,L.push(JSON.parse(JSON.stringify(re)))}),L}),b={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},asst_opt:{tcon:"IconsPerson",text:"Info",val:""},tipe:{tcon:"",text:"Tipe",val:""},harga:{tcon:"IconsMoney",text:"Amount",val:""}},id:"",name:"",title:"",note:""},v=u(JSON.parse(JSON.stringify(b))),w=L=>{let R=JSON.parse(JSON.stringify(b));return R._.id.val=L.id,R._.xto.val=L.xto,R._.asst_opt.val=L.asst_opt,R._.tipe.val=L.tipe,R._.harga.val=f(L.harga),R.id=L.id,R.name=L.xto,R.title=(L.asst_opt||"")+" "+(L.tipe||"")+" "+(f(L.harga)||""),R._raw=L,R},m=ne(()=>{let L=[];return h.value.forEach((R,J)=>{L.push(JSON.parse(JSON.stringify(w(R))))}),L}),S=L=>L.potongan?"Akan ada potong sebesar :"+K().pointFormat(L.potongan.nominal_cut):"",A=ne(()=>!1),D=()=>Y(this,null,function*(){$().loading_full=!0;const{data:L,error:R,status:J}=yield W("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,J.value==="error"){X().trigger(R);return}let re=L.value.data;r.value=re,a=ie({},re),C.value._.id.val=re.supir_id,C.value._.name.val=re.supir,C.value._.rek_no.val=re.supir_rek_no,C.value._.rek_name.val=re.supir_rek_name,C.value.id=re.supir_id,C.value.name=re.supir,C.value.rek_no=(re.supir_rek_no||"")+" "+(re.supir_rek_name||""),y.value._.id.val=re.kernet_id,y.value._.name.val=re.kernet,y.value._.rek_no.val=re.kernet_rek_no,y.value._.rek_name.val=re.kernet_rek_name,y.value.id=re.kernet_id,y.value.name=re.kernet,y.value.rek_no=(re.kernet_rek_no||"")+" "+(re.kernet_rek_name||""),v.value=w(re.uj);let te=0,ee=0;re.potongan.forEach(ce=>{ce.potongan_mst.employee_id==re.supir_id&&(te+=parseInt(ce.nominal_cut)),ce.potongan_mst.employee_id==re.kernet_id&&(ee+=parseInt(ce.nominal_cut))}),te>0&&(C.value.note="Telah di potong sebesar :"+K().pointFormat(te)),ee>0&&(y.value.note="Telah di potong sebesar :"+K().pointFormat(ee)),o.fnLoadDBData()}),M=u([]),T=u([]),q=u([]),P=u([]),N=()=>Y(this,null,function*(){$().loading_full=!0;const{data:L,error:R,status:J}=yield W("/trx_load_for_local",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,J.value==="error"){X().trigger(R);return}M.value=L.value.list_ujalan,T.value=L.value.list_vehicle,q.value=L.value.list_employee,P.value=L.value.list_payment_methods});return je(()=>o.show,(L,R)=>Y(this,null,function*(){L==!0&&(yield N(),yield o.fnLoadDBData(),r.value=ie({},d),a=ie({},d),C.value=JSON.parse(JSON.stringify(k)),y.value=JSON.parse(JSON.stringify(k)),v.value=JSON.parse(JSON.stringify(b)),i.value={},o.id!=0&&D())}),{immediate:!0}),je(()=>v.value._raw,(L,R)=>{L&&Object.keys(L).length===0&&L.constructor===Object?(C.value=JSON.parse(JSON.stringify(k)),y.value=JSON.parse(JSON.stringify(k)),r.value.transition_target="",r.value.transition_type=""):L.asst_opt&&L.asst_opt=="TANPA KERNET"&&(y.value=JSON.parse(JSON.stringify(k)),L.transition_from&&(r.value.transition_target=L.transition_from,r.value.transition_type="From"))},{deep:!0,immediate:!0}),(L,R)=>{var ce,U;const J=Xe,re=Vt("vue-date-picker"),te=zt,ee=$l;return ae((s(),_("section",fh,[e("div",null,[j(J,{title:"Form Transaction"+(n.id?" #"+n.id:""),fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["title","fn"]),e("form",mh,[e("div",hh,[e("div",bh,[e("div",yh,[xh,t(r).val!==1?(s(),_("div",wh,[j(te,null,{default:Q(()=>[j(re,{modelValue:t(r).tanggal,"onUpdate:modelValue":R[0]||(R[0]=I=>t(r).tanggal=I),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})])):(s(),_("div",gh,[e("div",{class:Ue(["card-border disabled",t(r).pvr_no!=""?"unselectable":""])},l(t(r).tanggal?t(x)(t(r).tanggal).format("DD-MM-YYYY"):""),3)])),e("p",$h,l(t(i).tanggal),1)]),e("div",kh,[jh,ae(e("select",{"onUpdate:modelValue":R[1]||(R[1]=I=>t(r).jenis=I),disabled:t(r).val==1},Th,8,Dh),[[We,t(r).jenis]]),e("p",Ch,l(t(i).jenis),1)]),e("div",Ph,[Ah,ae(e("select",{"onUpdate:modelValue":R[2]||(R[2]=I=>t(r).payment_method_id=I),disabled:t(r).val==1},[(s(!0),_(ye,null,Ae(t(P),I=>(s(),_("option",{value:I.id},l(I.name),9,Oh))),256))],8,Mh),[[We,t(r).payment_method_id]]),e("p",Nh,l(t(i).payment_method_id),1)]),e("div",Fh,[Ih,ae(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":R[3]||(R[3]=I=>t(r).no_pol=I),disabled:t(r).val==1},null,8,Yh),[[Te,t(r).no_pol]]),e("datalist",Bh,[(s(!0),_(ye,null,Ae(t(T),I=>(s(),_("option",{value:I.no_pol},l(I.no_pol),9,qh))),256))]),e("p",Uh,l(t(i).no_pol),1)]),t(r).jenis!=""?(s(),_("div",Hh,[e("div",zh,[Vh,j(ee,{arr:t(m),selected:t(v),pure:b,onSetSelected:R[4]||(R[4]=I=>v.value=I),disabled:t(a).supir_id>1||t(r).val1==1},null,8,["arr","selected","disabled"]),e("p",Lh,l(t(i).id_uj),1)]),e("div",Eh,[Rh,ae(e("textarea",{"onUpdate:modelValue":R[5]||(R[5]=I=>t(r).note_for_remarks=I)},null,512),[[Te,t(r).note_for_remarks]]),e("p",Jh,l(t(i).note_for_remarks),1)])])):O("",!0),(ce=t(v)._raw)!=null&&ce.asst_opt?(s(),_("div",Kh,[e("div",Gh,[Zh,j(ee,{arr:t(g),selected:t(C),pure:k,onSetSelected:R[6]||(R[6]=I=>C.value=I),disabled:t(a).supir_id>1||t(r).val1==1},null,8,["arr","selected","disabled"]),e("p",Wh,l(t(i).supir_id),1)]),ae(e("div",Qh,[Xh,j(ee,{arr:t(g),selected:t(y),pure:k,onSetSelected:R[7]||(R[7]=I=>y.value=I),disabled:t(a).kernet_id>1||t(r).val1==1},null,8,["arr","selected","disabled"]),e("p",eb,l(t(i).kernet_id),1)],512),[[Be,((U=t(v)._raw)==null?void 0:U.asst_opt)=="DENGAN KERNET"]])])):O("",!0)])]),e("div",tb,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:R[8]||(R[8]=I=>n.fnClose())}," Cancel "),t(A)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:R[9]||(R[9]=ze(I=>c(),["prevent"]))}," Save "))])])])],512)),[[Be,n.show]])}}},Va=lb,Rye=Object.freeze(Object.defineProperty({__proto__:null,default:Va},Symbol.toStringTag,{value:"Module"})),ab={class:"border-2 w-full"},sb=e("div",{class:"w-full font-bold text-center bg-blue-300"},"UANG JALAN TRIP INFO ",-1),ob={class:"border-t-2 flex w-full items-center justify-between"},nb={class:"flex items-center justify-center p-1"},rb=e("div",{class:"font-bold text-xs"},"Created At",-1),ib={class:"text-xs sm:flex"},db={class:"sm:mr-1"},_b={class:"font-bold text-lg text-center"},ub={class:"flex items-center justify-center p-1"},cb=e("div",{class:"font-bold text-xs"},"Updated At",-1),pb={class:"text-xs sm:flex"},vb={class:"sm:mr-1"},fb={class:"border-t-2 p-2 flex flex-col items-center justify-center"},mb={class:"flex flex-col items-center justify-center"},hb={class:"flex items-center justify-center"},bb={class:"font-bold italic ml-2"},yb={class:"flex flex-col relative"},xb={class:"absolute mt-12 ml-2 w-12 text-center font-bold"},wb={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},gb={class:"flex items-center justify-center"},$b={class:"px-1"},kb={class:"px-1 font-bold"},jb={class:"w-full flex flex-wrap items-center justify-center"},Db={class:"w-full sm:w-1/2 flex flex-wrap items-center justify-center border-2 rounded-lg"},Sb={class:"w-1/2"},Tb={class:"w-1/2"},Cb={class:"font-bold"},Pb={key:0,class:"w-full sm:w-1/2 flex items-center justify-center border-2 rounded-lg"},Ab={class:"w-1/2"},Mb={class:"w-1/2"},Ob={class:"font-bold"},Nb={class:"w-full flex flex-row flex-wrap"},Fb={class:"w-full sm:w-7/12 md:w-1/2 p-2"},Ib=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA PERJALANAN ",-1),Yb={class:"w-full text-xs sm:text-sm"},Bb=e("thead",null,[e("tr",null,[e("th",{class:"border-2 border-black p-1"},"No"),e("th",{class:"border-2 border-black p-1"},"Deskripsi"),e("th",{class:"border-2 border-black p-1"},"Qty"),e("th",{class:"border-2 border-black p-1"},"Harga"),e("th",{class:"border-2 border-black p-1"},"Jumlah")])],-1),qb={class:"border-2 border-black p-1"},Ub={class:"border-2 border-black p-1"},Hb={class:"border-2 border-black p-1 text-right"},zb={class:"border-2 border-black p-1 text-right"},Vb={class:"border-2 border-black p-1 text-right"},Lb=e("th",{class:"border-2 border-black p-1",colspan:"4"}," Total ",-1),Eb={key:0,class:"border-2 border-black p-1"},Rb={class:"border-2 border-black p-1 text-red-500",colspan:"4"},Jb={class:"border-2 border-black p-1 text-red-500 text-right"},Kb=e("td",{class:"border-2 border-black p-1 text-red-500",colspan:"4"}," Total Potongan ",-1),Gb={class:"border-2 border-black p-1 text-red-500 text-right"},Zb=e("th",{class:"border-2 border-black p-1",colspan:"4"}," Total Diterima ",-1),Wb={key:0,class:"border-2 border-black p-1 text-right"},Qb={class:"w-full sm:w-5/12 md:w-1/2 p-2"},Xb=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," PEMBAYARAN ",-1),ey={class:"w-full text-sm"},ty=e("td",{class:"border-2 border-black p-2"},"Metode ",-1),ly={class:"border-2 border-black p-2 font-bold"},ay=e("td",{class:"border-2 border-black p-2"},"Sudah Dibayarkan? ",-1),sy={class:"border-2 border-black p-2 font-bold"},oy=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," DUITKU SUPIR ",-1),ny={class:"w-full text-sm"},ry=e("tr",null,[e("td",{class:"border-2 border-black p-2"},"ID "),e("td",{class:"border-2 border-black p-2"},"INQUERY"),e("td",{class:"border-2 border-black p-2"},"TRANSFER")],-1),iy={class:"border-2 border-black p-2 font-bold"},dy={class:"border-2 border-black p-2 font-bold"},_y={class:"border-2 border-black p-2 font-bold"},uy={key:0,class:"w-full font-bold text-xl text-center mt-2"},cy={key:1,class:"w-full text-sm"},py=e("tr",null,[e("td",{class:"border-2 border-black p-2"},"ID "),e("td",{class:"border-2 border-black p-2"},"INQUERY"),e("td",{class:"border-2 border-black p-2"},"TRANSFER")],-1),vy={class:"border-2 border-black p-2 font-bold"},fy={class:"border-2 border-black p-2 font-bold"},my={class:"border-2 border-black p-2 font-bold"},hy=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),by={class:"w-full text-sm"},yy=e("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),xy={class:"border-2 border-black p-2 font-bold"},wy=e("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),gy={class:"border-2 border-black p-2 font-bold"},$y=e("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),ky={class:"border-2 border-black p-2 font-bold"},jy=e("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),Dy={class:"border-2 border-black p-2 font-bold"},Sy=e("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),Ty={class:"border-2 border-black p-2 font-bold"},Cy=e("td",{class:"border-2 border-black p-2"}," PV NO ",-1),Py={class:"border-2 border-black p-2 font-bold"},Ay=e("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),My={class:"border-2 border-black p-2 font-bold"},Oy=e("div",{class:"text-xl font-bold"}," APPROVER UANG JALAN TRIP",-1),Ny={class:"w-full flex flex-wrap justify-center text-xs text-center"},Fy={class:"border-2 p-1 m-1"},Iy=e("br",null,null,-1),Yy=e("br",null,null,-1),By={class:"border-2 p-1 m-1"},qy=e("br",null,null,-1),Uy=e("br",null,null,-1),Hy={class:"border-2 p-1 m-1"},zy=e("br",null,null,-1),Vy=e("br",null,null,-1),Ly={class:"border-2 p-1 m-1"},Ey=e("br",null,null,-1),Ry=e("br",null,null,-1),Jy={class:"border-2 p-1 m-1"},Ky=e("br",null,null,-1),Gy=e("br",null,null,-1),Zy={class:"border-2 p-1 m-1"},Wy=e("br",null,null,-1),Qy=e("br",null,null,-1),Xy={class:"border-2 p-1 m-1"},ex=e("br",null,null,-1),tx=e("br",null,null,-1),lx={key:0,class:"flex flex-wrap justify-between"},ax={key:0,class:"text-xs font-bold"},sx={key:0,class:"text-xs font-bold"},na={__name:"uj",props:{trx_trp:{type:Object,required:!0},p_data:{type:Array,required:!1,default:[]},save_state:{type:Array,required:!1,default:[]},save_do:{type:Array,required:!1,default:[]}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d=ke("token");u({});const a=()=>Y(this,null,function*(){o.save_state[0]="PROSES...",o.save_do[0]="VAL",$().loading_full=!0;const p=new FormData;let i="post",c=o.trx_trp.id;c==0||(p.append("id",c),p.append("_method","PUT"));const{data:h,error:k,status:C}=yield W("/trx_trp_validasi",{method:i,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:p,retry:0});if($().loading_full=!1,C.value==="error"){o.save_state[0]="GAGAL",X().trigger(k);return}o.trx_trp.val=h.value.val,o.trx_trp.val_user=h.value.val_user,o.trx_trp.val_by=h.value.val_by,o.trx_trp.val_at=h.value.val_at,o.trx_trp.val1=h.value.val1,o.trx_trp.val1_user=h.value.val1_user,o.trx_trp.val1_by=h.value.val1_by,o.trx_trp.val1_at=h.value.val1_at,o.trx_trp.val2=h.value.val2,o.trx_trp.val2_user=h.value.val2_user,o.trx_trp.val2_by=h.value.val2_by,o.trx_trp.val2_at=h.value.val2_at,o.trx_trp.val3=h.value.val3,o.trx_trp.val3_user=h.value.val3_user,o.trx_trp.val3_by=h.value.val3_by,o.trx_trp.val3_at=h.value.val3_at,o.trx_trp.val4=h.value.val4,o.trx_trp.val4_user=h.value.val4_user,o.trx_trp.val4_by=h.value.val4_by,o.trx_trp.val4_at=h.value.val4_at,o.trx_trp.val5=h.value.val5,o.trx_trp.val5_user=h.value.val5_user,o.trx_trp.val5_by=h.value.val5_by,o.trx_trp.val5_at=h.value.val5_at,o.trx_trp.val6=h.value.val6,o.trx_trp.val6_user=h.value.val6_user,o.trx_trp.val6_by=h.value.val6_by,o.trx_trp.val6_at=h.value.val6_at;let y=o.p_data.map(g=>g.id).indexOf(o.trx_trp.id);y>-1&&o.p_data.splice(y,1,ie({},o.trx_trp)),o.save_state[0]="BERHASIL"}),r=()=>Y(this,null,function*(){o.save_state[0]="PROSES...",o.save_do[0]="UNVAL",$().loading_full=!0;const p=new FormData;let i="post",c=o.trx_trp.id;c==0||(p.append("id",c),p.append("_method","PUT"));const{data:h,error:k,status:C}=yield W("/trx_trp_unvalidasi",{method:i,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:p,retry:0});if($().loading_full=!1,C.value==="error"){o.save_state[0]="GAGAL",X().trigger(k);return}o.trx_trp.val=h.value.val,o.trx_trp.val_user=h.value.val_user,o.trx_trp.val_by=h.value.val_by,o.trx_trp.val_at=h.value.val_at,o.trx_trp.val1=h.value.val1,o.trx_trp.val1_user=h.value.val1_user,o.trx_trp.val1_by=h.value.val1_by,o.trx_trp.val1_at=h.value.val1_at,o.trx_trp.val2=h.value.val2,o.trx_trp.val2_user=h.value.val2_user,o.trx_trp.val2_by=h.value.val2_by,o.trx_trp.val2_at=h.value.val2_at,o.trx_trp.val3=h.value.val3,o.trx_trp.val3_user=h.value.val3_user,o.trx_trp.val3_by=h.value.val3_by,o.trx_trp.val3_at=h.value.val3_at,o.trx_trp.val4=h.value.val4,o.trx_trp.val4_user=h.value.val4_user,o.trx_trp.val4_by=h.value.val4_by,o.trx_trp.val4_at=h.value.val4_at,o.trx_trp.val5=h.value.val5,o.trx_trp.val5_user=h.value.val5_user,o.trx_trp.val5_by=h.value.val5_by,o.trx_trp.val5_at=h.value.val5_at,o.trx_trp.val6=h.value.val6,o.trx_trp.val6_user=h.value.val6_user,o.trx_trp.val6_by=h.value.val6_by,o.trx_trp.val6_at=h.value.val6_at;let y=o.p_data.map(g=>g.id).indexOf(o.trx_trp.id);y>-1&&o.p_data.splice(y,1,ie({},o.trx_trp)),o.save_state[0]="BERHASIL"});return(p,i)=>{var g,b,v;const c=Gl,h=kl,k=Zl,C=jl,y=Cl;return s(),_("div",ab,[sb,e("div",ob,[e("div",nb,[j(c,{class:"text-xl mr-1"}),e("div",null,[rb,e("div",ib,[e("div",db,l(n.trx_trp.created_at?t(x)(n.trx_trp.created_at).format("DD-MM-YYYY"):""),1),e("div",null,l(n.trx_trp.created_at?t(x)(n.trx_trp.created_at).format("H:m:s"):""),1)])])]),e("div",_b,"ID #"+l(n.trx_trp.id),1),e("div",ub,[j(c,{class:"text-xl mr-1"}),e("div",null,[cb,e("div",pb,[e("div",vb,l(n.trx_trp.updated_at?t(x)(n.trx_trp.updated_at).format("DD-MM-YYYY"):""),1),e("div",null,l(n.trx_trp.updated_at?t(x)(n.trx_trp.updated_at).format("H:m:s"):""),1)])])])]),e("div",fb,[e("div",mb,[e("div",hb,[j(h,{class:"mr-1"}),F(" "+l(n.trx_trp.tanggal?t(x)(n.trx_trp.tanggal).format("DD-MM-YYYY"):"")+" ",1),e("span",bb,l(n.trx_trp.transition_type)+" "+l(n.trx_trp.transition_target),1)]),e("div",yb,[j(k,{class:"text-9xl"}),e("div",xb,l(n.trx_trp.jenis),1),e("div",wb,l(n.trx_trp.no_pol),1)]),e("div",gb,[j(C),e("span",$b,l((g=n.trx_trp.uj)==null?void 0:g.xto)+" [#"+l((b=n.trx_trp.uj)==null?void 0:b.id)+"]",1),e("span",kb,l(t(f)((v=n.trx_trp.uj)==null?void 0:v.harga)),1)])]),e("div",jb,[e("div",Db,[e("div",Sb,[j(y,{class:"text-9xl"})]),e("div",Tb,[e("div",Cb," DRIVER #"+l(n.trx_trp.supir_id),1),e("div",null,l(n.trx_trp.supir),1)])]),n.trx_trp.kernet_id?(s(),_("div",Pb,[e("div",Ab,[j(y,{class:"text-9xl"})]),e("div",Mb,[e("div",Ob," ASST DRIVER #"+l(n.trx_trp.kernet_id),1),e("div",null,l(n.trx_trp.kernet),1)])])):O("",!0)]),e("div",Nb,[e("div",Fb,[Ib,e("table",Yb,[Bb,e("tbody",null,[(s(!0),_(ye,null,Ae(n.trx_trp.details_uj,(w,m)=>(s(),_("tr",null,[e("td",qb,l(m+1),1),e("td",Ub,l(w.xdesc),1),e("td",Hb,l(t(f)(w.qty)),1),e("td",zb,l(t(f)(w.harga)),1),e("td",Vb,l(t(f)(w.qty*w.harga)),1)]))),256))]),e("tfoot",null,[e("tr",null,[Lb,n.trx_trp.details_uj&&n.trx_trp.details_uj.length>0?(s(),_("th",Eb,l(t(f)(n.trx_trp.details_uj.map(w=>w.qty*w.harga).reduce((w,m)=>(w+=m,w)))),1)):O("",!0)]),n.trx_trp.potongan&&n.trx_trp.potongan.length>0?(s(),_(ye,{key:0},[(s(!0),_(ye,null,Ae(n.trx_trp.potongan,w=>(s(),_("tr",null,[e("td",Rb," Potongan "+l(w.potongan_mst.employee_id==n.trx_trp.supir_id?"Supir":"Kernet")+" #"+l(w.potongan_mst.id),1),e("td",Jb,l(t(f)(w.nominal_cut)),1)]))),256)),e("tr",null,[Kb,e("td",Gb,l(t(f)(n.trx_trp.potongan.map(w=>w.nominal_cut).reduce((w,m)=>(w+=m,w)))),1)]),e("tr",null,[Zb,n.trx_trp.details_uj&&n.trx_trp.potongan?(s(),_("th",Wb,l(t(f)(n.trx_trp.details_uj.map(w=>w.qty*w.harga).reduce((w,m)=>(w+=m,w))-n.trx_trp.potongan.map(w=>w.nominal_cut).reduce((w,m)=>(w+=m,w)))),1)):O("",!0)])],64)):O("",!0)])])]),e("div",Qb,[Xb,e("table",ey,[e("tbody",null,[e("tr",null,[ty,e("td",ly,l(n.trx_trp.payment_method.name),1)]),e("tr",null,[ay,e("td",sy,l(n.trx_trp.received_payment?"Ya":"Tidak"),1)])])]),oy,e("table",ny,[e("tbody",null,[ry,e("tr",null,[e("td",iy,l(n.trx_trp.duitku_supir_disburseId),1),e("td",dy,l(n.trx_trp.duitku_supir_inv_res_desc),1),e("td",_y,l(n.trx_trp.duitku_supir_trf_res_desc),1)])])]),n.trx_trp.kernet?(s(),_("div",uy," DUITKU KERNET ")):O("",!0),n.trx_trp.kernet?(s(),_("table",cy,[e("tbody",null,[py,e("tr",null,[e("td",vy,l(n.trx_trp.duitku_kernet_disburseId),1),e("td",fy,l(n.trx_trp.duitku_kernet_inv_res_desc),1),e("td",my,l(n.trx_trp.duitku_kernet_trf_res_desc),1)])])])):O("",!0),hy,e("table",by,[e("tbody",null,[e("tr",null,[yy,e("td",xy,l(n.trx_trp.note_for_remarks),1)]),e("tr",null,[wy,e("td",gy,l(n.trx_trp.cost_center_code),1)]),e("tr",null,[$y,e("td",ky,l(n.trx_trp.cost_center_desc),1)]),e("tr",null,[jy,e("td",Dy,l(n.trx_trp.pvr_no),1)]),e("tr",null,[Sy,e("td",Ty,l(t(f)(n.trx_trp.pvr_total||0)),1)]),e("tr",null,[Cy,e("td",Py,l(n.trx_trp.pv_no),1)]),e("tr",null,[Ay,e("td",My,l(t(f)(n.trx_trp.pv_total||0)),1)])])])])]),Oy,e("div",Ny,[e("div",Fy,[F(" Kasir "),Iy,F(" "+l(n.trx_trp.val&&n.trx_trp.val_by?n.trx_trp.val_by.username:"-")+" ",1),Yy,F(" ( "+l(n.trx_trp.val&&n.trx_trp.val_at?t(x)(n.trx_trp.val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",By,[F(" Mandor "),qy,F(" "+l(n.trx_trp.val1&&n.trx_trp.val1_by?n.trx_trp.val1_by.username:"-")+" ",1),Uy,F(" ( "+l(n.trx_trp.val1&&n.trx_trp.val1_at?t(x)(n.trx_trp.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Hy,[F(" KTU/W "),zy,F(" "+l(n.trx_trp.val2&&n.trx_trp.val2_by?n.trx_trp.val2_by.username:"-")+" ",1),Vy,F(" ( "+l(n.trx_trp.val2&&n.trx_trp.val2_at?t(x)(n.trx_trp.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Ly,[F(" Marketing "),Ey,F(" "+l(n.trx_trp.val3&&n.trx_trp.val3_by?n.trx_trp.val3_by.username:"-")+" ",1),Ry,F(" ( "+l(n.trx_trp.val3&&n.trx_trp.val3_at?t(x)(n.trx_trp.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Jy,[F(" Logistik "),Ky,F(" "+l(n.trx_trp.val4&&n.trx_trp.val4_by?n.trx_trp.val4_by.username:"-")+" ",1),Gy,F(" ( "+l(n.trx_trp.val4&&n.trx_trp.val4_at?t(x)(n.trx_trp.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Zy,[F(" SPV Logistik "),Wy,F(" "+l(n.trx_trp.val5&&n.trx_trp.val5_by?n.trx_trp.val5_by.username:"-")+" ",1),Qy,F(" ( "+l(n.trx_trp.val5&&n.trx_trp.val5_at?t(x)(n.trx_trp.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Xy,[F(" MGR Logistik "),ex,F(" "+l(n.trx_trp.val6&&n.trx_trp.val6_by?n.trx_trp.val6_by.username:"-")+" ",1),tx,F(" ( "+l(n.trx_trp.val6&&n.trx_trp.val6_at?t(x)(n.trx_trp.val6_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])])]),n.save_state.length>0?(s(),_("div",lx,[e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:i[0]||(i[0]=ze(w=>a(),["prevent"]))},[F(" Validasi "),n.save_do[0]=="VAL"&&n.save_state[0]!=""?(s(),_("div",ax,l(n.save_state[0]),1)):O("",!0)]),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:i[1]||(i[1]=ze(w=>r(),["prevent"]))},[F(" Unvalidasi "),n.save_do[0]=="UNVAL"&&n.save_state[0]!=""?(s(),_("div",sx,l(n.save_state[0]),1)):O("",!0)])])):O("",!0)])}}},Jye=Object.freeze(Object.defineProperty({__proto__:null,default:na},Symbol.toStringTag,{value:"Module"})),ox={class:"border-2 w-full"},nx=e("div",{class:"w-full font-bold text-center bg-blue-300"},"ABSEN TRIP",-1),rx={class:"border-t-2 flex w-full items-center justify-between"},ix={class:"w-full flex flex-wrap items-center"},dx={class:"w-full sm:w-1/2 text-center p-1"},_x={class:"border-[1px] p-1"},ux={class:"font-bold"},cx={class:"w-full flex justify-center items-center"},px=["src"],vx={class:"w-full sm:w-1/2 text-center p-1"},fx={class:"border-[1px] p-1"},mx={class:"border-[1px] p-1"},hx={class:"font-bold"},bx={class:"w-full flex justify-center items-center"},yx=["src"],xx={class:"w-full sm:w-1/2 text-center p-1"},wx={class:"border-[1px] p-1"},gx={class:"border-[1px] p-1"},$x={class:"font-bold"},kx={class:"w-full flex justify-center items-center"},jx=["src"],Dx={class:"w-full sm:w-1/2 text-center p-1"},Sx={class:"border-[1px] p-1"},Tx={class:"border-[1px] p-1"},Cx={class:"font-bold"},Px={class:"w-full flex justify-center items-center"},Ax=["src"],Mx={class:"w-full p-1"},Ox=e("label",{for:""}," Note ",-1),Nx={class:"card-border"},Fx={class:"border-t-2 p-2 flex flex-col items-center justify-center"},Ix=e("div",{class:"text-xl font-bold"}," APPROVER ABSEN TRIP",-1),Yx={class:"w-full flex flex-wrap justify-center text-xs text-center"},Bx={class:"border-2 p-1 m-1"},qx=e("br",null,null,-1),Ux=e("br",null,null,-1),Hx={class:"border-2 p-1 m-1"},zx=e("br",null,null,-1),Vx=e("br",null,null,-1),Lx={class:"border-2 p-1 m-1"},Ex=e("br",null,null,-1),Rx=e("br",null,null,-1),La={__name:"absen",props:{trx_trp:{type:Object,required:!0}},setup(n){const{$moment:o}=Ke();return(x,f)=>(s(),_("div",ox,[nx,e("div",rx,[e("div",ix,[e("div",dx,[e("div",_x,[e("label",ux,"Berangkat : "+l(n.trx_trp.img_leave_ts?t(o)(n.trx_trp.img_leave_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(n.trx_trp.img_leave_is_manual?"(Manual)":"(System)"),1),e("div",cx,[e("img",{src:n.trx_trp.img_leave,alt:""},null,8,px)])])]),e("div",vx,[e("div",fx,[e("div",mx,[e("label",hx,"Tiba : "+l(n.trx_trp.img_arrive_ts?t(o)(n.trx_trp.img_arrive_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(n.trx_trp.img_arrive_is_manual?"(Manual)":"(System)"),1),e("div",bx,[e("img",{src:n.trx_trp.img_arrive,alt:""},null,8,yx)])])])]),e("div",xx,[e("div",wx,[e("div",gx,[e("label",$x,"Kembali : "+l(n.trx_trp.img_return_ts?t(o)(n.trx_trp.img_return_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(n.trx_trp.img_return_is_manual?"(Manual)":"(System)"),1),e("div",kx,[e("img",{src:n.trx_trp.img_return,alt:""},null,8,jx)])])])]),e("div",Dx,[e("div",Sx,[e("div",Tx,[e("label",Cx,"Sampai : "+l(n.trx_trp.img_till_ts?t(o)(n.trx_trp.img_till_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(n.trx_trp.img_till_is_manual?"(Manual)":"(System)"),1),e("div",Px,[e("img",{src:n.trx_trp.img_till,alt:""},null,8,Ax)])])])]),e("div",Mx,[Ox,e("div",Nx,l(n.trx_trp.ritase_note),1)])])]),e("div",Fx,[Ix,e("div",Yx,[e("div",Bx,[F(" Kasir "),qx,F(" "+l(n.trx_trp.ritase_val_by?n.trx_trp.ritase_val_by.username:"-")+" ",1),Ux,F(" ( "+l(n.trx_trp.ritase_val_at?t(o)(n.trx_trp.ritase_val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Hx,[F(" Mandor "),zx,F(" "+l(n.trx_trp.ritase_val1_by?n.trx_trp.ritase_val1_by.username:"-")+" ",1),Vx,F(" ( "+l(n.trx_trp.ritase_val1_at?t(o)(n.trx_trp.ritase_val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Lx,[F(" Staff "),Ex,F(" "+l(n.trx_trp.ritase_val2_by?n.trx_trp.ritase_val2_by.username:"-")+" ",1),Rx,F(" ( "+l(n.trx_trp.ritase_val2_at?t(o)(n.trx_trp.ritase_val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])])])]))}},Kye=Object.freeze(Object.defineProperty({__proto__:null,default:La},Symbol.toStringTag,{value:"Module"})),Jx={class:"border-2 w-full"},Kx=e("div",{class:"w-full font-bold text-center bg-blue-300"},"TICKET TRIP INFO ",-1),Gx={class:"border-t-2 p-2 flex flex-col items-center justify-center"},Zx={class:"w-full flex flex-row flex-wrap"},Wx={key:0,class:"w-full flex flex-col flex-wrap p-1"},Qx=e("label",{for:""},"Tiket A",-1),Xx={class:"card-border"},ew={key:1,class:"w-full flex flex-wrap"},tw={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},lw=e("label",{for:""},"In At",-1),aw={class:"card-border disabled"},sw={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ow=e("label",{for:""},"Out At",-1),nw={class:"card-border disabled"},rw={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},iw=e("label",{for:""},"Bruto",-1),dw={class:"card-border disabled"},_w={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},uw=e("label",{for:""},"Tara",-1),cw={class:"card-border disabled"},pw={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},vw=e("label",{for:""},"Netto",-1),fw={class:"card-border disabled"},mw={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},hw=e("label",{for:""},"No Pol",-1),bw={class:"card-border disabled"},yw={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},xw=e("label",{for:""},"Supir",-1),ww={class:"card-border disabled"},gw={key:2,class:"w-full flex flex-col flex-wrap p-1"},$w=e("label",{for:""},"Tiket B",-1),kw={class:"card-border"},jw={key:3,class:"w-full flex flex-wrap"},Dw={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Sw=e("label",{for:""},"In At",-1),Tw={class:"card-border disabled"},Cw={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Pw=e("label",{for:""},"Out At",-1),Aw={class:"card-border disabled"},Mw={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ow=e("label",{for:""},"Bruto ",-1),Nw={class:"card-border disabled"},Fw={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Iw=e("label",{for:""},"Tara ",-1),Yw={class:"card-border disabled"},Bw={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},qw=e("label",{for:""},"Netto ",-1),Uw={class:"card-border disabled"},Hw={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},zw=e("label",{for:""},"No Pol",-1),Vw={class:"card-border disabled"},Lw={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ew=e("label",{for:""},"Supir",-1),Rw={class:"card-border disabled"},Jw={key:4,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Kw=e("label",{for:""},"In At",-1),Gw={class:"card-border"},Zw={key:5,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ww=e("label",{for:""},"Out At",-1),Qw={class:"card-border"},Xw={key:6,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},e0=e("label",{for:""},"Bruto",-1),t0={class:"card-border"},l0={key:7,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},a0=e("label",{for:""},"Tara",-1),s0={class:"card-border"},o0={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},n0=e("label",{for:""},"Netto",-1),r0={class:"card-border"},i0={class:"w-full flex flex-wrap"},d0=e("div",{class:"w-full sm:w-full md:w-6/12 lg:w-4/12 flex flex-col flex-wrap p-1 justify-end"},null,-1),_0={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},u0=e("label",{for:"",class:"font-bold"},"Selisih Bruto ",-1),c0={class:"card-border disabled"},p0={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},v0=e("label",{for:"",class:"font-bold"},"Selisih Tara ",-1),f0={class:"card-border disabled"},m0={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},h0=e("label",{for:"",class:"font-bold"},"Selisih Netto ",-1),b0={class:"card-border disabled"},y0={class:"w-full flex flex-col flex-wrap p-1"},x0=e("label",{for:""},"Note",-1),w0={class:"card-border"},g0=e("div",{class:"text-xl font-bold"}," APPROVER UANG JALAN TRIP",-1),$0={class:"w-full flex flex-wrap justify-center text-xs text-center"},k0={class:"border-2 p-1 m-1"},j0=e("br",null,null,-1),D0=e("br",null,null,-1),Ea={__name:"ticket",props:{trx_trp:{type:Object,required:!0}},setup(n){const{$moment:o}=Ke(),{pointFormat:x}=K();return(f,d)=>(s(),_("div",Jx,[Kx,e("div",Gx,[e("div",Zx,[n.trx_trp.jenis!=""&&n.trx_trp.jenis!="TBSK"?(s(),_("div",Wx,[Qx,e("div",Xx,l(n.trx_trp.ticket_a_no),1)])):O("",!0),n.trx_trp.jenis!=""&&n.trx_trp.jenis!="TBSK"?(s(),_("div",ew,[e("div",tw,[lw,e("div",aw,l(n.trx_trp.ticket_a_in_at?t(o)(n.trx_trp.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",sw,[ow,e("div",nw,l(n.trx_trp.ticket_a_out_at?t(o)(n.trx_trp.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",rw,[iw,e("div",dw,l(n.trx_trp.ticket_a_bruto?t(x)(n.trx_trp.ticket_a_bruto):0),1)]),e("div",_w,[uw,e("div",cw,l(n.trx_trp.ticket_a_tara?t(x)(n.trx_trp.ticket_a_tara):0),1)]),e("div",pw,[vw,e("div",fw,l(n.trx_trp.ticket_a_bruto?t(x)(n.trx_trp.ticket_a_bruto-n.trx_trp.ticket_a_tara):0),1)]),e("div",mw,[hw,e("div",bw,l(n.trx_trp.ticket_a_no_pol),1)]),e("div",yw,[xw,e("div",ww,l(n.trx_trp.ticket_a_supir),1)])])):O("",!0),["TBS","TBSK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",gw,[$w,e("div",kw,l(n.trx_trp.ticket_b_no),1)])):O("",!0),["TBS","TBSK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",jw,[e("div",Dw,[Sw,e("div",Tw,l(n.trx_trp.ticket_b_in_at?t(o)(n.trx_trp.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Cw,[Pw,e("div",Aw,l(n.trx_trp.ticket_b_out_at?t(o)(n.trx_trp.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Mw,[Ow,e("div",Nw,l(n.trx_trp.ticket_b_bruto?t(x)(n.trx_trp.ticket_b_bruto):0),1)]),e("div",Fw,[Iw,e("div",Yw,l(n.trx_trp.ticket_b_tara?t(x)(n.trx_trp.ticket_b_tara):0),1)]),e("div",Bw,[qw,e("div",Uw,l(n.trx_trp.ticket_b_bruto?t(x)(n.trx_trp.ticket_b_bruto-n.trx_trp.ticket_b_tara):0),1)]),e("div",Hw,[zw,e("div",Vw,l(n.trx_trp.ticket_b_no_pol),1)]),e("div",Lw,[Ew,e("div",Rw,l(n.trx_trp.ticket_b_supir),1)])])):O("",!0),["CPO","PK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",Jw,[Kw,e("div",Gw,l(n.trx_trp.ticket_b_in_at?t(o)(n.trx_trp.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):O("",!0),["CPO","PK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",Zw,[Ww,e("div",Qw,l(n.trx_trp.ticket_b_out_at?t(o)(n.trx_trp.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):O("",!0),["CPO","PK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",Xw,[e0,e("div",t0,l(t(x)(n.trx_trp.ticket_b_bruto||0)),1)])):O("",!0),["CPO","PK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",l0,[a0,e("div",s0,l(t(x)(n.trx_trp.ticket_b_tara||0)),1)])):O("",!0),["CPO","PK"].indexOf(n.trx_trp.jenis)>-1?(s(),_("div",o0,[n0,e("div",r0,l(t(x)(n.trx_trp.ticket_b_netto||0)),1)])):O("",!0),e("div",i0,[d0,e("div",_0,[u0,e("div",c0,l(t(x)(n.trx_trp.ticket_b_bruto-n.trx_trp.ticket_a_bruto||0)),1)]),e("div",p0,[v0,e("div",f0,l(t(x)(n.trx_trp.ticket_b_tara-n.trx_trp.ticket_a_tara||0)),1)]),e("div",m0,[h0,e("div",b0,l(t(x)(n.trx_trp.ticket_b_bruto-n.trx_trp.ticket_b_tara-(n.trx_trp.ticket_a_bruto-n.trx_trp.ticket_a_tara)||0)),1)])]),e("div",y0,[x0,e("div",w0,l(n.trx_trp.ticket_note),1)])]),g0,e("div",$0,[e("div",k0,[F(" Staff Logistik "),j0,F(" "+l(n.trx_trp.val_ticket_by?n.trx_trp.val_ticket_by.username:"-")+" ",1),D0,F(" ( "+l(n.trx_trp.val_ticket_at?t(o)(n.trx_trp.val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])])])]))}},Gye=Object.freeze(Object.defineProperty({__proto__:null,default:Ea},Symbol.toStringTag,{value:"Module"})),S0={key:0,class:"border-2 w-full"},T0=e("div",{class:"w-full font-bold text-center bg-blue-300"},"STANDBY ",-1),C0={class:"border-2"},P0={class:"flex w-full items-center justify-between"},A0={class:"flex items-center justify-center p-1"},M0=e("div",{class:"font-bold text-xs"},"Created At",-1),O0={class:"text-xs sm:flex"},N0={class:"sm:mr-1"},F0={class:"font-bold text-lg text-center"},I0={class:"flex items-center justify-center p-1"},Y0=e("div",{class:"font-bold text-xs"},"Updated At",-1),B0={class:"text-xs sm:flex"},q0={class:"sm:mr-1"},U0={class:"border-t-2 p-2 flex flex-row flex-wrap items-center justify-center"},H0={class:"flex flex-col items-center justify-center"},z0={class:"flex items-center justify-center"},V0={class:"font-bold italic ml-2"},L0={class:"flex flex-col relative"},E0={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},R0={class:"flex items-center justify-center"},J0={class:"px-1"},K0={class:"w-full flex items-center justify-center"},G0={class:"w-full sm:w-1/2 flex flex-wrap items-center justify-center border-2 rounded-lg"},Z0={class:"w-1/2"},W0={class:"w-1/2"},Q0={class:"font-bold"},X0={key:0,class:"w-full sm:w-1/2 flex items-center justify-center border-2 rounded-lg"},e2={class:"w-1/2"},t2={class:"w-1/2"},l2={class:"font-bold"},a2={class:"w-full flex flex-row flex-wrap"},s2={class:"w-full sm:w-7/12 md:w-1/2 p-2"},o2=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA ",-1),n2={class:"w-full text-sm"},r2=e("thead",null,[e("tr",null,[e("th",{class:"border-2 border-black p-2"},"Type"),e("th",{class:"border-2 border-black p-2"},"Deskripsi"),e("th",{class:"border-2 border-black p-2"},"Nominal")])],-1),i2={class:"border-2 border-black p-2"},d2={class:"border-2 border-black p-2"},_2={class:"border-2 border-black p-2 text-right"},u2={class:"w-full sm:w-5/12 md:w-1/2 p-2"},c2=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),p2={class:"w-full text-sm"},v2=e("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),f2={class:"border-2 border-black p-2 font-bold"},m2=e("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),h2={class:"border-2 border-black p-2 font-bold"},b2=e("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),y2={class:"border-2 border-black p-2 font-bold"},x2=e("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),w2={class:"border-2 border-black p-2 font-bold"},g2=e("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),$2={class:"border-2 border-black p-2 font-bold"},k2=e("td",{class:"border-2 border-black p-2"}," PV NO ",-1),j2={class:"border-2 border-black p-2 font-bold"},D2=e("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),S2={class:"border-2 border-black p-2 font-bold"},T2={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},C2={class:"w-full",role:"sticky"},P2={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},A2=e("thead",null,[e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ")]),e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[90px] !w-[90px] !max-w-[90px]"},"Tanggal"),e("th",{class:"!min-w-[55px] !w-[55px] !max-w-[55px]"},"Waktu"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Note"),e("th",{class:"!min-w-[70px] !w-[70px] !max-w-[70px]"},"Dibayar")])],-1),M2=["data-index"],O2={class:"cell"},N2={class:"w-full h-auto flex items-center justify-center relative"},F2={class:"cell"},I2={class:"w-full h-auto flex items-center justify-center relative"},Y2={class:"cell"},B2={style:{width:"60vw"},class:"h-auto flex items-center justify-center"},q2={class:"cell"},U2={class:"h-auto flex items-center justify-center"},H2={class:"w-full h-auto flex items-center justify-center"},z2={key:0,class:"text-3xl"},V2=["onClick"],L2=e("div",{class:"w-full text-xl font-bold text-center"}," APPROVER STANDBY TRIP",-1),E2={class:"w-full flex flex-wrap justify-center text-xs text-center"},R2={class:"border-2 p-1 m-1"},J2=e("br",null,null,-1),K2=e("br",null,null,-1),G2={class:"border-2 p-1 m-1"},Z2=e("br",null,null,-1),W2=e("br",null,null,-1),Q2={class:"border-2 p-1 m-1"},X2=e("br",null,null,-1),eg=e("br",null,null,-1),tg={class:"border-2 p-1 m-1"},lg=e("br",null,null,-1),ag=e("br",null,null,-1),sg={class:"border-2 p-1 m-1"},og=e("br",null,null,-1),ng=e("br",null,null,-1),rg={class:"border-2 p-1 m-1"},ig=e("br",null,null,-1),dg=e("br",null,null,-1),_g={class:"flex flex-wrap justify-between"},ug=["onClick"],cg=["onClick"],pg=["onClick"],vg={key:0,class:"text-xs font-bold"},fg=["onClick"],mg={key:0,class:"text-xs font-bold"},Ra={__name:"stt",props:{standby_trxs:{type:Array,required:!1},p_data:{type:Array,required:!0,default:[]},save_state:{type:Array,required:!0,default:[]},save_do:{type:Array,required:!0,default:[]}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d=ke("token"),a=u({}),r=(i,c)=>Y(this,null,function*(){o.save_state[i]="PROSES...",o.save_do[i]="VAL",$().loading_full=!0,a.value={};const h=new FormData;let k=[...o.standby_trxs[i].details];c=="paid"?k=k.map((w,m)=>(w.be_paid=1,w)):c=="nopaid"&&(k=k.map((w,m)=>(w.be_paid=0,w))),h.append("details",JSON.stringify(k)),h.append("id",o.standby_trxs[i].id),h.append("_method","PUT");let C="post";const{data:y,error:g,status:b}=yield W("/standby_trx_validasi",{method:C,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:h,retry:0});if($().loading_full=!1,b.value==="error"){o.save_state[i]="GAGAL",X().trigger(g,a);return}o.standby_trxs[i].val=y.value.val,o.standby_trxs[i].val_user=y.value.val_user,o.standby_trxs[i].val_by=y.value.val_by,o.standby_trxs[i].val_at=y.value.val_at,o.standby_trxs[i].val1=y.value.val1,o.standby_trxs[i].val1_user=y.value.val1_user,o.standby_trxs[i].val1_by=y.value.val1_by,o.standby_trxs[i].val1_at=y.value.val1_at,o.standby_trxs[i].val2=y.value.val2,o.standby_trxs[i].val2_user=y.value.val2_user,o.standby_trxs[i].val2_by=y.value.val2_by,o.standby_trxs[i].val2_at=y.value.val2_at,o.standby_trxs[i].val3=y.value.val3,o.standby_trxs[i].val3_user=y.value.val3_user,o.standby_trxs[i].val3_by=y.value.val3_by,o.standby_trxs[i].val3_at=y.value.val3_at,o.standby_trxs[i].val4=y.value.val4,o.standby_trxs[i].val4_user=y.value.val4_user,o.standby_trxs[i].val4_by=y.value.val4_by,o.standby_trxs[i].val4_at=y.value.val4_at,o.standby_trxs[i].val5=y.value.val5,o.standby_trxs[i].val5_user=y.value.val5_user,o.standby_trxs[i].val5_by=y.value.val5_by,o.standby_trxs[i].val5_at=y.value.val5_at,o.save_state[i]="BERHASIL";let v=o.p_data.map(w=>w.id).indexOf(o.standby_trxs[i].id);v>-1&&o.p_data.splice(v,1,ie({},o.standby_trxs[i]))}),p=i=>Y(this,null,function*(){o.save_state[i]="PROSES...",o.save_do[i]="UNVAL",$().loading_full=!0,a.value={};const c=new FormData;c.append("id",o.standby_trxs[i].id),c.append("_method","PUT");let h="post";const{data:k,error:C,status:y}=yield W("/standby_trx_unvalidasi",{method:h,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:c,retry:0});if($().loading_full=!1,y.value==="error"){o.save_state[i]="GAGAL",X().trigger(C,a);return}o.standby_trxs[i].val=k.value.val,o.standby_trxs[i].val_user=k.value.val_user,o.standby_trxs[i].val_by=k.value.val_by,o.standby_trxs[i].val_at=k.value.val_at,o.standby_trxs[i].val1=k.value.val1,o.standby_trxs[i].val1_user=k.value.val1_user,o.standby_trxs[i].val1_by=k.value.val1_by,o.standby_trxs[i].val1_at=k.value.val1_at,o.standby_trxs[i].val2=k.value.val2,o.standby_trxs[i].val2_user=k.value.val2_user,o.standby_trxs[i].val2_by=k.value.val2_by,o.standby_trxs[i].val2_at=k.value.val2_at,o.standby_trxs[i].val3=k.value.val3,o.standby_trxs[i].val3_user=k.value.val3_user,o.standby_trxs[i].val3_by=k.value.val3_by,o.standby_trxs[i].val3_at=k.value.val3_at,o.standby_trxs[i].val4=k.value.val4,o.standby_trxs[i].val4_user=k.value.val4_user,o.standby_trxs[i].val4_by=k.value.val4_by,o.standby_trxs[i].val4_at=k.value.val4_at,o.standby_trxs[i].val5=k.value.val5,o.standby_trxs[i].val5_user=k.value.val5_user,o.standby_trxs[i].val5_by=k.value.val5_by,o.standby_trxs[i].val5_at=k.value.val5_at,o.save_state[i]="BERHASIL";let g=o.p_data.map(b=>b.id).indexOf(o.standby_trxs[i].id);g>-1&&o.p_data.splice(g,1,ie({},o.standby_trxs[i]))});return(i,c)=>{const h=Gl,k=kl,C=Zl,y=jl,g=Cl,b=Xt,v=At,w=ft;return n.standby_trxs&&n.standby_trxs.length>0?(s(),_("div",S0,[T0,(s(!0),_(ye,null,Ae(n.standby_trxs,(m,S)=>{var A,D,M;return s(),_("div",C0,[e("div",P0,[e("div",A0,[j(h,{class:"text-xl mr-1"}),e("div",null,[M0,e("div",O0,[e("div",N0,l(m.created_at?t(x)(m.created_at).format("DD-MM-YYYY"):""),1),e("div",null,l(m.created_at?t(x)(m.created_at).format("H:m:s"):""),1)])])]),e("div",F0,"ID #"+l(m.id),1),e("div",I0,[j(h,{class:"text-xl mr-1"}),e("div",null,[Y0,e("div",B0,[e("div",q0,l(m.updated_at?t(x)(m.updated_at).format("DD-MM-YYYY"):""),1),e("div",null,l(m.updated_at?t(x)(m.updated_at).format("H:m:s"):""),1)])])])]),e("div",U0,[e("div",H0,[e("div",z0,[j(k,{class:"mr-1"}),F(" "+l(m.tanggal?t(x)(m.tanggal).format("DD-MM-YYYY"):"")+" ",1),e("span",V0,l(m.transition_type)+" "+l(m.transition_target),1)]),e("div",L0,[j(C,{class:"text-9xl"}),e("div",E0,l(m.no_pol),1)]),e("div",R0,[j(y),e("span",J0,l(m.xto),1)])]),e("div",K0,[e("div",G0,[e("div",Z0,[j(g,{class:"text-9xl"})]),e("div",W0,[e("div",Q0," DRIVER #"+l(m.supir_id),1),e("div",null,l(m.supir),1)])]),m.kernet_id?(s(),_("div",X0,[e("div",e2,[j(g,{class:"text-9xl"})]),e("div",t2,[e("div",l2," ASST DRIVER #"+l(m.kernet_id),1),e("div",null,l(m.kernet),1)])])):O("",!0)]),e("div",a2,[e("div",s2,[o2,e("table",n2,[r2,e("tbody",null,[e("tr",null,[e("td",i2,l((A=m.standby_mst_)==null?void 0:A.tipe),1),e("td",d2,l((D=m.standby_mst_)==null?void 0:D.name),1),e("td",_2,l(t(f)((M=m.standby_mst_)==null?void 0:M.amount)),1)])])])]),e("div",u2,[c2,e("table",p2,[e("tbody",null,[e("tr",null,[v2,e("td",f2,l(m.note_for_remarks),1)]),e("tr",null,[m2,e("td",h2,l(m.cost_center_code),1)]),e("tr",null,[b2,e("td",y2,l(m.cost_center_desc),1)]),e("tr",null,[x2,e("td",w2,l(m.pvr_no),1)]),e("tr",null,[g2,e("td",$2,l(t(f)(m.pvr_total||0)),1)]),e("tr",null,[k2,e("td",j2,l(m.pv_no),1)]),e("tr",null,[D2,e("td",S2,l(t(f)(m.pv_total||0)),1)])])])])]),e("div",T2,[e("div",C2,[e("table",P2,[A2,e("tbody",{ref_for:!0,ref:"to_move"},[(s(!0),_(ye,null,Ae(m.details,(T,q)=>(s(),_(ye,{key:q},[T.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":q},[e("td",null,l(q+1)+".",1),e("td",O2,[e("div",N2,l(t(x)(T.tanggal).format("DD-MM-YYYY")),1)]),e("td",F2,[e("div",I2,l(T.waktu.substring(0,5)),1)]),e("td",Y2,[e("div",B2,[j(b,{value:T.attachment_1_preview,onSetFile:P=>T.attachment_1=P,onSetPreview:P=>T.attachment_1_preview=P},null,8,["value","onSetFile","onSetPreview"])])]),e("td",q2,[e("div",U2,l(T.note),1)]),e("td",{class:Ue(["cell",!("useUtils"in i?i.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])||m.val5==1?"unselectable":""])},[e("div",H2,[!("useUtils"in i?i.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])||m.val5==1?(s(),_("div",z2,[T.be_paid==0?(s(),pe(v,{key:0,class:"text-red-800"})):(s(),pe(w,{key:1,class:"text-green-800"}))])):(s(),_("button",{key:1,type:"button",onClick:P=>T.be_paid=T.be_paid?0:1,class:Ue(["text-white w-auto rounded text-xl",T.be_paid?"bg-green-600":"bg-red-600"])},[T.be_paid==0?(s(),pe(v,{key:0})):(s(),pe(w,{key:1}))],10,V2))])],2)],8,M2)):O("",!0)],64))),128))],512)])])]),L2,e("div",E2,[e("div",R2,[F(" Kasir "),J2,F(" "+l(m.val_by&&m.val?m.val_by.username:"-")+" ",1),K2,F(" ( "+l(m.val_at&&m.val?t(x)(m.val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",G2,[F(" Mandor "),Z2,F(" "+l(m.val1_by&&m.val1?m.val1_by.username:"-")+" ",1),W2,F(" ( "+l(m.val1_at&&m.val1?t(x)(m.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",Q2,[F(" Staff Logistik "),X2,F(" "+l(m.val2_by&&m.val2?m.val2_by.username:"-")+" ",1),eg,F(" ( "+l(m.val2_at&&m.val2?t(x)(m.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",tg,[F(" Admin LogistiK "),lg,F(" "+l(m.val3_by&&m.val3?m.val3_by.username:"-")+" ",1),ag,F(" ( "+l(m.val3_at&&m.val3?t(x)(m.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",sg,[F(" SPV Logistik "),og,F(" "+l(m.val4_by&&m.val4?m.val4_by.username:"-")+" ",1),ng,F(" ( "+l(m.val4_at&&m.val4?t(x)(m.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",rg,[F(" MGR Logistik "),ig,F(" "+l(m.val5_by&&m.val5?m.val5_by.username:"-")+" ",1),dg,F(" ( "+l(m.val5_at&&m.val5?t(x)(m.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])]),e("div",_g,[("useUtils"in i?i.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])&&m.val5=="0"?(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-green-600 text-white text-xs rounded-sm",onClick:ze(T=>r(S,"paid"),["prevent"])}," Paid ",8,ug)):O("",!0),("useUtils"in i?i.useUtils:t(K))().checkPermissions(["standby_trx.detail.decide_paid"])&&m.val5=="0"?(s(),_("button",{key:1,type:"submit",name:"button",class:"w-36 m-1 bg-red-600 text-white text-xs rounded-sm",onClick:ze(T=>r(S,"nopaid"),["prevent"])}," NoPaid ",8,cg)):O("",!0),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:ze(T=>r(S),["prevent"])},[F(" Validasi "),n.save_do[S]=="VAL"&&n.save_state[S]!=""?(s(),_("div",vg,l(n.save_state[S]),1)):O("",!0)],8,pg),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:ze(T=>p(S),["prevent"])},[F(" Unvalidasi "),n.save_do[S]=="UNVAL"&&n.save_state[S]!=""?(s(),_("div",mg,l(n.save_state[S]),1)):O("",!0)],8,fg)])])])}),256))])):O("",!0)}}},Zye=Object.freeze(Object.defineProperty({__proto__:null,default:Ra},Symbol.toStringTag,{value:"Module"})),hg={class:"box-fixed"},bg={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white p-1"},yg={class:"w-full flex items-center justify-end"},xg={__name:"standby_trx_full",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},standby_trx:{type:Object,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,f=u(null);let d=y=>{y.key=="ArrowUp"&&C(),y.key=="ArrowDown"&&k()};Nl(()=>{document.removeEventListener("keydown",d)});const r=u(ie({},{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:"",uj_combine:{supir:[],kernet:[]}})),p=ke("token"),i=u([]),c=u([]),h=()=>Y(this,null,function*(){if(!x.standby_trx.trx_trp_id){x.fnClose();return}setTimeout(()=>{f.value.scrollTop=0},1),i.value=[],c.value=[],$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/standby_trx/full_view",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{trx_trp_id:x.standby_trx.trx_trp_id},retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}let v=y.value.data;r.value=v,r.value.standby_trxs.forEach(w=>{i.value.push(""),c.value.push("")})});je(()=>x.show,(y,g)=>{y==!0?(document.addEventListener("keydown",d),h()):document.removeEventListener("keydown",d)},{immediate:!0});const k=()=>{let y=x.p_data.map(g=>g.id).indexOf(x.id);y!=x.p_data.length-1&&(y++,o("setID",x.p_data[y].id),o("setIndex",y),setTimeout(()=>{h()},100))},C=()=>{let y=x.p_data.map(g=>g.id).indexOf(x.id);y!=0&&(y--,o("setID",x.p_data[y].id),o("setIndex",y),setTimeout(()=>{h()},100))};return(y,g)=>{const b=Xe,v=na,w=La,m=Ea,S=Ra,A=Sl,D=Tl;return ae((s(),_("section",hg,[e("div",null,[j(b,{title:"Form Full Transaction",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",bg,[e("div",{ref_key:"main_part",ref:f,class:"w-full flex flex-col items-center grow overflow-auto"},[j(v,{trx_trp:t(r)},null,8,["trx_trp"]),j(w,{trx_trp:t(r)},null,8,["trx_trp"]),j(m,{trx_trp:t(r)},null,8,["trx_trp"]),j(S,{standby_trxs:t(r).standby_trxs,p_data:n.p_data,save_do:t(c),save_state:t(i)},null,8,["standby_trxs","p_data","save_do","save_state"])],512),e("div",yg,[e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:g[0]||(g[0]=M=>C())},[j(A,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:g[1]||(g[1]=M=>n.fnClose())}," Cancel "),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:g[2]||(g[2]=M=>k())},[j(D,{class:"black"})])])])])],512)),[[Be,n.show]])}}},Ja=xg,Wye=Object.freeze(Object.defineProperty({__proto__:null,default:Ja},Symbol.toStringTag,{value:"Module"})),jt=()=>{const n=(a,r="",p=512)=>{const i=atob(a),c=[];for(let k=0;k<i.length;k+=p){const C=i.slice(k,k+p),y=new Array(C.length);for(let b=0;b<C.length;b++)y[b]=C.charCodeAt(b);const g=new Uint8Array(y);c.push(g)}return new Blob(c,{type:r})};return{toBlob:n,downloadFile:(a,r="download")=>{r=a.filename||r;const p=n(a.data,a.contentType),i=URL.createObjectURL(p);var c=document.createElement("a");c.href=i,c.download=r,document.body.appendChild(c),c.click(),document.body.removeChild(c)},viewFile:(a,r="download")=>{r=a.filename||r;const p=n(a.data,a.contentType),i=URL.createObjectURL(p);console.log(i),window.open(i,"_blank")},downloadTxt:(a,r)=>{var p=document.createElement("a");p.setAttribute("href","data:text/plain;charset=utf-8,"+encodeURIComponent(r)),p.setAttribute("download",a),p.style.display="none",document.body.appendChild(p),p.click(),document.body.removeChild(p)},printHtml:(a,r)=>{var i;document.getElementById("print_target")&&((i=document.getElementById("print_target"))==null||i.remove());let p=document.createElement("iframe");if(p.setAttribute("id","print_target"),p.style.cssText=`width:${r}px`,p.style.cssText="height:inherit",document.body.appendChild(p),p.contentWindow){p.contentWindow.document.open(),p.contentWindow.document.write(a),p.contentWindow.document.close();const c=p.contentWindow.document.querySelector("img");c?c.onload=function(){window.print()}:window.print()}window.onafterprint=function(){p!=null&&(document.body.removeChild(p),p=null),console.log("Printing has been completed or the print preview mode has been closed")}}}};const ra=n=>(nt("data-v-cd9d4453"),n=n(),rt(),n),wg={class:"w-full h-full flex flex-col"},gg={class:"w-full flex grow flex-col overflow-auto h-0"},$g={class:"w-full flex justify-between flex-wrap"},kg={class:"grow flex flex-wrap"},jg={class:"m-1"},Dg=Et('<option value="trx_not_done" data-v-cd9d4453>Undone</option><option value="trx_done" data-v-cd9d4453>Done</option><option value="deleted" data-v-cd9d4453>Trash</option><option value="all" data-v-cd9d4453>All</option><option value="req_deleted" data-v-cd9d4453>Req Delete</option>',5),Sg=[Dg],Tg=ra(()=>e("span",{class:"text-xs ml-1"}," Download ",-1)),Cg={class:"relative z-[1]"},Pg={class:"grow mb-5"},Ag=ra(()=>e("b",null,"tidak dapat dibatalkan lagi",-1)),Mg={class:"grow mb-5"},Og=ra(()=>e("b",null,"tidak dapat dibatalkan lagi",-1)),Ng={__name:"trx",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=Ye=>Ye.deleted==1?"!bg-red-400":(Ye.pvr_id>0||Ye.salary_paid_id>0)&&Ye.req_deleted==1?"!bg-yellow-300":Ye.pv_id>0||Ye.salary_paid_id>0?"!bg-blue-300":"",r=Ye=>(Ye.map(fe=>{fe.class_h=a(fe)}),Ye),p=u("trx_not_done");je(()=>p.value,Ye=>{Ze.value.map(fe=>{let ge=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(fe.key)>-1;return["all","deleted","req_deleted"].indexOf(Ye)>-1?ge&&(fe.tbl_show=1):ge&&(fe.tbl_show=0),fe}),A()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=u({from:"",to:""}),k=ke("token"),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let Ye=[];const[fe,ge]=yield Promise.all([W("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return fe.status.value!=="error"&&(Ye=r(fe.data.value.data)),fe.status.value==="error"?(X().trigger(fe.error),{standby_trxs:Ye}):($().loading_full=!1,{standby_trxs:Ye})}),"$rVBHTgwE0s")})),o=yield o,x(),o),y=u(C.value.standby_trxs||[]),g=u({field:"tanggal",by:"desc"}),b=u(-1),v=ne(()=>y.value[b.value]),w=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),m=()=>{i.like="";let Ye=JSON.parse(JSON.stringify($()._tv.global_keyword));Ye!=""&&(i.like=`id:%${Ye}%,transition_target:%${Ye}%,transition_type:%${Ye}%,standby_mst_name:%${Ye}%,standby_mst_tipe:%${Ye}%,supir:%${Ye}%,kernet:%${Ye}%,no_pol:%${Ye}%,xto:%${Ye}%,pvr_no:%${Ye}%,pv_no:%${Ye}%,pvr_no:%${Ye}%,tanggal:%${Ye}%,transition_target:%${Ye}%,cost_center_code:%${Ye}%`),i.sort="",g.value.field&&(i.sort=g.value.field+":"+g.value.by),i.date_from=h.value.from?f(h.value.from).format("YYYY-MM-DD"):"",i.date_to=h.value.to?f(h.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model)},S=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},w.value.may_get_data=!1,i.page=w.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:Ye,error:fe,status:ge}=yield W("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,w.value.may_get_data=!0,ge.value==="error"){X().trigger(fe,c);return}w.value.page==1?y.value=r(Ye.value.data):w.value.page>1&&(y.value=[...y.value,...r(Ye.value.data)]),Ye.value.data.length==0&&(w.value.is_last_record=!0),$()._tv.filter_box=!1}),A=()=>{b.value=-1,w.value.page=1,w.value.is_last_record=!1,m(),S()},D=u(!1),M=u(0),T=u(-1),q=()=>{M.value=0,T.value=-1,D.value=!0},{display:P}=Je();Dt(Je());const N=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=y.value[b.value].id,T.value=-1,D.value=!0)},L=u(!1),R=u(0),J=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=y.value[b.value].id,T.value=1,L.value=!0)},re=u(1),te=u(!1),ee=u(0),ce=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=y.value[b.value].id,re.value=1,te.value=!0)},U=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=y.value[b.value].id,T.value=0,L.value=!0)},I=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=y.value[b.value].id,T.value=-1,L.value=!0)},Z=u(!1),E=u({}),H=u(!1),ve=u(""),Ie=()=>Y(this,null,function*(){H.value&&(H.value=!1)}),le=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ve.value="",E.value={id:y.value[b.value].id,"no pol":y.value[b.value].no_pol,tujuan:y.value[b.value].xto},H.value=!0)};je(()=>ve.value,Ye=>{Ye.trim().length>0?Z.value=!0:Z.value=!1},{immediate:!1});const z=()=>Y(this,null,function*(){$().loading_full=!0;const Ye=new FormData;Ye.append("id",y.value[b.value].id),Ye.append("deleted_reason",ve.value),Ye.append("_method","DELETE");const{data:fe,error:ge,status:we}=yield W("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:Ye,retry:0});if($().loading_full=!1,we.value==="error"){X().trigger(ge);return}let be=ie({},y.value[b.value]);be.deleted=fe.value.deleted,be.deleted_user=fe.value.deleted_user,be.deleted_at=fe.value.deleted_at,be.deleted_by=fe.value.deleted_by,be.deleted_reason=fe.value.deleted_reason,be.class_h=a(be),p.value!="all"?y.value.splice(b.value,1):y.value.splice(b.value,1,ie({},be)),b.value=-1,H.value=!1}),G=u(!1),oe=u({}),se=u(!1),_e=u(""),ue=()=>Y(this,null,function*(){se.value&&(se.value=!1)}),B=()=>{b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(_e.value="",oe.value={id:y.value[b.value].id,"no pol":y.value[b.value].no_pol,tujuan:y.value[b.value].xto},se.value=!0)},de=u({}),V=u(!1),me=u(""),Me=()=>Y(this,null,function*(){V.value&&(V.value=!1)}),tt=()=>{var Ye;b.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(me.value="",de.value={id:y.value[b.value].id,"no pol":y.value[b.value].no_pol,tujuan:y.value[b.value].xto,permintaan:(Ye=y.value[b.value].approve_void_by)==null?void 0:Ye.username,alasan:y.value[b.value].approve_void_reason},V.value=!0)},ut=()=>Y(this,null,function*(){$().loading_full=!0;const Ye=new FormData;Ye.append("id",y.value[b.value].id),Ye.append("_method","DELETE");const{data:fe,error:ge,status:we}=yield W("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:Ye,retry:0});if($().loading_full=!1,we.value==="error"){X().trigger(ge);return}let be=ie({},y.value[b.value]);be.deleted=fe.value.deleted,be.deleted_user=fe.value.deleted_user,be.deleted_at=fe.value.deleted_at,be.deleted_by=fe.value.deleted_by,be.deleted_reason=fe.value.deleted_reason,be.class_h=a(be),p.value!="all"?y.value.splice(b.value,1):y.value.splice(b.value,1,ie({},be)),b.value=-1,V.value=!1});je(()=>_e.value,Ye=>{Ye.trim().length>0?G.value=!0:G.value=!1},{immediate:!1});const he=()=>Y(this,null,function*(){$().loading_full=!0;const Ye=new FormData;Ye.append("id",y.value[b.value].id),Ye.append("req_deleted_reason",_e.value),Ye.append("_method","DELETE");const{data:fe,error:ge,status:we}=yield W("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:Ye,retry:0});if($().loading_full=!1,we.value==="error"){X().trigger(ge);return}let be=ie({},y.value[b.value]);be.req_deleted=fe.value.req_deleted,be.req_deleted_user=fe.value.req_deleted_user,be.req_deleted_by=fe.value.req_deleted_by,be.req_deleted_at=fe.value.req_deleted_at,be.req_deleted_reason=fe.value.req_deleted_reason,be.class_h=a(be),p.value!="all"?y.value.splice(b.value,1):y.value.splice(b.value,1,ie({},be)),b.value=-1,se.value=!1}),{printHtml:Re}=jt(),Ne=()=>Y(this,null,function*(){if(b.value==-1){P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:Ye,error:fe,status:ge}=yield W("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:y.value[b.value].id},retry:0});if($().loading_full=!1,ge.value==="error"){X().trigger(fe);return}Re(Ye.value.html,318)}),Ze=u([{key:"no",label:"No",isai:!0},{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val_logistik",label:"Logistik",childs:[{key:"val2",label:"Staff",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Admin",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"SPV",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"Manager",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"detail_dates",label:"Detail Dates",type:"string"},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"standby_trx_dtl_tanggal",label:"Detail Date",type:"date",dateformat:"DD-MM-Y",filter_on:1,tbl_show:0,sort_off:1},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"standby_mst_name",label:"Nama Standby",filter_on:1,type:"string"},{key:"standby_mst_tipe",label:"Tipe Standby",filter_on:1,type:"string"},{key:"standby_mst_amount",label:"Nilai SB",class:" justify-end",type:"number"},{key:"details_count",label:"Jlh SB",class:" justify-end",type:"number"},{key:"sb_total",label:"Total SB",class:" justify-end",type:"number"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"trx_trp_id",label:"Trx Trp"},{key:"transition_target",label:"Pengalihan",filter_on:1,type:"select",select_item:$().list_pabrik},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Ve=ne(()=>["trx_not_done","all"].indexOf(p.value)>-1&&K().checkPermission("standby_trx.create")),Bt=ne(()=>b.value>-1&&y.value[b.value].trx_trp_id&&K().checkPermission("standby_trx.view")),Rt=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,0].indexOf(v.value.val)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&K().checkPermission("standby_trx.modify")),Jt=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&([void 0,""].indexOf(v.value.pvr_id)>-1&&(K().checkPermission("standby_trx.val")&&[void 0,0].indexOf(v.value.val)>-1||K().checkPermission("standby_trx.val1")&&[void 0,0].indexOf(v.value.val1)>-1)||v.value.pvr_id>-1&&K().checkPermission("standby_trx.val2")&&[void 0,0].indexOf(v.value.val2)>-1||v.value.pvr_id>-1&&K().checkPermission("standby_trx.val3")&&[void 0,0].indexOf(v.value.val3)>-1||v.value.pvr_id>-1&&K().checkPermission("standby_trx.val4")&&[void 0,0].indexOf(v.value.val4)>-1||v.value.pvr_id>-1&&K().checkPermission("standby_trx.val5")&&[void 0,0].indexOf(v.value.val5)>-1)),al=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,"",null].indexOf(v.value.salary_paid_id)>-1&&(K().checkPermission("standby_trx.unval")&&[1].indexOf(v.value.val)>-1||K().checkPermission("standby_trx.unval1")&&[1].indexOf(v.value.val1)>-1||K().checkPermission("standby_trx.unval2")&&[1].indexOf(v.value.val2)>-1||K().checkPermission("standby_trx.unval3")&&[1].indexOf(v.value.val3)>-1||K().checkPermission("standby_trx.unval4")&&[1].indexOf(v.value.val4)>-1||K().checkPermission("standby_trx.unval5")&&[1].indexOf(v.value.val5)>-1)),Kt=ne(()=>K().checkPermission("standby_trx.remove")&&b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1),Le=ne(()=>K().checkPermission("standby_trx.request_remove")&&b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&v.value.pvr_id!=""),Tt=ne(()=>K().checkPermission("standby_trx.approve_request_remove")&&b.value>-1&&v.value.deleted==0&&v.value.req_deleted==1&&v.value.val2==0&&v.value.val3==0&&v.value.val4==0&&v.value.val5==0),rl=ne(()=>K().checkPermission("standby_trx.preview_file")&&b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&v.value.val==1),{downloadFile:et,viewFile:yt}=jt(),Ol=()=>Y(this,null,function*(){m(),$().loading_full=!0,i.filter_status=p.value;const{data:Ye,error:fe,status:ge}=yield W("/standby_trx/download_excel",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,ge.value==="error"){X().trigger(fe);return}et(Ye.value)});return(Ye,fe)=>{const ge=_t,we=gt,be=Pt,Ce=Nt,lt=Zt,De=Hl,$e=Ft,xe=wl,st=_l,qt=Yt,qe=$t,ht=ft,Qe=Ot,wt=It,Gt=Ha,xl=za,cl=Ja;return s(),_("div",wg,[j(ge,{title:"List Transaction"}),e("div",gg,[e("div",$g,[e("div",kg,[e("div",jg,[ae(e("select",{class:"","onUpdate:modelValue":fe[0]||(fe[0]=He=>Ee(p)?p.value=He:null)},Sg,512),[[We,t(p)]])]),t(Ve)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[1]||(fe[1]=He=>q())},[j(we)])):O("",!0),t(Rt)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[2]||(fe[2]=He=>N())},[j(be)])):O("",!0),t(b)>-1?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[3]||(fe[3]=He=>I())},[j(Ce)])):O("",!0),t(Kt)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[4]||(fe[4]=He=>le())},[j(lt)])):O("",!0),t(Le)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[5]||(fe[5]=He=>B())},[j(De)])):O("",!0),t(Tt)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[6]||(fe[6]=He=>tt())},[j(De)])):O("",!0),t(Jt)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[7]||(fe[7]=He=>J())},[j($e)])):O("",!0),t(al)?(s(),_("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[8]||(fe[8]=He=>U())},[j(xe)])):O("",!0),t(Bt)?(s(),_("button",{key:8,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:fe[9]||(fe[9]=He=>ce())},[j(Ce)])):O("",!0),t(rl)?(s(),_("button",{key:9,type:"button",name:"button",class:"m-1 text-2xl",onClick:fe[10]||(fe[10]=He=>Ne())},[j(st)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:fe[11]||(fe[11]=He=>Ol())},[j(qt),F(),Tg])])]),j(Qe,{thead:t(Ze),selected:t(b),onSetSelected:fe[12]||(fe[12]=He=>b.value=He),tbody:t(y),fnCallData:S,scrolling:t(w),onSetScrollingPage:fe[13]||(fe[13]=He=>t(w).page=He),onDoFilter:fe[14]||(fe[14]=He=>A())},{val:Q(({item:He})=>[He.val?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val1:Q(({item:He})=>[He.val1?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val2:Q(({item:He})=>[He.val2?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val3:Q(({item:He})=>[He.val3?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val4:Q(({item:He})=>[He.val4?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val5:Q(({item:He})=>[He.val5?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),detail_dates:Q(({item:He})=>[(s(!0),_(ye,null,Ae(He.details,dt=>(s(),_("div",{class:Ue(["btn p-1 rounded-sm text-white text-xs mr-1 relative",[dt.attachment_1_type?"bg-green-600":"bg-red-500",dt.be_paid?"":"unpaid"]])},[e("div",Cg,l(t(f)(dt.tanggal).format("DD-MM")),1)],2))),256))]),standby_mst_name:Q(({item:He})=>{var dt;return[F(l((dt=He.standby_mst_)==null?void 0:dt.name),1)]}),standby_mst_tipe:Q(({item:He})=>{var dt;return[F(l((dt=He.standby_mst_)==null?void 0:dt.tipe),1)]}),salary_paid:Q(({item:He})=>{var dt,Pe;return[F(l(He.salary_paid?t(f)((dt=He.salary_paid)==null?void 0:dt.period_end).format("MM-Y")+"["+((Pe=He.salary_paid)==null?void 0:Pe.period_part)+"]":""),1)]}),standby_mst_amount:Q(({item:He})=>{var dt;return[F(" Rp. "+l(t(d)(((dt=He.standby_mst_)==null?void 0:dt.amount)||0)),1)]}),details_count:Q(({item:He})=>[F(l(t(d)(He.details.filter(dt=>dt.be_paid==1).length||0)),1)]),sb_total:Q(({item:He})=>{var dt;return[F(" Rp. "+l(t(d)(((dt=He.standby_mst_)==null?void 0:dt.amount)*He.details.filter(Pe=>Pe.be_paid==1).length||0)),1)]}),pvr_had_detail:Q(({item:He})=>[He.pvr_had_detail?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),deleted_by_username:Q(({item:He})=>{var dt;return[F(l((dt=He.deleted_by)==null?void 0:dt.username),1)]}),req_deleted_by_username:Q(({item:He})=>{var dt;return[F(l((dt=He.req_deleted_by)==null?void 0:dt.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(wt,{type:"delete",show:t(H),data:t(E),fnClose:Ie,fnConfirm:z,enabledOk:t(Z)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",Pg,[ae(e("textarea",{"onUpdate:modelValue":fe[15]||(fe[15]=He=>Ee(ve)?ve.value=He:null)},null,512),[[Te,t(ve)]])])]),_:1},8,["show","data","enabledOk"]),j(wt,{type:"custome",show:t(se),data:t(oe),fnClose:ue,fnConfirm:he,enabledOk:t(G)},{words:Q(()=>[F(" Data akan diproses dan "),Ag,F(", yakin untuk melanjutkan ? ")]),footer:Q(()=>[F(" Masukkan Alasan Permintaan Penghapusan: "),e("div",Mg,[ae(e("textarea",{"onUpdate:modelValue":fe[16]||(fe[16]=He=>Ee(_e)?_e.value=He:null)},null,512),[[Te,t(_e)]])])]),_:1},8,["show","data","enabledOk"]),j(wt,{type:"custome",show:t(V),data:t(de),fnClose:Me,fnConfirm:ut},{words:Q(()=>[F(" Data akan diproses dan "),Og,F(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),j(Gt,{show:t(D),fnClose:()=>{D.value=!1},id:t(M),p_data:t(y)},null,8,["show","fnClose","id","p_data"]),j(xl,{show:t(L),fnClose:()=>{L.value=!1},id:t(R),p_data:t(y),it_state:t(T),onSetID:fe[17]||(fe[17]=He=>R.value=He),onSetIndex:fe[18]||(fe[18]=He=>b.value=He)},null,8,["show","fnClose","id","p_data","it_state"]),j(cl,{show:t(te),fnClose:()=>{te.value=!1},id:t(ee),standby_trx:t(b)>-1?t(y)[t(b)]:{},p_data:t(y),it_state:t(re),onSetID:fe[19]||(fe[19]=He=>ee.value=He),onSetIndex:fe[20]||(fe[20]=He=>b.value=He)},null,8,["show","fnClose","id","standby_trx","p_data","it_state"])])}})}},Fg=Oe(Ng,[["__scopeId","data-v-cd9d4453"]]),Qye=Object.freeze(Object.defineProperty({__proto__:null,default:Fg},Symbol.toStringTag,{value:"Module"}));const el=n=>(nt("data-v-602c9106"),n=n(),rt(),n),Ig={class:"box-fixed"},Yg={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Bg={class:"w-full"},qg={class:"w-full flex flex-wrap p-3 items-center text-xs"},Ug=el(()=>e("label",{for:""},"ID",-1)),Hg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},zg=el(()=>e("label",{for:""},"U.jalan Per",-1)),Vg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Lg=el(()=>e("label",{for:""},"Jenis",-1)),Eg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Rg=el(()=>e("label",{for:""},"Supir",-1)),Jg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Kg={key:0},Gg=el(()=>e("label",{for:""},"Kernet",-1)),Zg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Wg=el(()=>e("label",{for:""},"No Pol",-1)),Qg={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Xg=el(()=>e("label",{for:""},"Tujuan",-1)),e$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},t$=el(()=>e("label",{for:""},"Tipe",-1)),l$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},a$=el(()=>e("label",{for:""},"Info",-1)),s$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},o$={class:"w-full flex flex-wrap items-center grow overflow-auto"},n$={class:"w-full sm:w-1/2 text-center p-1"},r$={class:"border-[1px] p-1"},i$=el(()=>e("label",{class:"font-bold"},"Berangkat ",-1)),d$={class:"text-red-500"},_$={class:"text-red-500"},u$={key:0,class:"flex flex-wrap"},c$={class:"w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 p-1"},p$=["src","onClick"],v$={class:"w-full sm:w-1/2 text-center p-1"},f$={class:"border-[1px] p-1"},m$=el(()=>e("label",{class:"font-bold"},"Tiba ",-1)),h$={class:"text-red-500"},b$={class:"text-red-500"},y$={class:"w-full sm:w-1/2 text-center p-1"},x$={class:"border-[1px] p-1"},w$=el(()=>e("label",{class:"font-bold"},"Kembali ",-1)),g$={class:"text-red-500"},$$={class:"text-red-500"},k$={class:"w-full sm:w-1/2 text-center p-1"},j$={class:"border-[1px] p-1"},D$=el(()=>e("label",{class:"font-bold"},"Sampai ",-1)),S$={class:"text-red-500"},T$={class:"text-red-500"},C$={class:"w-full p-1"},P$=el(()=>e("label",{for:""}," Note ",-1)),A$={class:"w-full flex items-center justify-end"},M$={__name:"trx_trp_absen",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},p_data:{type:Array,required:!0,default:[]},id:{type:Number,required:!1,default:0}},setup(n){const o=n,{$moment:x}=Ke(),d=u(ie({},{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:""})),a=u({}),r=ke("token"),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:c,error:h,status:k}=yield W("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,k.value==="error"){X().trigger(h);return}d.value=c.value.data});je(()=>o.show,(c,h)=>{c==!0&&p()},{immediate:!0});const i=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const c=new FormData;if(d.value.img_leave){let b=d.value.img_leaves.map(v=>v.gambar).indexOf(d.value.img_leave);b==-1?c.append("img_leave","ada"):c.append("img_leave",d.value.img_leaves[b].id)}else c.append("img_leave","");c.append("img_leave_file",d.value.img_leave_file),c.append("img_leave_ts",d.value.img_leave_ts?x(d.value.img_leave_ts).format("YYYY-MM-DD HH:mm"):""),c.append("img_arrive",d.value.img_arrive?"ada":""),c.append("img_arrive_file",d.value.img_arrive_file),c.append("img_arrive_ts",d.value.img_arrive_ts?x(d.value.img_arrive_ts).format("YYYY-MM-DD HH:mm"):""),c.append("img_return",d.value.img_return?"ada":""),c.append("img_return_file",d.value.img_return_file),c.append("img_return_ts",d.value.img_return_ts?x(d.value.img_return_ts).format("YYYY-MM-DD HH:mm"):""),c.append("img_till",d.value.img_till?"ada":""),c.append("img_till_file",d.value.img_till_file),c.append("img_till_ts",d.value.img_till_ts?x(d.value.img_till_ts).format("YYYY-MM-DD HH:mm"):""),c.append("ritase_note",d.value.ritase_note);let h="post",k=o.id;k==0||(c.append("id",k),c.append("_method","PUT"));const{data:C,error:y,status:g}=yield W("/trx_trp/absen",{method:h,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:c,retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y,a);return}if(d.value.ritase_leave_at=d.value.img_leave_ts,d.value.ritase_arrive_at=d.value.img_arrive_ts,d.value.ritase_return_at=d.value.img_return_ts,d.value.ritase_till_at=d.value.img_till_ts,d.value.updated_at=C.value.updated_at,o.id<=0)d.value.id=C.value.id,d.value.created_at=C.value.created_at,o.p_data.unshift(d.value);else{let b=o.p_data.map(v=>v.id).indexOf(o.id);b>-1&&o.p_data.splice(b,1,ie({},d.value))}o.fnClose()});return(c,h)=>{var b;const k=Xe,C=Vt("vue-date-picker"),y=zt,g=Xt;return ae((s(),_("section",Ig,[e("div",null,[j(k,{title:"Form Check Absen",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Yg,[e("div",Bg,[e("div",qg,[e("div",null,[Ug,e("div",Hg,l(t(d).id),1)]),e("div",null,[zg,e("div",Vg,l(t(d).tanggal?t(x)(t(d).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",null,[Lg,e("div",Eg,l(t(d).jenis),1)]),e("div",null,[Rg,e("div",Jg,l(t(d).supir),1)]),t(d).kernet?(s(),_("div",Kg,[Gg,e("div",Zg,l(t(d).kernet),1)])):O("",!0),e("div",null,[Wg,e("div",Qg,l(t(d).no_pol),1)]),e("div",null,[Xg,e("div",e$,l(t(d).xto),1)]),e("div",null,[t$,e("div",l$,l(t(d).tipe),1)]),e("div",null,[a$,e("div",s$,l((b=t(d).uj)==null?void 0:b.asst_opt),1)])])]),e("div",o$,[e("div",n$,[e("div",r$,[i$,j(y,null,{default:Q(()=>[j(C,{modelValue:t(d).img_leave_ts,"onUpdate:modelValue":h[0]||(h[0]=v=>t(d).img_leave_ts=v),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Berangkat"},null,8,["modelValue"])]),_:1}),e("p",d$,l(t(a).img_leave_ts),1),j(g,{value:t(d).img_leave,onSetFile:h[1]||(h[1]=v=>t(d).img_leave_file=v),onSetPreview:h[2]||(h[2]=v=>t(d).img_leave=v),can_remove:!0},null,8,["value"]),e("p",_$,l(t(a).img_leave),1),t(d).img_leaves.length>1?(s(),_("div",u$,[(s(!0),_(ye,null,Ae(t(d).img_leaves,v=>(s(),_("div",c$,[e("img",{class:"w-full cursor-pointer",src:v.gambar,onClick:w=>(t(d).img_leave=v.gambar,t(d).img_leave_file="")},null,8,p$)]))),256))])):O("",!0)])]),e("div",v$,[e("div",f$,[m$,j(y,null,{default:Q(()=>[j(C,{modelValue:t(d).img_arrive_ts,"onUpdate:modelValue":h[3]||(h[3]=v=>t(d).img_arrive_ts=v),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Tiba"},null,8,["modelValue"])]),_:1}),e("p",h$,l(t(a).img_arrive_ts),1),j(g,{value:t(d).img_arrive,onSetFile:h[4]||(h[4]=v=>t(d).img_arrive_file=v),onSetPreview:h[5]||(h[5]=v=>t(d).img_arrive=v),can_remove:!0},null,8,["value"]),e("p",b$,l(t(a).img_arrive),1)])]),e("div",y$,[e("div",x$,[w$,j(y,null,{default:Q(()=>[j(C,{modelValue:t(d).img_return_ts,"onUpdate:modelValue":h[6]||(h[6]=v=>t(d).img_return_ts=v),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Kembali"},null,8,["modelValue"])]),_:1}),e("p",g$,l(t(a).img_return_ts),1),j(g,{value:t(d).img_return,onSetFile:h[7]||(h[7]=v=>t(d).img_return_file=v),onSetPreview:h[8]||(h[8]=v=>t(d).img_return=v),can_remove:!0},null,8,["value"]),e("p",$$,l(t(a).img_return),1)])]),e("div",k$,[e("div",j$,[D$,j(y,null,{default:Q(()=>[j(C,{modelValue:t(d).img_till_ts,"onUpdate:modelValue":h[9]||(h[9]=v=>t(d).img_till_ts=v),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Sampai"},null,8,["modelValue"])]),_:1}),e("p",S$,l(t(a).img_till_ts),1),j(g,{value:t(d).img_till,onSetFile:h[10]||(h[10]=v=>t(d).img_till_file=v),onSetPreview:h[11]||(h[11]=v=>t(d).img_till=v),can_remove:!0},null,8,["value"]),e("p",T$,l(t(a).img_till),1)])]),e("div",C$,[P$,ae(e("textarea",{"onUpdate:modelValue":h[12]||(h[12]=v=>t(d).ritase_note=v)},null,512),[[Te,t(d).ritase_note]])])]),e("div",A$,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:h[13]||(h[13]=v=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:h[14]||(h[14]=ze(v=>i(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},Ka=Oe(M$,[["__scopeId","data-v-602c9106"]]),Xye=Object.freeze(Object.defineProperty({__proto__:null,default:Ka},Symbol.toStringTag,{value:"Module"}));const ul=n=>(nt("data-v-c54d7857"),n=n(),rt(),n),O$={class:"box-fixed"},N$={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},F$={class:"w-full flex flex-col items-center grow overflow-auto"},I$={class:"w-full"},Y$={class:"w-full flex flex-wrap p-3 items-center text-xs"},B$=ul(()=>e("label",{for:""},"ID",-1)),q$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},U$=ul(()=>e("label",{for:""},"U.jalan Per",-1)),H$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},z$=ul(()=>e("label",{for:""},"Jenis",-1)),V$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},L$=ul(()=>e("label",{for:""},"Supir",-1)),E$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},R$={key:0},J$=ul(()=>e("label",{for:""},"Kernet",-1)),K$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},G$=ul(()=>e("label",{for:""},"No Pol",-1)),Z$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},W$=ul(()=>e("label",{for:""},"Tujuan",-1)),Q$={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},X$=ul(()=>e("label",{for:""},"Tipe",-1)),ek={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},tk={class:"w-full flex flex-wrap items-center grow overflow-auto"},lk={class:"w-full sm:w-1/2 text-center p-1"},ak={class:"border-[1px] p-1"},sk={class:"font-bold"},ok={class:"w-full flex justify-center items-center"},nk=["src"],rk={class:"w-full sm:w-1/2 text-center p-1"},ik={class:"border-[1px] p-1"},dk={class:"border-[1px] p-1"},_k={class:"font-bold"},uk={class:"w-full flex justify-center items-center"},ck=["src"],pk={class:"w-full sm:w-1/2 text-center p-1"},vk={class:"border-[1px] p-1"},fk={class:"border-[1px] p-1"},mk={class:"font-bold"},hk={class:"w-full flex justify-center items-center"},bk=["src"],yk={class:"w-full sm:w-1/2 text-center p-1"},xk={class:"border-[1px] p-1"},wk={class:"border-[1px] p-1"},gk={class:"font-bold"},$k={class:"w-full flex justify-center items-center"},kk=["src"],jk={class:"w-full p-1"},Dk=ul(()=>e("label",{for:""}," Note ",-1)),Sk={class:"card-border"},Tk={class:"w-full flex items-center justify-end"},Ck={class:"w-full flex flex-wrap p-3 items-center"},Pk=ul(()=>e("div",null," Di Validasi oleh : ",-1)),Ak={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Mk={key:0},Ok={key:1},Nk={key:2},Fk=ul(()=>e("div",null," Validasi ",-1)),Ik={key:0,class:"text-xs font-bold"},Yk={__name:"trx_trp_absen_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,{$moment:f}=Ke();let d=g=>{g.key=="ArrowUp"&&y(),g.key=="ArrowDown"&&C()};Nl(()=>{document.removeEventListener("keydown",d)});const r=u(ie({},{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:""})),p=ke("token"),i=u(null),c=u(""),h=()=>Y(this,null,function*(){c.value="PROSES...",$().loading_full=!0;const g=new FormData;let b="post",v=x.id;v==0||(g.append("id",v),g.append("_method","PUT"));const{data:w,error:m,status:S}=yield W("/trx_trp/absen/validasi",{method:b,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:g,retry:0});if($().loading_full=!1,S.value==="error"){c.value="GAGAL",X().trigger(m);return}r.value.ritase_val=w.value.ritase_val,r.value.ritase_val_by=w.value.ritase_val_by,r.value.ritase_val_at=w.value.ritase_val_at,r.value.ritase_val1=w.value.ritase_val1,r.value.ritase_val1_by=w.value.ritase_val1_by,r.value.ritase_val1_at=w.value.ritase_val1_at,r.value.ritase_val2=w.value.ritase_val2,r.value.ritase_val2_by=w.value.ritase_val2_by,r.value.ritase_val2_at=w.value.ritase_val2_at;let A=x.p_data.map(D=>D.id).indexOf(x.id);A>-1&&x.p_data.splice(A,1,ie({},r.value)),c.value="BERHASIL"}),k=()=>Y(this,null,function*(){c.value="",$().loading_full=!0;const{data:g,error:b,status:v}=yield W("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}r.value=g.value.data});je(()=>x.show,(g,b)=>{g==!0?(document.addEventListener("keydown",d),x.is_view==!1&&setTimeout(()=>{i.value.focus()},1),k()):document.removeEventListener("keydown",d)},{immediate:!0});const C=()=>{let g=x.p_data.map(b=>b.id).indexOf(x.id);g!=x.p_data.length-1&&(g++,o("setID",x.p_data[g].id),o("setIndex",g),setTimeout(()=>{k()},100))},y=()=>{let g=x.p_data.map(b=>b.id).indexOf(x.id);g!=0&&(g--,o("setID",x.p_data[g].id),o("setIndex",g),setTimeout(()=>{k()},100))};return(g,b)=>{const v=Xe,w=Sl,m=Tl;return ae((s(),_("section",O$,[e("div",null,[j(v,{title:"Form Transaction Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",N$,[e("div",F$,[e("div",I$,[e("div",Y$,[e("div",null,[B$,e("div",q$,l(t(r).id),1)]),e("div",null,[U$,e("div",H$,l(t(r).tanggal?t(f)(t(r).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",null,[z$,e("div",V$,l(t(r).jenis),1)]),e("div",null,[L$,e("div",E$,l(t(r).supir),1)]),t(r).kernet?(s(),_("div",R$,[J$,e("div",K$,l(t(r).kernet),1)])):O("",!0),e("div",null,[G$,e("div",Z$,l(t(r).no_pol),1)]),e("div",null,[W$,e("div",Q$,l(t(r).xto),1)]),e("div",null,[X$,e("div",ek,l(t(r).tipe),1)])])]),e("div",tk,[e("div",lk,[e("div",ak,[e("label",sk,"Berangkat : "+l(t(r).img_leave_ts?t(f)(t(r).img_leave_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(t(r).img_leave_is_manual?"(Manual)":"(System)"),1),e("div",ok,[e("img",{src:t(r).img_leave,alt:""},null,8,nk)])])]),e("div",rk,[e("div",ik,[e("div",dk,[e("label",_k,"Tiba : "+l(t(r).img_arrive_ts?t(f)(t(r).img_arrive_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(t(r).img_arrive_is_manual?"(Manual)":"(System)"),1),e("div",uk,[e("img",{src:t(r).img_arrive,alt:""},null,8,ck)])])])]),e("div",pk,[e("div",vk,[e("div",fk,[e("label",mk,"Kembali : "+l(t(r).img_return_ts?t(f)(t(r).img_return_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(t(r).img_return_is_manual?"(Manual)":"(System)"),1),e("div",hk,[e("img",{src:t(r).img_return,alt:""},null,8,bk)])])])]),e("div",yk,[e("div",xk,[e("div",wk,[e("label",gk,"Sampai : "+l(t(r).img_till_ts?t(f)(t(r).img_till_ts).format("DD-MM-YYYY HH:mm"):"")+" "+l(t(r).img_till_is_manual?"(Manual)":"(System)"),1),e("div",$k,[e("img",{src:t(r).img_till,alt:""},null,8,kk)])])])]),e("div",jk,[Dk,e("div",Sk,l(t(r).ritase_note),1)])])]),e("div",Tk,[e("div",Ck,[Pk,t(r).ritase_val||t(r).ritase_val1||t(r).ritase_val2?(s(),_("div",Ak,[t(r).ritase_val?(s(),_("div",Mk," App 1 : "+l(t(r).ritase_val_by.username)+" ( "+l(t(r).ritase_val_at?t(f)(t(r).ritase_val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).ritase_val1?(s(),_("div",Ok," App 2 : "+l(t(r).ritase_val1_by.username)+" ( "+l(t(r).ritase_val1_at?t(f)(t(r).ritase_val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).ritase_val2?(s(),_("div",Nk," App 3 : "+l(t(r).ritase_val2_by.username)+" ( "+l(t(r).ritase_val2_at?t(f)(t(r).ritase_val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:b[0]||(b[0]=S=>y())},[j(w,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:b[1]||(b[1]=S=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm flex flex-col items-center justify-center",onClick:b[2]||(b[2]=ze(S=>h(),["prevent"]))},[Fk,t(c)!=""?(s(),_("div",Ik,l(t(c)),1)):O("",!0)],512)):O("",!0),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:b[3]||(b[3]=S=>C())},[j(m,{class:"black"})])])])])],512)),[[Be,n.show]])}}},Ga=Oe(Yk,[["__scopeId","data-v-c54d7857"]]),exe=Object.freeze(Object.defineProperty({__proto__:null,default:Ga},Symbol.toStringTag,{value:"Module"}));const bl=n=>(nt("data-v-8cd5b55c"),n=n(),rt(),n),Bk={class:"box-fixed"},qk={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Uk={class:"w-full flex flex-col items-center grow overflow-auto"},Hk={class:"w-full flex flex-row flex-wrap"},zk={class:"w-full grid grid-cols-1 lg:grid-cols-2 p-1 gap-1 relative"},Vk={class:"relative w-full"},Lk=["onClick"],Ek=["src"],Rk={class:"w-full flex items-center justify-end"},Jk={class:"w-full flex flex-wrap p-3 items-center text-xs"},Kk=bl(()=>e("label",{for:""},"U.jalan Per",-1)),Gk={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Zk=bl(()=>e("label",{for:""},"Jenis",-1)),Wk={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Qk=bl(()=>e("label",{for:""},"Supir",-1)),Xk={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},e3={key:0},t3=bl(()=>e("label",{for:""},"Kernet",-1)),l3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},a3=bl(()=>e("label",{for:""},"No Pol",-1)),s3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},o3=bl(()=>e("label",{for:""},"Tujuan",-1)),n3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},r3=bl(()=>e("label",{for:""},"Info",-1)),i3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},d3=bl(()=>e("label",{for:""},"Tipe",-1)),_3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},u3=bl(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),c3={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},p3={__name:"trx_absen",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},p_data:{type:Array,required:!0,default:[]},index:{type:Number,required:!1,default:0}},setup(n){const o=n,{pointFormat:x}=K(),d=u(ie({},{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,trx_absens:[]})),a=ke("token"),r=()=>Y(this,null,function*(){$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.p_data[o.index].id},retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}d.value=y.value.data,d.value.trx_absens=d.value.trx_absens.map(v=>(v.checked=0,v))});je(()=>o.show,(y,g)=>{y==!0&&r()},{immediate:!0});const{display:p}=Je(),i=u({}),c=u(!1),h=()=>Y(this,null,function*(){c.value&&(c.value=!1)}),k=()=>{let y=d.value.trx_absens.filter(g=>g.checked==1).length;y<=0?p({show:!0,status:"Failed",message:"Silahkan Pilih Gambar Terlebih Dahulu"}):(i.value={"jumlah gambar yang akan di hapus":y},c.value=!0)},C=()=>Y(this,null,function*(){$().loading_full=!0;const y=new FormData;y.append("id",o.p_data[o.index].id),y.append("ids",JSON.stringify(d.value.trx_absens.filter(w=>w.checked))),y.append("_method","DELETE");const{data:g,error:b,status:v}=yield W("/trx_trp_absen",{method:"post",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:y,retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}o.p_data[o.index].trx_absens=d.value.trx_absens.filter(w=>w.checked==0),c.value=!1,o.fnClose()});return(y,g)=>{var m;const b=Xe,v=ft,w=It;return s(),_(ye,null,[ae(e("section",Bk,[e("div",null,[j(b,{title:"Form Check Absen",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",qk,[e("div",Uk,[e("div",Hk,[e("div",zk,[(s(!0),_(ye,null,Ae(t(d).trx_absens,S=>(s(),_("div",Vk,[e("div",{class:Ue(["w-7 h-7 ring-1 ring-black absolute right-3 top-3 border-2 border-white flex items-center justify-center text-white",S.checked?"bg-red-600":"bg-transparent"]),onClick:A=>S.checked=!S.checked},[S.checked?(s(),pe(v,{key:0,class:"text-xl"})):O("",!0)],10,Lk),e("img",{src:S.gambar,class:"max-w-full max-h-full w-full"},null,8,Ek)]))),256))])])]),e("div",Rk,[e("div",Jk,[e("div",null,[Kk,e("div",Gk,l(t(d).tanggal),1)]),e("div",null,[Zk,e("div",Wk,l(t(d).jenis),1)]),e("div",null,[Qk,e("div",Xk,l(t(d).supir),1)]),t(d).kernet?(s(),_("div",e3,[t3,e("div",l3,l(t(d).kernet),1)])):O("",!0),e("div",null,[a3,e("div",s3,l(t(d).no_pol),1)]),e("div",null,[o3,e("div",n3,l(t(d).xto),1)]),e("div",null,[r3,e("div",i3,l((m=t(d).uj)==null?void 0:m.asst_opt),1)]),e("div",null,[d3,e("div",_3,l(t(d).tipe),1)]),e("div",null,[u3,e("div",c3,l(t(x)(t(d).amount||0)),1)])]),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-red-600 text-white rounded-sm",onClick:g[0]||(g[0]=ze(S=>k(),["prevent"]))}," Delete "),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:g[1]||(g[1]=S=>n.fnClose())}," Cancel ")])])])],512),[[Be,n.show]]),j(w,{type:"delete",show:t(c),data:t(i),fnClose:h,fnConfirm:C,info_type:"custome"},{info:Q(()=>[F(" Ada "+l(t(d).trx_absens.filter(S=>S.checked).length)+" Gambar yang akan di hapus. ",1)]),_:1},8,["show","data"])],64)}}},Wl=Oe(p3,[["__scopeId","data-v-8cd5b55c"]]),txe=Object.freeze(Object.defineProperty({__proto__:null,default:Wl},Symbol.toStringTag,{value:"Module"})),v3={class:"w-full h-full flex flex-col"},f3={class:"w-full flex grow flex-col overflow-auto h-0"},m3={class:"w-full flex justify-between flex-wrap"},h3={class:"grow flex"},b3={class:"m-1"},y3=Et('<option value="Undone">Undone</option><option value="Done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),x3=[y3],w3=e("span",{class:"text-xs ml-1"}," Download ",-1),g3={class:"flex"},$3={key:0,class:"bg-red-700 rounded-sm"},k3={key:1,class:"bg-green-500 rounded-sm"},j3={key:0,class:"bg-red-700 rounded-sm"},D3={key:1,class:"bg-green-500 rounded-sm"},S3={key:0,class:"bg-red-700 rounded-sm"},T3={key:1,class:"bg-green-500 rounded-sm"},C3={key:0,class:"bg-red-700 rounded-sm"},P3={key:1,class:"bg-green-500 rounded-sm"},A3={__name:"absen",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d=le=>le.deleted==1?"!bg-red-400":le.req_deleted==1?"!bg-yellow-300":le.ritase_val2==1?"!bg-blue-300":"",a=le=>(le.map(z=>{z.class_h=d(z)}),le);let r=u({clearCheckBox:!1});const p=u("Undone");je(()=>p.value,le=>{U.value.map(z=>{let G=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(z.key)>-1;return["all","deleted","req_deleted"].indexOf(le)>-1?G&&(z.tbl_show=1):G&&(z.tbl_show=0),z}),A()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=u({from:"",to:""}),k=ke("token"),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let le=[];const[z,G]=yield Promise.all([W("/trx_trp/absens",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return z.status.value!=="error"&&(le=a(z.data.value.data)),z.status.value==="error"?(X().trigger(z.error),{trx_trps:le}):($().loading_full=!1,{trx_trps:le})}),"$Tkqpaz2JeJ")})),o=yield o,x(),o),y=u(C.value.trx_trps||[]);u([]),u(!1);const g=u({field:"tanggal",by:"desc"}),b=u(-1),v=ne(()=>y.value[b.value]),w=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),m=()=>{i.like="";let le=JSON.parse(JSON.stringify($()._tv.global_keyword));le!=""&&(i.like=`id:%${le}%,xto:%${le}%,jenis:%${le}%,pv_no:%${le}%,ticket_a_no:%${le}%,ticket_b_no:%${le}%,no_pol:%${le}%,supir:%${le}%,kernet:%${le}%,cost_center_code:%${le}%,cost_center_desc:%${le}%,pvr_no:%${le}%,tanggal:%${le}%,transition_target:%${le}%,uj_asst_opt:%${le}%`),i.sort="",g.value.field&&(i.sort=g.value.field+":"+g.value.by),i.date_from=h.value.from?f(h.value.from).format("YYYY-MM-DD"):"",i.date_to=h.value.to?f(h.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model)},S=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},w.value.may_get_data=!1,i.page=w.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:le,error:z,status:G}=yield W("/trx_trp/absens",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,w.value.may_get_data=!0,G.value==="error"){X().trigger(z,c);return}w.value.page==1?y.value=a(le.value.data):w.value.page>1&&(y.value=[...y.value,...a(le.value.data)]),le.value.data.length==0&&(w.value.is_last_record=!0),$()._tv.filter_box=!1}),A=()=>{b.value=-1,w.value.page=1,w.value.is_last_record=!1,m(),S()},D=u(!1),M=u(0),{display:T}=Je(),q=()=>{b.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=y.value[b.value].id,D.value=!0)},P=u(!1),N=u(0),L=u(!1),R=()=>{b.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=y.value[b.value].id,P.value=!0,L.value=!1)},J=()=>{b.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=y.value[b.value].id,P.value=!0,L.value=!0)},re=u(!1),te=u(0),ee=u([]),ce=()=>Y(this,null,function*(){$().loading_full=!0;const le=new FormData;le.append("ids",JSON.stringify(ee.value)),le.append("_method","PUT");const{data:z,error:G,status:oe}=yield W("/trx_trp/absen/clear_valval1",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:le,retry:0});if($().loading_full=!1,oe.value==="error"){X().trigger(G);return}z.value.val_lists.forEach(se=>{let _e=y.value.map(ue=>ue.id).indexOf(se.id);if(_e>-1){let ue=y.value[_e];ue.ritase_val=se.ritase_val,ue.ritase_val1=se.ritase_val1,ue.ritase_val2=se.ritase_val2,ue.updated_at=se.updated_at,y.value.splice(_e,1,ie({},ue))}}),r.value.clearCheckBox=!0}),U=u([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"ritase_val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"ritase_val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"ritase_val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"rla",label:"B"},{key:"raa",label:"T"},{key:"rra",label:"K"},{key:"rta",label:"S"},{key:"ritase_leave_at",label:"Berangkat"},{key:"ritase_arrive_at",label:"Tiba"},{key:"ritase_return_at",label:"Kembali"},{key:"ritase_till_at",label:"Sampai"},{key:"ritase_note",label:"Note"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),I=ne(()=>b.value>-1&&K().checkPermission("trp_trx.absen.view")),Z=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,0].indexOf(v.value.ritase_val)>-1&&K().checkPermission("trp_trx.absen.modify")),E=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&K().checkPermissions(["trp_trx.absen.val","trp_trx.absen.val1","trp_trx.absen.val2"])),{downloadFile:H,viewFile:ve}=jt(),Ie=()=>Y(this,null,function*(){m(),$().loading_full=!0,i.filter_status=p.value;const{data:le,error:z,status:G}=yield W("/trx_trp/absen/download_excel",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,G.value==="error"){X().trigger(z);return}H(le.value)});return(le,z)=>{const G=_t,oe=Pt,se=Nt,_e=Ft,ue=Yt,B=$t,de=ft,V=At,me=Ot,Me=Ka,tt=Ga,ut=Wl;return s(),_("div",v3,[j(G,{title:"List Transaction"}),e("div",f3,[e("div",m3,[e("div",h3,[e("div",b3,[ae(e("select",{class:"","onUpdate:modelValue":z[0]||(z[0]=he=>Ee(p)?p.value=he:null)},x3,512),[[We,t(p)]])]),t(Z)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:z[1]||(z[1]=he=>q())},[j(oe)])):O("",!0),t(I)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:z[2]||(z[2]=he=>J())},[j(se)])):O("",!0),t(E)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:z[3]||(z[3]=he=>R())},[j(_e)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:z[4]||(z[4]=he=>Ie())},[j(ue),F(),w3])]),e("div",g3,[t(ee).length>0?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:z[5]||(z[5]=he=>ce())}," Multi UnVal ")):O("",!0)])]),j(me,{thead:t(U),selected:t(b),onSetSelected:z[6]||(z[6]=he=>b.value=he),tbody:t(y),fnCallData:S,scrolling:t(w),onSetScrollingPage:z[7]||(z[7]=he=>t(w).page=he),onDoFilter:z[8]||(z[8]=he=>A()),onSetCheckbox:z[9]||(z[9]=he=>ee.value=he),deep_state:t(r)},{ritase_val:Q(({item:he})=>[he.ritase_val?(s(),pe(de,{key:1})):(s(),pe(B,{key:0}))]),ritase_val1:Q(({item:he})=>[he.ritase_val1?(s(),pe(de,{key:1})):(s(),pe(B,{key:0}))]),ritase_val2:Q(({item:he})=>[he.ritase_val2?(s(),pe(de,{key:1})):(s(),pe(B,{key:0}))]),uj_asst_opt:Q(({item:he})=>{var Re;return[F(l((Re=he.uj)==null?void 0:Re.asst_opt),1)]}),ritase_leave_at:Q(({item:he})=>[F(l(he.ritase_leave_at?t(f)(he.ritase_leave_at).format("DD-MM-YYYY HH:mm:ss"):""),1)]),rla:Q(({item:he})=>[he.ritase_leave_at?(s(),_("div",k3,[j(de,{class:"text-white text-xl font-bold"})])):(s(),_("div",$3,[j(V,{class:"text-white text-xl font-bold"})]))]),ritase_arrive_at:Q(({item:he})=>[F(l(he.ritase_arrive_at?t(f)(he.ritase_arrive_at).format("DD-MM-YYYY HH:mm:ss"):""),1)]),raa:Q(({item:he})=>[he.ritase_arrive_at?(s(),_("div",D3,[j(de,{class:"text-white text-xl font-bold"})])):(s(),_("div",j3,[j(V,{class:"text-white text-xl font-bold"})]))]),ritase_return_at:Q(({item:he})=>[F(l(he.ritase_return_at?t(f)(he.ritase_return_at).format("DD-MM-YYYY HH:mm:ss"):""),1)]),rra:Q(({item:he})=>[he.ritase_return_at?(s(),_("div",T3,[j(de,{class:"text-white text-xl font-bold"})])):(s(),_("div",S3,[j(V,{class:"text-white text-xl font-bold"})]))]),ritase_till_at:Q(({item:he})=>[F(l(he.ritase_till_at?t(f)(he.ritase_till_at).format("DD-MM-YYYY HH:mm:ss"):""),1)]),rta:Q(({item:he})=>[he.ritase_till_at?(s(),_("div",P3,[j(de,{class:"text-white text-xl font-bold"})])):(s(),_("div",C3,[j(V,{class:"text-white text-xl font-bold"})]))]),deleted_by_username:Q(({item:he})=>{var Re;return[F(l((Re=he.deleted_by)==null?void 0:Re.username),1)]}),req_deleted_by_username:Q(({item:he})=>{var Re;return[F(l((Re=he.req_deleted_by)==null?void 0:Re.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),j(Me,{show:t(D),fnClose:()=>{D.value=!1},id:t(M),p_data:t(y)},null,8,["show","fnClose","id","p_data"]),j(tt,{show:t(P),fnClose:()=>{P.value=!1},id:t(N),p_data:t(y),is_view:t(L),onSetID:z[10]||(z[10]=he=>N.value=he),onSetIndex:z[11]||(z[11]=he=>b.value=he)},null,8,["show","fnClose","id","p_data","is_view"]),j(ut,{show:t(re),fnClose:()=>{re.value=!1},index:t(te),p_data:t(y)},null,8,["show","fnClose","index","p_data"])])}})}},lxe=Object.freeze(Object.defineProperty({__proto__:null,default:A3},Symbol.toStringTag,{value:"Module"})),M3={name:"MeteorIconsChain"},O3={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},N3=e("path",{fill:"none",stroke:"currentColor","stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M14 7h3a1 1 0 0 1 0 10h-3m-4 0H7A1 1 0 0 1 7 7h3m-2 5h8"},null,-1),F3=[N3];function I3(n,o,x,f,d,a){return s(),_("svg",O3,F3)}const Za=Oe(M3,[["render",I3]]),axe=Object.freeze(Object.defineProperty({__proto__:null,default:Za},Symbol.toStringTag,{value:"Module"})),Y3={name:"MaterialSymbolsImage"},B3={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},q3=e("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13z"},null,-1),U3=[q3];function H3(n,o,x,f,d,a){return s(),_("svg",B3,U3)}const Pl=Oe(Y3,[["render",H3]]),sxe=Object.freeze(Object.defineProperty({__proto__:null,default:Pl},Symbol.toStringTag,{value:"Module"})),z3={class:"box-fixed"},V3={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},L3={class:"w-full flex flex-col items-center grow overflow-auto"},E3={class:"w-full flex flex-row flex-wrap"},R3={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},J3=e("label",{for:""},"U.Jalan Per",-1),K3={class:"card-border"},G3={class:"w-6/12 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Z3=e("label",{for:""},"Jenis",-1),W3={class:"card-border"},Q3={class:"w-6/12 sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},X3=e("label",{for:""},"Payment Method",-1),e5={class:"card-border"},t5={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},l5=e("label",{for:""},"No Pol",-1),a5={class:"card-border"},s5={key:0,class:"w-full flex flex-wrap"},o5={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},n5=e("label",{for:""},"Uang Jalan",-1),r5={class:"card-border"},i5={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},d5=e("label",{for:""},"Note For Remarks",-1),_5={class:"card-border"},u5={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},c5=e("label",{for:""},"Supir",-1),p5={class:"card-border"},v5={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},f5=e("label",{for:""},"Kernet",-1),m5={class:"card-border"},h5=e("div",{class:"w-full flex flex-col flex-wrap p-1 bg-yellow-300 font-bold mt-5 text-red-900"}," Informasi Pembayaran ( Harap di baca sebelum melakukan unvalidasi ) ",-1),b5={class:"w-full md:w-4/12 flex flex-wrap"},y5={class:"w-full flex flex-col flex-wrap p-1"},x5=e("label",{for:""},"Sudah dibayarkan ?",-1),w5={class:"card-border"},g5={class:"w-full sm:w-6/12 md:w-4/12 flex flex-wrap flex-col p-1"},$5=e("label",{for:""},"Duitku Supir",-1),k5={class:"card-border !flex flex-row flex-wrap"},j5={class:"w-4/12 flex-col"},D5=e("div",{class:"font-bold"},"ID",-1),S5={class:"w-4/12 flex-col pl-1"},T5=e("div",{class:"font-bold"},"Inquery",-1),C5={class:"w-4/12 flex-col pl-1"},P5=e("div",{class:"font-bold"},"Transfer",-1),A5={class:"w-full sm:w-6/12 md:w-4/12 flex flex-wrap flex-col p-1"},M5=e("label",{for:""},"Duitku Kernet",-1),O5={class:"card-border !flex flex-row flex-wrap"},N5={class:"w-4/12 flex-col"},F5=e("div",{class:"font-bold"},"ID",-1),I5={class:"w-4/12 flex-col pl-1"},Y5=e("div",{class:"font-bold"},"Inquery",-1),B5={class:"w-4/12 flex-col pl-1"},q5=e("div",{class:"font-bold"},"Transfer",-1),U5={class:"w-full sm:w-6/12 md:w-6/12 flex flex-wrap flex-col p-1"},H5=e("label",{for:""},"Cost Center",-1),z5={class:"card-border !flex flex-row flex-wrap"},V5={class:"w-6/12 flex-col"},L5=e("div",{class:"font-bold"},"Code",-1),E5={class:"w-6/12 flex-col pl-1"},R5=e("div",{class:"font-bold"},"Desc",-1),J5={class:"w-full sm:w-6/12 md:w-3/12 flex flex-wrap flex-col p-1"},K5=e("label",{for:""},"PVR",-1),G5={class:"card-border !flex flex-row flex-wrap"},Z5={class:"w-6/12 flex-col"},W5=e("div",{class:"font-bold"},"No",-1),Q5={class:"w-6/12 flex-col pl-1"},X5=e("div",{class:"font-bold"},"Total",-1),e4={class:"w-full sm:w-6/12 md:w-3/12 flex flex-wrap flex-col p-1"},t4=e("label",{for:""},"PV",-1),l4={class:"card-border !flex flex-row flex-wrap"},a4={class:"w-6/12 flex-col"},s4=e("div",{class:"font-bold"},"No",-1),o4={class:"w-6/12 flex-col pl-1"},n4=e("div",{class:"font-bold"},"Amount",-1),r4={class:"w-full flex items-center justify-end"},i4={class:"w-full flex flex-wrap p-3 items-center"},d4=e("div",null," Di Validasi oleh : ",-1),_4={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},u4={key:0},c4={key:1},p4={key:2},v4={key:3},f4={key:4},m4={key:5},h4={key:6},b4={key:0,class:"text-xs font-bold"},y4={key:0,class:"text-xs font-bold"},x4={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,{$moment:f}=Ke(),{pointFormat:d}=K();let a=T=>{T.key=="ArrowUp"&&M(),T.key=="ArrowDown"&&D()};Nl(()=>{document.removeEventListener("keydown",a)});const p=u(ie({},{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:""})),i=ke("token"),c=u(null),h=u(null),k=u(""),C={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:"",note:""},y=u(JSON.parse(JSON.stringify(C))),g=u(JSON.parse(JSON.stringify(C))),b={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},asst_opt:{tcon:"IconsPerson",text:"Info",val:""},tipe:{tcon:"",text:"Tipe",val:""},harga:{tcon:"IconsMoney",text:"Amount",val:""}},id:"",name:"",title:"",note:""},v=u(JSON.parse(JSON.stringify(b))),w=()=>Y(this,null,function*(){k.value="PROSES...",$().loading_full=!0;const T=new FormData;let q="post",P=x.id;P==0||(T.append("id",P),T.append("_method","PUT"));const{data:N,error:L,status:R}=yield W("/trx_trp_validasi",{method:q,headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},body:T,retry:0});if($().loading_full=!1,R.value==="error"){k.value="GAGAL",X().trigger(L);return}p.value.val=N.value.val,p.value.val_user=N.value.val_user,p.value.val_by=N.value.val_by,p.value.val_at=N.value.val_at,p.value.val1=N.value.val1,p.value.val1_user=N.value.val1_user,p.value.val1_by=N.value.val1_by,p.value.val1_at=N.value.val1_at,p.value.val2=N.value.val2,p.value.val2_user=N.value.val2_user,p.value.val2_by=N.value.val2_by,p.value.val2_at=N.value.val2_at,p.value.val3=N.value.val3,p.value.val3_user=N.value.val3_user,p.value.val3_by=N.value.val3_by,p.value.val3_at=N.value.val3_at,p.value.val4=N.value.val4,p.value.val4_user=N.value.val4_user,p.value.val4_by=N.value.val4_by,p.value.val4_at=N.value.val4_at,p.value.val5=N.value.val5,p.value.val5_user=N.value.val5_user,p.value.val5_by=N.value.val5_by,p.value.val5_at=N.value.val5_at,p.value.val6=N.value.val6,p.value.val6_user=N.value.val6_user,p.value.val6_by=N.value.val6_by,p.value.val6_at=N.value.val6_at;let J=x.p_data.map(re=>re.id).indexOf(x.id);J>-1&&x.p_data.splice(J,1,ie({},p.value)),k.value="BERHASIL"}),m=()=>Y(this,null,function*(){k.value="PROSES...",$().loading_full=!0;const T=new FormData;let q="post",P=x.id;P==0||(T.append("id",P),T.append("_method","PUT"));const{data:N,error:L,status:R}=yield W("/trx_trp_unvalidasi",{method:q,headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},body:T,retry:0});if($().loading_full=!1,R.value==="error"){k.value="GAGAL",X().trigger(L);return}p.value.val=N.value.val,p.value.val_user=N.value.val_user,p.value.val_by=N.value.val_by,p.value.val_at=N.value.val_at,p.value.val1=N.value.val1,p.value.val1_user=N.value.val1_user,p.value.val1_by=N.value.val1_by,p.value.val1_at=N.value.val1_at,p.value.val2=N.value.val2,p.value.val2_user=N.value.val2_user,p.value.val2_by=N.value.val2_by,p.value.val2_at=N.value.val2_at,p.value.val3=N.value.val3,p.value.val3_user=N.value.val3_user,p.value.val3_by=N.value.val3_by,p.value.val3_at=N.value.val3_at,p.value.val4=N.value.val4,p.value.val4_user=N.value.val4_user,p.value.val4_by=N.value.val4_by,p.value.val4_at=N.value.val4_at,p.value.val5=N.value.val5,p.value.val5_user=N.value.val5_user,p.value.val5_by=N.value.val5_by,p.value.val5_at=N.value.val5_at,p.value.val6=N.value.val6,p.value.val6_user=N.value.val6_user,p.value.val6_by=N.value.val6_by,p.value.val6_at=N.value.val6_at;let J=x.p_data.map(re=>re.id).indexOf(x.id);J>-1&&x.p_data.splice(J,1,ie({},p.value)),k.value="BERHASIL"}),S=T=>{let q=JSON.parse(JSON.stringify(b));return q._.id.val=T.id,q._.xto.val=T.xto,q._.asst_opt.val=T.asst_opt,q._.tipe.val=T.tipe,q._.harga.val=d(T.harga),q.id=T.id,q.name=T.xto,q.title=(T.asst_opt||"")+" "+(T.tipe||"")+" "+(d(T.harga)||""),q._raw=T,q},A=()=>Y(this,null,function*(){k.value="",$().loading_full=!0;const{data:T,error:q,status:P}=yield W("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q);return}let N=T.value.data;p.value=N,y.value._.id.val=N.supir_id,y.value._.name.val=N.supir,y.value._.rek_no.val=N.supir_rek_no,y.value._.rek_name.val=N.supir_rek_name,y.value.id=N.supir_id,y.value.name=N.supir,y.value.rek_no=(N.supir_rek_no||"")+" "+(N.supir_rek_name||""),g.value._.id.val=N.kernet_id,g.value._.name.val=N.kernet,g.value._.rek_no.val=N.kernet_rek_no,g.value._.rek_name.val=N.kernet_rek_name,g.value.id=N.kernet_id,g.value.name=N.kernet,g.value.rek_no=(N.kernet_rek_no||"")+" "+(N.kernet_rek_name||""),v.value=S(N.uj);let L=0,R=0;N.potongan.forEach(J=>{J.potongan_mst.employee_id==N.supir_id&&(L+=parseInt(J.nominal_cut)),J.potongan_mst.employee_id==N.kernet_id&&(R+=parseInt(J.nominal_cut))}),y.value.note="",g.value.note="",L>0&&(y.value.note="Telah di potong sebesar :"+K().pointFormat(L)),R>0&&(g.value.note="Telah di potong sebesar :"+K().pointFormat(R))});je(()=>x.show,(T,q)=>{T==!0?(document.addEventListener("keydown",a),x.it_state==1&&setTimeout(()=>{c.value.focus()},1),x.it_state==0&&setTimeout(()=>{h.value.focus()},1),A()):document.removeEventListener("keydown",a)},{immediate:!0});const D=()=>{let T=x.p_data.map(q=>q.id).indexOf(x.id);T!=x.p_data.length-1&&(T++,o("setID",x.p_data[T].id),o("setIndex",T),setTimeout(()=>{A()},100))},M=()=>{let T=x.p_data.map(q=>q.id).indexOf(x.id);T!=0&&(T--,o("setID",x.p_data[T].id),o("setIndex",T),setTimeout(()=>{A()},100))};return(T,q)=>{const P=Xe,N=hl,L=Sl,R=Tl;return ae((s(),_("section",z3,[e("div",null,[j(P,{title:"Form Transaction Validation"+(n.id?" #"+n.id:""),fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["title","fn"]),e("form",V3,[e("div",L3,[e("div",E3,[e("div",R3,[J3,e("div",K3,l(t(p).tanggal?t(f)(t(p).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",G3,[Z3,e("div",W3,l(t(p).jenis),1)]),e("div",Q3,[X3,e("div",e5,l(t(p).payment_method.name),1)]),e("div",t5,[l5,e("div",a5,l(t(p).no_pol),1)]),t(p).jenis!=""?(s(),_("div",s5,[e("div",o5,[n5,e("div",r5,[j(N,{selected:t(v)},null,8,["selected"])])]),e("div",i5,[d5,e("div",_5,l(t(p).note_for_remarks),1)])])):O("",!0),e("div",u5,[c5,e("div",p5,[j(N,{selected:t(y)},null,8,["selected"])])]),e("div",v5,[f5,e("div",m5,[j(N,{selected:t(g)},null,8,["selected"])])]),h5,e("div",b5,[e("div",y5,[x5,e("div",w5,l(t(p).received_payment?"Ya":"Tidak"),1)])]),e("div",g5,[$5,e("div",k5,[e("div",j5,[D5,e("div",null,l(t(p).duitku_supir_disburseId),1)]),e("div",S5,[T5,e("div",null,l(t(p).duitku_supir_inv_res_desc),1)]),e("div",C5,[P5,e("div",null,l(t(p).duitku_supir_trf_res_desc),1)])])]),e("div",A5,[M5,e("div",O5,[e("div",N5,[F5,e("div",null,l(t(p).duitku_kernet_disburseId),1)]),e("div",I5,[Y5,e("div",null,l(t(p).duitku_kernet_inv_res_desc),1)]),e("div",B5,[q5,e("div",null,l(t(p).duitku_kernet_trf_res_desc),1)])])]),e("div",U5,[H5,e("div",z5,[e("div",V5,[L5,e("div",null,l(t(p).cost_center_code),1)]),e("div",E5,[R5,e("div",null,l(t(p).cost_center_desc),1)])])]),e("div",J5,[K5,e("div",G5,[e("div",Z5,[W5,e("div",null,l(t(p).pvr_no),1)]),e("div",Q5,[X5,e("div",null,l(t(d)(t(p).pvr_total||0)),1)])])]),e("div",e4,[t4,e("div",l4,[e("div",a4,[s4,e("div",null,l(t(p).pv_no),1)]),e("div",o4,[n4,e("div",null,l(t(d)(t(p).pv_total||0)),1)])])])])]),e("div",r4,[e("div",i4,[d4,t(p).val||t(p).val1||t(p).val2||t(p).val3||t(p).val4||t(p).val5||t(p).val6?(s(),_("div",_4,[t(p).val?(s(),_("div",u4," Kasir : "+l(t(p).val_by.username)+" ( "+l(t(p).val_at?t(f)(t(p).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val1?(s(),_("div",c4," Mandor : "+l(t(p).val1_by.username)+" ( "+l(t(p).val1_at?t(f)(t(p).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val2?(s(),_("div",p4," KTU/W : "+l(t(p).val2_by.username)+" ( "+l(t(p).val2_at?t(f)(t(p).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val3?(s(),_("div",v4," Marketing : "+l(t(p).val3_by.username)+" ( "+l(t(p).val3_at?t(f)(t(p).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val4?(s(),_("div",f4," Logistik : "+l(t(p).val4_by.username)+" ( "+l(t(p).val4_at?t(f)(t(p).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val5?(s(),_("div",m4," SPV Logistik : "+l(t(p).val5_by.username)+" ( "+l(t(p).val5_at?t(f)(t(p).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(p).val6?(s(),_("div",h4," MGR Logistik : "+l(t(p).val6_by.username)+" ( "+l(t(p).val6_at?t(f)(t(p).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:q[0]||(q[0]=J=>M())},[j(L,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:q[1]||(q[1]=J=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:q[2]||(q[2]=ze(J=>w(),["prevent"]))},[F(" Validasi "),t(k)!=""?(s(),_("div",b4,l(t(k)),1)):O("",!0)],512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:h,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:q[3]||(q[3]=ze(J=>m(),["prevent"]))},[F(" Unvalidasi "),t(k)!=""?(s(),_("div",y4,l(t(k)),1)):O("",!0)],512)):O("",!0),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:q[4]||(q[4]=J=>D())},[j(R,{class:"black"})])])])])],512)),[[Be,n.show]])}}},Wa=x4,oxe=Object.freeze(Object.defineProperty({__proto__:null,default:Wa},Symbol.toStringTag,{value:"Module"})),w4={name:"MaterialSymbolsPerson"},g4={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},$4=e("path",{fill:"currentColor",d:"M12 12q-1.65 0-2.825-1.175T8 8q0-1.65 1.175-2.825T12 4q1.65 0 2.825 1.175T16 8q0 1.65-1.175 2.825T12 12m-8 8v-2.8q0-.85.438-1.562T5.6 14.55q1.55-.775 3.15-1.162T12 13q1.65 0 3.25.388t3.15 1.162q.725.375 1.163 1.088T20 17.2V20z"},null,-1),k4=[$4];function j4(n,o,x,f,d,a){return s(),_("svg",g4,k4)}const Qa=Oe(w4,[["render",j4]]),nxe=Object.freeze(Object.defineProperty({__proto__:null,default:Qa},Symbol.toStringTag,{value:"Module"})),D4={key:0,class:"border-2 w-full"},S4=e("div",{class:"w-full font-bold text-center bg-blue-300"},"EXTRA MONEY TRIP INFO ",-1),T4={class:"border-2"},C4={class:"flex w-full items-center justify-between"},P4={class:"flex items-center justify-center p-1"},A4=e("div",{class:"font-bold text-xs"},"Created At",-1),M4={class:"text-xs sm:flex"},O4={class:"sm:mr-1"},N4={class:"font-bold text-lg text-center"},F4={class:"flex items-center justify-center p-1"},I4=e("div",{class:"font-bold text-xs"},"Updated At",-1),Y4={class:"text-xs sm:flex"},B4={class:"sm:mr-1"},q4={class:"border-t-2 p-2 flex flex-row flex-wrap items-center justify-center"},U4={class:"flex flex-col items-center justify-center"},H4={class:"flex items-center justify-center"},z4={class:"font-bold italic ml-2"},V4={class:"flex flex-col relative"},L4={class:"absolute mt-12 ml-2 w-12 text-center font-bold"},E4={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},R4={class:"flex items-center justify-center"},J4={class:"px-1"},K4={class:"flex items-center justify-center mx-3"},G4={class:"w-full flex flex-wrap items-center justify-center border-2 rounded-lg"},Z4={class:"w-1/2"},W4={class:"w-1/2"},Q4={class:"font-bold"},X4={class:"w-full flex"},e6={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},t6={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},l6={class:"w-full flex flex-row flex-wrap"},a6={class:"w-full sm:w-7/12 md:w-1/2 p-2"},s6=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA ",-1),o6={class:"w-full text-sm"},n6=e("thead",null,[e("tr",null,[e("th",{class:"border-2 border-black p-2"},"Deskripsi"),e("th",{class:"border-2 border-black p-2"},"Qty"),e("th",{class:"border-2 border-black p-2"},"Harga"),e("th",{class:"border-2 border-black p-2"},"Jumlah")])],-1),r6={class:"border-2 border-black p-2"},i6={class:"border-2 border-black p-2 text-right"},d6={class:"border-2 border-black p-2 text-right"},_6={class:"border-2 border-black p-2 text-right"},u6=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," PEMBAYARAN ",-1),c6={class:"w-full text-sm"},p6=e("td",{class:"border-2 border-black p-2"},"Metode ",-1),v6={class:"border-2 border-black p-2 font-bold"},f6=e("td",{class:"border-2 border-black p-2"},"Sudah Dibayarkan? ",-1),m6={class:"border-2 border-black p-2 font-bold"},h6={class:"w-full sm:w-5/12 md:w-1/2 p-2"},b6=e("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),y6={class:"w-full text-sm"},x6=e("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),w6={class:"border-2 border-black p-2 font-bold"},g6=e("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),$6={class:"border-2 border-black p-2 font-bold"},k6=e("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),j6={class:"border-2 border-black p-2 font-bold"},D6=e("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),S6={class:"border-2 border-black p-2 font-bold"},T6=e("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),C6={class:"border-2 border-black p-2 font-bold"},P6=e("td",{class:"border-2 border-black p-2"}," PV NO ",-1),A6={class:"border-2 border-black p-2 font-bold"},M6=e("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),O6={class:"border-2 border-black p-2 font-bold"},N6=e("div",{class:"w-full text-xl font-bold"}," APPROVER EXTRA MONEY TRIP",-1),F6={class:"w-full flex flex-wrap justify-center text-xs text-center"},I6={class:"border-2 p-1 m-1"},Y6=e("br",null,null,-1),B6=e("br",null,null,-1),q6={class:"border-2 p-1 m-1"},U6=e("br",null,null,-1),H6=e("br",null,null,-1),z6={class:"border-2 p-1 m-1"},V6=e("br",null,null,-1),L6=e("br",null,null,-1),E6={class:"border-2 p-1 m-1"},R6=e("br",null,null,-1),J6=e("br",null,null,-1),K6={class:"border-2 p-1 m-1"},G6=e("br",null,null,-1),Z6=e("br",null,null,-1),W6={class:"border-2 p-1 m-1"},Q6=e("br",null,null,-1),X6=e("br",null,null,-1),Xa={__name:"emt",props:{extra_money_trxs:{type:Array,required:!1}},setup(n){const{$moment:o}=Ke(),{pointFormat:x}=K();return(f,d)=>{const a=Gl,r=kl,p=Zl,i=jl,c=Qa,h=Xt;return n.extra_money_trxs&&n.extra_money_trxs.length>0?(s(),_("div",D4,[S4,(s(!0),_(ye,null,Ae(n.extra_money_trxs,k=>(s(),_("div",T4,[e("div",C4,[e("div",P4,[j(a,{class:"text-xl mr-1"}),e("div",null,[A4,e("div",M4,[e("div",O4,l(k.created_at?t(o)(k.created_at).format("DD-MM-YYYY"):""),1),e("div",null,l(k.created_at?t(o)(k.created_at).format("H:m:s"):""),1)])])]),e("div",N4,"ID #"+l(k.id)+" Untuk Trip ID #"+l(k.prev_trx_trp_id),1),e("div",F4,[j(a,{class:"text-xl mr-1"}),e("div",null,[I4,e("div",Y4,[e("div",B4,l(k.updated_at?t(o)(k.updated_at).format("DD-MM-YYYY"):""),1),e("div",null,l(k.updated_at?t(o)(k.updated_at).format("H:m:s"):""),1)])])])]),e("div",q4,[e("div",U4,[e("div",H4,[j(r,{class:"mr-1"}),F(" "+l(k.tanggal?t(o)(k.tanggal).format("DD-MM-YYYY"):"")+" ",1),e("span",z4,l(k.extra_money.transition_type)+" "+l(k.extra_money.transition_target),1)]),e("div",V4,[j(p,{class:"text-9xl"}),e("div",L4,l(k.extra_money.jenis),1),e("div",E4,l(k.no_pol),1)]),e("div",R4,[j(i),e("span",J4,l(k.extra_money.xto)+" [#"+l(k.extra_money.id)+"]",1)])]),e("div",K4,[e("div",G4,[e("div",Z4,[j(c,{class:"text-9xl"})]),e("div",W4,[e("div",Q4," EMPLOYEE #"+l(k.employee_id),1),e("div",null,l(k.employee.name),1)])])]),e("div",X4,[e("div",e6,[j(h,{label:"Attachment",value:k.attachment_1_preview},null,8,["value"])]),e("div",t6,[j(h,{label:"Attachment",value:k.attachment_2_preview},null,8,["value"])])]),e("div",l6,[e("div",a6,[s6,e("table",o6,[n6,e("tbody",null,[e("tr",null,[e("td",r6,l(k.extra_money.description),1),e("td",i6,l(t(x)(k.extra_money.qty)),1),e("td",d6,l(t(x)(k.extra_money.nominal)),1),e("td",_6,l(t(x)(k.extra_money.qty*k.extra_money.nominal)),1)])])]),u6,e("table",c6,[e("tbody",null,[e("tr",null,[p6,e("td",v6,l(k.payment_method.name),1)]),e("tr",null,[f6,e("td",m6,l(k.received_payment?"Ya":"Tidak"),1)])])])]),e("div",h6,[b6,e("table",y6,[e("tbody",null,[e("tr",null,[x6,e("td",w6,l(k.note_for_remarks),1)]),e("tr",null,[g6,e("td",$6,l(k.cost_center_code),1)]),e("tr",null,[k6,e("td",j6,l(k.cost_center_desc),1)]),e("tr",null,[D6,e("td",S6,l(k.pvr_no),1)]),e("tr",null,[T6,e("td",C6,l(t(x)(k.pvr_total||0)),1)]),e("tr",null,[P6,e("td",A6,l(k.pv_no),1)]),e("tr",null,[M6,e("td",O6,l(t(x)(k.pv_total||0)),1)])])])])]),N6,e("div",F6,[e("div",I6,[F(" Kasir "),Y6,F(" "+l(k.val1_by?k.val1_by.username:"-")+" ",1),B6,F(" ( "+l(k.val1_at?t(o)(k.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",q6,[F(" Mandor "),U6,F(" "+l(k.val2_by?k.val2_by.username:"-")+" ",1),H6,F(" ( "+l(k.val2_at?t(o)(k.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",z6,[F(" KTU/W "),V6,F(" "+l(k.val3_by?k.val3_by.username:"-")+" ",1),L6,F(" ( "+l(k.val3_at?t(o)(k.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",E6,[F(" Logistik "),R6,F(" "+l(k.val4_by?k.val4_by.username:"-")+" ",1),J6,F(" ( "+l(k.val4_at?t(o)(k.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",K6,[F(" SPV Logistik "),G6,F(" "+l(k.val5_by?k.val5_by.username:"-")+" ",1),Z6,F(" ( "+l(k.val5_at?t(o)(k.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),e("div",W6,[F(" MGR Logistik "),Q6,F(" "+l(k.val6_by?k.val6_by.username:"-")+" ",1),X6,F(" ( "+l(k.val6_at?t(o)(k.val6_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])])])]))),256))])):O("",!0)}}},rxe=Object.freeze(Object.defineProperty({__proto__:null,default:Xa},Symbol.toStringTag,{value:"Module"})),e8={class:"box-fixed"},t8={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white p-1"},l8={class:"w-full flex items-center justify-end"},a8={__name:"trx_trp_full",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,{pointFormat:f}=K(),d=u(null),a=u([""]),r=u([""]);let p=A=>{A.key=="ArrowUp"&&S(),A.key=="ArrowDown"&&m()};Nl(()=>{document.removeEventListener("keydown",p)});const c=u(ie({},{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:"",uj_combine:{supir:[],kernet:[]}})),h=ke("token");u(null),u(null),u("");const k={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:"",note:""},C=u(JSON.parse(JSON.stringify(k))),y=u(JSON.parse(JSON.stringify(k))),g={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},asst_opt:{tcon:"IconsPerson",text:"Info",val:""},tipe:{tcon:"",text:"Tipe",val:""},harga:{tcon:"IconsMoney",text:"Amount",val:""}},id:"",name:"",title:"",note:""},b=u(JSON.parse(JSON.stringify(g))),v=A=>{let D=JSON.parse(JSON.stringify(g));return D._.id.val=A.id,D._.xto.val=A.xto,D._.asst_opt.val=A.asst_opt,D._.tipe.val=A.tipe,D._.harga.val=f(A.harga),D.id=A.id,D.name=A.xto,D.title=(A.asst_opt||"")+" "+(A.tipe||"")+" "+(f(A.harga)||""),D._raw=A,D},w=()=>Y(this,null,function*(){a.value=[""],r.value=[""],setTimeout(()=>{d.value.scrollTop=0},1),$().loading_full=!0;const{data:A,error:D,status:M}=yield W("/trx_trp/full_view",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D);return}let T=A.value.data;c.value=T,C.value._.id.val=T.supir_id,C.value._.name.val=T.supir,C.value._.rek_no.val=T.supir_rek_no,C.value._.rek_name.val=T.supir_rek_name,C.value.id=T.supir_id,C.value.name=T.supir,C.value.rek_no=(T.supir_rek_no||"")+" "+(T.supir_rek_name||""),y.value._.id.val=T.kernet_id,y.value._.name.val=T.kernet,y.value._.rek_no.val=T.kernet_rek_no,y.value._.rek_name.val=T.kernet_rek_name,y.value.id=T.kernet_id,y.value.name=T.kernet,y.value.rek_no=(T.kernet_rek_no||"")+" "+(T.kernet_rek_name||""),b.value=v(T.uj);let q=0,P=0;T.potongan.forEach(N=>{N.potongan_mst.employee_id==T.supir_id&&(q+=parseInt(N.nominal_cut)),N.potongan_mst.employee_id==T.kernet_id&&(P+=parseInt(N.nominal_cut))}),C.value.note="",y.value.note="",q>0&&(C.value.note="Telah di potong sebesar :"+K().pointFormat(q)),P>0&&(y.value.note="Telah di potong sebesar :"+K().pointFormat(P))});je(()=>x.show,(A,D)=>{A==!0?(document.addEventListener("keydown",p),w()):document.removeEventListener("keydown",p)},{immediate:!0});const m=()=>{let A=x.p_data.map(D=>D.id).indexOf(x.id);A!=x.p_data.length-1&&(A++,o("setID",x.p_data[A].id),o("setIndex",A),setTimeout(()=>{w()},100))},S=()=>{let A=x.p_data.map(D=>D.id).indexOf(x.id);A!=0&&(A--,o("setID",x.p_data[A].id),o("setIndex",A),setTimeout(()=>{w()},100))};return(A,D)=>{const M=Xe,T=na,q=Xa,P=Sl,N=Tl;return ae((s(),_("section",e8,[e("div",null,[j(M,{title:"Form Full Transaction",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",t8,[e("div",{ref_key:"main_part",ref:d,class:"w-full flex flex-col items-center grow overflow-auto"},[j(T,{trx_trp:t(c),p_data:n.p_data,save_do:t(r),save_state:t(a)},null,8,["trx_trp","p_data","save_do","save_state"]),j(q,{extra_money_trxs:t(c).extra_money_trxs},null,8,["extra_money_trxs"])],512),e("div",l8,[e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:D[0]||(D[0]=L=>S())},[j(P,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:D[1]||(D[1]=L=>n.fnClose())}," Cancel "),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:D[2]||(D[2]=L=>m())},[j(N,{class:"black"})])])])])],512)),[[Be,n.show]])}}},es=a8,ixe=Object.freeze(Object.defineProperty({__proto__:null,default:es},Symbol.toStringTag,{value:"Module"})),s8={class:"w-full h-full flex flex-col"},o8={class:"w-full flex grow flex-col overflow-auto h-0"},n8={class:"w-full flex justify-between flex-wrap"},r8={class:"grow flex flex-wrap"},i8={class:"m-1"},d8=Et('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),_8=[d8],u8=e("span",{class:"text-xs ml-1"}," Download ",-1),c8=e("span",{class:"text-xs ml-1"}," With UJ ",-1),p8={class:"flex"},v8=e("span",{class:"text-xs"},"Mode",-1),f8={key:0},m8={class:"w-full flex flex-col items-center justify-center"},h8={key:2,class:"text-xs"},b8={key:0},y8={key:0},x8={class:"grow mb-5"},w8=e("b",{class:"text-red-500"},"divalidasi",-1),g8=e("b",null,"tidak dapat dibatalkan lagi",-1),$8={class:"grow mb-5"},k8={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K();let a=u({clearCheckBox:!1});const r=$e=>$e.deleted==1?"!bg-red-400":$e.pvr_id>0&&$e.req_deleted==1?"!bg-yellow-300":$e.absen_not_done&&$e.absen_not_done.length>0?"!bg-gray-300":$e.pv_id>0?"!bg-blue-300":"",p=$e=>($e.map(xe=>{xe.class_h=r(xe)}),$e),i=u("pv_not_done");je(()=>i.value,$e=>{Le.value.map(xe=>{let st=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(xe.key)>-1;return["all","deleted","req_deleted"].indexOf($e)>-1?st&&(xe.tbl_show=1):st&&(xe.tbl_show=0),xe}),q()},{immediate:!1});const c={};c._TimeZoneOffset=new Date().getTimezoneOffset(),c.sort="tanggal:desc";const h=u({}),k=u({from:"",to:""}),C=ke("token"),{data:y}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let $e=[];const[xe,st]=yield Promise.all([W("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{filter_status:i},retry:0})]);return xe.status.value!=="error"&&($e=p(xe.data.value.data)),xe.status.value==="error"?(X().trigger(xe.error),{trx_trps:$e}):($().loading_full=!1,{trx_trps:$e})}),"$pFLmKcrKj9")})),o=yield o,x(),o),g=u(y.value.trx_trps||[]),b=u([]),v=u(!1),w=()=>Y(this,null,function*(){$().loading_full=!0;const{data:$e,error:xe,status:st}=yield W("/trx_load_cost_center",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{online_status:v.value},retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}b.value=$e.value.list_cost_center}),m=u({field:"tanggal",by:"desc"}),S=u(-1),A=ne(()=>g.value[S.value]),D=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),M=()=>{c.like="";let $e=JSON.parse(JSON.stringify($()._tv.global_keyword));$e!=""&&(c.like=`id:%${$e}%,xto:%${$e}%,jenis:%${$e}%,pv_no:%${$e}%,ticket_a_no:%${$e}%,ticket_b_no:%${$e}%,no_pol:%${$e}%,supir:%${$e}%,kernet:%${$e}%,cost_center_code:%${$e}%,cost_center_desc:%${$e}%,pvr_no:%${$e}%,tanggal:%${$e}%,transition_target:%${$e}%,uj_asst_opt:%${$e}%`),c.sort="",m.value.field&&(c.sort=m.value.field+":"+m.value.by),c.date_from=k.value.from?f(k.value.from).format("YYYY-MM-DD"):"",c.date_to=k.value.to?f(k.value.to).format("YYYY-MM-DD"):"",c.filter_model=JSON.stringify($()._tv.filter_model)},T=()=>Y(this,null,function*(){$().loading_full=!0,h.value={},D.value.may_get_data=!1,c.page=D.value.page,c.page==1&&(g.value=[]),c.first_row&&delete c.first_row,c.page>1&&(c.first_row=JSON.stringify(g.value[0])),c.filter_status=i.value;const{data:$e,error:xe,status:st}=yield W("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:c,retry:0});if($().loading_full=!1,D.value.may_get_data=!0,st.value==="error"){X().trigger(xe,h);return}D.value.page==1?g.value=p($e.value.data):D.value.page>1&&(g.value=[...g.value,...p($e.value.data)]),$e.value.data.length==0&&(D.value.is_last_record=!0),$()._tv.filter_box=!1}),q=()=>{S.value=-1,D.value.page=1,D.value.is_last_record=!1,M(),T()},P=u(1),N=u(1),L=u(!1),R=u(0),J=()=>{R.value=0,P.value=-1,L.value=!0},{display:re}=Je(),te=u(!1),ee=u(0),ce=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=g.value[S.value].id,P.value=1,te.value=!0)},U=u(!1),I=u(0),Z=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(I.value=g.value[S.value].id,N.value=1,U.value=!0)},E=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=g.value[S.value].id,P.value=0,te.value=!0)},H=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=g.value[S.value].id,P.value=-1,te.value=!0)},ve=u(!1),Ie=u(0),le=$e=>{Ie.value=$e,ve.value=!0},z=u(!1),G=u({}),oe=u(!1),se=u(""),_e=()=>Y(this,null,function*(){oe.value&&(oe.value=!1)}),ue=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(se.value="",G.value={id:g.value[S.value].id,"no pol":g.value[S.value].no_pol,tujuan:g.value[S.value].xto},oe.value=!0)};je(()=>se.value,$e=>{$e.trim().length>0?z.value=!0:z.value=!1},{immediate:!1});const B=()=>Y(this,null,function*(){$().loading_full=!0;const $e=new FormData;$e.append("id",g.value[S.value].id),$e.append("deleted_reason",se.value),$e.append("_method","DELETE");const{data:xe,error:st,status:qt}=yield W("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:$e,retry:0});if($().loading_full=!1,qt.value==="error"){X().trigger(st);return}let qe=ie({},g.value[S.value]);qe.deleted=xe.value.deleted,qe.deleted_user=xe.value.deleted_user,qe.deleted_at=xe.value.deleted_at,qe.deleted_by=xe.value.deleted_by,qe.deleted_reason=xe.value.deleted_reason,qe.class_h=r(qe),i.value!="all"?g.value.splice(S.value,1):g.value.splice(S.value,1,ie({},qe)),S.value=-1,oe.value=!1}),de=u(!1),V=u({}),me=u(!1),Me=u(""),tt=()=>Y(this,null,function*(){me.value&&(me.value=!1)}),ut=()=>{S.value==-1?re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Me.value="",V.value={id:g.value[S.value].id,"no pol":g.value[S.value].no_pol,tujuan:g.value[S.value].xto},me.value=!0)};je(()=>Me.value,$e=>{$e.trim().length>0?de.value=!0:de.value=!1},{immediate:!1});const he=()=>Y(this,null,function*(){$().loading_full=!0;const $e=new FormData;$e.append("id",g.value[S.value].id),$e.append("req_deleted_reason",Me.value),$e.append("_method","DELETE");const{data:xe,error:st,status:qt}=yield W("/trx_trp_req_delete",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:$e,retry:0});if($().loading_full=!1,qt.value==="error"){X().trigger(st);return}let qe=ie({},g.value[S.value]);qe.req_deleted=xe.value.req_deleted,qe.req_deleted_user=xe.value.req_deleted_user,qe.req_deleted_by=xe.value.req_deleted_by,qe.req_deleted_at=xe.value.req_deleted_at,qe.req_deleted_reason=xe.value.req_deleted_reason,qe.class_h=r(qe),i.value!="all"?g.value.splice(S.value,1):g.value.splice(S.value,1,ie({},qe)),S.value=-1,me.value=!1}),Re=u([]),Ne=u(!1),Ze=()=>Y(this,null,function*(){$().loading_full=!0;const $e=new FormData;$e.append("ids",JSON.stringify(Re.value)),$e.append("_method","PUT");const{data:xe,error:st,status:qt}=yield W("/trx_trp_validasis",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:$e,retry:0});if($().loading_full=!1,qt.value==="error"){X().trigger(st);return}Ne.value=!1,xe.value.val_lists.forEach(qe=>{let ht=g.value.map(Qe=>Qe.id).indexOf(qe.id);if(ht>-1){let Qe=g.value[ht];Qe.val=qe.val,Qe.val_by=qe.val_by,Qe.val_at=qe.val_at,Qe.val1=qe.val1,Qe.val1_by=qe.val1_by,Qe.val1_at=qe.val1_at,Qe.val2=qe.val2,Qe.val2_by=qe.val2_by,Qe.val2_at=qe.val2_at,Qe.val3=qe.val3,Qe.val3_by=qe.val3_by,Qe.val3_at=qe.val3_at,Qe.val4=qe.val4,Qe.val4_by=qe.val4_by,Qe.val4_at=qe.val4_at,Qe.val5=qe.val5,Qe.val5_by=qe.val5_by,Qe.val5_at=qe.val5_at,Qe.val6=qe.val6,Qe.val6_by=qe.val6_by,Qe.val6_at=qe.val6_at,Qe.updated_at=qe.updated_at,g.value.splice(ht,1,ie({},Qe))}}),a.value.clearCheckBox=!0}),{printHtml:Ve}=jt(),Bt=()=>Y(this,null,function*(){if(S.value==-1){re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:$e,error:xe,status:st}=yield W("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{id:g.value[S.value].id},retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}Ve($e.value.html,318)}),Rt=()=>Y(this,null,function*(){if(S.value==-1){re({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:$e,error:xe,status:st}=yield W("/trx_trp_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{id:g.value[S.value].id},retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}Ve($e.value.html,318)}),Jt=()=>Y(this,null,function*(){$().loading_full=!0;const $e=new FormData;$e.append("online_status",v.value);const{data:xe,error:st,status:qt}=yield W("/trx_trp_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:$e,retry:0});if($().loading_full=!1,qt.value==="error"){X().trigger(st);return}xe.value.forEach(qe=>{let ht=g.value.map(Qe=>Qe.id).indexOf(qe.id);if(ht!==-1){let Qe=g.value[ht];Qe.pvr_id=qe.pvr_id,Qe.pvr_no=qe.pvr_no,Qe.pvr_total=qe.pvr_total,Qe.pvr_had_detail=qe.pvr_had_detail,Qe.updated_at=qe.updated_at,g.value.splice(ht,1,ie({},Qe))}}),re({show:!0,status:"Success",message:"Generate Or Update PVR Done"})}),al=()=>Y(this,null,function*(){$().loading_full=!0;const $e=new FormData;$e.append("online_status",v.value);const{data:xe,error:st,status:qt}=yield W("/trx_trp_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:$e,retry:0});if($().loading_full=!1,qt.value==="error"){X().trigger(st);return}xe.value.forEach(qe=>{let ht=g.value.map(Qe=>Qe.id).indexOf(qe.id);if(ht!==-1){let Qe=g.value[ht];Qe.pv_id=qe.pv_id,Qe.pv_no=qe.pv_no,Qe.pv_total=qe.pv_total,Qe.pv_datetime=qe.pv_datetime,Qe.pv_complete=qe.pv_complete,Qe.updated_at=qe.updated_at,g.value.splice(ht,1,ie({},Qe))}}),re({show:!0,status:"Success",message:"Generate Or Update PV Done"})}),Kt=()=>Y(this,null,function*(){$().loading_full=!0;const{data:$e,error:xe,status:st}=yield W("/trx_trp/link_to_extramoney_trx",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}re({show:!0,status:"Success",message:$e.value.message})}),Le=u([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"uj_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"uj_tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"uj_harga",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:$().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"received_payment",label:"Sudah Dibayarkan?",type:"string"},{key:"duitku_supir_disburseId",label:"ID Duitku Supir",type:"string"},{key:"duitku_supir_inv_res_desc",label:"Ket Inquery Duitku Supir",type:"string"},{key:"duitku_supir_trf_res_desc",label:"Ket Pengiriman Duitku Supir",type:"string"},{key:"duitku_kernet_disburseId",label:"ID Duitku Kernet",type:"string"},{key:"duitku_kernet_inv_res_desc",label:"Ket Inquery Duitku Kernet",type:"string"},{key:"duitku_kernet_trf_res_desc",label:"Ket Pengiriman Duitku Kernet",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Tt=ne(()=>["pv_not_done","all"].indexOf(i.value)>-1&&K().checkPermission("trp_trx.create")),rl=ne(()=>S.value>-1&&K().checkPermission("trp_trx.view")),et=ne(()=>S.value>-1&&K().checkPermission("trp_trx.ticket.views"));ne(()=>S.value>-1&&[void 0,0].indexOf(A.value.deleted)>-1&&[void 0,0].indexOf(A.value.req_deleted)>-1&&[void 0,0].indexOf(A.value.val4)>-1&&[void 0,""].indexOf(A.value.pvr_id)>-1&&K().checkPermission("trp_trx.modify"));const yt=ne(()=>S.value>-1&&[void 0,0].indexOf(A.value.deleted)>-1&&[void 0,0].indexOf(A.value.req_deleted)>-1&&([void 0,""].indexOf(A.value.pvr_id)>-1&&K().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2"])||A.value.val3==0&&K().checkPermissions(["trp_trx.val3"])||A.value.val4==0&&K().checkPermissions(["trp_trx.val4"])||A.value.val5==0&&K().checkPermissions(["trp_trx.val5"])||A.value.val6==0&&K().checkPermissions(["trp_trx.val6"]))),Ol=ne(()=>S.value>-1&&[void 0,0].indexOf(A.value.deleted)>-1&&[void 0,0].indexOf(A.value.req_deleted)>-1&&(A.value.val1==1&&K().checkPermissions(["trp_trx.unval1"])||A.value.val2==1&&K().checkPermissions(["trp_trx.unval2"])||A.value.val3==1&&K().checkPermissions(["trp_trx.unval3"])||A.value.val4==1&&K().checkPermissions(["trp_trx.unval4"])||A.value.val5==1&&K().checkPermissions(["trp_trx.unval5"])||A.value.val6==1&&K().checkPermissions(["trp_trx.unval6"]))),Ye=ne(()=>S.value>-1&&[void 0,0].indexOf(A.value.deleted)>-1&&[void 0,0].indexOf(A.value.req_deleted)>-1&&[void 0,""].indexOf(A.value.pvr_id)>-1&&K().checkPermission("trp_trx.remove")),fe=ne(()=>S.value>-1&&[void 0,0].indexOf(A.value.deleted)>-1&&[void 0,0].indexOf(A.value.req_deleted)>-1&&A.value.pvr_id!=""&&K().checkPermission("trp_trx.request_remove")),ge=ne(()=>S.value>-1&&A.value.val==1&&K().checkPermission("trp_trx.preview_file")),we=ne(()=>S.value>-1&&A.value.payment_method_id==2&&A.value.received_payment==1&&K().checkPermission("trp_trx.preview_file")),{downloadFile:be,viewFile:Ce}=jt(),lt=()=>Y(this,null,function*(){M(),$().loading_full=!0,c.filter_status=i.value;const{data:$e,error:xe,status:st}=yield W("/trx_trp/report_raw_excel",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:c,retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}be($e.value)}),De=()=>Y(this,null,function*(){M(),$().loading_full=!0,c.filter_status=i.value;const{data:$e,error:xe,status:st}=yield W("/trx_trp/report_excel_w_uj",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:c,retry:0});if($().loading_full=!1,st.value==="error"){X().trigger(xe);return}be($e.value)});return($e,xe)=>{const st=_t,qt=gt,qe=Nt,ht=Zt,Qe=Hl,wt=Ft,Gt=wl,xl=_l,cl=Yt,He=Za,dt=Pl,Pe=$t,Ge=ft,ta=Ot,Fe=It,Ct=Va,ql=Wa,Rs=Wl,Js=es;return s(),_("div",s8,[j(st,{title:"List Transaction"}),e("div",o8,[e("div",n8,[e("div",r8,[e("div",i8,[ae(e("select",{class:"","onUpdate:modelValue":xe[0]||(xe[0]=Se=>Ee(i)?i.value=Se:null)},_8,512),[[We,t(i)]])]),t(Tt)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[1]||(xe[1]=Se=>J())},[j(qt)])):O("",!0),t(rl)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[2]||(xe[2]=Se=>H())},[j(qe)])):O("",!0),t(Ye)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[3]||(xe[3]=Se=>ue())},[j(ht)])):O("",!0),t(fe)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[4]||(xe[4]=Se=>ut())},[j(Qe)])):O("",!0),t(yt)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[5]||(xe[5]=Se=>ce())},[j(wt)])):O("",!0),t(Ol)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[6]||(xe[6]=Se=>E())},[j(Gt)])):O("",!0),t(et)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:xe[7]||(xe[7]=Se=>Z())},[j(qe)])):O("",!0),t(ge)?(s(),_("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[8]||(xe[8]=Se=>Bt())},[j(xl)])):O("",!0),t(we)?(s(),_("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[9]||(xe[9]=Se=>Rt())},[j(xl)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:xe[10]||(xe[10]=Se=>lt())},[j(cl),F(),u8]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:xe[11]||(xe[11]=Se=>De())},[j(cl),F(),c8]),t(Re).length>0&&("useUtils"in $e?$e.useUtils:t(K))().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2","trp_trx.val3","trp_trx.val4","trp_trx.val5","trp_trx.val6"])?(s(),_("button",{key:9,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:xe[12]||(xe[12]=Se=>Ne.value=!0)},[j(wt),j(wt),j(wt),j(wt)])):O("",!0)]),e("div",p8,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:xe[13]||(xe[13]=Se=>Kt())},[j(He)]),("useUtils"in $e?$e.useUtils:t(K))().checkPermission("trp_trx.generate_pvr")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:xe[14]||(xe[14]=Se=>Jt())}," Gen/Update PVR ")):O("",!0),("useUtils"in $e?$e.useUtils:t(K))().checkPermission("trp_trx.generate_pv")?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:xe[15]||(xe[15]=Se=>al())}," Gen/Update PV ")):O("",!0),("useUtils"in $e?$e.useUtils:t(K))().checkPermissions(["trp_trx.generate_pvr","trp_trx.generate_pv","trp_trx.get_pv"])?(s(),_("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:xe[16]||(xe[16]=Se=>v.value=!t(v))},[v8,F(" : "),e("span",{class:Ue(["font-bold",t(v)?"text-green-600":"text-red-600"])},l(t(v)?"ONLINE":"OFFLINE"),3)])):O("",!0)])]),j(ta,{thead:t(Le),selected:t(S),onSetSelected:xe[17]||(xe[17]=Se=>S.value=Se),tbody:t(g),fnCallData:T,scrolling:t(D),onSetScrollingPage:xe[18]||(xe[18]=Se=>t(D).page=Se),onDoFilter:xe[19]||(xe[19]=Se=>q()),onSetCheckbox:xe[20]||(xe[20]=Se=>Re.value=Se),deep_state:t(a)},{id:Q(({item:Se})=>[F(l(Se.id),1),Se.potongan&&Se.potongan.length>0?(s(),_("span",f8,"*")):O("",!0)]),absen:Q(({item:Se,index:mt})=>[Se.trx_absens&&Se.trx_absens.length>0?(s(),pe(dt,{key:0,class:"cursor-pointer",onClick:la=>le(mt)},null,8,["onClick"])):O("",!0)]),val:Q(({item:Se})=>[Se.val?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),val1:Q(({item:Se})=>[e("div",m8,[Se.val1?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0})),Se.absen_not_done&&Se.absen_not_done.length>0?(s(),_("div",h8,l(Se.absen_not_done.join(",")),1)):O("",!0)])]),val2:Q(({item:Se})=>[Se.val2?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),val3:Q(({item:Se})=>[Se.val3?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),val4:Q(({item:Se})=>[Se.val4?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),val5:Q(({item:Se})=>[Se.val5?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),val6:Q(({item:Se})=>[Se.val6?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),salary_paid:Q(({item:Se})=>{var mt,la;return[F(l(Se.salary_paid?t(f)((mt=Se.salary_paid)==null?void 0:mt.period_end).format("MM-Y")+"["+((la=Se.salary_paid)==null?void 0:la.period_part)+"]":""),1)]}),uj_xto:Q(({item:Se})=>{var mt;return[F(l((mt=Se.uj)==null?void 0:mt.xto),1)]}),uj_asst_opt:Q(({item:Se})=>{var mt;return[F(l((mt=Se.uj)==null?void 0:mt.asst_opt),1)]}),uj_tipe:Q(({item:Se})=>{var mt;return[F(l((mt=Se.uj)==null?void 0:mt.tipe),1)]}),uj_harga:Q(({item:Se})=>{var mt;return[F(l(t(d)((mt=Se.uj)==null?void 0:mt.harga)),1)]}),payment_method_name:Q(({item:Se})=>{var mt;return[F(l((mt=Se.payment_method)==null?void 0:mt.name),1)]}),received_payment:Q(({item:Se})=>[F(l(Se.received_payment?"Ya":"Tidak"),1)]),pvr_had_detail:Q(({item:Se})=>[Se.pvr_had_detail?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),pv_complete:Q(({item:Se})=>[Se.pv_complete?(s(),pe(Ge,{key:1})):(s(),pe(Pe,{key:0}))]),deleted_by_username:Q(({item:Se})=>{var mt;return[F(l((mt=Se.deleted_by)==null?void 0:mt.username),1)]}),req_deleted_by_username:Q(({item:Se})=>{var mt;return[F(l((mt=Se.req_deleted_by)==null?void 0:mt.username),1)]}),supir:Q(({item:Se})=>[F(l(Se.supir)+" ",1),Se.potongan&&Se.potongan.length>0&&Se.potongan.map(mt=>mt.potongan_mst.employee_id).indexOf(Se.supir_id)>-1?(s(),_("span",b8," * ")):O("",!0)]),kernet:Q(({item:Se})=>[F(l(Se.kernet)+" ",1),Se.potongan&&Se.potongan.length>0&&Se.potongan.map(mt=>mt.potongan_mst.employee_id).indexOf(Se.kernet_id)>-1?(s(),_("span",y8," * ")):O("",!0)]),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),j(Fe,{type:"delete",show:t(oe),data:t(G),fnClose:_e,fnConfirm:B,enabledOk:t(z)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",x8,[ae(e("textarea",{"onUpdate:modelValue":xe[21]||(xe[21]=Se=>Ee(se)?se.value=Se:null)},null,512),[[Te,t(se)]])])]),_:1},8,["show","data","enabledOk"]),j(Fe,{type:"custome",show:t(Ne),fnClose:()=>Ne.value=!1,fnConfirm:Ze},{words:Q(()=>[F(" Ticket akan "),w8,F(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),j(Fe,{type:"custome",show:t(me),data:t(V),fnClose:tt,fnConfirm:he,enabledOk:t(de)},{words:Q(()=>[F(" Data akan diproses dan "),g8,F(", yakin untuk melanjutkan ? ")]),footer:Q(()=>[F(" Masukkan Alasan Permintaan Penghapusan: "),e("div",$8,[ae(e("textarea",{"onUpdate:modelValue":xe[22]||(xe[22]=Se=>Ee(Me)?Me.value=Se:null)},null,512),[[Te,t(Me)]])])]),_:1},8,["show","data","enabledOk"]),j(Ct,{show:t(L),fnClose:()=>{L.value=!1},fnLoadDBData:w,id:t(R),p_data:t(g),list_cost_center:t(b),online_status:t(v)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),j(ql,{show:t(te),fnClose:()=>{te.value=!1},id:t(ee),p_data:t(g),it_state:t(P),onSetID:xe[23]||(xe[23]=Se=>ee.value=Se),onSetIndex:xe[24]||(xe[24]=Se=>S.value=Se)},null,8,["show","fnClose","id","p_data","it_state"]),j(Rs,{show:t(ve),fnClose:()=>{ve.value=!1},index:t(Ie),p_data:t(g)},null,8,["show","fnClose","index","p_data"]),j(Js,{show:t(U),fnClose:()=>{U.value=!1},id:t(I),p_data:t(g),it_state:t(N),onSetID:xe[25]||(xe[25]=Se=>I.value=Se),onSetIndex:xe[26]||(xe[26]=Se=>S.value=Se)},null,8,["show","fnClose","id","p_data","it_state"])])}})}},dxe=Object.freeze(Object.defineProperty({__proto__:null,default:k8},Symbol.toStringTag,{value:"Module"})),j8={name:"MaterialSymbolsCarTagOutline"},D8={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},S8=e("path",{fill:"currentColor",d:"M6.5 16q.625 0 1.063-.437T8 14.5t-.437-1.062T6.5 13t-1.062.438T5 14.5t.438 1.063T6.5 16m9 0q.5 0 .9-.3t.525-.775q-.5-.1-.95-.338t-.825-.612l-.625-.625q-.25.2-.387.5T14 14.5q0 .625.438 1.063T15.5 16M4 17v-5zm1 2v1q0 .425-.288.713T4 21H3q-.425 0-.712-.288T2 20v-8l2.1-6q.15-.45.538-.725T5.5 5H9v1.375q0 .15.013.313T9.05 7h-3.2L4.8 10h6.375l2 2H4v5h14v-2.025q.55-.05 1.063-.275t.937-.625V20q0 .425-.288.713T19 21h-1q-.425 0-.712-.288T17 20v-1zM15 6q.425 0 .713-.288T16 5t-.288-.712T15 4t-.712.288T14 5t.288.713T15 6m1.55 6.55l-5.1-5.1q-.2-.2-.325-.488T11 6.376V2.5q0-.625.438-1.062T12.5 1h3.875q.3 0 .588.125t.487.325l5.1 5.1q.425.425.425 1.063t-.425 1.062l-3.875 3.875q-.425.425-1.062.425t-1.063-.425m1.075-1.75L20.8 7.625L16.175 3H13v3.175zM16.9 6.9"},null,-1),T8=[S8];function C8(n,o,x,f,d,a){return s(),_("svg",D8,T8)}const zl=Oe(j8,[["render",C8]]),_xe=Object.freeze(Object.defineProperty({__proto__:null,default:zl},Symbol.toStringTag,{value:"Module"})),P8={name:"HealthiconsTruckDriverOutline"},A8={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},M8=e("g",{fill:"currentColor"},[e("path",{d:"M21 11a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1"}),e("path",{fillRule:"evenodd",d:"M33.364 18.52c-.363.285-.834.513-1.402.698a8 8 0 1 1-15.924 0c-.568-.185-1.039-.413-1.401-.698c-.47-.37-.785-.864-.822-1.458c-.035-.551.183-1.019.401-1.349a4.31 4.31 0 0 1 .76-.841c.14-.123.278-.232.406-.327c-.038-.205-.08-.453-.122-.74A26.73 26.73 0 0 1 15 10c0-.314.134-.548.196-.647c.078-.125.17-.232.254-.318c.167-.175.383-.353.62-.524c.48-.348 1.14-.739 1.924-1.105C19.557 6.676 21.704 6 24 6c2.297 0 4.443.677 6.006 1.406a12.03 12.03 0 0 1 1.924 1.105c.237.171.453.35.62.524c.084.086.176.193.254.318c.062.099.196.333.196.647c0 1.602-.13 2.9-.26 3.805c-.042.287-.084.535-.122.74c.128.095.267.204.407.327c.25.219.536.504.759.841c.219.33.436.798.402 1.35c-.037.593-.352 1.087-.822 1.457m-16.362-8.202c.015 1.348.127 2.438.238 3.2c.026.18.052.34.076.482h13.368c.025-.142.05-.303.076-.482c.11-.762.223-1.852.238-3.2a3.886 3.886 0 0 0-.241-.188c-.361-.261-.909-.59-1.597-.911C27.777 8.573 25.924 8 24 8s-3.777.573-5.16 1.219c-.688.321-1.236.65-1.596.91a3.886 3.886 0 0 0-.242.19M16.788 16l-.003.002a5.03 5.03 0 0 0-.495.376c-.178.156-.32.308-.406.44a.778.778 0 0 0-.055.093a.71.71 0 0 0 .044.037c.15.118.472.291 1.1.462c.124.034.257.066.399.098l.009.002c.502.111 1.12.21 1.873.288c1.067.111 2.41.184 4.088.2L24 18c3.227 0 5.314-.201 6.62-.49l.008-.002c.143-.032.276-.064.4-.098c.627-.17.95-.344 1.099-.462a.71.71 0 0 0 .044-.037a.782.782 0 0 0-.054-.093a2.348 2.348 0 0 0-.407-.44a5.018 5.018 0 0 0-.494-.376L31.212 16zm6.94 4c2.642 0 4.69-.14 6.26-.384a6 6 0 1 1-11.98.069c1.463.202 3.338.315 5.72.315m-7.65 18.877A8.07 8.07 0 0 0 16 40v1a1 1 0 0 1-1.864.504a2.99 2.99 0 0 1-2.203.259l-1.932-.518a3 3 0 0 1-2.12-3.674l.776-2.898a3 3 0 0 1 3.674-2.121l1.932.517c.672.18 1.23.575 1.618 1.091a9.987 9.987 0 0 1 8.12-4.16a9.987 9.987 0 0 1 8.116 4.158a2.987 2.987 0 0 1 1.616-1.088l1.932-.517a3 3 0 0 1 3.674 2.12l.777 2.899a3 3 0 0 1-2.122 3.674l-1.931.517a2.99 2.99 0 0 1-2.2-.256A1 1 0 0 1 32 41v-1a8.07 8.07 0 0 0-.078-1.123l-5.204 1.395a3 3 0 0 1-5.436 0zm5.042-.72A3.007 3.007 0 0 1 23 36.172v-4.11a8.009 8.009 0 0 0-6.397 4.886zm10.277-1.21A8.009 8.009 0 0 0 25 32.062v4.109c.904.32 1.61 1.06 1.88 1.987zm2.147-.72a1 1 0 0 1 .707-1.225l1.932-.518a1 1 0 0 1 1.224.707l.777 2.898a1 1 0 0 1-.707 1.225l-1.932.518a1 1 0 0 1-1.225-.708zm-21.73-1.743a1 1 0 0 0-1.226.707l-.776 2.897a1 1 0 0 0 .707 1.225l1.932.518a1 1 0 0 0 1.225-.707l.776-2.898A1 1 0 0 0 13.745 35zM25 39a1 1 0 1 1-2 0a1 1 0 0 1 2 0",clipRule:"evenodd"})],-1),O8=[M8];function N8(n,o,x,f,d,a){return s(),_("svg",A8,O8)}const Ql=Oe(P8,[["render",N8]]),uxe=Object.freeze(Object.defineProperty({__proto__:null,default:Ql},Symbol.toStringTag,{value:"Module"}));const F8={class:"grow flex flex-col"},I8={class:"w-full flex items-center p-1"},Y8={class:"grow"},B8={class:"grow overflow-auto h-0"},q8={class:"p-1 grow"},U8={class:"bg-white flex py-2 justify-between"},H8={class:"flex flex-wrap"},z8={class:"flex items-center justify-center m-2 text-xs"},V8={class:"bg-blue-400 p-2 font-bold text-white"},L8={class:"flex flex-col m-2"},E8=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),R8={class:"flex items-center justify-center"},J8={class:"flex flex-col m-2"},K8=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),G8={class:"flex items-center justify-center"},Z8=["data-real"],W8={class:"flex flex-col m-2"},Q8=e("span",{class:"text-xs"}," Nama Supir ",-1),X8={class:"flex items-center justify-center"},ej=["data-real"],tj={key:0,class:"flex flex-col m-2"},lj=e("span",{class:"text-xs"}," Nama Kernet ",-1),aj={class:"flex items-center justify-center"},sj=["data-real"],oj={class:"flex flex-col m-2"},nj=e("span",{class:"text-xs"}," Tujuan ",-1),rj={class:"flex items-center justify-center"},ij=["onClick"],dj={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},_j={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},uj={class:"p-1 flex flex-wrap overflow-auto items-start"},cj={class:"w-full sm:w-1/2 flex flex-wrap"},pj={class:"flex flex-col m-2"},vj=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),fj={class:""},mj={class:"flex flex-col m-2"},hj=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),bj={class:""},yj={class:"flex flex-col m-2"},xj=e("span",{class:"text-xs"}," Nama Supir ",-1),wj={class:""},gj={key:0,class:"flex flex-col m-2"},$j=e("span",{class:"text-xs"}," Nama Kernet ",-1),kj={class:""},jj={class:"flex flex-col m-2"},Dj=e("span",{class:"text-xs"}," Tujuan ",-1),Sj={class:""},Tj={class:"flex flex-col m-2"},Cj=e("span",{class:"text-xs"}," Info ",-1),Pj={class:""},Aj={class:"flex flex-col m-2"},Mj=e("span",{class:"text-xs"}," Tipe ",-1),Oj={class:""},Nj={class:"flex flex-col m-2"},Fj=e("span",{class:"text-xs"}," Jenis ",-1),Ij={class:""},Yj={class:"w-full sm:w-1/2 text-sm flex justify-center"},Bj={class:"border border-collapse border-black"},qj=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),Uj={class:"p-1"},Hj={class:"p-1"},zj=e("td",{class:"p-1"},"= Rp.",-1),Vj={class:"text-right p-1"},Lj={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Ej=e("th",{colspan:"2",class:"text-right"},"Total",-1),Rj=e("th",{class:"p-1 text-right"},"Rp.",-1),Jj={class:"p-1 text-right"},Kj={class:"flex p-1 justify-end flex-wrap"},Gj={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},Zj=e("div",{class:"w-full text-center"}," Data Diatas akan diverifikasi. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),Wj={__name:"unverified",props:{show:{type:Boolean,required:!0}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="tanggal:desc";const a=u({}),r=ke("token"),p=u([]),i=u({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),c=u(-1),h=u(""),k=A=>Y(this,null,function*(){$().loading_full=!0;const{data:D,error:M,status:T}=yield W("/trx_trp/mandor_verify_trx",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:A.id},retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M,a);return}i.value=D.value.data}),C=()=>Y(this,null,function*(){$().loading_full=!0,a.value={},d.page==1&&(p.value=[]),d.first_row&&delete d.first_row,d.page>1&&(d.first_row=JSON.stringify(p.value[0])),d.filter_status="mandor_trx_unverified";const{data:A,error:D,status:M}=yield W("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D,a);return}p.value=A.value.data}),y=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const A=new FormData;A.append("id",i.value.id),A.append("_method","PUT");let D="post";const{data:M,error:T,status:q}=yield W("/trx_trp/mandor_verify_trx",{method:D,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:A,retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T,a);return}p.value.splice(c.value,1),c.value=-1,v.value=!1,g.value=!1}),g=u(!1),b=u(0),v=u(!1);Je();const w=(A,D)=>{c.value=A,b.value=D,g.value=!0,k(D)},m=ne(()=>h.value!=""?p.value.filter(A=>A.no_pol.toLowerCase().includes(h.value.toLowerCase())||A.supir.toLowerCase().includes(h.value.toLowerCase())||A.kernet.toLowerCase().includes(h.value.toLowerCase())):p.value),S=()=>{let A=h.value;document.querySelectorAll(".to_hl").forEach(D=>{let M=D.dataset.real;var T=D.innerHTML,q=M.toLowerCase().indexOf(A.toLowerCase());q>-1&&A!=""?(T=M.substring(0,q)+"<span class='highlight'>"+M.substring(q,q+A.length)+"</span>"+M.substring(q+A.length),D.innerHTML=T):D.innerHTML=T=M})};return je(()=>m,(A,D)=>{setTimeout(()=>{S()},0)},{deep:!0,immediate:!0}),je(()=>o.show,(A,D)=>{A==!0&&C()},{immediate:!0}),(A,D)=>{var R;const M=kl,T=zl,q=Cl,P=Ql,N=jl,L=Xe;return s(),_(ye,null,[ae(e("section",F8,[e("div",I8,[e("div",Y8,[ae(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":D[0]||(D[0]=J=>Ee(h)?h.value=J:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(h)]])])]),e("div",B8,[(s(!0),_(ye,null,Ae(t(m),(J,re)=>(s(),_("div",q8,[e("div",U8,[e("div",H8,[e("div",z8,[e("div",V8,l(J.id),1)]),e("div",L8,[E8,e("div",R8,[j(M,{class:"mr-1"}),F(" "+l(t(x)(J.tanggal).format("DD-MM-YYYY")),1)])]),e("div",J8,[K8,e("div",G8,[j(T,{class:"mr-1"}),e("span",{class:"to_hl","data-real":J.no_pol},l(J.no_pol),9,Z8)])]),e("div",W8,[Q8,e("div",X8,[j(q,{class:"mr-1"}),e("span",{class:"to_hl","data-real":J.supir},l(J.supir),9,ej)])]),J.kernet?(s(),_("div",tj,[lj,e("div",aj,[j(P,{class:"mr-1"}),e("span",{class:"to_hl","data-real":J.kernet},l(J.kernet),9,sj)])])):O("",!0),e("div",oj,[nj,e("div",rj,[j(N,{class:"mr-1"}),F(" "+l(J.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:te=>w(re,J)}," Detail ",8,ij)])]))),256))])],512),[[Be,n.show]]),ae(e("div",dj,[e("div",_j,[j(L,{title:"Detail Information",fn:()=>{g.value=!1,v.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",uj,[e("div",cj,[e("div",pj,[vj,e("div",fj,l(t(x)(t(i).tanggal).format("DD-MM-YYYY")),1)]),e("div",mj,[hj,e("div",bj,l(t(i).no_pol),1)]),e("div",yj,[xj,e("div",wj,l(t(i).supir),1)]),t(i).kernet?(s(),_("div",gj,[$j,e("div",kj,l(t(i).kernet),1)])):O("",!0),e("div",jj,[Dj,e("div",Sj,l(t(i).xto),1)]),e("div",Tj,[Cj,e("div",Pj,l((R=t(i).uj)==null?void 0:R.asst_opt),1)]),e("div",Aj,[Mj,e("div",Oj,l(t(i).tipe),1)]),e("div",Nj,[Fj,e("div",Ij,l(t(i).jenis),1)])]),e("div",Yj,[e("table",Bj,[qj,(s(!0),_(ye,null,Ae(t(i).details_uj,J=>(s(),_("tr",null,[e("td",Uj,l(J.ordinal)+". ",1),e("td",Hj,l(J.xdesc)+" "+l(J.qty<=1?"":t(f)(J.qty||0)+" x Rp."+t(f)(J.harga||0)),1),zj,e("td",Vj,l(t(f)(J.qty*J.harga)),1)]))),256)),e("tr",Lj,[Ej,Rj,e("th",Jj,l(t(f)(t(i).amount)),1)])])])]),ae(e("div",Kj,[e("button",{class:"rounded m-1",onClick:D[1]||(D[1]=J=>g.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:D[2]||(D[2]=J=>v.value=!0)}," Verify ")],512),[[Be,!t(v)]]),ae(e("div",Gj,[Zj,e("button",{class:"rounded m-1 bg-white",onClick:D[3]||(D[3]=J=>(v.value=!1,g.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:D[4]||(D[4]=J=>y())}," Ya ")],512),[[Be,t(v)]])])],512),[[Be,t(g)]])],64)}}},ts=Wj,cxe=Object.freeze(Object.defineProperty({__proto__:null,default:ts},Symbol.toStringTag,{value:"Module"})),Qj={class:"w-full h-full flex flex-col"},Xj={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-100"},eD=e("div",{class:"w-full flex justify-between flex-wrap"},[e("div",{class:"grow flex flex-wrap justify-between"},[e("div",{class:"flex font-bold"})])],-1),tD={__name:"ritase",setup(n){const o=u("unverified");return(x,f)=>{const d=_t,a=ts;return s(),_("div",Qj,[j(d,{title:"List Transaction"}),e("div",Xj,[eD,j(a,{show:t(o)=="unverified"},null,8,["show"])])])}}},pxe=Object.freeze(Object.defineProperty({__proto__:null,default:tD},Symbol.toStringTag,{value:"Module"})),lD={name:"MdiCogs"},aD={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},sD=e("path",{fill:"currentColor",d:"M15.9 18.45c1.35 0 2.45-1.1 2.45-2.45s-1.1-2.45-2.45-2.45c-1.36 0-2.45 1.1-2.45 2.45s1.09 2.45 2.45 2.45m5.2-1.77l1.48 1.16c.13.11.17.29.08.45l-1.4 2.42a.35.35 0 0 1-.43.15l-1.74-.7c-.36.28-.76.51-1.18.69l-.27 1.85c-.02.17-.17.3-.34.3h-2.8c-.18 0-.32-.13-.35-.3l-.26-1.85c-.43-.18-.82-.41-1.18-.69l-1.75.7c-.15.06-.34 0-.42-.15l-1.4-2.42a.35.35 0 0 1 .08-.45l1.48-1.16l-.05-.68l.05-.69l-1.48-1.15a.35.35 0 0 1-.08-.45l1.4-2.42c.08-.16.27-.22.42-.16l1.75.71c.36-.28.75-.52 1.18-.69l.26-1.86c.03-.16.17-.29.35-.29h2.8c.17 0 .32.13.34.29l.27 1.86c.42.17.82.41 1.18.69l1.74-.71c.17-.06.34 0 .43.16l1.4 2.42c.09.15.05.34-.08.45l-1.48 1.15l.05.69zM6.69 8.07c.87 0 1.57-.7 1.57-1.57s-.7-1.58-1.57-1.58A1.58 1.58 0 0 0 5.11 6.5c0 .87.71 1.57 1.58 1.57m3.34-1.13l.97.74c.07.07.09.19.03.29l-.9 1.56c-.05.1-.17.14-.27.1l-1.12-.45l-.74.44l-.19 1.19c-.02.11-.11.19-.22.19h-1.8c-.12 0-.21-.08-.23-.19L5.4 9.62l-.76-.44l-1.14.45c-.09.04-.2 0-.26-.1l-.9-1.56c-.06-.1-.03-.22.05-.29l.95-.74l-.03-.44l.03-.44l-.95-.74a.23.23 0 0 1-.05-.29l.9-1.56c.06-.1.17-.14.26-.1l1.13.45l.77-.44l.16-1.19c.02-.11.11-.19.23-.19h1.8c.11 0 .2.08.22.19L8 3.38l.74.44l1.12-.45c.1-.04.22 0 .27.1l.9 1.56c.06.1.04.22-.03.29l-.97.74l.03.44z"},null,-1),oD=[sD];function nD(n,o,x,f,d,a){return s(),_("svg",aD,oD)}const ls=Oe(lD,[["render",nD]]),vxe=Object.freeze(Object.defineProperty({__proto__:null,default:ls},Symbol.toStringTag,{value:"Module"}));const at=n=>(nt("data-v-57b73692"),n=n(),rt(),n),rD={class:"box-fixed"},iD={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},dD={class:"w-full flex flex-col items-center grow overflow-auto"},_D={class:"w-full flex flex-row flex-wrap"},uD={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},cD=at(()=>e("label",{for:""},"U.Jalan Per",-1)),pD={class:"card-border"},vD={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},fD=at(()=>e("label",{for:""},"Jenis",-1)),mD={class:"card-border"},hD={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},bD=at(()=>e("label",{for:""},"Supir",-1)),yD={class:"card-border"},xD={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},wD=at(()=>e("label",{for:""},"Kernet",-1)),gD={class:"card-border"},$D={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},kD=at(()=>e("label",{for:""},"No Pol",-1)),jD={class:"card-border"},DD={key:0,class:"w-full flex flex-wrap"},SD={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},TD=at(()=>e("label",{for:""},"Tujuan",-1)),CD={class:"card-border"},PD={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},AD=at(()=>e("label",{for:""},"Info",-1)),MD={class:"card-border"},OD={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ND=at(()=>e("label",{for:""},"Tipe",-1)),FD={class:"card-border"},ID={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},YD=at(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),BD={class:"card-border"},qD=at(()=>e("label",{for:""},"Peralihan",-1)),UD=["disabled"],HD=at(()=>e("option",{value:""},null,-1)),zD=["value"],VD={class:"text-red-500"},LD={key:2,class:"w-full flex flex-col flex-wrap p-1"},ED=at(()=>e("label",{for:""},"Tiket A",-1)),RD={id:"ticket_a"},JD=["value"],KD={class:"text-red-500"},GD={key:3,class:"w-full flex flex-wrap"},ZD={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},WD=at(()=>e("label",{for:""},"In At",-1)),QD={class:"card-border disabled"},XD={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},e7=at(()=>e("label",{for:""},"Out At",-1)),t7={class:"card-border disabled"},l7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},a7=at(()=>e("label",{for:""},"Bruto",-1)),s7={class:"card-border disabled"},o7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},n7=at(()=>e("label",{for:""},"Tara",-1)),r7={class:"card-border disabled"},i7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},d7=at(()=>e("label",{for:""},"Netto",-1)),_7={class:"card-border disabled"},u7={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},c7=at(()=>e("label",{for:""},"No Pol",-1)),p7={class:"card-border disabled"},v7={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},f7=at(()=>e("label",{for:""},"Supir",-1)),m7={class:"card-border disabled"},h7={key:4,class:"w-full flex flex-col flex-wrap p-1"},b7=at(()=>e("label",{for:""},"Tiket B",-1)),y7={id:"ticket_b"},x7=["value"],w7={class:"text-red-500"},g7={key:5,class:"w-full flex flex-wrap"},$7={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},k7=at(()=>e("label",{for:""},"In At",-1)),j7={class:"card-border disabled"},D7={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},S7=at(()=>e("label",{for:""},"Out At",-1)),T7={class:"card-border disabled"},C7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},P7=at(()=>e("label",{for:""},"Bruto ",-1)),A7={class:"card-border disabled"},M7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},O7=at(()=>e("label",{for:""},"Tara ",-1)),N7={class:"card-border disabled"},F7={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},I7=at(()=>e("label",{for:""},"Netto ",-1)),Y7={class:"card-border disabled"},B7={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},q7=at(()=>e("label",{for:""},"No Pol",-1)),U7={class:"card-border disabled"},H7={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},z7=at(()=>e("label",{for:""},"Supir",-1)),V7={class:"card-border disabled"},L7={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},E7=at(()=>e("label",{for:""},"In At",-1)),R7={class:"text-red-500"},J7={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},K7=at(()=>e("label",{for:""},"Out At",-1)),G7={class:"text-red-500"},Z7={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},W7=at(()=>e("label",{for:""},"Bruto",-1)),Q7={class:"text-red-500"},X7={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},eS=at(()=>e("label",{for:""},"Tara",-1)),tS={class:"text-red-500"},lS={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},aS=at(()=>e("label",{for:""},"Netto",-1)),sS={class:"card-border disabled"},oS={class:"w-full flex flex-wrap"},nS=at(()=>e("div",{class:"w-full sm:w-full md:w-6/12 lg:w-4/12 flex flex-col flex-wrap p-1 justify-end"},null,-1)),rS={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},iS=at(()=>e("label",{for:"",class:"font-bold"},"Selisih Bruto ",-1)),dS={class:"card-border disabled"},_S={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},uS=at(()=>e("label",{for:"",class:"font-bold"},"Selisih Tara ",-1)),cS={class:"card-border disabled"},pS={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},vS=at(()=>e("label",{for:"",class:"font-bold"},"Selisih Netto ",-1)),fS={class:"card-border disabled"},mS={class:"w-full flex flex-col flex-wrap p-1"},hS=at(()=>e("label",{for:""},"Note",-1)),bS={class:"w-full flex items-center justify-end"},yS={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",transition_target:"",transition_type:""};let a=ie({},d);const r=u(ie({},d)),p=ke("token"),i=u({}),c=v=>{r.value.jenis=="TBS"&&o.fnLoadDBData(r.value.jenis,v.target.value)},h=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const v=new FormData;if(v.append("tanggal",x(r.value.tanggal).format("Y-MM-DD")),v.append("jenis",r.value.jenis),v.append("id_uj",r.value.id_uj),v.append("xto",r.value.xto),v.append("transition_target",r.value.transition_target),r.value.ticket_a_no){let M=k.value.filter(T=>T.TicketNo==r.value.ticket_a_no);M.length==0&&r.value.ticket_a_no==a.ticket_a_no?v.append("ticket_a_id",a.ticket_a_id):v.append("ticket_a_id",M.length>0?M[0].TicketID:"")}if(r.value.ticket_b_no){let M=C.value.filter(T=>T.TicketNo==r.value.ticket_b_no);M.length==0&&r.value.ticket_b_no==a.ticket_b_no?v.append("ticket_b_id",a.ticket_b_id):v.append("ticket_b_id",M.length>0?M[0].TicketID:"")}v.append("ticket_a_no",r.value.ticket_a_no),v.append("ticket_b_no",r.value.ticket_b_no),v.append("ticket_b_bruto",r.value.ticket_b_bruto),v.append("ticket_b_tara",r.value.ticket_b_tara),r.value.ticket_b_in_at&&v.append("ticket_b_in_at",x(r.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),r.value.ticket_b_out_at&&v.append("ticket_b_out_at",x(r.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),v.append("supir",r.value.supir),v.append("kernet",r.value.kernet),v.append("no_pol",r.value.no_pol),v.append("ticket_note",r.value.ticket_note);let w="post",m=o.id;m==0||(v.append("id",m),v.append("_method","PUT"));const{data:S,error:A,status:D}=yield W("/trx_trp_ticket",{method:w,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:v,retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A,i);return}if(r.value.ticket_a_netto=parseFloat(r.value.ticket_a_bruto)-parseFloat(r.value.ticket_a_tara),r.value.ticket_b_netto=parseFloat(r.value.ticket_b_bruto)-parseFloat(r.value.ticket_b_tara),r.value.updated_at=S.value.updated_at,o.id<=0)r.value.id=S.value.id,r.value.created_at=S.value.created_at,o.p_data.unshift(r.value);else{let M=o.p_data.map(T=>T.id).indexOf(o.id);M>-1&&o.p_data.splice(M,1,ie({},r.value))}o.fnClose()}),k=ne(()=>{let v=[];return r.value.jenis=="CPO"?v=["cpo"]:r.value.jenis=="PK"?v=["kernel"]:v=["mtbs"],o.list_ticket.filter(w=>v.indexOf(w.ProductName.toLowerCase())>-1)}),C=ne(()=>{let v=[];return r.value.transition_target!=""?v=["tbs","rtbs"]:r.value.jenis=="TBSK"?v=["tbs"]:r.value.jenis=="TBS"&&(v=["rtbs"]),o.list_ticket.filter(w=>v.indexOf(w.ProductName.toLowerCase())>-1)}),y=ne(()=>!1),g=()=>Y(this,null,function*(){$().loading_full=!0;const{data:v,error:w,status:m}=yield W("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w);return}r.value=v.value.data,a=ie({},v.value.data),o.fnLoadDBData(r.value.jenis,r.value.transition_target)});je(()=>o.show,(v,w)=>{v==!0&&(r.value=ie({},d),i.value={},o.id!=0&&g())},{immediate:!0});let b={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return je(()=>r.value.ticket_a_no,(v,w)=>{if(v==""||v){if(v){let m=k.value.filter(S=>S.TicketNo==r.value.ticket_a_no);m.length>0?b={id:m[0].TicketID,bruto:m[0].Bruto,tara:m[0].Tara,netto:m[0].Netto,supir:m[0].NamaSupir,no_pol:m[0].VehicleNo,in_at:m[0].DateTimeIn,out_at:m[0].DateTimeOut}:r.value.ticket_a_no==a.ticket_a_no&&(b={id:a.ticket_a_id,bruto:a.ticket_a_bruto,tara:a.ticket_a_tara,netto:a.ticket_a_netto,supir:a.ticket_a_supir,no_pol:a.ticket_a_no_pol,in_at:a.ticket_a_in_at,out_at:a.ticket_a_out_at})}v==""&&(b={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),r.value.ticket_a_id=b.id,r.value.ticket_a_bruto=b.bruto,r.value.ticket_a_tara=b.tara,r.value.ticket_a_netto=b.netto,r.value.ticket_a_in_at=b.in_at,r.value.ticket_a_out_at=b.out_at,r.value.ticket_a_supir=b.supir,r.value.ticket_a_no_pol=b.no_pol}},{deep:!0,immediate:!0}),je(()=>r.value.ticket_b_no,(v,w)=>{if(["TBS","TBSK"].indexOf(r.value.jenis)>-1&&(v==""||v)){if(v){let m=C.value.filter(S=>S.TicketNo==r.value.ticket_b_no);m.length>0?b={id:m[0].TicketID,bruto:m[0].Bruto,tara:m[0].Tara,netto:m[0].Netto,supir:m[0].NamaSupir,no_pol:m[0].VehicleNo,in_at:m[0].DateTimeIn,out_at:m[0].DateTimeOut}:r.value.ticket_b_no==a.ticket_b_no&&(b={id:a.ticket_b_id,bruto:a.ticket_b_bruto,tara:a.ticket_b_tara,netto:a.ticket_b_netto,supir:a.ticket_b_supir,no_pol:a.ticket_b_no_pol,in_at:a.ticket_b_in_at,out_at:a.ticket_b_out_at})}v==""&&(b={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),r.value.ticket_b_id=b.id,r.value.ticket_b_bruto=b.bruto,r.value.ticket_b_tara=b.tara,r.value.ticket_b_netto=b.netto,r.value.ticket_b_in_at=b.in_at,r.value.ticket_b_out_at=b.out_at,r.value.ticket_b_supir=b.supir,r.value.ticket_b_no_pol=b.no_pol}},{deep:!0,immediate:!0}),(v,w)=>{var M;const m=Xe,S=Vt("vue-date-picker"),A=zt,D=dl;return ae((s(),_("section",rD,[e("div",null,[j(m,{title:"Form Ticket"+(n.id?" #"+n.id:""),fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["title","fn"]),e("form",iD,[e("div",dD,[e("div",_D,[e("div",uD,[cD,e("div",pD,l(t(r).tanggal?t(x)(t(r).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",vD,[fD,e("div",mD,l(t(r).jenis),1)]),e("div",hD,[bD,e("div",yD,l(t(r).supir),1)]),e("div",xD,[wD,e("div",gD,l(t(r).kernet),1)]),e("div",$D,[kD,e("div",jD,l(t(r).no_pol),1)]),t(r).jenis!=""?(s(),_("div",DD,[e("div",SD,[TD,e("div",CD,l(t(r).xto),1)]),e("div",PD,[AD,e("div",MD,l((M=t(r).uj)==null?void 0:M.asst_opt),1)]),e("div",OD,[ND,e("div",FD,l(t(r).tipe),1)]),e("div",ID,[YD,e("div",BD,l(t(f)(t(r).amount||0)),1)])])):O("",!0),t(r).jenis=="TBS"?(s(),_("div",{key:1,class:"w-full p-1",onChange:w[1]||(w[1]=T=>c(T))},[qD,ae(e("select",{"onUpdate:modelValue":w[0]||(w[0]=T=>t(r).transition_target=T),disabled:t(r).transition_type=="From"},[HD,(s(!0),_(ye,null,Ae(t($)().list_pabrik,T=>(s(),_("option",{value:T},l(T),9,zD))),256))],8,UD),[[We,t(r).transition_target]]),e("p",VD,l(t(i).transition_target),1)],32)):O("",!0),t(r).jenis!=""&&t(r).jenis!="TBSK"?(s(),_("div",LD,[ED,ae(e("input",{type:"text",list:"ticket_a","onUpdate:modelValue":w[2]||(w[2]=T=>t(r).ticket_a_no=T)},null,512),[[Te,t(r).ticket_a_no]]),e("datalist",RD,[(s(!0),_(ye,null,Ae(t(k),T=>(s(),_("option",{value:T.TicketNo},l(T.TicketNo+"-"+T.VehicleNo+"-"+T.NamaSupir),9,JD))),256))]),e("p",KD,l(t(i).ticket),1)])):O("",!0),t(r).jenis!=""&&t(r).jenis!="TBSK"?(s(),_("div",GD,[e("div",ZD,[WD,e("div",QD,l(t(r).ticket_a_in_at?t(x)(t(r).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",XD,[e7,e("div",t7,l(t(r).ticket_a_out_at?t(x)(t(r).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",l7,[a7,e("div",s7,l(t(r).ticket_a_bruto?t(f)(t(r).ticket_a_bruto):0),1)]),e("div",o7,[n7,e("div",r7,l(t(r).ticket_a_tara?t(f)(t(r).ticket_a_tara):0),1)]),e("div",i7,[d7,e("div",_7,l(t(r).ticket_a_bruto?t(f)(t(r).ticket_a_bruto-t(r).ticket_a_tara):0),1)]),e("div",u7,[c7,e("div",p7,l(t(r).ticket_a_no_pol),1)]),e("div",v7,[f7,e("div",m7,l(t(r).ticket_a_supir),1)])])):O("",!0),["TBS","TBSK"].indexOf(t(r).jenis)>-1?(s(),_("div",h7,[b7,ae(e("input",{type:"text",list:"ticket_b","onUpdate:modelValue":w[3]||(w[3]=T=>t(r).ticket_b_no=T)},null,512),[[Te,t(r).ticket_b_no]]),e("datalist",y7,[(s(!0),_(ye,null,Ae(t(C),T=>(s(),_("option",{value:T.TicketNo},l(T.TicketNo+"-"+T.VehicleNo+"-"+T.NamaSupir),9,x7))),256))]),e("p",w7,l(t(i).ticket),1)])):O("",!0),["TBS","TBSK"].indexOf(t(r).jenis)>-1?(s(),_("div",g7,[e("div",$7,[k7,e("div",j7,l(t(r).ticket_b_in_at?t(x)(t(r).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",D7,[S7,e("div",T7,l(t(r).ticket_b_out_at?t(x)(t(r).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",C7,[P7,e("div",A7,l(t(r).ticket_b_bruto?t(f)(t(r).ticket_b_bruto):0),1)]),e("div",M7,[O7,e("div",N7,l(t(r).ticket_b_tara?t(f)(t(r).ticket_b_tara):0),1)]),e("div",F7,[I7,e("div",Y7,l(t(r).ticket_b_bruto?t(f)(t(r).ticket_b_bruto-t(r).ticket_b_tara):0),1)]),e("div",B7,[q7,e("div",U7,l(t(r).ticket_b_no_pol),1)]),e("div",H7,[z7,e("div",V7,l(t(r).ticket_b_supir),1)])])):O("",!0),["CPO","PK"].indexOf(t(r).jenis)>-1?(s(),_("div",L7,[E7,j(A,null,{default:Q(()=>[j(S,{modelValue:t(r).ticket_b_in_at,"onUpdate:modelValue":w[4]||(w[4]=T=>t(r).ticket_b_in_at=T),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",R7,l(t(i).ticket_b_in_at),1)])):O("",!0),["CPO","PK"].indexOf(t(r).jenis)>-1?(s(),_("div",J7,[K7,j(A,null,{default:Q(()=>[j(S,{modelValue:t(r).ticket_b_out_at,"onUpdate:modelValue":w[5]||(w[5]=T=>t(r).ticket_b_out_at=T),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",G7,l(t(i).ticket_b_out_at),1)])):O("",!0),["CPO","PK"].indexOf(t(r).jenis)>-1?(s(),_("div",Z7,[W7,e("div",null,[j(D,{class:"card-border p-1",type:"text",value:t(r).ticket_b_bruto||0,onInput:w[6]||(w[6]=T=>t(r).ticket_b_bruto=T),show:n.show},null,8,["value","show"])]),e("p",Q7,l(t(i).ticket_b_bruto),1)])):O("",!0),["CPO","PK"].indexOf(t(r).jenis)>-1?(s(),_("div",X7,[eS,e("div",null,[j(D,{class:"card-border p-1",type:"text",value:t(r).ticket_b_tara||0,onInput:w[7]||(w[7]=T=>t(r).ticket_b_tara=T),show:n.show},null,8,["value","show"])]),e("p",tS,l(t(i).ticket_b_tara),1)])):O("",!0),["CPO","PK"].indexOf(t(r).jenis)>-1?(s(),_("div",lS,[aS,e("div",sS,l(t(r).ticket_b_bruto?t(f)(t(r).ticket_b_bruto-t(r).ticket_b_tara):0),1)])):O("",!0),e("div",oS,[nS,e("div",rS,[iS,e("div",dS,l(t(f)(t(r).ticket_b_bruto-t(r).ticket_a_bruto||0)),1)]),e("div",_S,[uS,e("div",cS,l(t(f)(t(r).ticket_b_tara-t(r).ticket_a_tara||0)),1)]),e("div",pS,[vS,e("div",fS,l(t(f)(t(r).ticket_b_bruto-t(r).ticket_b_tara-(t(r).ticket_a_bruto-t(r).ticket_a_tara)||0)),1)])]),e("div",mS,[hS,ae(e("textarea",{class:"w-full h-32","onUpdate:modelValue":w[8]||(w[8]=T=>t(r).ticket_note=T)},null,512),[[Te,t(r).ticket_note]])])])]),e("div",bS,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:w[9]||(w[9]=T=>n.fnClose())}," Cancel "),t(y)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:w[10]||(w[10]=ze(T=>h(),["prevent"]))}," Save "))])])])],512)),[[Be,n.show]])}}},as=Oe(yS,[["__scopeId","data-v-57b73692"]]),fxe=Object.freeze(Object.defineProperty({__proto__:null,default:as},Symbol.toStringTag,{value:"Module"}));const it=n=>(nt("data-v-d212866f"),n=n(),rt(),n),xS={class:"box-fixed"},wS={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},gS={class:"w-full flex flex-col items-center grow overflow-auto"},$S={class:"w-full flex flex-row flex-wrap"},kS={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jS=it(()=>e("label",{for:""},"U.Jalan Per",-1)),DS={class:"card-border"},SS={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},TS=it(()=>e("label",{for:""},"Jenis",-1)),CS={class:"card-border"},PS={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},AS=it(()=>e("label",{for:""},"Supir",-1)),MS={class:"card-border"},OS={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},NS=it(()=>e("label",{for:""},"Kernet",-1)),FS={class:"card-border"},IS={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},YS=it(()=>e("label",{for:""},"No Pol",-1)),BS={class:"card-border"},qS={key:0,class:"w-full flex flex-wrap"},US={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},HS={for:""},zS={class:"card-border"},VS={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},LS=it(()=>e("label",{for:""},"Info",-1)),ES={class:"card-border"},RS={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},JS=it(()=>e("label",{for:""},"Tipe",-1)),KS={class:"card-border"},GS={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ZS=it(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),WS={class:"card-border"},QS={key:1,class:"w-full p-1"},XS=it(()=>e("label",{for:""},"Peralihan",-1)),eT={class:"card-border"},tT={key:2,class:"w-full flex flex-col flex-wrap p-1"},lT=it(()=>e("label",{for:""},"Tiket A",-1)),aT={class:"card-border"},sT={key:3,class:"w-full flex flex-wrap"},oT={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},nT=it(()=>e("label",{for:""},"In At",-1)),rT={class:"card-border disabled"},iT={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},dT=it(()=>e("label",{for:""},"Out At",-1)),_T={class:"card-border disabled"},uT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},cT=it(()=>e("label",{for:""},"Bruto",-1)),pT={class:"card-border disabled"},vT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fT=it(()=>e("label",{for:""},"Tara",-1)),mT={class:"card-border disabled"},hT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},bT=it(()=>e("label",{for:""},"Netto",-1)),yT={class:"card-border disabled"},xT={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},wT=it(()=>e("label",{for:""},"No Pol",-1)),gT={class:"card-border disabled"},$T={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},kT=it(()=>e("label",{for:""},"Supir",-1)),jT={class:"card-border disabled"},DT={key:4,class:"w-full flex flex-col flex-wrap p-1"},ST=it(()=>e("label",{for:""},"Tiket B",-1)),TT={class:"card-border"},CT={key:5,class:"w-full flex flex-wrap"},PT={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},AT=it(()=>e("label",{for:""},"In At",-1)),MT={class:"card-border disabled"},OT={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},NT=it(()=>e("label",{for:""},"Out At",-1)),FT={class:"card-border disabled"},IT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},YT=it(()=>e("label",{for:""},"Bruto ",-1)),BT={class:"card-border disabled"},qT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},UT=it(()=>e("label",{for:""},"Tara ",-1)),HT={class:"card-border disabled"},zT={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},VT=it(()=>e("label",{for:""},"Netto ",-1)),LT={class:"card-border disabled"},ET={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},RT=it(()=>e("label",{for:""},"No Pol",-1)),JT={class:"card-border disabled"},KT={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},GT=it(()=>e("label",{for:""},"Supir",-1)),ZT={class:"card-border disabled"},WT={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},QT=it(()=>e("label",{for:""},"In At",-1)),XT={class:"card-border"},eC={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},tC=it(()=>e("label",{for:""},"Out At",-1)),lC={class:"card-border"},aC={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},sC=it(()=>e("label",{for:""},"Bruto",-1)),oC={class:"card-border"},nC={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},rC=it(()=>e("label",{for:""},"Tara",-1)),iC={class:"card-border"},dC={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_C=it(()=>e("label",{for:""},"Netto",-1)),uC={class:"card-border"},cC={class:"w-full flex flex-wrap"},pC=it(()=>e("div",{class:"w-full sm:w-full md:w-6/12 lg:w-4/12 flex flex-col flex-wrap p-1 justify-end"},null,-1)),vC={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},fC=it(()=>e("label",{for:"",class:"font-bold"},"Selisih Bruto ",-1)),mC={class:"card-border disabled"},hC={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},bC=it(()=>e("label",{for:"",class:"font-bold"},"Selisih Tara ",-1)),yC={class:"card-border disabled"},xC={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},wC=it(()=>e("label",{for:"",class:"font-bold"},"Selisih Netto ",-1)),gC={class:"card-border disabled"},$C={class:"w-full flex flex-col flex-wrap p-1"},kC=it(()=>e("label",{for:""},"Note",-1)),jC={class:"card-border"},DC={class:"w-full flex items-center justify-end"},SC={class:"w-full flex flex-wrap p-3 items-center"},TC=it(()=>e("div",null," Di Validasi oleh : ",-1)),CC={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},PC={key:0},AC={key:1},MC={key:2},OC={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val_ticket:0,val_ticket_by:{username:""},val_ticket_at:""})),r=ke("token"),p=u(null),i=u(null),c=()=>Y(this,null,function*(){$().loading_full=!0;const C=new FormData;let y="post",g=o.id;g==0||(C.append("id",g),C.append("_method","PUT"));const{data:b,error:v,status:w}=yield W("/trx_trp_val_ticket",{method:y,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:C,retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v);return}a.value.val_ticket=b.value.val_ticket,a.value.val_ticket_by=b.value.val_ticket_by,a.value.val_ticket_at=b.value.val_ticket_at;let m=o.p_data.map(S=>S.id).indexOf(o.id);m>-1&&o.p_data.splice(m,1,ie({},a.value)),o.fnClose()}),h=()=>Y(this,null,function*(){$().loading_full=!0;const C=new FormData;let y="post",g=o.id;g==0||(C.append("id",g),C.append("_method","PUT"));const{data:b,error:v,status:w}=yield W("/trx_trp_unval_ticket",{method:y,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:C,retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v);return}a.value.val_ticket=b.value.val_ticket,a.value.val_ticket_by=b.value.val_ticket_by,a.value.val_ticket_at=b.value.val_ticket_at;let m=o.p_data.map(S=>S.id).indexOf(o.id);m>-1&&o.p_data.splice(m,1,ie({},a.value)),o.fnClose()}),k=()=>Y(this,null,function*(){$().loading_full=!0;const{data:C,error:y,status:g}=yield W("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y);return}a.value=C.value.data});return je(()=>o.show,(C,y)=>{C==!0&&(o.it_state==1&&setTimeout(()=>{p.value.focus()},1),o.it_state==0&&setTimeout(()=>{i.value.focus()},1),k())},{immediate:!0}),(C,y)=>{var b;const g=Xe;return ae((s(),_("section",xS,[e("div",null,[j(g,{title:"Form Ticket Validation"+(n.id?" #"+n.id:""),fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["title","fn"]),e("form",wS,[e("div",gS,[e("div",$S,[e("div",kS,[jS,e("div",DS,l(t(a).tanggal?t(x)(t(a).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",SS,[TS,e("div",CS,l(t(a).jenis),1)]),e("div",PS,[AS,e("div",MS,l(t(a).supir),1)]),e("div",OS,[NS,e("div",FS,l(t(a).kernet),1)]),e("div",IS,[YS,e("div",BS,l(t(a).no_pol),1)]),t(a).jenis!=""?(s(),_("div",qS,[e("div",US,[e("label",HS,"Tujuan "+l(t(a).id_uj?" #"+t(a).id_uj:""),1),e("div",zS,l(t(a).xto),1)]),e("div",VS,[LS,e("div",ES,l((b=t(a).uj)==null?void 0:b.asst_opt),1)]),e("div",RS,[JS,e("div",KS,l(t(a).tipe),1)]),e("div",GS,[ZS,e("div",WS,l(t(f)(t(a).amount||0)),1)])])):O("",!0),t(a).jenis=="TBS"?(s(),_("div",QS,[XS,e("div",eT,l(t(a).transition_target),1)])):O("",!0),t(a).jenis!=""&&t(a).jenis!="TBSK"?(s(),_("div",tT,[lT,e("div",aT,l(t(a).ticket_a_no),1)])):O("",!0),t(a).jenis!=""&&t(a).jenis!="TBSK"?(s(),_("div",sT,[e("div",oT,[nT,e("div",rT,l(t(a).ticket_a_in_at?t(x)(t(a).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",iT,[dT,e("div",_T,l(t(a).ticket_a_out_at?t(x)(t(a).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",uT,[cT,e("div",pT,l(t(a).ticket_a_bruto?t(f)(t(a).ticket_a_bruto):0),1)]),e("div",vT,[fT,e("div",mT,l(t(a).ticket_a_tara?t(f)(t(a).ticket_a_tara):0),1)]),e("div",hT,[bT,e("div",yT,l(t(a).ticket_a_bruto?t(f)(t(a).ticket_a_bruto-t(a).ticket_a_tara):0),1)]),e("div",xT,[wT,e("div",gT,l(t(a).ticket_a_no_pol),1)]),e("div",$T,[kT,e("div",jT,l(t(a).ticket_a_supir),1)])])):O("",!0),["TBS","TBSK"].indexOf(t(a).jenis)>-1?(s(),_("div",DT,[ST,e("div",TT,l(t(a).ticket_b_no),1)])):O("",!0),["TBS","TBSK"].indexOf(t(a).jenis)>-1?(s(),_("div",CT,[e("div",PT,[AT,e("div",MT,l(t(a).ticket_b_in_at?t(x)(t(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",OT,[NT,e("div",FT,l(t(a).ticket_b_out_at?t(x)(t(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",IT,[YT,e("div",BT,l(t(a).ticket_b_bruto?t(f)(t(a).ticket_b_bruto):0),1)]),e("div",qT,[UT,e("div",HT,l(t(a).ticket_b_tara?t(f)(t(a).ticket_b_tara):0),1)]),e("div",zT,[VT,e("div",LT,l(t(a).ticket_b_bruto?t(f)(t(a).ticket_b_bruto-t(a).ticket_b_tara):0),1)]),e("div",ET,[RT,e("div",JT,l(t(a).ticket_b_no_pol),1)]),e("div",KT,[GT,e("div",ZT,l(t(a).ticket_b_supir),1)])])):O("",!0),["CPO","PK"].indexOf(t(a).jenis)>-1?(s(),_("div",WT,[QT,e("div",XT,l(t(a).ticket_b_in_at?t(x)(t(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):O("",!0),["CPO","PK"].indexOf(t(a).jenis)>-1?(s(),_("div",eC,[tC,e("div",lC,l(t(a).ticket_b_out_at?t(x)(t(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):O("",!0),["CPO","PK"].indexOf(t(a).jenis)>-1?(s(),_("div",aC,[sC,e("div",oC,l(t(f)(t(a).ticket_b_bruto||0)),1)])):O("",!0),["CPO","PK"].indexOf(t(a).jenis)>-1?(s(),_("div",nC,[rC,e("div",iC,l(t(f)(t(a).ticket_b_tara||0)),1)])):O("",!0),["CPO","PK"].indexOf(t(a).jenis)>-1?(s(),_("div",dC,[_C,e("div",uC,l(t(f)(t(a).ticket_b_netto||0)),1)])):O("",!0),e("div",cC,[pC,e("div",vC,[fC,e("div",mC,l(t(f)(t(a).ticket_b_bruto-t(a).ticket_a_bruto||0)),1)]),e("div",hC,[bC,e("div",yC,l(t(f)(t(a).ticket_b_tara-t(a).ticket_a_tara||0)),1)]),e("div",xC,[wC,e("div",gC,l(t(f)(t(a).ticket_b_bruto-t(a).ticket_b_tara-(t(a).ticket_a_bruto-t(a).ticket_a_tara)||0)),1)])]),e("div",$C,[kC,e("div",jC,l(t(a).ticket_note),1)])])]),e("div",DC,[e("div",SC,[TC,t(a).val||t(a).val1||t(a).val_ticket?(s(),_("div",CC,[t(a).val?(s(),_("div",PC," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val1?(s(),_("div",AC," App 2 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val_ticket?(s(),_("div",MC," App 3 : "+l(t(a).val_ticket_by.username)+" ( "+l(t(a).val_ticket_at?t(x)(t(a).val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:y[0]||(y[0]=v=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:p,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:y[1]||(y[1]=ze(v=>c(),["prevent"]))}," Validasi ",512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:y[2]||(y[2]=ze(v=>h(),["prevent"]))}," Unvalidasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},ss=Oe(OC,[["__scopeId","data-v-d212866f"]]),mxe=Object.freeze(Object.defineProperty({__proto__:null,default:ss},Symbol.toStringTag,{value:"Module"})),NC={name:"MaterialSymbolsRefresh"},FC={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},IC=e("path",{fill:"currentColor",d:"M12 20q-3.35 0-5.675-2.325T4 12t2.325-5.675T12 4q1.725 0 3.3.712T18 6.75V4h2v7h-7V9h4.2q-.8-1.4-2.187-2.2T12 6Q9.5 6 7.75 7.75T6 12t1.75 4.25T12 18q1.925 0 3.475-1.1T17.65 14h2.1q-.7 2.65-2.85 4.325T12 20"},null,-1),YC=[IC];function BC(n,o,x,f,d,a){return s(),_("svg",FC,YC)}const Vl=Oe(NC,[["render",BC]]),hxe=Object.freeze(Object.defineProperty({__proto__:null,default:Vl},Symbol.toStringTag,{value:"Module"}));const qC=n=>(nt("data-v-8a91e945"),n=n(),rt(),n),UC={class:"box-fixed"},HC={class:"w-full flex grow flex-col overflow-auto h-0"},zC={class:"w-full flex justify-between flex-wrap"},VC={class:"grow flex"},LC=["value"],EC=["value"],RC={class:"w-full flex justify-center items-center grow h-0 p-1"},JC={key:0,class:""},KC={class:"tacky"},GC=qC(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Jenis Tiket"),e("th",null,"No Ticket"),e("th",null,"Lebih")])],-1)),ZC=["onClick"],WC={__name:"trx_trp_ticket_over",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1}},setup(n){const o=n,x={};x._TimeZoneOffset=new Date().getTimezoneOffset(),x.sort="tanggal:desc";const f=ke("company_code"),d=u(f.value),a=u({}),r=ke("token"),p=u([]),i=u(-1),c=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),h=()=>Y(this,null,function*(){$().loading_full=!0,a.value={},c.value.may_get_data=!1,x.page=c.value.page,x.page==1&&(p.value=[]),x.first_row&&delete x.first_row,x.page>1&&(x.first_row=JSON.stringify(p.value[0])),x.pabrik=d.value;const{data:g,error:b,status:v}=yield W("/trx_trps/ticket_over",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:x,retry:0});if($().loading_full=!1,c.value.may_get_data=!0,v.value==="error"){X().trigger(b,a);return}c.value.page==1?p.value=g.value.data:c.value.page>1&&(p.value=[...p.value,...g.value.data]),g.value.data.length==0&&(c.value.is_last_record=!0),$()._tv.filter_box=!1}),k=()=>{i.value=-1,c.value.page=1,c.value.is_last_record=!1,h()},C=u(null),y=()=>Y(this,null,function*(){if(!c.value.may_get_data)return;let g=C.value;if(g.scrollLeft!=c.value.scrollLeft){c.value.scrollLeft=g.scrollLeft;return}c.value.is_last_record||!(Math.round(g.scrollTop)+g.clientHeight>=g.scrollHeight-1)||(c.value.page++,yield h())});return je(()=>o.show,(g,b)=>{g==!0&&h()},{immediate:!0}),(g,b)=>{const v=Xe,w=Vl;return ae((s(),_("section",UC,[e("div",null,[j(v,{title:"Form Check Tickets",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",HC,[e("div",zC,[e("div",VC,[ae(e("select",{"onUpdate:modelValue":b[0]||(b[0]=m=>Ee(d)?d.value=m:null)},[e("option",{value:t(f)},l(t(f)),9,LC),(s(!0),_(ye,null,Ae(t($)().list_pabrik.filter(m=>m!=t(f)),m=>(s(),_("option",{value:m},l(m),9,EC))),256))],512),[[We,t(d)]]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:b[1]||(b[1]=m=>k())},[j(w)])])]),e("div",RC,[t(p).length==0?(s(),_("div",JC," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:C,onScroll:y},[e("table",KC,[GC,e("tbody",null,[(s(!0),_(ye,null,Ae(t(p),(m,S)=>(s(),_("tr",{key:S,onClick:A=>i.value=S,class:Ue(t(i)==S?"active":"")},[e("td",null,l(S+1)+".",1),e("td",null,l(m.jenis),1),e("td",null,l(m.ticket_no),1),e("td",null,l(m.lebih),1)],10,ZC))),128))])])],544))])])])],512)),[[Be,n.show]])}}},os=Oe(WC,[["__scopeId","data-v-8a91e945"]]),bxe=Object.freeze(Object.defineProperty({__proto__:null,default:os},Symbol.toStringTag,{value:"Module"})),QC={class:"bg-white w-full flex flex-row flex-wrap mt-1"},XC={class:"p-1 flex"},e9={class:"flex items-center"},t9=["onClick"],l9={class:"pl-1 flex flex-wrap items-center"},a9={class:"w-full"},s9={class:"font-bold"},o9={key:0,class:"w-full"},n9={class:"z-[2] w-full flex flex-col mt-1 relative"},r9={class:"w-full flex justify-end h-4"},i9={class:"bg-white w-full flex flex-col ring-1 ring-gray-600 max-h-40 overflow-auto"},d9={class:"p-1 flex"},_9={class:"flex items-center"},u9=["onClick"],c9=["onClick"],p9={class:"pl-1 flex flex-wrap items-center"},v9={class:"w-full"},f9={class:"font-bold"},m9={key:0,class:"w-full"},ia=Lt({__name:"SelectMulti",props:{arr:{type:Array,required:!0,default:[]},list:{type:Array,required:!1,default:[]}},emits:["input","nextBlur"],setup(n,{emit:o}){const x=n,f=u(null);u([]);const d=u(!1),a=u(""),r=ne(()=>a.value!=""?x.arr.filter(i=>i.name.toLowerCase().includes(a.value.toLowerCase())):x.arr),p=i=>{let c=x.arr.map(h=>h.id).indexOf(i.id);c!=-1&&(x.arr[c].checked=!x.arr[c].checked)};return(i,c)=>{const h=ft,k=At;return s(),_("div",{ref_key:"slt_mul",ref:f,class:"relative",onBlur:c[3]||(c[3]=C=>d.value=!1)},[ae(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=C=>Ee(a)?a.value=C:null),onFocus:c[1]||(c[1]=C=>d.value=!0)},null,544),[[Te,t(a)]]),ae(e("div",QC,[(s(!0),_(ye,null,Ae(n.arr.filter(C=>C.checked),(C,y)=>(s(),_("div",XC,[e("div",e9,[ae(e("button",{type:"button",class:"text-white bg-green-500 text-sm",onClick:g=>p(C)},[j(h)],8,t9),[[Be,C.checked]])]),e("div",l9,[e("div",a9,[e("span",s9," #"+l(C.name),1)]),C.title?(s(),_("div",o9,l(C.title||""),1)):O("",!0)])]))),256))],512),[[Be,!t(d)]]),ae(e("div",n9,[e("div",r9,[e("div",{class:"w-8 bg-gray-600 text-white rounded-t flex items-center justify-center font-bold text-sm cursor-pointer",onClick:c[2]||(c[2]=C=>d.value=!1)},[j(k)])]),e("div",i9,[(s(!0),_(ye,null,Ae(t(r),(C,y)=>(s(),_("div",d9,[e("div",_9,[ae(e("button",{type:"button",class:"text-white bg-green-500 text-sm",onClick:g=>p(C)},[j(h)],8,u9),[[Be,C.checked]]),ae(e("button",{type:"button",class:"text-white bg-red-500 text-sm",onClick:g=>p(C)},[j(k)],8,c9),[[Be,!C.checked]])]),e("div",p9,[e("div",v9,[e("span",f9," #"+l(C.name),1)]),C.title?(s(),_("div",m9,l(C.title||""),1)):O("",!0)])]))),256))])],512),[[Be,t(d)]])],544)}}}),yxe=Object.freeze(Object.defineProperty({__proto__:null,default:ia},Symbol.toStringTag,{value:"Module"})),h9={class:"w-full h-full flex flex-col"},b9={class:"w-full flex grow flex-col overflow-auto h-0"},y9={class:"w-full flex justify-between flex-wrap"},x9={class:"grow flex"},w9={class:"m-1"},g9=Et('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),$9=[g9],k9=e("span",{class:"text-xs ml-1"}," Download ",-1),j9={class:"flex"},D9={class:"relative z-[1]"},S9=e("b",null,"tidak dapat dibatalkan lagi",-1),T9={class:"grow mb-5"},C9=e("b",{class:"text-red-500"},"dibersihkan",-1),P9=e("b",{class:"text-red-500"},"divalidasi",-1),A9=e("b",{class:"text-red-500"},"di unvalidasi",-1),M9={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},O9={class:"relative",style:{width:"95%",height:"90%"}},N9={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},F9={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},I9={class:"w-full p-1"},Y9={class:"w-full p-1 bg-gray-200"},B9=e("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),q9={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},U9={class:"flex flex-col flex-wrap p-1"},H9=e("label",{for:""},"From",-1),z9={class:"grow"},V9={class:"flex flex-col flex-wrap p-1"},L9=e("label",{for:""},"To",-1),E9={class:"grow"},R9={key:1,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-10 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},J9={class:"relative",style:{border:"solid 1px #ccc"}},K9={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},G9={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Z9={class:"w-full p-1"},W9={class:"w-full p-1"},Q9=e("div",{class:"w-full text-gray-600 font-bold text-center"}," Set Mobil Yang Tidak Di Izinkan Untuk Di Update Tiketnya ",-1),X9={class:"w-full flex my-2"},eP=e("div",{class:"text-gray-600"}," Data Luar: ",-1),tP={class:"flex mx-2"},lP={class:"flex cursor-pointer"},aP=["value"],sP={class:"w-full"},oP={class:"w-full grid grid-cols-2 gap-1 p-1 mt-5"},nP={__name:"ticket",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=fe=>fe.deleted==1?"!bg-red-400":fe.req_deleted==1?"!bg-yellow-300":fe.val_ticket==1?"!bg-blue-300":"",r=fe=>(fe.map(ge=>{ge.class_h=a(ge)}),fe),p=ke("company_code"),i=u([]);let c=u({clearCheckBox:!1});const h=u("ticket_not_done");je(()=>h.value,fe=>{N()},{immediate:!1});const k={};k._TimeZoneOffset=new Date().getTimezoneOffset(),k.sort="tanggal:desc";const C=u({}),y=u({from:"",to:""}),g=ke("token"),{data:b}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let fe=[],ge=[],we=[];const[be,Ce,lt]=yield Promise.all([W("/trx_trp_tickets",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:{filter_status:h},retry:0}),W("/vehicles_available",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},retry:0}),W("/temp_data/vehiclesAllowedUpdateTicket",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},retry:0})]);return be.status.value!=="error"&&(fe=r(be.data.value.data)),be.status.value==="error"?(X().trigger(be.error),{trx_trps:fe}):(Ce.status.value!=="error"&&(ge=Ce.data.value.data),lt.status.value!=="error"&&(we=lt.data.value.data),$().loading_full=!1,{trx_trps:fe,list_vehicle:ge,vehicles_allowed:we})}),"$X4xCu6yBOs")})),o=yield o,x(),o),v=u(b.value.trx_trps||[]),w=u([]);b.value.list_vehicle.forEach(fe=>{w.value.push({id:fe.id,name:fe.no_pol,title:"",checked:b.value.vehicles_allowed.indexOf(fe.id)>-1})});const m=u([]),S=(fe,ge="")=>Y(this,null,function*(){$().loading_full=!0;let we=Re.value.from?f(Re.value.from).format("Y-MM-DD"):"",be=Re.value.to?f(Re.value.to).format("Y-MM-DD"):"";const{data:Ce,error:lt,status:De}=yield W("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:{jenis:fe,from:we,to:be,transition_target:ge},retry:0});if($().loading_full=!1,De.value==="error"){X().trigger(lt);return}m.value=Ce.value.list_ticket}),A=u({field:"tanggal",by:"desc"}),D=u(-1),M=ne(()=>v.value[D.value]),T=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),q=()=>{k.like="";let fe=JSON.parse(JSON.stringify($()._tv.global_keyword));fe!=""&&(k.like=`id:%${fe}%,xto:%${fe}%,jenis:%${fe}%,pv_no:%${fe}%,ticket_a_no:%${fe}%,ticket_b_no:%${fe}%,no_pol:%${fe}%,supir:%${fe}%,kernet:%${fe}%,cost_center_code:%${fe}%,cost_center_desc:%${fe}%,pvr_no:%${fe}%,tanggal:%${fe}%,transition_target:%${fe}%,uj_asst_opt:%${fe}%`),k.sort="",A.value.field&&(k.sort=A.value.field+":"+A.value.by),k.date_from=y.value.from?f(y.value.from).format("YYYY-MM-DD"):"",k.date_to=y.value.to?f(y.value.to).format("YYYY-MM-DD"):"",k.filter_model=JSON.stringify($()._tv.filter_model)},P=()=>Y(this,null,function*(){$().loading_full=!0,C.value={},T.value.may_get_data=!1,k.page=T.value.page,k.page==1&&(v.value=[]),k.first_row&&delete k.first_row,k.page>1&&(k.first_row=JSON.stringify(v.value[0])),k.filter_status=h.value;const{data:fe,error:ge,status:we}=yield W("/trx_trp_tickets",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:k,retry:0});if($().loading_full=!1,T.value.may_get_data=!0,we.value==="error"){X().trigger(ge,C);return}T.value.page==1?v.value=r(fe.value.data):T.value.page>1&&(v.value=[...v.value,...r(fe.value.data)]),fe.value.data.length==0&&(T.value.is_last_record=!0),$()._tv.filter_box=!1}),N=()=>{D.value=-1,T.value.page=1,T.value.is_last_record=!1,q(),P()};Ht();const L=u(!1),R=u(0),{display:J}=Je();Dt(Je());const re=u(1),te=()=>{D.value==-1?J({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=v.value[D.value].id,re.value=-1,L.value=!0)},ee=u(!1),ce=u(0),U=()=>{D.value==-1?J({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value=v.value[D.value].id,re.value=1,ee.value=!0)},I=()=>{D.value==-1?J({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value=v.value[D.value].id,re.value=0,ee.value=!0)},Z=()=>{D.value==-1?J({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value=v.value[D.value].id,re.value=-1,ee.value=!0)},E=u(!1),H=u(0),ve=fe=>{H.value=fe,E.value=!0},Ie=u({}),le=u(!1),z=u(""),G=()=>Y(this,null,function*(){le.value&&(le.value=!1)}),oe=u(!1),se=u(!1),_e=u(!1),ue=u(""),B=()=>{var fe;D.value==-1?J({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(z.value="",ue.value="",Ie.value={id:v.value[D.value].id,"no pol":v.value[D.value].no_pol,tujuan:v.value[D.value].xto,permintaan:(fe=v.value[D.value].req_deleted_by)==null?void 0:fe.username,alasan:v.value[D.value].req_deleted_reason},le.value=!0)},de=()=>Y(this,null,function*(){$().loading_full=!0;const fe=new FormData;fe.append("id",v.value[D.value].id),fe.append("_method","DELETE"),fe.append("reason_adder",ue.value);const{data:ge,error:we,status:be}=yield W("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:fe,retry:0});if($().loading_full=!1,be.value==="error"){X().trigger(we);return}let Ce=ie({},v.value[D.value]);Ce.deleted=ge.value.deleted,Ce.deleted_user=ge.value.deleted_user,Ce.deleted_at=ge.value.deleted_at,Ce.deleted_by=ge.value.deleted_by,Ce.deleted_reason=ge.value.deleted_reason,Ce.class_h=a(Ce),h.value!="all"?v.value.splice(D.value,1):v.value.splice(D.value,1,ie({},Ce)),D.value=-1,le.value=!1}),V=()=>Y(this,null,function*(){$().loading_full=!0;const fe=new FormData;fe.append("ids",JSON.stringify(Ve.value)),fe.append("_method","PUT");const{data:ge,error:we,status:be}=yield W("/trx_trp_val_tickets",{method:"post",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:fe,retry:0});if($().loading_full=!1,be.value==="error"){X().trigger(we);return}se.value=!1,ge.value.val_lists.forEach(Ce=>{let lt=v.value.map(De=>De.id).indexOf(Ce.id);if(lt>-1){let De=v.value[lt];De.val_ticket=Ce.val_ticket,De.val_ticket_by=Ce.val_ticket_by,De.val_ticket_at=Ce.val_ticket_at,De.updated_at=Ce.updated_at,v.value.splice(lt,1,ie({},De))}}),c.value.clearCheckBox=!0}),me=()=>Y(this,null,function*(){$().loading_full=!0;const fe=new FormData;fe.append("ids",JSON.stringify(Ve.value)),fe.append("_method","PUT");const{data:ge,error:we,status:be}=yield W("/trx_trp_unval_tickets",{method:"post",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:fe,retry:0});if($().loading_full=!1,be.value==="error"){X().trigger(we);return}_e.value=!1,ge.value.val_lists.forEach(Ce=>{let lt=v.value.map(De=>De.id).indexOf(Ce.id);if(lt>-1){let De=v.value[lt];De.val_ticket=Ce.val_ticket,De.val_ticket_by=Ce.val_ticket_by,De.val_ticket_at=Ce.val_ticket_at,De.updated_at=Ce.updated_at,v.value.splice(lt,1,ie({},De))}}),c.value.clearCheckBox=!0}),Me=()=>Y(this,null,function*(){$().loading_full=!0;const fe=new FormData;fe.append("ids",JSON.stringify(Ve.value)),fe.append("_method","PUT");const{data:ge,error:we,status:be}=yield W("/trx_trp_clear_tickets",{method:"post",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:fe,retry:0});if($().loading_full=!1,be.value==="error"){X().trigger(we);return}oe.value=!1,ge.value.clear_lists.forEach(Ce=>{let lt=v.value.map(De=>De.id).indexOf(Ce.id);if(lt>-1){let De=v.value[lt];De.ticket_a_id=Ce.ticket_a_id,De.ticket_a_no=Ce.ticket_a_no,De.ticket_b_id=Ce.ticket_b_id,De.ticket_b_no=Ce.ticket_b_no,De.updated_at=Ce.updated_at,v.value.splice(lt,1,ie({},De))}}),c.value.clearCheckBox=!0}),tt=u(!1),ut=fe=>{tt.value=!0},he=u(!1),Re=u({from:new Date().setDate(new Date().getDate()-3),to:new Date}),Ne=fe=>{fe=="from"?Re.value.from-Re.value.to>0&&(Re.value.from=Re.value.to):Re.value.to-Re.value.from<0&&(Re.value.to=Re.value.from)},Ze=()=>Y(this,null,function*(){$().loading_full=!0;const fe=new FormData;fe.append("vehicles",JSON.stringify(w.value.filter(Ce=>Ce.checked).map(Ce=>Ce.id))),fe.append("pabriks",JSON.stringify(i.value));const{data:ge,error:we,status:be}=yield W("/trx_trp_do_update_ticket",{method:"post",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:fe,retry:0});if($().loading_full=!1,be.value==="error"){X().trigger(we);return}ge.value.data.forEach(Ce=>{let lt=v.value.map(De=>De.id).indexOf(Ce.id);if(lt!==-1){let De=v.value[lt];De.ticket_a_id=Ce.ticket_a_id,De.ticket_a_no=Ce.ticket_a_no,De.ticket_a_bruto=Ce.ticket_a_bruto,De.ticket_a_tara=Ce.ticket_a_tara,De.ticket_a_netto=Ce.ticket_a_netto,De.ticket_a_supir=Ce.ticket_a_supir,De.ticket_a_no_pol=Ce.ticket_a_no_pol,De.ticket_a_in_at=Ce.ticket_a_in_at,De.ticket_a_out_at=Ce.ticket_a_out_at,De.ticket_b_id=Ce.ticket_b_id,De.ticket_b_no=Ce.ticket_b_no,De.ticket_b_bruto=Ce.ticket_b_bruto,De.ticket_b_tara=Ce.ticket_b_tara,De.ticket_b_netto=Ce.ticket_b_netto,De.ticket_b_supir=Ce.ticket_b_supir,De.ticket_b_no_pol=Ce.ticket_b_no_pol,De.ticket_b_in_at=Ce.ticket_b_in_at,De.ticket_b_out_at=Ce.ticket_b_out_at,De.updated_at=Ce.updated_at,v.value.splice(lt,1,ie({},De))}}),J({show:!0,status:"Success",message:"Update PV Done"})}),Ve=u([]),Bt=u([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val_ticket",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:1,type:"desc"}},{key:"status_batas_susut",label:"Batas Susut",type:"string"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:$().list_pabrik}]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"susut",label:"Susut",childs:[{key:"susut_bruto",label:"Bruto",childs:[{key:"susut_bruto_b_a",label:"Selisih"},{key:"susut_bruto_b_a_persen",label:"%"}]},{key:"susut_tara",label:"Tara",childs:[{key:"susut_tara_b_a",label:"Selisih"},{key:"susut_tara_b_a_persen",label:"%"}]},{key:"susut_netto",label:"Netto",childs:[{key:"susut_netto_b_a",label:"Selisih"},{key:"susut_netto_b_a_persen",label:"%"}]}]},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"pv_no",label:"PV No",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:1,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:1},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:1,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:1,type:"string",filter_on:1}]),Rt=ne(()=>D.value>-1&&K().checkPermission("trp_trx.ticket.view")),Jt=ne(()=>D.value>-1&&M.value.deleted==0&&M.value.req_deleted==0&&M.value.val_ticket==0&&K().checkPermission("trp_trx.ticket.modify")),al=ne(()=>D.value>-1&&M.value.deleted==0&&M.value.req_deleted==0&&M.value.val_ticket==0&&K().checkPermission("trp_trx.ticket.val_ticket")),Kt=ne(()=>D.value>-1&&M.value.deleted==0&&M.value.req_deleted==0&&M.value.val_ticket==1&&K().checkPermission("trp_trx.ticket.unval_ticket")),Le=ne(()=>D.value>-1&&M.value.deleted==0&&M.value.req_deleted==1&&M.value.val_ticket==0&&K().checkPermission("trp_trx.approve_request_remove")),Tt=u(!1),rl=(fe,ge)=>{fe=parseFloat(fe)||0,ge=parseFloat(ge)||0;let we=parseFloat(ge-fe);if((we>0?ge:fe)==0)return 0;let Ce=K().round(we/fe*100,2);return Ce<0?"("+Math.abs(Ce*100)/100+")":Ce},et=(fe,ge)=>{fe=parseFloat(fe)||0,ge=parseFloat(ge)||0;let we=parseFloat(ge-fe);return we<0?"("+d(Math.abs(we))+")":d(we)},{downloadFile:yt,viewFile:Ol}=jt(),Ye=()=>Y(this,null,function*(){q(),$().loading_full=!0,k.filter_status=h.value;const{data:fe,error:ge,status:we}=yield W("/trx_trp_tickets/download_excel",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:k,retry:0});if($().loading_full=!1,we.value==="error"){X().trigger(ge);return}yt(fe.value)});return(fe,ge)=>{const we=_t,be=Pt,Ce=Nt,lt=Hl,De=Ft,$e=wl,xe=Yt,st=ls,qt=Pl,qe=$t,ht=ft,Qe=Ot,wt=It,Gt=as,xl=ss,cl=Wl,He=os,dt=At,Pe=Vt("vue-date-picker"),Ge=zt,ta=ia;return s(),_("div",h9,[j(we,{title:"List Transaction"}),e("div",b9,[e("div",y9,[e("div",x9,[e("div",w9,[ae(e("select",{class:"","onUpdate:modelValue":ge[0]||(ge[0]=Fe=>Ee(h)?h.value=Fe:null)},$9,512),[[We,t(h)]])]),t(Jt)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[1]||(ge[1]=Fe=>te())},[j(be)])):O("",!0),t(Rt)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[2]||(ge[2]=Fe=>Z())},[j(Ce)])):O("",!0),t(Le)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[3]||(ge[3]=Fe=>B())},[j(lt)])):O("",!0),t(al)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[4]||(ge[4]=Fe=>U())},[j(De)])):O("",!0),t(Kt)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[5]||(ge[5]=Fe=>I())},[j($e)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:ge[6]||(ge[6]=Fe=>Ye())},[j(xe),F(),k9])]),e("div",j9,[t(Ve).length>0&&("useUtils"in fe?fe.useUtils:t(K))().checkPermission("trp_trx.ticket.unval_ticket")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:ge[7]||(ge[7]=Fe=>_e.value=!0)},[j($e),j($e),j($e),j($e)])):O("",!0),t(Ve).length>0?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:ge[8]||(ge[8]=Fe=>oe.value=!0)}," Multi Clear Ticket ")):O("",!0),t(Ve).length>0?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:ge[9]||(ge[9]=Fe=>se.value=!0)},[j(De),j(De),j(De),j(De)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:ge[10]||(ge[10]=Fe=>ut())}," Check Tickets "),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:ge[11]||(ge[11]=Fe=>he.value=!0)},[j(st)]),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:ge[12]||(ge[12]=Fe=>Tt.value=!0)}," Update Ticket ")])]),j(Qe,{thead:t(Bt),selected:t(D),onSetSelected:ge[13]||(ge[13]=Fe=>D.value=Fe),tbody:t(v),fnCallData:P,scrolling:t(T),onSetScrollingPage:ge[14]||(ge[14]=Fe=>t(T).page=Fe),onDoFilter:ge[15]||(ge[15]=Fe=>N()),onSetCheckbox:ge[16]||(ge[16]=Fe=>Ve.value=Fe),deep_state:t(c)},{absen:Q(({item:Fe,index:Ct})=>[Fe.trx_absens&&Fe.trx_absens.length>0?(s(),pe(qt,{key:0,class:"cursor-pointer",onClick:ql=>ve(Ct)},null,8,["onClick"])):O("",!0)]),val:Q(({item:Fe})=>[Fe.val?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val1:Q(({item:Fe})=>[Fe.val1?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),val_ticket:Q(({item:Fe})=>[Fe.val_ticket?(s(),pe(ht,{key:1})):(s(),pe(qe,{key:0}))]),uj_asst_opt:Q(({item:Fe})=>{var Ct;return[F(l((Ct=Fe.uj)==null?void 0:Ct.asst_opt),1)]}),salary_paid:Q(({item:Fe})=>{var Ct,ql;return[F(l(Fe.salary_paid?t(f)((Ct=Fe.salary_paid)==null?void 0:Ct.period_end).format("MM-Y")+"["+((ql=Fe.salary_paid)==null?void 0:ql.period_part)+"]":""),1)]}),susut_bruto_b_a:Q(({item:Fe})=>[F(l(et(Fe.ticket_a_bruto,Fe.ticket_b_bruto)),1)]),susut_tara_b_a:Q(({item:Fe})=>[F(l(et(Fe.ticket_a_tara,Fe.ticket_b_tara)),1)]),susut_netto_b_a:Q(({item:Fe})=>[F(l(et(Fe.ticket_a_netto,Fe.ticket_b_netto)),1)]),susut_bruto_b_a_persen:Q(({item:Fe})=>[F(l(rl(Fe.ticket_a_bruto,Fe.ticket_b_bruto)),1)]),susut_tara_b_a_persen:Q(({item:Fe})=>[F(l(rl(Fe.ticket_a_tara,Fe.ticket_b_tara)),1)]),susut_netto_b_a_persen:Q(({item:Fe})=>[F(l(rl(Fe.ticket_a_netto,Fe.ticket_b_netto)),1)]),status_batas_susut:Q(({item:Fe})=>{var Ct;return[e("div",{class:Ue(["btn p-1 rounded-sm text-white text-xs mr-1 relative",[Fe.uj&&Fe.uj.status_batas_susut=="Terisi"?"bg-green-600":"bg-red-500"]])},[e("div",D9,l((Ct=Fe.uj)==null?void 0:Ct.status_batas_susut),1)],2)]}),deleted_by_username:Q(({item:Fe})=>{var Ct;return[F(l((Ct=Fe.deleted_by)==null?void 0:Ct.username),1)]}),req_deleted_by_username:Q(({item:Fe})=>{var Ct;return[F(l((Ct=Fe.req_deleted_by)==null?void 0:Ct.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),j(wt,{type:"custome",show:t(le),data:t(Ie),fnClose:G,fnConfirm:de},{words:Q(()=>[F(" Data akan diproses dan "),S9,F(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),footer:Q(()=>[F(" Alasan Tambahan: "),e("div",T9,[ae(e("textarea",{"onUpdate:modelValue":ge[17]||(ge[17]=Fe=>Ee(ue)?ue.value=Fe:null)},null,512),[[Te,t(ue)]])])]),_:1},8,["show","data"]),j(wt,{type:"custome",show:t(oe),fnClose:()=>oe.value=!1,fnConfirm:Me},{words:Q(()=>[F(" Ticket akan "),C9,F(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),j(wt,{type:"custome",show:t(se),fnClose:()=>se.value=!1,fnConfirm:V},{words:Q(()=>[F(" Ticket akan "),P9,F(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),j(wt,{type:"custome",show:t(_e),fnClose:()=>_e.value=!1,fnConfirm:me},{words:Q(()=>[F(" Ticket akan "),A9,F(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),j(Gt,{show:t(L),fnClose:()=>{L.value=!1},fnLoadDBData:S,id:t(R),p_data:t(v),list_ticket:t(m)},null,8,["show","fnClose","id","p_data","list_ticket"]),j(xl,{show:t(ee),fnClose:()=>{ee.value=!1},id:t(ce),p_data:t(v),it_state:t(re)},null,8,["show","fnClose","id","p_data","it_state"]),j(cl,{show:t(E),fnClose:()=>{E.value=!1},index:t(H),p_data:t(v)},null,8,["show","fnClose","index","p_data"]),j(He,{show:t(tt),fnClose:()=>{tt.value=!1}},null,8,["show","fnClose"]),t(he)?(s(),_("div",M9,[e("div",O9,[e("div",N9,[j(dt,{style:{color:"black",cursor:"pointer"},onClick:ge[18]||(ge[18]=Fe=>he.value=!1)})]),e("div",F9,[e("div",I9,[e("div",Y9,[B9,e("div",q9,[e("div",U9,[H9,e("div",z9,[j(Ge,null,{default:Q(()=>[j(Pe,{modelValue:t(Re).from,"onUpdate:modelValue":ge[19]||(ge[19]=Fe=>t(Re).from=Fe),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:ge[20]||(ge[20]=Fe=>Ne("from"))},null,8,["modelValue"])]),_:1})])]),e("div",V9,[L9,e("div",E9,[j(Ge,null,{default:Q(()=>[j(Pe,{modelValue:t(Re).to,"onUpdate:modelValue":ge[21]||(ge[21]=Fe=>t(Re).to=Fe),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:ge[22]||(ge[22]=Fe=>Ne("to"))},null,8,["modelValue"])]),_:1})])])])])])]),e("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:ge[23]||(ge[23]=Fe=>he.value=!1)})])])):O("",!0),t(Tt)?(s(),_("div",R9,[e("div",J9,[e("div",K9,[j(dt,{style:{color:"black",cursor:"pointer"},onClick:ge[24]||(ge[24]=Fe=>Tt.value=!1)})]),e("div",G9,[e("div",Z9,[e("div",W9,[Q9,e("div",X9,[eP,(s(!0),_(ye,null,Ae(t($)().list_pabrik.filter(Fe=>Fe!=t(p)),Fe=>(s(),_("div",tP,[e("label",lP,[ae(e("input",{type:"checkbox",value:Fe,"onUpdate:modelValue":ge[25]||(ge[25]=Ct=>Ee(i)?i.value=Ct:null),class:"mr-1"},null,8,aP),[[Dl,t(i)]]),F(" "+l(Fe),1)])]))),256))]),e("div",sP,[j(ta,{arr:t(w)},null,8,["arr"]),e("div",oP,[e("button",{type:"button",name:"button",class:"bg-blue-500 text-white",onClick:ge[26]||(ge[26]=Fe=>Ze())}," Set & Update "),e("button",{type:"button",name:"button",class:"bg-white",onClick:ge[27]||(ge[27]=Fe=>Tt.value=!1)}," Close ")])])])])])])])):O("",!0)])}})}},xxe=Object.freeze(Object.defineProperty({__proto__:null,default:nP},Symbol.toStringTag,{value:"Module"})),rP={class:"w-full h-full flex flex-col"},iP={class:"w-full flex grow flex-col overflow-auto h-0"},dP={class:"w-full flex justify-between flex-wrap"},_P={class:"grow flex"},uP={class:"w-full flex justify-center items-center grow h-0 p-1"},cP={key:0,class:""},pP={class:"tacky"},vP=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No."),e("th",null,"Jenis Tiket"),e("th",null,"No Ticket"),e("th",null,"Lebih")])],-1),fP=["onClick"],mP={__name:"ticket_over",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d=u("ticket_not_done"),a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="tanggal:desc";const r=u({}),p=u({from:"",to:""}),i=ke("token"),{data:c}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let S=[];const[A,D]=yield Promise.all([W("/trx_trps/ticket_over",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:{filter_status:d},retry:0})]);return A.status.value==="error"?(X().trigger(A.error),{trx_trps:S}):($().loading_full=!1,S=A.data.value.data,{trx_trps:S})}),"$YfrrHQNie6")})),o=yield o,x(),o),h=u(c.value.trx_trps||[]),k=u({field:"tanggal",by:"desc"}),C=u(-1),y=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),g=()=>{a.like="";let S=JSON.parse(JSON.stringify($()._tv.global_keyword));S!=""&&(a.like=`id:%${S}%,xto:%${S}%,jenis:%${S}%,pv_no:%${S}%,ticket_a_no:%${S}%,ticket_b_no:%${S}%,no_pol:%${S}%,supir:%${S}%,kernet:%${S}%,cost_center_code:%${S}%,cost_center_desc:%${S}%,pvr_no:%${S}%,tanggal:%${S}%,transition_target:%${S}%`),a.sort="",k.value.field&&(a.sort=k.value.field+":"+k.value.by),a.date_from=p.value.from?f(p.value.from).format("YYYY-MM-DD"):"",a.date_to=p.value.to?f(p.value.to).format("YYYY-MM-DD"):"",a.filter_model=JSON.stringify($()._tv.filter_model)},b=()=>Y(this,null,function*(){$().loading_full=!0,r.value={},y.value.may_get_data=!1,a.page=y.value.page,a.page==1&&(h.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(h.value[0])),a.filter_status=d.value;const{data:S,error:A,status:D}=yield W("/trx_trps/ticket_over",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,y.value.may_get_data=!0,D.value==="error"){X().trigger(A,r);return}y.value.page==1?h.value=S.value.data:y.value.page>1&&(h.value=[...h.value,...S.value.data]),S.value.data.length==0&&(y.value.is_last_record=!0),$()._tv.filter_box=!1}),v=()=>{C.value=-1,y.value.page=1,y.value.is_last_record=!1,g(),b()},w=u(null),m=()=>Y(this,null,function*(){if(!y.value.may_get_data)return;let S=w.value;if(S.scrollLeft!=y.value.scrollLeft){y.value.scrollLeft=S.scrollLeft;return}y.value.is_last_record||!(Math.round(S.scrollTop)+S.clientHeight>=S.scrollHeight-1)||(y.value.page++,yield b())});return(S,A)=>{const D=_t,M=Vl;return s(),_("div",rP,[j(D,{title:"List Transaction"}),e("div",iP,[e("div",dP,[e("div",_P,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:A[0]||(A[0]=T=>v())},[j(M)])])]),e("div",uP,[t(h).length==0?(s(),_("div",cP," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:w,onScroll:m},[e("table",pP,[vP,e("tbody",null,[(s(!0),_(ye,null,Ae(t(h),(T,q)=>(s(),_("tr",{key:q,onClick:P=>C.value=q,class:Ue(t(C)==q?"active":"")},[e("td",null,l(q+1)+".",1),e("td",null,l(T.jenis),1),e("td",null,l(T.ticket_no),1),e("td",null,l(T.lebih),1)],10,fP))),128))])])],544))])])])}})}},wxe=Object.freeze(Object.defineProperty({__proto__:null,default:mP},Symbol.toStringTag,{value:"Module"})),hP={key:0,class:"flex items-center justify-center absolute top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},bP={action:"#",class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},yP={class:"w-full"},xP={class:"flex w-full justify-between mt-5"},wP={__name:"GAPIN",props:{show:{type:Number,required:!0}},emits:["setTimeout"],setup(n,{emit:o}){const x=u(null);Ta(()=>{setTimeout(()=>{x.value.focus()},1)});const f=u({}),d=ke("token"),a=u(""),r=u(0),p=()=>Y(this,null,function*(){$().loading_full=!0,f.value={};const h=new FormData;h.append("pin",a.value);let k="post";const{data:C,error:y,status:g}=yield W("/ga_pin",{method:k,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:h,retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y,f);return}o("setTimeout",C.value),r.value=C.value,a.value="",c()});let i=null;const c=()=>{i==null&&(i=setInterval(()=>{r.value--,r.value<=0&&(clearInterval(i),i=null,o("setTimeout",0))},1e3))};return Sa(()=>{clearInterval(i),i=null,o("setTimeout",0)}),(h,k)=>n.show==0?(s(),_("div",hP,[e("form",bP,[e("div",yP,[F(" Enter PIN "),ae(e("input",{ref_key:"it_pin",ref:x,type:"text",class:"w-full","onUpdate:modelValue":k[0]||(k[0]=C=>Ee(a)?a.value=C:null)},null,512),[[Te,t(a)]])]),e("div",xP,[e("button",{type:"submit",onClick:k[1]||(k[1]=ze(C=>p(),["prevent"])),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Submit ")])])])):O("",!0)}},Xl=wP,gxe=Object.freeze(Object.defineProperty({__proto__:null,default:Xl},Symbol.toStringTag,{value:"Module"}));const gP={class:"w-full h-full flex flex-col relative"},$P={class:"grow flex flex-col"},kP={class:"w-full flex items-center p-1"},jP={class:"grow"},DP={class:"grow overflow-auto h-0"},SP={class:"p-1 grow"},TP={class:"bg-white flex py-2 justify-between"},CP={class:"flex flex-wrap"},PP={class:"flex items-center justify-center m-2 text-xs"},AP={class:"bg-blue-400 p-2 font-bold text-white"},MP={class:"flex flex-col m-2"},OP=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),NP={class:"flex items-center justify-center"},FP={class:"flex flex-col m-2"},IP=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),YP={class:"flex items-center justify-center"},BP=["data-real"],qP={class:"flex flex-col m-2"},UP=e("span",{class:"text-xs"}," Nama Supir ",-1),HP={class:"flex items-center justify-center"},zP=["data-real"],VP={key:0,class:"flex flex-col m-2"},LP=e("span",{class:"text-xs"}," Nama Kernet ",-1),EP={class:"flex items-center justify-center"},RP=["data-real"],JP={class:"flex flex-col m-2"},KP=e("span",{class:"text-xs"}," Tujuan ",-1),GP={class:"flex items-center justify-center"},ZP=["onClick"],WP={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},QP={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},XP={class:"p-1 flex flex-wrap overflow-auto items-start"},eA={class:"w-full flex flex-wrap"},tA={class:"w-full flex flex-wrap"},lA={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},aA=e("span",{class:"text-xs font-bold"}," ID ",-1),sA={class:""},oA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},nA=e("span",{class:"text-xs font-bold"}," Tgl Terima U.Jalan ",-1),rA={class:""},iA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},dA=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),_A={class:""},uA={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},cA={class:"flex flex-col"},pA=e("span",{class:"text-xs font-bold"}," Nama Supir ",-1),vA={class:""},fA={class:"flex flex-col pl-2"},mA=e("span",{class:"text-xs font-bold"}," No rek ",-1),hA={class:""},bA={key:0,class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},yA={class:"flex flex-col"},xA=e("span",{class:"text-xs font-bold"}," Nama Kernet ",-1),wA={class:""},gA={class:"flex flex-col pl-2"},$A=e("span",{class:"text-xs font-bold"}," No rek ",-1),kA={class:""},jA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},DA=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),SA={class:""},TA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},CA=e("span",{class:"text-xs font-bold"}," Info ",-1),PA={class:""},AA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},MA=e("span",{class:"text-xs font-bold"}," Tipe ",-1),OA={class:""},NA={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},FA=e("span",{class:"text-xs font-bold"}," Jenis ",-1),IA={class:""},YA={key:1,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},BA=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),qA={class:""},UA={class:"w-full flex flex-wrap justify-center"},HA={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},zA=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),VA={class:"text-xs"},LA={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},EA=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),RA={class:"text-xs"},JA={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},KA=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),GA={class:"text-xs"},ZA={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},WA=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),QA={class:"text-xs"},XA={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},eM=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),tM={class:"text-xs"},lM={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},aM=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),sM={class:"text-xs"},oM={class:"w-full sm:w-1/2 text-sm flex justify-center"},nM={class:"border border-collapse border-black"},rM=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),iM={class:"p-1"},dM={class:"p-1"},_M=e("td",{class:"p-1"},"= Rp.",-1),uM={class:"text-right p-1"},cM={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},pM=e("th",{colspan:"2",class:"text-right"},"Total",-1),vM=e("th",{class:"p-1 text-right"},"Rp.",-1),fM={class:"p-1 text-right"},mM={key:0,class:"text-red-500 font-bold"},hM=e("td",{colspan:"2",class:"text-right"},"Potongan Supir",-1),bM=e("td",{class:"p-1 text-right"},"Rp.",-1),yM={class:"p-1 text-right"},xM={key:1,class:"text-red-500 font-bold"},wM=e("td",{colspan:"2",class:"text-right"},"Potongan Kernet",-1),gM=e("td",{class:"p-1 text-right"},"Rp.",-1),$M={class:"p-1 text-right"},kM={key:2,class:"text-red-500 font-bold"},jM=e("td",{colspan:"2",class:"text-right"},"Total Potongan",-1),DM=e("td",{class:"p-1 text-right"},"Rp.",-1),SM={class:"p-1 text-right"},TM={key:3,class:"font-bold"},CM=e("td",{colspan:"2",class:"text-right"},"Total Diterima",-1),PM=e("td",{class:"p-1 text-right"},"Rp.",-1),AM={class:"p-1 text-right"},MM={class:"w-full sm:w-1/2 h-full"},OM=["src"],NM={key:1,class:"flex flex-col justify-center items-center px-2 py-8 border border-gray-700 bg-gray-300"},FM={class:"w-full border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200 mt-2 flex flex-row flex-wrap"},IM={class:"flex flex-col mr-5"},YM=e("span",{class:"text-xs font-bold"}," EM#ID ",-1),BM={class:""},qM={class:"flex flex-col mr-5"},UM=e("span",{class:"text-xs font-bold"}," Nama Penerima ",-1),HM={class:""},zM={class:"flex flex-col mr-5"},VM=e("span",{class:"text-xs font-bold"}," No rek ",-1),LM={class:""},EM={class:"flex flex-col mr-5"},RM=e("span",{class:"text-xs font-bold"}," Tanggal ",-1),JM={class:""},KM={class:"flex flex-col mr-5"},GM=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),ZM={class:""},WM={class:"flex flex-col mr-5"},QM=e("span",{class:"text-xs font-bold"}," Desc ",-1),XM={class:""},eO={class:"flex flex-col mr-5"},tO=e("span",{class:"text-xs font-bold"}," Total ",-1),lO={class:""},aO={class:"flex p-1 justify-end flex-wrap"},sO={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},oO=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),nO={__name:"transfer",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=ke("token");new Date().getTimezoneOffset();const{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let R=[];const[J,re]=yield Promise.all([W("/trx_trp/transfers",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0})]);return J.status.value==="error"?(X().trigger(J.error),{trx_trps:R}):($().loading_full=!1,R=J.data.value.data,{trx_trps:R})}),"$pIgiM26TjW")})),o=yield o,x(),o),p=u(r.value.trx_trps||[]),i=u({}),c=u({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),h=u(-1),k=u(""),C=R=>Y(this,null,function*(){$().loading_full=!0;const{data:J,error:re,status:te}=yield W("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:R.id},retry:0});if($().loading_full=!1,te.value==="error"){X().trigger(re,i);return}c.value=J.value.data}),y=u(!1),g=()=>Y(this,null,function*(){if(y.value)return;y.value=!0,$().loading_full=!0,i.value={};const R=new FormData;R.append("id",c.value.id),R.append("_method","PUT");let J="post";const{data:re,error:te,status:ee}=yield W("/trx_trp/transfer",{method:J,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:R,retry:0});if($().loading_full=!1,y.value=!1,ee.value==="error"){X().trigger(te,i);return}p.value.splice(h.value,1),h.value=-1,w.value=!1,b.value=!1}),b=u(!1),v=u(0),w=u(!1);Je();const m=(R,J)=>{h.value=R,v.value=J,b.value=!0,C(J)},S=ne(()=>k.value!=""?p.value.filter(R=>R.no_pol.toLowerCase().includes(k.value.toLowerCase())||R.supir.toLowerCase().includes(k.value.toLowerCase())||R.kernet.toLowerCase().includes(k.value.toLowerCase())):p.value),A=R=>R.potongan&&R.potongan.length>0?R.potongan.map(J=>parseInt(J.nominal_cut)).reduce((J,re)=>(J+=re,J)):0,D=R=>{if(R.potongan&&R.potongan.length>0){let J=R.potongan.filter(te=>te.potongan_mst.employee_id==R.supir_id);if(J.length==0)return 0;let re=J.map(te=>parseInt(te.nominal_cut));return re.length==0?0:re.reduce((te,ee)=>(te+=ee,te))}return 0},M=R=>{if(R.potongan&&R.potongan.length>0){let J=R.potongan.filter(te=>te.potongan_mst.employee_id==R.kernet_id);if(J.length==0)return 0;let re=J.map(te=>parseInt(te.nominal_cut));return re.length==0?0:re.reduce((te,ee)=>(te+=ee,te))}return 0},T=()=>{let R=k.value;document.querySelectorAll(".to_hl").forEach(J=>{let re=J.dataset.real;var te=J.innerHTML,ee=re.toLowerCase().indexOf(R.toLowerCase());ee>-1&&R!=""?(te=re.substring(0,ee)+"<span class='highlight'>"+re.substring(ee,ee+R.length)+"</span>"+re.substring(ee+R.length),J.innerHTML=te):J.innerHTML=te=re})};je(()=>S,(R,J)=>{setTimeout(()=>{T()},0)},{deep:!0,immediate:!0});const{downloadFile:q,viewFile:P}=jt(),N=()=>Y(this,null,function*(){$().loading_full=!0;const{data:R,error:J,status:re}=yield W("/trx_trp/manual_tf",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{},retry:0});if($().loading_full=!1,re.value==="error"){X().trigger(J);return}q(R.value)}),L=u(0);return(R,J)=>{var Ie,le;const re=_t,te=Yt,ee=kl,ce=zl,U=Cl,I=Ql,Z=jl,E=Xe,H=Pl,ve=Xl;return s(),_("div",gP,[j(re,{title:"List Transaction"}),e("section",$P,[e("div",kP,[e("div",jP,[ae(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":J[0]||(J[0]=z=>Ee(k)?k.value=z:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(k)]])]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:J[1]||(J[1]=z=>N())},[j(te)])]),e("div",DP,[(s(!0),_(ye,null,Ae(t(S),(z,G)=>(s(),_("div",SP,[e("div",TP,[e("div",CP,[e("div",PP,[e("div",AP,l(z.id),1)]),e("div",MP,[OP,e("div",NP,[j(ee,{class:"mr-1"}),F(" "+l(t(f)(z.tanggal).format("DD-MM-YYYY")),1)])]),e("div",FP,[IP,e("div",YP,[j(ce,{class:"mr-1"}),e("span",{class:"to_hl","data-real":z.no_pol},l(z.no_pol),9,BP)])]),e("div",qP,[UP,e("div",HP,[j(U,{class:"mr-1"}),e("span",{class:"to_hl","data-real":z.supir},l(z.supir),9,zP)])]),z.kernet?(s(),_("div",VP,[LP,e("div",EP,[j(I,{class:"mr-1"}),e("span",{class:"to_hl","data-real":z.kernet},l(z.kernet),9,RP)])])):O("",!0),e("div",JP,[KP,e("div",GP,[j(Z,{class:"mr-1"}),F(" "+l(z.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:oe=>m(G,z)}," Detail ",8,ZP)])]))),256))])]),ae(e("div",WP,[e("div",QP,[j(E,{title:"Detail Information",fn:()=>{b.value=!1,w.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",XP,[e("div",eA,[e("div",tA,[e("div",lA,[aA,e("div",sA,l(t(c).id),1)]),e("div",oA,[nA,e("div",rA,l(t(f)(t(c).tanggal).format("DD-MM-YYYY")),1)]),e("div",iA,[dA,e("div",_A,l(t(c).no_pol),1)]),e("div",uA,[e("div",cA,[pA,e("div",vA,l(t(c).supir),1)]),e("div",fA,[mA,e("div",hA,l(t(c).supir_rek_no),1)])]),t(c).kernet?(s(),_("div",bA,[e("div",yA,[xA,e("div",wA,l(t(c).kernet),1)]),e("div",gA,[$A,e("div",kA,l(t(c).kernet_rek_no),1)])])):O("",!0),e("div",jA,[DA,e("div",SA,l(t(c).xto),1)]),e("div",TA,[CA,e("div",PA,l((Ie=t(c).uj)==null?void 0:Ie.asst_opt),1)]),e("div",AA,[MA,e("div",OA,l(t(c).tipe),1)]),e("div",NA,[FA,e("div",IA,l(t(c).jenis),1)]),t(c).transition_type=="From"?(s(),_("div",YA,[BA,e("div",qA,l(t(c).transition_target),1)])):O("",!0)]),e("div",UA,[t(c).val?(s(),_("div",HA,[zA,e("div",null," ( "+l(t(c).val_by.username)+" ) ",1),e("div",VA,l(t(f)(t(c).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val1?(s(),_("div",LA,[EA,e("div",null," ( "+l(t(c).val1_by.username)+" ) ",1),e("div",RA,l(t(f)(t(c).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val2?(s(),_("div",JA,[KA,e("div",null," ( "+l(t(c).val2_by.username)+" ) ",1),e("div",GA,l(t(f)(t(c).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val3?(s(),_("div",ZA,[WA,e("div",null," ( "+l(t(c).val3_by.username)+" ) ",1),e("div",QA,l(t(f)(t(c).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val4?(s(),_("div",XA,[eM,e("div",null," ( "+l(t(c).val4_by.username)+" ) ",1),e("div",tM,l(t(f)(t(c).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val5?(s(),_("div",lM,[aM,e("div",null," ( "+l(t(c).val5_by.username)+" ) ",1),e("div",sM,l(t(f)(t(c).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0)])]),e("div",oM,[e("table",nM,[rM,(s(!0),_(ye,null,Ae(t(c).details_uj,z=>(s(),_("tr",null,[e("td",iM,l(z.ordinal)+". ",1),e("td",dM,l(z.xdesc)+" "+l(z.qty<=1?"":t(d)(z.qty||0)+" x Rp."+t(d)(z.harga||0)),1),_M,e("td",uM,l(t(d)(z.qty*z.harga)),1)]))),256)),e("tr",cM,[pM,vM,e("th",fM,l(t(d)(t(c).amount)),1)]),D(t(c))>0?(s(),_("tr",mM,[hM,bM,e("td",yM,l(t(d)(D(t(c)))),1)])):O("",!0),M(t(c))>0?(s(),_("tr",xM,[wM,gM,e("td",$M,l(t(d)(M(t(c)))),1)])):O("",!0),A(t(c))>0?(s(),_("tr",kM,[jM,DM,e("td",SM,l(t(d)(A(t(c)))),1)])):O("",!0),A(t(c))>0?(s(),_("tr",TM,[CM,PM,e("td",AM,l(t(d)(t(c).amount-A(t(c)))),1)])):O("",!0)])]),e("div",MM,[((le=t(c).trx_absens)==null?void 0:le.length)>0?(s(),_("img",{key:0,class:"w-full",src:t(c).trx_absens[0].gambar},null,8,OM)):(s(),_("div",NM,[j(H),F(" Tidak Ada Foto Berangkat ")]))]),(s(!0),_(ye,null,Ae(t(c).extra_money_trxs,z=>{var G,oe,se,_e,ue,B;return s(),_("div",FM,[e("div",IM,[YM,e("div",BM,l(z.id),1)]),e("div",qM,[UM,e("div",HM,l((G=z.employee)==null?void 0:G.name),1)]),e("div",zM,[VM,e("div",LM,l((oe=z.employee)==null?void 0:oe.rek_no),1)]),e("div",EM,[RM,e("div",JM,l(z.tanggal),1)]),e("div",KM,[GM,e("div",ZM,l((se=z.extra_money)==null?void 0:se.xto),1)]),e("div",WM,[QM,e("div",XM,l((_e=z.extra_money)==null?void 0:_e.description),1)]),e("div",eO,[tO,e("div",lO,l(t(d)(((ue=z.extra_money)==null?void 0:ue.nominal)*((B=z.extra_money)==null?void 0:B.qty))),1)])])}),256))]),ae(e("div",aO,[e("button",{class:"rounded m-1",onClick:J[2]||(J[2]=z=>b.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:J[3]||(J[3]=z=>w.value=!0)}," Transfer ")],512),[[Be,!t(w)]]),ae(e("div",sO,[oO,e("button",{class:"rounded m-1 bg-white",onClick:J[4]||(J[4]=z=>(w.value=!1,b.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:J[5]||(J[5]=z=>g())}," Ya ")],512),[[Be,t(w)]])])],512),[[Be,t(b)]]),j(ve,{show:t(L),onSetTimeout:J[6]||(J[6]=z=>L.value=z)},null,8,["show"])])}})}},$xe=Object.freeze(Object.defineProperty({__proto__:null,default:nO},Symbol.toStringTag,{value:"Module"}));const rO={class:"w-full h-full flex flex-col relative"},iO={class:"grow flex flex-col"},dO={class:"w-full flex items-center p-1"},_O={class:"grow"},uO={class:"grow overflow-auto h-0"},cO={class:"p-1 grow"},pO={class:"bg-white flex py-2 justify-between"},vO={class:"flex flex-wrap"},fO={class:"flex items-center justify-center m-2 text-xs"},mO={class:"bg-blue-400 p-2 font-bold text-white"},hO={class:"flex flex-col m-2"},bO=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),yO={class:"flex items-center justify-center"},xO={class:"flex flex-col m-2"},wO=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),gO={class:"flex items-center justify-center"},$O=["data-real"],kO={class:"flex flex-col m-2"},jO=e("span",{class:"text-xs"}," Nama Supir ",-1),DO={class:"flex items-center justify-center"},SO=["data-real"],TO={key:0,class:"flex flex-col m-2"},CO=e("span",{class:"text-xs"}," Nama Kernet ",-1),PO={class:"flex items-center justify-center"},AO=["data-real"],MO={class:"flex flex-col m-2"},OO=e("span",{class:"text-xs"}," Tujuan ",-1),NO={class:"flex items-center justify-center"},FO=["onClick"],IO={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},YO={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},BO={class:"p-1 flex flex-wrap overflow-auto items-start"},qO={class:"w-full flex flex-wrap"},UO={class:"w-full flex flex-wrap"},HO={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},zO=e("span",{class:"text-xs font-bold"}," ID ",-1),VO={class:""},LO={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},EO=e("span",{class:"text-xs font-bold"}," Tgl Terima U.Jalan ",-1),RO={class:""},JO={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},KO=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),GO={class:""},ZO={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},WO={class:"flex flex-col"},QO=e("span",{class:"text-xs font-bold"}," Nama Supir ",-1),XO={class:""},eN={class:"flex flex-col pl-2"},tN=e("span",{class:"text-xs font-bold"}," No rek ",-1),lN={class:""},aN={key:0,class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},sN={class:"flex flex-col"},oN=e("span",{class:"text-xs font-bold"}," Nama Kernet ",-1),nN={class:""},rN={class:"flex flex-col pl-2"},iN=e("span",{class:"text-xs font-bold"}," No rek ",-1),dN={class:""},_N={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},uN=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),cN={class:""},pN={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},vN=e("span",{class:"text-xs font-bold"}," Tipe ",-1),fN={class:""},mN={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},hN=e("span",{class:"text-xs font-bold"}," Jenis ",-1),bN={class:""},yN={key:1,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},xN=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),wN={class:""},gN={class:"w-full flex flex-wrap justify-center"},$N={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},kN=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),jN={class:"text-xs"},DN={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},SN=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),TN={class:"text-xs"},CN={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},PN=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),AN={class:"text-xs"},MN={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ON=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),NN={class:"text-xs"},FN={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},IN=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),YN={class:"text-xs"},BN={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},qN=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),UN={class:"text-xs"},HN={class:"w-full sm:w-1/2 text-sm flex justify-center"},zN={class:"border border-collapse border-black"},VN=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),LN={class:"p-1"},EN={class:"p-1"},RN=e("td",{class:"p-1"},"= Rp.",-1),JN={class:"text-right p-1"},KN={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},GN=e("th",{colspan:"2",class:"text-right"},"Total",-1),ZN=e("th",{class:"p-1 text-right"},"Rp.",-1),WN={class:"p-1 text-right"},QN={key:0,class:"text-red-500 font-bold"},XN=e("td",{colspan:"2",class:"text-right"},"Potongan Supir",-1),eF=e("td",{class:"p-1 text-right"},"Rp.",-1),tF={class:"p-1 text-right"},lF={key:1,class:"text-red-500 font-bold"},aF=e("td",{colspan:"2",class:"text-right"},"Potongan Kernet",-1),sF=e("td",{class:"p-1 text-right"},"Rp.",-1),oF={class:"p-1 text-right"},nF={key:2,class:"text-red-500 font-bold"},rF=e("td",{colspan:"2",class:"text-right"},"Total Potongan",-1),iF=e("td",{class:"p-1 text-right"},"Rp.",-1),dF={class:"p-1 text-right"},_F={key:3,class:"font-bold"},uF=e("td",{colspan:"2",class:"text-right"},"Total Diterima",-1),cF=e("td",{class:"p-1 text-right"},"Rp.",-1),pF={class:"p-1 text-right"},vF={class:"w-full sm:w-1/2 h-full"},fF=["src"],mF={key:1,class:"flex flex-col justify-center items-center px-2 py-8 border border-gray-700 bg-gray-300"},hF={class:"flex p-1 justify-end flex-wrap"},bF={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},yF=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),xF={__name:"transfer_mandiri",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=ke("token");new Date().getTimezoneOffset();const{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let P=[];const[N,L]=yield Promise.all([W("/trx_trp/transfers_mandiri",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0})]);return N.status.value==="error"?(X().trigger(N.error),{trx_trps:P}):($().loading_full=!1,P=N.data.value.data,{trx_trps:P})}),"$5YEzmjB1Vh")})),o=yield o,x(),o),p=u(r.value.trx_trps||[]),i=u({}),c=u({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),h=u(-1),k=u(""),C=P=>Y(this,null,function*(){$().loading_full=!0;const{data:N,error:L,status:R}=yield W("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:P.id},retry:0});if($().loading_full=!1,R.value==="error"){X().trigger(L,i);return}c.value=N.value.data}),y=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const P=new FormData;P.append("id",c.value.id),P.append("_method","PUT");let N="post";const{data:L,error:R,status:J}=yield W("/trx_trp/transfer_mandiri",{method:N,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:P,retry:0});if($().loading_full=!1,J.value==="error"){X().trigger(R,i);return}p.value.splice(h.value,1),h.value=-1,v.value=!1,g.value=!1}),g=u(!1),b=u(0),v=u(!1);Je();const w=(P,N)=>{h.value=P,b.value=N,g.value=!0,C(N)},m=ne(()=>k.value!=""?p.value.filter(P=>P.no_pol.toLowerCase().includes(k.value.toLowerCase())||P.supir.toLowerCase().includes(k.value.toLowerCase())||P.kernet.toLowerCase().includes(k.value.toLowerCase())):p.value),S=P=>P.potongan&&P.potongan.length>0?P.potongan.map(N=>parseInt(N.nominal_cut)).reduce((N,L)=>(N+=L,N)):0,A=P=>{if(P.potongan&&P.potongan.length>0){let N=P.potongan.filter(R=>R.potongan_mst.employee_id==P.supir_id);if(N.length==0)return 0;let L=N.map(R=>parseInt(R.nominal_cut));return L.length==0?0:L.reduce((R,J)=>(R+=J,R))}return 0},D=P=>{if(P.potongan&&P.potongan.length>0){let N=P.potongan.filter(R=>R.potongan_mst.employee_id==P.kernet_id);if(N.length==0)return 0;let L=N.map(R=>parseInt(R.nominal_cut));return L.length==0?0:L.reduce((R,J)=>(R+=J,R))}return 0},M=()=>{let P=k.value;document.querySelectorAll(".to_hl").forEach(N=>{let L=N.dataset.real;var R=N.innerHTML,J=L.toLowerCase().indexOf(P.toLowerCase());J>-1&&P!=""?(R=L.substring(0,J)+"<span class='highlight'>"+L.substring(J,J+P.length)+"</span>"+L.substring(J+P.length),N.innerHTML=R):N.innerHTML=R=L})};je(()=>m,(P,N)=>{setTimeout(()=>{M()},0)},{deep:!0,immediate:!0});const T=u(0),q=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const P=new FormData;P.append("id",c.value.id),P.append("_method","PUT");let N="post";const{data:L,error:R,status:J}=yield W("/trx_trp/gen_csv_mandiri",{method:N,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:P,retry:0});if($().loading_full=!1,J.value==="error"){X().trigger(R,i);return}v.value=!1});return(P,N)=>{var Z;const L=_t,R=kl,J=zl,re=Cl,te=Ql,ee=jl,ce=Xe,U=Pl,I=Xl;return s(),_("div",rO,[j(L,{title:"List Transaction"}),e("section",iO,[e("div",dO,[e("div",_O,[ae(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":N[0]||(N[0]=E=>Ee(k)?k.value=E:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(k)]])]),e("div",null,[e("button",{onClick:N[1]||(N[1]=E=>q())},"CSV")])]),e("div",uO,[(s(!0),_(ye,null,Ae(t(m),(E,H)=>(s(),_("div",cO,[e("div",pO,[e("div",vO,[e("div",fO,[e("div",mO,l(E.id),1)]),e("div",hO,[bO,e("div",yO,[j(R,{class:"mr-1"}),F(" "+l(t(f)(E.tanggal).format("DD-MM-YYYY")),1)])]),e("div",xO,[wO,e("div",gO,[j(J,{class:"mr-1"}),e("span",{class:"to_hl","data-real":E.no_pol},l(E.no_pol),9,$O)])]),e("div",kO,[jO,e("div",DO,[j(re,{class:"mr-1"}),e("span",{class:"to_hl","data-real":E.supir},l(E.supir),9,SO)])]),E.kernet?(s(),_("div",TO,[CO,e("div",PO,[j(te,{class:"mr-1"}),e("span",{class:"to_hl","data-real":E.kernet},l(E.kernet),9,AO)])])):O("",!0),e("div",MO,[OO,e("div",NO,[j(ee,{class:"mr-1"}),F(" "+l(E.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:ve=>w(H,E)}," Detail ",8,FO)])]))),256))])]),ae(e("div",IO,[e("div",YO,[j(ce,{title:"Detail Information",fn:()=>{g.value=!1,v.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",BO,[e("div",qO,[e("div",UO,[e("div",HO,[zO,e("div",VO,l(t(c).id),1)]),e("div",LO,[EO,e("div",RO,l(t(f)(t(c).tanggal).format("DD-MM-YYYY")),1)]),e("div",JO,[KO,e("div",GO,l(t(c).no_pol),1)]),e("div",ZO,[e("div",WO,[QO,e("div",XO,l(t(c).supir),1)]),e("div",eN,[tN,e("div",lN,l(t(c).supir_rek_no),1)])]),t(c).kernet?(s(),_("div",aN,[e("div",sN,[oN,e("div",nN,l(t(c).kernet),1)]),e("div",rN,[iN,e("div",dN,l(t(c).kernet_rek_no),1)])])):O("",!0),e("div",_N,[uN,e("div",cN,l(t(c).xto),1)]),e("div",pN,[vN,e("div",fN,l(t(c).tipe),1)]),e("div",mN,[hN,e("div",bN,l(t(c).jenis),1)]),t(c).transition_type=="From"?(s(),_("div",yN,[xN,e("div",wN,l(t(c).transition_target),1)])):O("",!0)]),e("div",gN,[t(c).val?(s(),_("div",$N,[kN,e("div",null," ( "+l(t(c).val_by.username)+" ) ",1),e("div",jN,l(t(f)(t(c).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val1?(s(),_("div",DN,[SN,e("div",null," ( "+l(t(c).val1_by.username)+" ) ",1),e("div",TN,l(t(f)(t(c).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val2?(s(),_("div",CN,[PN,e("div",null," ( "+l(t(c).val2_by.username)+" ) ",1),e("div",AN,l(t(f)(t(c).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val3?(s(),_("div",MN,[ON,e("div",null," ( "+l(t(c).val3_by.username)+" ) ",1),e("div",NN,l(t(f)(t(c).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val4?(s(),_("div",FN,[IN,e("div",null," ( "+l(t(c).val4_by.username)+" ) ",1),e("div",YN,l(t(f)(t(c).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val5?(s(),_("div",BN,[qN,e("div",null," ( "+l(t(c).val5_by.username)+" ) ",1),e("div",UN,l(t(f)(t(c).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0)])]),e("div",HN,[e("table",zN,[VN,(s(!0),_(ye,null,Ae(t(c).details_uj,E=>(s(),_("tr",null,[e("td",LN,l(E.ordinal)+". ",1),e("td",EN,l(E.xdesc)+" "+l(E.qty<=1?"":t(d)(E.qty||0)+" x Rp."+t(d)(E.harga||0)),1),RN,e("td",JN,l(t(d)(E.qty*E.harga)),1)]))),256)),e("tr",KN,[GN,ZN,e("th",WN,l(t(d)(t(c).amount)),1)]),A(t(c))>0?(s(),_("tr",QN,[XN,eF,e("td",tF,l(t(d)(A(t(c)))),1)])):O("",!0),D(t(c))>0?(s(),_("tr",lF,[aF,sF,e("td",oF,l(t(d)(D(t(c)))),1)])):O("",!0),S(t(c))>0?(s(),_("tr",nF,[rF,iF,e("td",dF,l(t(d)(S(t(c)))),1)])):O("",!0),S(t(c))>0?(s(),_("tr",_F,[uF,cF,e("td",pF,l(t(d)(t(c).amount-S(t(c)))),1)])):O("",!0)])]),e("div",vF,[((Z=t(c).trx_absens)==null?void 0:Z.length)>0?(s(),_("img",{key:0,class:"w-full",src:t(c).trx_absens[0].gambar},null,8,fF)):(s(),_("div",mF,[j(U),F(" Tidak Ada Foto Berangkat ")]))])]),ae(e("div",hF,[e("button",{class:"rounded m-1",onClick:N[2]||(N[2]=E=>g.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:N[3]||(N[3]=E=>v.value=!0)}," Transfer ")],512),[[Be,!t(v)]]),ae(e("div",bF,[yF,e("button",{class:"rounded m-1 bg-white",onClick:N[4]||(N[4]=E=>(v.value=!1,g.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:N[5]||(N[5]=E=>y())}," Ya ")],512),[[Be,t(v)]])])],512),[[Be,t(g)]]),j(I,{show:t(T),onSetTimeout:N[6]||(N[6]=E=>T.value=E)},null,8,["show"])])}})}},kxe=Object.freeze(Object.defineProperty({__proto__:null,default:xF},Symbol.toStringTag,{value:"Module"}));const bt=n=>(nt("data-v-975e9b7c"),n=n(),rt(),n),wF={class:"box-fixed"},gF={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},$F={class:"w-full flex flex-col items-center grow overflow-auto"},kF={class:"w-full flex flex-row flex-wrap"},jF={class:"w-full sm:w-8/12 md:w-6/12 lg:w-5/12 flex flex-col flex-wrap p-1"},DF=bt(()=>e("label",{for:""},"To",-1)),SF=["disabled"],TF={class:"text-red-500"},CF={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},PF=bt(()=>e("label",{for:""},"Jenis",-1)),AF=["disabled"],MF=Et('<option value="PK" data-v-975e9b7c>PK</option><option value="CPO" data-v-975e9b7c>CPO</option><option value="TBS" data-v-975e9b7c>TBS</option><option value="TBSK" data-v-975e9b7c>TBSK</option><option value="LAIN" data-v-975e9b7c>LAIN</option><option value="TUNGGU" data-v-975e9b7c>TUNGGU</option>',6),OF=[MF],NF={class:"text-red-500"},FF={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},IF=bt(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),YF={class:"card-border disabled"},BF={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},qF=bt(()=>e("label",{for:""},"KM Range",-1)),UF={class:"card-border disabled"},HF={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},zF=bt(()=>e("label",{for:""},"KM Range",-1)),VF={class:"w-full"},LF={class:"text-red-500"},EF={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},RF=bt(()=>e("label",{for:""},"Harga",-1)),JF={class:"card-border disabled"},KF={class:"text-red-500"},GF={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ZF=bt(()=>e("label",{for:""},"Asal Peralihan",-1)),WF=["disabled"],QF=bt(()=>e("option",{value:""},null,-1)),XF=["value"],eI={class:"text-red-500"},tI={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},lI=bt(()=>e("label",{for:""},"Tipe",-1)),aI=["disabled"],sI={class:"text-red-500"},oI={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},nI=bt(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),rI=["disabled"],iI={class:"text-red-500"},dI={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},_I={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pr-1 2xl:max-h-full"},uI={class:"w-full",role:"sticky"},cI={class:"tacky w-full !table-auto whitespace-normal"},pI={class:"sticky -top-1 !z-[2]"},vI=["colspan"],fI={class:"sticky top-7 !z-[2]"},mI={key:0,class:"min-w-[50px] !w-[50px] max-w-[50px]"},hI=bt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),bI=bt(()=>e("th",{class:"min-w-[150px] !w-[150px] max-w-[150px]"},"Desc",-1)),yI=bt(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Harga @",-1)),xI=bt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"Qty",-1)),wI={class:"min-w-[100px] !w-[100px] max-w-[100px]"},gI=bt(()=>e("br",null,null,-1)),$I={class:"text-sm"},kI=bt(()=>e("th",{class:"min-w-[70px] !w-[70px] max-w-[70px] whitespace-break-spaces"},"For Remarks",-1)),jI={ref:"to_move"},DI=["data-index"],SI={key:0,class:"tools cell"},TI={class:"w-full h-auto flex items-center justify-center"},CI=["onClick"],PI={class:"cell"},AI={class:"w-full h-auto flex items-center justify-center"},MI=["disabled","onUpdate:modelValue"],OI={class:"w-full h-auto flex items-center justify-center"},NI={class:"w-full h-auto flex items-center justify-center"},FI={class:"cell"},II={class:"w-full h-auto flex items-center justify-center unselectable"},YI={class:"w-full h-auto flex items-center justify-center"},BI={key:0,class:"text-3xl"},qI=["onClick"],UI={key:0},HI={class:"tools cell"},zI={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pl-1 2xl:max-h-full pt-1 2xl:pt-0"},VI={class:"w-full",role:"sticky"},LI={class:"tacky w-full !table-auto whitespace-normal"},EI={class:"sticky -top-1 !z-[2]"},RI=["colspan"],JI={class:"sticky top-7 !z-[2]"},KI={key:0,class:"min-w-[30px] !w-[30px] max-w-[30px]"},GI=bt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),ZI={key:1,class:"min-w-[30px] !w-[30px] max-w-[30px]"},WI=bt(()=>e("th",{class:"min-w-[60px] !w-[60px] max-w-[60px]"},"Acc ID",-1)),QI=bt(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),XI=bt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),eY=bt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),tY=bt(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Amount",-1)),lY=bt(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Qty",-1)),aY=bt(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),sY={class:"min-w-[100px] !w-[100px] max-w-[100px]"},oY=bt(()=>e("br",null,null,-1)),nY={class:"text-sm"},rY={ref:"to_move"},iY=["data-index"],dY={key:0,class:"tools cell"},_Y={class:"w-full h-auto flex items-center justify-center"},uY=["onClick"],cY={key:1,class:"cell"},pY={class:"w-full h-auto flex items-center justify-center"},vY=["onClick"],fY=["onClick","disabled"],mY={class:"w-full h-auto flex items-center justify-center"},hY={class:"w-full h-auto flex items-center justify-center"},bY={class:"w-full h-auto flex items-center justify-center"},yY={class:"cell"},xY={class:"w-full h-auto flex items-center justify-center"},wY=["disabled","onUpdate:modelValue"],gY={class:"w-full h-auto flex items-center justify-center"},$Y={class:"w-full h-auto flex items-center justify-center"},kY={class:"w-full h-auto flex items-center justify-center"},jY=["onUpdate:modelValue","disabled"],DY=bt(()=>e("option",{value:""},null,-1)),SY=bt(()=>e("option",{value:"Supir"},"Supir",-1)),TY=bt(()=>e("option",{value:"Kernet"},"Kernet",-1)),CY=[DY,SY,TY],PY={class:"cell"},AY={class:"w-full h-auto flex items-center justify-center unselectable"},MY={key:0},OY={class:"tools cell"},NY={class:"w-full flex items-center justify-end"},FY={__name:"ujalan",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{pointFormat:x}=K(),f={id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,tipe:"",jenis:"",harga:0,note_for_remarks:"",transition_from:"",details:[],details2:[]},d=u(ie({},f)),a=ke("token"),r=u({}),p=u([{xdesc:"Timbangan",qty:1,harga:55e3},{xdesc:"Retribusi TPR",qty:1,harga:23e3},{xdesc:"Parkir & Nginap",qty:1,harga:1e4},{xdesc:"Penitipan Alat (Dongkrak)",qty:1,harga:5e3},{xdesc:"Ikas Danau",qty:1,harga:1e4},{xdesc:"U.Bongkar + Ambil surat",qty:1,harga:35e3},{xdesc:"Perbaikan Jalan Pujut",qty:1,harga:1e4},{xdesc:"Gaji Supir",qty:1,harga:0},{xdesc:"Gaji Kernet",qty:1,harga:0},{xdesc:"U.Extrafooding",qty:1,harga:2e4}]);u([]);const i=u([]),c=u([]),h=u({ordinal:0,id:-1,xdesc:"",qty:1,harga:0,for_remarks:0,p_status:""}),k=u({ordinal:0,id:-1,ac_account_id:"",ac_account_name:"",ac_account_code:"",description:"",qty:1,amount:0,xfor:"",p_status:""}),C=()=>{p.value.forEach(H=>{i.value.filter(ve=>ve.xdesc==H.xdesc).length==0&&i.value.push(il(ie({},H),{ordinal:0,id:-1,p_status:"Add"}))})},y=u(!1),g=()=>{y.value=!1},b=H=>{c.value[T.value].ac_account_id=H.ac_account_id,c.value[T.value].ac_account_code=H.ac_account_code,c.value[T.value].ac_account_name=H.ac_account_name,y.value=!1},v=(H,ve)=>{T.value=ve,y.value=!0},w=(H,ve)=>{c.value[ve].ac_account_id="",c.value[ve].ac_account_code="",c.value[ve].ac_account_name=""},{display:m}=Je(),S=()=>Y(this,null,function*(){if(c.value.length>0&&A.value!=D.value){m({show:!0,status:"Failed",message:"Total tidak cocok"});return}$().loading_full=!0,r.value={};const H=new FormData;H.append("xto",d.value.xto),H.append("km_range",d.value.km_range),H.append("tipe",d.value.tipe),H.append("jenis",d.value.jenis),H.append("harga",d.value.harga),H.append("note_for_remarks",d.value.note_for_remarks),H.append("transition_from",d.value.transition_from),H.append("details",JSON.stringify(i.value)),H.append("details2",JSON.stringify(c.value));let ve="post",Ie=o.is_copy?0:o.id;Ie==0||(H.append("id",Ie),H.append("_method","PUT"));const{data:le,error:z,status:G}=yield W("/ujalan",{method:ve,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:H,retry:0});if($().loading_full=!1,G.value==="error"){X().trigger(z,r);return}if(Ie<=0)d.value.id=le.value.id,d.value.created_at=le.value.created_at,d.value.updated_at=le.value.updated_at,o.p_data.unshift(d.value);else{d.value.updated_at=le.value.updated_at;let oe=o.p_data.map(se=>se.id).indexOf(Ie);oe>-1&&o.p_data.splice(oe,1,ie({},d.value))}o.fnClose()}),A=ne(()=>{let H=0;return i.value.forEach(ve=>{ve.p_status!="Remove"&&(H+=ve.qty*ve.harga)}),d.value.harga=H,H}),D=ne(()=>{let H=0;return c.value.forEach(ve=>{ve.p_status!="Remove"&&(H+=ve.qty*ve.amount)}),H}),M=u(-1),T=u(-1),q=u(!1),P=u({left:0,top:0}),N=u(!1),L=u({left:0,top:0}),R=(H,ve)=>{M.value=ve,q.value=!0,P.value={left:H.clientX,top:H.clientY}},J=(H,ve)=>{T.value=ve,N.value=!0,L.value={left:H.clientX,top:H.clientY}},re=()=>{i.value.push(il(ie({},h.value),{p_status:"Add"}))},te=()=>{c.value.push(il(ie({},k.value),{p_status:"Add"}))},ee=()=>{q.value=!1},ce=()=>{N.value=!1},U=(H="")=>{if(H=="insert")i.value.splice(M.value,0,il(ie({},h.value),{p_status:"Add"}));else if(H=="delete")i.value[M.value].p_status=="Edit"?i.value[M.value].p_status="Remove":i.value.splice(M.value,1);else if(H=="move_top"){let ve=i.value[M.value];i.value.splice(M.value,1),i.value.splice(M.value-1,0,ie({},ve))}else if(H=="move_bottom"){let ve=i.value[M.value];i.value.splice(M.value,1),i.value.splice(M.value+1,0,ie({},ve))}q.value=!1},I=(H="")=>{if(H=="insert")c.value.splice(T.value,0,il(ie({},k.value),{p_status:"Add"}));else if(H=="delete")c.value[T.value].p_status=="Edit"?c.value[T.value].p_status="Remove":c.value.splice(T.value,1);else if(H=="move_top"){let ve=c.value[T.value];c.value.splice(T.value,1),c.value.splice(T.value-1,0,ie({},ve))}else if(H=="move_bottom"){let ve=c.value[T.value];c.value.splice(T.value,1),c.value.splice(T.value+1,0,ie({},ve))}N.value=!1};ke("role");const Z=ne(()=>d.value.val&&d.value.val1||K().checkPermission("ujalan.val")&&d.value.val||K().checkPermissions("ujalan.val1")&&d.value.val1),E=()=>Y(this,null,function*(){$().loading_full=!0;const{data:H,error:ve,status:Ie}=yield W("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}d.value=H.value.data;let le="Edit";o.is_copy&&(le="Add",d.value.val=0,d.value.val1=0),i.value=H.value.data.details.map(z=>(z.p_status=le,z.key=z.ordinal,z)),c.value=H.value.data.details2.map(z=>(z.p_status=le,z.key=z.ordinal,z))});return je(()=>o.show,(H,ve)=>{H==!0&&(d.value=ie({},f),i.value=[],c.value=[],o.id!=0&&E())},{immediate:!0}),(H,ve)=>{const Ie=Xe,le=dl,z=Jl,G=At,oe=ft,se=gt,_e=Kl,ue=aa;return s(),_(ye,null,[ae(e("section",wF,[e("div",null,[j(Ie,{title:"Form Ujalan",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",gF,[e("div",$F,[e("div",kF,[e("div",jF,[DF,ae(e("input",{"onUpdate:modelValue":ve[0]||(ve[0]=B=>t(d).xto=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},null,8,SF),[[Te,t(d).xto]]),e("p",TF,l(t(r).xto),1)]),e("div",CF,[PF,ae(e("select",{"onUpdate:modelValue":ve[1]||(ve[1]=B=>t(d).jenis=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},OF,8,AF),[[We,t(d).jenis]]),e("p",NF,l(t(r).jenis),1)]),e("div",FF,[IF,e("div",YF,l(t(x)(t(d).bonus_trip_kernet||0)),1)]),e("div",BF,[qF,e("div",UF,l(t(x)(t(d).km_range||0)),1)]),e("div",HF,[zF,e("div",VF,[j(le,{class:"w-full h-full p-1",type:"text",value:t(d).km_range||0,onInput:ve[2]||(ve[2]=B=>t(d).km_range=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},null,8,["value","disabled"])]),e("p",LF,l(t(r).km_range),1)]),e("div",EF,[RF,e("div",JF,l(t(x)(t(A))),1),e("p",KF,l(t(r).harga),1)]),e("div",GF,[ZF,ae(e("select",{"onUpdate:modelValue":ve[3]||(ve[3]=B=>t(d).transition_from=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},[QF,(s(!0),_(ye,null,Ae(t($)().list_pabrik,B=>(s(),_("option",{value:B},l(B),9,XF))),256))],8,WF),[[We,t(d).transition_from]]),e("p",eI,l(t(r).transition_from),1)]),e("div",tI,[lI,ae(e("textarea",{"onUpdate:modelValue":ve[4]||(ve[4]=B=>t(d).tipe=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},null,8,aI),[[Te,t(d).tipe]]),e("p",sI,l(t(r).tipe),1)]),e("div",oI,[nI,ae(e("textarea",{"onUpdate:modelValue":ve[5]||(ve[5]=B=>t(d).note_for_remarks=B),disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(Z)},null,8,rI),[[Te,t(d).note_for_remarks]]),e("p",iI,l(t(r).note_for_remarks),1)])]),e("div",dI,[e("div",_I,[e("div",uI,[e("table",cI,[e("thead",null,[e("tr",pI,[e("td",{colspan:("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])&&!t(Z)?7:6,class:"!bg-slate-800 text-white font-bold"}," Detail Uang Jalan ",8,vI)]),e("tr",fI,[("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])&&!t(Z)?(s(),_("th",mI,[e("button",{type:"button",name:"button",class:"bg-yellow-600",onClick:ve[6]||(ve[6]=B=>C())}," Default In ")])):O("",!0),hI,bI,yI,xI,e("th",wI,[F("Total "),gI,F(),e("span",$I,"("+l(t(x)(t(A)))+")",1)]),kI])]),e("tbody",jI,[(s(!0),_(ye,null,Ae(t(i),(B,de)=>(s(),_(ye,{key:de},[B.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":de},[("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])&&!t(Z)?(s(),_("td",SI,[e("div",TI,[e("button",{type:"button",name:"button",onClick:V=>R(V,de)},[j(z)],8,CI)])])):O("",!0),e("td",null,l(de+1)+".",1),e("td",PI,[e("div",AI,[ae(e("textarea",{disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z),class:"p-1 w-full","onUpdate:modelValue":V=>B.xdesc=V,cols:"7",rows:"2"},null,8,MI),[[Te,B.xdesc]])])]),e("td",{class:Ue(["cell bold",!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)?"unselectable":""])},[e("div",OI,[(s(),pe(le,{key:de,class:"w-full h-full p-1",type:"text",value:B.harga||0,onInput:V=>B.harga=V,show:n.show,disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)},null,8,["value","onInput","show","disabled"]))])],2),e("td",{class:Ue(["cell",!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)?"unselectable":""])},[e("div",NI,[(s(),pe(le,{key:de,class:"w-full h-full p-1",type:"text",value:B.qty||0,onInput:V=>B.qty=V,show:n.show,disabled:!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)},null,8,["value","onInput","show","disabled"]))])],2),e("td",FI,[e("div",II,l(t(x)(B.qty*B.harga||0)),1)]),e("td",{class:Ue(["cell",!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)?"unselectable":""])},[e("div",YI,[!("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])||t(Z)?(s(),_("div",BI,[B.for_remarks==0?(s(),pe(G,{key:0,class:"text-red-800"})):(s(),pe(oe,{key:1,class:"text-green-800"}))])):(s(),_("button",{key:1,type:"button",onClick:V=>B.for_remarks=B.for_remarks?0:1,class:Ue(["text-white w-auto rounded text-xl",B.for_remarks?"bg-green-600":"bg-red-600"])},[B.for_remarks==0?(s(),pe(G,{key:0})):(s(),pe(oe,{key:1}))],10,qI))])],2)],8,DI)):O("",!0)],64))),128)),("useUtils"in H?H.useUtils:t(K))().checkPermissions(["ujalan.detail.create","ujalan.detail.modify"])&&!t(Z)?(s(),_("tr",UI,[e("td",HI,[e("button",{type:"button",name:"button",onClick:ve[7]||(ve[7]=B=>re())},[j(se)])])])):O("",!0)],512)])])]),e("div",zI,[e("div",VI,[e("table",LI,[e("thead",null,[e("tr",EI,[e("td",{colspan:t(Z)?9:11,class:"!bg-slate-800 text-white font-bold"}," Detail PVR ",8,RI)]),e("tr",JI,[t(Z)?O("",!0):(s(),_("th",KI)),GI,t(Z)?O("",!0):(s(),_("th",ZI)),WI,QI,XI,eY,tY,lY,aY,e("th",sY,[F("Total "),oY,F(),e("span",nY,"("+l(t(x)(t(D)))+")",1)])])]),e("tbody",rY,[(s(!0),_(ye,null,Ae(t(c),(B,de)=>(s(),_(ye,{key:de},[B.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":de},[t(Z)?O("",!0):(s(),_("td",dY,[e("div",_Y,[e("button",{type:"button",name:"button",onClick:V=>J(V,de)},[j(z)],8,uY)])])),e("td",null,l(de+1)+".",1),t(Z)?O("",!0):(s(),_("td",cY,[e("div",pY,[B.ac_account_id?(s(),_("button",{key:1,type:"button",onClick:V=>w(V,de),disabled:B.confirm_by},[j(G,{class:"font-bold text-2xl"})],8,fY)):(s(),_("button",{key:0,type:"button",name:"button",onClick:V=>v(V,de)}," ... ",8,vY))])])),e("td",{class:Ue(["cell bold",t(Z)?"unselectable":""])},[e("div",mY,l(B.ac_account_id),1)],2),e("td",{class:Ue(["cell bold",t(Z)?"unselectable":""])},[e("div",hY,l(B.ac_account_code),1)],2),e("td",{class:Ue(["cell bold",t(Z)?"unselectable":""])},[e("div",bY,l(B.ac_account_name),1)],2),e("td",yY,[e("div",xY,[ae(e("textarea",{disabled:t(Z),class:"p-1 w-full","onUpdate:modelValue":V=>B.description=V,cols:"7",rows:"2"},null,8,wY),[[Te,B.description]])])]),e("td",{class:Ue(["cell bold",t(Z)?"unselectable":""])},[e("div",gY,[(s(),pe(le,{key:de,class:"w-full h-full p-1",type:"text",value:B.amount||0,onInput:V=>B.amount=V,show:n.show,disabled:t(Z)},null,8,["value","onInput","show","disabled"]))])],2),e("td",{class:Ue(["cell",t(Z)?"unselectable":""])},[e("div",$Y,[(s(),pe(le,{key:de,class:"w-full h-full p-1",type:"text",value:B.qty||0,onInput:V=>B.qty=V,show:n.show,disabled:t(Z)},null,8,["value","onInput","show","disabled"]))])],2),e("td",{class:Ue(["cell",t(Z)?"unselectable":""])},[e("div",kY,[ae(e("select",{class:"h-full","onUpdate:modelValue":V=>B.xfor=V,disabled:t(Z)},CY,8,jY),[[We,B.xfor]])])],2),e("td",PY,[e("div",AY,l(t(x)(B.qty*B.amount||0)),1)])],8,iY)):O("",!0)],64))),128)),t(Z)?O("",!0):(s(),_("tr",MY,[e("td",OY,[e("button",{type:"button",name:"button",onClick:ve[8]||(ve[8]=B=>te())},[j(se)])])]))],512)])])])])]),e("div",NY,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:ve[9]||(ve[9]=B=>n.fnClose())}," Cancel "),t(Z)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:ve[10]||(ve[10]=ze(B=>S(),["prevent"]))}," Save "))])])])],512),[[Be,n.show]]),j(_e,{show:t(q),coor:t(P),fn:ee,data:t(i),data_index:t(M),onReplyAct:ve[11]||(ve[11]=B=>U(B))},null,8,["show","coor","data","data_index"]),j(_e,{show:t(N),coor:t(L),fn:ce,data:t(c),data_index:t(T),onReplyAct:ve[12]||(ve[12]=B=>I(B))},null,8,["show","coor","data","data_index"]),j(ue,{show:t(y),fnClose:g,fnSelect:b},null,8,["show"])],64)}}},da=Oe(FY,[["__scopeId","data-v-975e9b7c"]]),jxe=Object.freeze(Object.defineProperty({__proto__:null,default:da},Symbol.toStringTag,{value:"Module"}));const yl=n=>(nt("data-v-15b2e941"),n=n(),rt(),n),IY={class:"box-fixed"},YY={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},BY={class:"w-full flex flex-col items-center grow overflow-auto"},qY={class:"w-full flex flex-row flex-wrap"},UY={class:"w-full sm:w-8/12 md:w-6/12 lg:w-5/12 flex flex-col flex-wrap p-1"},HY=yl(()=>e("label",{for:""},"To",-1)),zY={class:"card-border disabled"},VY={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-1/12 flex flex-col flex-wrap p-1"},LY=yl(()=>e("label",{for:""},"Jenis",-1)),EY={class:"card-border disabled"},RY={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},JY=yl(()=>e("label",{for:""},"Trip Bonus Supir",-1)),KY={class:"w-full"},GY={class:"text-red-500"},ZY={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},WY=yl(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),QY={class:"w-full"},XY={class:"text-red-500"},eB={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},tB=yl(()=>e("label",{for:""},"Asal Peralihan",-1)),lB={class:"card-border disabled"},aB={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},sB=yl(()=>e("label",{for:""},"Tipe",-1)),oB={class:"card-border disabled"},nB={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},rB=yl(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),iB={class:"card-border disabled"},dB={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},_B=yl(()=>e("label",{for:""},"Batas % Susut",-1)),uB={class:"w-full"},cB={class:"text-red-500"},pB={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},vB=yl(()=>e("label",{for:""},"Dest. Location",-1)),fB={class:"text-red-500"},mB={class:"w-full flex items-center justify-end"},hB={__name:"ujalan_batas_persen_susut",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{pointFormat:x}=K(),f={id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,batas_persen_susut:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",transition_from:""},d=u(ie({},f)),a=ke("token"),r=u({}),p=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const b=new FormData;b.append("batas_persen_susut",d.value.batas_persen_susut),b.append("bonus_trip_supir",d.value.bonus_trip_supir),b.append("bonus_trip_kernet",d.value.bonus_trip_kernet),b.append("destination_location_id",k.value.id);let v="post",w=o.is_copy?0:o.id;w==0||(b.append("id",w),b.append("_method","PUT"));const{data:m,error:S,status:A}=yield W("/ujalan/batas_persen_susut",{method:v,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:b,retry:0});if($().loading_full=!1,A.value==="error"){X().trigger(S,r);return}if(d.value.destination_location=JSON.parse(JSON.stringify(k.value._raw)),w<=0)d.value.id=m.value.id,d.value.created_at=m.value.created_at,d.value.updated_at=m.value.updated_at,o.p_data.unshift(d.value);else{d.value.updated_at=m.value.updated_at;let D=o.p_data.map(M=>M.id).indexOf(w);D>-1&&o.p_data.splice(D,1,ie({},d.value))}o.fnClose()}),i=ne(()=>!1),c=()=>Y(this,null,function*(){$().loading_full=!0;const{data:b,error:v,status:w}=yield W("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v);return}d.value=b.value.data;let m=b.value.data;o.is_copy&&(d.value.val=0,d.value.val1=0),k.value._raw=m.destination_location,k.value._.id.val=m.destination_location.id,k.value._.xto.val=m.destination_location.xto,k.value._.min_trip.val=x(m.destination_location.min_trip),k.value._.bonus_trip_supir.val=x(m.destination_location.bonus_trip_supir),k.value._.bonus_next_trip_supir.val=x(m.destination_location.bonus_next_trip_supir),k.value._.bonus_trip_kernet.val=x(m.destination_location.bonus_trip_kernet),k.value._.bonus_next_trip_kernet.val=x(m.destination_location.bonus_next_trip_kernet),k.value.id=m.destination_location.id,k.value.name=m.destination_location.xto,k.value.title=x(m.destination_location.total)||""}),h={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},min_trip:{tcon:"",text:"Min Trip",val:""},bonus_trip_supir:{tcon:"",text:"Bonus Trip Supir",val:""},bonus_next_trip_supir:{tcon:"",text:"Bonus Next Trip Supir",val:""},bonus_trip_kernet:{tcon:"",text:"Bonus Trip Kernet",val:""},bonus_next_trip_kernet:{tcon:"",text:"Bonus Next Trip Kernet",val:""}},id:"",name:"",title:"",note:""},k=u(JSON.parse(JSON.stringify(h))),C=u([]),y=()=>Y(this,null,function*(){$().loading_full=!0;const{data:b,error:v,status:w}=yield W("/ujalan/load_local",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v);return}C.value=b.value.list_destination_location}),g=ne(()=>{let b=[];return C.value.forEach((v,w)=>{let m=JSON.parse(JSON.stringify(h));m._.id.val=v.id,m._.xto.val=v.xto,m._.min_trip.val=x(v.minimal_trip),m._.bonus_trip_supir.val=x(v.bonus_trip_supir),m._.bonus_next_trip_supir.val=x(v.bonus_next_trip_supir),m._.bonus_trip_kernet.val=x(v.bonus_trip_kernet),m._.bonus_next_trip_kernet.val=x(v.bonus_next_trip_kernet),m.id=v.id,m.name=v.xto,m.title="Min Trip:"+(x(v.minimal_trip)||"")+" | Bonus Trip Supir:"+(x(v.bonus_trip_supir)||"")+" | Bonus Next Trip Supir:"+(x(v.bonus_next_trip_supir)||"")+" | Bonus Trip Kernet:"+(x(v.bonus_trip_kernet)||"")+" | Bonus Next Trip Kernet:"+(x(v.bonus_next_trip_kernet)||""),m._raw=v,b.push(JSON.parse(JSON.stringify(m)))}),b});return je(()=>o.show,(b,v)=>Y(this,null,function*(){b==!0&&(yield y(),d.value=ie({},f),k.value=JSON.parse(JSON.stringify(h)),o.id!=0&&c())}),{immediate:!0}),(b,v)=>{const w=Xe,m=dl,S=$l;return ae((s(),_("section",IY,[e("div",null,[j(w,{title:"Form Batas Persen Susut",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",YY,[e("div",BY,[e("div",qY,[e("div",UY,[HY,e("div",zY,l(t(d).xto),1)]),e("div",VY,[LY,e("div",EY,l(t(d).jenis),1)]),e("div",RY,[JY,e("div",KY,[j(m,{class:"w-full h-full p-1",type:"text",value:t(d).bonus_trip_supir||0,onInput:v[0]||(v[0]=A=>t(d).bonus_trip_supir=A),disabled:!("useUtils"in b?b.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(i)},null,8,["value","disabled"])]),e("p",GY,l(t(r).bonus_trip_supir),1)]),e("div",ZY,[WY,e("div",QY,[j(m,{class:"w-full h-full p-1",type:"text",value:t(d).bonus_trip_kernet||0,onInput:v[1]||(v[1]=A=>t(d).bonus_trip_kernet=A),disabled:!("useUtils"in b?b.useUtils:t(K))().checkPermissions(["ujalan.create","ujalan.modify"])||t(i)},null,8,["value","disabled"])]),e("p",XY,l(t(r).bonus_trip_kernet),1)]),e("div",eB,[tB,e("div",lB,l(t(d).transition_from),1)]),e("div",aB,[sB,e("div",oB,l(t(d).tipe),1)]),e("div",nB,[rB,e("div",iB,l(t(d).note_for_remarks),1)]),e("div",dB,[_B,e("div",uB,[ae(e("input",{"onUpdate:modelValue":v[2]||(v[2]=A=>t(d).batas_persen_susut=A)},null,512),[[Te,t(d).batas_persen_susut]])]),e("p",cB,l(t(r).batas_persen_susut),1)]),e("div",pB,[vB,j(S,{arr:t(g),selected:t(k),pure:h,onSetSelected:v[3]||(v[3]=A=>k.value=A),disabled:t(i)},null,8,["arr","selected","disabled"]),e("p",fB,l(t(r).destination_location_id),1)])])]),e("div",mB,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:v[4]||(v[4]=A=>n.fnClose())}," Cancel "),t(i)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:v[5]||(v[5]=ze(A=>p(),["prevent"]))}," Save "))])])])],512)),[[Be,n.show]])}}},ns=Oe(hB,[["__scopeId","data-v-15b2e941"]]),Dxe=Object.freeze(Object.defineProperty({__proto__:null,default:ns},Symbol.toStringTag,{value:"Module"}));const xt=n=>(nt("data-v-efd7e8d8"),n=n(),rt(),n),bB={class:"box-fixed"},yB={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},xB={class:"w-full flex flex-col items-center grow overflow-auto"},wB={class:"w-full flex flex-row flex-wrap"},gB={class:"w-full sm:w-8/12 md:w-5/12 lg:w-5/12 flex flex-col flex-wrap p-1"},$B=xt(()=>e("label",{for:""},"To",-1)),kB={class:"card-border"},jB={class:"w-1/2 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},DB=xt(()=>e("label",{for:""},"Jenis",-1)),SB={class:"card-border"},TB={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},CB=xt(()=>e("label",{for:""},"Trip Bonus Supir",-1)),PB={class:"card-border"},AB={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},MB=xt(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),OB={class:"card-border"},NB={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},FB=xt(()=>e("label",{for:""},"KM Range",-1)),IB={class:"card-border"},YB={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},BB=xt(()=>e("label",{for:""},"Harga",-1)),qB={class:"card-border"},UB={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},HB=xt(()=>e("label",{for:""},"Asal Peralihan",-1)),zB={class:"card-border"},VB={class:"w-full sm:w-7/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},LB=xt(()=>e("label",{for:""},"Tipe",-1)),EB={class:"card-border"},RB={class:"w-full sm:w-full md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},JB=xt(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),KB={class:"card-border"},GB={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},ZB={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pr-1 2xl:max-h-full"},WB={class:"w-full",role:"sticky"},QB={class:"tacky w-full !table-auto whitespace-normal"},XB=xt(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Uang Jalan ")],-1)),eq={class:"sticky top-8 !z-[2]"},tq=xt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),lq=xt(()=>e("th",{class:"min-w-[150px] !w-[150px] max-w-[150px]"},"Desc",-1)),aq=xt(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Harga @",-1)),sq=xt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"Qty",-1)),oq={class:"min-w-[100px] !w-[100px] max-w-[100px]"},nq=xt(()=>e("br",null,null,-1)),rq={class:"text-sm"},iq=xt(()=>e("th",{class:"min-w-[70px] !w-[70px] max-w-[70px] whitespace-break-spaces"},"For Remarks",-1)),dq={ref:"to_move"},_q=["data-index"],uq={class:"cell"},cq={class:"w-full h-auto flex items-center justify-center"},pq={class:"cell bold"},vq={class:"w-full h-auto flex items-center justify-center"},fq={class:"cell"},mq={class:"w-full h-auto flex items-center justify-center"},hq={class:"cell"},bq={class:"w-full h-auto flex items-center justify-center"},yq={class:"cell"},xq={class:"w-full h-auto flex items-center justify-center"},wq={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pl-1 2xl:max-h-full pt-1 2xl:pt-0"},gq={class:"w-full",role:"sticky"},$q={class:"tacky w-full !table-auto whitespace-normal"},kq=xt(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"9",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),jq={class:"sticky top-8 !z-[2]"},Dq=xt(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),Sq=xt(()=>e("th",{class:"min-w-[60px] !w-[60px] max-w-[60px]"},"Acc ID",-1)),Tq=xt(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),Cq=xt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),Pq=xt(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),Aq=xt(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Amount",-1)),Mq=xt(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Qty",-1)),Oq=xt(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),Nq={class:"min-w-[100px] !w-[100px] max-w-[100px]"},Fq=xt(()=>e("br",null,null,-1)),Iq={class:"text-sm"},Yq={ref:"to_move"},Bq=["data-index"],qq={class:"w-full h-auto flex items-center justify-center"},Uq={class:"w-full h-auto flex items-center justify-center"},Hq={class:"w-full h-auto flex items-center justify-center"},zq={key:0,class:"cell"},Vq={class:"w-full h-auto flex items-center justify-center"},Lq={class:"w-full h-auto flex items-center justify-center"},Eq={class:"cell"},Rq={class:"w-full h-auto flex items-center justify-center"},Jq={class:"w-full flex items-center justify-end"},Kq={class:"w-full flex flex-wrap p-3 items-center"},Gq=xt(()=>e("div",null," Di Validasi oleh : ",-1)),Zq={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Wq={key:0},Qq={key:1},Xq={__name:"ujalan_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,tipe:"",jenis:"",harga:0,note_for_remarks:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""})),r=ke("token"),p=u({}),i=u(null),c=u(null),h=u([]),k=u([]),C=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const w=new FormData;let m="post",S=o.id;S==0||(w.append("id",S),w.append("_method","PUT"));const{data:A,error:D,status:M}=yield W("/ujalan_validasi",{method:m,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:w,retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D,p);return}a.value.val=A.value.val,a.value.val_user=A.value.val_user,a.value.val_by=A.value.val_by,a.value.val_at=A.value.val_at,a.value.val1=A.value.val1,a.value.val1_user=A.value.val1_user,a.value.val1_by=A.value.val1_by,a.value.val1_at=A.value.val1_at;let T=o.p_data.map(q=>q.id).indexOf(o.id);T>-1&&o.p_data.splice(T,1,ie({},a.value)),o.fnClose()}),y=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const w=new FormData;let m="post",S=o.id;S==0||(w.append("id",S),w.append("_method","PUT"));const{data:A,error:D,status:M}=yield W("/ujalan_unvalidasi",{method:m,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:w,retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D,p);return}a.value.val=A.value.val,a.value.val_user=A.value.val_user,a.value.val_by=A.value.val_by,a.value.val_at=A.value.val_at,a.value.val1=A.value.val1,a.value.val1_user=A.value.val1_user,a.value.val1_by=A.value.val1_by,a.value.val1_at=A.value.val1_at;let T=o.p_data.map(q=>q.id).indexOf(o.id);T>-1&&o.p_data.splice(T,1,ie({},a.value)),o.fnClose()}),g=()=>Y(this,null,function*(){$().loading_full=!0;const{data:w,error:m,status:S}=yield W("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m);return}a.value=w.value.data,h.value=w.value.data.details,k.value=w.value.data.details2}),b=ne(()=>{let w=0;return k.value.forEach(m=>{m.p_status!="Remove"&&(w+=m.qty*m.amount)}),w}),v=ne(()=>!1);return je(()=>o.show,(w,m)=>{w==!0&&(o.it_state==1&&setTimeout(()=>{i.value.focus()},1),o.it_state==0&&setTimeout(()=>{c.value.focus()},1),g())},{immediate:!0}),(w,m)=>{const S=Xe,A=At,D=ft;return ae((s(),_("section",bB,[e("div",null,[j(S,{title:"Form Ujalan Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",yB,[e("div",xB,[e("div",wB,[e("div",gB,[$B,e("div",kB,l(t(a).xto),1)]),e("div",jB,[DB,e("div",SB,l(t(a).jenis),1)]),e("div",TB,[CB,e("div",PB,l(t(f)(t(a).bonus_trip_supir||0)),1)]),e("div",AB,[MB,e("div",OB,l(t(f)(t(a).bonus_trip_kernet||0)),1)]),e("div",NB,[FB,e("div",IB,l(t(f)(t(a).km_range||0)),1)]),e("div",YB,[BB,e("div",qB,l(t(f)(t(a).harga||0)),1)]),e("div",UB,[HB,e("div",zB,l(t(a).transition_from),1)]),e("div",VB,[LB,e("div",EB,l(t(a).tipe),1)]),e("div",RB,[JB,e("div",KB,l(t(a).note_for_remarks),1)])]),e("div",GB,[e("div",ZB,[e("div",WB,[e("table",QB,[e("thead",null,[XB,e("tr",eq,[tq,lq,aq,sq,e("th",oq,[F("Total "),nq,F(),e("span",rq,"("+l(t(f)(t(a).harga||0))+")",1)]),iq])]),e("tbody",dq,[(s(!0),_(ye,null,Ae(t(h),(M,T)=>(s(),_(ye,{key:T},[M.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":T},[e("td",null,l(T+1)+".",1),e("td",uq,[e("div",cq,l(M.xdesc),1)]),e("td",pq,[e("div",vq,l(t(f)(M.harga||0)),1)]),e("td",fq,[e("div",mq,l(t(f)(M.qty||0)),1)]),e("td",hq,[e("div",bq,l(t(f)(M.qty*M.harga||0)),1)]),e("td",yq,[e("div",xq,[e("div",{class:Ue(["text-white rounded text-xl w-5 h-5",M.for_remarks?"bg-green-600":"bg-red-600"])},[M.for_remarks==0?(s(),pe(A,{key:0})):(s(),pe(D,{key:1}))],2)])])],8,_q)):O("",!0)],64))),128))],512)])])]),e("div",wq,[e("div",gq,[e("table",$q,[e("thead",null,[kq,e("tr",jq,[Dq,Sq,Tq,Cq,Pq,Aq,Mq,Oq,e("th",Nq,[F("Total "),Fq,F(),e("span",Iq,"("+l(t(f)(t(b)))+")",1)])])]),e("tbody",Yq,[(s(!0),_(ye,null,Ae(t(k),(M,T)=>(s(),_(ye,{key:T},[M.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":T},[e("td",null,l(T+1)+".",1),e("td",{class:Ue(["cell bold",t(v)?"unselectable":""])},[e("div",qq,l(M.ac_account_id),1)],2),e("td",{class:Ue(["cell bold",t(v)?"unselectable":""])},[e("div",Uq,l(M.ac_account_code),1)],2),e("td",{class:Ue(["cell bold",t(v)?"unselectable":""])},[e("div",Hq,l(M.ac_account_name),1)],2),t(v)?O("",!0):(s(),_("td",zq,[e("div",Vq,l(M.description),1)])),e("td",{class:Ue(["cell bold",t(v)?"unselectable":""])},[e("div",Lq,l(t(f)(M.amount||0)),1)],2),e("td",{class:Ue(["cell",t(v)?"unselectable":""])},l(t(f)(M.qty||0)),3),e("td",{class:Ue(["cell",t(v)?"unselectable":""])},l(M.xfor),3),e("td",Eq,[e("div",Rq,l(t(f)(M.qty*M.amount||0)),1)])],8,Bq)):O("",!0)],64))),128))],512)])])])])]),e("div",Jq,[e("div",Kq,[Gq,t(a).val||t(a).val1?(s(),_("div",Zq,[t(a).val?(s(),_("div",Wq," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val1?(s(),_("div",Qq," App 2 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:m[0]||(m[0]=M=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:m[1]||(m[1]=ze(M=>C(),["prevent"]))}," Validasi ",512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:m[2]||(m[2]=ze(M=>y(),["prevent"]))}," Unvalidasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},_a=Oe(Xq,[["__scopeId","data-v-efd7e8d8"]]),Sxe=Object.freeze(Object.defineProperty({__proto__:null,default:_a},Symbol.toStringTag,{value:"Module"})),eU={class:"w-full h-full flex flex-col"},tU={class:"w-full flex grow flex-col overflow-auto h-0"},lU={class:"w-full flex justify-between flex-wrap"},aU={class:"grow flex"},sU={class:"m-1"},oU=e("option",{value:"available"},"Available",-1),nU=e("option",{value:"unapprove"},"Unapprove",-1),rU=e("option",{value:"deleted"},"Trash",-1),iU=e("option",{value:"all"},"All",-1),dU=[oU,nU,rU,iU],_U=e("span",{class:"text-xs ml-1"}," Download ",-1),uU={class:"whitespace-pre-wrap"},cU={class:"grow mb-5"},pU={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{pointFormat:f}=K(),d=V=>V.deleted==1?"!bg-red-400":V.val==0||V.val1==0?"!bg-gray-300":"",a=u("available");je(()=>a.value,V=>{w()},{immediate:!1});const r={};r._TimeZoneOffset=new Date().getTimezoneOffset(),r.sort="tanggal:desc";const p=u({}),i=ke("token"),{data:c}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let V=[];const[me,Me]=yield Promise.all([W("/ujalan",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:{filter_status:a},retry:0})]);return me.status.value!=="error"&&(V=me.data.value.data),me.status.value==="error"?(X().trigger(me.error),{ujalans:V}):($().loading_full=!1,{ujalans:V})}),"$SN3C927rLk")})),o=yield o,x(),o),h=u(c.value.ujalans||[]),k=u({field:"tanggal",by:"desc"}),C=u(-1),y=ne(()=>h.value[C.value]),g=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),b=()=>{r.like="";let V=JSON.parse(JSON.stringify($()._tv.global_keyword));V!=""&&(r.like=`id:%${V}%,xto:%${V}%,tipe:%${V}%,jenis:%${V}%,harga:%${V}%`),r.sort="",k.value.field&&(r.sort=k.value.field+":"+k.value.by),r.filter_model=JSON.stringify($()._tv.filter_model)},v=()=>Y(this,null,function*(){$().loading_full=!0,p.value={},g.value.may_get_data=!1,r.page=g.value.page,r.page==1&&(h.value=[]),r.first_row&&delete r.first_row,r.page>1&&(r.first_row=JSON.stringify(h.value[0])),r.filter_status=a.value;const{data:V,error:me,status:Me}=yield W("/ujalan",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:r,retry:0});if($().loading_full=!1,g.value.may_get_data=!0,Me.value==="error"){X().trigger(me,p);return}g.value.page==1?h.value=V.value.data:g.value.page>1&&(h.value=[...h.value,...V.value.data]),V.value.data.length==0&&(g.value.is_last_record=!0),$()._tv.filter_box=!1}),w=()=>{C.value=-1,g.value.page=1,g.value.is_last_record=!1,b(),v()},m=u(!1),S=u(!1),A=u(0),D=u(0),M=u(-1),T=()=>{A.value=0,M.value=-1,D.value=!1,m.value=!0},{display:q}=Je();Dt(Je());const P=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(A.value=h.value[C.value].id,M.value=-1,D.value=!1,m.value=!0)},N=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(A.value=h.value[C.value].id,M.value=-1,D.value=!1,S.value=!0)},L=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(A.value=h.value[C.value].id,M.value=-1,D.value=!0,m.value=!0)},R=u(!1),J=u(0),re=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(J.value=h.value[C.value].id,M.value=1,D.value=!1,R.value=!0)},te=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(J.value=h.value[C.value].id,M.value=0,D.value=!1,R.value=!0)},ee=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(J.value=h.value[C.value].id,D.value=!1,M.value=-1,R.value=!0)},ce=u(!1),U=u({}),I=u(!1),Z=u(""),E=()=>Y(this,null,function*(){I.value&&(I.value=!1)}),H=()=>{C.value==-1?q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Z.value="",U.value={id:h.value[C.value].id,tujuan:h.value[C.value].xto},I.value=!0)};je(()=>Z.value,V=>{V.trim().length>0?ce.value=!0:ce.value=!1},{immediate:!1});const ve=()=>Y(this,null,function*(){$().loading_full=!0;const V=new FormData;V.append("id",h.value[C.value].id),V.append("deleted_reason",Z.value),V.append("_method","DELETE");const{data:me,error:Me,status:tt}=yield W("/ujalan",{method:"post",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},body:V,retry:0});if($().loading_full=!1,tt.value==="error"){X().trigger(Me);return}let ut=ie({},h.value[C.value]);ut.deleted=me.value.deleted,ut.deleted_user=me.value.deleted_user,ut.deleted_at=me.value.deleted_at,ut.deleted_by=me.value.deleted_by,ut.deleted_reason=me.value.deleted_reason,a.value!="all"?h.value.splice(C.value,1):h.value.splice(C.value,1,ie({},ut)),C.value=-1,I.value=!1}),Ie=u([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"xto",label:"Tujuan",freeze:1,filter_on:1,type:"string"},{key:"asst_opt",label:"Info",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"destination_location",label:"Dest. Location",childs:[{key:"destination_location_xto",label:"Xto",type:"string",filter_on:1},{key:"destination_location_minimal_trip",label:"Min Trip",filter_on:1,type:"string"},{key:"destination_location_bonus_trip_supir",label:"Bonus Trip Supir",filter_on:1,type:"number"},{key:"destination_location_bonus_next_trip_supir",label:"Bonus Trip Supir",filter_on:1,type:"number"},{key:"destination_location_bonus_trip_kernet",label:"Bonus Trip Kernet",filter_on:1,type:"number"},{key:"destination_location_bonus_next_trip_kernet",label:"Bonus Trip Kernet",filter_on:1,type:"number"}]},{key:"km_range",label:"Jarak KM",filter_on:1,type:"number"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"harga",label:"Harga",class:" justify-end",type:"number"},{key:"batas_persen_susut",label:"Batas Persen Susut",class:" justify-end",type:"number",tbl_show:K().checkPermission("ujalan.batas_persen_susut.full_act")},{key:"bonus_trip_supir",label:"Bonus Trip Supir",class:" justify-end",type:"number"},{key:"bonus_trip_kernet",label:"Bonus Trip Kernet",class:" justify-end",type:"number"},{key:"note_for_remarks",label:"Ket.U.Remarks",filter_on:1,type:"string"},{key:"transition_from",label:"Pengalihan",filter_on:1,type:"select",select_item:$().list_pabrik},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]),le=ne(()=>C.value>-1&&[void 0,0].indexOf(y.value.deleted)>-1&&K().checkPermission("ujalan.create")),z=ne(()=>["available","all","unapprove"].indexOf(a.value)>-1&&K().checkPermission("ujalan.create")),G=ne(()=>C.value>-1&&[void 0,0].indexOf(y.value.deleted)>-1&&(K().checkPermission("ujalan.val")&&[void 0,0].indexOf(y.value.val)>-1||K().checkPermission("ujalan.val1")&&[void 0,0].indexOf(y.value.val1)>-1)&&K().checkPermissions(["ujalan.modify","ujalan.detail.modify","ujalan.detail2.modify"])),oe=ne(()=>C.value>-1&&[void 0,0].indexOf(y.value.deleted)>-1&&(K().checkPermission("ujalan.val")&&[void 0,0].indexOf(y.value.val)>-1||K().checkPermission("ujalan.val1")&&[void 0,0].indexOf(y.value.val1)>-1)),se=ne(()=>C.value>-1&&[void 0,0].indexOf(y.value.deleted)>-1&&(K().checkPermission("ujalan.unval")&&[1].indexOf(y.value.val)>-1||K().checkPermission("ujalan.unval1")&&[1].indexOf(y.value.val1)>-1)),_e=ne(()=>C.value>-1&&K().checkPermission("ujalan.remove")&&[void 0,0].indexOf(y.value.deleted)>-1),{downloadFile:ue,viewFile:B}=jt(),de=()=>Y(this,null,function*(){b(),$().loading_full=!0,r.filter_status=a.value;const{data:V,error:me,status:Me}=yield W("/ujalan/download_excel",{method:"get",headers:{Authorization:`Bearer ${i.value}`,Accept:"application/json"},params:r,retry:0});if($().loading_full=!1,Me.value==="error"){X().trigger(me);return}ue(V.value)});return(V,me)=>{const Me=_t,tt=fl,ut=gt,he=Pt,Re=Nt,Ne=Zt,Ze=Ft,Ve=wl,Bt=Yt,Rt=$t,Jt=ft,al=Ot,Kt=It,Le=da,Tt=ns,rl=_a;return s(),_("div",eU,[j(Me,{title:"List Ujalan"}),e("div",tU,[e("div",lU,[e("div",aU,[e("div",sU,[ae(e("select",{class:"","onUpdate:modelValue":me[0]||(me[0]=et=>Ee(a)?a.value=et:null)},dU,512),[[We,t(a)]])]),t(le)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[1]||(me[1]=et=>L())},[j(tt)])):O("",!0),t(z)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[2]||(me[2]=et=>T())},[j(ut)])):O("",!0),t(G)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[3]||(me[3]=et=>P())},[j(he)])):O("",!0),t(C)>-1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[4]||(me[4]=et=>ee())},[j(Re)])):O("",!0),t(_e)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[5]||(me[5]=et=>H())},[j(Ne)])):O("",!0),t(oe)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[6]||(me[6]=et=>re())},[j(Ze)])):O("",!0),t(se)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[7]||(me[7]=et=>te())},[j(Ve)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:me[8]||(me[8]=et=>de())},[j(Bt),F(),_U]),t(C)>-1&&("useUtils"in V?V.useUtils:t(K))().checkPermission("ujalan.batas_persen_susut.full_act")?(s(),_("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:me[9]||(me[9]=et=>N())},[j(he)])):O("",!0)])]),j(al,{thead:t(Ie),selected:t(C),onSetSelected:me[10]||(me[10]=et=>C.value=et),tbody:t(h),fnCallData:v,scrolling:t(g),onSetScrollingPage:me[11]||(me[11]=et=>t(g).page=et),onDoFilter:me[12]||(me[12]=et=>w()),rowBgColor:d},{val:Q(({item:et})=>[et.val?(s(),pe(Jt,{key:1})):(s(),pe(Rt,{key:0}))]),val1:Q(({item:et})=>[et.val1?(s(),pe(Jt,{key:1})):(s(),pe(Rt,{key:0}))]),xto:Q(({item:et})=>[e("div",uU,l(et.xto),1)]),destination_location_xto:Q(({item:et})=>{var yt;return[F(l((yt=et.destination_location)==null?void 0:yt.xto),1)]}),destination_location_minimal_trip:Q(({item:et})=>{var yt;return[F(l(t(f)((yt=et.destination_location)==null?void 0:yt.minimal_trip)),1)]}),destination_location_bonus_trip_supir:Q(({item:et})=>{var yt;return[F(l(t(f)((yt=et.destination_location)==null?void 0:yt.bonus_trip_supir)),1)]}),destination_location_bonus_next_trip_supir:Q(({item:et})=>{var yt;return[F(l(t(f)((yt=et.destination_location)==null?void 0:yt.bonus_next_trip_supir)),1)]}),destination_location_bonus_trip_kernet:Q(({item:et})=>{var yt;return[F(l(t(f)((yt=et.destination_location)==null?void 0:yt.bonus_trip_kernet)),1)]}),destination_location_bonus_next_trip_kernet:Q(({item:et})=>{var yt;return[F(l(t(f)((yt=et.destination_location)==null?void 0:yt.bonus_next_trip_kernet)),1)]}),deleted_by_username:Q(({item:et})=>{var yt;return[F(l((yt=et.deleted_by)==null?void 0:yt.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(Kt,{type:"delete",show:t(I),data:t(U),fnClose:E,fnConfirm:ve,enabledOk:t(ce)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",cU,[ae(e("textarea",{"onUpdate:modelValue":me[13]||(me[13]=et=>Ee(Z)?Z.value=et:null)},null,512),[[Te,t(Z)]])])]),_:1},8,["show","data","enabledOk"]),j(Le,{show:t(m),fnClose:()=>{m.value=!1},id:t(A),p_data:t(h),is_copy:t(D)},null,8,["show","fnClose","id","p_data","is_copy"]),j(Tt,{show:t(S),fnClose:()=>{S.value=!1},id:t(A),p_data:t(h),is_copy:t(D)},null,8,["show","fnClose","id","p_data","is_copy"]),j(rl,{show:t(R),fnClose:()=>{R.value=!1},id:t(J),p_data:t(h),it_state:t(M)},null,8,["show","fnClose","id","p_data","it_state"])])}})}},Txe=Object.freeze(Object.defineProperty({__proto__:null,default:pU},Symbol.toStringTag,{value:"Module"})),vU={class:"w-full h-full flex flex-col"},fU={class:"w-full flex grow flex-col overflow-auto h-0"},mU={class:"w-full flex"},hU={action:"#",class:"w-full flex p-1"},bU={class:"grow"},yU=e("div",{class:"font-bold"}," Keyword ",-1),xU={class:"pl-1"},wU=e("div",{class:"font-bold"}," Sort By ",-1),gU=Et('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),$U=[gU],kU={class:"pl-1"},jU=e("div",{class:"font-bold"}," Sort Order ",-1),DU=e("option",{value:"asc"},"Asc",-1),SU=e("option",{value:"desc"},"Desc",-1),TU=[DU,SU],CU={class:"flex items-end pl-1"},PU={class:"w-full flex justify-center items-center grow h-0 p-1"},AU={key:0,class:""},MU={class:"tacky"},OU=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App 1"),e("th",null,"App 2"),e("th",null,"ID"),e("th",null,"To"),e("th",null,"Tipe"),e("th",null,"Jenis"),e("th",null,"Harga"),e("th",null,"Ket.U.Remarks"),e("th",null,"Asal Peralihan"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),NU=["onClick"],FU={class:"flex items-center justify-center"},IU={class:"flex items-center justify-center"},YU={class:"bold"},BU={class:"grow mb-5"},qU={__name:"index_raw",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let I=[];$().loading_full=!0;const{data:Z,error:E,status:H}=yield W("/ujalan",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});return $().loading_full=!1,H.value==="error"?(X().trigger(E),{ujalans:I}):(I=Z.value.data,{ujalans:I})}),"$XlCU6SukAB")})),o=yield o,x(),o),i=u(p.value.ujalans),c=u(""),h=u({field:"created_at",by:"desc"}),k=u(-1),C=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),y=()=>{a.like="",c.value!=""&&(a.like=`id:%${c.value}%,xto:%${c.value}%,tipe:%${c.value}%,jenis:%${c.value}%,harga:%${c.value}%`),a.sort="",h.value.field&&(a.sort=h.value.field+":"+h.value.by)},g=u(null),b=()=>Y(this,null,function*(){$().loading_full=!0,C.value.may_get_data=!1,a.page=C.value.page,a.page==1&&(i.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(i.value[0]));const{data:I,error:Z,status:E}=yield W("/ujalan",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,C.value.may_get_data=!0,E.value==="error"){X().trigger(Z);return}C.value.page==1?(i.value=I.value.data,g.value&&(g.value.scrollTop=0)):C.value.page>1&&(i.value=[...i.value,...I.value.data]),I.value.data.length==0&&(C.value.is_last_record=!0)}),v=()=>Y(this,null,function*(){if(!C.value.may_get_data)return;let I=g.value;if(I.scrollLeft!=C.value.scrollLeft){C.value.scrollLeft=I.scrollLeft;return}C.value.is_last_record||!(Math.round(I.scrollTop)+I.clientHeight>=I.scrollHeight-1)||(C.value.page++,yield b())}),w=()=>{C.value.page=1,C.value.is_last_record=!1,y(),b()};Ht();const m=u(!1),S=u(0),A=u(0),D=()=>{S.value=0,m.value=!0,A.value=!1},{display:M}=Je();Dt(Je());const T=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=i.value[k.value].id,m.value=!0,A.value=!1)},q=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=i.value[k.value].id,m.value=!0,A.value=!0)},P=u(!1),N=u(0),L=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=i.value[k.value].id,P.value=!0)},R=u(!1),J=u({}),re=u(!1),te=u(""),ee=()=>Y(this,null,function*(){re.value&&(re.value=!1)}),ce=()=>{k.value==-1?M({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value="",J.value={id:i.value[k.value].id},re.value=!0)};je(()=>te.value,I=>{I.trim().length>0?R.value=!0:R.value=!1},{immediate:!1});const U=()=>Y(this,null,function*(){$().loading_full=!0;const I=new FormData;I.append("id",i.value[k.value].id),I.append("deleted_reason",te.value),I.append("_method","DELETE");const{data:Z,error:E,status:H}=yield W("/ujalan",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:I,retry:0});if($().loading_full=!1,H.value==="error"){X().trigger(E);return}i.value.splice(k.value,1),k.value=-1,re.value=!1});return(I,Z)=>{const E=_t,H=fl,ve=gt,Ie=Pt,le=Zt,z=Ft,G=gl,oe=$t,se=ft,_e=It,ue=da,B=_a;return s(),_("div",vU,[j(E,{title:"List Ujalan"}),e("div",fU,[e("div",mU,[("useUtils"in I?I.useUtils:t(K))().checkPermission("ujalan.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[0]||(Z[0]=de=>q())},[j(H)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermission("ujalan.create")?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[1]||(Z[1]=de=>D())},[j(ve)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermissions(["ujalan.modify","ujalan.detail.modify","ujalan.detail2.modify"])?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[2]||(Z[2]=de=>T())},[j(Ie)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermission("ujalan.remove")?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[3]||(Z[3]=de=>ce())},[j(le)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermissions(["ujalan.val","ujalan.val1"])?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[4]||(Z[4]=de=>L())},[j(z)])):O("",!0)]),e("form",hU,[e("div",bU,[yU,ae(e("input",{class:"",type:"text","onUpdate:modelValue":Z[5]||(Z[5]=de=>Ee(c)?c.value=de:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(c)]])]),e("div",xU,[wU,ae(e("select",{class:"","onUpdate:modelValue":Z[6]||(Z[6]=de=>t(h).field=de)},$U,512),[[We,t(h).field]])]),e("div",kU,[jU,ae(e("select",{class:"","onUpdate:modelValue":Z[7]||(Z[7]=de=>t(h).by=de)},TU,512),[[We,t(h).by]])]),e("div",CU,[e("button",{class:"",type:"submit",name:"button",onClick:Z[8]||(Z[8]=ze(de=>w(),["prevent"]))},[j(G,{class:"text-2xl"})])])]),e("div",PU,[t(i).length==0?(s(),_("div",AU," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:v},[e("table",MU,[OU,e("tbody",null,[(s(!0),_(ye,null,Ae(t(i),(de,V)=>(s(),_("tr",{key:V,onClick:me=>k.value=V,class:Ue(t(k)==V?"active":"")},[e("td",null,[e("div",FU,[de.val?(s(),pe(se,{key:1})):(s(),pe(oe,{key:0}))])]),e("td",null,[e("div",IU,[de.val1?(s(),pe(se,{key:1})):(s(),pe(oe,{key:0}))])]),e("td",YU,l(de.id),1),e("td",null,l(de.xto),1),e("td",null,l(de.tipe),1),e("td",null,l(de.jenis),1),e("td",null,l(t(d)(de.harga)),1),e("td",null,l(de.note_for_remarks),1),e("td",null,l(de.transition_from),1),e("td",null,l(de.created_at?t(f)(de.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,l(de.updated_at?t(f)(de.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,NU))),128))])])],544))])]),j(_e,{type:"delete",show:t(re),data:t(J),fnClose:ee,fnConfirm:U,enabledOk:t(R)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",BU,[ae(e("textarea",{"onUpdate:modelValue":Z[9]||(Z[9]=de=>Ee(te)?te.value=de:null)},null,512),[[Te,t(te)]])])]),_:1},8,["show","data","enabledOk"]),j(ue,{show:t(m),fnClose:()=>{m.value=!1},id:t(S),p_data:t(i),is_copy:t(A)},null,8,["show","fnClose","id","p_data","is_copy"]),j(B,{show:t(P),fnClose:()=>{P.value=!1},id:t(N),p_data:t(i)},null,8,["show","fnClose","id","p_data"])])}})}},Cxe=Object.freeze(Object.defineProperty({__proto__:null,default:qU},Symbol.toStringTag,{value:"Module"}));const Fl=n=>(nt("data-v-bc2c6525"),n=n(),rt(),n),UU={class:"box-fixed"},HU={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},zU={class:"w-full flex flex-col items-center grow overflow-auto"},VU={class:"w-full flex flex-row flex-wrap"},LU={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},EU=Fl(()=>e("label",{for:""},"Tujuan",-1)),RU={class:"text-red-500"},JU={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},KU=Fl(()=>e("label",{for:""},"Min Trip",-1)),GU={class:"w-full"},ZU={class:"text-red-500"},WU={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},QU=Fl(()=>e("label",{for:""},"Bonus Trip Supir",-1)),XU={class:"w-full"},eH={class:"text-red-500"},tH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},lH=Fl(()=>e("label",{for:""},"Bonus Next Trip Supir",-1)),aH={class:"w-full"},sH={class:"text-red-500"},oH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},nH=Fl(()=>e("label",{for:""},"Bonus Trip Kernet",-1)),rH={class:"w-full"},iH={class:"text-red-500"},dH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_H=Fl(()=>e("label",{for:""},"Bonus Next Trip Kernet",-1)),uH={class:"w-full"},cH={class:"text-red-500"},pH={class:"w-full flex items-center justify-end"},vH={__name:"destination_location",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,x={id:-1,xto:"",minimal_trip:1,bonus_trip_supir:0,bonus_next_trip_supir:0,bonus_trip_kernet:0,bonus_next_trip_kernet:0},f=u(ie({},x)),d=ke("token"),a=u({}),r=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const i=new FormData;i.append("xto",f.value.xto),i.append("minimal_trip",f.value.minimal_trip),i.append("bonus_trip_supir",f.value.bonus_trip_supir),i.append("bonus_next_trip_supir",f.value.bonus_next_trip_supir),i.append("bonus_trip_kernet",f.value.bonus_trip_kernet),i.append("bonus_next_trip_kernet",f.value.bonus_next_trip_kernet);let c="post",h=o.is_copy?0:o.id;h==0||(i.append("id",h),i.append("_method","PUT"));const{data:k,error:C,status:y}=yield W("/destination_location",{method:c,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:i,retry:0});if($().loading_full=!1,y.value==="error"){X().trigger(C,a);return}if(f.value.updated_at=k.value.updated_at,h<=0)f.value.id=k.value.id,f.value.created_at=k.value.created_at,o.p_data.unshift(f.value);else{let g=o.p_data.map(b=>b.id).indexOf(o.id);g>-1&&o.p_data.splice(g,1,ie({},f.value))}o.fnClose()}),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:i,error:c,status:h}=yield W("/destination_location",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,h.value==="error"){X().trigger(c);return}let k=i.value.data;f.value=k,ie({},k)});return je(()=>o.show,(i,c)=>Y(this,null,function*(){i==!0&&(f.value=ie({},x),a.value={},o.id!=0&&p())}),{immediate:!0}),(i,c)=>{const h=Xe,k=dl;return ae((s(),_("section",UU,[e("div",null,[j(h,{title:"Form Transaction",fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",HU,[e("div",zU,[e("div",VU,[e("div",LU,[EU,ae(e("input",{type:"text",list:"xto","onUpdate:modelValue":c[0]||(c[0]=C=>t(f).xto=C)},null,512),[[Te,t(f).xto]]),e("p",RU,l(t(a).xto),1)]),e("div",JU,[KU,e("div",GU,[j(k,{class:"w-full h-full p-1",type:"text",value:t(f).minimal_trip||0,onInput:c[1]||(c[1]=C=>t(f).minimal_trip=C)},null,8,["value"])]),e("p",ZU,l(t(a).minimal_trip),1)]),e("div",WU,[QU,e("div",XU,[j(k,{class:"w-full h-full p-1",type:"text",value:t(f).bonus_trip_supir||0,onInput:c[2]||(c[2]=C=>t(f).bonus_trip_supir=C)},null,8,["value"])]),e("p",eH,l(t(a).bonus_trip_supir),1)]),e("div",tH,[lH,e("div",aH,[j(k,{class:"w-full h-full p-1",type:"text",value:t(f).bonus_next_trip_supir||0,onInput:c[3]||(c[3]=C=>t(f).bonus_next_trip_supir=C)},null,8,["value"])]),e("p",sH,l(t(a).bonus_next_trip_supir),1)]),e("div",oH,[nH,e("div",rH,[j(k,{class:"w-full h-full p-1",type:"text",value:t(f).bonus_trip_kernet||0,onInput:c[4]||(c[4]=C=>t(f).bonus_trip_kernet=C)},null,8,["value"])]),e("p",iH,l(t(a).bonus_trip_kernet),1)]),e("div",dH,[_H,e("div",uH,[j(k,{class:"w-full h-full p-1",type:"text",value:t(f).bonus_next_trip_kernet||0,onInput:c[5]||(c[5]=C=>t(f).bonus_next_trip_kernet=C)},null,8,["value"])]),e("p",cH,l(t(a).bonus_next_trip_kernet),1)])])]),e("div",pH,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[6]||(c[6]=C=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:c[7]||(c[7]=ze(C=>r(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},rs=Oe(vH,[["__scopeId","data-v-bc2c6525"]]),Pxe=Object.freeze(Object.defineProperty({__proto__:null,default:rs},Symbol.toStringTag,{value:"Module"}));const Al=n=>(nt("data-v-d57399ef"),n=n(),rt(),n),fH={class:"box-fixed"},mH={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},hH={class:"w-full flex flex-col items-center grow overflow-auto"},bH={class:"w-full flex flex-row flex-wrap"},yH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},xH=Al(()=>e("label",{for:""},"Tujuan",-1)),wH={class:"w-full card-border"},gH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},$H=Al(()=>e("label",{for:""},"Min Trip",-1)),kH={class:"w-full card-border"},jH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},DH=Al(()=>e("label",{for:""},"Bonus Trip Supir",-1)),SH={class:"w-full card-border"},TH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},CH=Al(()=>e("label",{for:""},"Bonus Next Trip Supir",-1)),PH={class:"w-full card-border"},AH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},MH=Al(()=>e("label",{for:""},"Bonus Trip Kernet",-1)),OH={class:"w-full card-border"},NH={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},FH=Al(()=>e("label",{for:""},"Bonus Next Trip Kernet",-1)),IH={class:"w-full card-border"},YH={class:"w-full flex items-center justify-end"},BH=Al(()=>e("div",{class:"w-full flex flex-wrap p-3 items-center"},null,-1)),qH={__name:"destination_location_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{pointFormat:x}=K(),d=u(ie({},{id:"",xto:"",minimal_trip:0,bonus_trip_supir:0,bonus_next_trip_supir:0,bonus_trip_kernet:0,bonus_next_trip_kernet:0})),a=ke("token");u({});const r=u(null),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:i,error:c,status:h}=yield W("/destination_location",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,h.value==="error"){X().trigger(c);return}let k=i.value.data;d.value=k});return je(()=>o.show,(i,c)=>{i==!0&&(o.is_view==!1&&setTimeout(()=>{r.value.focus()},1),p())},{immediate:!0}),(i,c)=>{const h=Xe;return ae((s(),_("section",fH,[e("div",null,[j(h,{title:"Form Transaction Extra Money Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",mH,[e("div",hH,[e("div",bH,[e("div",yH,[xH,e("div",wH,l(t(d).xto),1)]),e("div",gH,[$H,e("div",kH,l(t(x)(t(d).minimal_trip)),1)]),e("div",jH,[DH,e("div",SH,l(t(x)(t(d).bonus_trip_supir)),1)]),e("div",TH,[CH,e("div",PH,l(t(x)(t(d).bonus_next_trip_supir)),1)]),e("div",AH,[MH,e("div",OH,l(t(x)(t(d).bonus_trip_kernet)),1)]),e("div",NH,[FH,e("div",IH,l(t(x)(t(d).bonus_next_trip_kernet)),1)])])]),e("div",YH,[BH,e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[0]||(c[0]=k=>n.fnClose())}," Cancel ")])])])],512)),[[Be,n.show]])}}},is=Oe(qH,[["__scopeId","data-v-d57399ef"]]),Axe=Object.freeze(Object.defineProperty({__proto__:null,default:is},Symbol.toStringTag,{value:"Module"})),UH={class:"w-full h-full flex flex-col"},HH={class:"w-full flex grow flex-col overflow-auto h-0"},zH={class:"w-full flex justify-between flex-wrap"},VH={class:"grow flex"},LH={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d=E=>E.deleted==1?"!bg-red-400":E.pv_id>0?"!bg-blue-300":"",a=E=>(E.map(H=>{H.class_h=d(H)}),E),r=u("available");je(()=>r.value,E=>{ce.value.map(H=>{let ve=["deleted_by_username","deleted_at","deleted_reason"].indexOf(H.key)>-1;return["all","deleted"].indexOf(E)>-1?ve&&(H.tbl_show=1):ve&&(H.tbl_show=0),H}),S()},{immediate:!1});const p={};p._TimeZoneOffset=new Date().getTimezoneOffset(),p.sort="tanggal:desc";const i=u({}),c=u({from:"",to:""}),h=ke("token"),{data:k}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let E=[];const[H,ve]=yield Promise.all([W("/destination_locations",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{filter_status:r},retry:0})]);return H.status.value!=="error"&&(E=a(H.data.value.data)),H.status.value==="error"?(X().trigger(H.error),{destination_locations:E}):($().loading_full=!1,{destination_locations:E})}),"$xzB8heZwKP")})),o=yield o,x(),o),C=u(k.value.destination_locations||[]),y=u({field:"tanggal",by:"desc"}),g=u(-1),b=ne(()=>C.value[g.value]),v=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),w=()=>{p.like="";let E=JSON.parse(JSON.stringify($()._tv.global_keyword));E!=""&&(p.like=`id:%${E}%,transition_target:%${E}%,transition_type:%${E}%,destination_location_name:%${E}%,destination_location_type:%${E}%,xto:%${E}%,transition_target:%${E}%`),p.sort="",y.value.field&&(p.sort=y.value.field+":"+y.value.by),p.date_from=c.value.from?f(c.value.from).format("YYYY-MM-DD"):"",p.date_to=c.value.to?f(c.value.to).format("YYYY-MM-DD"):"",p.filter_model=JSON.stringify($()._tv.filter_model)},m=()=>Y(this,null,function*(){$().loading_full=!0,i.value={},v.value.may_get_data=!1,p.page=v.value.page,p.page==1&&(C.value=[]),p.first_row&&delete p.first_row,p.page>1&&(p.first_row=JSON.stringify(C.value[0])),p.filter_status=r.value;const{data:E,error:H,status:ve}=yield W("/destination_locations",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:p,retry:0});if($().loading_full=!1,v.value.may_get_data=!0,ve.value==="error"){X().trigger(H,i);return}v.value.page==1?C.value=a(E.value.data):v.value.page>1&&(C.value=[...C.value,...a(E.value.data)]),E.value.data.length==0&&(v.value.is_last_record=!0),$()._tv.filter_box=!1}),S=()=>{g.value=-1,v.value.page=1,v.value.is_last_record=!1,w(),m()},A=u(!1),D=u(0),M=u(0),T=u(!1),q=()=>{D.value=0,T.value=!1,M.value=!1,A.value=!0},{display:P}=Je();Dt(Je());const N=()=>{g.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(D.value=C.value[g.value].id,T.value=!1,M.value=!1,A.value=!0)},L=()=>{g.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(D.value=C.value[g.value].id,T.value=!1,M.value=!0,A.value=!0)},R=u(!1),J=u(0),re=()=>{g.value==-1?P({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(J.value=C.value[g.value].id,T.value=!0,M.value=!1,R.value=!0)},te=u(!1);u({}),u(!1);const ee=u("");je(()=>ee.value,E=>{E.trim().length>0?te.value=!0:te.value=!1},{immediate:!1});const ce=u([{key:"no",label:"No",isai:!0},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"xto",label:"Tujuan",freeze:1,filter_on:1,type:"string"},{key:"minimal_trip",label:"Min Trip",class:" justify-end",type:"number"},{key:"bonus_trip_supir",label:"Bonus Trip Supir",class:" justify-end",type:"number"},{key:"bonus_next_trip_supir",label:"Bonus Next Trip Supir",class:" justify-end",type:"number"},{key:"bonus_trip_kernet",label:"Bonus Trip Kernet",class:" justify-end",type:"number"},{key:"bonus_next_trip_kernet",label:"Bonus Next Trip Kernet",class:" justify-end",type:"number"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1}]),U=ne(()=>g.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&K().checkPermission("destination_location.create")),I=ne(()=>["available","all"].indexOf(r.value)>-1&&K().checkPermission("destination_location.create")),Z=ne(()=>g.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.val1)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1&&K().checkPermission("destination_location.modify"));return ne(()=>g.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1&&(K().checkPermission("destination_location.val1")&&[void 0,0].indexOf(b.value.val1)>-1||K().checkPermission("destination_location.val2")&&[void 0,0].indexOf(b.value.val2)>-1)),ne(()=>K().checkPermission("destination_location.remove")&&g.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),ne(()=>K().checkPermission("destination_location.preview_file")&&g.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&b.value.val==1),(E,H)=>{const ve=_t,Ie=fl,le=gt,z=Pt,G=Nt,oe=Ot,se=rs,_e=is;return s(),_("div",UH,[j(ve,{title:"List Location"}),e("div",HH,[e("div",zH,[e("div",VH,[t(U)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[0]||(H[0]=ue=>L())},[j(Ie)])):O("",!0),t(I)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[1]||(H[1]=ue=>q())},[j(le)])):O("",!0),t(Z)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[2]||(H[2]=ue=>N())},[j(z)])):O("",!0),t(g)>-1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[3]||(H[3]=ue=>re())},[j(G)])):O("",!0)])]),j(oe,{thead:t(ce),selected:t(g),onSetSelected:H[4]||(H[4]=ue=>g.value=ue),tbody:t(C),fnCallData:m,scrolling:t(v),onSetScrollingPage:H[5]||(H[5]=ue=>t(v).page=ue),onDoFilter:H[6]||(H[6]=ue=>S())},null,8,["thead","selected","tbody","scrolling"])]),j(se,{show:t(A),fnClose:()=>{A.value=!1},id:t(D),p_data:t(C),is_copy:t(M)},null,8,["show","fnClose","id","p_data","is_copy"]),j(_e,{show:t(R),fnClose:()=>{R.value=!1},id:t(J),p_data:t(C),is_view:t(T)},null,8,["show","fnClose","id","p_data","is_view"])])}})}},Mxe=Object.freeze(Object.defineProperty({__proto__:null,default:LH},Symbol.toStringTag,{value:"Module"})),EH={name:"MaterialSymbolsRestoreFromTrashOutline"},RH={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},JH=e("path",{fill:"currentColor",d:"M11 16h2v-4.15l1.6 1.55L16 12l-4-4l-4 4l1.4 1.4l1.6-1.55zm-4 5q-.825 0-1.412-.587T5 19V6H4V4h5V3h6v1h5v2h-1v13q0 .825-.587 1.413T17 21zM17 6H7v13h10zM7 6v13z"},null,-1),KH=[JH];function GH(n,o,x,f,d,a){return s(),_("svg",RH,KH)}const ds=Oe(EH,[["render",GH]]),Oxe=Object.freeze(Object.defineProperty({__proto__:null,default:ds},Symbol.toStringTag,{value:"Module"})),ZH={name:"SimpleIconsJpeg"},WH={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},QH=e("path",{fill:"currentColor",d:"M8.559 20.407c-.63 0-1.08-.026-1.08-.026V17.22h1.073c1.19 0 1.95.33 1.95 1.426c0 .93-.329 1.76-1.943 1.76m.028-3.965H6.61V24h.87v-2.797h1.275c1.783 0 2.634-1.096 2.634-2.483c0-1.413-.871-2.279-2.8-2.279m4.781 4.13h3.063v-.812H13.37v-2.55h3.548v-.768H12.5v7.42h4.566v-.768H13.37zm8.115-.633v.753h1.289v1.866c-.395.587-1.452.587-1.452.587c-.805 0-1.454-.277-1.927-.838c-.47-.558-.707-1.158-.707-2.06c0-.947.235-1.675.711-2.257c.482-.583 1.15-.905 1.982-.905c.427 0 .884.131 1.33.405l.538-.602q-.723-.594-1.84-.593c-1.11 0-2.005.361-2.656 1.08c-.657.715-.99 1.668-.99 2.832s.305 2.043.9 2.745c.591.692 1.42 1.047 2.44 1.047c.46 0 .932-.043 1.423-.197c.378-.12.508-.216 1.075-.216v-3.647zM3.856 16.441h-.584v.768h.584v3.571c0 1.101.033 1.746-.345 2.124a1.27 1.27 0 0 1-.865.367c-1.362 0-1.412-1.091-1.412-1.091H.4c.08 1.942 2.362 1.813 2.362 1.813c.607-.033 1.087-.233 1.462-.609c.495-.499.507-1.422.507-2.192v-4.75zM17.352 0H3.063v14.282h8.266V8.271h6.023zm.686 9.067h5.213v5.216h-5.213z"},null,-1),XH=[QH];function ez(n,o,x,f,d,a){return s(),_("svg",WH,XH)}const _s=Oe(ZH,[["render",ez]]),Nxe=Object.freeze(Object.defineProperty({__proto__:null,default:_s},Symbol.toStringTag,{value:"Module"})),tz={name:"PhFileJpg"},lz={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},az=e("path",{fill:"currentColor",d:"M120 144h-16a8 8 0 0 0-8 8v56a8 8 0 0 0 16 0v-8h8a28 28 0 0 0 0-56m0 40h-8v-24h8a12 12 0 0 1 0 24m96 0v16.87a8 8 0 0 1-2.22 5.53A30.06 30.06 0 0 1 192 216c-17.65 0-32-16.15-32-36s14.35-36 32-36a29.4 29.4 0 0 1 16.48 5.12a8 8 0 0 1-9 13.26A13.2 13.2 0 0 0 192 160c-8.82 0-16 9-16 20s7.18 20 16 20a13.63 13.63 0 0 0 8-2.71V192a8 8 0 0 1 0-16h8a8 8 0 0 1 8 8M80 152v38a26 26 0 0 1-52 0a8 8 0 0 1 16 0a10 10 0 0 0 20 0v-38a8 8 0 0 1 16 0m133.66-69.66l-56-56A8 8 0 0 0 152 24H56a16 16 0 0 0-16 16v72a8 8 0 0 0 16 0V40h88v48a8 8 0 0 0 8 8h48v16a8 8 0 0 0 16 0V88a8 8 0 0 0-2.34-5.66M160 80V51.31L188.69 80Z"},null,-1),sz=[az];function oz(n,o,x,f,d,a){return s(),_("svg",lz,sz)}const us=Oe(tz,[["render",oz]]),Fxe=Object.freeze(Object.defineProperty({__proto__:null,default:us},Symbol.toStringTag,{value:"Module"})),nz={name:"PhFilePng"},rz={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},iz=e("path",{fill:"currentColor",d:"M60 144H44a8 8 0 0 0-8 8v56a8 8 0 0 0 16 0v-8h8a28 28 0 0 0 0-56m0 40h-8v-24h8a12 12 0 0 1 0 24m164 16.87a8 8 0 0 1-2.22 5.53A30.06 30.06 0 0 1 200 216c-17.65 0-32-16.15-32-36s14.35-36 32-36a29.45 29.45 0 0 1 16.48 5.11a8 8 0 0 1-9 13.27A13.2 13.2 0 0 0 200 160c-8.82 0-16 9-16 20s7.18 20 16 20a13.57 13.57 0 0 0 8-2.72V192a8 8 0 0 1 0-16h8a8 8 0 0 1 8 8ZM156 152v56a8 8 0 0 1-5.56 7.62a7.9 7.9 0 0 1-2.44.38a8 8 0 0 1-6.51-3.35L116 177v31a8 8 0 0 1-16 0v-56a8 8 0 0 1 14.51-4.65L140 183v-31a8 8 0 0 1 16 0M48 120a8 8 0 0 0 8-8V40h88v48a8 8 0 0 0 8 8h48v16a8 8 0 0 0 16 0V88a8 8 0 0 0-2.34-5.66l-56-56A8 8 0 0 0 152 24H56a16 16 0 0 0-16 16v72a8 8 0 0 0 8 8m112-68.69L188.69 80H160Z"},null,-1),dz=[iz];function _z(n,o,x,f,d,a){return s(),_("svg",rz,dz)}const cs=Oe(nz,[["render",_z]]),Ixe=Object.freeze(Object.defineProperty({__proto__:null,default:cs},Symbol.toStringTag,{value:"Module"})),uz={name:"PhFilePdfThin"},cz={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},pz=e("path",{fill:"currentColor",d:"M220 152a4 4 0 0 1-4 4h-28v24h20a4 4 0 0 1 0 8h-20v20a4 4 0 0 1-8 0v-56a4 4 0 0 1 4-4h32a4 4 0 0 1 4 4M88 172a24 24 0 0 1-24 24H52v12a4 4 0 0 1-8 0v-56a4 4 0 0 1 4-4h16a24 24 0 0 1 24 24m-8 0a16 16 0 0 0-16-16H52v32h12a16 16 0 0 0 16-16m80 8a32 32 0 0 1-32 32h-16a4 4 0 0 1-4-4v-56a4 4 0 0 1 4-4h16a32 32 0 0 1 32 32m-8 0a24 24 0 0 0-24-24h-12v48h12a24 24 0 0 0 24-24M44 112V40a12 12 0 0 1 12-12h96a4 4 0 0 1 2.83 1.17l56 56A4 4 0 0 1 212 88v24a4 4 0 0 1-8 0V92h-52a4 4 0 0 1-4-4V36H56a4 4 0 0 0-4 4v72a4 4 0 0 1-8 0m112-28h42.34L156 41.65Z"},null,-1),vz=[pz];function fz(n,o,x,f,d,a){return s(),_("svg",cz,vz)}const ps=Oe(uz,[["render",fz]]),Yxe=Object.freeze(Object.defineProperty({__proto__:null,default:ps},Symbol.toStringTag,{value:"Module"})),mz={key:0,class:"w-full flex items-center justify-center"},ea={__name:"TypeIcon",props:{value:{type:[String,null],required:!0,default:""}},setup(n){return(o,x)=>{const f=_s,d=us,a=cs,r=ps;return n.value?(s(),_("div",mz,[n.value.match(/image\/jpeg/)?(s(),pe(f,{key:0})):O("",!0),n.value.match(/image\/jpg/)?(s(),pe(d,{key:1})):O("",!0),n.value.match(/image\/png/)?(s(),pe(a,{key:2})):O("",!0),n.value.match(/application\/pdf/)?(s(),pe(r,{key:3})):O("",!0)])):O("",!0)}}},Bxe=Object.freeze(Object.defineProperty({__proto__:null,default:ea},Symbol.toStringTag,{value:"Module"})),hz={name:"WeuiEyesOffOutlined"},bz={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},yz=e("path",{fill:"currentColor",fillRule:"evenodd",d:"m18.67 16.973l2.755 2.755l-.849.848L3.85 3.85L4.697 3l2.855 2.855C8.932 5.303 10.432 5 12 5c4.808 0 8.972 2.848 11 7a12.65 12.65 0 0 1-4.33 4.973M8.486 6.79l1.664 1.664a4 4 0 0 1 5.398 5.398l2.255 2.255c1.574-1 2.904-2.403 3.845-4.106C19.686 8.45 16.034 6.2 12 6.2a10.8 10.8 0 0 0-3.514.59m6.152 6.152a2.8 2.8 0 0 0-3.579-3.579zm1.81 5.204c-1.38.552-2.88.855-4.448.855c-4.808 0-8.972-2.848-11-7a12.65 12.65 0 0 1 4.33-4.973l.867.867A11.36 11.36 0 0 0 2.352 12c1.962 3.55 5.614 5.8 9.648 5.8a10.8 10.8 0 0 0 3.514-.59l.934.935zM8.453 10.15l.909.91a2.8 2.8 0 0 0 3.579 3.579l.91.908a4 4 0 0 1-5.398-5.398z"},null,-1),xz=[yz];function wz(n,o,x,f,d,a){return s(),_("svg",bz,xz)}const vs=Oe(hz,[["render",wz]]),qxe=Object.freeze(Object.defineProperty({__proto__:null,default:vs},Symbol.toStringTag,{value:"Module"})),gz={class:"box-fixed"},$z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},kz={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},jz={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},Dz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Sz=e("label",{for:""},"Nama",-1),Tz=["disabled"],Cz={class:"text-red-500"},Pz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Az=e("label",{for:""},"Jabatan",-1),Mz=e("option",{value:"Supir"},"Supir",-1),Oz=e("option",{value:"Kernet"},"Kernet",-1),Nz=[Mz,Oz],Fz={class:"text-red-500"},Iz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Yz=e("label",{for:""},"No KTP",-1),Bz={class:"text-red-500"},qz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Uz=e("label",{for:""},"No SIM",-1),Hz={class:"text-red-500"},zz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Vz=e("label",{for:""},"Pilih Bank",-1),Lz=e("option",{value:""},null,-1),Ez=["value"],Rz={class:"text-red-500"},Jz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Kz=e("label",{for:""},"No Rek",-1),Gz={class:"text-red-500"},Zz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Wz=e("label",{for:""},"Nama Rek",-1),Qz={class:"text-red-500"},Xz={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},eV=e("label",{for:""},"Phone Number",-1),tV={class:"text-red-500"},lV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},aV=e("label",{for:""},"Tanggal Lahir",-1),sV={class:"grow"},oV={class:"text-red-500"},nV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},rV=e("label",{for:""},"Tempat Lahir",-1),iV={class:"text-red-500"},dV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},_V=e("label",{for:""},"TMK",-1),uV={class:"grow"},cV={class:"text-red-500"},pV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},vV=e("label",{for:""},"Alamat",-1),fV={class:"text-red-500"},mV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},hV=e("label",{for:""},"Agama",-1),bV=Et('<option value="ISLAM">ISLAM</option><option value="KRISTEN PROTESTAN">KRISTEN PROTESTAN</option><option value="KRISTEN KATOLIK">KRISTEN KATOLIK</option><option value="HINDU">HINDU</option><option value="BUDDHA">BUDDHA</option><option value="KONGHUCU">KONGHUCU</option>',6),yV=[bV],xV={class:"text-red-500"},wV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},gV=e("label",{for:""},"Status",-1),$V=Et('<option value="TK/0">TK/0</option><option value="TK/1">TK/1</option><option value="TK/2">TK/2</option><option value="TK/3">TK/3</option><option value="K/0">K/0</option><option value="K/1">K/1</option><option value="K/2">K/2</option><option value="K/3">K/3</option>',8),kV=[$V],jV={class:"text-red-500"},DV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},SV=e("label",{for:""},"BPJS Kesehatan",-1),TV={class:"w-full"},CV={class:"text-red-500"},PV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},AV=e("label",{for:""},"BPJS Jamsos",-1),MV={class:"w-full"},OV={class:"text-red-500"},NV=e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1),FV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},IV=e("label",{for:""},"Username",-1),YV={class:"text-red-500"},BV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},qV=e("label",{for:""},"Password",-1),UV={class:"w-full flex items-center"},HV=["type"],zV={class:"text-red-500"},VV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},LV=e("label",{for:""},"Confirm Password",-1),EV={class:"w-full flex items-center"},RV=["type"],JV={class:"text-red-500"},KV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},GV={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ZV=e("label",{for:""},"Face Login?",-1),WV={class:"card-border !flex flex-row items-center"},QV={for:"checkbox",class:"w-full ml-1 flex items-center"},XV=["checked"],eL={class:"text-red-500"},tL={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},lL={class:"w-full flex items-center justify-end"},aL={__name:"employee",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),f=u(0),d={id:-1,name:"",role:"Supir",ktp_no:"",sim_no:"",bank_id:1,rek_no:"",rek_name:"",phone_number:"",attachment_1:"",attachment_1_preview:"",birth_date:new Date,birth_place:"",bpjs_kesehatan:0,bpjs_jamsos:0,tmk:new Date,address:"",status:"TK/0",val_at:"",religion:"ISLAM",username:"",password:"",confirm_password:"",face_loc:"",face_loc_preview:"",m_face_login:0},a=u(ie({},d)),r=ke("token"),p=u({}),i=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const C=new FormData;C.append("name",a.value.name),C.append("role",a.value.role),C.append("ktp_no",a.value.ktp_no),C.append("sim_no",a.value.sim_no),C.append("bank_id",a.value.bank_id),C.append("rek_no",a.value.rek_no),C.append("rek_name",a.value.rek_name),C.append("phone_number",a.value.phone_number),C.append("attachment_1",a.value.attachment_1),C.append("attachment_1_preview",a.value.attachment_1_preview),C.append("birth_date",a.value.birth_date?x(a.value.birth_date).format("Y-MM-DD"):""),C.append("birth_place",a.value.birth_place),C.append("tmk",a.value.tmk?x(a.value.tmk).format("Y-MM-DD"):""),C.append("address",a.value.address),C.append("status",a.value.status),C.append("bpjs_kesehatan",a.value.bpjs_kesehatan),C.append("bpjs_jamsos",a.value.bpjs_jamsos),C.append("religion",a.value.religion),C.append("username",a.value.username),a.value.password&&C.append("password",a.value.password),a.value.confirm_password&&C.append("confirm_password",a.value.confirm_password),C.append("m_face_login",a.value.m_face_login),C.append("face_loc",a.value.face_loc),C.append("face_loc_preview",a.value.face_loc_preview);let y="post",g=o.is_copy?0:o.id;g==0||(C.append("id",g),C.append("_method","PUT"));const{data:b,error:v,status:w}=yield W("/employee",{method:y,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:C,retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v,p);return}let m=h.value.map(S=>S.id).indexOf(a.value.bank_id);if(a.value.bank=ie({},h.value[m]),a.value.updated_at=b.value.updated_at,g<=0)a.value.id=b.value.id,a.value.created_at=b.value.created_at,o.p_data.unshift(a.value);else{let S=o.p_data.map(A=>A.id).indexOf(g);S>-1&&o.p_data.splice(S,1,ie({},a.value))}o.fnClose()}),c=()=>Y(this,null,function*(){$().loading_full=!0;const{data:C,error:y,status:g}=yield W("/employee",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y);return}o.is_copy&&(a.value.val=0),a.value=C.value.data}),h=u([]),k=()=>Y(this,null,function*(){$().loading_full=!0;const{data:C,error:y,status:g}=yield W("/banks",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y);return}h.value=C.value.data});return je(()=>o.show,(C,y)=>Y(this,null,function*(){C==!0&&(a.value=ie({},d),p.value={},yield k(),o.id!=0&&(yield c()))}),{immediate:!0}),(C,y)=>{const g=Xe,b=Vt("vue-date-picker"),v=zt,w=dl,m=Nt,S=vs,A=Xt;return ae((s(),_("section",gz,[e("div",null,[j(g,{title:"Form Employee",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",$z,[e("div",kz,[e("div",jz,[e("div",Dz,[Sz,ae(e("input",{type:"text","onUpdate:modelValue":y[0]||(y[0]=D=>t(a).name=D),disabled:t(a).val_at!=""},null,8,Tz),[[Te,t(a).name]]),e("p",Cz,l(t(p).name),1)]),e("div",Pz,[Az,ae(e("select",{"onUpdate:modelValue":y[1]||(y[1]=D=>t(a).role=D)},Nz,512),[[We,t(a).role]]),e("p",Fz,l(t(p).role),1)]),e("div",Iz,[Yz,ae(e("input",{type:"text","onUpdate:modelValue":y[2]||(y[2]=D=>t(a).ktp_no=D)},null,512),[[Te,t(a).ktp_no]]),e("p",Bz,l(t(p).ktp_no),1)]),e("div",qz,[Uz,ae(e("input",{type:"text","onUpdate:modelValue":y[3]||(y[3]=D=>t(a).sim_no=D)},null,512),[[Te,t(a).sim_no]]),e("p",Hz,l(t(p).sim_no),1)]),e("div",zz,[Vz,ae(e("select",{"onUpdate:modelValue":y[4]||(y[4]=D=>t(a).bank_id=D)},[Lz,(s(!0),_(ye,null,Ae(t(h),D=>(s(),_("option",{value:D.id},l(D.code),9,Ez))),256))],512),[[We,t(a).bank_id]]),e("p",Rz,l(t(p).bank_id),1)]),e("div",Jz,[Kz,ae(e("input",{type:"text","onUpdate:modelValue":y[5]||(y[5]=D=>t(a).rek_no=D)},null,512),[[Te,t(a).rek_no]]),e("p",Gz,l(t(p).rek_no),1)]),e("div",Zz,[Wz,ae(e("input",{type:"text","onUpdate:modelValue":y[6]||(y[6]=D=>t(a).rek_name=D)},null,512),[[Te,t(a).rek_name]]),e("p",Qz,l(t(p).rek_name),1)]),e("div",Xz,[eV,ae(e("input",{type:"text","onUpdate:modelValue":y[7]||(y[7]=D=>t(a).phone_number=D)},null,512),[[Te,t(a).phone_number]]),e("p",tV,l(t(p).phone_number),1)]),e("div",lV,[aV,e("div",sV,[j(v,null,{default:Q(()=>[j(b,{modelValue:t(a).birth_date,"onUpdate:modelValue":y[8]||(y[8]=D=>t(a).birth_date=D),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",oV,l(t(p).birth_date),1)]),e("div",nV,[rV,ae(e("input",{type:"text","onUpdate:modelValue":y[9]||(y[9]=D=>t(a).birth_place=D)},null,512),[[Te,t(a).birth_place]]),e("p",iV,l(t(p).birth_place),1)]),e("div",dV,[_V,e("div",uV,[j(v,null,{default:Q(()=>[j(b,{modelValue:t(a).tmk,"onUpdate:modelValue":y[10]||(y[10]=D=>t(a).tmk=D),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",cV,l(t(p).tmk),1)]),e("div",pV,[vV,ae(e("textarea",{"onUpdate:modelValue":y[11]||(y[11]=D=>t(a).address=D)},null,512),[[Te,t(a).address]]),e("p",fV,l(t(p).address),1)]),e("div",mV,[hV,ae(e("select",{"onUpdate:modelValue":y[12]||(y[12]=D=>t(a).religion=D)},yV,512),[[We,t(a).religion]]),e("p",xV,l(t(p).religion),1)]),e("div",wV,[gV,ae(e("select",{"onUpdate:modelValue":y[13]||(y[13]=D=>t(a).status=D)},kV,512),[[We,t(a).status]]),e("p",jV,l(t(p).status),1)]),e("div",DV,[SV,e("div",TV,[j(w,{class:"w-full h-full p-1",type:"text",value:t(a).bpjs_kesehatan||0,onInput:y[14]||(y[14]=D=>t(a).bpjs_kesehatan=D)},null,8,["value"])]),e("p",CV,l(t(p).bpjs_kesehatan),1)]),e("div",PV,[AV,e("div",MV,[j(w,{class:"w-full h-full p-1",type:"text",value:t(a).bpjs_jamsos||0,onInput:y[15]||(y[15]=D=>t(a).bpjs_jamsos=D)},null,8,["value"])]),e("p",OV,l(t(p).bpjs_jamsos),1)]),NV,e("div",FV,[IV,ae(e("input",{type:"text","onUpdate:modelValue":y[16]||(y[16]=D=>t(a).username=D)},null,512),[[Te,t(a).username]]),e("p",YV,l(t(p).username),1)]),e("div",BV,[qV,e("div",UV,[ae(e("input",{type:t(f)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":y[17]||(y[17]=D=>t(a).password=D)},null,8,HV),[[xa,t(a).password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:y[18]||(y[18]=D=>f.value=!t(f))},[t(f)?(s(),pe(m,{key:0})):(s(),pe(S,{key:1}))])]),e("p",zV,l(t(p).password),1)]),e("div",VV,[LV,e("div",EV,[ae(e("input",{type:t(f)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":y[19]||(y[19]=D=>t(a).confirm_password=D)},null,8,RV),[[xa,t(a).confirm_password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:y[20]||(y[20]=D=>f.value=!t(f))},[t(f)?(s(),pe(m,{key:0})):(s(),pe(S,{key:1}))])]),e("p",JV,l(t(p).confirm_password),1)]),e("div",KV,[j(A,{label:"Photo",value:t(a).face_loc_preview,onSetFile:y[21]||(y[21]=D=>t(a).face_loc=D),onSetPreview:y[22]||(y[22]=D=>t(a).face_loc_preview=D),can_remove:!0},null,8,["value"])]),e("div",GV,[ZV,e("div",WV,[e("label",QV,[ae(e("input",{id:"checkbox",checked:t(a).m_face_login,"onUpdate:modelValue":y[23]||(y[23]=D=>t(a).m_face_login=D),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded mr-1"},null,8,XV),[[Dl,t(a).m_face_login]]),F(" "+l(t(a).m_face_login?"Ya":"Tidak"),1)])]),e("p",eL,l(t(p).m_face_login),1)])]),e("div",tL,[j(A,{label:"Attachment",value:t(a).attachment_1_preview,onSetFile:y[24]||(y[24]=D=>t(a).attachment_1=D),onSetPreview:y[25]||(y[25]=D=>t(a).attachment_1_preview=D),can_remove:!0},null,8,["value"])])]),e("div",lL,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:y[26]||(y[26]=D=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:y[27]||(y[27]=ze(D=>i(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},fs=aL,Uxe=Object.freeze(Object.defineProperty({__proto__:null,default:fs},Symbol.toStringTag,{value:"Module"}));const Mt=n=>(nt("data-v-e10e56c8"),n=n(),rt(),n),sL={class:"box-fixed"},oL={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},nL={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},rL={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},iL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},dL=Mt(()=>e("label",{for:""},"Name",-1)),_L={class:"card-border"},uL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},cL=Mt(()=>e("label",{for:""},"Role",-1)),pL={class:"card-border"},vL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},fL=Mt(()=>e("label",{for:""},"No KTP",-1)),mL={class:"card-border"},hL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},bL=Mt(()=>e("label",{for:""},"No SIM",-1)),yL={class:"card-border"},xL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},wL=Mt(()=>e("label",{for:""},"Bank Code",-1)),gL={class:"card-border"},$L={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},kL=Mt(()=>e("label",{for:""},"No Rek",-1)),jL={class:"card-border"},DL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},SL=Mt(()=>e("label",{for:""},"Nama Rek",-1)),TL={class:"card-border"},CL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},PL=Mt(()=>e("label",{for:""},"Phone Number",-1)),AL={class:"card-border"},ML={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},OL=Mt(()=>e("label",{for:""},"Tanggal Lahir",-1)),NL={class:"card-border"},FL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},IL=Mt(()=>e("label",{for:""},"Tempat Lahir",-1)),YL={class:"card-border"},BL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},qL=Mt(()=>e("label",{for:""},"TMK",-1)),UL={class:"card-border"},HL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},zL=Mt(()=>e("label",{for:""},"Alamat",-1)),VL={class:"card-border"},LL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},EL=Mt(()=>e("label",{for:""},"Agama",-1)),RL={class:"card-border"},JL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},KL=Mt(()=>e("label",{for:""},"Status",-1)),GL={class:"card-border"},ZL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},WL=Mt(()=>e("label",{for:""},"BPJS Kesehatan",-1)),QL={class:"card-border"},XL={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},eE=Mt(()=>e("label",{for:""},"BPJS Jamsos",-1)),tE={class:"card-border"},lE=Mt(()=>e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1)),aE={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},sE=Mt(()=>e("label",{for:""},"Username",-1)),oE={class:"card-border"},nE={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},rE={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},iE=Mt(()=>e("label",{for:""},"Face Login?",-1)),dE={class:"card-border"},_E={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},uE={class:"w-full flex items-center justify-end"},cE={class:"w-full flex flex-wrap p-3 items-center"},pE=Mt(()=>e("div",null," Di Validasi oleh : ",-1)),vE={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},fE={key:0},mE={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""},a=u(ie({},d)),r=ke("token"),p=u({}),i=u(null),c=u(null),h=u([]),k=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const g=new FormData;let b="post",v=o.id;v==0||(g.append("id",v),g.append("_method","PUT"));const{data:w,error:m,status:S}=yield W("/employee_validasi",{method:b,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:g,retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m,p);return}a.value.val=w.value.val,a.value.val_user=w.value.val_user,a.value.val_by=w.value.val_by,a.value.val_at=w.value.val_at;let A=o.p_data.map(D=>D.id).indexOf(o.id);A>-1&&o.p_data.splice(A,1,ie({},a.value)),o.fnClose()}),C=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const g=new FormData;let b="post",v=o.id;v==0||(g.append("id",v),g.append("_method","PUT"));const{data:w,error:m,status:S}=yield W("/employee_unvalidasi",{method:b,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:g,retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m,p);return}a.value.val=w.value.val,a.value.val_user=w.value.val_user,a.value.val_by=w.value.val_by,a.value.val_at=w.value.val_at;let A=o.p_data.map(D=>D.id).indexOf(o.id);A>-1&&o.p_data.splice(A,1,ie({},a.value)),o.fnClose()}),y=()=>Y(this,null,function*(){$().loading_full=!0;const{data:g,error:b,status:v}=yield W("/employee",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}a.value=g.value.data,h.value=g.value.data.details});return ne(()=>{let g=0;return h.value.forEach(b=>{b.p_status!="Remove"&&(g+=parseInt(b.amount))}),g}),ne(()=>!1),je(()=>o.show,(g,b)=>{g==!0&&(a.value=ie({},d),o.it_state==1&&setTimeout(()=>{i.value.focus()},1),o.it_state==0&&setTimeout(()=>{c.value.focus()},1),y())},{immediate:!0}),(g,b)=>{var m;const v=Xe,w=Xt;return ae((s(),_("section",sL,[e("div",null,[j(v,{title:"Form Master Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",oL,[e("div",nL,[e("div",rL,[e("div",iL,[dL,e("div",_L,l(t(a).name),1)]),e("div",uL,[cL,e("div",pL,l(t(a).role),1)]),e("div",vL,[fL,e("div",mL,l(t(a).ktp_no),1)]),e("div",hL,[bL,e("div",yL,l(t(a).sim_no),1)]),e("div",xL,[wL,e("div",gL,l((m=t(a).bank)==null?void 0:m.code),1)]),e("div",$L,[kL,e("div",jL,l(t(a).rek_no),1)]),e("div",DL,[SL,e("div",TL,l(t(a).rek_name),1)]),e("div",CL,[PL,e("div",AL,l(t(a).phone_number),1)]),e("div",ML,[OL,e("div",NL,l(t(x)(t(a).birth_date).format("DD-MM-YYYY")),1)]),e("div",FL,[IL,e("div",YL,l(t(a).birth_place),1)]),e("div",BL,[qL,e("div",UL,l(t(x)(t(a).tmk).format("DD-MM-YYYY")),1)]),e("div",HL,[zL,e("div",VL,l(t(a).address),1)]),e("div",LL,[EL,e("div",RL,l(t(a).religion),1)]),e("div",JL,[KL,e("div",GL,l(t(a).status),1)]),e("div",ZL,[WL,e("div",QL,l(t(f)(t(a).bpjs_kesehatan)),1)]),e("div",XL,[eE,e("div",tE,l(t(f)(t(a).bpjs_jamsos)),1)]),lE,e("div",aE,[sE,e("div",oE,l(t(a).username),1)]),e("div",nE,[j(w,{label:"Photo",value:t(a).face_loc_preview,onSetFile:b[0]||(b[0]=S=>t(a).face_loc=S),onSetPreview:b[1]||(b[1]=S=>t(a).face_loc_preview=S)},null,8,["value"])]),e("div",rE,[iE,e("div",dE,l(t(a).m_face_login?"Ya":"Tidak"),1)])]),e("div",_E,[j(w,{label:"Attachment",value:t(a).attachment_1_preview,onSetFile:b[2]||(b[2]=S=>t(a).attachment_1=S),onSetPreview:b[3]||(b[3]=S=>t(a).attachment_1_preview=S)},null,8,["value"])])]),e("div",uE,[e("div",cE,[pE,t(a).val?(s(),_("div",vE,[t(a).val?(s(),_("div",fE," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:b[4]||(b[4]=S=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:b[5]||(b[5]=ze(S=>k(),["prevent"]))}," Validasi ",512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:b[6]||(b[6]=ze(S=>C(),["prevent"]))}," Unvalidasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},ms=Oe(mE,[["__scopeId","data-v-e10e56c8"]]),Hxe=Object.freeze(Object.defineProperty({__proto__:null,default:ms},Symbol.toStringTag,{value:"Module"}));const Il=n=>(nt("data-v-575f6611"),n=n(),rt(),n),hE={class:"w-full h-full flex flex-col"},bE={class:"w-full flex grow flex-col overflow-auto h-0"},yE={class:"w-full flex justify-between flex-wrap"},xE={class:"grow flex"},wE={class:"m-1"},gE=Il(()=>e("option",{value:"available"},"Available",-1)),$E=Il(()=>e("option",{value:"unapprove"},"Unapprove",-1)),kE=Il(()=>e("option",{value:"deleted"},"Trash",-1)),jE=Il(()=>e("option",{value:"all"},"All",-1)),DE=[gE,$E,kE,jE],SE={class:"grow mb-5"},TE={class:"text-red-500"},CE=Il(()=>e("br",null,null,-1)),PE=Il(()=>e("b",{class:"text-green-500"},"Kembali Bekerja ",-1)),AE={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=B=>B.deleted==1?"!bg-red-400":B.val==0||B.val1==0?"!bg-gray-300":"",d=u("available");je(()=>d.value,B=>{b()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset();const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;const{data:B,error:de,status:V}=yield W("/employees",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,V.value==="error"?(X().trigger(de),[]):B.value.data}),"$p5jj5crAgd")})),o=yield o,x(),o),i=u({field:"",by:"desc"}),c=u(-1),h=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),k=ne(()=>p.value[c.value]),C=()=>{a.like="";let B=JSON.parse(JSON.stringify($()._tv.global_keyword));B!=""&&(a.like=`id:%${B}%,name:%${B}%,ktp_no:%${B}%,sim_no:%${B}%,phone_number:%${B}%,rek_no:%${B}%`),a.sort="",i.value.field&&(a.sort=i.value.field+":"+i.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)},y=u(null),g=()=>Y(this,null,function*(){$().loading_full=!0,h.value.may_get_data=!1,a.page=h.value.page,a.page==1&&(p.value=[]),a.filter_status=d.value;const{data:B,error:de,status:V}=yield W("/employees",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,h.value.may_get_data=!0,V.value==="error"){X().trigger(de);return}h.value.page==1?(p.value=B.value.data,y.value&&(y.value.scrollTop=0)):h.value.page>1&&(p.value=[...p.value,...B.value.data]),B.value.data.length==0&&(h.value.is_last_record=!0),$()._tv.filter_box=!1}),b=()=>{c.value=-1,h.value.page=1,h.value.is_last_record=!1,C(),g()};Ht();const v=u(!1),w=u(0),m=u(0),S=u(1),A=()=>{w.value=0,S.value=-1,m.value=!1,v.value=!0},{display:D}=Je();Dt(Je());const M=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=p.value[c.value].id,S.value=-1,m.value=!1,v.value=!0)},T=u(!1),q=u(0),P=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=p.value[c.value].id,S.value=1,m.value=!1,T.value=!0)},N=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=p.value[c.value].id,S.value=0,m.value=!1,T.value=!0)},L=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=p.value[c.value].id,m.value=!1,S.value=-1,T.value=!0)},R=u(!1),J=u({}),re=u(!1),te=u(""),ee=()=>Y(this,null,function*(){re.value&&(re.value=!1)}),ce=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value="",J.value={id:p.value[c.value].id},re.value=!0)},U=u(!1),I=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):U.value=!0};je(()=>te.value,B=>{B.trim().length>0?R.value=!0:R.value=!1},{immediate:!1});const Z=()=>Y(this,null,function*(){$().loading_full=!0;const B=new FormData;B.append("id",p.value[c.value].id),B.append("deleted_reason",te.value),B.append("_method","DELETE");const{data:de,error:V,status:me}=yield W("/employee",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:B,retry:0});if($().loading_full=!1,me.value==="error"){X().trigger(V);return}let Me=ie({},p.value[c.value]);Me.deleted=de.value.deleted,Me.deleted_user=de.value.deleted_user,Me.deleted_at=de.value.deleted_at,Me.deleted_by=de.value.deleted_by,Me.deleted_reason=de.value.deleted_reason,d.value!="all"?p.value.splice(c.value,1):p.value.splice(c.value,1,ie({},Me)),c.value=-1,re.value=!1}),E=()=>Y(this,null,function*(){$().loading_full=!0;const B=new FormData;B.append("id",p.value[c.value].id),B.append("_method","PUT");const{data:de,error:V,status:me}=yield W("/employee_unremove",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:B,retry:0});if($().loading_full=!1,me.value==="error"){X().trigger(V);return}let Me=ie({},p.value[c.value]);Me.deleted=de.value.deleted,Me.deleted_user=de.value.deleted_user,Me.deleted_at=de.value.deleted_at,Me.deleted_by=de.value.deleted_by,Me.deleted_reason=de.value.deleted_reason,d.value!="all"?p.value.splice(c.value,1):p.value.splice(c.value,1,ie({},Me)),c.value=-1,U.value=!1}),H=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):ve()},ve=()=>Y(this,null,function*(){$().loading_full=!0;const B=new FormData;B.append("id",p.value[c.value].id),B.append("_method","PUT");const{data:de,error:V,status:me}=yield W("/employee_generate_code",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:B,retry:0});if($().loading_full=!1,me.value==="error"){X().trigger(V);return}let Me=ie({},p.value[c.value]);Me.m_enkey=de.value.m_enkey,p.value.splice(c.value,1,ie({},Me))}),Ie=u([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"m_enkey",label:"Kode Kunci",filter_on:1},{key:"username",label:"Username",filter_on:1},{key:"id",label:"ID",freeze:1,filter_on:1,type:"number"},{key:"name",label:"Nama",freeze:1,freeze_left:"44px",filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"role",label:"Jabatan",filter_on:1,type:"string"},{key:"ktp_no",label:"No KTP",filter_on:1,type:"string"},{key:"sim_no",label:"No SIM",filter_on:1,type:"string"},{key:"bank_code",label:"Nama Bank",filter_on:1,type:"string"},{key:"rek_no",label:"No Rek",filter_on:1,type:"string"},{key:"rek_name",label:"Nama Rek",filter_on:1,type:"string"},{key:"phone_number",label:"No Tlp",filter_on:1,type:"string"},{key:"birth_place",label:"Tempat Lahir",filter_on:1,type:"string"},{key:"birth_date",label:"Tanggal Lahir",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"tmk",label:"TMK",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"address",label:"Alamat",filter_on:1,type:"string"},{key:"status",label:"Status",filter_on:1,type:"string"},{key:"attachment_1_type",label:"File",type:"string"},{key:"bpjs_kesehatan",label:"BPJS Kesehatan",class:" justify-end",type:"number",filter_on:1},{key:"bpjs_jamsos",label:"BPJS Jamsos",class:" justify-end",type:"number",filter_on:1},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]);ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&K().checkPermission("employee.create"));const le=ne(()=>["available","all","unapprove"].indexOf(d.value)>-1&&K().checkPermission("employee.create")),z=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&(K().checkPermission("employee.val")&&[void 0,0].indexOf(k.value.val)>-1||K().checkPermission("employee.val1")&&[void 0,0].indexOf(k.value.val1)>-1)&&K().checkPermissions(["employee.modify","employee.detail.modify","employee.detail2.modify"])),G=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&(K().checkPermission("employee.val")&&[void 0,0].indexOf(k.value.val)>-1||K().checkPermission("employee.val1")&&[void 0,0].indexOf(k.value.val1)>-1)),oe=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&K().checkPermission("employee.unval")&&[1].indexOf(k.value.val)>-1),se=ne(()=>c.value>-1&&K().checkPermission("employee.remove")&&[void 0,0].indexOf(k.value.deleted)>-1),_e=ne(()=>c.value>-1&&K().checkPermission("employee.unremove")&&[1].indexOf(k.value.deleted)>-1),ue=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&[1].indexOf(k.value.val)>-1);return(B,de)=>{const V=_t,me=gt,Me=Pt,tt=Nt,ut=Zt,he=ds,Re=Ft,Ne=wl,Ze=$t,Ve=ft,Bt=ea,Rt=Ot,Jt=It,al=fs,Kt=ms;return s(),_(ye,null,[e("div",hE,[j(V,{title:"List Employee"}),e("div",bE,[e("div",yE,[e("div",xE,[e("div",wE,[ae(e("select",{class:"","onUpdate:modelValue":de[0]||(de[0]=Le=>Ee(d)?d.value=Le:null)},DE,512),[[We,t(d)]])]),t(le)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[1]||(de[1]=Le=>A())},[j(me)])):O("",!0),t(z)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[2]||(de[2]=Le=>M())},[j(Me)])):O("",!0),t(c)>-1?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[3]||(de[3]=Le=>L())},[j(tt)])):O("",!0),t(se)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[4]||(de[4]=Le=>ce())},[j(ut)])):O("",!0),t(_e)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[5]||(de[5]=Le=>I())},[j(he)])):O("",!0),t(G)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[6]||(de[6]=Le=>P())},[j(Re)])):O("",!0),t(oe)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:de[7]||(de[7]=Le=>N())},[j(Ne)])):O("",!0),t(ue)?(s(),_("button",{key:7,type:"button",name:"button",class:"m-1 text-sm",onClick:de[8]||(de[8]=Le=>H())}," GEN CODE ")):O("",!0)])]),j(Rt,{thead:t(Ie),selected:t(c),onSetSelected:de[9]||(de[9]=Le=>c.value=Le),tbody:t(p),fnCallData:g,scrolling:t(h),onSetScrollingPage:de[10]||(de[10]=Le=>t(h).page=Le),onDoFilter:de[11]||(de[11]=Le=>b()),rowBgColor:f},{val:Q(({item:Le})=>[Le.val?(s(),pe(Ve,{key:1})):(s(),pe(Ze,{key:0}))]),val1:Q(({item:Le})=>[Le.val1?(s(),pe(Ve,{key:1})):(s(),pe(Ze,{key:0}))]),bank_code:Q(({item:Le})=>{var Tt;return[F(l((Tt=Le.bank)==null?void 0:Tt.code),1)]}),attachment_1_type:Q(({item:Le})=>[j(Bt,{value:Le.attachment_1_type},null,8,["value"])]),deleted_by_username:Q(({item:Le})=>{var Tt;return[F(l((Tt=Le.deleted_by)==null?void 0:Tt.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])]),j(Jt,{type:"delete",show:t(re),data:t(J),fnClose:ee,fnConfirm:Z,enabledOk:t(R)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",SE,[ae(e("textarea",{"onUpdate:modelValue":de[12]||(de[12]=Le=>Ee(te)?te.value=Le:null)},null,512),[[Te,t(te)]])])]),_:1},8,["show","data","enabledOk"]),j(al,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(p),is_copy:t(m)},null,8,["show","fnClose","id","p_data","is_copy"]),j(Kt,{show:t(T),fnClose:()=>{T.value=!1},id:t(q),p_data:t(p),it_state:t(S)},null,8,["show","fnClose","id","p_data","it_state"]),j(Jt,{type:"custome",show:t(U),fnClose:()=>U.value=!1,fnConfirm:E},{words:Q(()=>[F(" Alasan Keluar Sebelumnya : "),e("b",TE,l(t(p)[t(c)].deleted_reason),1),F(". "),CE,F(" Pekerja telah "),PE,F(" , yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"])],64)}})}},ME=Oe(AE,[["__scopeId","data-v-575f6611"]]),zxe=Object.freeze(Object.defineProperty({__proto__:null,default:ME},Symbol.toStringTag,{value:"Module"}));const ol=n=>(nt("data-v-f3ff7ee1"),n=n(),rt(),n),OE={class:"box-fixed"},NE={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},FE={class:"w-full flex flex-col items-center grow overflow-auto"},IE={class:"w-full flex flex-row flex-wrap"},YE={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},BE=ol(()=>e("label",{for:""},"Tujuan",-1)),qE={id:"xto"},UE={class:"text-red-500"},HE={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},zE=ol(()=>e("label",{for:""},"Jenis",-1)),VE=Et('<option value="PK" data-v-f3ff7ee1>PK</option><option value="CPO" data-v-f3ff7ee1>CPO</option><option value="TBS" data-v-f3ff7ee1>TBS</option><option value="TBSK" data-v-f3ff7ee1>TBSK</option><option value="LAIN" data-v-f3ff7ee1>LAIN</option><option value="TUNGGU" data-v-f3ff7ee1>TUNGGU</option>',6),LE=[VE],EE={class:"text-red-500"},RE={class:"w-full sm:w-3/12 flex px-2 py-3"},JE={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},KE=ol(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),GE={class:"w-6/12 flex flex-col flex-wrap p-1"},ZE=ol(()=>e("option",{value:""},null,-1)),WE=ol(()=>e("option",{value:"From"},"Dari",-1)),QE=ol(()=>e("option",{value:"To"},"Ke",-1)),XE=[ZE,WE,QE],eR={class:"text-red-500"},tR={class:"w-6/12 flex flex-col flex-wrap p-1"},lR=ol(()=>e("option",{value:""},null,-1)),aR=["value"],sR={class:"text-red-500"},oR={class:"w-full sm:w-12/12 flex px-2 py-3"},nR={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-start"},rR=ol(()=>e("div",{class:"absolute bg-white -top-3"}," Account ",-1)),iR={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},dR=ol(()=>e("label",{for:""},"Info",-1)),_R={class:"text-red-500"},uR={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},cR=ol(()=>e("label",{for:""},"Deskripsi",-1)),pR={class:"text-red-500"},vR={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},fR=ol(()=>e("label",{for:""},"Nominal",-1)),mR={class:"w-full"},hR={class:"text-red-500"},bR={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},yR=ol(()=>e("label",{for:""},"Qty",-1)),xR={class:"w-full"},wR={class:"text-red-500"},gR={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},$R=ol(()=>e("label",{for:""},"Total",-1)),kR={class:"w-full card-border"},jR={class:"w-full flex items-center justify-end"},DR={__name:"extra_money",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{pointFormat:x}=K(),f={id:-1,xto:"",jenis:"",transition_target:"",transition_type:"",ac_account_id:"",ac_account_code:"",ac_account_name:"",description:"",nominal:0,qty:1},d=u([]);u({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});const a=u(ie({},f)),r=ke("token"),p=u({}),i=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const w=new FormData;w.append("xto",a.value.xto),w.append("jenis",a.value.jenis),w.append("transition_target",a.value.transition_target),w.append("transition_type",a.value.transition_type),w.append("ac_account_id",h.value.id),w.append("description",a.value.description),w.append("nominal",a.value.nominal),w.append("qty",a.value.qty);let m="post",S=o.is_copy?0:o.id;S==0||(w.append("id",S),w.append("_method","PUT"));const{data:A,error:D,status:M}=yield W("/extra_money",{method:m,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:w,retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D,p);return}if(a.value.ac_account_id=h.value._.id.val,a.value.ac_account_name=h.value._.name.val,a.value.ac_account_code=h.value._.code.val,a.value.updated_at=A.value.updated_at,S<=0)a.value.id=A.value.id,a.value.created_at=A.value.created_at,o.p_data.unshift(a.value);else{let T=o.p_data.map(q=>q.id).indexOf(o.id);T>-1&&o.p_data.splice(T,1,ie({},a.value))}o.fnClose()}),c={_:{id:{tcon:"",text:"ID",val:""},code:{tcon:"",text:"Code",val:""},name:{tcon:"",text:"Name",val:""}},id:"",name:"",title:""},h=u(JSON.parse(JSON.stringify(c))),k=ne(()=>{let w=[];return g.value.forEach((m,S)=>{let A=JSON.parse(JSON.stringify(c));A._.id.val=m.AccountID,A._.name.val=m.AccountName,A._.code.val=m.AccountCode,A.id=m.AccountID,A.name=m.AccountCode,A.title=m.AccountName,w.push(JSON.parse(JSON.stringify(A)))}),w}),C=()=>Y(this,null,function*(){$().loading_full=!0;const{data:w,error:m,status:S}=yield W("/extra_money",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m);return}o.is_copy&&(a.value.val=0,a.value.val1=0);let A=w.value.data;a.value=A,ie({},A),h.value._.id.val=A.ac_account_id,h.value._.name.val=A.ac_account_name,h.value._.code.val=A.ac_account_code,h.value.id=A.ac_account_id,h.value.name=A.ac_account_code,h.value.title=A.ac_account_name}),y=u([]),g=u([]),b=()=>Y(this,null,function*(){$().loading_full=!0;const{data:w,error:m,status:S}=yield W("/extra_money_load_local",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m);return}y.value=w.value.list_xto}),v=()=>Y(this,null,function*(){$().loading_full=!0;const{data:w,error:m,status:S}=yield W("/extra_money_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m);return}g.value=w.value.list_accs});return je(()=>o.show,(w,m)=>Y(this,null,function*(){w==!0&&(yield b(),yield v(),a.value=ie({},f),h.value=JSON.parse(JSON.stringify(c)),d.value=[],p.value={},o.id!=0&&C())}),{immediate:!0}),(w,m)=>{const S=Xe,A=$l,D=dl;return ae((s(),_("section",OE,[e("div",null,[j(S,{title:"Form Transaction",fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",NE,[e("div",FE,[e("div",IE,[e("div",YE,[BE,ae(e("input",{type:"text",list:"xto","onUpdate:modelValue":m[0]||(m[0]=M=>t(a).xto=M)},null,512),[[Te,t(a).xto]]),e("datalist",qE,[(s(!0),_(ye,null,Ae(t(y),M=>(s(),_("option",null,l(M),1))),256))]),e("p",UE,l(t(p).xto),1)]),e("div",HE,[zE,ae(e("select",{"onUpdate:modelValue":m[1]||(m[1]=M=>t(a).jenis=M)},LE,512),[[We,t(a).jenis]]),e("p",EE,l(t(p).jenis),1)]),e("div",RE,[e("div",JE,[KE,e("div",GE,[ae(e("select",{"onUpdate:modelValue":m[2]||(m[2]=M=>t(a).transition_type=M)},XE,512),[[We,t(a).transition_type]]),e("p",eR,l(t(p).transition_type),1)]),e("div",tR,[ae(e("select",{"onUpdate:modelValue":m[3]||(m[3]=M=>t(a).transition_target=M)},[lR,(s(!0),_(ye,null,Ae(t($)().list_pabrik,M=>(s(),_("option",{value:M},l(M),9,aR))),256))],512),[[We,t(a).transition_target]]),e("p",sR,l(t(p).transition_target),1)])])]),e("div",oR,[e("div",nR,[rR,e("div",iR,[dR,j(A,{arr:t(k),selected:t(h),pure:c,onSetSelected:m[4]||(m[4]=M=>h.value=M)},null,8,["arr","selected"]),e("p",_R,l(t(p).ac_account_id),1)]),e("div",uR,[cR,ae(e("textarea",{"onUpdate:modelValue":m[5]||(m[5]=M=>t(a).description=M)},null,512),[[Te,t(a).description]]),e("p",pR,l(t(p).description),1)]),e("div",vR,[fR,e("div",mR,[j(D,{class:"w-full h-full p-1",type:"text",value:t(a).nominal||0,onInput:m[6]||(m[6]=M=>t(a).nominal=M)},null,8,["value"])]),e("p",hR,l(t(p).nominal),1)]),e("div",bR,[yR,e("div",xR,[j(D,{class:"w-full h-full p-1",type:"text",value:t(a).qty||0,onInput:m[7]||(m[7]=M=>t(a).qty=M)},null,8,["value"])]),e("p",wR,l(t(p).qty),1)]),e("div",gR,[$R,e("div",kR,l(t(x)(t(a).nominal*t(a).qty)),1)])])])])]),e("div",jR,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:m[8]||(m[8]=M=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:m[9]||(m[9]=ze(M=>i(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},hs=Oe(DR,[["__scopeId","data-v-f3ff7ee1"]]),Vxe=Object.freeze(Object.defineProperty({__proto__:null,default:hs},Symbol.toStringTag,{value:"Module"}));const pl=n=>(nt("data-v-2d6823ae"),n=n(),rt(),n),SR={class:"box-fixed"},TR={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},CR={class:"w-full flex flex-col items-center grow overflow-auto"},PR={class:"w-full flex flex-row flex-wrap"},AR={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},MR=pl(()=>e("label",{for:""},"Tujuan",-1)),OR={class:"w-full card-border"},NR={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},FR=pl(()=>e("label",{for:""},"Jenis",-1)),IR={class:"w-full card-border"},YR={class:"w-full sm:w-3/12 flex px-2 py-3"},BR={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},qR=pl(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),UR={class:"w-6/12 flex flex-col flex-wrap p-1"},HR={class:"w-full card-border"},zR={class:"w-6/12 flex flex-col flex-wrap p-1"},VR={class:"card-border"},LR={class:"w-full sm:w-12/12 flex px-2 py-3"},ER={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-start"},RR=pl(()=>e("div",{class:"absolute bg-white -top-3"}," Account ",-1)),JR={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},KR=pl(()=>e("label",{for:""},"Info",-1)),GR={class:"card-border"},ZR={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},WR=pl(()=>e("label",{for:""},"Deskripsi",-1)),QR={class:"w-full card-border"},XR={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},eJ=pl(()=>e("label",{for:""},"Nominal",-1)),tJ={class:"w-full card-border"},lJ={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},aJ=pl(()=>e("label",{for:""},"Qty",-1)),sJ={class:"w-full card-border"},oJ={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},nJ=pl(()=>e("label",{for:""},"Total",-1)),rJ={class:"w-full card-border"},iJ={class:"w-full flex items-center justify-end"},dJ={class:"w-full flex flex-wrap p-3 items-center"},_J=pl(()=>e("div",null," Di Validasi oleh : ",-1)),uJ={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},cJ={key:0},pJ={key:1},vJ={key:2},fJ={key:3},mJ={key:4},hJ={key:5},bJ={__name:"extra_money_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""})),r=ke("token"),p=u({}),i=u(null);u([]);const h=u(JSON.parse(JSON.stringify({_:{id:{tcon:"",text:"ID",val:""},code:{tcon:"",text:"Code",val:""},name:{tcon:"",text:"Name",val:""}},id:"",name:"",title:""}))),k=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const y=new FormData;let g="post",b=o.id;b==0||(y.append("id",b),y.append("_method","PUT"));const{data:v,error:w,status:m}=yield W("/extra_money_validasi",{method:g,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:y,retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w,p);return}a.value.val=v.value.val,a.value.val_user=v.value.val_user,a.value.val_by=v.value.val_by,a.value.val_at=v.value.val_at,a.value.val1=v.value.val1,a.value.val1_user=v.value.val1_user,a.value.val1_by=v.value.val1_by,a.value.val1_at=v.value.val1_at,a.value.val2=v.value.val2,a.value.val2_user=v.value.val2_user,a.value.val2_by=v.value.val2_by,a.value.val2_at=v.value.val2_at;let S=o.p_data.map(A=>A.id).indexOf(o.id);S>-1&&o.p_data.splice(S,1,ie({},a.value)),o.fnClose()}),C=()=>Y(this,null,function*(){$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/extra_money",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}let v=y.value.data;a.value=v,h.value._.id.val=v.ac_account_id,h.value._.name.val=v.ac_account_name,h.value._.code.val=v.ac_account_code,h.value.id=v.ac_account_id,h.value.name=v.ac_account_code,h.value.title=v.ac_account_name});return je(()=>o.show,(y,g)=>{y==!0&&(o.is_view==!1&&setTimeout(()=>{i.value.focus()},1),C())},{immediate:!0}),(y,g)=>{const b=Xe,v=hl;return ae((s(),_("section",SR,[e("div",null,[j(b,{title:"Form Transaction Extra Money Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",TR,[e("div",CR,[e("div",PR,[e("div",AR,[MR,e("div",OR,l(t(a).xto),1)]),e("div",NR,[FR,e("div",IR,l(t(a).jenis),1)]),e("div",YR,[e("div",BR,[qR,e("div",UR,[e("div",HR,l(t(a).transition_type),1)]),e("div",zR,[e("div",VR,l(t(a).transition_target),1)])])]),e("div",LR,[e("div",ER,[RR,e("div",JR,[KR,e("div",GR,[j(v,{selected:t(h)},null,8,["selected"])])]),e("div",ZR,[WR,e("div",QR,l(t(a).description),1)]),e("div",XR,[eJ,e("div",tJ,l(t(f)(t(a).nominal)),1)]),e("div",lJ,[aJ,e("div",sJ,l(t(f)(t(a).qty)),1)]),e("div",oJ,[nJ,e("div",rJ,l(t(f)(t(a).nominal*t(a).qty)),1)])])])])]),e("div",iJ,[e("div",dJ,[_J,t(a).val1||t(a).val2?(s(),_("div",uJ,[t(a).val1?(s(),_("div",cJ," App 1 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val2?(s(),_("div",pJ," App 2 : "+l(t(a).val2_by.username)+" ( "+l(t(a).val2_at?t(x)(t(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val3?(s(),_("div",vJ," App 3 : "+l(t(a).val3_by.username)+" ( "+l(t(a).val3_at?t(x)(t(a).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val4?(s(),_("div",fJ," App 4 : "+l(t(a).val4_by.username)+" ( "+l(t(a).val4_at?t(x)(t(a).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val5?(s(),_("div",mJ," App 5 : "+l(t(a).val5_by.username)+" ( "+l(t(a).val5_at?t(x)(t(a).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val6?(s(),_("div",hJ," App 6 : "+l(t(a).val6_by.username)+" ( "+l(t(a).val6_at?t(x)(t(a).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:g[0]||(g[0]=w=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:g[1]||(g[1]=ze(w=>k(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},bs=Oe(bJ,[["__scopeId","data-v-2d6823ae"]]),Lxe=Object.freeze(Object.defineProperty({__proto__:null,default:bs},Symbol.toStringTag,{value:"Module"})),yJ={class:"w-full h-full flex flex-col"},xJ={class:"w-full flex grow flex-col overflow-auto h-0"},wJ={class:"w-full flex justify-between flex-wrap"},gJ={class:"grow flex"},$J={class:"m-1"},kJ=e("option",{value:"available"},"Available",-1),jJ=e("option",{value:"unapprove"},"Unapprove",-1),DJ=e("option",{value:"deleted"},"Trash",-1),SJ=e("option",{value:"all"},"All",-1),TJ=[kJ,jJ,DJ,SJ],CJ={class:"grow mb-5"},PJ={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=de=>de.deleted==1?"!bg-red-400":de.pv_id>0?"!bg-blue-300":"",r=de=>(de.map(V=>{V.class_h=a(V)}),de),p=u("available");je(()=>p.value,de=>{z.value.map(V=>{let me=["deleted_by_username","deleted_at","deleted_reason"].indexOf(V.key)>-1;return["all","deleted"].indexOf(de)>-1?me&&(V.tbl_show=1):me&&(V.tbl_show=0),V}),A()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=u({from:"",to:""}),k=ke("token"),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let de=[];const[V,me]=yield Promise.all([W("/extra_moneys",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return V.status.value!=="error"&&(de=r(V.data.value.data)),V.status.value==="error"?(X().trigger(V.error),{extra_moneys:de}):($().loading_full=!1,{extra_moneys:de})}),"$pjdlE6mDqg")})),o=yield o,x(),o),y=u(C.value.extra_moneys||[]),g=u({field:"tanggal",by:"desc"}),b=u(-1),v=ne(()=>y.value[b.value]),w=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),m=()=>{i.like="";let de=JSON.parse(JSON.stringify($()._tv.global_keyword));de!=""&&(i.like=`id:%${de}%,transition_target:%${de}%,transition_type:%${de}%,extra_money_name:%${de}%,extra_money_type:%${de}%,xto:%${de}%,transition_target:%${de}%`),i.sort="",g.value.field&&(i.sort=g.value.field+":"+g.value.by),i.date_from=h.value.from?f(h.value.from).format("YYYY-MM-DD"):"",i.date_to=h.value.to?f(h.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model)},S=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},w.value.may_get_data=!1,i.page=w.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:de,error:V,status:me}=yield W("/extra_moneys",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,w.value.may_get_data=!0,me.value==="error"){X().trigger(V,c);return}w.value.page==1?y.value=r(de.value.data):w.value.page>1&&(y.value=[...y.value,...r(de.value.data)]),de.value.data.length==0&&(w.value.is_last_record=!0),$()._tv.filter_box=!1}),A=()=>{b.value=-1,w.value.page=1,w.value.is_last_record=!1,m(),S()},D=u(!1),M=u(0),T=u(0),q=u(!1),P=()=>{M.value=0,q.value=!1,T.value=!1,D.value=!0},{display:N}=Je();Dt(Je());const L=()=>{b.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=y.value[b.value].id,q.value=!1,T.value=!1,D.value=!0)},R=()=>{b.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=y.value[b.value].id,q.value=!1,T.value=!0,D.value=!0)},J=u(!1),re=u(0),te=()=>{b.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(re.value=y.value[b.value].id,q.value=!1,T.value=!1,J.value=!0)},ee=()=>{b.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(re.value=y.value[b.value].id,q.value=!0,T.value=!1,J.value=!0)},ce=u(!1),U=u({}),I=u(!1),Z=u(""),E=()=>Y(this,null,function*(){I.value&&(I.value=!1)}),H=()=>{b.value==-1?N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Z.value="",U.value={id:y.value[b.value].id,tujuan:y.value[b.value].xto},I.value=!0)};je(()=>Z.value,de=>{de.trim().length>0?ce.value=!0:ce.value=!1},{immediate:!1});const ve=()=>Y(this,null,function*(){$().loading_full=!0;const de=new FormData;de.append("id",y.value[b.value].id),de.append("deleted_reason",Z.value),de.append("_method","DELETE");const{data:V,error:me,status:Me}=yield W("/extra_money",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:de,retry:0});if($().loading_full=!1,Me.value==="error"){X().trigger(me);return}let tt=ie({},y.value[b.value]);tt.deleted=V.value.deleted,tt.deleted_user=V.value.deleted_user,tt.deleted_at=V.value.deleted_at,tt.deleted_by=V.value.deleted_by,tt.deleted_reason=V.value.deleted_reason,tt.class_h=a(tt),p.value!="all"?y.value.splice(b.value,1):y.value.splice(b.value,1,ie({},tt)),b.value=-1,I.value=!1}),{printHtml:Ie}=jt(),le=()=>Y(this,null,function*(){if(b.value==-1){N({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:de,error:V,status:me}=yield W("/extra_money_preview_file",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:y.value[b.value].id},retry:0});if($().loading_full=!1,me.value==="error"){X().trigger(V);return}Ie(de.value.html,318)}),z=u([{key:"no",label:"No",isai:!0},{key:"val1",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"xto",label:"Tujuan",freeze:1,filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"transition_target",label:"Pengalihan",filter_on:1,type:"select",select_item:$().list_pabrik},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"ac_account",label:"Account",childs:[{key:"ac_account_id",label:"Account ID",filter_on:1,type:"string"},{key:"ac_account_code",label:"Account Code",filter_on:1,type:"string"},{key:"ac_account_name",label:"Account Name",filter_on:1,type:"string"}]},{key:"description",label:"Deskripsi",filter_on:1,type:"string"},{key:"qty",label:"Qty",class:" justify-end",type:"number"},{key:"nominal",label:"Nominal",class:" justify-end",type:"number"},{key:"qn_total",label:"Total",class:" justify-end",type:"number"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1}]),G=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&K().checkPermission("extra_money.create")),oe=ne(()=>["available","all"].indexOf(p.value)>-1&&K().checkPermission("extra_money.create")),se=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.val1)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&K().checkPermission("extra_money.modify")),_e=ne(()=>b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&(K().checkPermission("extra_money.val1")&&[void 0,0].indexOf(v.value.val1)>-1||K().checkPermission("extra_money.val2")&&[void 0,0].indexOf(v.value.val2)>-1)),ue=ne(()=>K().checkPermission("extra_money.remove")&&b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1),B=ne(()=>K().checkPermission("extra_money.preview_file")&&b.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&v.value.val==1);return(de,V)=>{const me=_t,Me=fl,tt=gt,ut=Pt,he=Nt,Re=Zt,Ne=Ft,Ze=_l,Ve=$t,Bt=ft,Rt=Ot,Jt=It,al=hs,Kt=bs;return s(),_("div",yJ,[j(me,{title:"List Transaction"}),e("div",xJ,[e("div",wJ,[e("div",gJ,[e("div",$J,[ae(e("select",{class:"","onUpdate:modelValue":V[0]||(V[0]=Le=>Ee(p)?p.value=Le:null)},TJ,512),[[We,t(p)]])]),t(G)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[1]||(V[1]=Le=>R())},[j(Me)])):O("",!0),t(oe)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[2]||(V[2]=Le=>P())},[j(tt)])):O("",!0),t(se)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[3]||(V[3]=Le=>L())},[j(ut)])):O("",!0),t(b)>-1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[4]||(V[4]=Le=>ee())},[j(he)])):O("",!0),t(ue)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[5]||(V[5]=Le=>H())},[j(Re)])):O("",!0),t(_e)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[6]||(V[6]=Le=>te())},[j(Ne)])):O("",!0),t(B)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:V[7]||(V[7]=Le=>le())},[j(Ze)])):O("",!0)])]),j(Rt,{thead:t(z),selected:t(b),onSetSelected:V[8]||(V[8]=Le=>b.value=Le),tbody:t(y),fnCallData:S,scrolling:t(w),onSetScrollingPage:V[9]||(V[9]=Le=>t(w).page=Le),onDoFilter:V[10]||(V[10]=Le=>A())},{val1:Q(({item:Le})=>[Le.val1?(s(),pe(Bt,{key:1})):(s(),pe(Ve,{key:0}))]),val2:Q(({item:Le})=>[Le.val2?(s(),pe(Bt,{key:1})):(s(),pe(Ve,{key:0}))]),qn_total:Q(({item:Le})=>[F(" Rp. "+l(t(d)(parseFloat(Le.total)||0)),1)]),deleted_by_username:Q(({item:Le})=>{var Tt;return[F(l((Tt=Le.deleted_by)==null?void 0:Tt.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(Jt,{type:"delete",show:t(I),data:t(U),fnClose:E,fnConfirm:ve,enabledOk:t(ce)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",CJ,[ae(e("textarea",{"onUpdate:modelValue":V[11]||(V[11]=Le=>Ee(Z)?Z.value=Le:null)},null,512),[[Te,t(Z)]])])]),_:1},8,["show","data","enabledOk"]),j(al,{show:t(D),fnClose:()=>{D.value=!1},id:t(M),p_data:t(y),is_copy:t(T)},null,8,["show","fnClose","id","p_data","is_copy"]),j(Kt,{show:t(J),fnClose:()=>{J.value=!1},id:t(re),p_data:t(y),is_view:t(q)},null,8,["show","fnClose","id","p_data","is_view"])])}})}},Exe=Object.freeze(Object.defineProperty({__proto__:null,default:PJ},Symbol.toStringTag,{value:"Module"}));const AJ={class:"w-full h-full flex flex-col relative"},MJ={class:"grow flex flex-col"},OJ={class:"w-full flex items-center p-1"},NJ={class:"grow"},FJ={class:"grow overflow-auto h-0"},IJ={class:"p-1 grow"},YJ={class:"bg-white flex py-2 justify-between"},BJ={class:"flex flex-wrap"},qJ={class:"flex items-center justify-center m-2 text-xs"},UJ={class:"bg-blue-400 p-2 font-bold text-white"},HJ={class:"flex flex-col m-2"},zJ=e("span",{class:"text-xs"}," Tgl Terima Uang ",-1),VJ={class:"flex items-center justify-center"},LJ={class:"flex flex-col m-2"},EJ=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),RJ={class:"flex items-center justify-center"},JJ=["data-real"],KJ={class:"flex flex-col m-2"},GJ=e("span",{class:"text-xs"}," Nama Pekerja ",-1),ZJ={class:"flex items-center justify-center"},WJ=["data-real"],QJ={class:"flex flex-col m-2"},XJ=e("span",{class:"text-xs"}," Tujuan ",-1),eK={class:"flex items-center justify-center"},tK=["onClick"],lK={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},aK={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},sK={class:"p-1 flex flex-wrap overflow-auto items-start"},oK={class:"w-full flex flex-wrap"},nK={class:"w-full flex flex-wrap"},rK={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},iK=e("span",{class:"text-xs font-bold"}," ID ",-1),dK={class:""},_K={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},uK=e("span",{class:"text-xs font-bold"}," Tgl Terima Uang ",-1),cK={class:""},pK={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},vK=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),fK={class:""},mK={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},hK={class:"flex flex-col"},bK=e("span",{class:"text-xs font-bold"}," Nama Pekerja ",-1),yK={class:""},xK={class:"flex flex-col pl-2"},wK=e("span",{class:"text-xs font-bold"}," No rek ",-1),gK={class:""},$K={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},kK=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),jK={class:""},DK={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},SK=e("span",{class:"text-xs font-bold"}," Jenis ",-1),TK={class:""},CK={key:0,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},PK=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),AK={class:""},MK={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},OK=e("span",{class:"text-xs font-bold"}," Nominal Dibayarkan ",-1),NK={class:""},FK={class:"w-full flex flex-wrap justify-center"},IK={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},YK=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),BK={class:"text-xs"},qK={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},UK=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),HK={class:"text-xs"},zK={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},VK=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),LK={class:"text-xs"},EK={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},RK=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),JK={class:"text-xs"},KK={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},GK=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),ZK={class:"text-xs"},WK={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},QK=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),XK={class:"text-xs"},eG={class:"flex p-1 justify-end flex-wrap"},tG={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},lG=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),aG={__name:"transfer",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=ke("token");new Date().getTimezoneOffset();const{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let D=[];const[M,T]=yield Promise.all([W("/extra_money_trx/transfers",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0})]);return M.status.value==="error"?(X().trigger(M.error),{extra_money_trxs:D}):($().loading_full=!1,D=M.data.value.data,{extra_money_trxs:D})}),"$0Pi8hCNVwD")})),o=yield o,x(),o),p=u(r.value.extra_money_trxs||[]),i=u({}),c=u({id:-1,tanggal:new Date,extra_money:{xto:"",tipe:"",jenis:"",amount:0},employee:"",kernet:"",no_pol:"",details_uj:[]}),h=u(-1),k=u(""),C=D=>Y(this,null,function*(){$().loading_full=!0;const{data:M,error:T,status:q}=yield W("/extra_money_trx/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:D.id},retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T,i);return}c.value=M.value.data}),y=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const D=new FormData;D.append("id",c.value.id),D.append("_method","PUT");let M="post";const{data:T,error:q,status:P}=yield W("/extra_money_trx/transfer",{method:M,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:D,retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q,i);return}p.value.splice(h.value,1),h.value=-1,v.value=!1,g.value=!1}),g=u(!1),b=u(0),v=u(!1);Je();const w=(D,M)=>{h.value=D,b.value=M,g.value=!0,C(M)},m=ne(()=>k.value!=""?p.value.filter(D=>D.no_pol.toLowerCase().includes(k.value.toLowerCase())||D.employee.toLowerCase().includes(k.value.toLowerCase())||D.kernet.toLowerCase().includes(k.value.toLowerCase())):p.value),S=()=>{let D=k.value;document.querySelectorAll(".to_hl").forEach(M=>{let T=M.dataset.real;var q=M.innerHTML,P=T==null?void 0:T.toLowerCase().indexOf(D.toLowerCase());P>-1&&D!=""?(q=T.substring(0,P)+"<span class='highlight'>"+T.substring(P,P+D.length)+"</span>"+T.substring(P+D.length),M.innerHTML=q):M.innerHTML=q=T})};je(()=>m,(D,M)=>{setTimeout(()=>{S()},0)},{deep:!0,immediate:!0});const A=u(0);return(D,M)=>{var re;const T=_t,q=kl,P=zl,N=Cl,L=jl,R=Xe,J=Xl;return s(),_("div",AJ,[j(T,{title:"List Transaction"}),e("section",MJ,[e("div",OJ,[e("div",NJ,[ae(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":M[0]||(M[0]=te=>Ee(k)?k.value=te:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(k)]])])]),e("div",FJ,[(s(!0),_(ye,null,Ae(t(m),(te,ee)=>{var ce,U;return s(),_("div",IJ,[e("div",YJ,[e("div",BJ,[e("div",qJ,[e("div",UJ,l(te.id),1)]),e("div",HJ,[zJ,e("div",VJ,[j(q,{class:"mr-1"}),F(" "+l(t(f)(te.tanggal).format("DD-MM-YYYY")),1)])]),e("div",LJ,[EJ,e("div",RJ,[j(P,{class:"mr-1"}),e("span",{class:"to_hl","data-real":te.no_pol},l(te.no_pol),9,JJ)])]),e("div",KJ,[GJ,e("div",ZJ,[j(N,{class:"mr-1"}),e("span",{class:"to_hl","data-real":(ce=te.employee)==null?void 0:ce.name},l((U=te.employee)==null?void 0:U.name),9,WJ)])]),e("div",QJ,[XJ,e("div",eK,[j(L,{class:"mr-1"}),F(" "+l(te.extra_money.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:I=>w(ee,te)}," Detail ",8,tK)])])}),256))])]),ae(e("div",lK,[e("div",aK,[j(R,{title:"Detail Information",fn:()=>{g.value=!1,v.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",sK,[e("div",oK,[e("div",nK,[e("div",rK,[iK,e("div",dK,l(t(c).id),1)]),e("div",_K,[uK,e("div",cK,l(t(f)(t(c).tanggal).format("DD-MM-YYYY")),1)]),e("div",pK,[vK,e("div",fK,l(t(c).no_pol),1)]),e("div",mK,[e("div",hK,[bK,e("div",yK,l((re=t(c).employee)==null?void 0:re.name),1)]),e("div",xK,[wK,e("div",gK,l(t(c).employee_rek_no),1)])]),e("div",$K,[kK,e("div",jK,l(t(c).extra_money.xto),1)]),e("div",DK,[SK,e("div",TK,l(t(c).extra_money.jenis),1)]),t(c).extra_money.transition_type=="From"?(s(),_("div",CK,[PK,e("div",AK,l(t(c).extra_money.transition_target),1)])):O("",!0),e("div",MK,[OK,e("div",NK,l(t(d)(t(c).extra_money.total)),1)])]),e("div",FK,[t(c).val?(s(),_("div",IK,[YK,e("div",null," ( "+l(t(c).val_by.username)+" ) ",1),e("div",BK,l(t(f)(t(c).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val1?(s(),_("div",qK,[UK,e("div",null," ( "+l(t(c).val1_by.username)+" ) ",1),e("div",HK,l(t(f)(t(c).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val2?(s(),_("div",zK,[VK,e("div",null," ( "+l(t(c).val2_by.username)+" ) ",1),e("div",LK,l(t(f)(t(c).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val3?(s(),_("div",EK,[RK,e("div",null," ( "+l(t(c).val3_by.username)+" ) ",1),e("div",JK,l(t(f)(t(c).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val4?(s(),_("div",KK,[GK,e("div",null," ( "+l(t(c).val4_by.username)+" ) ",1),e("div",ZK,l(t(f)(t(c).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0),t(c).val5?(s(),_("div",WK,[QK,e("div",null," ( "+l(t(c).val5_by.username)+" ) ",1),e("div",XK,l(t(f)(t(c).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):O("",!0)])])]),ae(e("div",eG,[e("button",{class:"rounded m-1",onClick:M[1]||(M[1]=te=>g.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:M[2]||(M[2]=te=>v.value=!0)}," Transfer ")],512),[[Be,!t(v)]]),ae(e("div",tG,[lG,e("button",{class:"rounded m-1 bg-white",onClick:M[3]||(M[3]=te=>(v.value=!1,g.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:M[4]||(M[4]=te=>y())}," Ya ")],512),[[Be,t(v)]])])],512),[[Be,t(g)]]),j(J,{show:t(A),onSetTimeout:M[5]||(M[5]=te=>A.value=te)},null,8,["show"])])}})}},Rxe=Object.freeze(Object.defineProperty({__proto__:null,default:aG},Symbol.toStringTag,{value:"Module"})),sG={class:"box-fixed"},oG={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},nG={class:"w-full flex flex-col items-center grow overflow-auto"},rG={class:"w-full flex flex-row flex-wrap"},iG={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},dG=e("label",{for:""},"Trx Trp #ID",-1),_G=["disabled"],uG={class:"text-red-500"},cG={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},pG=e("label",{for:""},"Tanggal",-1),vG={class:"grow"},fG={key:0,class:"card-border"},mG={key:1},hG={class:"text-red-500"},bG={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yG=e("label",{for:""},"Payment Method",-1),xG=["disabled"],wG=["value"],gG={class:"text-red-500"},$G={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},kG=e("label",{for:""},"No Pol",-1),jG=["disabled"],DG={id:"vehicle"},SG=["value"],TG={class:"text-red-500"},CG={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},PG=e("label",{for:""},"Pekerja",-1),AG={class:"text-red-500"},MG={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},OG=e("label",{for:""},"Uang Tambahan",-1),NG={class:"text-red-500"},FG={class:"w-full flex flex-col flex-wrap p-1"},IG=e("label",{for:""},"Note For Remarks",-1),YG=["disabled"],BG={class:"text-red-500"},qG={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},UG={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},HG={class:"w-full flex items-center justify-end"},zG={__name:"extra_money_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:-1,tanggal:new Date,employee:{id:0},extra_money:{id:0},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note_for_remarks:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:"",payment_method_id:2,payment_method:{id:0,name:""},prev_trx_trp_id:"",attachment_1:"",attachment_1_preview:"",attachment_2:"",attachment_2_preview:""},a=u(ie({},d)),r=u([]),p=ke("token"),i=u({}),c=()=>Y(this,null,function*(){$().loading_full=!0,i.value={};const M=new FormData;M.append("tanggal",x(a.value.tanggal).format("Y-MM-DD")),M.append("no_pol",a.value.no_pol),M.append("prev_trx_trp_id",a.value.prev_trx_trp_id),M.append("note_for_remarks",a.value.note_for_remarks),M.append("employee_id",C.value.id),M.append("extra_money_id",y.value.id),M.append("payment_method_id",a.value.payment_method_id),M.append("attachment_1",a.value.attachment_1),M.append("attachment_1_preview",a.value.attachment_1_preview),M.append("attachment_2",a.value.attachment_2),M.append("attachment_2_preview",a.value.attachment_2_preview);let T="post",q=o.id;q==0||(M.append("id",q),M.append("_method","PUT"));const{data:P,error:N,status:L}=yield W("/extra_money_trx",{method:T,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:M,retry:0});if($().loading_full=!1,L.value==="error"){X().trigger(N,i);return}a.value.employee=JSON.parse(JSON.stringify(C.value._raw)),a.value.extra_money=JSON.parse(JSON.stringify(y.value._raw));let R=r.value.map(J=>J.id).indexOf(a.value.payment_method_id);if(a.value.payment_method=ie({},r.value[R]),a.value.updated_at=P.value.updated_at,o.id<=0)a.value.id=P.value.id,a.value.created_at=P.value.created_at,o.p_data.unshift(a.value);else{let J=o.p_data.map(re=>re.id).indexOf(o.id);J>-1&&o.p_data.splice(J,1,ie({},a.value))}o.fnClose()}),h={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},k={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""},C=u(JSON.parse(JSON.stringify(k))),y=u(JSON.parse(JSON.stringify(h))),g=ne(()=>{let M=[];return S.value.forEach((T,q)=>{let P=JSON.parse(JSON.stringify(k));P._.id.val=T.id,P._.name.val=T.name,P._.rek_no.val=T.rek_no,P._.rek_name.val=T.rek_name,P.id=T.id,P.name=T.name,P.title=(T.rek_no||"")+" "+(T.rek_name||""),P._raw=T,M.push(JSON.parse(JSON.stringify(P)))}),M}),b=ne(()=>{let M=[];return A.value.forEach((T,q)=>{let P=JSON.parse(JSON.stringify(h));P._.id.val=T.id,P._.xto.val=T.xto,P._.description.val=T.description,P._.total.val=f(T.total),P.id=T.id,P.name=T.xto,P.title=(f(T.total)||"")+" "+(T.description||""),P._raw=T,M.push(JSON.parse(JSON.stringify(P)))}),M}),v=ne(()=>!!a.value.val1),w=()=>Y(this,null,function*(){$().loading_full=!0;const{data:M,error:T,status:q}=yield W("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T);return}let P=M.value.data;a.value=P,ie({},P),C.value._raw=P.employee,C.value._.id.val=P.employee.id,C.value._.name.val=P.employee.name,C.value._.rek_no.val=P.employee_rek_no,C.value._.rek_name.val=P.employee_rek_name,C.value.id=P.employee.id,C.value.name=P.employee.name,C.value.rek_no=(P.employee_rek_no||"")+" "+(P.employee_rek_name||""),y.value._raw=P.extra_money,y.value._.id.val=P.extra_money.id,y.value._.xto.val=P.extra_money.xto,y.value._.description.val=P.extra_money.description,y.value._.total.val=f(P.extra_money.total),y.value.id=P.extra_money.id,y.value.name=P.extra_money.xto,y.value.title=(f(P.extra_money.total)||"")+" "+(P.extra_money.description||"")}),m=u([]),S=u([]),A=u([]),D=()=>Y(this,null,function*(){$().loading_full=!0;const{data:M,error:T,status:q}=yield W("/extra_money_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T);return}m.value=M.value.list_vehicle,S.value=M.value.list_employee,A.value=M.value.list_extra_money,r.value=M.value.list_payment_methods});return je(()=>o.show,(M,T)=>Y(this,null,function*(){M==!0&&(yield D(),a.value=ie({},d),C.value=JSON.parse(JSON.stringify(k)),y.value=JSON.parse(JSON.stringify(h)),i.value={},o.id!=0&&w())}),{immediate:!0}),(M,T)=>{const q=Xe,P=Vt("vue-date-picker"),N=zt,L=$l,R=Xt;return ae((s(),_("section",sG,[e("div",null,[j(q,{title:"Form Transaction",fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",oG,[e("div",nG,[e("div",rG,[e("div",iG,[dG,ae(e("input",{"onUpdate:modelValue":T[0]||(T[0]=J=>t(a).prev_trx_trp_id=J),disabled:t(v)},null,8,_G),[[Te,t(a).prev_trx_trp_id]]),e("p",uG,l(t(i).prev_trx_trp_id),1)]),e("div",cG,[pG,e("div",vG,[t(v)?(s(),_("div",fG,l(t(x)(t(a).tanggal).format("DD-MM-Y")),1)):(s(),_("div",mG,[j(N,null,{default:Q(()=>[j(P,{modelValue:t(a).tanggal,"onUpdate:modelValue":T[1]||(T[1]=J=>t(a).tanggal=J),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]))]),e("p",hG,l(t(i).tanggal),1)]),e("div",bG,[yG,ae(e("select",{"onUpdate:modelValue":T[2]||(T[2]=J=>t(a).payment_method_id=J),disabled:t(v)},[(s(!0),_(ye,null,Ae(t(r),J=>(s(),_("option",{value:J.id},l(J.name),9,wG))),256))],8,xG),[[We,t(a).payment_method_id]]),e("p",gG,l(t(i).payment_method_id),1)]),e("div",$G,[kG,ae(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":T[3]||(T[3]=J=>t(a).no_pol=J),disabled:t(v)},null,8,jG),[[Te,t(a).no_pol]]),e("datalist",DG,[(s(!0),_(ye,null,Ae(t(m),J=>(s(),_("option",{value:J.no_pol},l(J.no_pol),9,SG))),256))]),e("p",TG,l(t(i).no_pol),1)]),e("div",CG,[PG,j(L,{arr:t(g),selected:t(C),pure:k,onSetSelected:T[4]||(T[4]=J=>C.value=J),disabled:t(v)},null,8,["arr","selected","disabled"]),e("p",AG,l(t(i).employee_id),1)]),e("div",MG,[OG,j(L,{arr:t(b),selected:t(y),pure:h,onSetSelected:T[5]||(T[5]=J=>y.value=J),disabled:t(v)},null,8,["arr","selected","disabled"]),e("p",NG,l(t(i).extra_money_id),1)]),e("div",FG,[IG,ae(e("textarea",{"onUpdate:modelValue":T[6]||(T[6]=J=>t(a).note_for_remarks=J),disabled:t(v)},null,8,YG),[[Te,t(a).note_for_remarks]]),e("p",BG,l(t(i).note_for_remarks),1)]),e("div",qG,[j(R,{label:"Attachment",value:t(a).attachment_1_preview,onSetFile:T[7]||(T[7]=J=>t(a).attachment_1=J),onSetPreview:T[8]||(T[8]=J=>t(a).attachment_1_preview=J),can_remove:!t(v),disabled:t(v)},null,8,["value","can_remove","disabled"])]),e("div",UG,[j(R,{label:"Attachment",value:t(a).attachment_2_preview,onSetFile:T[9]||(T[9]=J=>t(a).attachment_2=J),onSetPreview:T[10]||(T[10]=J=>t(a).attachment_2_preview=J),can_remove:!0},null,8,["value"])])])]),e("div",HG,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:T[11]||(T[11]=J=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:T[12]||(T[12]=ze(J=>c(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},ys=zG,Jxe=Object.freeze(Object.defineProperty({__proto__:null,default:ys},Symbol.toStringTag,{value:"Module"}));const tl=n=>(nt("data-v-2e19f33e"),n=n(),rt(),n),VG={class:"box-fixed"},LG={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},EG={class:"w-full flex flex-col items-center grow overflow-auto"},RG={class:"w-full flex flex-row flex-wrap"},JG={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},KG=tl(()=>e("label",{for:""},"Trx Trp #ID",-1)),GG={class:"card-border"},ZG={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},WG=tl(()=>e("label",{for:""},"Tanggal",-1)),QG={class:"card-border"},XG={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},eZ=tl(()=>e("label",{for:""},"Payment Method",-1)),tZ={class:"card-border"},lZ={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},aZ=tl(()=>e("label",{for:""},"No Pol",-1)),sZ={class:"card-border"},oZ={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},nZ=tl(()=>e("label",{for:""},"Pekerja",-1)),rZ={class:"card-border"},iZ={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},dZ=tl(()=>e("label",{for:""},"Uang Tambahan",-1)),_Z={class:"card-border"},uZ={class:"w-full flex flex-col flex-wrap p-1"},cZ=tl(()=>e("label",{for:""},"Note For Remarks",-1)),pZ={class:"text-red-500"},vZ={class:"w-full flex"},fZ={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},mZ={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},hZ={class:"w-full flex flex-wrap"},bZ={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},yZ=tl(()=>e("label",{for:""},"Cost Center Code",-1)),xZ={class:"card-border disabled"},wZ={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},gZ=tl(()=>e("label",{for:""},"Cost Center Desc",-1)),$Z={class:"card-border disabled"},kZ={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},jZ=tl(()=>e("label",{for:""},"PVR No",-1)),DZ={class:"card-border disabled"},SZ={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},TZ=tl(()=>e("label",{for:""},"PVR Total",-1)),CZ={class:"card-border disabled"},PZ={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},AZ=tl(()=>e("label",{for:""},"PV",-1)),MZ={class:"card-border disabled"},OZ={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},NZ=tl(()=>e("label",{for:""},"PV Amount",-1)),FZ={class:"card-border disabled"},IZ={class:"w-full flex items-center justify-end"},YZ={class:"w-full flex flex-wrap p-3 items-center"},BZ=tl(()=>e("div",null," Di Validasi oleh : ",-1)),qZ={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},UZ={key:0},HZ={key:1},zZ={key:2},VZ={key:3},LZ={key:4},EZ={key:5},RZ={key:0,class:"text-xs font-bold"},JZ={key:0,class:"text-xs font-bold"},KZ={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(n,{emit:o}){const x=n,{$moment:f}=Ke(),{pointFormat:d}=K(),a={id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""},r=u(ie({},a)),p=ke("token"),i=u({}),c=u(null),h=u(null);u([]);const k={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},C={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""};let y=M=>{M.key=="ArrowUp"&&D(),M.key=="ArrowDown"&&A()};Nl(()=>{document.removeEventListener("keydown",y)});const g=u(JSON.parse(JSON.stringify(C))),b=u(JSON.parse(JSON.stringify(k))),v=u(""),w=()=>Y(this,null,function*(){v.value="PROSES...",$().loading_full=!0,i.value={};const M=new FormData;let T="post",q=x.id;q==0||(M.append("id",q),M.append("_method","PUT"));const{data:P,error:N,status:L}=yield W("/extra_money_trx_validasi",{method:T,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:M,retry:0});if($().loading_full=!1,L.value==="error"){v.value="GAGAL",X().trigger(N,i);return}r.value.val1=P.value.val1,r.value.val1_user=P.value.val1_user,r.value.val1_by=P.value.val1_by,r.value.val1_at=P.value.val1_at,r.value.val2=P.value.val2,r.value.val2_user=P.value.val2_user,r.value.val2_by=P.value.val2_by,r.value.val2_at=P.value.val2_at,r.value.val3=P.value.val3,r.value.val3_user=P.value.val3_user,r.value.val3_by=P.value.val3_by,r.value.val3_at=P.value.val3_at,r.value.val4=P.value.val4,r.value.val4_user=P.value.val4_user,r.value.val4_by=P.value.val4_by,r.value.val4_at=P.value.val4_at,r.value.val5=P.value.val5,r.value.val5_user=P.value.val5_user,r.value.val5_by=P.value.val5_by,r.value.val5_at=P.value.val5_at,r.value.val6=P.value.val6,r.value.val6_user=P.value.val6_user,r.value.val6_by=P.value.val6_by,r.value.val6_at=P.value.val6_at;let R=x.p_data.map(J=>J.id).indexOf(x.id);R>-1&&x.p_data.splice(R,1,ie({},r.value)),v.value="BERHASIL"}),m=()=>Y(this,null,function*(){v.value="PROSES...",$().loading_full=!0;const M=new FormData;let T="post",q=x.id;q==0||(M.append("id",q),M.append("_method","PUT"));const{data:P,error:N,status:L}=yield W("/extra_money_trx_unvalidasi",{method:T,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:M,retry:0});if($().loading_full=!1,L.value==="error"){v.value="GAGAL",X().trigger(N);return}r.value.val1=P.value.val1,r.value.val1_user=P.value.val1_user,r.value.val1_by=P.value.val1_by,r.value.val1_at=P.value.val1_at,r.value.val2=P.value.val2,r.value.val2_user=P.value.val2_user,r.value.val2_by=P.value.val2_by,r.value.val2_at=P.value.val2_at,r.value.val3=P.value.val3,r.value.val3_user=P.value.val3_user,r.value.val3_by=P.value.val3_by,r.value.val3_at=P.value.val3_at,r.value.val4=P.value.val4,r.value.val4_user=P.value.val4_user,r.value.val4_by=P.value.val4_by,r.value.val4_at=P.value.val4_at,r.value.val5=P.value.val5,r.value.val5_user=P.value.val5_user,r.value.val5_by=P.value.val5_by,r.value.val5_at=P.value.val5_at,r.value.val6=P.value.val6,r.value.val6_user=P.value.val6_user,r.value.val6_by=P.value.val6_by,r.value.val6_at=P.value.val6_at;let R=x.p_data.map(J=>J.id).indexOf(x.id);R>-1&&x.p_data.splice(R,1,ie({},r.value)),v.value="BERHASIL"}),S=()=>Y(this,null,function*(){v.value="",$().loading_full=!0;const{data:M,error:T,status:q}=yield W("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T);return}let P=M.value.data;r.value=P,g.value._raw=P.employee,g.value._.id.val=P.employee.id,g.value._.name.val=P.employee.name,g.value._.rek_no.val=P.employee_rek_no,g.value._.rek_name.val=P.employee_rek_name,g.value.id=P.employee.id,g.value.name=P.employee.name,g.value.rek_no=(P.employee_rek_no||"")+" "+(P.employee_rek_name||""),b.value._raw=P.extra_money,b.value._.id.val=P.extra_money.id,b.value._.xto.val=P.extra_money.xto,b.value._.description.val=P.extra_money.description,b.value._.total.val=d(P.extra_money.total),b.value.id=P.extra_money.id,b.value.name=P.extra_money.xto,b.value.title=(d(P.extra_money.total)||"")+" "+(P.extra_money.description||"")});je(()=>x.show,(M,T)=>{M==!0?(document.addEventListener("keydown",y),r.value=ie({},a),x.it_state==1&&setTimeout(()=>{c.value.focus()},1),x.it_state==0&&setTimeout(()=>{h.value.focus()},1),S()):document.removeEventListener("keydown",y)},{immediate:!0});const A=()=>{let M=x.p_data.map(T=>T.id).indexOf(x.id);M!=x.p_data.length-1&&(M++,o("setID",x.p_data[M].id),o("setIndex",M),setTimeout(()=>{S()},100))},D=()=>{let M=x.p_data.map(T=>T.id).indexOf(x.id);M!=0&&(M--,o("setID",x.p_data[M].id),o("setIndex",M),setTimeout(()=>{S()},100))};return(M,T)=>{const q=Xe,P=hl,N=Xt,L=Sl,R=Tl;return ae((s(),_("section",VG,[e("div",null,[j(q,{title:"Form Transaction Extra Money Trx Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",LG,[e("div",EG,[e("div",RG,[e("div",JG,[KG,e("div",GG,l(t(r).prev_trx_trp_id),1)]),e("div",ZG,[WG,e("div",QG,l(t(f)(t(r).tanggal).format("DD-MM-YYYY")),1)]),e("div",XG,[eZ,e("div",tZ,l(t(r).payment_method.name),1)]),e("div",lZ,[aZ,e("div",sZ,l(t(r).no_pol),1)]),e("div",oZ,[nZ,e("div",rZ,[j(P,{selected:t(g)},null,8,["selected"])])]),e("div",iZ,[dZ,e("div",_Z,[j(P,{selected:t(b)},null,8,["selected"])])]),e("div",uZ,[cZ,ae(e("textarea",{disabled:"disabled","onUpdate:modelValue":T[0]||(T[0]=J=>t(r).note_for_remarks=J)},null,512),[[Te,t(r).note_for_remarks]]),e("p",pZ,l(t(i).note_for_remarks),1)]),e("div",vZ,[e("div",fZ,[j(N,{label:"Attachment",value:t(r).attachment_1_preview},null,8,["value"])]),e("div",mZ,[j(N,{label:"Attachment",value:t(r).attachment_2_preview},null,8,["value"])])]),e("div",hZ,[e("div",bZ,[yZ,e("div",xZ,l(t(r).cost_center_code),1)]),e("div",wZ,[gZ,e("div",$Z,l(t(r).cost_center_desc),1)]),e("div",kZ,[jZ,e("div",DZ,l(t(r).pvr_no),1)]),e("div",SZ,[TZ,e("div",CZ,l(t(d)(t(r).pvr_total||0)),1)]),e("div",PZ,[AZ,e("div",MZ,l(t(r).pv_no),1)]),e("div",OZ,[NZ,e("div",FZ,l(t(d)(t(r).pv_total)),1)])])])]),e("div",IZ,[e("div",YZ,[BZ,t(r).val1||t(r).val2||t(r).val3||t(r).val4||t(r).val5||t(r).val6?(s(),_("div",qZ,[t(r).val1?(s(),_("div",UZ," Kasir : "+l(t(r).val1_by.username)+" ( "+l(t(r).val1_at?t(f)(t(r).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val2?(s(),_("div",HZ," Mandor : "+l(t(r).val2_by.username)+" ( "+l(t(r).val2_at?t(f)(t(r).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val3?(s(),_("div",zZ," KTU/W : "+l(t(r).val3_by.username)+" ( "+l(t(r).val3_at?t(f)(t(r).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val4?(s(),_("div",VZ," Logistik : "+l(t(r).val4_by.username)+" ( "+l(t(r).val4_at?t(f)(t(r).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val5?(s(),_("div",LZ," SPV Logistik : "+l(t(r).val5_by.username)+" ( "+l(t(r).val5_at?t(f)(t(r).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(r).val6?(s(),_("div",EZ," MGR Logistik : "+l(t(r).val6_by.username)+" ( "+l(t(r).val6_at?t(f)(t(r).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:T[1]||(T[1]=J=>D())},[j(L,{class:"black"})]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:T[2]||(T[2]=J=>n.fnClose())}," Cancel "),n.it_state==1?(s(),_("button",{key:0,ref_key:"it_val",ref:c,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:T[3]||(T[3]=ze(J=>w(),["prevent"]))},[F(" Validasi "),t(v)!=""?(s(),_("div",RZ,l(t(v)),1)):O("",!0)],512)):O("",!0),n.it_state==0?(s(),_("button",{key:1,ref_key:"it_unval",ref:h,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:T[4]||(T[4]=ze(J=>m(),["prevent"]))},[F(" Unvalidasi "),t(v)!=""?(s(),_("div",JZ,l(t(v)),1)):O("",!0)],512)):O("",!0),e("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:T[5]||(T[5]=J=>A())},[j(R,{class:"black"})])])])])],512)),[[Be,n.show]])}}},xs=Oe(KZ,[["__scopeId","data-v-2e19f33e"]]),Kxe=Object.freeze(Object.defineProperty({__proto__:null,default:xs},Symbol.toStringTag,{value:"Module"})),GZ={class:"w-full h-full flex flex-col"},ZZ={class:"w-full flex grow flex-col overflow-auto h-0"},WZ={class:"w-full flex justify-between flex-wrap"},QZ={class:"grow flex"},XZ={class:"m-1"},eW=Et('<option value="undone">Undone</option><option value="done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),tW=[eW],lW=e("span",{class:"text-xs ml-1"}," Excel ",-1),aW={class:"flex"},sW=e("span",{class:"text-xs"},"Mode",-1),oW={class:"grow mb-5"},nW=e("b",null,"tidak dapat dibatalkan lagi",-1),rW={class:"grow mb-5"},iW=e("b",null,"tidak dapat dibatalkan lagi",-1),dW={class:"grow mb-5"},_W={__name:"trx",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=we=>we.deleted==1?"!bg-red-400":we.pvr_id>0&&we.req_deleted==1?"!bg-yellow-300":we.pv_id>0?"!bg-blue-300":"",r=we=>(we.map(be=>{be.class_h=a(be)}),we),p=u("undone");je(()=>p.value,we=>{Kt.value.map(be=>{let Ce=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(be.key)>-1;return["all","deleted","req_deleted"].indexOf(we)>-1?Ce&&(be.tbl_show=1):Ce&&(be.tbl_show=0),be}),T()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=u({from:"",to:""}),k=ke("token"),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let we=[];const[be,Ce]=yield Promise.all([W("/extra_money_trxs",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return be.status.value!=="error"&&(we=r(be.data.value.data)),be.status.value==="error"?(X().trigger(be.error),{extra_money_trxs:we}):($().loading_full=!1,{extra_money_trxs:we})}),"$M1coKGGJnq")})),o=yield o,x(),o),y=u(C.value.extra_money_trxs||[]),g=u([]),b=u(!1),v=()=>Y(this,null,function*(){$().loading_full=!0;const{data:we,error:be,status:Ce}=yield W("/extra_money_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{online_status:b.value},retry:0});if($().loading_full=!1,Ce.value==="error"){X().trigger(be);return}g.value=we.value.list_cost_center}),w=u({field:"tanggal",by:"desc"}),m=u(-1),S=ne(()=>y.value[m.value]),A=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),D=()=>{i.like="";let we=JSON.parse(JSON.stringify($()._tv.global_keyword));we!=""&&(i.like=`id:%${we}%,tanggal:%${we}%,no_pol:%${we}%,employee_name:%${we}%,employee_rek_no:%${we}%,employee_rek_name:%${we}%,kernet:%${we}%,extra_money_xto:%${we}%,extra_money_jenis:%${we}%,extra_money_desc:%${we}%,pv_no:%${we}%,pvr_no:%${we}%,extra_money_transition_target:%${we}%,cost_center_code:%${we}%`),i.sort="",w.value.field&&(i.sort=w.value.field+":"+w.value.by),i.date_from=h.value.from?f(h.value.from).format("YYYY-MM-DD"):"",i.date_to=h.value.to?f(h.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model)},M=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},A.value.may_get_data=!1,i.page=A.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:we,error:be,status:Ce}=yield W("/extra_money_trxs",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,A.value.may_get_data=!0,Ce.value==="error"){X().trigger(be,c);return}A.value.page==1?y.value=r(we.value.data):A.value.page>1&&(y.value=[...y.value,...r(we.value.data)]),we.value.data.length==0&&(A.value.is_last_record=!0),$()._tv.filter_box=!1}),T=()=>{m.value=-1,A.value.page=1,A.value.is_last_record=!1,D(),M()},q=u(!1),P=u(0),N=()=>{P.value=0,q.value=!0},{display:L}=Je();Dt(Je());const R=u(1),J=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=y.value[m.value].id,R.value=-1,q.value=!0)},re=u(!1),te=u(0),ee=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value=y.value[m.value].id,R.value=1,re.value=!0)},ce=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value=y.value[m.value].id,R.value=0,re.value=!0)},U=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value=y.value[m.value].id,R.value=-1,re.value=!0)},I=u(!1),Z=u({}),E=u(!1),H=u(""),ve=()=>Y(this,null,function*(){E.value&&(E.value=!1)}),Ie=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(H.value="",Z.value={id:y.value[m.value].id,"no pol":y.value[m.value].no_pol,tujuan:y.value[m.value].extra_money.xto},E.value=!0)};je(()=>H.value,we=>{we.trim().length>0?I.value=!0:I.value=!1},{immediate:!1});const le=()=>Y(this,null,function*(){$().loading_full=!0;const we=new FormData;we.append("id",y.value[m.value].id),we.append("deleted_reason",H.value),we.append("_method","DELETE");const{data:be,error:Ce,status:lt}=yield W("/extra_money_trx",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:we,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}let De=ie({},y.value[m.value]);De.deleted=be.value.deleted,De.deleted_user=be.value.deleted_user,De.deleted_at=be.value.deleted_at,De.deleted_by=be.value.deleted_by,De.deleted_reason=be.value.deleted_reason,De.class_h=a(De),p.value!="all"?y.value.splice(m.value,1):y.value.splice(m.value,1,ie({},De)),m.value=-1,E.value=!1}),z=u(!1),G=u({}),oe=u(!1),se=u(""),_e=()=>Y(this,null,function*(){oe.value&&(oe.value=!1)}),ue=()=>{m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(se.value="",G.value={id:y.value[m.value].id,"no pol":y.value[m.value].no_pol,tujuan:y.value[m.value].extra_money.xto},oe.value=!0)},B=u({}),de=u(!1),V=u(""),me=()=>Y(this,null,function*(){de.value&&(de.value=!1)}),Me=u(""),tt=()=>{var we;m.value==-1?L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(V.value="",Me.value="",B.value={id:y.value[m.value].id,"no pol":y.value[m.value].no_pol,tujuan:y.value[m.value].extra_money.xto,permintaan:(we=y.value[m.value].req_deleted_by)==null?void 0:we.username,alasan:y.value[m.value].req_deleted_reason},de.value=!0)},ut=()=>Y(this,null,function*(){$().loading_full=!0;const we=new FormData;we.append("id",y.value[m.value].id),we.append("_method","DELETE"),we.append("reason_adder",Me.value);const{data:be,error:Ce,status:lt}=yield W("/extra_money_trx_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:we,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}let De=ie({},y.value[m.value]);De.deleted=be.value.deleted,De.deleted_user=be.value.deleted_user,De.deleted_at=be.value.deleted_at,De.deleted_by=be.value.deleted_by,De.deleted_reason=be.value.deleted_reason,De.class_h=a(De),p.value!="all"?y.value.splice(m.value,1):y.value.splice(m.value,1,ie({},De)),m.value=-1,de.value=!1});je(()=>se.value,we=>{we.trim().length>0?z.value=!0:z.value=!1},{immediate:!1});const he=()=>Y(this,null,function*(){$().loading_full=!0;const we=new FormData;we.append("id",y.value[m.value].id),we.append("req_deleted_reason",se.value),we.append("_method","DELETE");const{data:be,error:Ce,status:lt}=yield W("/extra_money_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:we,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}let De=ie({},y.value[m.value]);De.req_deleted=be.value.req_deleted,De.req_deleted_user=be.value.req_deleted_user,De.req_deleted_by=be.value.req_deleted_by,De.req_deleted_at=be.value.req_deleted_at,De.req_deleted_reason=be.value.req_deleted_reason,De.class_h=a(De),p.value!="all"?y.value.splice(m.value,1):y.value.splice(m.value,1,ie({},De)),m.value=-1,oe.value=!1}),{printHtml:Re}=jt(),Ne=()=>Y(this,null,function*(){if(m.value==-1){L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:we,error:be,status:Ce}=yield W("/extra_money_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:y.value[m.value].id},retry:0});if($().loading_full=!1,Ce.value==="error"){X().trigger(be);return}Re(we.value.html,318)}),Ze=()=>Y(this,null,function*(){if(m.value==-1){L({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}$().loading_full=!0;const{data:we,error:be,status:Ce}=yield W("/extra_money_trx_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:y.value[m.value].id},retry:0});if($().loading_full=!1,Ce.value==="error"){X().trigger(be);return}Re(we.value.html,318)}),Ve=()=>Y(this,null,function*(){$().loading_full=!0;const we=new FormData;we.append("online_status",b.value);const{data:be,error:Ce,status:lt}=yield W("/extra_money_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:we,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}be.value.forEach(De=>{let $e=y.value.map(xe=>xe.id).indexOf(De.id);if($e!==-1){let xe=y.value[$e];xe.pvr_id=De.pvr_id,xe.pvr_no=De.pvr_no,xe.pvr_total=De.pvr_total,xe.pvr_complete=De.pvr_complete,xe.updated_at=De.updated_at,y.value.splice($e,1,ie({},xe))}}),L({show:!0,status:"Success",message:"Generate Or Update PVR Done"})}),Bt=()=>Y(this,null,function*(){$().loading_full=!0;const we=new FormData;we.append("online_status",b.value);const{data:be,error:Ce,status:lt}=yield W("/extra_money_trx_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:we,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}be.value.forEach(De=>{let $e=y.value.map(xe=>xe.id).indexOf(De.id);if($e!==-1){let xe=y.value[$e];xe.pv_id=De.pv_id,xe.pv_no=De.pv_no,xe.pv_total=De.pv_total,xe.pv_datetime=De.pv_datetime,xe.pv_complete=De.pv_complete,xe.updated_at=De.updated_at,y.value.splice($e,1,ie({},xe))}}),L({show:!0,status:"Success",message:"Generate Or Update PV Done"})}),{downloadFile:Rt,viewFile:Jt}=jt(),al=(we="")=>Y(this,null,function*(){D(),$().loading_full=!0,i.filter_status=p.value;const{data:be,error:Ce,status:lt}=yield W("/extra_money_trxs/reportExcel",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,lt.value==="error"){X().trigger(Ce);return}Rt(be.value)}),Kt=u([{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val1",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"Tanggal",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"employee_name",label:"Nama Pekerja",filter_on:1,type:"string"},{key:"employee_rek_no",label:"No rek Pekerja",type:"string"},{key:"employee_rek_name",label:"Nama Rek Pekerja",type:"string"},{key:"prev_trx_trp_id",label:"ID Trip Sumber",type:"string",filter_on:1},{key:"trx_trp_id",label:"ID Trip Dibayar",type:"string",filter_on:1},{key:"note",label:"Note",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"extra_money_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"extra_money_jenis",label:"Jenis",filter_on:1,type:"string"},{key:"extra_money_desc",label:"Desc",filter_on:1,type:"string"},{key:"extra_money_nominal",label:"Nominal",class:" justify-end",type:"number"},{key:"extra_money_qty",label:"Qty",class:" justify-end",type:"number"},{key:"extra_money_total",label:"Total",class:" justify-end",type:"number"},{key:"extra_money_transition_target",label:"Pengalihan",filter_on:1,type:"select",select_item:$().list_pabrik},{key:"extra_money_transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Le=ne(()=>["undone","all"].indexOf(p.value)>-1&&K().checkPermission("extra_money_trx.create")),Tt=ne(()=>m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&[void 0,0].indexOf(S.value.val6)>-1&&[void 0,""].indexOf(S.value.pvr_id)>-1&&K().checkPermission("extra_money_trx.modify")),rl=ne(()=>m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&([void 0,""].indexOf(S.value.pvr_id)>-1&&(K().checkPermission("extra_money_trx.val1")&&[void 0,0].indexOf(S.value.val1)>-1||K().checkPermission("extra_money_trx.val2")&&[void 0,0].indexOf(S.value.val2)>-1)||S.value.pvr_id>-1&&(K().checkPermission("extra_money_trx.val3")&&[void 0,0].indexOf(S.value.val3)>-1||K().checkPermission("extra_money_trx.val4")&&[void 0,0].indexOf(S.value.val4)>-1||K().checkPermission("extra_money_trx.val5")&&[void 0,0].indexOf(S.value.val5)>-1||K().checkPermission("extra_money_trx.val6")&&[void 0,0].indexOf(S.value.val6)>-1))),et=ne(()=>m.value>-1&&S.value.deleted==0&&S.value.req_deleted==0&&(S.value.val1==1&&K().checkPermission("extra_money_trx.unval1")||S.value.val2==1&&K().checkPermission("extra_money_trx.unval2")||S.value.val3==1&&K().checkPermission("extra_money_trx.unval3")||S.value.val4==1&&K().checkPermission("extra_money_trx.unval4")||S.value.val5==1&&K().checkPermission("extra_money_trx.unval5")||S.value.val6==1&&K().checkPermission("extra_money_trx.unval6"))),yt=ne(()=>K().checkPermission("extra_money_trx.remove")&&m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&[void 0,""].indexOf(S.value.pvr_id)>-1),Ol=ne(()=>K().checkPermission("extra_money_trx.request_remove")&&m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&S.value.pvr_id!=""),Ye=ne(()=>K().checkPermission("extra_money_trx.approve_request_remove")&&m.value>-1&&S.value.deleted==0&&S.value.req_deleted==1),fe=ne(()=>K().checkPermission("extra_money_trx.preview_file")&&m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&S.value.val1==1),ge=ne(()=>m.value>-1&&[void 0,0].indexOf(S.value.deleted)>-1&&[void 0,0].indexOf(S.value.req_deleted)>-1&&S.value.payment_method_id==2&&S.value.received_payment==1&&S.value.duitku_employee_disburseId!=""&&K().checkPermission("extra_money_trx.preview_file"));return(we,be)=>{const Ce=_t,lt=gt,De=Pt,$e=Nt,xe=Zt,st=Hl,qt=Ft,qe=wl,ht=_l,Qe=Yt,wt=$t,Gt=ft,xl=Ot,cl=It,He=ys,dt=xs;return s(),_("div",GZ,[j(Ce,{title:"List Transaction"}),e("div",ZZ,[e("div",WZ,[e("div",QZ,[e("div",XZ,[ae(e("select",{class:"","onUpdate:modelValue":be[0]||(be[0]=Pe=>Ee(p)?p.value=Pe:null)},tW,512),[[We,t(p)]])]),t(Le)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[1]||(be[1]=Pe=>N())},[j(lt)])):O("",!0),t(Tt)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[2]||(be[2]=Pe=>J())},[j(De)])):O("",!0),t(m)>-1?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[3]||(be[3]=Pe=>U())},[j($e)])):O("",!0),t(yt)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[4]||(be[4]=Pe=>Ie())},[j(xe)])):O("",!0),t(Ol)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[5]||(be[5]=Pe=>ue())},[j(st)])):O("",!0),t(Ye)?(s(),_("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[6]||(be[6]=Pe=>tt())},[j(st)])):O("",!0),t(rl)?(s(),_("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[7]||(be[7]=Pe=>ee())},[j(qt)])):O("",!0),t(et)?(s(),_("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[8]||(be[8]=Pe=>ce())},[j(qe)])):O("",!0),t(fe)?(s(),_("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[9]||(be[9]=Pe=>Ne())},[j(ht)])):O("",!0),t(ge)?(s(),_("button",{key:9,type:"button",name:"button",class:"m-1 text-2xl",onClick:be[10]||(be[10]=Pe=>Ze())},[j(ht)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:be[11]||(be[11]=Pe=>al())},[j(Qe),F(),lW])]),e("div",aW,[("useUtils"in we?we.useUtils:t(K))().checkPermission("extra_money_trx.generate_pvr")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:be[12]||(be[12]=Pe=>Ve())}," Gen/Update PVR ")):O("",!0),("useUtils"in we?we.useUtils:t(K))().checkPermission("extra_money_trx.generate_pv")?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:be[13]||(be[13]=Pe=>Bt())}," Gen/Update PV ")):O("",!0),("useUtils"in we?we.useUtils:t(K))().checkPermissions(["extra_money_trx.generate_pvr","extra_money_trx.generate_pv","extra_money_trx.get_pv"])?(s(),_("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:be[14]||(be[14]=Pe=>b.value=!t(b))},[sW,F(" : "),e("span",{class:Ue(["font-bold",t(b)?"text-green-600":"text-red-600"])},l(t(b)?"ONLINE":"OFFLINE"),3)])):O("",!0)])]),j(xl,{thead:t(Kt),selected:t(m),onSetSelected:be[15]||(be[15]=Pe=>m.value=Pe),tbody:t(y),fnCallData:M,scrolling:t(A),onSetScrollingPage:be[16]||(be[16]=Pe=>t(A).page=Pe),onDoFilter:be[17]||(be[17]=Pe=>T())},{val1:Q(({item:Pe})=>[Pe.val1?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),val2:Q(({item:Pe})=>[Pe.val2?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),val3:Q(({item:Pe})=>[Pe.val3?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),val4:Q(({item:Pe})=>[Pe.val4?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),val5:Q(({item:Pe})=>[Pe.val5?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),val6:Q(({item:Pe})=>[Pe.val6?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),payment_method_name:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.payment_method)==null?void 0:Ge.name),1)]}),employee_name:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.employee)==null?void 0:Ge.name),1)]}),employee_rek_no:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.employee)==null?void 0:Ge.rek_no),1)]}),employee_rek_name:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.employee)==null?void 0:Ge.rek_name),1)]}),extra_money_transition_target:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.extra_money)==null?void 0:Ge.transition_target),1)]}),extra_money_transition_type:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.extra_money)==null?void 0:Ge.transition_type),1)]}),extra_money_xto:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.extra_money)==null?void 0:Ge.xto),1)]}),extra_money_jenis:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.extra_money)==null?void 0:Ge.jenis),1)]}),extra_money_desc:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.extra_money)==null?void 0:Ge.description),1)]}),extra_money_nominal:Q(({item:Pe})=>{var Ge;return[F(" Rp. "+l(t(d)(((Ge=Pe.extra_money)==null?void 0:Ge.nominal)||0)),1)]}),extra_money_qty:Q(({item:Pe})=>{var Ge;return[F(l(t(d)(((Ge=Pe.extra_money)==null?void 0:Ge.qty)||0)),1)]}),extra_money_total:Q(({item:Pe})=>{var Ge;return[F(" Rp. "+l(t(d)(((Ge=Pe.extra_money)==null?void 0:Ge.total)||0)),1)]}),pvr_complete:Q(({item:Pe})=>[Pe.pvr_complete?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),pv_complete:Q(({item:Pe})=>[Pe.pv_complete?(s(),pe(Gt,{key:1})):(s(),pe(wt,{key:0}))]),deleted_by_username:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.deleted_by)==null?void 0:Ge.username),1)]}),req_deleted_by_username:Q(({item:Pe})=>{var Ge;return[F(l((Ge=Pe.req_deleted_by)==null?void 0:Ge.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(cl,{type:"delete",show:t(E),data:t(Z),fnClose:ve,fnConfirm:le,enabledOk:t(I)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",oW,[ae(e("textarea",{"onUpdate:modelValue":be[18]||(be[18]=Pe=>Ee(H)?H.value=Pe:null)},null,512),[[Te,t(H)]])])]),_:1},8,["show","data","enabledOk"]),j(cl,{type:"custome",show:t(oe),data:t(G),fnClose:_e,fnConfirm:he,enabledOk:t(z)},{words:Q(()=>[F(" Data akan diproses dan "),nW,F(", yakin untuk melanjutkan ? ")]),footer:Q(()=>[F(" Masukkan Alasan Permintaan Penghapusan: "),e("div",rW,[ae(e("textarea",{"onUpdate:modelValue":be[19]||(be[19]=Pe=>Ee(se)?se.value=Pe:null)},null,512),[[Te,t(se)]])])]),_:1},8,["show","data","enabledOk"]),j(cl,{type:"custome",show:t(de),data:t(B),fnClose:me,fnConfirm:ut},{words:Q(()=>[F(" Data akan diproses dan "),iW,F(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),footer:Q(()=>[F(" Alasan Tambahan: "),e("div",dW,[ae(e("textarea",{"onUpdate:modelValue":be[20]||(be[20]=Pe=>Ee(Me)?Me.value=Pe:null)},null,512),[[Te,t(Me)]])])]),_:1},8,["show","data"]),j(He,{show:t(q),fnClose:()=>{q.value=!1},fnLoadDBData:v,id:t(P),p_data:t(y),list_cost_center:t(g),online_status:t(b)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),j(dt,{show:t(re),fnClose:()=>{re.value=!1},id:t(te),p_data:t(y),it_state:t(R),onSetID:be[21]||(be[21]=Pe=>te.value=Pe),onSetIndex:be[22]||(be[22]=Pe=>m.value=Pe)},null,8,["show","fnClose","id","p_data","it_state"])])}})}},Gxe=Object.freeze(Object.defineProperty({__proto__:null,default:_W},Symbol.toStringTag,{value:"Module"})),uW={class:"box-fixed"},cW={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto p-2 bg-white"},pW={class:"w-full flex flex-col items-center grow overflow-auto"},vW={class:"w-full",role:"sticky"},fW={class:"tacky",style:{"white-space":"normal"}},mW=e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:8,class:"!bg-slate-800 text-white font-bold"}," List Transaksi ")],-1),hW={class:"sticky top-7 !z-[2]"},bW={rowspan:"2",class:"min-w-[50px] !w-[50px] max-w-[50px]"},yW=e("th",{rowspan:"2",class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1),xW=e("th",{colspan:"2"},"Transaction",-1),wW=e("th",{colspan:"2"},"PVR",-1),gW=e("th",{colspan:"2"},"PV",-1),$W=e("tr",{class:"sticky top-[60px] !z-[2]"},[e("th",null,"ID"),e("th",null,"Amount"),e("th",null,"No"),e("th",null,"Amount"),e("th",null,"No"),e("th",null,"Amount")],-1),kW={ref:"to_move"},jW=["data-index"],DW={class:"tools cell"},SW={class:"w-full h-full flex items-center justify-center"},TW=["checked","onClick"],CW={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},PW={class:"w-full h-full flex items-center justify-center"},AW={class:"cell"},MW={class:"w-full h-full flex items-center justify-center"},OW={class:"cell min-w-[150px] !w-[150px] max-w-[150px]"},NW={class:"w-full h-full flex items-center justify-center"},FW={class:"cell"},IW={class:"w-full h-full flex items-center justify-center"},YW={class:"cell"},BW={class:"w-full h-full flex items-center justify-center"},qW={class:"cell"},UW={class:"w-full h-full flex items-center justify-center unselectable"},HW={class:"w-full flex items-center justify-end"},zW={__name:"fin_payment_req_trx_trps",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(n){const o=n,{pointFormat:x}=K(),f={id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",details:[],details2:[]},d=u(ie({},f)),a=ke("token"),r=u({});Je();const p=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const g=new FormData;g.append("details",JSON.stringify(i.value));let b="post",v=o.is_copy?0:o.id;v==0||(g.append("id",v),g.append("_method","PUT"));const{data:w,error:m,status:S}=yield W("/fin_payment_req",{method:b,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:g,retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m,r);return}if(v<=0)d.value.id=w.value.id,d.value.created_at=w.value.created_at,d.value.updated_at=w.value.updated_at,o.p_data.unshift(d.value);else{d.value.updated_at=w.value.updated_at;let A=o.p_data.map(D=>D.id).indexOf(v);A>-1&&o.p_data.splice(A,1,ie({},d.value))}o.fnClose()}),i=u([]),c=g=>i.value.map(v=>v.id).indexOf(g.id)!==-1,h=g=>{const b=i.value.map(v=>v.id).indexOf(g.id);b===-1?i.value.push(g):i.value.splice(b,1)},k=g=>{i.value.length<C.value.length?i.value=[...C.value]:i.value=[]},C=u([]),y=()=>Y(this,null,function*(){$().loading_full=!0;const{data:g,error:b,status:v}=yield W("/fin_payment_req/get_trx_trp_unprocessed",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{},retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}C.value=g.value.data});return je(()=>o.show,(g,b)=>Y(this,null,function*(){g==!0&&(yield y(),d.value=ie({},f))}),{immediate:!0}),(g,b)=>{const v=Xe;return ae((s(),_("section",uW,[e("div",null,[j(v,{title:"Form fin_payment_req",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",cW,[e("div",pW,[e("div",vW,[e("table",fW,[e("thead",null,[mW,e("tr",hW,[e("th",bW,[e("button",{type:"button",name:"button",class:"bg-yellow-600",onClick:b[0]||(b[0]=w=>k())}," U/Ch ")]),yW,xW,wW,gW]),$W]),e("tbody",kW,[(s(!0),_(ye,null,Ae(t(C),(w,m)=>(s(),_("tr",{key:m,"data-index":m},[e("td",DW,[e("div",SW,[e("input",{type:"checkbox",checked:c(w),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600 cursor-pointer",onClick:S=>h(w)},null,8,TW)])]),e("td",null,l(m+1)+".",1),e("td",CW,[e("div",PW,l(w.id),1)]),e("td",AW,[e("div",MW,l(t(x)(w.amount||0)),1)]),e("td",OW,[e("div",NW,l(w.pvr_no),1)]),e("td",FW,[e("div",IW,l(t(x)(w.pvr_total||0)),1)]),e("td",YW,[e("div",BW,l(w.pv_no),1)]),e("td",qW,[e("div",UW,l(t(x)(w.pv_total||0)),1)])],8,jW))),128))],512)])])]),e("div",HW,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:b[1]||(b[1]=w=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:b[2]||(b[2]=ze(w=>p(),["prevent"]))}," Generate Request ")])])])],512)),[[Be,n.show]])}}},ws=zW,Zxe=Object.freeze(Object.defineProperty({__proto__:null,default:ws},Symbol.toStringTag,{value:"Module"})),VW={name:"MaterialSymbolsSend"},LW={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},EW=e("path",{fill:"currentColor",d:"M3 20v-6l8-2l-8-2V4l19 8z"},null,-1),RW=[EW];function JW(n,o,x,f,d,a){return s(),_("svg",LW,RW)}const gs=Oe(VW,[["render",JW]]),Wxe=Object.freeze(Object.defineProperty({__proto__:null,default:gs},Symbol.toStringTag,{value:"Module"})),KW={class:"box-fixed"},GW={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ZW={class:"w-full flex flex-col items-center grow overflow-auto"},WW={class:"w-full flex"},QW={class:"w-full flex p-1 2xl:overflow-hidden justify-between flex-wrap"},XW={class:"w-full",role:"sticky"},eQ={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},tQ=e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:18,class:"!bg-slate-800 text-white font-bold"}," List Transaksi ")],-1),lQ={class:"sticky top-7 !z-[2]"},aQ=e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1),sQ=e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"ID",-1),oQ=e("th",null,"Tujuan",-1),nQ=e("th",null,"Produk",-1),rQ=e("th",null,"No Trx",-1),iQ=e("th",{class:"min-w-[75px] !w-[75px] max-w-[75px]"},"No Pol",-1),dQ=e("th",null,"Jabatan",-1),_Q=e("th",null,"Nama",-1),uQ=e("br",null,null,-1),cQ=e("br",null,null,-1),pQ=e("br",null,null,-1),vQ=e("th",null,null,-1),fQ=e("th",null,"No Rek",-1),mQ=e("th",null,"Nama Di Bank",-1),hQ=e("br",null,null,-1),bQ=e("th",null,"Status ",-1),yQ=e("th",null,"Aksi ",-1),xQ=e("th",null,"Alasan Gagal ",-1),wQ={ref:"to_move"},gQ={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},$Q={class:"w-full h-full flex items-center justify-center"},kQ={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},jQ={class:"w-full h-full flex items-center justify-center"},DQ={class:"cell min-w-[150px] !w-[150px] max-w-[150px]"},SQ={class:"w-full h-full flex items-center justify-center"},TQ={class:"cell"},CQ={class:"w-full h-full flex items-center justify-center"},PQ={class:"cell"},AQ={class:"w-full h-full flex items-center justify-center"},MQ={class:"cell"},OQ={class:"w-full h-full flex items-center justify-center"},NQ={class:"cell"},FQ={class:"w-full h-full flex items-center justify-center"},IQ={class:"cell"},YQ={class:"w-full h-full flex items-center justify-center"},BQ={class:"cell"},qQ={class:"w-full h-full flex items-center justify-end p-2"},UQ={class:"cell"},HQ={class:"w-full h-full flex items-center justify-end p-2"},zQ={class:"cell"},VQ={class:"w-full h-full flex items-center justify-end p-2"},LQ=e("td",null,[e("div",{class:"w-full h-full flex items-center justify-end p-2"})],-1),EQ={class:"cell"},RQ={class:"w-full h-full flex items-center justify-center"},JQ={class:"cell"},KQ={class:"w-full h-full flex items-center justify-center"},GQ={class:"cell"},ZQ={class:"w-full h-full flex items-center justify-end p-1"},WQ={class:"cell"},QQ={class:"w-full h-full flex items-center justify-end p-1"},XQ={class:"cell"},eX={class:"w-full h-full flex items-center justify-end p-1"},tX=["onClick"],lX={class:"cell"},aX={class:"w-full h-full flex items-center justify-end p-1"},sX={class:"w-full flex items-center justify-end"},oX={__name:"fin_payment_req_view",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0}},setup(n){const o=n,{pointFormat:x}=K(),{display:f}=Je(),d={id:-1,details:[]},a=u(ie({},d)),r=ke("token"),p=u([]),i=ne(()=>{let D=0;return p.value.forEach(M=>{D+=parseInt(M.nominal)}),D}),c=ne(()=>{let D=0;return p.value.forEach(M=>{D+=parseInt(M.potongan_trx_ttl)}),D}),h=ne(()=>{let D=0;return p.value.forEach(M=>{D+=parseInt(M.extra_money_trx_ttl)}),D}),k=ne(()=>{let D=0;return p.value.forEach(M=>{D+=parseInt(M.jumlah)}),D}),C=ne(()=>{let D=0;return p.value.every(M=>M.status=="READY"?(D=1,!1):M.status=="INQUIRY_FAILED"?(D=2,!1):!0),D}),y=()=>Y(this,null,function*(){$().loading_full=!0;const{data:D,error:M,status:T}=yield W("/fin_payment_req",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M);return}a.value=D.value.data,o.is_copy&&(a.value.val=0,a.value.val1=0),p.value=D.value.data.details}),{downloadFile:g,viewFile:b}=jt(),v=()=>Y(this,null,function*(){$().loading_full=!0;const{data:D,error:M,status:T}=yield W("/fin_payment_req/download_view",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M);return}g(D.value)}),w=u({}),m=()=>Y(this,null,function*(){$().loading_full=!0,w.value={};const D=new FormData;D.append("id",o.id),D.append("_method","PUT");let M="post";const{data:T,error:q,status:P}=yield W("/fin_payment_req/gen_csv_and_send_mandiri",{method:M,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:D,retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q,w);return}f({show:!0,status:"Success",message:"Kirim Ke Mandiri Berhasil"}),p.value.forEach(N=>{N.status="INQUIRY_PROCESS"})}),S=()=>Y(this,null,function*(){$().loading_full=!0,w.value={};const D=new FormData;D.append("id",o.id),D.append("_method","PUT");let M="post";const{data:T,error:q,status:P}=yield W("/fin_payment_req/get_update",{method:M,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:D,retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q,w);return}f({show:!0,status:"Success",message:"Update Data Berhasil"}),T.value.details.forEach(N=>{let L=p.value.map(R=>R.id).indexOf(N.id);L>-1&&(p.value[L].status=N.status,p.value[L].failed_reason=N.failed_reason)}),console.log(T.value.details),console.log(p.value)}),A=(D,M)=>Y(this,null,function*(){$().loading_full=!0,w.value={};const T=new FormData;T.append("detail_id",D),T.append("_method","PUT");let q="post";const{data:P,error:N,status:L}=yield W("/fin_payment_req_dtl/renew_data",{method:q,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:T,retry:0});if($().loading_full=!1,L.value==="error"){X().trigger(N,w);return}f({show:!0,status:"Success",message:"Data Berhasil Diperbaharui"}),p.value[M].employee_rek_no=P.value.employee_rek_no,p.value[M].employee_rek_name=P.value.employee_rek_name,p.value[M].employee_bank_code=P.value.employee_bank_code,p.value[M].status=P.value.status,p.value[M].failed_reason=P.value.failed_reason});return je(()=>o.show,(D,M)=>{D==!0&&(a.value=ie({},d),p.value=[],o.id!=0&&y())},{immediate:!0}),(D,M)=>{const T=Xe,q=Yt,P=gs,N=Vl;return ae((s(),_("section",KW,[e("div",null,[j(T,{title:"Finance Payment Request",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",GW,[e("div",ZW,[e("div",WW,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:M[0]||(M[0]=L=>v())},[j(q)]),ae(e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:M[1]||(M[1]=L=>m())},[j(P)],512),[[Be,t(C)==1]]),ae(e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:M[2]||(M[2]=L=>S())},[j(N)],512),[[Be,t(C)==0]])]),e("div",QW,[e("div",XW,[e("table",eQ,[e("thead",null,[tQ,e("tr",lQ,[aQ,sQ,oQ,nQ,rQ,iQ,dQ,_Q,e("th",null,[F("Jumlah "),uQ,F(" ("+l(t(x)(t(i)||0))+") ",1)]),e("th",null,[F("Potongan "),cQ,F(" ("+l(t(x)(t(c)))+")",1)]),e("th",null,[F("ExtraMoney "),pQ,F(" ("+l(t(x)(t(h)))+")",1)]),vQ,fQ,mQ,e("th",null,[F("Nominal Transfer "),hQ,F(" ("+l(t(x)(t(k)||0))+")",1)]),bQ,yQ,xQ])]),e("tbody",wQ,[(s(!0),_(ye,null,Ae(t(p),(L,R)=>(s(),_("tr",{key:R},[e("td",gQ,[e("div",$Q,l(L.no),1)]),e("td",kQ,[e("div",jQ,l(L.id),1)]),e("td",DQ,[e("div",SQ,l(L.jabatan!="KERNET"?L.tujuan:""),1)]),e("td",TQ,[e("div",CQ,l(L.jabatan!="KERNET"?L.produk:""),1)]),e("td",PQ,[e("div",AQ,l(L.jabatan!="KERNET"?L.trx_trp_id:""),1)]),e("td",MQ,[e("div",OQ,l(L.jabatan!="KERNET"?L.no_pol:""),1)]),e("td",NQ,[e("div",FQ,l(L.jabatan),1)]),e("td",IQ,[e("div",YQ,l(L.nama),1)]),e("td",BQ,[e("div",qQ,l(t(x)(L.jumlah||0)),1)]),e("td",UQ,[e("div",HQ,l(t(x)(L.potongan_trx_ttl)),1)]),e("td",zQ,[e("div",VQ,l(t(x)(L.extra_money_trx_ttl)),1)]),LQ,e("td",EQ,[e("div",RQ,l(L.rek_no),1)]),e("td",JQ,[e("div",KQ,l(L.rek_name),1)]),e("td",GQ,[e("div",ZQ,l(t(x)(L.jumlah||0)),1)]),e("td",WQ,[e("div",QQ,l(L.status),1)]),e("td",XQ,[e("div",eX,[L.status=="INQUIRY_FAILED"?(s(),_("button",{key:0,class:"bg-yellow-400 rounded",onClick:ze(J=>A(L.id,R),["prevent"])}," Renew Data ",8,tX)):O("",!0)])]),e("td",lX,[e("div",aX,l(L.failed_reason),1)])]))),128))],512)])])])]),e("div",sX,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:M[3]||(M[3]=L=>n.fnClose())}," Cancel ")])])])],512)),[[Be,n.show]])}}},$s=oX,Qxe=Object.freeze(Object.defineProperty({__proto__:null,default:$s},Symbol.toStringTag,{value:"Module"}));const ks=n=>(nt("data-v-cc6a53f4"),n=n(),rt(),n),nX={class:"box-fixed"},rX={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},iX={class:"w-full flex flex-col items-center grow overflow-auto"},dX={class:"w-full flex p-1 2xl:overflow-hidden justify-between flex-wrap"},_X={class:"w-full",role:"sticky"},uX={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},cX=ks(()=>e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:7,class:"!bg-slate-800 text-white font-bold"}," List Transaksi ")]),e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{rowspan:"2",class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No"),e("th",{colspan:"2"},"Transaction"),e("th",{colspan:"2"},"PVR"),e("th",{colspan:"2"},"PV")]),e("tr",{class:"sticky top-[60px] !z-[2]"},[e("th",null,"ID"),e("th",null,"Amount"),e("th",null,"No"),e("th",null,"Amount"),e("th",null,"No"),e("th",null,"Amount")])],-1)),pX={ref:"to_move"},vX=["data-index"],fX={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},mX={class:"w-full h-full flex items-center justify-center"},hX={class:"cell"},bX={class:"w-full h-full flex items-center justify-center"},yX={class:"cell min-w-[150px] !w-[150px] max-w-[150px]"},xX={class:"w-full h-full flex items-center justify-center"},wX={class:"cell"},gX={class:"w-full h-full flex items-center justify-center"},$X={class:"cell"},kX={class:"w-full h-full flex items-center justify-center"},jX={class:"cell"},DX={class:"w-full h-full flex items-center justify-center unselectable"},SX={class:"w-full flex items-center justify-end"},TX={class:"w-full flex flex-wrap p-3 items-center"},CX=ks(()=>e("div",null," Di Validasi oleh : ",-1)),PX={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},AX={key:0},MX={__name:"fin_payment_req_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{details:[],val:0,val_by:{username:""},val_at:""})),r=ke("token"),p=u({}),i=u([]),c=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const k=new FormData;let C="post",y=o.id;y==0||(k.append("id",y),k.append("_method","PUT"));const{data:g,error:b,status:v}=yield W("/fin_payment_req_validasi",{method:C,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:k,retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b,p);return}a.value.val=g.value.val,a.value.val_user=g.value.val_user,a.value.val_by=g.value.val_by,a.value.val_at=g.value.val_at,a.value.val1=g.value.val1,a.value.val1_user=g.value.val1_user,a.value.val1_by=g.value.val1_by,a.value.val1_at=g.value.val1_at;let w=o.p_data.map(m=>m.id).indexOf(o.id);w>-1&&o.p_data.splice(w,1,ie({},a.value)),o.fnClose()}),h=()=>Y(this,null,function*(){$().loading_full=!0;const{data:k,error:C,status:y}=yield W("/fin_payment_req",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,y.value==="error"){X().trigger(C);return}a.value=k.value.data,i.value=k.value.data.details});return ne(()=>{let k=0;return i.value.forEach(C=>{C.p_status!="Remove"&&(k+=parseInt(C.amount))}),k}),ne(()=>!1),je(()=>o.show,(k,C)=>{k==!0&&h()},{immediate:!0}),(k,C)=>{const y=Xe;return ae((s(),_("section",nX,[e("div",null,[j(y,{title:"Finance Payment Request",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",rX,[e("div",iX,[e("div",dX,[e("div",_X,[e("table",uX,[cX,e("tbody",pX,[(s(!0),_(ye,null,Ae(t(i),(g,b)=>(s(),_(ye,{key:b},[g.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":b},[e("td",null,l(b+1)+".",1),e("td",fX,[e("div",mX,l(g.id),1)]),e("td",hX,[e("div",bX,l(t(f)(g.amount||0)),1)]),e("td",yX,[e("div",xX,l(g.pvr_no),1)]),e("td",wX,[e("div",gX,l(t(f)(g.pvr_total||0)),1)]),e("td",$X,[e("div",kX,l(g.pv_no),1)]),e("td",jX,[e("div",DX,l(t(f)(g.pv_total||0)),1)])],8,vX)):O("",!0)],64))),128))],512)])])])]),e("div",SX,[e("div",TX,[CX,t(a).val?(s(),_("div",PX,[t(a).val?(s(),_("div",AX," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:C[0]||(C[0]=g=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:C[1]||(C[1]=ze(g=>c(),["prevent"]))}," Validasi ")):O("",!0)])])])],512)),[[Be,n.show]])}}},js=Oe(MX,[["__scopeId","data-v-cc6a53f4"]]),Xxe=Object.freeze(Object.defineProperty({__proto__:null,default:js},Symbol.toStringTag,{value:"Module"})),OX={class:"w-full h-full flex flex-col"},NX={class:"w-full flex grow flex-col overflow-auto h-0"},FX={class:"w-full flex"},IX={action:"#",class:"w-full flex"},YX={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},BX=e("div",{class:"font-bold"}," Tgl Dari ",-1),qX={class:"text-red-500"},UX={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},HX=e("div",{class:"font-bold"}," Tgl Sampai ",-1),zX={class:"text-red-500"},VX={class:"grow p-1"},LX=e("div",{class:"font-bold"}," Keyword ",-1),EX={class:"flex items-end p-1"},RX={class:"w-full flex justify-center items-center grow h-0 p-1"},JX={key:0,class:""},KX={class:"tacky"},GX=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App"),e("th",null,"ID"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),ZX=["onClick"],WX={class:"flex items-center justify-center"},QX={class:"bold"},XX={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="created_at:desc";const a=ke("token"),{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let ee=[];$().loading_full=!0;const{data:ce,error:U,status:I}=yield W("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});return $().loading_full=!1,I.value==="error"?(X().trigger(U),{fin_payment_reqs:ee}):(ee=ce.value.data,{fin_payment_reqs:ee})}),"$u2BOcRLizp")})),o=yield o,x(),o),p=u(r.value.fin_payment_reqs),i=u(""),c=u({field:"created_at",by:"desc"}),h=u(-1),k=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),C=u({}),y=u({from:"",to:""}),g=()=>{d.like="",i.value!=""&&(d.like=`id:%${i.value}%`),d.sort="",c.value.field&&(d.sort=c.value.field+":"+c.value.by),d.date_from=y.value.from?f(y.value.from).format("YYYY-MM-DD"):"",d.date_to=y.value.to?f(y.value.to).format("YYYY-MM-DD"):""},b=u(null),v=()=>Y(this,null,function*(){$().loading_full=!0,k.value.may_get_data=!1,d.page=k.value.page,d.page==1&&(p.value=[]),d.first_row&&delete d.first_row,d.page>1&&(d.first_row=JSON.stringify(p.value[0]));const{data:ee,error:ce,status:U}=yield W("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,k.value.may_get_data=!0,U.value==="error"){X().trigger(ce);return}k.value.page==1?(p.value=ee.value.data,b.value&&(b.value.scrollTop=0)):k.value.page>1&&(p.value=[...p.value,...ee.value.data]),ee.value.data.length==0&&(k.value.is_last_record=!0)}),w=()=>Y(this,null,function*(){if(!k.value.may_get_data)return;let ee=b.value;if(ee.scrollLeft!=k.value.scrollLeft){k.value.scrollLeft=ee.scrollLeft;return}k.value.is_last_record||!(Math.round(ee.scrollTop)+ee.clientHeight>=ee.scrollHeight-1)||(k.value.page++,yield v())}),m=()=>{k.value.page=1,k.value.is_last_record=!1,g(),v()};Ht();const S=u(!1),A=u(0),D=u(0),M=()=>{A.value=0,S.value=!0,D.value=!1},{display:T}=Je();Dt(Je());const q=u(!1),P=u(0),N=()=>{h.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value=p.value[h.value].id,q.value=!0)},L=u(!1),R=u(0),J=()=>{h.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=p.value[h.value].id,L.value=!0)},re=u(!1);u({}),u(!1);const te=u("");return je(()=>te.value,ee=>{ee.trim().length>0?re.value=!0:re.value=!1},{immediate:!1}),(ee,ce)=>{const U=_t,I=gt,Z=Nt,E=Ft,H=Vt("vue-date-picker"),ve=zt,Ie=gl,le=$t,z=ft,G=ws,oe=$s,se=js;return s(),_("div",OX,[j(U,{title:"List Payment Req"}),e("div",NX,[e("div",FX,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[0]||(ce[0]=_e=>M())},[j(I)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[1]||(ce[1]=_e=>N())},[j(Z)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[2]||(ce[2]=_e=>J())},[j(E)])]),e("form",IX,[e("div",YX,[BX,j(ve,null,{default:Q(()=>[j(H,{modelValue:t(y).from,"onUpdate:modelValue":ce[3]||(ce[3]=_e=>t(y).from=_e),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",qX,l(t(C).date_from),1)]),e("div",UX,[HX,j(ve,null,{default:Q(()=>[j(H,{modelValue:t(y).to,"onUpdate:modelValue":ce[4]||(ce[4]=_e=>t(y).to=_e),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",zX,l(t(C).date_to),1)]),e("div",VX,[LX,ae(e("input",{class:"",type:"text","onUpdate:modelValue":ce[5]||(ce[5]=_e=>Ee(i)?i.value=_e:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(i)]])]),e("div",EX,[e("button",{class:"",type:"submit",name:"button",onClick:ce[6]||(ce[6]=ze(_e=>m(),["prevent"]))},[j(Ie,{class:"text-2xl"})])])]),e("div",RX,[t(p).length==0?(s(),_("div",JX," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:b,onScroll:w},[e("table",KX,[GX,e("tbody",null,[(s(!0),_(ye,null,Ae(t(p),(_e,ue)=>(s(),_("tr",{key:ue,onClick:B=>h.value=ue,class:Ue(t(h)==ue?"active":"")},[e("td",null,[e("div",WX,[_e.val?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))])]),e("td",QX,l(_e.id),1),e("td",null,l(_e.created_at?t(f)(_e.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,l(_e.updated_at?t(f)(_e.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,ZX))),128))])])],544))])]),j(G,{show:t(S),fnClose:()=>{S.value=!1},id:t(A),p_data:t(p)},null,8,["show","fnClose","id","p_data"]),j(oe,{show:t(q),fnClose:()=>{q.value=!1},id:t(P)},null,8,["show","fnClose","id"]),j(se,{show:t(L),fnClose:()=>{L.value=!1},id:t(R),p_data:t(p)},null,8,["show","fnClose","id","p_data"])])}})}},ewe=Object.freeze(Object.defineProperty({__proto__:null,default:XX},Symbol.toStringTag,{value:"Module"})),eee={name:"LineMdLoadingTwotoneLoop"},tee={xmlns:"http://www.w3.org/2000/svg",width:"1.5em",height:"1.5em",viewBox:"0 0 24 24"},lee=e("g",{fill:"none",stroke:"currentColor",strokeLinecap:"round",strokeWidth:"2"},[e("path",{strokeDasharray:"60",strokeDashoffset:"60",strokeOpacity:"0.3",stroke:"gray",d:"M12 3C16.9706 3 21 7.02944 21 12C21 16.9706 16.9706 21 12 21C7.02944 21 3 16.9706 3 12C3 7.02944 7.02944 3 12 3Z"},[e("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"1.3s",values:"60;0"})]),e("path",{strokeDasharray:"15",strokeDashoffset:"15",d:"M12 3C16.9706 3 21 7.02944 21 12"},[e("animate",{fill:"freeze",attributeName:"stroke-dashoffset",dur:"0.3s",values:"15;0"}),e("animateTransform",{attributeName:"transform",dur:"1.5s",repeatCount:"indefinite",type:"rotate",values:"0 12 12;360 12 12"})])],-1),aee=e("g",{transform:"translate(4.9,16) scale(0.006017,-0.006017)",fill:"#000000",stroke:"none"},[e("path",{d:`M2115 1166 c-87 -21 -190 -79 -335 -191 -69 -53 -88 -71 -239 -233\r
            l-114 -122 -139 0 c-76 0 -138 2 -138 5 0 23 105 166 205 279 33 37 36 38 81\r
            31 131 -19 238 4 284 63 26 33 25 54 -4 81 -39 36 -115 39 -208 7 l-76 -27\r
            -124 37 c-229 68 -376 77 -538 34 -147 -39 -234 -87 -326 -182 -95 -99 -125\r
            -155 -131 -247 -4 -60 -2 -70 25 -112 76 -118 221 -106 362 31 61 60 82 99 33\r
            60 -102 -78 -105 -80 -154 -80 -42 0 -52 5 -83 36 -106 109 -45 322 114 402\r
            57 28 80 34 172 40 59 4 119 4 135 1 15 -3 64 -12 107 -19 44 -6 86 -16 95\r
            -20 9 -5 46 -19 83 -30 38 -12 68 -23 68 -26 0 -2 -18 -15 -40 -29 -23 -14\r
            -49 -33 -58 -43 -10 -9 -38 -35 -62 -56 -42 -38 -115 -120 -173 -195 -28 -36\r
            -29 -36 -115 -41 -79 -5 -87 -7 -87 -25 0 -18 7 -20 57 -21 32 0 60 -3 63 -6\r
            3 -3 -12 -36 -34 -72 -23 -37 -41 -69 -41 -72 0 -19 -120 -185 -165 -229 -79\r
            -76 -183 -118 -289 -116 -82 1 -140 20 -151 48 -3 10 6 28 25 48 33 34 36 50\r
            18 90 -21 47 -92 69 -141 44 -52 -27 -67 -50 -67 -104 0 -52 19 -90 60 -122\r
            36 -28 161 -45 299 -41 121 4 147 8 231 37 52 18 119 46 148 63 61 35 146 117\r
            195 188 18 25 64 92 102 148 l70 101 131 1 c72 0 133 -3 136 -6 6 -5 -96 -180\r
            -143 -246 -16 -22 -66 -106 -103 -173 -6 -11 -20 -34 -32 -50 -42 -60 -47 -57\r
            98 -53 l133 3 65 130 c185 370 249 476 421 700 74 96 148 169 208 206 15 9 68\r
            27 117 39 88 22 140 21 232 -6 40 -12 24 16 -22 36 -50 23 -159 25 -241 6z\r
            m-451 -99 c10 -7 17 -22 14 -33 -2 -15 -13 -20 -52 -22 -48 -3 -106 13 -106\r
            29 0 15 54 38 91 39 19 0 43 -6 53 -13z`})],-1),see=[lee,aee];function oee(n,o,x,f,d,a){return s(),_("svg",tee,see)}const Ds=Oe(eee,[["render",oee]]),twe=Object.freeze(Object.defineProperty({__proto__:null,default:Ds},Symbol.toStringTag,{value:"Module"})),nee=""+globalThis.__publicAssetsURL("android.png"),ree={class:"flex min-h-full flex-col justify-center px-6 py-12 lg:px-8"},iee=e("div",{class:"sm:mx-auto sm:w-full sm:max-w-sm"},[e("h2",{class:"mt-10 text-center text-2xl font-bold leading-9 tracking-tight text-blue-500"},"Sign in to your account ")],-1),dee={action:"#"},_ee={class:"mt-10 sm:mx-auto sm:w-full sm:max-w-sm"},uee={class:"space-y-6"},cee=e("label",{for:"username",class:"block text-sm font-medium leading-6 text-gray-900"},"Username",-1),pee={class:"mt-2"},vee=["disabled"],fee={class:"sm:text-sm text-red-500"},mee=e("div",{class:"flex items-center justify-between"},[e("label",{for:"password",class:"block text-sm font-medium leading-6 text-gray-900"},"Password"),e("div",{class:"text-sm"})],-1),hee={class:"mt-2"},bee=["disabled"],yee={class:"sm:text-sm text-red-500"},xee=["disabled","onClick"],wee=e("div",{class:"w-full flex justify-center items-center mt-5"},[e("a",{href:"/logistik/driver_w_ast.apk",class:"h-10 block"},[e("img",{src:nee,class:"max-w-full max-h-full"})])],-1),gee={class:"w-full flex justify-center items-center mt-5"},$ee=Lt({__name:"login",setup(n){const{authenticateUser:o}=ot(),{trigger:x}=X(),{authenticated:f,loading:d}=Dt(ot()),a=u({username:"",password:""}),r=u({}),p=Ht();$().loading_full=!1;const i=()=>Y(this,null,function*(){try{r.value={},yield o({username:a.value.username,password:a.value.password}),f.value&&p.push("/")}catch(h){x(h,r)}finally{}}),c=()=>Y(this,null,function*(){$().loading_full=!0,yield W("/clear_cookies",{method:"get",credentials:"include",headers:{},retry:0}),$().loading_full=!1});return(h,k)=>{const C=Ds;return s(),_("div",ree,[iee,e("form",dee,[e("div",_ee,[e("div",uee,[e("div",null,[cee,e("div",pee,[ae(e("input",{disabled:t(d),class:Ue([t(d)?"bg-gray-300":"bg-white-500","block w-full rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-300 sm:text-sm sm:leading-6"]),id:"username",name:"username",type:"text",autocomplete:"username",required:"","onUpdate:modelValue":k[0]||(k[0]=y=>t(a).username=y)},null,10,vee),[[Te,t(a).username]]),e("div",fee,l(t(r).username),1)])]),e("div",null,[mee,e("div",hee,[ae(e("input",{disabled:t(d),class:Ue([t(d)?"bg-gray-300":"bg-white-500","block w-full rounded-md border-0 px-1.5 py-1.5 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-indigo-300 sm:text-sm sm:leading-6"]),id:"password",name:"password",type:"password",autocomplete:"current-password",required:"","onUpdate:modelValue":k[1]||(k[1]=y=>t(a).password=y)},null,10,bee),[[Te,t(a).password]]),e("div",yee,l(t(r).password),1)])]),e("div",null,[e("button",{disabled:t(d),class:Ue([t(d)?"bg-blue-300":"bg-blue-500","flex w-full items-center justify-center rounded-md px-3 py-1.5 text-sm font-semibold leading-6 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"]),onClick:ze(i,["prevent"])},[e("div",{class:Ue([t(d)?"block":"hidden","mr-1"])},[j(C)],2),F(" Sign in ")],10,xee)])]),wee,e("div",gee,[e("button",{onClick:k[2]||(k[2]=ze(y=>c(),["prevent"]))}," CLEAR COOKIE ")])])])])}}}),lwe=Object.freeze(Object.defineProperty({__proto__:null,default:$ee},Symbol.toStringTag,{value:"Module"})),kee={class:"box-fixed"},jee={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Dee={class:"w-full flex flex-col items-center grow overflow-auto"},See={class:"w-full flex flex-row flex-wrap"},Tee={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Cee=e("label",{for:""},"U.Jalan Per",-1),Pee={class:"card-border"},Aee={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Mee=e("label",{for:""},"Jenis",-1),Oee={class:"card-border"},Nee={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Fee=e("label",{for:""},"Payment Method",-1),Iee={class:"card-border"},Yee={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bee=e("label",{for:""},"No Pol",-1),qee={class:"card-border"},Uee={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Hee=e("label",{for:""},"Supir",-1),zee={class:"card-border"},Vee={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Lee=e("label",{for:""},"Kernet",-1),Eee={class:"card-border"},Ree={key:0,class:"w-full flex flex-wrap"},Jee={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Kee=e("label",{for:""},"Tujuan",-1),Gee={class:"card-border"},Zee={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Wee=e("label",{for:""},"Tipe",-1),Qee={class:"card-border"},Xee={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ete=e("label",{for:""},"Total Dari U.Jalan",-1),tte={class:"card-border"},lte={key:1,class:"w-full flex flex-wrap"},ate={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ste=e("label",{for:""},"Cost Center Code",-1),ote={class:"card-border"},nte={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},rte=e("label",{for:""},"Cost Center Desc",-1),ite={class:"card-border"},dte={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},_te=e("label",{for:""},"PVR No",-1),ute={class:"card-border"},cte={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},pte=e("label",{for:""},"PVR Total",-1),vte={class:"card-border"},fte={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},mte=e("label",{for:""},"PV",-1),hte={class:"card-border"},bte={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},yte=e("label",{for:""},"PV Amount",-1),xte={class:"card-border"},wte={class:"w-full flex items-center justify-end"},gte={class:"w-full flex flex-wrap p-3 items-center"},$te=e("div",null," Di Validasi oleh : ",-1),kte={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},jte={key:0},Dte={key:1},Ste={key:2},Tte={key:3},Cte={key:4},Pte={key:5},Ate={__name:"trx_trp_nolog",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:""})),r=ke("token"),p={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:"",note:""},i=u(JSON.parse(JSON.stringify(p))),c=u(JSON.parse(JSON.stringify(p))),h=()=>Y(this,null,function*(){$().loading_full=!0;const{data:k,error:C,status:y}=yield W("/trx_trp_nolog",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,y.value==="error"){X().trigger(C);return}let g=k.value.data;a.value=g,i.value._.id.val=g.supir_id,i.value._.name.val=g.supir,i.value._.rek_no.val=g.supir_rek_no,i.value._.rek_name.val=g.supir_rek_name,i.value.id=g.supir_id,i.value.name=g.supir,i.value.rek_no=(g.supir_rek_no||"")+" "+(g.supir_rek_name||""),c.value._.id.val=g.kernet_id,c.value._.name.val=g.kernet,c.value._.rek_no.val=g.kernet_rek_no,c.value._.rek_name.val=g.kernet_rek_name,c.value.id=g.kernet_id,c.value.name=g.kernet,c.value.rek_no=(g.kernet_rek_no||"")+" "+(g.kernet_rek_name||"");let b=0,v=0;g.potongan.forEach(w=>{w.potongan_mst.employee_id==g.supir_id&&(b+=parseInt(w.nominal_cut)),w.potongan_mst.employee_id==g.kernet_id&&(v+=parseInt(w.nominal_cut))}),i.value.note="",c.value.note="",b>0&&(i.value.note="Telah di potong sebesar :"+K().pointFormat(b)),v>0&&(c.value.note="Telah di potong sebesar :"+K().pointFormat(v))});return je(()=>o.show,(k,C)=>{k==!0&&h()},{immediate:!0}),(k,C)=>{const y=Xe,g=hl;return ae((s(),_("section",kee,[e("div",null,[j(y,{title:"Form Transaction",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",jee,[e("div",Dee,[e("div",See,[e("div",Tee,[Cee,e("div",Pee,l(t(a).tanggal?t(x)(t(a).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",Aee,[Mee,e("div",Oee,l(t(a).jenis),1)]),e("div",Nee,[Fee,e("div",Iee,l(t(a).payment_method.name),1)]),e("div",Yee,[Bee,e("div",qee,l(t(a).no_pol),1)]),e("div",Uee,[Hee,e("div",zee,[j(g,{selected:t(i)},null,8,["selected"])])]),e("div",Vee,[Lee,e("div",Eee,[j(g,{selected:t(c)},null,8,["selected"])])]),t(a).jenis!=""?(s(),_("div",Ree,[e("div",Jee,[Kee,e("div",Gee,l(t(a).xto),1)]),e("div",Zee,[Wee,e("div",Qee,l(t(a).tipe),1)]),e("div",Xee,[ete,e("div",tte,l(t(f)(t(a).amount||0)),1)])])):O("",!0),t(a).jenis!=""?(s(),_("div",lte,[e("div",ate,[ste,e("div",ote,l(t(a).cost_center_code),1)]),e("div",nte,[rte,e("div",ite,l(t(a).cost_center_desc),1)]),e("div",dte,[_te,e("div",ute,l(t(a).pvr_no),1)]),e("div",cte,[pte,e("div",vte,l(t(f)(t(a).pvr_total||0)),1)]),e("div",fte,[mte,e("div",hte,l(t(a).pv_no),1)]),e("div",bte,[yte,e("div",xte,l(t(f)(t(a).pv_total||0)),1)])])):O("",!0)])]),e("div",wte,[e("div",gte,[$te,t(a).val||t(a).val1||t(a).val2||t(a).val3||t(a).val4||t(a).val5?(s(),_("div",kte,[t(a).val?(s(),_("div",jte," App 1 : "+l(t(a).val_by.username)+" ( "+l(t(a).val_at?t(x)(t(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val1?(s(),_("div",Dte," App 2 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val2?(s(),_("div",Ste," App 3 : "+l(t(a).val2_by.username)+" ( "+l(t(a).val2_at?t(x)(t(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val3?(s(),_("div",Tte," App 4 : "+l(t(a).val3_by.username)+" ( "+l(t(a).val3_at?t(x)(t(a).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val4?(s(),_("div",Cte," App 5 : "+l(t(a).val4_by.username)+" ( "+l(t(a).val4_at?t(x)(t(a).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val5?(s(),_("div",Pte," App 6 : "+l(t(a).val5_by.username)+" ( "+l(t(a).val5_at?t(x)(t(a).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:C[0]||(C[0]=b=>n.fnClose())}," Cancel ")])])])],512)),[[Be,n.show]])}}},Ss=Ate,awe=Object.freeze(Object.defineProperty({__proto__:null,default:Ss},Symbol.toStringTag,{value:"Module"})),Mte={class:"w-full h-full flex flex-col"},Ote={class:"w-full flex grow flex-col overflow-auto h-0"},Nte={class:"w-full flex justify-between flex-wrap"},Fte={class:"grow flex"},Ite={class:"m-1"},Yte=Et('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Bte=[Yte],qte={class:"text-xs w-full text-center"},Ute=e("br",null,null,-1),Hte={key:1,class:"text-xs"},zte=e("br",null,null,-1),Vte=e("br",null,null,-1),Lte={key:1,class:"text-xs"},Ete=e("br",null,null,-1),Rte=e("br",null,null,-1),Jte={key:1,class:"text-xs"},Kte=e("br",null,null,-1),Gte=e("br",null,null,-1),Zte={key:2,class:"text-xs"},Wte=e("br",null,null,-1),Qte=e("br",null,null,-1),Xte={key:1,class:"text-xs"},ele=e("br",null,null,-1),tle=e("br",null,null,-1),lle={key:1,class:"text-xs"},ale=e("br",null,null,-1),sle=e("br",null,null,-1),ole={key:1,class:"text-xs"},nle=e("br",null,null,-1),rle=e("br",null,null,-1),ile={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d=P=>P.deleted==1?"!bg-red-400":P.pvr_id>0&&P.req_deleted==1?"!bg-yellow-300":P.pv_id>0?"!bg-blue-300":"",a=P=>(P.map(N=>{N.class_h=d(N)}),P),r=u("pv_not_done");je(()=>r.value,P=>{T.value.map(N=>{let L=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(N.key)>-1;return["all","deleted","req_deleted"].indexOf(P)>-1?L&&(N.tbl_show=1):L&&(N.tbl_show=0),N}),m()},{immediate:!1});const p={};p._TimeZoneOffset=new Date().getTimezoneOffset(),p.sort="tanggal:desc";const i=u({}),c=u({from:"",to:""}),{data:h}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let P=[],N="";const[L,R]=yield Promise.all([W("/trx_trp_nologs",{method:"get",params:{filter_status:r},retry:0})]);return L.status.value!=="error"&&(P=a(L.data.value.data),N=L.data.value.pabrik_name),L.status.value==="error"?(X().trigger(L.error),{trx_trps:P,pabrik_name:N}):($().loading_full=!1,{trx_trps:P,pabrik_name:N})}),"$MmURKklrhv")})),o=yield o,x(),o),k=u(h.value.trx_trps||[]),C=u(h.value.pabrik_name||"");u([]),u(!1);const y=u({field:"tanggal",by:"desc"}),g=u(-1);ne(()=>k.value[g.value]);const b=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),v=()=>{p.like="";let P=JSON.parse(JSON.stringify($()._tv.global_keyword));P!=""&&(p.like=`id:%${P}%,xto:%${P}%,jenis:%${P}%,pv_no:%${P}%,ticket_a_no:%${P}%,ticket_b_no:%${P}%,no_pol:%${P}%,supir:%${P}%,kernet:%${P}%,cost_center_code:%${P}%,cost_center_desc:%${P}%,pvr_no:%${P}%,tanggal:%${P}%,transition_target:%${P}%,uj_asst_opt:%${P}%`),p.sort="",y.value.field&&(p.sort=y.value.field+":"+y.value.by),p.date_from=c.value.from?f(c.value.from).format("YYYY-MM-DD"):"",p.date_to=c.value.to?f(c.value.to).format("YYYY-MM-DD"):"",p.filter_model=JSON.stringify($()._tv.filter_model)},w=()=>Y(this,null,function*(){$().loading_full=!0,i.value={},b.value.may_get_data=!1,p.page=b.value.page,p.page==1&&(k.value=[]),p.first_row&&delete p.first_row,p.page>1&&(p.first_row=JSON.stringify(k.value[0])),p.filter_status=r.value;const{data:P,error:N,status:L}=yield W("/trx_trp_nologs",{method:"get",params:p,retry:0});if($().loading_full=!1,b.value.may_get_data=!0,L.value==="error"){X().trigger(N,i);return}b.value.page==1?k.value=a(P.value.data):b.value.page>1&&(k.value=[...k.value,...a(P.value.data)]),P.value.data.length==0&&(b.value.is_last_record=!0),$()._tv.filter_box=!1}),m=()=>{g.value=-1,b.value.page=1,b.value.is_last_record=!1,v(),w()},{display:S}=Je(),A=u(!1),D=u(0),M=()=>{g.value==-1?S({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(D.value=k.value[g.value].id,A.value=!0)},T=u([{key:"no",label:"No",isai:!0},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm",filter_on:1,class:"text-xs"},{key:"val",label:C.value,childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:$().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),q=ne(()=>g.value>-1);return(P,N)=>{const L=Nt,R=Pl,J=At,re=ft,te=$t,ee=Ot,ce=Ss;return s(),_("div",Mte,[e("div",Ote,[e("div",Nte,[e("div",Fte,[e("div",Ite,[ae(e("select",{class:"","onUpdate:modelValue":N[0]||(N[0]=U=>Ee(r)?r.value=U:null)},Bte,512),[[We,t(r)]])]),t(q)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:N[1]||(N[1]=U=>M())},[j(L)])):O("",!0)])]),j(ee,{thead:t(T),selected:t(g),onSetSelected:N[2]||(N[2]=U=>g.value=U),tbody:t(k),fnCallData:w,scrolling:t(b),onSetScrollingPage:N[3]||(N[3]=U=>t(b).page=U),onDoFilter:N[4]||(N[4]=U=>m())},{absen:Q(({item:U,index:I})=>[U.trx_absens&&U.trx_absens.length>0?(s(),pe(R,{key:0,class:"cursor-pointer",onClick:Z=>P.form_absen(I)},null,8,["onClick"])):O("",!0)]),created_at:Q(({item:U})=>[e("div",qte,[F(l(t(f)(U.created_at).format("DD-MM-YYYY"))+" ",1),Ute,F(" "+l(t(f)(U.created_at).format("HH:mm")),1)])]),val:Q(({item:U})=>{var I;return[U.val?(s(),_("div",Hte,[F(l((I=U.val_by)==null?void 0:I.username)+" ",1),zte,F(" "+l(t(f)(U.val_at).format("DD/MM"))+" ",1),Vte,F(" "+l(t(f)(U.val_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),val1:Q(({item:U})=>{var I;return[U.val1?(s(),_("div",Lte,[F(l((I=U.val1_by)==null?void 0:I.username)+" ",1),Ete,F(" "+l(t(f)(U.val1_at).format("DD/MM"))+" ",1),Rte,F(" "+l(t(f)(U.val1_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),val2:Q(({item:U})=>{var I;return[U.val2?(s(),_("div",Jte,[F(l((I=U.val2_by)==null?void 0:I.username)+" ",1),Kte,F(" "+l(t(f)(U.val2_at).format("DD/MM"))+" ",1),Gte,F(" "+l(t(f)(U.val2_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),val3:Q(({item:U})=>{var I;return[["TBS","TBSK"].indexOf(U.jenis)>-1?(s(),pe(re,{key:0})):U.val3?(s(),_("div",Zte,[F(l((I=U.val3_by)==null?void 0:I.username)+" ",1),Wte,F(" "+l(t(f)(U.val3_at).format("DD/MM"))+" ",1),Qte,F(" "+l(t(f)(U.val3_at).format("HH:mm")),1)])):(s(),pe(J,{key:1}))]}),val4:Q(({item:U})=>{var I;return[U.val4?(s(),_("div",Xte,[F(l((I=U.val4_by)==null?void 0:I.username)+" ",1),ele,F(" "+l(t(f)(U.val4_at).format("DD/MM"))+" ",1),tle,F(" "+l(t(f)(U.val4_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),val5:Q(({item:U})=>{var I;return[U.val5?(s(),_("div",lle,[F(l((I=U.val5_by)==null?void 0:I.username)+" ",1),ale,F(" "+l(t(f)(U.val5_at).format("DD/MM"))+" ",1),sle,F(" "+l(t(f)(U.val5_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),val6:Q(({item:U})=>{var I;return[U.val6?(s(),_("div",ole,[F(l((I=U.val6_by)==null?void 0:I.username)+" ",1),nle,F(" "+l(t(f)(U.val6_at).format("DD/MM"))+" ",1),rle,F(" "+l(t(f)(U.val6_at).format("HH:mm")),1)])):(s(),pe(J,{key:0}))]}),uj_asst_opt:Q(({item:U})=>{var I;return[F(l((I=U.uj)==null?void 0:I.asst_opt),1)]}),payment_method_name:Q(({item:U})=>{var I;return[F(l((I=U.payment_method)==null?void 0:I.name),1)]}),pvr_had_detail:Q(({item:U})=>[U.pvr_had_detail?(s(),pe(re,{key:1})):(s(),pe(te,{key:0}))]),deleted_by_username:Q(({item:U})=>{var I;return[F(l((I=U.deleted_by)==null?void 0:I.username),1)]}),req_deleted_by_username:Q(({item:U})=>{var I;return[F(l((I=U.req_deleted_by)==null?void 0:I.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(ce,{show:t(A),fnClose:()=>{A.value=!1},id:t(D)},null,8,["show","fnClose","id"])])}})}},swe=Object.freeze(Object.defineProperty({__proto__:null,default:ile},Symbol.toStringTag,{value:"Module"})),dle={class:"box-fixed"},_le={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ule={class:"w-full flex flex-col items-center grow overflow-auto"},cle={class:"w-full flex flex-row flex-wrap"},ple={class:"w-full flex flex-col flex-wrap p-1"},vle=e("label",{for:""},"Name",-1),fle={class:"text-red-500"},mle={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap md:overflow-hidden"},hle={class:"w-full max-w-full p-0 md:pr-1 md:w-1/2 md:max-h-full md:overflow-auto"},ble={class:"w-full",role:"sticky"},yle={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},xle=e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"2",class:"!bg-slate-800 text-white font-bold"}," Detail Permission List ")],-1),wle={class:"sticky top-7 !z-[2]"},gle={class:"min-w-[20px] !w-[20px] max-w-[20px]"},$le={class:"w-full flex items-center"},kle={ref:"to_move"},jle={class:"!w-[10px]"},Dle={class:"w-full h-full flex items-center justify-center"},Sle=["onUpdate:modelValue"],Tle={class:"w-full h-full flex items-center justify-start"},Cle={class:"w-full max-w-full max-h-full px-0 py-2 md:pl-1 md:py-0 md:w-1/2 md:overflow-auto"},Ple={class:"w-full",role:"sticky"},Ale={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Mle=e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"2",class:"!bg-slate-800 text-white font-bold"}," Detail Permission User ")],-1),Ole={class:"sticky top-7 !z-[2]"},Nle={class:"min-w-[10px] !w-[10px] max-w-[10px]"},Fle={class:"w-full flex items-center"},Ile={ref:"to_move"},Yle={class:"!w-[10px]"},Ble={class:"w-full h-full flex items-center justify-center"},qle=["onUpdate:modelValue"],Ule={class:"w-full h-full flex items-center justify-start"},Hle={class:"w-full flex items-center justify-end"},zle={__name:"permission_group",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,x={name:"",list:[]},f=u(ie({},x)),d=ke("token"),a=u({}),r=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const A=new FormData;A.append("name",f.value.name),A.append("permission_list",JSON.stringify(C.value)),A.append("users",JSON.stringify(g.value));let D="post",M=o.is_copy?0:o.id;M==0||(A.append("id",M),A.append("_method","PUT"));const{data:T,error:q,status:P}=yield W("/permission_group",{method:D,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:A,retry:0});if($().loading_full=!1,P.value==="error"){X().trigger(q,a);return}if(M<=0)f.value.id=T.value.id,f.value.created_at=T.value.created_at,f.value.updated_at=T.value.updated_at,o.p_data.unshift(f.value);else{f.value.updated_at=T.value.updated_at;let N=o.p_data.map(L=>L.id).indexOf(M);N>-1&&o.p_data.splice(N,1,ie({},f.value))}o.fnClose()}),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:A,error:D,status:M}=yield W("/permission_group",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D);return}f.value=A.value.data,o.is_copy&&(f.value.val=0,f.value.val1=0),A.value.data.details.forEach((T,q)=>{i.value=i.value.map(P=>(P.name==T.permission_list_name&&(P.checked=!0),P))}),A.value.data.users.forEach((T,q)=>{h.value=h.value.map(P=>(P.username==T.username&&(P.checked=!0),P))})}),i=u([]),c=()=>Y(this,null,function*(){$().loading_full=!0;const{data:A,error:D,status:M}=yield W("/permission_lists",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{sort:"name:asc"},retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D);return}i.value=A.value.data.map(T=>(T.checked=!1,T))}),h=u([]),k=()=>Y(this,null,function*(){$().loading_full=!0;const{data:A,error:D,status:M}=yield W("/users",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{sort:"username:asc"},retry:0});if($().loading_full=!1,M.value==="error"){X().trigger(D);return}h.value=A.value.data.map(T=>(T.checked=!1,T))}),C=ne(A=>i.value.filter(D=>D.checked)),y=A=>{C.value.length!=i.value.length?i.value=i.value.map(D=>(D.checked=!0,D)):i.value=i.value.map(D=>(D.checked=!1,D))},g=ne(A=>h.value.filter(D=>D.checked)),b=A=>{g.value.length!=h.value.length?h.value=h.value.map(D=>(D.checked=!0,D)):h.value=h.value.map(D=>(D.checked=!1,D))},v=u(""),w=ne(()=>v.value!=""?i.value.filter(A=>A.name.toLowerCase().includes(v.value.toLowerCase())):i.value),m=u(""),S=ne(()=>m.value!=""?h.value.filter(A=>A.username.toLowerCase().includes(m.value.toLowerCase())):h.value);return je(()=>o.show,(A,D)=>Y(this,null,function*(){A==!0&&(f.value=ie({},x),i.value=[],yield c(),yield k(),o.id!=0&&(yield p()))}),{immediate:!0}),(A,D)=>{const M=Xe;return ae((s(),_("section",dle,[e("div",null,[j(M,{title:"Form Permission Group",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",_le,[e("div",ule,[e("div",cle,[e("div",ple,[vle,ae(e("input",{"onUpdate:modelValue":D[0]||(D[0]=T=>t(f).name=T)},null,512),[[Te,t(f).name]]),e("p",fle,l(t(a).name),1)])]),e("div",mle,[e("div",hle,[e("div",ble,[e("table",yle,[e("thead",null,[xle,e("tr",wle,[e("th",gle,[e("button",{type:"button",name:"button",class:Ue(["text-xs",t(C).length!=t(i).length?"bg-green-500":"bg-red-500"]),onClick:D[1]||(D[1]=T=>y())},l(t(C).length!=t(i).length?"Allow":"Deny"),3)]),e("th",null,[e("div",$le,[ae(e("input",{type:"text","onUpdate:modelValue":D[2]||(D[2]=T=>Ee(v)?v.value=T:null),name:"search",placeholder:"Name"},null,512),[[Te,t(v)]])])])])]),e("tbody",kle,[(s(!0),_(ye,null,Ae(t(w),(T,q)=>(s(),_("tr",{key:q},[e("td",jle,[e("div",Dle,[ae(e("input",{type:"checkbox","onUpdate:modelValue":P=>T.checked=P,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"},null,8,Sle),[[Dl,T.checked]])])]),e("td",null,[e("div",Tle,l(T.name),1)])]))),128))],512)])])]),e("div",Cle,[e("div",Ple,[e("table",Ale,[e("thead",null,[Mle,e("tr",Ole,[e("th",Nle,[e("button",{type:"button",name:"button",class:Ue(["text-xs",t(g).length!=t(h).length?"bg-green-500":"bg-red-500"]),onClick:D[3]||(D[3]=T=>b())},l(t(g).length!=t(h).length?"Allow":"Deny"),3)]),e("th",null,[e("div",Fle,[ae(e("input",{type:"text","onUpdate:modelValue":D[4]||(D[4]=T=>Ee(m)?m.value=T:null),name:"search",placeholder:"Name"},null,512),[[Te,t(m)]])])])])]),e("tbody",Ile,[(s(!0),_(ye,null,Ae(t(S),(T,q)=>(s(),_("tr",{key:q},[e("td",Yle,[e("div",Ble,[ae(e("input",{type:"checkbox","onUpdate:modelValue":P=>T.checked=P,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"},null,8,qle),[[Dl,T.checked]])])]),e("td",null,[e("div",Ule,l(T.username),1)])]))),128))],512)])])])])]),e("div",Hle,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:D[5]||(D[5]=T=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:D[6]||(D[6]=ze(T=>r(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},Ts=zle,owe=Object.freeze(Object.defineProperty({__proto__:null,default:Ts},Symbol.toStringTag,{value:"Module"})),Vle={class:"w-full h-full flex flex-col"},Lle={class:"w-full flex grow flex-col overflow-auto h-0"},Ele={class:"w-full flex"},Rle={action:"#",class:"w-full flex p-1"},Jle={class:"grow"},Kle=e("div",{class:"font-bold"}," Keyword ",-1),Gle={class:"pl-1"},Zle=e("div",{class:"font-bold"}," Sort By ",-1),Wle=e("option",{value:""},null,-1),Qle=e("option",{value:"id"},"ID",-1),Xle=e("option",{value:"name"},"Name",-1),eae=e("option",{value:"tipe"},"Tipe",-1),tae=[Wle,Qle,Xle,eae],lae={class:"pl-1"},aae=e("div",{class:"font-bold"}," Sort Order ",-1),sae=e("option",{value:"asc"},"Asc",-1),oae=e("option",{value:"desc"},"Desc",-1),nae=[sae,oae],rae={class:"flex items-end pl-1"},iae={class:"w-full flex justify-center items-center grow h-0 p-1"},dae={key:0,class:""},_ae={class:"tacky"},uae=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"ID"),e("th",null,"Name")])],-1),cae=["onClick"],pae={class:"bold"},vae={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f={};f._TimeZoneOffset=new Date().getTimezoneOffset(),f.sort="created_at:desc";const d=ke("token"),{data:a}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let P=[];$().loading_full=!0;const{data:N,error:L,status:R}=yield W("/permission_groups",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:f,retry:0});return $().loading_full=!1,R.value==="error"?(X().trigger(L),{permission_groups:P}):(P=N.value.data,{permission_groups:P})}),"$RBOosuv6RL")})),o=yield o,x(),o),r=u(a.value.permission_groups),p=u(""),i=u({field:"created_at",by:"desc"}),c=u(-1),h=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),k=()=>{f.like="",p.value!=""&&(f.like=`id:%${p.value}%,name:%${p.value}%,amount:%${p.value}%`),f.sort="",i.value.field&&(f.sort=i.value.field+":"+i.value.by)},C=u(null),y=()=>Y(this,null,function*(){$().loading_full=!0,h.value.may_get_data=!1,f.page=h.value.page,f.page==1&&(r.value=[]),f.first_row&&delete f.first_row,f.page>1&&(f.first_row=JSON.stringify(r.value[0]));const{data:P,error:N,status:L}=yield W("/permission_groups",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:f,retry:0});if($().loading_full=!1,h.value.may_get_data=!0,L.value==="error"){X().trigger(N);return}h.value.page==1?(r.value=P.value.data,C.value&&(C.value.scrollTop=0)):h.value.page>1&&(r.value=[...r.value,...P.value.data]),P.value.data.length==0&&(h.value.is_last_record=!0)}),g=()=>Y(this,null,function*(){if(!h.value.may_get_data)return;let P=C.value;if(P.scrollLeft!=h.value.scrollLeft){h.value.scrollLeft=P.scrollLeft;return}h.value.is_last_record||!(Math.round(P.scrollTop)+P.clientHeight>=P.scrollHeight-1)||(h.value.page++,yield y())}),b=()=>{h.value.page=1,h.value.is_last_record=!1,k(),y()};Ht();const v=u(!1),w=u(0),m=u(0),S=()=>{w.value=0,v.value=!0,m.value=!1},{display:A}=Je();Dt(Je());const D=()=>{c.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=r.value[c.value].id,v.value=!0,m.value=!1)},M=()=>{c.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=r.value[c.value].id,v.value=!0,m.value=!0)};u(!1),u(0),u(!1);const T=u(!1);u({}),u(!1);const q=u("");return je(()=>q.value,P=>{P.trim().length>0?T.value=!0:T.value=!1},{immediate:!1}),(P,N)=>{const L=_t,R=fl,J=gt,re=Pt,te=gl,ee=Ts;return s(),_("div",Vle,[j(L,{title:"List Permission Group"}),e("div",Lle,[e("div",Ele,[("useUtils"in P?P.useUtils:t(K))().checkPermission("permission_group.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:N[0]||(N[0]=ce=>M())},[j(R)])):O("",!0),("useUtils"in P?P.useUtils:t(K))().checkPermission("permission_group.create")?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:N[1]||(N[1]=ce=>S())},[j(J)])):O("",!0),("useUtils"in P?P.useUtils:t(K))().checkPermission("permission_group.modify")?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:N[2]||(N[2]=ce=>D())},[j(re)])):O("",!0)]),e("form",Rle,[e("div",Jle,[Kle,ae(e("input",{class:"",type:"text","onUpdate:modelValue":N[3]||(N[3]=ce=>Ee(p)?p.value=ce:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(p)]])]),e("div",Gle,[Zle,ae(e("select",{class:"","onUpdate:modelValue":N[4]||(N[4]=ce=>t(i).field=ce)},tae,512),[[We,t(i).field]])]),e("div",lae,[aae,ae(e("select",{class:"","onUpdate:modelValue":N[5]||(N[5]=ce=>t(i).by=ce)},nae,512),[[We,t(i).by]])]),e("div",rae,[e("button",{class:"",type:"submit",name:"button",onClick:N[6]||(N[6]=ze(ce=>b(),["prevent"]))},[j(te,{class:"text-2xl"})])])]),e("div",iae,[t(r).length==0?(s(),_("div",dae," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:C,onScroll:g},[e("table",_ae,[uae,e("tbody",null,[(s(!0),_(ye,null,Ae(t(r),(ce,U)=>(s(),_("tr",{key:U,onClick:I=>c.value=U,class:Ue(t(c)==U?"active":"")},[e("td",pae,l(ce.id),1),e("td",null,l(ce.name),1)],10,cae))),128))])])],544))])]),j(ee,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(r),is_copy:t(m)},null,8,["show","fnClose","id","p_data","is_copy"])])}})}},nwe=Object.freeze(Object.defineProperty({__proto__:null,default:vae},Symbol.toStringTag,{value:"Module"})),fae={name:"MdiCalculator"},mae={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},hae=e("path",{fill:"currentColor",d:"M7 2h10a2 2 0 0 1 2 2v16a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2m0 2v4h10V4zm0 6v2h2v-2zm4 0v2h2v-2zm4 0v2h2v-2zm-8 4v2h2v-2zm4 0v2h2v-2zm4 0v2h2v-2zm-8 4v2h2v-2zm4 0v2h2v-2zm4 0v2h2v-2z"},null,-1),bae=[hae];function yae(n,o,x,f,d,a){return s(),_("svg",mae,bae)}const Cs=Oe(fae,[["render",yae]]),rwe=Object.freeze(Object.defineProperty({__proto__:null,default:Cs},Symbol.toStringTag,{value:"Module"})),xae={class:"box-fixed"},wae={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},gae={class:"w-full flex flex-col items-center grow overflow-auto"},$ae={class:"w-full flex flex-row flex-wrap"},kae={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},jae=e("label",{for:""},"Nominal Potong",-1),Dae={class:"w-full"},Sae={class:"text-red-500"},Tae={class:"w-full flex flex-col flex-wrap p-1"},Cae=e("label",{for:""},"Keterangan",-1),Pae={class:"text-red-500"},Aae={class:"w-full flex items-center justify-end"},Ps={__name:"trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},potongan_mst_id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},emits:["updateRemainingCut"],setup(n,{emit:o}){const x=n,f={id:-1,note:"",nominal_cut:""},d=u(ie({},f)),a=ke("token"),r=u({}),p=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const c=new FormData;c.append("potongan_mst_id",x.potongan_mst_id),c.append("note",d.value.note),c.append("nominal_cut",d.value.nominal_cut);let h="post",k=x.id;k==0||(c.append("id",k),c.append("_method","PUT"));const{data:C,error:y,status:g}=yield W("/potongan_trx",{method:h,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:c,retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y,r);return}if(d.value.updated_at=C.value.updated_at,x.id<=0)d.value.id=C.value.id,d.value.created_at=C.value.created_at,x.p_data.unshift(d.value);else{let b=x.p_data.map(v=>v.id).indexOf(x.id);b>-1&&x.p_data.splice(b,1,ie({},d.value))}o("updateRemainingCut",C.value.remaining_cut),x.fnClose()}),i=()=>Y(this,null,function*(){$().loading_full=!0;const{data:c,error:h,status:k}=yield W("/potongan_trx",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if($().loading_full=!1,k.value==="error"){X().trigger(h);return}d.value=c.value.data});return je(()=>x.show,(c,h)=>{c==!0&&(d.value=ie({},f),r.value={},x.id!=0&&i())},{immediate:!0}),(c,h)=>{const k=Xe,C=dl;return ae((s(),_("section",xae,[e("div",null,[j(k,{title:"Form Potongan Trx",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",wae,[e("div",gae,[e("div",$ae,[e("div",kae,[jae,e("div",Dae,[j(C,{class:"w-full h-full",type:"text",value:t(d).nominal_cut||0,onInput:h[0]||(h[0]=y=>t(d).nominal_cut=y),show:n.show,disabled:t(d).trx_trp_id},null,8,["value","show","disabled"])]),e("p",Sae,l(t(r).ref),1)]),e("div",Tae,[Cae,ae(e("textarea",{"onUpdate:modelValue":h[1]||(h[1]=y=>t(d).note=y),rows:"10"}," ",512),[[Te,t(d).note]]),e("p",Pae,l(t(r).note),1)])])]),e("div",Aae,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:h[2]||(h[2]=y=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:h[3]||(h[3]=ze(y=>p(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},iwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ps},Symbol.toStringTag,{value:"Module"}));const ua=n=>(nt("data-v-7c51f64e"),n=n(),rt(),n),Mae={class:"box-fixed"},Oae={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Nae={class:"w-full flex flex-col items-center grow overflow-auto"},Fae={class:"w-full p-1"},Iae={class:"w-full flex flex-row flex-wrap bg-white"},Yae={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bae=ua(()=>e("label",{for:""},"Nominal Potong",-1)),qae={class:"card-border"},Uae={class:"w-full flex flex-col flex-wrap p-1"},Hae=ua(()=>e("label",{for:""},"Keterangan",-1)),zae={class:"card-border"},Vae={class:"w-full flex items-center justify-end"},Lae={class:"w-full flex flex-wrap p-3 items-center"},Eae=ua(()=>e("div",null," Di Validasi oleh : ",-1)),Rae={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Jae={key:0},Kae={key:1},Gae={__name:"trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),d=u(ie({},{id:-1,kejadian:"",employee:{id:-1,name:""},no_pol:"",nominal:0,nominal_cut:0,remaining_cut:0,status:"Open",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""})),a=ke("token"),r=u({}),p=u(null);u([]);const c=u(JSON.parse(JSON.stringify({_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""}))),h=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const C=new FormData;let y="post",g=o.id;g==0||(C.append("id",g),C.append("_method","PUT"));const{data:b,error:v,status:w}=yield W("/potongan_trx_validasi",{method:y,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:C,retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v,r);return}d.value.val=b.value.val,d.value.val_user=b.value.val_user,d.value.val_by=b.value.val_by,d.value.val_at=b.value.val_at,d.value.val1=b.value.val1,d.value.val1_user=b.value.val1_user,d.value.val1_by=b.value.val1_by,d.value.val1_at=b.value.val1_at;let m=o.p_data.map(S=>S.id).indexOf(o.id);m>-1&&o.p_data.splice(m,1,ie({},d.value)),o.fnClose()}),k=()=>Y(this,null,function*(){var v,w,m,S,A,D,M,T;$().loading_full=!0;const{data:C,error:y,status:g}=yield W("/potongan_trx",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y);return}let b=C.value.data;d.value=b,c.value._.id.val=(v=b.employee)==null?void 0:v.id,c.value._.name.val=(w=b.employee)==null?void 0:w.name,c.value._.rek_no.val=(m=b.employee)==null?void 0:m.rek_no,c.value._.rek_name.val=(S=b.employee)==null?void 0:S.rek_name,c.value.id=(A=b.employee)==null?void 0:A.id,c.value.name=(D=b.employee)==null?void 0:D.name,c.value.rek_no=(((M=b.employee)==null?void 0:M.rek_no)||"")+" "+(((T=b.employee)==null?void 0:T.rek_name)||"")});return je(()=>o.show,(C,y)=>{C==!0&&(o.is_view==!1&&setTimeout(()=>{p.value.focus()},1),k())},{immediate:!0}),(C,y)=>{const g=Xe;return ae((s(),_("section",Mae,[e("div",null,[j(g,{title:"Form Transaction Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Oae,[e("div",Nae,[e("div",Fae,[e("div",Iae,[e("div",Yae,[Bae,e("div",qae,l(("useUtils"in C?C.useUtils:t(K))().pointFormat(t(d).nominal_cut)),1)]),e("div",Uae,[Hae,e("div",zae,l(t(d).note),1)])])])]),e("div",Vae,[e("div",Lae,[Eae,t(d).val||t(d).val1||t(d).val2?(s(),_("div",Rae,[t(d).val?(s(),_("div",Jae," App 1 : "+l(t(d).val_by.username)+" ( "+l(t(d).val_at?t(x)(t(d).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(d).val1?(s(),_("div",Kae," App 2 : "+l(t(d).val1_by.username)+" ( "+l(t(d).val1_at?t(x)(t(d).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:y[0]||(y[0]=b=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:p,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:y[1]||(y[1]=ze(b=>h(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},As=Oe(Gae,[["__scopeId","data-v-7c51f64e"]]),dwe=Object.freeze(Object.defineProperty({__proto__:null,default:As},Symbol.toStringTag,{value:"Module"})),Zae={class:"w-full h-full flex flex-col bg-white"},Wae={class:"w-full flex grow flex-col"},Qae={class:"w-full flex"},Xae={action:"#",class:"w-full flex p-1"},ese={class:"grow"},tse=e("div",{class:"font-bold"}," Keyword ",-1),lse={class:"flex items-end pl-1"},ase={class:"w-full flex justify-center items-center grow p-1"},sse={key:0,class:""},ose={class:"tacky"},nse=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"No"),e("th",null,"App 1"),e("th",null,"App 2"),e("th",null,"ID"),e("th",null,"ID Trx Trp"),e("th",null,"Nominal Potong"),e("th",null,"Note"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),rse=["onClick"],ise={class:"flex items-center justify-center"},dse={class:"flex items-center justify-center"},_se={class:"flex items-center justify-center"},Ms={__name:"part",props:{show:{type:Boolean,required:!0,default:!1},id:{type:Number,required:!1,default:0},is_view:{type:Boolean,required:!1,default:!1}},emits:["updateRemainingCut"],setup(n,{emit:o}){const x=n,{$moment:f}=Ke(),{pointFormat:d}=K(),a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),p=u([]),i=u(""),c=u({field:"created_at",by:"desc"}),h=u(-1),k=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),C=()=>{a.like="",i.value!=""&&(a.like=`id:%${i.value}%,employee_name:%${i.value}%,no_pol:%${i.value}%,info:%${i.value}%,status:%${i.value}%`),a.sort="",c.value.field&&(a.sort=c.value.field+":"+c.value.by)},y=u(null),g=()=>Y(this,null,function*(){$().loading_full=!0,k.value.may_get_data=!1,a.page=k.value.page,a.page==1&&(p.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(p.value[0])),a.potongan_mst_id=x.id;const{data:ee,error:ce,status:U}=yield W("/potongan_trxs",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,k.value.may_get_data=!0,U.value==="error"){X().trigger(ce);return}k.value.page==1?(p.value=ee.value.data,y.value&&(y.value.scrollTop=0)):k.value.page>1&&(p.value=[...p.value,...ee.value.data]),ee.value.data.length==0&&(k.value.is_last_record=!0)}),b=()=>Y(this,null,function*(){if(!k.value.may_get_data)return;let ee=y.value;if(ee.scrollLeft!=k.value.scrollLeft){k.value.scrollLeft=ee.scrollLeft;return}k.value.is_last_record||!(Math.round(ee.scrollTop)+ee.clientHeight>=ee.scrollHeight-1)||(k.value.page++,yield g())}),v=()=>{k.value.page=1,k.value.is_last_record=!1,C(),g()},w=u(!1),m=u(0),S=u(0),A=()=>{m.value=0,w.value=!0,S.value=!1},{display:D}=Je(),M=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(m.value=p.value[h.value].id,w.value=!0,S.value=!1)},T=u(!1),q=u(0),P=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=p.value[h.value].id,T.value=!0)},N=u(!1),L=u({}),R=u(!1),J=u(""),re=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(J.value="",L.value={id:p.value[h.value].id},R.value=!0)};je(()=>J.value,ee=>{ee.trim().length>0?N.value=!0:N.value=!1},{immediate:!1});const te=()=>Y(this,null,function*(){$().loading_full=!0;const ee=new FormData;ee.append("potongan_mst_id",x.id);const{data:ce,error:U,status:I}=yield W("/potongan_trx_recalculate",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:ee,retry:0});if($().loading_full=!1,I.value==="error"){X().trigger(U);return}o("updateRemainingCut",ce.value.remaining_cut)});return je(()=>x.show,(ee,ce)=>Y(this,null,function*(){ee==!0&&x.id!=0&&g()}),{immediate:!0}),(ee,ce)=>{const U=gt,I=Pt,Z=Zt,E=Ft,H=Cs,ve=gl,Ie=$t,le=ft,z=Ps,G=As;return s(),_("div",Zae,[e("div",Wae,[e("div",Qae,[!n.is_view&&("useUtils"in ee?ee.useUtils:t(K))().checkPermission("potongan_trx.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[0]||(ce[0]=oe=>A())},[j(U)])):O("",!0),!n.is_view&&("useUtils"in ee?ee.useUtils:t(K))().checkPermissions(["potongan_trx.modify"])&&t(h)>-1?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[1]||(ce[1]=oe=>M())},[j(I)])):O("",!0),("useUtils"in ee?ee.useUtils:t(K))().checkPermission("potongan_trx.remove")?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[2]||(ce[2]=oe=>re())},[j(Z)])):O("",!0),!n.is_view&&("useUtils"in ee?ee.useUtils:t(K))().checkPermissions(["potongan_trx.val","potongan_trx.val1"])?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[3]||(ce[3]=oe=>P())},[j(E)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[4]||(ce[4]=oe=>te())},[j(H)])]),e("form",Xae,[e("div",ese,[tse,ae(e("input",{class:"",type:"text","onUpdate:modelValue":ce[5]||(ce[5]=oe=>Ee(i)?i.value=oe:null),name:"search",placeholder:"Keyword"},null,512),[[Te,t(i)]])]),e("div",lse,[e("button",{class:"",type:"submit",name:"button",onClick:ce[6]||(ce[6]=ze(oe=>v(),["prevent"]))},[j(ve,{class:"text-2xl"})])])]),e("div",ase,[t(p).length==0?(s(),_("div",sse," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:y,onScroll:b},[e("table",ose,[nse,e("tbody",null,[(s(!0),_(ye,null,Ae(t(p),(oe,se)=>(s(),_("tr",{key:se,onClick:_e=>h.value=se,class:Ue(t(h)==se?"active":"")},[e("td",null,[e("div",ise,l(se+1),1)]),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},[e("div",dse,[oe.val?(s(),pe(le,{key:1})):(s(),pe(Ie,{key:0}))])],2),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},[e("div",_se,[oe.val1?(s(),pe(le,{key:1})):(s(),pe(Ie,{key:0}))])],2),e("td",{class:Ue([oe.deleted?"!bg-red-500":"","bold"])},l(oe.id),3),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},l(oe.trx_trp_id),3),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},l(t(d)(oe.nominal_cut)),3),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},l(oe.note),3),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},l(oe.created_at?t(f)(oe.created_at).format("DD-MM-Y HH:mm:ss"):""),3),e("td",{class:Ue(oe.deleted?"!bg-red-500":"")},l(oe.updated_at?t(f)(oe.updated_at).format("DD-MM-Y HH:mm:ss"):""),3)],10,rse))),128))])])],544))])]),j(z,{show:t(w),fnClose:()=>{w.value=!1},id:t(m),potongan_mst_id:x.id,p_data:t(p),onUpdateRemainingCut:ce[7]||(ce[7]=oe=>ee.$emit("updateRemainingCut",oe))},null,8,["show","fnClose","id","potongan_mst_id","p_data"]),j(G,{show:t(T),fnClose:()=>{T.value=!1},id:t(q),p_data:t(p)},null,8,["show","fnClose","id","p_data"])])}}},_we=Object.freeze(Object.defineProperty({__proto__:null,default:Ms},Symbol.toStringTag,{value:"Module"}));const vl=n=>(nt("data-v-8d953dd7"),n=n(),rt(),n),use={class:"box-fixed"},cse={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-slate-200"},pse={class:"w-full flex flex-col items-center grow overflow-auto"},vse={class:"w-full p-1"},fse={class:"w-full flex flex-row flex-wrap bg-white"},mse={class:"w-full flex flex-col flex-wrap p-1"},hse=vl(()=>e("label",{for:""},"Kejadian",-1)),bse=["disabled"],yse={class:"text-red-500"},xse={class:"w-full sm:w-9/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},wse=vl(()=>e("label",{for:""},"Pekerja",-1)),gse={class:"text-red-500"},$se={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},kse=vl(()=>e("label",{for:""},"No Pol",-1)),jse=["disabled"],Dse={id:"vehicle"},Sse=["value"],Tse={class:"text-red-500"},Cse={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pse=vl(()=>e("label",{for:""},"Nominal",-1)),Ase={class:"w-full"},Mse={class:"text-red-500"},Ose={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nse=vl(()=>e("label",{for:""},"Nominal Potong",-1)),Fse={class:"w-full"},Ise={class:"text-red-500"},Yse={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bse=vl(()=>e("label",{for:""},"Sisa Potongan",-1)),qse={class:"card-border"},Use={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hse=vl(()=>e("label",{for:""},"Status",-1)),zse=["disabled"],Vse=vl(()=>e("option",{value:"Open"},"Open",-1)),Lse=vl(()=>e("option",{value:"Close Clear"},"Close Clear",-1)),Ese=vl(()=>e("option",{value:"Close UnClear"},"Close UnClear",-1)),Rse=[Vse,Lse,Ese],Jse={class:"text-red-500"},Kse={class:"w-full flex flex-col flex-wrap p-1"},Gse={class:"text-red-500"},Zse={class:"w-full flex flex-col flex-wrap p-1"},Wse={class:"text-red-500"},Qse={class:"w-full flex flex-row flex-wrap p-1 justify-end"},Xse={key:0,class:"w-full h-full p-1"},eoe={class:"w-full flex items-center justify-end bg-white"},toe={__name:"mst",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,x={id:-1,kejadian:"",employee:{id:-1,name:""},no_pol:"",nominal:0,nominal_cut:0,remaining_cut:0,status:"Open",attachment_1:"",attachment_1_preview:"",attachment_2:"",attachment_2_preview:"",val_at:"",val:0,val1:0},f=u([]);u({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""}),JSON.parse(JSON.stringify(x));const d=u(JSON.parse(JSON.stringify(x))),a=ke("token"),r=u({}),p=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const S=new FormData;S.append("kejadian",d.value.kejadian),S.append("nominal",d.value.nominal),S.append("nominal_cut",d.value.nominal_cut),S.append("status",d.value.status),S.append("employee_id",c.value.id),S.append("no_pol",d.value.no_pol),S.append("attachment_1",d.value.attachment_1),S.append("attachment_1_preview",d.value.attachment_1_preview),S.append("attachment_2",d.value.attachment_2),S.append("attachment_2_preview",d.value.attachment_2_preview);let A="post",D=o.id;D==0||(S.append("id",D),S.append("_method","PUT"));const{data:M,error:T,status:q}=yield W("/potongan_mst",{method:A,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:S,retry:0});if($().loading_full=!1,q.value==="error"){X().trigger(T,r);return}if(d.value.employee.id=c.value.id,d.value.employee.name=c.value.name,d.value.remaining_cut=M.value.remaining_cut,d.value.updated_at=M.value.updated_at,o.id<=0)d.value.id=M.value.id,d.value.created_at=M.value.created_at,o.p_data.unshift(d.value);else{let P=o.p_data.map(N=>N.id).indexOf(o.id);P>-1&&o.p_data.splice(P,1,ie({},d.value))}o.fnClose()}),i={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:""},c=u(JSON.parse(JSON.stringify(i))),h=ne(()=>{let S=[];return w.value.forEach((A,D)=>{let M=JSON.parse(JSON.stringify(i));M._.id.val=A.id,M._.name.val=A.name,M._.rek_no.val=A.rek_no,M._.rek_name.val=A.rek_name,M.id=A.id,M.name=A.name,M.title=(A.rek_no||"")+" "+(A.rek_name||""),S.push(JSON.parse(JSON.stringify(M)))}),S}),k=ne(()=>d.value.val1==1||o.is_view),C=ne(()=>d.value.val_at!=""||o.is_view),y=()=>Y(this,null,function*(){var T,q,P,N,L,R,J,re;$().loading_full=!0;const{data:S,error:A,status:D}=yield W("/potongan_mst",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A);return}let M=S.value.data;d.value=M,ie({},M),c.value._.id.val=(T=M.employee)==null?void 0:T.id,c.value._.name.val=(q=M.employee)==null?void 0:q.name,c.value._.rek_no.val=(P=M.employee)==null?void 0:P.rek_no,c.value._.rek_name.val=(N=M.employee)==null?void 0:N.rek_name,c.value.id=(L=M.employee)==null?void 0:L.id,c.value.name=(R=M.employee)==null?void 0:R.name,c.value.rek_no=(((J=M.employee)==null?void 0:J.rek_no)||"")+" "+(((re=M.employee)==null?void 0:re.rek_name)||"")}),g=u([]),b=u([]),v=u([]),w=u([]),m=()=>Y(this,null,function*(){$().loading_full=!0;const{data:S,error:A,status:D}=yield W("/potongan_mst_load_local",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A);return}g.value=S.value.list_potongan_mst,b.value=S.value.list_xto,v.value=S.value.list_vehicle,w.value=S.value.list_employee});return je(()=>o.show,(S,A)=>Y(this,null,function*(){S==!0&&(o.is_view||(yield m()),d.value=JSON.parse(JSON.stringify(x)),c.value=JSON.parse(JSON.stringify(i)),f.value=[],r.value={},o.id!=0&&y())}),{immediate:!0}),(S,A)=>{const D=Xe,M=$l,T=dl,q=Xt,P=Ms;return ae((s(),_("section",use,[e("div",null,[j(D,{title:"Form Potongan",fn:n.fnClose,class:"w-full flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",cse,[e("div",pse,[e("div",vse,[e("div",fse,[e("div",mse,[hse,ae(e("textarea",{"onUpdate:modelValue":A[0]||(A[0]=N=>t(d).kejadian=N),rows:"10",disabled:t(k)}," ",8,bse),[[Te,t(d).kejadian]]),e("p",yse,l(t(r).kejadian),1)]),e("div",xse,[wse,j(M,{arr:t(h),selected:t(c),pure:i,onSetSelected:A[1]||(A[1]=N=>c.value=N),disabled:t(C)},null,8,["arr","selected","disabled"]),e("p",gse,l(t(r).employee_id),1)]),e("div",$se,[kse,ae(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":A[2]||(A[2]=N=>t(d).no_pol=N),disabled:t(C)},null,8,jse),[[Te,t(d).no_pol]]),e("datalist",Dse,[(s(!0),_(ye,null,Ae(t(v),N=>(s(),_("option",{value:N.no_pol},l(N.no_pol),9,Sse))),256))]),e("p",Tse,l(t(r).no_pol),1)]),e("div",Cse,[Pse,e("div",Ase,[j(T,{class:"w-full h-full",type:"text",value:t(d).nominal||0,onInput:A[3]||(A[3]=N=>t(d).nominal=N),show:n.show,disabled:t(C)},null,8,["value","show","disabled"])]),e("p",Mse,l(t(r).ref),1)]),e("div",Ose,[Nse,e("div",Fse,[j(T,{class:"w-full h-full",type:"text",value:t(d).nominal_cut||0,onInput:A[4]||(A[4]=N=>t(d).nominal_cut=N),show:n.show,disabled:t(k)},null,8,["value","show","disabled"])]),e("p",Ise,l(t(r).ref),1)]),e("div",Yse,[Bse,e("div",qse,l(("useUtils"in S?S.useUtils:t(K))().pointFormat(t(d).remaining_cut)),1)]),e("div",Use,[Hse,ae(e("select",{"onUpdate:modelValue":A[5]||(A[5]=N=>t(d).status=N),disabled:t(k)},Rse,8,zse),[[We,t(d).status]]),e("p",Jse,l(t(r).ref),1)]),e("div",Kse,[j(q,{label:"Lampiran Pertama",value:t(d).attachment_1_preview,onSetFile:A[6]||(A[6]=N=>t(d).attachment_1=N),onSetPreview:A[7]||(A[7]=N=>t(d).attachment_1_preview=N),can_remove:!t(C)},null,8,["value","can_remove"]),e("p",Gse,l(t(r).attachment_1),1)]),e("div",Zse,[j(q,{label:"Lampiran Lanjutan",value:t(d).attachment_2_preview,onSetFile:A[8]||(A[8]=N=>t(d).attachment_2=N),onSetPreview:A[9]||(A[9]=N=>t(d).attachment_2_preview=N),can_remove:!t(k)},null,8,["value","can_remove"]),e("p",Wse,l(t(r).attachment_2),1)]),e("div",Qse,[t(k)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:A[10]||(A[10]=ze(N=>p(),["prevent"]))}," Save "))])])]),t(k)?(s(),_("div",Xse,[j(P,{id:n.id,show:n.show,onUpdateRemainingCut:A[11]||(A[11]=N=>t(d).remaining_cut=N),is_view:n.is_view},null,8,["id","show","is_view"])])):O("",!0)]),e("div",eoe,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:A[12]||(A[12]=N=>n.fnClose())}," Close ")])])])],512)),[[Be,n.show]])}}},Os=Oe(toe,[["__scopeId","data-v-8d953dd7"]]),uwe=Object.freeze(Object.defineProperty({__proto__:null,default:Os},Symbol.toStringTag,{value:"Module"}));const Yl=n=>(nt("data-v-db465220"),n=n(),rt(),n),loe={class:"box-fixed"},aoe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},soe={class:"w-full flex flex-col items-center grow overflow-auto"},ooe={class:"w-full p-1"},noe={class:"w-full flex flex-row flex-wrap bg-white"},roe={class:"w-full flex flex-col flex-wrap p-1"},ioe=Yl(()=>e("label",{for:""},"Kejadian",-1)),doe={class:"card-border"},_oe={class:"w-full sm:w-9/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},uoe=Yl(()=>e("label",{for:""},"Pekerja",-1)),coe={class:"card-border"},poe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},voe=Yl(()=>e("label",{for:""},"No Pol",-1)),foe={class:"card-border"},moe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},hoe=Yl(()=>e("label",{for:""},"Nominal",-1)),boe={class:"card-border"},yoe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-3/12 flex flex-col flex-wrap p-1"},xoe=Yl(()=>e("label",{for:""},"Nominal Potong",-1)),woe={class:"card-border"},goe={class:"w-full flex flex-col flex-wrap p-1"},$oe={class:"w-full flex flex-col flex-wrap p-1"},koe={class:"w-full flex items-center justify-end"},joe={class:"w-full flex flex-wrap p-3 items-center"},Doe=Yl(()=>e("div",null," Di Validasi oleh : ",-1)),Soe={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Toe={key:0},Coe={key:1},Poe={__name:"validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),f={id:-1,kejadian:"",employee:{id:-1,name:""},no_pol:"",nominal:0,nominal_cut:0,remaining_cut:0,status:"Open",attachment_1:"",attachment_1_preview:"",attachment_2:"",attachment_2_preview:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""},d=u(ie({},f)),a=ke("token"),r=u({}),p=u(null);u([]);const c=u(JSON.parse(JSON.stringify({_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""}))),h=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const C=new FormData;let y="post",g=o.id;g==0||(C.append("id",g),C.append("_method","PUT"));const{data:b,error:v,status:w}=yield W("/potongan_mst_validasi",{method:y,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:C,retry:0});if($().loading_full=!1,w.value==="error"){X().trigger(v,r);return}d.value.val=b.value.val,d.value.val_user=b.value.val_user,d.value.val_by=b.value.val_by,d.value.val_at=b.value.val_at,d.value.val1=b.value.val1,d.value.val1_user=b.value.val1_user,d.value.val1_by=b.value.val1_by,d.value.val1_at=b.value.val1_at;let m=o.p_data.map(S=>S.id).indexOf(o.id);m>-1&&o.p_data.splice(m,1,ie({},d.value)),o.fnClose()}),k=()=>Y(this,null,function*(){var v,w,m,S,A,D,M,T;$().loading_full=!0;const{data:C,error:y,status:g}=yield W("/potongan_mst",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,g.value==="error"){X().trigger(y);return}let b=C.value.data;d.value=b,c.value._.id.val=(v=b.employee)==null?void 0:v.id,c.value._.name.val=(w=b.employee)==null?void 0:w.name,c.value._.rek_no.val=(m=b.employee)==null?void 0:m.rek_no,c.value._.rek_name.val=(S=b.employee)==null?void 0:S.rek_name,c.value.id=(A=b.employee)==null?void 0:A.id,c.value.name=(D=b.employee)==null?void 0:D.name,c.value.rek_no=(((M=b.employee)==null?void 0:M.rek_no)||"")+" "+(((T=b.employee)==null?void 0:T.rek_name)||"")});return je(()=>o.show,(C,y)=>{C==!0&&(d.value=JSON.parse(JSON.stringify(f)),o.is_view==!1&&setTimeout(()=>{p.value.focus()},1),k())},{immediate:!0}),(C,y)=>{const g=Xe,b=hl,v=Xt;return ae((s(),_("section",loe,[e("div",null,[j(g,{title:"Form Transaction Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",aoe,[e("div",soe,[e("div",ooe,[e("div",noe,[e("div",roe,[ioe,e("div",doe,l(t(d).kejadian),1)]),e("div",_oe,[uoe,e("div",coe,[j(b,{selected:t(c)},null,8,["selected"])])]),e("div",poe,[voe,e("div",foe,l(t(d).no_pol),1)]),e("div",moe,[hoe,e("div",boe,l(("useUtils"in C?C.useUtils:t(K))().pointFormat(t(d).nominal)),1)]),e("div",yoe,[xoe,e("div",woe,l(("useUtils"in C?C.useUtils:t(K))().pointFormat(t(d).nominal_cut)),1)]),e("div",goe,[j(v,{label:"Lampiran Pertama",value:t(d).attachment_1_preview,onSetFile:y[0]||(y[0]=w=>t(d).attachment_1=w),onSetPreview:y[1]||(y[1]=w=>t(d).attachment_1_preview=w)},null,8,["value"])]),e("div",$oe,[j(v,{label:"Lampiran Lanjutan",value:t(d).attachment_2_preview,onSetFile:y[2]||(y[2]=w=>t(d).attachment_2=w),onSetPreview:y[3]||(y[3]=w=>t(d).attachment_2_preview=w)},null,8,["value"])])])])]),e("div",koe,[e("div",joe,[Doe,t(d).val||t(d).val1||t(d).val2?(s(),_("div",Soe,[t(d).val?(s(),_("div",Toe," App 1 : "+l(t(d).val_by.username)+" ( "+l(t(d).val_at?t(x)(t(d).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(d).val1?(s(),_("div",Coe," App 2 : "+l(t(d).val1_by.username)+" ( "+l(t(d).val1_at?t(x)(t(d).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:y[4]||(y[4]=w=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:p,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:y[5]||(y[5]=ze(w=>h(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},Ns=Oe(Poe,[["__scopeId","data-v-db465220"]]),cwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ns},Symbol.toStringTag,{value:"Module"})),Aoe={class:"w-full h-full flex flex-col"},Moe={class:"w-full flex grow flex-col overflow-auto h-0"},Ooe={class:"w-full flex justify-between flex-wrap"},Noe={class:"grow flex"},Foe={class:"m-1"},Ioe=e("option",{value:"undone"},"Undone",-1),Yoe=e("option",{value:"done"},"Done",-1),Boe=e("option",{value:"deleted"},"Trash",-1),qoe=e("option",{value:"all"},"All",-1),Uoe=[Ioe,Yoe,Boe,qoe],Hoe={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=U=>U.deleted==1?"!bg-red-400":U.val>0&&U.val1>0&&U.remaining_cut==0?"!bg-blue-300":"",d=u("undone");je(()=>d.value,U=>{b()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let U=[];$().loading_full=!0;const{data:I,error:Z,status:E}=yield W("/potongan_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,E.value==="error"?(X().trigger(Z),{potongan_msts:U}):(U=I.value.data,{potongan_msts:U})}),"$4H5grU4zhJ")})),o=yield o,x(),o),i=u(p.value.potongan_msts);u("");const c=u({field:"created_at",by:"desc"}),h=u(-1),k=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),C=ne(()=>i.value[h.value]),y=()=>{a.like="";let U=JSON.parse(JSON.stringify($()._tv.global_keyword));U!=""&&(a.like=`id:%${U}%,employee_name:%${U}%,no_pol:%${U}%,kejadian:%${U}%,status:%${U}%`),a.sort="",c.value.field&&(a.sort=c.value.field+":"+c.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)};u(null);const g=()=>Y(this,null,function*(){$().loading_full=!0,k.value.may_get_data=!1,a.page=k.value.page,a.page==1&&(i.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(i.value[0])),a.filter_status=d.value;const{data:U,error:I,status:Z}=yield W("/potongan_msts",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,k.value.may_get_data=!0,Z.value==="error"){X().trigger(I);return}k.value.page==1?i.value=U.value.data:k.value.page>1&&(i.value=[...i.value,...U.value.data]),U.value.data.length==0&&(k.value.is_last_record=!0),$()._tv.filter_box=!1}),b=()=>{h.value=-1,k.value.page=1,k.value.is_last_record=!1,y(),g()};Ht();const v=u(!1),w=u(0),m=u(0),S=u(!1),A=()=>{w.value=0,S.value=!1,m.value=!1,v.value=!0},{display:D}=Je();Dt(Je());const M=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=i.value[h.value].id,S.value=!1,m.value=!1,v.value=!0)},T=u(!1),q=u(0),P=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=i.value[h.value].id,S.value=!0,m.value=!1,T.value=!0)},N=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=i.value[h.value].id,S.value=!0,m.value=!1,v.value=!0)},L=u(!1);u({}),u(!1);const R=u("");je(()=>R.value,U=>{U.trim().length>0?L.value=!0:L.value=!1},{immediate:!1});const J=u([{key:"no",label:"No",isai:!0},{key:"valx",label:"APP",childs:[{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:1,type:"desc"}},{key:"employee_name",label:"Nama Pekerja",freeze:1,filter_on:1,type:"string"},{key:"no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"kejadian",label:"Kejadian",filter_on:1,type:"string"},{key:"nominal",label:"Nominal",class:" justify-end",type:"number"},{key:"nominal_cut",label:"Nominal Potongan",class:" justify-end",type:"number"},{key:"remaining_cut",label:"Sisa Potongan",class:" justify-end",type:"number"},{key:"status",label:"Status",class:" justify-end",type:"number"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]);ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&K().checkPermission("potongan_mst.create"));const re=ne(()=>["undone","done","deleted","all"].indexOf(d.value)>-1&&K().checkPermission("potongan_mst.create")),te=ne(()=>h.value>-1&&K().checkPermission("potongan_mst.view")),ee=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&K().checkPermissions(["potongan_mst.modify","potongan_trx.create","potongan_trx.modify","potongan_trx.remove"])),ce=ne(()=>h.value>-1&&[void 0,0].indexOf(C.value.deleted)>-1&&(K().checkPermission("potongan_mst.val")&&[void 0,0].indexOf(C.value.val)>-1||K().checkPermission("potongan_mst.val1")&&[void 0,0].indexOf(C.value.val1)>-1));return ne(()=>h.value>-1&&K().checkPermission("potongan_mst.remove")&&[void 0,0].indexOf(C.value.deleted)>-1),(U,I)=>{const Z=_t,E=gt,H=Pt,ve=Nt,Ie=Ft,le=$t,z=ft,G=Ot,oe=Os,se=Ns;return s(),_("div",Aoe,[j(Z,{title:"List Potongan"}),e("div",Moe,[e("div",Ooe,[e("div",Noe,[e("div",Foe,[ae(e("select",{class:"","onUpdate:modelValue":I[0]||(I[0]=_e=>Ee(d)?d.value=_e:null)},Uoe,512),[[We,t(d)]])]),t(re)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[1]||(I[1]=_e=>A())},[j(E)])):O("",!0),t(ee)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[2]||(I[2]=_e=>M())},[j(H)])):O("",!0),t(te)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[3]||(I[3]=_e=>N())},[j(ve)])):O("",!0),t(ce)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[4]||(I[4]=_e=>P())},[j(Ie)])):O("",!0)])]),j(G,{thead:t(J),selected:t(h),onSetSelected:I[5]||(I[5]=_e=>h.value=_e),tbody:t(i),fnCallData:g,scrolling:t(k),onSetScrollingPage:I[6]||(I[6]=_e=>t(k).page=_e),onDoFilter:I[7]||(I[7]=_e=>b()),rowBgColor:f},{val:Q(({item:_e})=>[_e.val?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val1:Q(({item:_e})=>[_e.val1?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),employee_name:Q(({item:_e})=>{var ue;return[F(l((ue=_e.employee)==null?void 0:ue.name),1)]}),deleted_by_username:Q(({item:_e})=>{var ue;return[F(l((ue=_e.deleted_by)==null?void 0:ue.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(oe,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(i),is_copy:t(m),is_view:t(S)},null,8,["show","fnClose","id","p_data","is_copy","is_view"]),j(se,{show:t(T),fnClose:()=>{T.value=!1},id:t(q),p_data:t(i)},null,8,["show","fnClose","id","p_data"])])}})}},pwe=Object.freeze(Object.defineProperty({__proto__:null,default:Hoe},Symbol.toStringTag,{value:"Module"})),zoe={name:"PhCaretLeft"},Voe={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Loe=e("path",{fill:"currentColor",d:"M165.66 202.34a8 8 0 0 1-11.32 11.32l-80-80a8 8 0 0 1 0-11.32l80-80a8 8 0 0 1 11.32 11.32L91.31 128Z"},null,-1),Eoe=[Loe];function Roe(n,o,x,f,d,a){return s(),_("svg",Voe,Eoe)}const Fs=Oe(zoe,[["render",Roe]]),vwe=Object.freeze(Object.defineProperty({__proto__:null,default:Fs},Symbol.toStringTag,{value:"Module"})),Joe={class:"w-full flex min-h-[2rem] items-center bg-slate-600 p-1 sm:pl-1 text-white"},Koe={class:"",style:{"padding-left":"10px"}},ca=Lt({__name:"HeaderCustom",props:{title:{type:String,required:!1,default:""},back:{type:Boolean,required:!0},fn:{type:Function,required:!1}},setup(n){const o=n,x=Ht(),f=()=>{o.fn?o.fn():x.go(-1)};return(d,a)=>{const r=Fs;return s(),_("div",Joe,[n.back?(s(),_("div",{key:0,class:"text-center w-10 cursor-pointer",onClick:a[0]||(a[0]=p=>f())},[j(r,{class:"text-2xl text-white"})])):O("",!0),e("div",Koe,l(n.title||" "),1)])}}}),fwe=Object.freeze(Object.defineProperty({__proto__:null,default:ca},Symbol.toStringTag,{value:"Module"})),Goe={class:"w-full h-full flex flex-col"},Zoe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Woe={class:"w-full align-items-center justify-content-center grow overflow-auto"},Qoe={class:"w-full flex flex-col flex-wrap p-1"},Xoe=e("label",{for:""},"Old Password",-1),ene={class:"text-red-500"},tne={class:"w-full flex flex-col flex-wrap p-1"},lne=e("label",{for:""},"New Password",-1),ane={class:"text-red-500"},sne={class:"w-full flex flex-col flex-wrap p-1"},one=e("label",{for:""},"Confirm Password",-1),nne={class:"text-red-500"},rne={class:"w-full flex items-center justify-end"},ine=Lt({__name:"change_password",setup(n){ot(),u(!1);const o=ke("token"),x=u({});Ht(),ja(),$().loading_full=!1;const f=u({old_password:"",password:"",password_confirmation:""}),d=()=>Y(this,null,function*(){$().loading_full=!0,x.value={};const a=new FormData;a.append("old_password",f.value.old_password),a.append("password",f.value.password),a.append("password_confirmation",f.value.password_confirmation),a.append("_method","PUT");let r="post";const{data:p,error:i,status:c}=yield W("/change_password",{method:r,headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},body:a,retry:0});if($().loading_full=!1,c.value==="error"){X().trigger(i,x);return}else Je().display({show:!0,status:"Success",message:p.value.message})});return(a,r)=>{const p=ca;return s(),_("div",Goe,[j(p,{title:"Change Password",back:!0}),e("form",Zoe,[e("div",Woe,[e("div",Qoe,[Xoe,ae(e("input",{class:"",type:"password","onUpdate:modelValue":r[0]||(r[0]=i=>t(f).old_password=i)},null,512),[[Te,t(f).old_password]]),e("p",ene,l(t(x).old_password),1)]),e("div",tne,[lne,ae(e("input",{class:"",type:"password","onUpdate:modelValue":r[1]||(r[1]=i=>t(f).password=i)},null,512),[[Te,t(f).password]]),e("p",ane,l(t(x).password),1)]),e("div",sne,[one,ae(e("input",{class:"",type:"password","onUpdate:modelValue":r[2]||(r[2]=i=>t(f).password_confirmation=i)},null,512),[[Te,t(f).password_confirmation]]),e("p",nne,l(t(x).password_confirmation),1)])]),e("div",rne,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[3]||(r[3]=i=>a.$router.go(-1))}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[4]||(r[4]=ze(i=>d(),["prevent"]))}," Save ")])])])}}}),mwe=Object.freeze(Object.defineProperty({__proto__:null,default:ine},Symbol.toStringTag,{value:"Module"})),dne={class:"w-full h-full flex flex-col"},_ne={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},une={class:"w-full align-items-center justify-content-center grow overflow-auto"},cne={class:"w-full flex flex-col flex-wrap p-1"},pne=e("label",{for:"username"},"Username",-1),vne={class:"text-red-500"},fne={class:"w-full flex flex-col flex-wrap p-1"},mne=e("label",{for:"fullname"},"Nama Identitas",-1),hne={class:"text-red-500"},bne={class:"w-full flex flex-col flex-wrap p-1"},yne=e("label",{for:"email"},"Email",-1),xne={class:"text-red-500"},wne={class:"w-full flex flex-col flex-wrap p-1"},gne=e("label",{for:"phone_number"},"Telepon",-1),$ne={class:"text-red-500"},kne={class:"w-full flex flex-col flex-wrap p-1"},jne=e("label",{for:"photo"},"Foto",-1),Dne={class:"flex justify-center items-center w-24 h-24"},Sne=["src"],Tne=e("small",null,"Upload file image : jpg, jpeg",-1),Cne={class:"help-err"},Pne={class:"w-full flex items-center justify-end"},Ane=e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm"}," Save ",-1),Mne=Lt({__name:"index",setup(n){return Y(this,null,function*(){let o,x;ot();const f=u(!1),d=ke("token"),a=u({});Ht();const r=ja(),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;const{data:b,error:v,status:w}=yield W("/profile",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,w.value==="error")X().trigger(v,a);else return b.value.photo&&(f.value=!0),b.value;return{username:"",fullname:"",email:"",phone_number:"",photo:""}}),"$161L0imkVP")})),o=yield o,x(),o),i=u(null),c=b=>{var v=b.target.files;if(v.length>0){let w=new FileReader;w.onload=function(m){var A;let S=(A=m.target)==null?void 0:A.result;S.match(/image/)&&(p.value.photo=S)},w.readAsDataURL(v[0]),f.value=!0}},h=()=>{f.value=!1,p.value.photo="";let b=i.value;b&&(b.value="")},k=ke("username"),C=ke("fullname"),y=u(!1),g=()=>Y(this,null,function*(){var D,M;if(y.value)return;y.value=!0,$().loading_full=!0,a.value={};const b=new FormData;b.append("username",p.value.username),b.append("email",p.value.email),b.append("phone_number",p.value.phone_number),b.append("fullname",p.value.fullname),p.value.password&&b.append("password",p.value.password),typeof p.value.can_login!="undefined"&&b.append("can_login",p.value.can_login),(M=(D=i.value)==null?void 0:D.files)!=null&&M[0]&&b.append("photo",i.value.files[0]||""),i.value&&b.append("photo_preview",p.value.photo);let v="post",w=r.query.id;w===""||(v="post",b.append("id",w),b.append("_method","PUT"));const{data:m,error:S,status:A}=yield W("/update_profile",{method:v,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:b,retry:0});if($().loading_full=!1,y.value=!1,A.value==="error"){X().trigger(S,a);return}else k.value=p.value.username,C.value=p.value.fullname,Je().display({show:!0,status:"Success",message:m.value.message})});return(b,v)=>{const w=ca;return s(),_("div",dne,[j(w,{title:"Profile",back:!0,onSubmit:v[0]||(v[0]=ze(m=>g(),["prevent"]))}),e("form",_ne,[e("div",une,[e("div",cne,[pne,ae(e("input",{id:"username",type:"text","onUpdate:modelValue":v[1]||(v[1]=m=>t(p).username=m)},null,512),[[Te,t(p).username]]),e("p",vne,l(t(a).username),1)]),e("div",fne,[mne,ae(e("input",{id:"fullname",type:"text","onUpdate:modelValue":v[2]||(v[2]=m=>t(p).fullname=m)},null,512),[[Te,t(p).fullname]]),e("p",hne,l(t(a).fullname),1)]),e("div",bne,[yne,ae(e("input",{id:"email",type:"text","onUpdate:modelValue":v[3]||(v[3]=m=>t(p).email=m)},null,512),[[Te,t(p).email]]),e("p",xne,l(t(a).email),1)]),e("div",wne,[gne,ae(e("input",{id:"phone_number",type:"text","onUpdate:modelValue":v[4]||(v[4]=m=>t(p).phone_number=m)},null,512),[[Te,t(p).phone_number]]),e("p",$ne,l(t(a).phone_number),1)]),e("div",kne,[jne,e("div",Dne,[e("img",{src:t(p).photo||"/logistik/user-default.png",alt:"",class:"max-w-full max-h-full"},null,8,Sne)]),ae(e("button",{type:"button",class:"bg-gray-600 w-24 text-white",onClick:v[5]||(v[5]=m=>h())},"Remove",512),[[Be,t(f)]]),ae(e("input",{id:"photo",onChange:v[6]||(v[6]=m=>c(m)),ref_key:"photo_input",ref:i,type:"file",name:"photo",value:""},null,544),[[Be,!t(f)]]),Tne,e("p",Cne,l(t(a).photo),1)])]),e("div",Pne,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:v[7]||(v[7]=m=>b.$router.go(-1))}," Cancel "),Ane])])])}})}}),hwe=Object.freeze(Object.defineProperty({__proto__:null,default:Mne},Symbol.toStringTag,{value:"Module"})),One={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Nne={class:"relative",style:{width:"95%",height:"90%"}},Fne={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ine=["src"],Ll=Lt({__name:"PDFView",props:{show:{type:Boolean,required:!0},pdfContent:{type:Object,required:!1,default:""}},setup(n){const o=n,{downloadFile:x,viewFile:f}=jt(),d=()=>{x(o.pdfContent)};return(a,r)=>{const p=At;return n.show?(s(),_("div",One,[e("div",Nne,[e("div",Fne,[j(p,{style:{color:"black",cursor:"pointer"},onClick:r[0]||(r[0]=i=>a.$emit("close"))})]),e("iframe",{ref:"iframe",width:"100%",height:"100%",src:n.pdfContent.dataBase64},null,8,Ine),e("div",{style:{position:"absolute",top:"12px",right:"88px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:r[1]||(r[1]=i=>d())})])])):O("",!0)}}}),bwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ll},Symbol.toStringTag,{value:"Module"}));const ll=n=>(nt("data-v-d2078fe2"),n=n(),rt(),n),Yne={class:"w-full h-full flex flex-col"},Bne={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},qne={class:"bg-white p-2 max-w-[350px] max-h-full overflow-auto"},Une={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},Hne={class:"w-full p-1 flex flex-col"},zne=ll(()=>e("div",{class:"font-bold"}," Tipe ",-1)),Vne=ll(()=>e("option",{value:"header"},"Header",-1)),Lne=ll(()=>e("option",{value:"detail"},"Detail",-1)),Ene=[Vne,Lne],Rne={class:"w-full p-1 flex flex-col"},Jne=ll(()=>e("div",{class:"font-bold"}," Jenis ",-1)),Kne=ll(()=>e("option",{value:""},null,-1)),Gne=ll(()=>e("option",{value:"UJ"},"Uang Jalan",-1)),Zne=ll(()=>e("option",{value:"SB"},"Uang Standby",-1)),Wne=[Kne,Gne,Zne],Qne={class:"w-full sm:w-1/2 p-1 flex flex-col"},Xne=ll(()=>e("div",{class:"font-bold"}," Tgl Dari ",-1)),ere={class:"text-red-500"},tre={class:"w-full sm:w-1/2 p-1 flex flex-col"},lre=ll(()=>e("div",{class:"font-bold"}," Tgl Sampai ",-1)),are={class:"text-red-500"},sre={class:"w-full p-1 flex flex-col"},ore=ll(()=>e("div",{class:"font-bold"}," Lokasi ",-1)),nre={class:"w-full p-1 flex flex-col"},rre=ll(()=>e("div",{class:"font-bold"}," Nama ",-1)),ire={class:"w-full p-1 flex flex-col"},dre=ll(()=>e("div",{class:"font-bold"}," No Pol ",-1)),_re={class:"w-full p-1 flex items-end justify-end"},ure=ll(()=>e("div",{class:"text-left m-1"},"Download PDF",-1)),cre=ll(()=>e("div",{class:"text-left m-1"},"Download Excel",-1)),pre={__name:"ast_n_driver",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="tanggal:desc";const a=u({}),r=ke("token"),p=u({from:"",to:""}),{data:i}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let D=[],M=[],T=[];const[q,P]=yield Promise.all([W("/report/ast_n_driver/load_data",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},retry:0})]);return q.status.value!=="error"&&(D=q.data.value.list_xto,T=q.data.value.list_employee,M=q.data.value.list_vehicle),q.status.value==="error"&&X().trigger(q.error),$().loading_full=!1,{list_xto:D,list_employee:T,list_vehicle:M}}),"$Aw9scsfjYZ")})),o=yield o,x(),o),c=u([]),h=u([]),k=u([]);i.value.list_xto.forEach(D=>{c.value.push({id:D,name:D,title:"",checked:!1})}),i.value.list_employee.forEach(D=>{h.value.push({id:D.id,name:D.name,title:D.role,checked:!1})}),i.value.list_vehicle.forEach(D=>{k.value.push({id:D.id,name:D.no_pol,title:"",checked:!1})});const C=u("header"),y=u(""),g=()=>{d._TimeZoneOffset=new Date().getTimezoneOffset(),d.date_from=p.value.from?f(p.value.from).format("YYYY-MM-DD"):"",d.date_to=p.value.to?f(p.value.to).format("YYYY-MM-DD"):"",d.list_xto=JSON.stringify(c.value.filter(D=>D.checked).map(D=>D.id)),d.list_employee=JSON.stringify(h.value.filter(D=>D.checked).map(D=>D.id)),d.list_vehicle=JSON.stringify(k.value.filter(D=>D.checked).map(D=>D.id)),d.type=C.value,d.jenis=y.value},{downloadFile:b,viewFile:v}=jt(),w=u(!1),m=u({}),S=()=>Y(this,null,function*(){if(w.value==!0){w.value=!1;return}g(),$().loading_full=!0;const{data:D,error:M,status:T}=yield W("/report/ast_n_driver/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M);return}m.value=D.value,w.value=!0}),A=()=>Y(this,null,function*(){g(),$().loading_full=!0;const{data:D,error:M,status:T}=yield W("/report/ast_n_driver/excel_download",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M);return}b(D.value)});return(D,M)=>{const T=_t,q=Vt("vue-date-picker"),P=zt,N=ia,L=_l,R=Yt,J=Ll;return s(),_(ye,null,[e("div",Yne,[j(T,{title:"Report Transaction"}),e("div",Bne,[e("div",qne,[e("form",Une,[e("div",Hne,[zne,ae(e("select",{"onUpdate:modelValue":M[0]||(M[0]=re=>Ee(C)?C.value=re:null)},Ene,512),[[We,t(C)]])]),e("div",Rne,[Jne,ae(e("select",{"onUpdate:modelValue":M[1]||(M[1]=re=>Ee(y)?y.value=re:null)},Wne,512),[[We,t(y)]])]),e("div",Qne,[Xne,j(P,null,{default:Q(()=>[j(q,{modelValue:t(p).from,"onUpdate:modelValue":M[2]||(M[2]=re=>t(p).from=re),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",ere,l(t(a).date_from),1)]),e("div",tre,[lre,j(P,null,{default:Q(()=>[j(q,{modelValue:t(p).to,"onUpdate:modelValue":M[3]||(M[3]=re=>t(p).to=re),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",are,l(t(a).date_to),1)]),e("div",sre,[ore,j(N,{arr:t(c)},null,8,["arr"])]),e("div",nre,[rre,j(N,{arr:t(h)},null,8,["arr"])]),e("div",ire,[dre,j(N,{arr:t(k)},null,8,["arr"])]),e("div",_re,[e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:M[4]||(M[4]=ze(re=>S(),["prevent"]))},[e("div",null,[j(L,{class:"text-2xl"})]),ure]),e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:M[5]||(M[5]=ze(re=>A(),["prevent"]))},[e("div",null,[j(R,{class:"text-2xl"})]),cre])])])])])]),j(J,{show:t(w),pdfContent:t(m),onClose:M[6]||(M[6]=re=>w.value=!t(w))},null,8,["show","pdfContent"])],64)}})}},vre=Oe(pre,[["__scopeId","data-v-d2078fe2"]]),ywe=Object.freeze(Object.defineProperty({__proto__:null,default:vre},Symbol.toStringTag,{value:"Module"})),fre={class:"w-full h-full flex flex-col"},mre={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},hre={class:"bg-white p-2"},bre={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},yre={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},xre=e("div",{class:"font-bold"}," Tgl Dari ",-1),wre={class:"text-red-500"},gre={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},$re=e("div",{class:"font-bold"}," Tgl Sampai ",-1),kre={class:"text-red-500"},jre={class:"w-full p-1 sm:w-12/12 md:w-12/12 lg:w-4/12 flex items-end justify-end"},Dre=e("div",{class:"text-left m-1"},"Download PDF",-1),Sre=e("div",{class:"text-left m-1"},"Download Excel",-1),Tre={__name:"distance",setup(n){const{$moment:o}=Ke(),x={};x._TimeZoneOffset=new Date().getTimezoneOffset(),x.sort="tanggal:desc";const f=u({}),d=ke("token"),a=u({from:"",to:""});$().loading_full=!1;const r=()=>{x._TimeZoneOffset=new Date().getTimezoneOffset(),x.date_from=a.value.from?o(a.value.from).format("YYYY-MM-DD"):"",x.date_to=a.value.to?o(a.value.to).format("YYYY-MM-DD"):""},{downloadFile:p,viewFile:i}=jt(),c=u(!1),h=u({}),k=()=>Y(this,null,function*(){if(c.value==!0){c.value=!1;return}r(),$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/report/distance/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:x,retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}h.value=y.value,c.value=!0}),C=()=>Y(this,null,function*(){r(),$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/report/distance/excel_download",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:x,retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}p(y.value)});return(y,g)=>{const b=_t,v=Vt("vue-date-picker"),w=zt,m=_l,S=Yt,A=Ll;return s(),_(ye,null,[e("div",fre,[j(b,{title:"Report Transaction"}),e("div",mre,[e("div",hre,[e("form",bre,[e("div",yre,[xre,j(w,null,{default:Q(()=>[j(v,{modelValue:t(a).from,"onUpdate:modelValue":g[0]||(g[0]=D=>t(a).from=D),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",wre,l(t(f).date_from),1)]),e("div",gre,[$re,j(w,null,{default:Q(()=>[j(v,{modelValue:t(a).to,"onUpdate:modelValue":g[1]||(g[1]=D=>t(a).to=D),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",kre,l(t(f).date_to),1)]),e("div",jre,[e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:g[2]||(g[2]=ze(D=>k(),["prevent"]))},[e("div",null,[j(m,{class:"text-2xl"})]),Dre]),e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:g[3]||(g[3]=ze(D=>C(),["prevent"]))},[e("div",null,[j(S,{class:"text-2xl"})]),Sre])])])])])]),j(A,{show:t(c),pdfContent:t(h),onClose:g[4]||(g[4]=D=>c.value=!t(c))},null,8,["show","pdfContent"])],64)}}},xwe=Object.freeze(Object.defineProperty({__proto__:null,default:Tre},Symbol.toStringTag,{value:"Module"})),Cre={class:"w-full h-full flex flex-col"},Pre={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},Are={class:"bg-white p-2"},Mre={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},Ore={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},Nre=e("div",{class:"font-bold"}," Tgl Dari ",-1),Fre={class:"text-red-500"},Ire={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},Yre=e("div",{class:"font-bold"}," Tgl Sampai ",-1),Bre={class:"text-red-500"},qre={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},Ure=e("div",{class:"font-bold"}," Lokasi ",-1),Hre={id:"locations"},zre=["value"],Vre={class:"w-full p-1 sm:w-12/12 md:w-12/12 lg:w-3/12 flex items-end justify-end"},Lre=e("div",{class:"text-left m-1"},"Download PDF",-1),Ere=e("div",{class:"text-left m-1"},"Download Excel",-1),Rre={__name:"ramp",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="tanggal:desc";const a=u({}),r=ke("token"),p=u({from:"",to:""}),{data:i}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let m=[];const[S,A]=yield Promise.all([W("/report/ramp/get_locations",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},retry:0})]);return S.status.value!=="error"&&(m=S.data.value.list_xto),S.status.value==="error"?(X().trigger(S.error),{locations:m}):($().loading_full=!1,{locations:m})}),"$SQhImG8ywX")})),o=yield o,x(),o),c=u(i.value.locations||[]),h=u(""),k=()=>{d._TimeZoneOffset=new Date().getTimezoneOffset(),d.date_from=p.value.from?f(p.value.from).format("YYYY-MM-DD"):"",d.date_to=p.value.to?f(p.value.to).format("YYYY-MM-DD"):"",d.location=h.value},{downloadFile:C,viewFile:y}=jt(),g=u(!1),b=u({}),v=()=>Y(this,null,function*(){if(g.value==!0){g.value=!1;return}k(),$().loading_full=!0;const{data:m,error:S,status:A}=yield W("/report/ramp/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,A.value==="error"){X().trigger(S);return}b.value=m.value,g.value=!0}),w=()=>Y(this,null,function*(){k(),$().loading_full=!0;const{data:m,error:S,status:A}=yield W("/report/ramp/excel_download",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,A.value==="error"){X().trigger(S);return}C(m.value)});return(m,S)=>{const A=_t,D=Vt("vue-date-picker"),M=zt,T=_l,q=Yt,P=Ll;return s(),_(ye,null,[e("div",Cre,[j(A,{title:"Report Transaction"}),e("div",Pre,[e("div",Are,[e("form",Mre,[e("div",Ore,[Nre,j(M,null,{default:Q(()=>[j(D,{modelValue:t(p).from,"onUpdate:modelValue":S[0]||(S[0]=N=>t(p).from=N),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Fre,l(t(a).date_from),1)]),e("div",Ire,[Yre,j(M,null,{default:Q(()=>[j(D,{modelValue:t(p).to,"onUpdate:modelValue":S[1]||(S[1]=N=>t(p).to=N),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Bre,l(t(a).date_to),1)]),e("div",qre,[Ure,ae(e("input",{type:"text",list:"locations","onUpdate:modelValue":S[2]||(S[2]=N=>Ee(h)?h.value=N:null)},null,512),[[Te,t(h)]]),e("datalist",Hre,[(s(!0),_(ye,null,Ae(t(c),N=>(s(),_("option",{value:N},l(N),9,zre))),256))])]),e("div",Vre,[e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:S[3]||(S[3]=ze(N=>v(),["prevent"]))},[e("div",null,[j(T,{class:"text-2xl"})]),Lre]),e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:S[4]||(S[4]=ze(N=>w(),["prevent"]))},[e("div",null,[j(q,{class:"text-2xl"})]),Ere])])])])])]),j(P,{show:t(g),pdfContent:t(b),onClose:S[5]||(S[5]=N=>g.value=!t(g))},null,8,["show","pdfContent"])],64)}})}},wwe=Object.freeze(Object.defineProperty({__proto__:null,default:Rre},Symbol.toStringTag,{value:"Module"})),Jre={class:"w-full h-full flex flex-col"},Kre={class:"w-full flex grow flex-col overflow-auto h-0"},Gre={class:"w-full flex justify-between flex-wrap"},Zre={class:"grow flex"},Wre={class:"m-1"},Qre=Et('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Xre=[Qre],eie=e("span",{class:"text-xs ml-1"}," PDF ",-1),tie=e("span",{class:"text-xs ml-1"}," Excel ",-1),lie=e("span",{class:"text-xs ml-1"}," Full ",-1),aie={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},sie={class:"relative",style:{width:"95%",height:"90%"}},oie={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},nie=["src"],rie={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},iie={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},die={class:"p-1 flex flex-wrap overflow-auto items-start"},_ie={class:"w-full sm:w-1/2 flex flex-wrap"},uie={class:"flex flex-col m-2"},cie=e("span",{class:"text-xs"}," To ",-1),pie={class:""},vie={class:"flex flex-col m-2"},fie=e("span",{class:"text-xs"}," Tipe ",-1),mie={class:""},hie={class:"flex flex-col m-2"},bie=e("span",{class:"text-xs"}," Jenis ",-1),yie={class:""},xie={class:"flex flex-col m-2"},wie=e("span",{class:"text-xs"}," Ket. Untuk Remarks ",-1),gie={class:""},$ie={class:"w-full sm:w-1/2 text-sm flex justify-center"},kie={class:"border border-collapse border-black"},jie=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),Die={class:"p-1"},Sie={class:"p-1"},Tie=e("td",{class:"p-1"},"= Rp.",-1),Cie={class:"text-right p-1"},Pie={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Aie=e("th",{colspan:"2",class:"text-right"},"Total",-1),Mie=e("th",{class:"p-1 text-right"},"Rp.",-1),Oie={class:"p-1 text-right"},Nie={class:"w-full mt-2 text-sm flex justify-center"},Fie={class:"border border-collapse border-black"},Iie=e("tr",null,[e("th",{colspan:"5",class:"bg-blue-400"}," List PVR ")],-1),Yie={class:"p-1"},Bie={class:"p-1"},qie={class:"p-1"},Uie=e("td",{class:"p-1"},"= Rp.",-1),Hie={class:"text-right p-1"},zie={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Vie=e("th",{colspan:"2",class:"text-right"},"Total",-1),Lie=e("th",{class:"p-1 text-right"},"Rp.",-1),Eie={class:"p-1 text-right"},Rie={class:"flex p-1 justify-end flex-wrap"},Jie={__name:"finance",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=U=>U.deleted==1?"!bg-red-400":U.pvr_id>0&&U.req_deleted==1?"!bg-yellow-300":U.pv_id>0?"!bg-blue-300":"",r=U=>(U.map(I=>{I.class_h=a(I)}),U),p=u("pv_not_done");je(()=>p.value,U=>{S()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=u({from:"",to:""}),k=ke("token"),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let U=[];const[I,Z]=yield Promise.all([W("/trx_trps/dataFin",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return I.status.value!=="error"&&(U=r(I.data.value.data)),I.status.value==="error"?(X().trigger(I.error),{trx_trps:U}):($().loading_full=!1,{trx_trps:U})}),"$mHT2RIPzaD")})),o=yield o,x(),o),y=u(C.value.trx_trps||[]),g=u({field:"tanggal",by:"desc"}),b=u(-1),v=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),w=()=>{i.like="";let U=JSON.parse(JSON.stringify($()._tv.global_keyword));U!=""&&(i.like=`id:%${U}%,xto:%${U}%,jenis:%${U}%,pv_no:%${U}%,ticket_a_no:%${U}%,ticket_b_no:%${U}%,no_pol:%${U}%,supir:%${U}%,kernet:%${U}%,cost_center_code:%${U}%,cost_center_desc:%${U}%,pvr_no:%${U}%,tanggal:%${U}%,transition_target:%${U}%,uj_asst_opt:%${U}%`),i.sort="",g.value.field&&(i.sort=g.value.field+":"+g.value.by),i.date_from=h.value.from?f(h.value.from).format("YYYY-MM-DD"):"",i.date_to=h.value.to?f(h.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model),i.filter_status=p.value},m=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},v.value.may_get_data=!1,i.page=v.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:U,error:I,status:Z}=yield W("/trx_trps/dataFin",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,v.value.may_get_data=!0,Z.value==="error"){X().trigger(I,c);return}v.value.page==1?y.value=r(U.value.data):v.value.page>1&&(y.value=[...y.value,...r(U.value.data)]),U.value.data.length==0&&(v.value.is_last_record=!0),$()._tv.filter_box=!1}),S=()=>{b.value=-1,v.value.page=1,v.value.is_last_record=!1,w(),m()},A=u([{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:$().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),{downloadFile:D,viewFile:M}=jt(),T=u(!1),q=u(""),P=()=>Y(this,null,function*(){if(T.value==!0){T.value=!1;return}w(),$().loading_full=!0;const{data:U,error:I,status:Z}=yield W("/trx_trps/reportFinPDF",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,Z.value==="error"){X().trigger(I);return}q.value=U.value,T.value=!0}),N=(U="")=>Y(this,null,function*(){w(),$().loading_full=!0,i.filter_status=p.value;const{data:I,error:Z,status:E}=yield W("/trx_trps/reportFinExcel",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}D(I.value)}),L=(U="")=>Y(this,null,function*(){w(),$().loading_full=!0,i.filter_status=p.value;const{data:I,error:Z,status:E}=yield W("/trx_trps/reportFullExcel",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}D(I.value)}),R=()=>{D(q.value)},J=u(!1),te=u(ie({},{id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",details:[],details2:[]})),ee=()=>Y(this,null,function*(){b.value==-1&&display({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}),$().loading_full=!0;const{data:U,error:I,status:Z}=yield W("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:y.value[b.value].id_uj},retry:0});if($().loading_full=!1,Z.value==="error"){X().trigger(I,c);return}te.value=U.value.data,J.value=!0}),ce=ne(()=>{let U=0;return te.value.details2.forEach(I=>{I.p_status!="Remove"&&(U+=I.qty*I.amount)}),U});return(U,I)=>{const Z=_t,E=_l,H=Yt,ve=Nt,Ie=Pl,le=$t,z=ft,G=Ot,oe=At,se=Xe;return s(),_(ye,null,[e("div",Jre,[j(Z,{title:"List Transaction"}),e("div",Kre,[e("div",Gre,[e("div",Zre,[e("div",Wre,[ae(e("select",{class:"","onUpdate:modelValue":I[0]||(I[0]=_e=>Ee(p)?p.value=_e:null)},Xre,512),[[We,t(p)]])]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:I[1]||(I[1]=_e=>P())},[j(E),F(),eie]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:I[2]||(I[2]=_e=>N())},[j(H),F(),tie]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:I[3]||(I[3]=_e=>L())},[j(H),F(),lie]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:I[4]||(I[4]=_e=>ee())},[j(ve)])])]),j(G,{thead:t(A),selected:t(b),onSetSelected:I[5]||(I[5]=_e=>b.value=_e),tbody:t(y),fnCallData:m,scrolling:t(v),onSetScrollingPage:I[6]||(I[6]=_e=>t(v).page=_e),onDoFilter:I[7]||(I[7]=_e=>S())},{absen:Q(({item:_e,index:ue})=>[_e.trx_absens&&_e.trx_absens.length>0?(s(),pe(Ie,{key:0,class:"cursor-pointer",onClick:B=>U.form_absen(ue)},null,8,["onClick"])):O("",!0)]),val:Q(({item:_e})=>[_e.val?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val1:Q(({item:_e})=>[_e.val1?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val2:Q(({item:_e})=>[_e.val2?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val3:Q(({item:_e})=>[_e.val3?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val4:Q(({item:_e})=>[_e.val4?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),val5:Q(({item:_e})=>[_e.val5?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),uj_asst_opt:Q(({item:_e})=>{var ue;return[F(l((ue=_e.uj)==null?void 0:ue.asst_opt),1)]}),payment_method_name:Q(({item:_e})=>{var ue;return[F(l((ue=_e.payment_method)==null?void 0:ue.name),1)]}),pvr_had_detail:Q(({item:_e})=>[_e.pvr_had_detail?(s(),pe(z,{key:1})):(s(),pe(le,{key:0}))]),deleted_by_username:Q(({item:_e})=>{var ue;return[F(l((ue=_e.deleted_by)==null?void 0:ue.username),1)]}),req_deleted_by_username:Q(({item:_e})=>{var ue;return[F(l((ue=_e.req_deleted_by)==null?void 0:ue.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])]),t(T)?(s(),_("div",aie,[e("div",sie,[e("div",oie,[j(oe,{style:{color:"black",cursor:"pointer"},onClick:I[8]||(I[8]=_e=>P())})]),e("iframe",{ref:"iframe",width:"100%",height:"100%",src:t(q).dataBase64},null,8,nie),e("div",{style:{position:"absolute",top:"12px",right:"88px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:I[9]||(I[9]=_e=>R())})])])):O("",!0),ae(e("div",rie,[e("div",iie,[j(se,{title:"Detail Information",fn:()=>{J.value=!1,U.show_confirm=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",die,[e("div",_ie,[e("div",uie,[cie,e("div",pie,l(t(te).xto)+" ",1)]),e("div",vie,[fie,e("div",mie,l(t(te).tipe),1)]),e("div",hie,[bie,e("div",yie,l(t(te).jenis),1)]),e("div",xie,[wie,e("div",gie,l(t(te).note_for_remarks),1)])]),e("div",$ie,[e("table",kie,[jie,(s(!0),_(ye,null,Ae(t(te).details,_e=>(s(),_("tr",null,[e("td",Die,l(_e.ordinal)+". ",1),e("td",Sie,l(_e.xdesc)+" "+l(_e.qty<=1?"":t(d)(_e.qty||0)+" x Rp."+t(d)(_e.harga||0)),1),Tie,e("td",Cie,l(t(d)(_e.qty*_e.harga)),1)]))),256)),e("tr",Pie,[Aie,Mie,e("th",Oie,l(t(d)(t(te).harga)),1)])])]),e("div",Nie,[e("table",Fie,[Iie,(s(!0),_(ye,null,Ae(t(te).details2,_e=>(s(),_("tr",null,[e("td",Yie,l(_e.ordinal)+". ",1),e("td",Bie,l(_e.ac_account_code),1),e("td",qie,l(_e.description)+" "+l(_e.qty<=1?"":t(d)(_e.qty||0)+" x Rp."+t(d)(_e.amount||0)),1),Uie,e("td",Hie,l(t(d)(_e.qty*_e.amount)),1)]))),256)),e("tr",zie,[Vie,Lie,e("th",Eie,l(t(d)(t(ce))),1)])])])]),e("div",Rie,[e("button",{class:"rounded m-1",onClick:I[10]||(I[10]=_e=>J.value=!1)}," Cancel ")])])],512),[[Be,t(J)]])],64)}})}},gwe=Object.freeze(Object.defineProperty({__proto__:null,default:Jie},Symbol.toStringTag,{value:"Module"})),Kie={class:"w-full h-full flex flex-col"},Gie={class:"w-full flex grow flex-col overflow-auto h-0"},Zie={class:"w-full flex"},Wie={class:"flex flex-wrap p-1"},Qie=e("span",{class:"text-xs ml-1"}," PDF ",-1),Xie=e("span",{class:"text-xs ml-1"}," Excel ",-1),ede={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},tde={class:"relative",style:{width:"95%",height:"90%"}},lde={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},ade=["src"],sde={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},ode={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},nde={class:"p-1 flex flex-wrap overflow-auto items-start"},rde={class:"w-full sm:w-1/2 flex flex-wrap"},ide={class:"flex flex-col m-2"},dde=e("span",{class:"text-xs"}," To ",-1),_de={class:""},ude={class:"flex flex-col m-2"},cde=e("span",{class:"text-xs"}," Tipe ",-1),pde={class:""},vde={class:"flex flex-col m-2"},fde=e("span",{class:"text-xs"}," Jenis ",-1),mde={class:""},hde={class:"flex flex-col m-2"},bde=e("span",{class:"text-xs"}," Ket. Untuk Remarks ",-1),yde={class:""},xde={class:"w-full sm:w-1/2 text-sm flex justify-center"},wde={class:"border border-collapse border-black"},gde=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),$de={class:"p-1"},kde={class:"p-1"},jde=e("td",{class:"p-1"},"= Rp.",-1),Dde={class:"text-right p-1"},Sde={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Tde=e("th",{colspan:"2",class:"text-right"},"Total",-1),Cde=e("th",{class:"p-1 text-right"},"Rp.",-1),Pde={class:"p-1 text-right"},Ade={class:"w-full mt-2 text-sm flex justify-center"},Mde={class:"border border-collapse border-black"},Ode=e("tr",null,[e("th",{colspan:"5",class:"bg-blue-400"}," List PVR ")],-1),Nde={class:"p-1"},Fde={class:"p-1"},Ide={class:"p-1"},Yde=e("td",{class:"p-1"},"= Rp.",-1),Bde={class:"text-right p-1"},qde={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},Ude=e("th",{colspan:"2",class:"text-right"},"Total",-1),Hde=e("th",{class:"p-1 text-right"},"Rp.",-1),zde={class:"p-1 text-right"},Vde={class:"flex p-1 justify-end flex-wrap"},Lde={__name:"index copy",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="tanggal:desc";const r=u({}),p=ke("token"),i=u({from:"",to:""}),{data:c}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let E=[];const[H,ve]=yield Promise.all([W("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},retry:0})]);return H.status.value!=="error"&&(E=H.data.value.data),H.status.value==="error"?(X().trigger(H.error),{trx_trps:E}):($().loading_full=!1,{trx_trps:E})}),"$FEMAmUEOgN")})),o=yield o,x(),o),h=u(c.value.trx_trps||[]),k=u({field:"tanggal",by:"desc"}),C=u(-1),y=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),g=()=>{a.like="";let E=JSON.parse(JSON.stringify($()._tv.global_keyword));E!=""&&(a.like=`id:%${E}%,xto:%${E}%,jenis:%${E}%,pv_no:%${E}%,ticket_a_no:%${E}%,ticket_b_no:%${E}%,no_pol:%${E}%,supir:%${E}%,kernet:%${E}%,cost_center_code:%${E}%,cost_center_desc:%${E}%,pvr_no:%${E}%,tanggal:%${E}%,transition_target:%${E}%`),a.sort="",k.value.field&&(a.sort=k.value.field+":"+k.value.by),a._TimeZoneOffset=new Date().getTimezoneOffset(),a.date_from=i.value.from?f(i.value.from).format("YYYY-MM-DD"):"",a.date_to=i.value.to?f(i.value.to).format("YYYY-MM-DD"):"",a.filter_model=JSON.stringify($()._tv.filter_model)},b=u(null),v=()=>Y(this,null,function*(){$().loading_full=!0,r.value={},y.value.may_get_data=!1,a.page=y.value.page,a.page==1&&(h.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(h.value[0]));const{data:E,error:H,status:ve}=yield W("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,y.value.may_get_data=!0,ve.value==="error"){X().trigger(H,r);return}y.value.page==1?(h.value=E.value.data,b.value&&(b.value.scrollTop=0)):y.value.page>1&&(h.value=[...h.value,...E.value.data]),E.value.data.length==0&&(y.value.is_last_record=!0),$()._tv.filter_box=!1}),w=()=>{y.value.page=1,y.value.is_last_record=!1,g(),v()};Ht(),u(!1),u(0),Je(),Dt(Je());const m=u({}),S=u(!1),A=()=>Y(this,null,function*(){S.value&&(S.value=!1)}),D=()=>Y(this,null,function*(){$().loading_full=!0;const E=new FormData;E.append("id",h.value[C.value].id),E.append("_method","DELETE");const{data:H,error:ve,status:Ie}=yield W("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:E,retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}h.value.splice(C.value,1),C.value=-1,S.value=!1}),{downloadFile:M,viewFile:T}=jt(),q=u(!1),P=u(""),N=(E="")=>Y(this,null,function*(){if(q.value==!0){q.value=!1;return}g(),$().loading_full=!0;const{data:H,error:ve,status:Ie}=yield W("/trx_trps/"+E,{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}P.value=H.value,q.value=!0}),L=(E="")=>Y(this,null,function*(){g(),$().loading_full=!0;const{data:H,error:ve,status:Ie}=yield W("/trx_trps/"+E,{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}M(H.value)}),R=()=>{M(P.value)},J=E=>E.pv_id<=0||["CPO","PK"].indexOf(E.jenis)>-1&&(E.ticket_a_id<=0||E.ticket_b_bruto<=0||E.ticket_b_tara<=0||E.ticket_b_netto<=0||E.ticket_b_in_at==""||E.ticket_b_out_at=="")||E.jenis=="TBS"&&(E.ticket_a_id<=0||E.ticket_b_id<=0)||E.jenis=="TBSK"&&E.ticket_b_id<=0?0:1,re=u([{key:"status",label:"Status",filter_on:1,sort_off:1,type:"select",select_item:["Undone","Done"]},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",class:" justify-start",filter_on:1,type:"string"},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"transition_target",label:"Peralihan",filter_on:1,type:"select",select_item:$().list_pabrik},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"susut",label:"Susut",childs:[{key:"susut_bruto",label:"Bruto",childs:[{key:"susut_bruto_a",label:"Berangkat"},{key:"susut_bruto_b",label:"Kembali"},{key:"susut_bruto_b_a",label:"Selisih"},{key:"susut_bruto_b_a_persen",label:"%"}]},{key:"susut_tara",label:"Tara",childs:[{key:"susut_tara_a",label:"Berangkat"},{key:"susut_tara_b",label:"Kembali"},{key:"susut_tara_b_a",label:"Selisih"},{key:"susut_tara_b_a_persen",label:"%"}]},{key:"susut_netto",label:"Netto",childs:[{key:"susut_netto_a",label:"Berangkat"},{key:"susut_netto_b",label:"Kembali"},{key:"susut_netto_b_a",label:"Selisih"},{key:"susut_netto_b_a_persen",label:"%"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]),te=(E,H)=>{E=parseFloat(E)||0,H=parseFloat(H)||0;let ve=parseFloat(H-E);if((ve>0?H:E)==0)return 0;let le=K().round(ve/E*100,2);return le<0?"("+Math.abs(le*100)/100+")":le},ee=(E,H)=>{E=parseFloat(E)||0,H=parseFloat(H)||0;let ve=parseFloat(H-E);return ve<0?"("+d(Math.abs(ve))+")":d(ve)},ce=u(!1),I=u(ie({},{id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",details:[],details2:[]})),Z=ne(()=>{let E=0;return I.value.details2.forEach(H=>{H.p_status!="Remove"&&(E+=H.qty*H.amount)}),E});return(E,H)=>{const ve=_t,Ie=_l,le=Yt,z=$t,G=ft,oe=Ot,se=It,_e=At,ue=Xe;return s(),_("div",Kie,[j(ve,{title:"Report Transaction"}),e("div",Gie,[e("div",Zie,[e("div",Wie,[e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:H[0]||(H[0]=B=>N("reportSusutPDF"))},[j(Ie),F(),Qie]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:H[1]||(H[1]=B=>L("reportSusutExcel"))},[j(le),F(),Xie])])]),j(oe,{thead:t(re),selected:t(C),onSetSelected:H[2]||(H[2]=B=>C.value=B),tbody:t(h),fnCallData:v,scrolling:t(y),onSetScrollingPage:H[3]||(H[3]=B=>t(y).page=B),onDoFilter:H[4]||(H[4]=B=>w())},{status:Q(({item:B})=>[e("div",{class:Ue(["text-white text-xs px-2 py-1 rounded-lg",J(B)?"bg-green-600":"bg-red-600"])},l(J(B)?"Done":"Not Done"),3)]),val:Q(({item:B})=>[B.val?(s(),pe(G,{key:1})):(s(),pe(z,{key:0}))]),val1:Q(({item:B})=>[B.val1?(s(),pe(G,{key:1})):(s(),pe(z,{key:0}))]),pvr_had_detail:Q(({item:B})=>[B.pvr_had_detail?(s(),pe(G,{key:1})):(s(),pe(z,{key:0}))]),susut_bruto_a:Q(({item:B})=>[F(l(t(d)(B.ticket_a_bruto)),1)]),susut_tara_a:Q(({item:B})=>[F(l(t(d)(B.ticket_a_tara)),1)]),susut_netto_a:Q(({item:B})=>[F(l(t(d)(B.ticket_a_netto)),1)]),susut_bruto_b:Q(({item:B})=>[F(l(t(d)(B.ticket_b_bruto)),1)]),susut_tara_b:Q(({item:B})=>[F(l(t(d)(B.ticket_b_tara)),1)]),susut_netto_b:Q(({item:B})=>[F(l(t(d)(B.ticket_b_netto)),1)]),susut_bruto_b_a:Q(({item:B})=>[F(l(ee(B.ticket_a_bruto,B.ticket_b_bruto)),1)]),susut_tara_b_a:Q(({item:B})=>[F(l(ee(B.ticket_a_tara,B.ticket_b_tara)),1)]),susut_netto_b_a:Q(({item:B})=>[F(l(ee(B.ticket_a_netto,B.ticket_b_netto)),1)]),susut_bruto_b_a_persen:Q(({item:B})=>[F(l(te(B.ticket_a_bruto,B.ticket_b_bruto)),1)]),susut_tara_b_a_persen:Q(({item:B})=>[F(l(te(B.ticket_a_tara,B.ticket_b_tara)),1)]),susut_netto_b_a_persen:Q(({item:B})=>[F(l(te(B.ticket_a_netto,B.ticket_b_netto)),1)]),_:2},1032,["thead","selected","tbody","scrolling"])]),j(se,{type:"delete",show:t(S),data:t(m),fnClose:A,fnConfirm:D},null,8,["show","data"]),t(q)?(s(),_("div",ede,[e("div",tde,[e("div",lde,[j(_e,{style:{color:"black",cursor:"pointer"},onClick:H[5]||(H[5]=B=>N())})]),e("iframe",{ref:"iframe",width:"100%",height:"100%",src:t(P).dataBase64},null,8,ade),e("div",{style:{position:"absolute",top:"12px",right:"88px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:H[6]||(H[6]=B=>R())})])])):O("",!0),ae(e("div",sde,[e("div",ode,[j(ue,{title:"Detail Information",fn:()=>{ce.value=!1,E.show_confirm=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",nde,[e("div",rde,[e("div",ide,[dde,e("div",_de,l(t(I).xto)+" ",1)]),e("div",ude,[cde,e("div",pde,l(t(I).tipe),1)]),e("div",vde,[fde,e("div",mde,l(t(I).jenis),1)]),e("div",hde,[bde,e("div",yde,l(t(I).note_for_remarks),1)])]),e("div",xde,[e("table",wde,[gde,(s(!0),_(ye,null,Ae(t(I).details,B=>(s(),_("tr",null,[e("td",$de,l(B.ordinal)+". ",1),e("td",kde,l(B.xdesc)+" "+l(B.qty<=1?"":t(d)(B.qty||0)+" x Rp."+t(d)(B.harga||0)),1),jde,e("td",Dde,l(t(d)(B.qty*B.harga)),1)]))),256)),e("tr",Sde,[Tde,Cde,e("th",Pde,l(t(d)(t(I).harga)),1)])])]),e("div",Ade,[e("table",Mde,[Ode,(s(!0),_(ye,null,Ae(t(I).details2,B=>(s(),_("tr",null,[e("td",Nde,l(B.ordinal)+". ",1),e("td",Fde,l(B.ac_account_code),1),e("td",Ide,l(B.description)+" "+l(B.qty<=1?"":t(d)(B.qty||0)+" x Rp."+t(d)(B.amount||0)),1),Yde,e("td",Bde,l(t(d)(B.qty*B.amount)),1)]))),256)),e("tr",qde,[Ude,Hde,e("th",zde,l(t(d)(t(Z))),1)])])])]),e("div",Vde,[e("button",{class:"rounded m-1",onClick:H[7]||(H[7]=B=>ce.value=!1)}," Cancel ")])])],512),[[Be,t(ce)]])])}})}},$we=Object.freeze(Object.defineProperty({__proto__:null,default:Lde},Symbol.toStringTag,{value:"Module"})),Ede={class:"w-full h-full flex flex-col"},Rde={class:"w-full flex grow flex-col overflow-auto h-0"},Jde={class:"w-full flex"},Kde={class:"m-1"},Gde=Et('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Zde=[Gde],Wde=e("span",{class:"text-xs ml-1"}," PDF ",-1),Qde=e("span",{class:"text-xs ml-1"}," Excel ",-1),Xde={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},e_e={class:"relative",style:{width:"95%",height:"90%"}},t_e={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},l_e=["src"],a_e={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},s_e={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},o_e={class:"p-1 flex flex-wrap overflow-auto items-start"},n_e={class:"w-full sm:w-1/2 flex flex-wrap"},r_e={class:"flex flex-col m-2"},i_e=e("span",{class:"text-xs"}," To ",-1),d_e={class:""},__e={class:"flex flex-col m-2"},u_e=e("span",{class:"text-xs"}," Tipe ",-1),c_e={class:""},p_e={class:"flex flex-col m-2"},v_e=e("span",{class:"text-xs"}," Jenis ",-1),f_e={class:""},m_e={class:"flex flex-col m-2"},h_e=e("span",{class:"text-xs"}," Ket. Untuk Remarks ",-1),b_e={class:""},y_e={class:"w-full sm:w-1/2 text-sm flex justify-center"},x_e={class:"border border-collapse border-black"},w_e=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),g_e={class:"p-1"},$_e={class:"p-1"},k_e=e("td",{class:"p-1"},"= Rp.",-1),j_e={class:"text-right p-1"},D_e={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},S_e=e("th",{colspan:"2",class:"text-right"},"Total",-1),T_e=e("th",{class:"p-1 text-right"},"Rp.",-1),C_e={class:"p-1 text-right"},P_e={class:"w-full mt-2 text-sm flex justify-center"},A_e={class:"border border-collapse border-black"},M_e=e("tr",null,[e("th",{colspan:"5",class:"bg-blue-400"}," List PVR ")],-1),O_e={class:"p-1"},N_e={class:"p-1"},F_e={class:"p-1"},I_e=e("td",{class:"p-1"},"= Rp.",-1),Y_e={class:"text-right p-1"},B_e={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},q_e=e("th",{colspan:"2",class:"text-right"},"Total",-1),U_e=e("th",{class:"p-1 text-right"},"Rp.",-1),H_e={class:"p-1 text-right"},z_e={class:"flex p-1 justify-end flex-wrap"},V_e={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),{pointFormat:d}=K(),a=I=>I.deleted==1?"!bg-red-400":I.req_deleted==1?"!bg-yellow-300":I.val_ticket==1?"!bg-blue-300":"",r=I=>(I.map(Z=>{Z.class_h=a(Z)}),I),p=u("ticket_not_done");je(()=>p.value,I=>{A()},{immediate:!1});const i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const c=u({}),h=ke("token"),k=u({from:"",to:""}),{data:C}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;let I=[];const[Z,E]=yield Promise.all([W("/trx_trp_susuts/data",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{filter_status:p},retry:0})]);return Z.status.value!=="error"&&(I=r(Z.data.value.data)),Z.status.value==="error"?(X().trigger(Z.error),{trx_trps:I}):($().loading_full=!1,{trx_trps:I})}),"$8KmJHfPiB5")})),o=yield o,x(),o),y=u(C.value.trx_trps||[]),g=u({field:"tanggal",by:"desc"}),b=u(-1),v=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),w=()=>{i.like="";let I=JSON.parse(JSON.stringify($()._tv.global_keyword));I!=""&&(i.like=`id:%${I}%,xto:%${I}%,jenis:%${I}%,pv_no:%${I}%,ticket_a_no:%${I}%,ticket_b_no:%${I}%,no_pol:%${I}%,supir:%${I}%,kernet:%${I}%,cost_center_code:%${I}%,cost_center_desc:%${I}%,pvr_no:%${I}%,tanggal:%${I}%,transition_target:%${I}%,uj_asst_opt:%${I}%`),i.sort="",g.value.field&&(i.sort=g.value.field+":"+g.value.by),i._TimeZoneOffset=new Date().getTimezoneOffset(),i.date_from=k.value.from?f(k.value.from).format("YYYY-MM-DD"):"",i.date_to=k.value.to?f(k.value.to).format("YYYY-MM-DD"):"",i.filter_model=JSON.stringify($()._tv.filter_model),i.filter_status=p.value},m=u(null),S=()=>Y(this,null,function*(){$().loading_full=!0,c.value={},v.value.may_get_data=!1,i.page=v.value.page,i.page==1&&(y.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(y.value[0])),i.filter_status=p.value;const{data:I,error:Z,status:E}=yield W("/trx_trp_susuts/data",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,v.value.may_get_data=!0,E.value==="error"){X().trigger(Z,c);return}v.value.page==1?(y.value=r(I.value.data),m.value&&(m.value.scrollTop=0)):v.value.page>1&&(y.value=[...y.value,...r(I.value.data)]),I.value.data.length==0&&(v.value.is_last_record=!0),$()._tv.filter_box=!1}),A=()=>{v.value.page=1,v.value.is_last_record=!1,w(),S()},{downloadFile:D,viewFile:M}=jt(),T=u(!1),q=u(""),P=()=>Y(this,null,function*(){if(T.value==!0){T.value=!1;return}w(),$().loading_full=!0;const{data:I,error:Z,status:E}=yield W("/trx_trp_susuts/report_PDF",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}q.value=I.value,T.value=!0}),N=()=>Y(this,null,function*(){w(),$().loading_full=!0,i.filter_status=p.value;const{data:I,error:Z,status:E}=yield W("/trx_trp_susuts/report_Excel",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:i,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}D(I.value)}),L=()=>{D(q.value)},R=u([{key:"no",label:"No",isai:!0},{key:"val_ticket",label:"App",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",class:" justify-start",filter_on:1,type:"string"},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:$().list_pabrik}]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"susut",label:"Susut",childs:[{key:"susut_bruto",label:"Bruto",childs:[{key:"susut_bruto_a",label:"Berangkat"},{key:"susut_bruto_b",label:"Kembali"},{key:"susut_bruto_b_a",label:"Selisih"},{key:"susut_bruto_b_a_persen",label:"%"}]},{key:"susut_tara",label:"Tara",childs:[{key:"susut_tara_a",label:"Berangkat"},{key:"susut_tara_b",label:"Kembali"},{key:"susut_tara_b_a",label:"Selisih"},{key:"susut_tara_b_a_persen",label:"%"}]},{key:"susut_netto",label:"Netto",childs:[{key:"susut_netto_a",label:"Berangkat"},{key:"susut_netto_b",label:"Kembali"},{key:"susut_netto_b_a",label:"Selisih"},{key:"susut_netto_b_a_persen",label:"%"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]),J=(I,Z)=>{I=parseFloat(I)||0,Z=parseFloat(Z)||0;let E=parseFloat(Z-I);if((E>0?Z:I)==0)return 0;let ve=K().round(E/I*100,2);return ve<0?"("+Math.abs(ve*100)/100+")":ve},re=(I,Z)=>{I=parseFloat(I)||0,Z=parseFloat(Z)||0;let E=parseFloat(Z-I);return E<0?"("+d(Math.abs(E))+")":d(E)},te=u(!1),ce=u(ie({},{id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",details:[],details2:[]})),U=ne(()=>{let I=0;return ce.value.details2.forEach(Z=>{Z.p_status!="Remove"&&(I+=Z.qty*Z.amount)}),I});return(I,Z)=>{const E=_t,H=_l,ve=Yt,Ie=$t,le=ft,z=Ot,G=At,oe=Xe;return s(),_("div",Ede,[j(E,{title:"Report Transaction"}),e("div",Rde,[e("div",Jde,[e("div",Kde,[ae(e("select",{class:"","onUpdate:modelValue":Z[0]||(Z[0]=se=>Ee(p)?p.value=se:null)},Zde,512),[[We,t(p)]])]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:Z[1]||(Z[1]=se=>P())},[j(H),F(),Wde]),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:Z[2]||(Z[2]=se=>N())},[j(ve),F(),Qde])]),j(z,{thead:t(R),selected:t(b),onSetSelected:Z[3]||(Z[3]=se=>b.value=se),tbody:t(y),fnCallData:S,scrolling:t(v),onSetScrollingPage:Z[4]||(Z[4]=se=>t(v).page=se),onDoFilter:Z[5]||(Z[5]=se=>A())},{status:Q(({item:se})=>[e("div",{class:Ue(["text-white text-xs px-2 py-1 rounded-lg",a(se)?"bg-green-600":"bg-red-600"])},l(a(se)?"Done":"Not Done"),3)]),val_ticket:Q(({item:se})=>[se.val_ticket?(s(),pe(le,{key:1})):(s(),pe(Ie,{key:0}))]),uj_asst_opt:Q(({item:se})=>{var _e;return[F(l((_e=se.uj)==null?void 0:_e.asst_opt),1)]}),pvr_had_detail:Q(({item:se})=>[se.pvr_had_detail?(s(),pe(le,{key:1})):(s(),pe(Ie,{key:0}))]),susut_bruto_a:Q(({item:se})=>[F(l(t(d)(se.ticket_a_bruto)),1)]),susut_tara_a:Q(({item:se})=>[F(l(t(d)(se.ticket_a_tara)),1)]),susut_netto_a:Q(({item:se})=>[F(l(t(d)(se.ticket_a_netto)),1)]),susut_bruto_b:Q(({item:se})=>[F(l(t(d)(se.ticket_b_bruto)),1)]),susut_tara_b:Q(({item:se})=>[F(l(t(d)(se.ticket_b_tara)),1)]),susut_netto_b:Q(({item:se})=>[F(l(t(d)(se.ticket_b_netto)),1)]),susut_bruto_b_a:Q(({item:se})=>[F(l(re(se.ticket_a_bruto,se.ticket_b_bruto)),1)]),susut_tara_b_a:Q(({item:se})=>[F(l(re(se.ticket_a_tara,se.ticket_b_tara)),1)]),susut_netto_b_a:Q(({item:se})=>[F(l(re(se.ticket_a_netto,se.ticket_b_netto)),1)]),susut_bruto_b_a_persen:Q(({item:se})=>[F(l(J(se.ticket_a_bruto,se.ticket_b_bruto)),1)]),susut_tara_b_a_persen:Q(({item:se})=>[F(l(J(se.ticket_a_tara,se.ticket_b_tara)),1)]),susut_netto_b_a_persen:Q(({item:se})=>[F(l(J(se.ticket_a_netto,se.ticket_b_netto)),1)]),_:2},1032,["thead","selected","tbody","scrolling"])]),t(T)?(s(),_("div",Xde,[e("div",e_e,[e("div",t_e,[j(G,{style:{color:"black",cursor:"pointer"},onClick:Z[6]||(Z[6]=se=>P())})]),e("iframe",{ref:"iframe",width:"100%",height:"100%",src:t(q).dataBase64},null,8,l_e),e("div",{style:{position:"absolute",top:"12px",right:"88px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:Z[7]||(Z[7]=se=>L())})])])):O("",!0),ae(e("div",a_e,[e("div",s_e,[j(oe,{title:"Detail Information",fn:()=>{te.value=!1,I.show_confirm=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",o_e,[e("div",n_e,[e("div",r_e,[i_e,e("div",d_e,l(t(ce).xto)+" ",1)]),e("div",__e,[u_e,e("div",c_e,l(t(ce).tipe),1)]),e("div",p_e,[v_e,e("div",f_e,l(t(ce).jenis),1)]),e("div",m_e,[h_e,e("div",b_e,l(t(ce).note_for_remarks),1)])]),e("div",y_e,[e("table",x_e,[w_e,(s(!0),_(ye,null,Ae(t(ce).details,se=>(s(),_("tr",null,[e("td",g_e,l(se.ordinal)+". ",1),e("td",$_e,l(se.xdesc)+" "+l(se.qty<=1?"":t(d)(se.qty||0)+" x Rp."+t(d)(se.harga||0)),1),k_e,e("td",j_e,l(t(d)(se.qty*se.harga)),1)]))),256)),e("tr",D_e,[S_e,T_e,e("th",C_e,l(t(d)(t(ce).harga)),1)])])]),e("div",P_e,[e("table",A_e,[M_e,(s(!0),_(ye,null,Ae(t(ce).details2,se=>(s(),_("tr",null,[e("td",O_e,l(se.ordinal)+". ",1),e("td",N_e,l(se.ac_account_code),1),e("td",F_e,l(se.description)+" "+l(se.qty<=1?"":t(d)(se.qty||0)+" x Rp."+t(d)(se.amount||0)),1),I_e,e("td",Y_e,l(t(d)(se.qty*se.amount)),1)]))),256)),e("tr",B_e,[q_e,U_e,e("th",H_e,l(t(d)(t(U))),1)])])])]),e("div",z_e,[e("button",{class:"rounded m-1",onClick:Z[8]||(Z[8]=se=>te.value=!1)}," Cancel ")])])],512),[[Be,t(te)]])])}})}},kwe=Object.freeze(Object.defineProperty({__proto__:null,default:V_e},Symbol.toStringTag,{value:"Module"})),L_e={class:"box-fixed"},E_e={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},R_e={class:"w-full flex flex-col items-center grow overflow-auto"},J_e={class:"w-full flex flex-row flex-wrap"},K_e={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},G_e=e("label",{for:""},"Tipe",-1),Z_e=["disabled"],W_e=e("option",{value:"Lainnya"},"Lainnya",-1),Q_e=e("option",{value:"Kerajinan"},"Kerajinan",-1),X_e=e("option",{value:"BonusTrip"},"BonusTrip",-1),eue=[W_e,Q_e,X_e],tue={class:"text-red-500"},lue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},aue=e("label",{for:""},"Tanggal",-1),sue={key:0,class:"card-border"},oue={key:1},nue={class:"text-red-500"},rue={class:"w-full sm:w-8/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},iue=e("label",{for:""},"Pekerja",-1),due={class:"text-red-500"},_ue={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},uue=e("label",{for:""},"Nominal",-1),cue={class:"text-red-500"},pue={class:"w-full sm:w-6/12 md:w-full lg:w-full flex flex-col flex-wrap p-1"},vue=e("label",{for:""},"Note",-1),fue=["disabled"],mue={class:"text-red-500"},hue={class:"p-1 w-full"},bue={class:"w-full flex items-center justify-end"},yue={__name:"salary_bonus",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),f={id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:"",attachment_1_type:""},d=u(ie({},f)),a=ke("token"),r=u({}),p={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},ktp_no:{tcon:"IconsNumber",text:"No KTP",val:""},sim_no:{tcon:"IconsCreditCard",text:"No SIM",val:""}},id:"",name:"",title:""},i=u(JSON.parse(JSON.stringify(p))),c=u([]),h=()=>Y(this,null,function*(){$().loading_full=!0;const{data:v,error:w,status:m}=yield W("/salary_bonus_load_local",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w);return}c.value=v.value.list_employee}),k=ne(()=>{let v=[];return c.value.forEach((w,m)=>{let S=JSON.parse(JSON.stringify(p));S._.id.val=w.id,S._.name.val=w.name,S._.ktp_no.val=w.ktp_no,S._.sim_no.val=w.sim_no,S.id=w.id,S.name=w.name,S.title=(w.ktp_no||"")+" "+(w.sim_no||""),v.push(JSON.parse(JSON.stringify(S)))}),v}),C=u([]),y=()=>Y(this,null,function*(){$().loading_full=!0,r.value={};const v=new FormData;v.append("type",d.value.type),v.append("tanggal",d.value.tanggal?x(d.value.tanggal).format("Y-MM-DD"):""),v.append("employee_id",i.value.id),v.append("nominal",d.value.nominal),v.append("note",d.value.note),v.append("attachment_1",d.value.attachment_1),v.append("attachment_1_preview",d.value.attachment_1_preview);let w="post",m=d.value.id;m==""||(v.append("id",m),v.append("_method","PUT"));const{data:S,error:A,status:D}=yield W("/salary_bonus",{method:w,headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:v,retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A,r);return}if(d.value.employee={name:i.value._.name.val,ktp_no:i.value._.ktp_no.val,sim_no:i.value._.sim_no.val},d.value.attachment_1_type=S.value.attachment_1_type,C.value=S.value.details,m<=0)d.value.id=S.value.id,d.value.created_at=S.value.created_at,d.value.updated_at=S.value.updated_at,o.p_data.unshift(d.value);else{d.value.updated_at=S.value.updated_at;let M=o.p_data.map(T=>T.id).indexOf(m);M>-1&&o.p_data.splice(M,1,ie({},d.value))}o.fnClose()}),g=ne(()=>!!d.value.val1),b=()=>Y(this,null,function*(){$().loading_full=!0;const{data:v,error:w,status:m}=yield W("/salary_bonus",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w);return}o.is_copy&&(d.value.val=0,d.value.val1=0);let S=v.value.data;d.value=S,i.value._.id.val=S.employee.id,i.value._.name.val=S.employee.name,i.value._.ktp_no.val=S.employee.ktp_no,i.value._.sim_no.val=S.employee.sim_no,i.value.id=S.employee.id,i.value.name=S.employee.name,i.value.ktp_no=(S.employee.ktp_no||"")+" "+(S.employee.sim_no||"")});return je(()=>o.show,(v,w)=>Y(this,null,function*(){v==!0&&(yield h(),d.value=ie({},f),i.value=JSON.parse(JSON.stringify(p)),C.value=[],r.value={},o.id!=0&&b())}),{immediate:!0}),(v,w)=>{const m=Xe,S=Vt("vue-date-picker"),A=zt,D=$l,M=dl,T=Xt;return ae((s(),_("section",L_e,[e("div",null,[j(m,{title:"Form Salary Additional",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",E_e,[e("div",R_e,[e("div",J_e,[e("div",K_e,[G_e,ae(e("select",{"onUpdate:modelValue":w[0]||(w[0]=q=>t(d).type=q),disabled:t(g)},eue,8,Z_e),[[We,t(d).type]]),e("p",tue,l(t(r).type),1)]),e("div",lue,[aue,t(g)?(s(),_("div",sue,l(t(x)(t(d).tanggal).format("DD-MM-Y")),1)):(s(),_("div",oue,[j(A,null,{default:Q(()=>[j(S,{modelValue:t(d).tanggal,"onUpdate:modelValue":w[1]||(w[1]=q=>t(d).tanggal=q),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})])),e("p",nue,l(t(r).tanggal),1)]),e("div",rue,[iue,j(D,{arr:t(k),selected:t(i),pure:p,onSetSelected:w[2]||(w[2]=q=>i.value=q),disabled:t(g)},null,8,["arr","selected","disabled"]),e("p",due,l(t(r).employee_id),1)]),e("div",_ue,[uue,e("div",null,[j(M,{class:"w-full h-full p-1",type:"text",value:t(d).nominal||0,onInput:w[3]||(w[3]=q=>t(d).nominal=q),disabled:t(g)},null,8,["value","disabled"])]),e("p",cue,l(t(r).nominal),1)]),e("div",pue,[vue,e("div",null,[ae(e("textarea",{"onUpdate:modelValue":w[4]||(w[4]=q=>t(d).note=q),disabled:t(g)},null,8,fue),[[Te,t(d).note]])]),e("p",mue,l(t(r).nominal),1)]),e("div",hue,[j(T,{label:"Attachment",value:t(d).attachment_1_preview,onSetFile:w[5]||(w[5]=q=>t(d).attachment_1=q),onSetPreview:w[6]||(w[6]=q=>t(d).attachment_1_preview=q),can_remove:!0},null,8,["value"])])])]),e("div",bue,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:w[7]||(w[7]=q=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:w[8]||(w[8]=ze(q=>y(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},Is=yue,jwe=Object.freeze(Object.defineProperty({__proto__:null,default:Is},Symbol.toStringTag,{value:"Module"}));const Bl=n=>(nt("data-v-9d945206"),n=n(),rt(),n),xue={class:"box-fixed"},wue={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},gue={class:"w-full flex flex-col items-center grow overflow-auto"},$ue={class:"w-full flex flex-row flex-wrap"},kue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},jue=Bl(()=>e("label",{for:""},"Tipe",-1)),Due={class:"card-border"},Sue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Tue=Bl(()=>e("label",{for:""},"Tanggal",-1)),Cue={class:"card-border"},Pue={class:"w-full sm:w-8/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Aue=Bl(()=>e("label",{for:""},"Pekerja",-1)),Mue={class:"card-border"},Oue={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nue=Bl(()=>e("label",{for:""},"Nominal",-1)),Fue={class:"card-border"},Iue={class:"w-full sm:w-6/12 md:w-full lg:w-full flex flex-col flex-wrap p-1"},Yue=Bl(()=>e("label",{for:""},"Note",-1)),Bue={class:"card-border"},que={class:"p-1 w-full"},Uue={class:"w-full flex items-center justify-end"},Hue={class:"w-full flex flex-wrap p-3 items-center"},zue=Bl(()=>e("div",null," Di Validasi oleh : ",-1)),Vue={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Lue={key:0},Eue={key:1},Rue={key:2},Jue={__name:"salary_bonus_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""},a=u(ie({},d)),r=ke("token"),p=u({}),i=u(null);u([]);const h=u(JSON.parse(JSON.stringify({_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},ktp_no:{tcon:"IconsNumber",text:"No KTP",val:""},sim_no:{tcon:"IconsCreditCard",text:"No SIM",val:""}},id:"",name:"",title:""}))),k=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const y=new FormData;let g="post",b=o.id;b==0||(y.append("id",b),y.append("_method","PUT"));const{data:v,error:w,status:m}=yield W("/salary_bonus_validasi",{method:g,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:y,retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w,p);return}a.value.val=v.value.val,a.value.val_user=v.value.val_user,a.value.val_by=v.value.val_by,a.value.val_at=v.value.val_at,a.value.val1=v.value.val1,a.value.val1_user=v.value.val1_user,a.value.val1_by=v.value.val1_by,a.value.val1_at=v.value.val1_at,a.value.val2=v.value.val2,a.value.val2_user=v.value.val2_user,a.value.val2_by=v.value.val2_by,a.value.val2_at=v.value.val2_at,a.value.val3=v.value.val3,a.value.val3_user=v.value.val3_user,a.value.val3_by=v.value.val3_by,a.value.val3_at=v.value.val3_at;let S=o.p_data.map(A=>A.id).indexOf(o.id);S>-1&&o.p_data.splice(S,1,ie({},a.value)),o.fnClose()}),C=()=>Y(this,null,function*(){$().loading_full=!0;const{data:y,error:g,status:b}=yield W("/salary_bonus",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,b.value==="error"){X().trigger(g);return}let v=y.value.data;a.value=v,h.value._.id.val=v.employee.id,h.value._.name.val=v.employee.name,h.value._.ktp_no.val=v.employee.ktp_no,h.value._.sim_no.val=v.employee.sim_no,h.value.id=v.employee.id,h.value.name=v.employee.name,h.value.ktp_no=(v.employee.ktp_no||"")+" "+(v.employee.sim_no||"")});return je(()=>o.show,(y,g)=>{y==!0&&(a.value=ie({},d),o.is_view==!1&&setTimeout(()=>{i.value.focus()},1),C())},{immediate:!0}),(y,g)=>{const b=Xe,v=hl,w=Xt;return ae((s(),_("section",xue,[e("div",null,[j(b,{title:"Form Salary Additional Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",wue,[e("div",gue,[e("div",$ue,[e("div",kue,[jue,e("div",Due,l(t(a).type),1)]),e("div",Sue,[Tue,e("div",Cue,l(t(x)(t(a).tanggal).format("DD-MM-Y")),1)]),e("div",Pue,[Aue,e("div",Mue,[j(v,{selected:t(h)},null,8,["selected"])])]),e("div",Oue,[Nue,e("div",Fue,l(t(f)(t(a).nominal||0)),1)]),e("div",Iue,[Yue,e("div",Bue,l(t(a).note),1)]),e("div",que,[j(w,{label:"Attachment",value:t(a).attachment_1_preview,onSetFile:g[0]||(g[0]=m=>t(a).attachment_1=m),onSetPreview:g[1]||(g[1]=m=>t(a).attachment_1_preview=m)},null,8,["value"])])])]),e("div",Uue,[e("div",Hue,[zue,t(a).val1||t(a).val2||t(a).val3?(s(),_("div",Vue,[t(a).val1?(s(),_("div",Lue," App 1 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val2?(s(),_("div",Eue," App 2 : "+l(t(a).val2_by.username)+" ( "+l(t(a).val2_at?t(x)(t(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0),t(a).val3?(s(),_("div",Rue," App 2 : "+l(t(a).val3_by.username)+" ( "+l(t(a).val3_at?t(x)(t(a).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:g[2]||(g[2]=m=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:g[3]||(g[3]=ze(m=>k(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},Ys=Oe(Jue,[["__scopeId","data-v-9d945206"]]),Dwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ys},Symbol.toStringTag,{value:"Module"})),Kue={class:"w-full h-full flex flex-col"},Gue={class:"w-full flex grow flex-col overflow-auto h-0"},Zue={class:"w-full flex justify-between flex-wrap"},Wue={class:"grow flex"},Que={class:"m-1"},Xue=e("option",{value:"undone"},"Undone",-1),ece=e("option",{value:"done"},"Done",-1),tce=e("option",{value:"deleted"},"Trash",-1),lce=e("option",{value:"all"},"All",-1),ace=[Xue,ece,tce,lce],sce=e("span",{class:"text-xs ml-1"}," Download ",-1),oce={style:{"min-width":"350px","text-wrap":"wrap"}},nce={class:"grow mb-5"},rce={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=z=>z.deleted==1?"!bg-red-400":z.val1>0&&z.val2>0&&z.val3>0&&z.salary_paid_id>0?"!bg-blue-300":"",d=u("undone");je(()=>d.value,z=>{b()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset(),a.sort="created_at:desc";const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let z=[];$().loading_full=!0;const{data:G,error:oe,status:se}=yield W("/salary_bonuses",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,se.value==="error"?(X().trigger(oe),{salary_bonuses:z}):(z=G.value.data,{salary_bonuses:z})}),"$tya7A7egnO")})),o=yield o,x(),o),i=u(p.value.salary_bonuses);u("");const c=u({field:"created_at",by:"desc"}),h=u(-1),k=ne(()=>i.value[h.value]),C=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),y=()=>{a.like="";let z=JSON.parse(JSON.stringify($()._tv.global_keyword));z!=""&&(a.like=`id:%${z}%,employee_name:%${z}%`),a.sort="",c.value.field&&(a.sort=c.value.field+":"+c.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)},g=()=>Y(this,null,function*(){$().loading_full=!0,C.value.may_get_data=!1,a.page=C.value.page,a.page==1&&(i.value=[]),a.first_row&&delete a.first_row,a.page>1&&(a.first_row=JSON.stringify(i.value[0])),a.filter_status=d.value;const{data:z,error:G,status:oe}=yield W("/salary_bonuses",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,C.value.may_get_data=!0,oe.value==="error"){X().trigger(G);return}C.value.page==1?i.value=z.value.data:C.value.page>1&&(i.value=[...i.value,...z.value.data]),z.value.data.length==0&&(C.value.is_last_record=!0),$()._tv.filter_box=!1}),b=()=>{h.value=-1,h.value=-1,C.value.page=1,C.value.is_last_record=!1,y(),g()},v=u(!1),w=u(0),m=u(0),S=u(!1),A=()=>{w.value=0,S.value=!1,m.value=!1,v.value=!0},{display:D}=Je();Dt(Je());const M=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=i.value[h.value].id,S.value=!1,m.value=!1,v.value=!0)},T=u(!1),q=u(0),P=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=i.value[h.value].id,S.value=!1,m.value=!1,T.value=!0)},N=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=i.value[h.value].id,S.value=!0,m.value=!1,T.value=!0)},L=u(!1),R=u({}),J=u(!1),re=u(""),te=()=>Y(this,null,function*(){J.value&&(J.value=!1)}),ee=()=>{h.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(re.value="",R.value={id:i.value[h.value].id},J.value=!0)};je(()=>re.value,z=>{z.trim().length>0?L.value=!0:L.value=!1},{immediate:!1});const ce=()=>Y(this,null,function*(){$().loading_full=!0;const z=new FormData;z.append("id",i.value[h.value].id),z.append("deleted_reason",re.value),z.append("_method","DELETE");const{data:G,error:oe,status:se}=yield W("/salary_bonus",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:z,retry:0});if($().loading_full=!1,se.value==="error"){X().trigger(oe);return}let _e=ie({},i.value[h.value]);_e.deleted=G.value.deleted,_e.deleted_user=G.value.deleted_user,_e.deleted_at=G.value.deleted_at,_e.deleted_by=G.value.deleted_by,_e.deleted_reason=G.value.deleted_reason,d.value!="all"?i.value.splice(h.value,1):i.value.splice(h.value,1,ie({},_e)),h.value=-1,J.value=!1}),U=u([{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val1",label:"Staff",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"SPV",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"MGR",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"Tanggal",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"type",label:"Tipe",filter_on:1,type:"string"},{key:"employee_name",label:"Nama",freeze:1,filter_on:1,type:"string"},{key:"employee_ktp_no",label:"No KTP",filter_on:1,type:"string"},{key:"employee_sim_no",label:"No SIM",filter_on:1,type:"string"},{key:"nominal",label:"Nominal",class:" justify-end",type:"number"},{key:"note",label:"Note",filter_on:1,type:"string"},{key:"attachment_1_type",label:"File",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]),I=ne(()=>["undone","all"].indexOf(d.value)>-1&&K().checkPermission("salary_bonus.create")),Z=ne(()=>h.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&(K().checkPermission("salary_bonus.val1")&&[void 0,0,1].indexOf(k.value.val1)>-1||K().checkPermission("salary_bonus.val2")&&[void 0,0].indexOf(k.value.val2)>-1)&&K().checkPermissions(["salary_bonus.modify"])),E=ne(()=>h.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&(K().checkPermission("salary_bonus.val1")&&[void 0,0].indexOf(k.value.val1)>-1||K().checkPermission("salary_bonus.val2")&&[void 0,0].indexOf(k.value.val2)>-1||K().checkPermission("salary_bonus.val3")&&[void 0,0].indexOf(k.value.val3)>-1)),H=ne(()=>h.value>-1&&K().checkPermission("salary_bonus.remove")&&[void 0,0].indexOf(k.value.deleted)>-1),{downloadFile:ve,viewFile:Ie}=jt(),le=()=>Y(this,null,function*(){y(),$().loading_full=!0,a.filter_status=d.value;const{data:z,error:G,status:oe}=yield W("/salary_bonus/download_excel",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,oe.value==="error"){X().trigger(G);return}ve(z.value)});return(z,G)=>{const oe=_t,se=gt,_e=Pt,ue=Nt,B=Zt,de=Ft,V=Yt,me=$t,Me=ft,tt=ea,ut=Ot,he=It,Re=Is,Ne=Ys;return s(),_("div",Kue,[j(oe,{title:"List Salary Additional"}),e("div",Gue,[e("div",Zue,[e("div",Wue,[e("div",Que,[ae(e("select",{class:"","onUpdate:modelValue":G[0]||(G[0]=Ze=>Ee(d)?d.value=Ze:null)},ace,512),[[We,t(d)]])]),t(I)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:G[1]||(G[1]=Ze=>A())},[j(se)])):O("",!0),t(Z)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:G[2]||(G[2]=Ze=>M())},[j(_e)])):O("",!0),t(h)>-1?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:G[3]||(G[3]=Ze=>N())},[j(ue)])):O("",!0),t(H)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:G[4]||(G[4]=Ze=>ee())},[j(B)])):O("",!0),t(E)?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:G[5]||(G[5]=Ze=>P())},[j(de)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:G[6]||(G[6]=Ze=>le())},[j(V),F(),sce])])]),j(ut,{thead:t(U),selected:t(h),onSetSelected:G[7]||(G[7]=Ze=>h.value=Ze),tbody:t(i),fnCallData:g,scrolling:t(C),onSetScrollingPage:G[8]||(G[8]=Ze=>t(C).page=Ze),onDoFilter:G[9]||(G[9]=Ze=>b()),rowBgColor:f},{val1:Q(({item:Ze})=>[Ze.val1?(s(),pe(Me,{key:1})):(s(),pe(me,{key:0}))]),val2:Q(({item:Ze})=>[Ze.val2?(s(),pe(Me,{key:1})):(s(),pe(me,{key:0}))]),val3:Q(({item:Ze})=>[Ze.val3?(s(),pe(Me,{key:1})):(s(),pe(me,{key:0}))]),employee_name:Q(({item:Ze})=>{var Ve;return[F(l((Ve=Ze.employee)==null?void 0:Ve.name),1)]}),employee_ktp_no:Q(({item:Ze})=>{var Ve;return[F(l((Ve=Ze.employee)==null?void 0:Ve.ktp_no),1)]}),employee_sim_no:Q(({item:Ze})=>{var Ve;return[F(l((Ve=Ze.employee)==null?void 0:Ve.sim_no),1)]}),note:Q(({item:Ze})=>[e("div",oce,l(Ze.note),1)]),attachment_1_type:Q(({item:Ze})=>[j(tt,{value:Ze.attachment_1_type},null,8,["value"])]),deleted_by_username:Q(({item:Ze})=>{var Ve;return[F(l((Ve=Ze.deleted_by)==null?void 0:Ve.username),1)]}),req_deleted_by_username:Q(({item:Ze})=>{var Ve;return[F(l((Ve=Ze.req_deleted_by)==null?void 0:Ve.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),j(he,{type:"delete",show:t(J),data:t(R),fnClose:te,fnConfirm:ce,enabledOk:t(L)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",nce,[ae(e("textarea",{"onUpdate:modelValue":G[10]||(G[10]=Ze=>Ee(re)?re.value=Ze:null)},null,512),[[Te,t(re)]])])]),_:1},8,["show","data","enabledOk"]),j(Re,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(i),is_copy:t(m)},null,8,["show","fnClose","id","p_data","is_copy"]),j(Ne,{show:t(T),fnClose:()=>{T.value=!1},id:t(q),p_data:t(i),is_view:t(S)},null,8,["show","fnClose","id","p_data","is_view"])])}})}},Swe=Object.freeze(Object.defineProperty({__proto__:null,default:rce},Symbol.toStringTag,{value:"Module"})),ice={name:"MdiTableArrowUp"},dce={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},_ce=e("path",{fill:"currentColor",d:"M4 3h14a2 2 0 0 1 2 2v7.08a6 6 0 0 0-4.32.92H12v4h1.08c-.11.68-.11 1.35 0 2H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2m0 4v4h6V7zm8 0v4h6V7zm-8 6v4h6v-4zm17.94 4.5h-2v4h-2v-4h-2l3-3z"},null,-1),uce=[_ce];function cce(n,o,x,f,d,a){return s(),_("svg",dce,uce)}const pa=Oe(ice,[["render",cce]]),Twe=Object.freeze(Object.defineProperty({__proto__:null,default:pa},Symbol.toStringTag,{value:"Module"})),pce={class:"box-fixed"},vce={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},fce={class:"w-full flex flex-col items-center grow overflow-auto"},mce={class:"w-full flex flex-row flex-wrap"},hce={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},bce=e("label",{for:""},"Period End",-1),yce={key:0,class:"card-border"},xce={key:1},wce={class:"text-red-500"},gce={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},$ce=e("label",{for:""},"Period Part",-1),kce={key:0,class:"card-border"},jce={key:1},Dce=e("option",{value:"1"},"1",-1),Sce=e("option",{value:"2"},"2",-1),Tce=[Dce,Sce],Cce={class:"text-red-500"},Pce={key:0,class:"w-full p-1"},Ace=e("div",{class:"font-bold"}," Filter Nama ",-1),Mce={key:1,class:"w-full flex p-1 justify-between flex-wrap"},Oce={class:"w-full",role:"sticky"},Nce={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Fce=e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"12",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1),Ice={class:"sticky top-7 !z-[2]"},Yce=e("th",null,"No",-1),Bce=e("th",null,"Jabatan",-1),qce=e("th",null,"Nama Pekerja",-1),Uce=e("th",null,"No KTP",-1),Hce=e("th",null,"Rek No",-1),zce=e("th",null,"Rek Nama",-1),Vce=e("th",null,"Bank Name",-1),Lce={class:"text-sm"},Ece={class:"text-sm"},Rce={class:"text-sm"},Jce={class:"text-sm"},Kce={class:"text-sm"},Gce={ref:"to_move"},Zce=["data-index"],Wce={class:"w-full flex items-center justify-end"},Qce={__name:"salary_paid",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:"",period_end:new Date,period_part:1},a=u(ie({},d)),r=ke("token"),p=u({}),i=u([]),c=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const m=new FormData;m.append("period_end",a.value.period_end?x(a.value.period_end).format("Y-MM"):""),m.append("period_part",a.value.period_part);let S="post",A=a.value.id;A==""||(m.append("id",A),m.append("_method","PUT"));const{data:D,error:M,status:T}=yield W("/salary_paid",{method:S,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:m,retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M,p);return}if(i.value=D.value.details,A<=0)a.value.id=D.value.id,a.value.created_at=D.value.created_at,a.value.updated_at=D.value.updated_at,o.p_data.unshift(a.value);else{a.value.updated_at=D.value.updated_at;let q=o.p_data.map(P=>P.id).indexOf(A);q>-1&&o.p_data.splice(q,1,ie({},a.value))}});ne(()=>{let m=0;return i.value.forEach(S=>{m+=parseFloat(S.standby_nominal)}),m});const h=ne(()=>{let m=0;return i.value.forEach(S=>{m+=parseFloat(S.sb_gaji)}),m}),k=ne(()=>{let m=0;return i.value.forEach(S=>{m+=parseFloat(S.sb_makan)}),m}),C=ne(()=>{let m=0;return i.value.forEach(S=>{m+=parseFloat(S.sb_dinas)}),m}),y=ne(()=>{let m=0;return i.value.forEach(S=>{m+=parseFloat(S.salary_bonus_nominal)}),m}),g=ne(()=>a.value.val&&a.value.val1||K().checkPermission("salary_paid.val")&&a.value.val||K().checkPermission("salary_paid.val1")&&a.value.val1),b=()=>Y(this,null,function*(){$().loading_full=!0;const{data:m,error:S,status:A}=yield W("/salary_paid",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,A.value==="error"){X().trigger(S);return}a.value=m.value.data,o.is_copy&&(a.value.val=0,a.value.val1=0),i.value=m.value.data.details}),v=u(""),w=ne(()=>v.value!=""?i.value.filter(m=>m.employee.name.toLowerCase().includes(v.value.toLowerCase())):i.value);return je(()=>o.show,(m,S)=>{m==!0&&(a.value=ie({},d),i.value=[],p.value={},o.id!=0&&b())},{immediate:!0}),(m,S)=>{const A=Xe,D=Vt("vue-date-picker"),M=zt;return ae((s(),_("section",pce,[e("div",null,[j(A,{title:"Form Salary Paid",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",vce,[e("div",fce,[e("div",mce,[e("div",hce,[bce,t(a).id?(s(),_("div",yce,l(t(x)(t(a).period_end).format("MM-Y")),1)):(s(),_("div",xce,[j(M,null,{default:Q(()=>[j(D,{modelValue:t(a).period_end,"onUpdate:modelValue":S[0]||(S[0]=T=>t(a).period_end=T),format:"MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"","month-picker":""},null,8,["modelValue"])]),_:1})])),e("p",wce,l(t(p).period_end),1)]),e("div",gce,[$ce,t(a).id?(s(),_("div",kce,l(t(a).period_part),1)):(s(),_("div",jce,[ae(e("select",{"onUpdate:modelValue":S[1]||(S[1]=T=>t(a).period_part=T)},Tce,512),[[We,t(a).period_part]])])),e("p",Cce,l(t(p).period_part),1)])]),t(i).length?(s(),_("div",Pce,[Ace,ae(e("input",{class:"",type:"text","onUpdate:modelValue":S[2]||(S[2]=T=>Ee(v)?v.value=T:null),name:"search",placeholder:"Nama"},null,512),[[Te,t(v)]])])):O("",!0),t(w).length?(s(),_("div",Mce,[e("div",Oce,[e("table",Nce,[e("thead",null,[Fce,e("tr",Ice,[Yce,Bce,qce,Uce,Hce,zce,Vce,e("th",null,[F("SB.Gaji "),e("span",Lce,"("+l(t(f)(t(h)||0))+")",1)]),e("th",null,[F("SB.Makan "),e("span",Ece,"("+l(t(f)(t(k)||0))+")",1)]),e("th",null,[F("SB.Dinas "),e("span",Rce,"("+l(t(f)(t(C)||0))+")",1)]),e("th",null,[F("Nominal Bonus "),e("span",Jce,"("+l(t(f)(t(y)||0))+")",1)]),e("th",null,[F("Total "),e("span",Kce,"("+l(t(f)(t(h)+t(k)+t(C)+t(y)||0))+")",1)])])]),e("tbody",Gce,[(s(!0),_(ye,null,Ae(t(w),(T,q)=>{var P,N,L,R,J,re,te;return s(),_(ye,{key:q},[T.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":q},[e("td",null,l(q+1)+".",1),e("td",null,l((P=T.employee)==null?void 0:P.role),1),e("td",null,l((N=T.employee)==null?void 0:N.name),1),e("td",null,l((L=T.employee)==null?void 0:L.ktp_no),1),e("td",null,l((R=T.employee)==null?void 0:R.rek_no),1),e("td",null,l((J=T.employee)==null?void 0:J.rek_name),1),e("td",null,l((te=(re=T.employee)==null?void 0:re.bank)==null?void 0:te.code),1),e("td",null,l(t(f)(T.sb_gaji)),1),e("td",null,l(t(f)(T.sb_makan)),1),e("td",null,l(t(f)(T.sb_dinas)),1),e("td",null,l(t(f)(T.salary_bonus_nominal)),1),e("td",null,l(t(f)(parseFloat(T.sb_gaji)+parseFloat(T.sb_makan)+parseFloat(T.sb_dinas)+parseFloat(T.salary_bonus_nominal))),1)],8,Zce)):O("",!0)],64)}),128))],512)])])])):O("",!0)]),e("div",Wce,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:S[3]||(S[3]=T=>n.fnClose())}," Cancel "),t(g)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:S[4]||(S[4]=ze(T=>c(),["prevent"]))}," Generate "+l(t(a).id==""?"& Save":""),1))])])])],512)),[[Be,n.show]])}}},Bs=Qce,Cwe=Object.freeze(Object.defineProperty({__proto__:null,default:Bs},Symbol.toStringTag,{value:"Module"}));const nl=n=>(nt("data-v-c0d56cdf"),n=n(),rt(),n),Xce={class:"box-fixed"},epe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},tpe={class:"w-full flex flex-col items-center grow overflow-auto"},lpe={class:"w-full flex flex-row flex-wrap"},ape={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},spe=nl(()=>e("label",{for:""},"Period End",-1)),ope={class:"card-border"},npe={class:"w-1/2 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},rpe=nl(()=>e("label",{for:""},"Period Part",-1)),ipe={class:"card-border"},dpe={key:0,class:"w-full p-1"},_pe=nl(()=>e("div",{class:"font-bold"}," Filter Nama ",-1)),upe={key:1,class:"w-full flex p-1 justify-between flex-wrap"},cpe={class:"w-full",role:"sticky"},ppe={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},vpe=nl(()=>e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"12",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1)),fpe={class:"sticky top-7 !z-[2]"},mpe=nl(()=>e("th",null,"No",-1)),hpe=nl(()=>e("th",null,"Jabatan",-1)),bpe=nl(()=>e("th",null,"Nama Pekerja",-1)),ype=nl(()=>e("th",null,"No KTP",-1)),xpe=nl(()=>e("th",null,"Rek No",-1)),wpe=nl(()=>e("th",null,"Rek Nama",-1)),gpe=nl(()=>e("th",null,"Bank Name",-1)),$pe={class:"text-sm"},kpe={class:"text-sm"},jpe={class:"text-sm"},Dpe={class:"text-sm"},Spe={class:"text-sm"},Tpe={ref:"to_move"},Cpe=["data-index"],Ppe={class:"w-full flex items-center justify-end"},Ape={class:"w-full flex flex-wrap p-3 items-center"},Mpe=nl(()=>e("div",null," Di Validasi oleh : ",-1)),Ope={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Npe={key:0},Fpe={__name:"salary_paid_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:""})),r=ke("token"),p=u({}),i=u(null),c=u([]),h=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const m=new FormData;let S="post",A=o.id;A==0||(m.append("id",A),m.append("_method","PUT"));const{data:D,error:M,status:T}=yield W("/salary_paid_validasi",{method:S,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:m,retry:0});if($().loading_full=!1,T.value==="error"){X().trigger(M,p);return}a.value.val1=D.value.val1,a.value.val1_user=D.value.val1_user,a.value.val1_by=D.value.val1_by,a.value.val1_at=D.value.val1_at,a.value.val2=D.value.val2,a.value.val2_user=D.value.val2_user,a.value.val2_by=D.value.val2_by,a.value.val2_at=D.value.val2_at,a.value.val3=D.value.val3,a.value.val3_user=D.value.val3_user,a.value.val3_by=D.value.val3_by,a.value.val3_at=D.value.val3_at;let q=o.p_data.map(P=>P.id).indexOf(o.id);q>-1&&o.p_data.splice(q,1,ie({},a.value)),o.fnClose()});ne(()=>{let m=0;return c.value.forEach(S=>{m+=parseFloat(S.standby_nominal)}),m});const k=ne(()=>{let m=0;return c.value.forEach(S=>{m+=parseFloat(S.sb_gaji)}),m}),C=ne(()=>{let m=0;return c.value.forEach(S=>{m+=parseFloat(S.sb_makan)}),m}),y=ne(()=>{let m=0;return c.value.forEach(S=>{m+=parseFloat(S.sb_dinas)}),m}),g=ne(()=>{let m=0;return c.value.forEach(S=>{m+=parseFloat(S.salary_bonus_nominal)}),m}),b=()=>Y(this,null,function*(){$().loading_full=!0;const{data:m,error:S,status:A}=yield W("/salary_paid",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,A.value==="error"){X().trigger(S);return}a.value=m.value.data,c.value=m.value.data.details});ne(()=>{let m=0;return c.value.forEach(S=>{S.p_status!="Remove"&&(m+=parseInt(S.amount))}),m}),ne(()=>!1);const v=u(""),w=ne(()=>v.value!=""?c.value.filter(m=>m.employee.name.toLowerCase().includes(v.value.toLowerCase())):c.value);return je(()=>o.show,(m,S)=>{m==!0&&(o.is_view==!1&&setTimeout(()=>{i.value.focus()},1),b())},{immediate:!0}),(m,S)=>{const A=Xe;return ae((s(),_("section",Xce,[e("div",null,[j(A,{title:"Form Master Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",epe,[e("div",tpe,[e("div",lpe,[e("div",ape,[spe,e("div",ope,l(t(x)(t(a).period_end).format("MM-Y")),1)]),e("div",npe,[rpe,e("div",ipe,l(t(a).period_part),1)])]),t(c).length?(s(),_("div",dpe,[_pe,ae(e("input",{class:"",type:"text","onUpdate:modelValue":S[0]||(S[0]=D=>Ee(v)?v.value=D:null),name:"search",placeholder:"Nama"},null,512),[[Te,t(v)]])])):O("",!0),t(w).length?(s(),_("div",upe,[e("div",cpe,[e("table",ppe,[e("thead",null,[vpe,e("tr",fpe,[mpe,hpe,bpe,ype,xpe,wpe,gpe,e("th",null,[F("SB.Gaji "),e("span",$pe,"("+l(t(f)(t(k)||0))+")",1)]),e("th",null,[F("SB.Makan "),e("span",kpe,"("+l(t(f)(t(C)||0))+")",1)]),e("th",null,[F("SB.Dinas "),e("span",jpe,"("+l(t(f)(t(y)||0))+")",1)]),e("th",null,[F("Nominal Bonus "),e("span",Dpe,"("+l(t(f)(t(g)||0))+")",1)]),e("th",null,[F("Total "),e("span",Spe,"("+l(t(f)(t(k)+t(C)+t(y)+t(g)||0))+")",1)])])]),e("tbody",Tpe,[(s(!0),_(ye,null,Ae(t(w),(D,M)=>{var T,q,P,N,L,R,J;return s(),_(ye,{key:M},[D.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":M},[e("td",null,l(M+1)+".",1),e("td",null,l((T=D.employee)==null?void 0:T.role),1),e("td",null,l((q=D.employee)==null?void 0:q.name),1),e("td",null,l((P=D.employee)==null?void 0:P.ktp_no),1),e("td",null,l((N=D.employee)==null?void 0:N.rek_no),1),e("td",null,l((L=D.employee)==null?void 0:L.rek_name),1),e("td",null,l((J=(R=D.employee)==null?void 0:R.bank)==null?void 0:J.code),1),e("td",null,l(t(f)(D.sb_gaji)),1),e("td",null,l(t(f)(D.sb_makan)),1),e("td",null,l(t(f)(D.sb_dinas)),1),e("td",null,l(t(f)(D.salary_bonus_nominal)),1),e("td",null,l(t(f)(parseFloat(D.sb_gaji)+parseFloat(D.sb_makan)+parseFloat(D.sb_dinas)+parseFloat(D.salary_bonus_nominal))),1)],8,Cpe)):O("",!0)],64)}),128))],512)])])])):O("",!0)]),e("div",Ppe,[e("div",Ape,[Mpe,t(a).val1||t(a).val2||t(a).val3?(s(),_("div",Ope,[t(a).val1?(s(),_("div",Npe," App 1 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:S[1]||(S[1]=D=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:S[2]||(S[2]=ze(D=>h(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},qs=Oe(Fpe,[["__scopeId","data-v-c0d56cdf"]]),Pwe=Object.freeze(Object.defineProperty({__proto__:null,default:qs},Symbol.toStringTag,{value:"Module"})),Ipe={class:"w-full h-full flex flex-col"},Ype={class:"w-full flex grow flex-col overflow-auto h-0"},Bpe={class:"w-full flex"},qpe={class:"w-full flex justify-center items-center grow h-0 p-1"},Upe={key:0,class:""},Hpe={class:"tacky"},zpe=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"Logistik"),e("th",null,"ID"),e("th",null,"Period End"),e("th",null,"Period Part"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),Vpe=["onClick"],Lpe={class:"flex items-center justify-center"},Epe={class:"bold"},Rpe={class:"grow mb-5"},Jpe={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="created_at:desc";const a=ke("token"),{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let U=[];$().loading_full=!0;const{data:I,error:Z,status:E}=yield W("/salary_paids",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});return $().loading_full=!1,E.value==="error"?(X().trigger(Z),{salary_paids:U}):(U=I.value.data,{salary_paids:U})}),"$5DNPjgzs1s")})),o=yield o,x(),o),p=u(r.value.salary_paids);u(""),u({field:"created_at",by:"desc"});const i=u(-1),c=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),h=u(null),k=()=>Y(this,null,function*(){$().loading_full=!0,c.value.may_get_data=!1,d.page=c.value.page,d.page==1&&(p.value=[]),d.first_row&&delete d.first_row,d.page>1&&(d.first_row=JSON.stringify(p.value[0]));const{data:U,error:I,status:Z}=yield W("/salary_paids",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,c.value.may_get_data=!0,Z.value==="error"){X().trigger(I);return}c.value.page==1?(p.value=U.value.data,h.value&&(h.value.scrollTop=0)):c.value.page>1&&(p.value=[...p.value,...U.value.data]),U.value.data.length==0&&(c.value.is_last_record=!0)}),C=()=>Y(this,null,function*(){if(!c.value.may_get_data)return;let U=h.value;if(U.scrollLeft!=c.value.scrollLeft){c.value.scrollLeft=U.scrollLeft;return}c.value.is_last_record||!(Math.round(U.scrollTop)+U.clientHeight>=U.scrollHeight-1)||(c.value.page++,yield k())});Ht();const y=u(!1),g=u(0),b=u(0),v=()=>{g.value=0,y.value=!0,b.value=!1},{display:w}=Je();Dt(Je());const m=()=>{i.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(g.value=p.value[i.value].id,y.value=!0,b.value=!1)},S=u(!1),A=u(0),D=()=>{i.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(A.value=p.value[i.value].id,b.value=!1,S.value=!0)},M=u(!1),T=u({}),q=u(!1),P=u(""),N=()=>Y(this,null,function*(){q.value&&(q.value=!1)});je(()=>P.value,U=>{U.trim().length>0?M.value=!0:M.value=!1},{immediate:!1});const L=()=>Y(this,null,function*(){$().loading_full=!0;const U=new FormData;U.append("id",p.value[i.value].id),U.append("deleted_reason",P.value),U.append("_method","DELETE");const{data:I,error:Z,status:E}=yield W("/salary_paid",{method:"post",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:U,retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}p.value.splice(i.value,1),i.value=-1,q.value=!1}),{downloadFile:R,viewFile:J}=jt(),re=u(!1),te=u({}),ee=()=>Y(this,null,function*(){$().loading_full=!0;const{data:U,error:I,status:Z}=yield W("/salary_paid/excel_download",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:p.value[i.value].id},retry:0});if($().loading_full=!1,Z.value==="error"){X().trigger(I);return}R(U.value)}),ce=()=>Y(this,null,function*(){$().loading_full=!0;const{data:U,error:I,status:Z}=yield W("/salary_paid/excel_download2",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:p.value[i.value].id},retry:0});if($().loading_full=!1,Z.value==="error"){X().trigger(I);return}R(U.value)});return(U,I)=>{const Z=_t,E=gt,H=Pt,ve=Ft,Ie=Yt,le=pa,z=$t,G=ft,oe=It,se=Bs,_e=qs,ue=Ll;return s(),_("div",Ipe,[j(Z,{title:"List Salary Paid"}),e("div",Ype,[e("div",Bpe,[("useUtils"in U?U.useUtils:t(K))().checkPermission("salary_paid.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[0]||(I[0]=B=>v())},[j(E)])):O("",!0),("useUtils"in U?U.useUtils:t(K))().checkPermissions(["salary_paid.modify"])?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[1]||(I[1]=B=>m())},[j(H)])):O("",!0),("useUtils"in U?U.useUtils:t(K))().checkPermissions(["salary_paid.val1","salary_paid.val2","salary_paid.val3"])?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[2]||(I[2]=B=>D())},[j(ve)])):O("",!0),t(i)>-1&&t(p)[t(i)].val1==1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[3]||(I[3]=B=>ee())},[j(Ie)])):O("",!0),t(i)>-1&&t(p)[t(i)].val1==1?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:I[4]||(I[4]=B=>ce())},[j(le)])):O("",!0)]),e("div",qpe,[t(p).length==0?(s(),_("div",Upe," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:h,onScroll:C},[e("table",Hpe,[zpe,e("tbody",null,[(s(!0),_(ye,null,Ae(t(p),(B,de)=>(s(),_("tr",{key:de,onClick:V=>i.value=de,class:Ue(t(i)==de?"active":"")},[e("td",null,[e("div",Lpe,[B.val1?(s(),pe(G,{key:1})):(s(),pe(z,{key:0}))])]),e("td",Epe,l(B.id),1),e("td",null,l(B.period_end?t(f)(B.period_end).format("MM-Y"):""),1),e("td",null,l(B.period_part),1),e("td",null,l(B.created_at?t(f)(B.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,l(B.updated_at?t(f)(B.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Vpe))),128))])])],544))])]),j(oe,{type:"delete",show:t(q),data:t(T),fnClose:N,fnConfirm:L,enabledOk:t(M)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",Rpe,[ae(e("textarea",{"onUpdate:modelValue":I[5]||(I[5]=B=>Ee(P)?P.value=B:null)},null,512),[[Te,t(P)]])])]),_:1},8,["show","data","enabledOk"]),j(se,{show:t(y),fnClose:()=>{y.value=!1},id:t(g),p_data:t(p),is_copy:t(b)},null,8,["show","fnClose","id","p_data","is_copy"]),j(_e,{show:t(S),fnClose:()=>{S.value=!1},id:t(A),p_data:t(p)},null,8,["show","fnClose","id","p_data"]),j(ue,{show:t(re),pdfContent:t(te),onClose:I[6]||(I[6]=B=>re.value=!t(re))},null,8,["show","pdfContent"])])}})}},Awe=Object.freeze(Object.defineProperty({__proto__:null,default:Jpe},Symbol.toStringTag,{value:"Module"})),Kpe={class:"box-fixed"},Gpe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Zpe={class:"w-full flex flex-col items-center grow overflow-auto"},Wpe={class:"w-full flex flex-row flex-wrap"},Qpe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Xpe=e("label",{for:""},"Period End",-1),eve={key:0,class:"card-border"},tve={key:1},lve={class:"text-red-500"},ave={key:0,class:"w-full sm:w-6/12 md:w-4/12 lg:w-4/12 p-1"},sve=e("div",{class:"font-bold"}," Filter Nama ",-1),ove={key:0,class:"w-full flex p-1 justify-between flex-wrap"},nve={class:"w-full",role:"sticky"},rve={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},ive=e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"44",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1),dve={class:"sticky top-7 !z-[2]"},_ve=e("th",{rowspan:"2"},"No",-1),uve=e("th",{rowspan:"2"},"ID",-1),cve=e("th",{rowspan:"2"},"Nama Pekerja",-1),pve=e("th",{rowspan:"2"},"Jabatan",-1),vve=e("th",{rowspan:"2"},"Tmpt Lahir",-1),fve=e("th",{rowspan:"2"},"Tgl Lahir",-1),mve=e("th",{rowspan:"2"},"TMK",-1),hve=e("th",{rowspan:"2"},"No KTP",-1),bve=e("th",{rowspan:"2"},"Alamat",-1),yve=e("th",{rowspan:"2"},"Status",-1),xve=e("th",{rowspan:"2"},"No Rek",-1),wve=e("th",{rowspan:"2"},"Nama Rek",-1),gve=e("th",{rowspan:"2"},"Nama Bank",-1),$ve={colspan:"3"},kve={class:"text-sm"},jve={rowspan:"2"},Dve={class:"text-sm"},Sve={rowspan:"2"},Tve={class:"text-sm"},Cve={colspan:"3"},Pve={class:"text-sm"},Ave={rowspan:"2"},Mve={class:"text-sm"},Ove={rowspan:"2"},Nve={class:"text-sm"},Fve={colspan:"3"},Ive={class:"text-sm"},Yve={rowspan:"2"},Bve={class:"text-sm"},qve={rowspan:"2"},Uve={class:"text-sm"},Hve={colspan:"4"},zve={class:"text-sm"},Vve={colspan:"4"},Lve={class:"text-sm"},Eve={colspan:"3",class:"whitespace-nowrap"},Rve={class:"text-sm"},Jve={rowspan:"2"},Kve={class:"text-sm"},Gve={rowspan:"2"},Zve={class:"text-sm"},Wve={rowspan:"2"},Qve={class:"text-sm"},Xve={rowspan:"2"},efe={class:"text-sm"},tfe={rowspan:"2"},lfe={class:"text-sm"},afe={class:"sticky top-[60px] !z-[2]"},sfe={class:"text-sm"},ofe={class:"text-sm"},nfe={class:"text-sm"},rfe={class:"text-sm"},ife={class:"text-sm"},dfe={class:"text-sm"},_fe={class:"text-sm"},ufe={class:"text-sm"},cfe={class:"text-sm"},pfe={class:"text-sm"},vfe={class:"text-sm"},ffe={class:"text-sm"},mfe={class:"text-sm"},hfe={class:"text-sm"},bfe={class:"text-sm"},yfe={class:"text-sm"},xfe={class:"text-sm"},wfe={class:"text-sm"},gfe={class:"text-sm"},$fe={class:"text-sm"},kfe={ref:"to_move"},jfe=["data-index"],Dfe={class:"w-full flex items-center justify-end"},Sfe={__name:"rpt_salary",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),d={id:"",period_end:new Date},a=u(ie({},d)),r=ke("token"),p=u({}),i=u([]),c=u([]),h=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const v=new FormData;v.append("period_end",a.value.period_end?x(a.value.period_end).format("Y-MM"):"");let w="post",m=a.value.id;m==""||(v.append("id",m),v.append("_method","PUT"));const{data:S,error:A,status:D}=yield W("/rpt_salary",{method:w,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:v,retry:0});if($().loading_full=!1,D.value==="error"){X().trigger(A,p);return}if(i.value=S.value.details,m<=0)a.value.id=S.value.id,a.value.created_at=S.value.created_at,a.value.updated_at=S.value.updated_at,o.p_data.unshift(a.value);else{a.value.updated_at=S.value.updated_at;let M=o.p_data.map(T=>T.id).indexOf(m);M>-1&&o.p_data.splice(M,1,ie({},a.value))}y(i.value)}),k=ne(()=>a.value.val&&a.value.val1||K().checkPermission("rpt_salary.val")&&a.value.val||K().checkPermission("rpt_salary.val1")&&a.value.val1),C=()=>Y(this,null,function*(){$().loading_full=!0;const{data:v,error:w,status:m}=yield W("/rpt_salary",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,m.value==="error"){X().trigger(w);return}a.value=v.value.data,o.is_copy&&(a.value.val=0,a.value.val1=0),i.value=v.value.data.details,y(v.value.data.details)}),y=v=>{let w={details:v,standby_1_ttl:0,standby_1_gaji:0,standby_1_makan:0,standby_1_dinas:0,perubahaan_lainnya_1_ttl:0,periode_1_ttl:0,standby_2_ttl:0,standby_2_gaji:0,standby_2_makan:0,standby_2_dinas:0,perubahaan_lainnya_2_ttl:0,perubahaan_kerajinan_ttl:0,periode_2_ttl:0,periode_ttl:0,trip_umum_ttl:0,trip_umum_gaji:0,trip_umum_makan:0,trip_umum_dinas:0,trip_lain_ttl:0,trip_lain_jlh:0,trip_lain_gaji:0,trip_lain_makan:0,trip_lain_dinas:0,trip_tunggu_ttl:0,trip_tunggu_jlh:0,trip_tunggu_gaji:0,trip_tunggu_dinas:0,bonus_trip_ttl:0,trip_jumlah:0,bonus_trip_gaji:0,bonus_trip_dinas:0,bonus_trip_perubahaan:0,potongan_trip:0,total:0,bpjs_kesehatan_ttl:0,bpjs_jamsos_ttl:0,total_grand:0};w.details.forEach(m=>{m.periode_1_ttl=parseFloat(m.sb_gaji)+parseFloat(m.sb_makan)+parseFloat(m.sb_dinas)+parseFloat(m.salary_bonus_nominal),m.trip_jumlah=m.trip_cpo+m.trip_pk+m.trip_tbs+m.trip_tbsk,m.bonus_trip_gaji=parseFloat(m.trip_cpo_bonus_gaji)+parseFloat(m.trip_pk_bonus_gaji)+parseFloat(m.trip_tbs_bonus_gaji)+parseFloat(m.trip_tbsk_bonus_gaji),m.bonus_trip_dinas=parseFloat(m.trip_cpo_bonus_dinas)+parseFloat(m.trip_pk_bonus_dinas)+parseFloat(m.trip_tbs_bonus_dinas)+parseFloat(m.trip_tbsk_bonus_dinas),m.periode_2_ttl=parseFloat(m.sb_gaji_2)+parseFloat(m.sb_makan_2)+parseFloat(m.sb_dinas_2)+parseFloat(m.salary_bonus_nominal_2)+parseFloat(m.kerajinan)+parseFloat(m.bonus_trip_gaji)+parseFloat(m.bonus_trip_dinas)+parseFloat(m.salary_bonus_bonus_trip),m.periode_ttl=m.periode_1_ttl+m.periode_2_ttl,m.total=parseFloat(m.uj_gaji)+parseFloat(m.uj_makan)+parseFloat(m.uj_dinas)+parseFloat(m.trip_lain_gaji)+parseFloat(m.trip_lain_makan)+parseFloat(m.trip_lain_dinas)+parseFloat(m.trip_tunggu_gaji)+parseFloat(m.trip_tunggu_dinas)-parseFloat(m.nominal_cut),m.total_grand=m.periode_ttl+m.total-parseFloat(m.employee_bpjs_kesehatan)-parseFloat(m.employee_bpjs_jamsos),w.standby_1_gaji+=parseFloat(m.sb_gaji),w.standby_1_makan+=parseFloat(m.sb_makan),w.standby_1_dinas+=parseFloat(m.sb_dinas),w.perubahaan_lainnya_1_ttl+=parseFloat(m.salary_bonus_nominal),w.standby_2_gaji+=parseFloat(m.sb_gaji_2),w.standby_2_makan+=parseFloat(m.sb_makan_2),w.standby_2_dinas+=parseFloat(m.sb_dinas_2),w.perubahaan_lainnya_2_ttl+=parseFloat(m.salary_bonus_nominal_2),w.perubahaan_kerajinan_ttl+=parseFloat(m.kerajinan),w.trip_umum_gaji+=parseFloat(m.uj_gaji),w.trip_umum_makan+=parseFloat(m.uj_makan),w.trip_umum_dinas+=parseFloat(m.uj_dinas),w.trip_lain_jlh+=m.trip_lain,w.trip_lain_gaji+=parseFloat(m.trip_lain_gaji),w.trip_lain_makan+=parseFloat(m.trip_lain_makan),w.trip_lain_dinas+=parseFloat(m.trip_lain_dinas),w.trip_tunggu_jlh+=m.trip_tunggu,w.trip_tunggu_gaji+=parseFloat(m.trip_tunggu_gaji),w.trip_tunggu_dinas+=parseFloat(m.trip_tunggu_dinas),w.trip_jumlah+=m.trip_jumlah,w.bonus_trip_gaji+=m.bonus_trip_gaji,w.bonus_trip_dinas+=m.bonus_trip_dinas,w.bonus_trip_perubahaan+=parseFloat(m.salary_bonus_bonus_trip),w.potongan_trip+=parseFloat(m.nominal_cut),w.bpjs_kesehatan_ttl+=parseFloat(m.employee_bpjs_kesehatan),w.bpjs_jamsos_ttl+=parseFloat(m.employee_bpjs_jamsos)}),w.standby_1_ttl=w.standby_1_gaji+w.standby_1_makan+w.standby_1_dinas,w.periode_1_ttl=w.standby_1_ttl+w.perubahaan_lainnya_1_ttl,w.standby_2_ttl=w.standby_2_gaji+w.standby_2_makan+w.standby_2_dinas,w.bonus_trip_ttl=w.bonus_trip_gaji+w.bonus_trip_dinas+w.bonus_trip_perubahaan,w.periode_2_ttl=w.standby_2_ttl+w.perubahaan_lainnya_2_ttl+w.perubahaan_kerajinan_ttl+w.bonus_trip_ttl,w.periode_ttl=w.periode_1_ttl+w.periode_2_ttl,w.trip_umum_ttl=w.trip_umum_gaji+w.trip_umum_makan+w.trip_umum_dinas,w.trip_lain_ttl=w.trip_lain_gaji+w.trip_lain_makan+w.trip_lain_dinas,w.trip_tunggu_ttl=w.trip_tunggu_gaji+w.trip_tunggu_dinas,w.total=w.trip_umum_ttl+w.trip_lain_ttl+w.trip_tunggu_ttl-w.potongan_trip,w.total_grand=w.periode_ttl+w.total-w.bpjs_kesehatan_ttl-w.bpjs_jamsos_ttl,c.value=w},g=u(""),b=ne(()=>g.value!=""?i.value.filter(v=>v.employee.name.toLowerCase().includes(g.value.toLowerCase())):i.value);return je(()=>o.show,(v,w)=>{v==!0&&(a.value=ie({},d),i.value=[],p.value={},o.id!=0&&C())},{immediate:!0}),(v,w)=>{const m=Xe,S=Vt("vue-date-picker"),A=zt;return ae((s(),_("section",Kpe,[e("div",null,[j(m,{title:"Form Salary Report",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Gpe,[e("div",Zpe,[e("div",Wpe,[e("div",Qpe,[Xpe,t(a).id?(s(),_("div",eve,l(t(x)(t(a).period_end).format("MM-Y")),1)):(s(),_("div",tve,[j(A,null,{default:Q(()=>[j(S,{modelValue:t(a).period_end,"onUpdate:modelValue":w[0]||(w[0]=D=>t(a).period_end=D),format:"MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"","month-picker":""},null,8,["modelValue"])]),_:1})])),e("p",lve,l(t(p).period_end),1)]),t(i).length?(s(),_("div",ave,[sve,ae(e("input",{class:"",type:"text","onUpdate:modelValue":w[1]||(w[1]=D=>Ee(g)?g.value=D:null),name:"search",placeholder:"Nama"},null,512),[[Te,t(g)]])])):O("",!0)]),t(b).length?(s(),_("div",ove,[e("div",nve,[e("table",rve,[e("thead",null,[ive,e("tr",dve,[_ve,uve,cve,pve,vve,fve,mve,hve,bve,yve,xve,wve,gve,e("th",$ve,[F("Standby 1 "),e("span",kve,"("+l(t(f)(t(c).standby_1_ttl))+")",1)]),e("th",jve,[F("Potongan 1 "),e("span",Dve,"("+l(t(f)(t(c).perubahaan_lainnya_1_ttl))+")",1)]),e("th",Sve,[F("Periode 1 "),e("span",Tve,"("+l(t(f)(t(c).periode_1_ttl))+")",1)]),e("th",Cve,[F("Standby 2 "),e("span",Pve,"("+l(t(f)(t(c).standby_2_ttl))+")",1)]),e("th",Ave,[F("Potongan 2 "),e("span",Mve,"("+l(t(f)(t(c).perubahaan_lainnya_2_ttl))+")",1)]),e("th",Ove,[F("U.Kerajinan "),e("span",Nve,"("+l(t(f)(t(c).perubahaan_kerajinan_ttl))+")",1)]),e("th",Fve,[F("Bonus Trip "),e("span",Ive,"("+l(t(f)(t(c).bonus_trip_ttl))+")",1)]),e("th",Yve,[F("Periode 2 "),e("span",Bve,"("+l(t(f)(t(c).periode_2_ttl))+")",1)]),e("th",qve,[F("Periode 1+2 "),e("span",Uve,"("+l(t(f)(t(c).periode_ttl))+")",1)]),e("th",Hve,[F("Trip "),e("span",zve,"("+l(t(f)(t(c).trip_umum_ttl))+")",1)]),e("th",Vve,[F("Trip Lain "),e("span",Lve,"("+l(t(f)(t(c).trip_lain_ttl))+")",1)]),e("th",Eve,[F("Trip Tunggu "),e("span",Rve,"("+l(t(f)(t(c).trip_tunggu_ttl))+")",1)]),e("th",Jve,[F("Potongan Trip "),e("span",Kve,"("+l(t(f)(t(c).potongan_trip))+")",1)]),e("th",Gve,[F("Total "),e("span",Zve,"("+l(t(f)(t(c).total))+")",1)]),e("th",Wve,[F("BPJS Kesehatan "),e("span",Qve,"("+l(t(f)(t(c).bpjs_kesehatan_ttl))+")",1)]),e("th",Xve,[F("BPJS Jamsos "),e("span",efe,"("+l(t(f)(t(c).bpjs_jamsos_ttl))+")",1)]),e("th",tfe,[F("Grand Total "),e("span",lfe,"("+l(t(f)(t(c).total_grand))+")",1)])]),e("tr",afe,[e("th",null,[F("Gaji "),e("span",sfe,"("+l(t(f)(t(c).standby_1_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",ofe,"("+l(t(f)(t(c).standby_1_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",nfe,"("+l(t(f)(t(c).standby_1_dinas))+")",1)]),e("th",null,[F("Gaji "),e("span",rfe,"("+l(t(f)(t(c).standby_2_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",ife,"("+l(t(f)(t(c).standby_2_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",dfe,"("+l(t(f)(t(c).standby_2_dinas))+")",1)]),e("th",null,[F("Gaji "),e("span",_fe,"("+l(t(f)(t(c).bonus_trip_gaji))+")",1)]),e("th",null,[F("Dinas "),e("span",ufe,"("+l(t(f)(t(c).bonus_trip_dinas))+")",1)]),e("th",null,[F("Potongan "),e("span",cfe,"("+l(t(f)(t(c).bonus_trip_perubahaan||0))+" )",1)]),e("th",null,[F("Jmlh "),e("span",pfe,"("+l(t(f)(t(c).trip_jumlah))+")",1)]),e("th",null,[F("Gaji "),e("span",vfe,"("+l(t(f)(t(c).trip_umum_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",ffe,"("+l(t(f)(t(c).trip_umum_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",mfe,"("+l(t(f)(t(c).trip_umum_dinas))+")",1)]),e("th",null,[F("Jmlh "),e("span",hfe,"("+l(t(f)(t(c).trip_lain_jlh))+")",1)]),e("th",null,[F("Gaji "),e("span",bfe,"("+l(t(f)(t(c).trip_lain_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",yfe,"("+l(t(f)(t(c).trip_lain_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",xfe,"("+l(t(f)(t(c).trip_lain_dinas))+")",1)]),e("th",null,[F("Jmlh "),e("span",wfe,"("+l(t(f)(t(c).trip_tunggu_jlh))+")",1)]),e("th",null,[F("Gaji "),e("span",gfe,"("+l(t(f)(t(c).trip_tunggu_gaji))+")",1)]),e("th",null,[F("Dinas "),e("span",$fe,"("+l(t(f)(t(c).trip_tunggu_dinas))+")",1)])])]),e("tbody",kfe,[(s(!0),_(ye,null,Ae(t(b),(D,M)=>(s(),_(ye,{key:M},[D.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":M},[e("td",null,l(M+1)+".",1),e("td",null,l(D.employee_id),1),e("td",null,l(D.employee_name),1),e("td",null,l(D.employee_role),1),e("td",null,l(D.employee_birth_place),1),e("td",null,l(D.employee_birth_date?t(x)(D.employee_birth_date).format("DD-MM-Y"):""),1),e("td",null,l(D.employee_tmk?t(x)(D.employee_tmk).format("DD-MM-Y"):""),1),e("td",null,l(D.employee_ktp_no),1),e("td",null,l(D.employee_address),1),e("td",null,l(D.employee_status),1),e("td",null,l(D.employee_rek_no),1),e("td",null,l(D.employee_rek_name),1),e("td",null,l(D.employee_bank_name),1),e("td",null,l(t(f)(D.sb_gaji)),1),e("td",null,l(t(f)(D.sb_makan)),1),e("td",null,l(t(f)(D.sb_dinas)),1),e("td",null,l(t(f)(D.salary_bonus_nominal)),1),e("td",null,l(t(f)(D.periode_1_ttl)),1),e("td",null,l(t(f)(D.sb_gaji_2)),1),e("td",null,l(t(f)(D.sb_makan_2)),1),e("td",null,l(t(f)(D.sb_dinas_2)),1),e("td",null,l(t(f)(D.salary_bonus_nominal_2)),1),e("td",null,l(t(f)(D.kerajinan)),1),e("td",null,l(t(f)(D.bonus_trip_gaji)),1),e("td",null,l(t(f)(D.bonus_trip_dinas)),1),e("td",null,l(t(f)(D.salary_bonus_bonus_trip)),1),e("td",null,l(t(f)(D.periode_2_ttl)),1),e("td",null,l(t(f)(D.periode_ttl)),1),e("td",null,l(t(f)(D.trip_jumlah)),1),e("td",null,l(t(f)(D.uj_gaji)),1),e("td",null,l(t(f)(D.uj_makan)),1),e("td",null,l(t(f)(D.uj_dinas)),1),e("td",null,l(t(f)(D.trip_lain)),1),e("td",null,l(t(f)(D.trip_lain_gaji)),1),e("td",null,l(t(f)(D.trip_lain_makan)),1),e("td",null,l(t(f)(D.trip_lain_dinas)),1),e("td",null,l(t(f)(D.trip_tunggu)),1),e("td",null,l(t(f)(D.trip_tunggu_gaji)),1),e("td",null,l(t(f)(D.trip_tunggu_dinas)),1),e("td",null,l(t(f)(D.nominal_cut)),1),e("td",null,l(t(f)(D.total)),1),e("td",null,l(t(f)(D.employee_bpjs_kesehatan)),1),e("td",null,l(t(f)(D.employee_bpjs_jamsos)),1),e("td",null,l(t(f)(D.total_grand)),1)],8,jfe)):O("",!0)],64))),128))],512)])])])):O("",!0)]),e("div",Dfe,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:w[2]||(w[2]=D=>n.fnClose())}," Cancel "),t(k)?O("",!0):(s(),_("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:w[3]||(w[3]=ze(D=>h(),["prevent"]))}," Generate "+l(t(a).id==""?"& Save":""),1))])])])],512)),[[Be,n.show]])}}},Us=Sfe,Mwe=Object.freeze(Object.defineProperty({__proto__:null,default:Us},Symbol.toStringTag,{value:"Module"}));const Ut=n=>(nt("data-v-b9d3a71c"),n=n(),rt(),n),Tfe={class:"box-fixed"},Cfe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Pfe={class:"w-full flex flex-col items-center grow overflow-auto"},Afe={class:"w-full flex flex-row flex-wrap"},Mfe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ofe=Ut(()=>e("label",{for:""},"Period End",-1)),Nfe={class:"card-border"},Ffe={key:0,class:"w-full sm:w-6/12 md:w-4/12 lg:w-4/12 p-1"},Ife=Ut(()=>e("div",{class:"font-bold"}," Filter Nama ",-1)),Yfe={key:0,class:"w-full flex p-1 justify-between flex-wrap"},Bfe={class:"w-full",role:"sticky"},qfe={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Ufe=Ut(()=>e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"44",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1)),Hfe={class:"sticky top-7 !z-[2]"},zfe=Ut(()=>e("th",{rowspan:"2"},"No",-1)),Vfe=Ut(()=>e("th",{rowspan:"2"},"ID",-1)),Lfe=Ut(()=>e("th",{rowspan:"2"},"Nama Pekerja",-1)),Efe=Ut(()=>e("th",{rowspan:"2"},"Jabatan",-1)),Rfe=Ut(()=>e("th",{rowspan:"2"},"Tmpt Lahir",-1)),Jfe=Ut(()=>e("th",{rowspan:"2"},"Tgl Lahir",-1)),Kfe=Ut(()=>e("th",{rowspan:"2"},"TMK",-1)),Gfe=Ut(()=>e("th",{rowspan:"2"},"No KTP",-1)),Zfe=Ut(()=>e("th",{rowspan:"2"},"Alamat",-1)),Wfe=Ut(()=>e("th",{rowspan:"2"},"Status",-1)),Qfe=Ut(()=>e("th",{rowspan:"2"},"No Rek",-1)),Xfe=Ut(()=>e("th",{rowspan:"2"},"Nama Rek",-1)),e1e=Ut(()=>e("th",{rowspan:"2"},"Nama Bank",-1)),t1e={colspan:"3"},l1e={class:"text-sm"},a1e={rowspan:"2"},s1e={class:"text-sm"},o1e={rowspan:"2"},n1e={class:"text-sm"},r1e={colspan:"3"},i1e={class:"text-sm"},d1e={rowspan:"2"},_1e={class:"text-sm"},u1e={rowspan:"2"},c1e={class:"text-sm"},p1e={colspan:"3"},v1e={class:"text-sm"},f1e={rowspan:"2"},m1e={class:"text-sm"},h1e={rowspan:"2"},b1e={class:"text-sm"},y1e={colspan:"4"},x1e={class:"text-sm"},w1e={colspan:"4"},g1e={class:"text-sm"},$1e={colspan:"3",class:"whitespace-nowrap"},k1e={class:"text-sm"},j1e={rowspan:"2"},D1e={class:"text-sm"},S1e={rowspan:"2"},T1e={class:"text-sm"},C1e={rowspan:"2"},P1e={class:"text-sm"},A1e={rowspan:"2"},M1e={class:"text-sm"},O1e={rowspan:"2"},N1e={class:"text-sm"},F1e={class:"sticky top-[60px] !z-[2]"},I1e={class:"text-sm"},Y1e={class:"text-sm"},B1e={class:"text-sm"},q1e={class:"text-sm"},U1e={class:"text-sm"},H1e={class:"text-sm"},z1e={class:"text-sm"},V1e={class:"text-sm"},L1e={class:"text-sm"},E1e={class:"text-sm"},R1e={class:"text-sm"},J1e={class:"text-sm"},K1e={class:"text-sm"},G1e={class:"text-sm"},Z1e={class:"text-sm"},W1e={class:"text-sm"},Q1e={class:"text-sm"},X1e={class:"text-sm"},eme={class:"text-sm"},tme={class:"text-sm"},lme={ref:"to_move"},ame=["data-index"],sme={class:"w-full flex items-center justify-end"},ome={class:"w-full flex flex-wrap p-3 items-center"},nme=Ut(()=>e("div",null," Di Validasi oleh : ",-1)),rme={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ime={key:0},dme={__name:"rpt_salary_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const o=n,{$moment:x}=Ke(),{pointFormat:f}=K(),a=u(ie({},{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:""})),r=ke("token"),p=u({}),i=u(null),c=u([]),h=u([]),k=()=>Y(this,null,function*(){$().loading_full=!0,p.value={};const ue=new FormData;let B="post",de=o.id;de==0||(ue.append("id",de),ue.append("_method","PUT"));const{data:V,error:me,status:Me}=yield W("/rpt_salary_validasi",{method:B,headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:ue,retry:0});if($().loading_full=!1,Me.value==="error"){X().trigger(me,p);return}a.value.val1=V.value.val1,a.value.val1_user=V.value.val1_user,a.value.val1_by=V.value.val1_by,a.value.val1_at=V.value.val1_at,a.value.val2=V.value.val2,a.value.val2_user=V.value.val2_user,a.value.val2_by=V.value.val2_by,a.value.val2_at=V.value.val2_at,a.value.val3=V.value.val3,a.value.val3_user=V.value.val3_user,a.value.val3_by=V.value.val3_by,a.value.val3_at=V.value.val3_at;let tt=o.p_data.map(ut=>ut.id).indexOf(o.id);tt>-1&&o.p_data.splice(tt,1,ie({},a.value)),o.fnClose()});ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.standby_nominal)}),ue});const C=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_gaji)}),ue}),y=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_makan)}),ue}),g=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_dinas)}),ue}),b=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_gaji_2)}),ue}),v=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_makan_2)}),ue}),w=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.sb_dinas_2)}),ue}),m=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.uj_gaji)}),ue}),S=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.uj_makan)}),ue}),A=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.uj_dinas)}),ue});ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_lain)}),ue}),ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_lain)}),ue});const D=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_lain_gaji)}),ue}),M=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_lain_makan)}),ue}),T=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_lain_dinas)}),ue});ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_tunggu)}),ue});const q=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_tunggu_gaji)}),ue}),P=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_tunggu_dinas)}),ue});ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_cpo)+parseFloat(B.trip_pk)+parseFloat(B.trip_tbs)+parseFloat(B.trip_tbsk)}),ue});const N=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_cpo_bonus_gaji)+parseFloat(B.trip_pk_bonus_gaji)+parseFloat(B.trip_tbs_bonus_gaji)+parseFloat(B.trip_tbsk_bonus_gaji)}),ue}),L=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.trip_cpo_bonus_dinas)+parseFloat(B.trip_pk_bonus_dinas)+parseFloat(B.trip_tbs_bonus_dinas)+parseFloat(B.trip_tbsk_bonus_dinas)}),ue}),R=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.employee_bpjs_kesehatan)}),ue}),J=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.employee_bpjs_jamsos)}),ue}),re=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.nominal_cut)}),ue}),te=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.salary_bonus_nominal)}),ue}),ee=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.salary_bonus_nominal_2)}),ue}),ce=ne(()=>{let ue=0;return c.value.forEach(B=>{ue+=parseFloat(B.kerajinan)}),ue}),U=ne(()=>C.value+y.value+g.value||0),I=ne(()=>U.value+te.value||0),Z=ne(()=>b.value+v.value+w.value||0),E=ne(()=>Z.value+ee.value+ce.value||0),H=ne(()=>I.value+E.value||0),ve=ne(()=>m.value+S.value+A.value||0),Ie=ne(()=>D.value+M.value+T.value||0),le=ne(()=>q.value+P.value||0),z=ne(()=>N.value+L.value||0),G=ne(()=>ve.value+Ie.value+le.value+z.value-re.value||0);ne(()=>H.value+G.value-R.value-J.value||0);const oe=()=>Y(this,null,function*(){$().loading_full=!0;const{data:ue,error:B,status:de}=yield W("/rpt_salary",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,de.value==="error"){X().trigger(B);return}a.value=ue.value.data,c.value=ue.value.data.details;let V={details:ue.value.data.details,standby_1_ttl:0,standby_1_gaji:0,standby_1_makan:0,standby_1_dinas:0,perubahaan_lainnya_1_ttl:0,periode_1_ttl:0,standby_2_ttl:0,standby_2_gaji:0,standby_2_makan:0,standby_2_dinas:0,perubahaan_lainnya_2_ttl:0,perubahaan_kerajinan_ttl:0,periode_2_ttl:0,periode_ttl:0,trip_umum_ttl:0,trip_umum_gaji:0,trip_umum_makan:0,trip_umum_dinas:0,trip_lain_ttl:0,trip_lain_jlh:0,trip_lain_gaji:0,trip_lain_makan:0,trip_lain_dinas:0,trip_tunggu_ttl:0,trip_tunggu_jlh:0,trip_tunggu_gaji:0,trip_tunggu_dinas:0,bonus_trip_ttl:0,trip_jumlah:0,bonus_trip_gaji:0,bonus_trip_dinas:0,bonus_trip_perubahaan:0,potongan_trip:0,total:0,bpjs_kesehatan_ttl:0,bpjs_jamsos_ttl:0,total_grand:0};V.details.forEach(me=>{me.periode_1_ttl=parseFloat(me.sb_gaji)+parseFloat(me.sb_makan)+parseFloat(me.sb_dinas)+parseFloat(me.salary_bonus_nominal),me.trip_jumlah=me.trip_cpo+me.trip_pk+me.trip_tbs+me.trip_tbsk,me.bonus_trip_gaji=parseFloat(me.trip_cpo_bonus_gaji)+parseFloat(me.trip_pk_bonus_gaji)+parseFloat(me.trip_tbs_bonus_gaji)+parseFloat(me.trip_tbsk_bonus_gaji),me.bonus_trip_dinas=parseFloat(me.trip_cpo_bonus_dinas)+parseFloat(me.trip_pk_bonus_dinas)+parseFloat(me.trip_tbs_bonus_dinas)+parseFloat(me.trip_tbsk_bonus_dinas),me.periode_2_ttl=parseFloat(me.sb_gaji_2)+parseFloat(me.sb_makan_2)+parseFloat(me.sb_dinas_2)+parseFloat(me.salary_bonus_nominal_2)+parseFloat(me.kerajinan)+parseFloat(me.bonus_trip_gaji)+parseFloat(me.bonus_trip_dinas)+parseFloat(me.salary_bonus_bonus_trip),me.periode_ttl=me.periode_1_ttl+me.periode_2_ttl,me.total=parseFloat(me.uj_gaji)+parseFloat(me.uj_makan)+parseFloat(me.uj_dinas)+parseFloat(me.trip_lain_gaji)+parseFloat(me.trip_lain_makan)+parseFloat(me.trip_lain_dinas)+parseFloat(me.trip_tunggu_gaji)+parseFloat(me.trip_tunggu_dinas)-parseFloat(me.nominal_cut),me.total_grand=me.periode_ttl+me.total-parseFloat(me.employee_bpjs_kesehatan)-parseFloat(me.employee_bpjs_jamsos),V.standby_1_gaji+=parseFloat(me.sb_gaji),V.standby_1_makan+=parseFloat(me.sb_makan),V.standby_1_dinas+=parseFloat(me.sb_dinas),V.perubahaan_lainnya_1_ttl+=parseFloat(me.salary_bonus_nominal),V.standby_2_gaji+=parseFloat(me.sb_gaji_2),V.standby_2_makan+=parseFloat(me.sb_makan_2),V.standby_2_dinas+=parseFloat(me.sb_dinas_2),V.perubahaan_lainnya_2_ttl+=parseFloat(me.salary_bonus_nominal_2),V.perubahaan_kerajinan_ttl+=parseFloat(me.kerajinan),V.trip_umum_gaji+=parseFloat(me.uj_gaji),V.trip_umum_makan+=parseFloat(me.uj_makan),V.trip_umum_dinas+=parseFloat(me.uj_dinas),V.trip_lain_jlh+=me.trip_lain,V.trip_lain_gaji+=parseFloat(me.trip_lain_gaji),V.trip_lain_makan+=parseFloat(me.trip_lain_makan),V.trip_lain_dinas+=parseFloat(me.trip_lain_dinas),V.trip_tunggu_jlh+=me.trip_tunggu,V.trip_tunggu_gaji+=parseFloat(me.trip_tunggu_gaji),V.trip_tunggu_dinas+=parseFloat(me.trip_tunggu_dinas),V.trip_jumlah+=me.trip_jumlah,V.bonus_trip_gaji+=me.bonus_trip_gaji,V.bonus_trip_dinas+=me.bonus_trip_dinas,V.bonus_trip_perubahaan+=parseFloat(me.salary_bonus_bonus_trip),V.potongan_trip+=parseFloat(me.nominal_cut),V.bpjs_kesehatan_ttl+=parseFloat(me.employee_bpjs_kesehatan),V.bpjs_jamsos_ttl+=parseFloat(me.employee_bpjs_jamsos)}),V.standby_1_ttl=V.standby_1_gaji+V.standby_1_makan+V.standby_1_dinas,V.periode_1_ttl=V.standby_1_ttl+V.perubahaan_lainnya_1_ttl,V.standby_2_ttl=V.standby_2_gaji+V.standby_2_makan+V.standby_2_dinas,V.bonus_trip_ttl=V.bonus_trip_gaji+V.bonus_trip_dinas+V.bonus_trip_perubahaan,V.periode_2_ttl=V.standby_2_ttl+V.perubahaan_lainnya_2_ttl+V.perubahaan_kerajinan_ttl+V.bonus_trip_ttl,V.periode_ttl=V.periode_1_ttl+V.periode_2_ttl,V.trip_umum_ttl=V.trip_umum_gaji+V.trip_umum_makan+V.trip_umum_dinas,V.trip_lain_ttl=V.trip_lain_gaji+V.trip_lain_makan+V.trip_lain_dinas,V.trip_tunggu_ttl=V.trip_tunggu_gaji+V.trip_tunggu_dinas,V.total=V.trip_umum_ttl+V.trip_lain_ttl+V.trip_tunggu_ttl-V.potongan_trip,V.total_grand=V.periode_ttl+V.total-V.bpjs_kesehatan_ttl-V.bpjs_jamsos_ttl,h.value=V});ne(()=>{let ue=0;return c.value.forEach(B=>{B.p_status!="Remove"&&(ue+=parseInt(B.amount))}),ue}),ne(()=>!1);const se=u(""),_e=ne(()=>se.value!=""?c.value.filter(ue=>ue.employee.name.toLowerCase().includes(se.value.toLowerCase())):c.value);return je(()=>o.show,(ue,B)=>{ue==!0&&(o.is_view==!1&&setTimeout(()=>{i.value.focus()},1),oe())},{immediate:!0}),(ue,B)=>{const de=Xe;return ae((s(),_("section",Tfe,[e("div",null,[j(de,{title:"Salary Report Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Cfe,[e("div",Pfe,[e("div",Afe,[e("div",Mfe,[Ofe,e("div",Nfe,l(t(x)(t(a).period_end).format("MM-Y")),1)]),t(c).length?(s(),_("div",Ffe,[Ife,ae(e("input",{class:"",type:"text","onUpdate:modelValue":B[0]||(B[0]=V=>Ee(se)?se.value=V:null),name:"search",placeholder:"Nama"},null,512),[[Te,t(se)]])])):O("",!0)]),t(_e).length?(s(),_("div",Yfe,[e("div",Bfe,[e("table",qfe,[e("thead",null,[Ufe,e("tr",Hfe,[zfe,Vfe,Lfe,Efe,Rfe,Jfe,Kfe,Gfe,Zfe,Wfe,Qfe,Xfe,e1e,e("th",t1e,[F("Standby 1 "),e("span",l1e,"("+l(t(f)(t(h).standby_1_ttl))+")",1)]),e("th",a1e,[F("Potongan 1 "),e("span",s1e,"("+l(t(f)(t(h).perubahaan_lainnya_1_ttl))+")",1)]),e("th",o1e,[F("Periode 1 "),e("span",n1e,"("+l(t(f)(t(h).periode_1_ttl))+")",1)]),e("th",r1e,[F("Standby 2 "),e("span",i1e,"("+l(t(f)(t(h).standby_2_ttl))+")",1)]),e("th",d1e,[F("Potongan 2 "),e("span",_1e,"("+l(t(f)(t(h).perubahaan_lainnya_2_ttl))+")",1)]),e("th",u1e,[F("U.Kerajinan "),e("span",c1e,"("+l(t(f)(t(h).perubahaan_kerajinan_ttl))+")",1)]),e("th",p1e,[F("Bonus Trip "),e("span",v1e,"("+l(t(f)(t(h).bonus_trip_ttl))+")",1)]),e("th",f1e,[F("Periode 2 "),e("span",m1e,"("+l(t(f)(t(h).periode_2_ttl))+")",1)]),e("th",h1e,[F("Periode 1+2 "),e("span",b1e,"("+l(t(f)(t(h).periode_ttl))+")",1)]),e("th",y1e,[F("Trip "),e("span",x1e,"("+l(t(f)(t(h).trip_umum_ttl))+")",1)]),e("th",w1e,[F("Trip Lain "),e("span",g1e,"("+l(t(f)(t(h).trip_lain_ttl))+")",1)]),e("th",$1e,[F("Trip Tunggu "),e("span",k1e,"("+l(t(f)(t(h).trip_tunggu_ttl))+")",1)]),e("th",j1e,[F("Potongan Trip "),e("span",D1e,"("+l(t(f)(t(h).potongan_trip))+")",1)]),e("th",S1e,[F("Total "),e("span",T1e,"("+l(t(f)(t(h).total))+")",1)]),e("th",C1e,[F("BPJS Kesehatan "),e("span",P1e,"("+l(t(f)(t(h).bpjs_kesehatan_ttl))+")",1)]),e("th",A1e,[F("BPJS Jamsos "),e("span",M1e,"("+l(t(f)(t(h).bpjs_jamsos_ttl))+")",1)]),e("th",O1e,[F("Grand Total "),e("span",N1e,"("+l(t(f)(t(h).total_grand))+")",1)])]),e("tr",F1e,[e("th",null,[F("Gaji "),e("span",I1e,"("+l(t(f)(t(h).standby_1_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",Y1e,"("+l(t(f)(t(h).standby_1_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",B1e,"("+l(t(f)(t(h).standby_1_dinas))+")",1)]),e("th",null,[F("Gaji "),e("span",q1e,"("+l(t(f)(t(h).standby_2_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",U1e,"("+l(t(f)(t(h).standby_2_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",H1e,"("+l(t(f)(t(h).standby_2_dinas))+")",1)]),e("th",null,[F("Gaji "),e("span",z1e,"("+l(t(f)(t(h).bonus_trip_gaji))+")",1)]),e("th",null,[F("Dinas "),e("span",V1e,"("+l(t(f)(t(h).bonus_trip_dinas))+")",1)]),e("th",null,[F("Potongan "),e("span",L1e,"("+l(t(f)(ue.bonus_trip_perubahaan||0))+" )",1)]),e("th",null,[F("Jmlh "),e("span",E1e,"("+l(t(f)(t(h).trip_jumlah))+")",1)]),e("th",null,[F("Gaji "),e("span",R1e,"("+l(t(f)(t(h).trip_umum_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",J1e,"("+l(t(f)(t(h).trip_umum_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",K1e,"("+l(t(f)(t(h).trip_umum_dinas))+")",1)]),e("th",null,[F("Jmlh "),e("span",G1e,"("+l(t(f)(t(h).trip_lain_jlh))+")",1)]),e("th",null,[F("Gaji "),e("span",Z1e,"("+l(t(f)(t(h).trip_lain_gaji))+")",1)]),e("th",null,[F("Makan "),e("span",W1e,"("+l(t(f)(t(h).trip_lain_makan))+")",1)]),e("th",null,[F("Dinas "),e("span",Q1e,"("+l(t(f)(t(h).trip_lain_dinas))+")",1)]),e("th",null,[F("Jmlh "),e("span",X1e,"("+l(t(f)(t(h).trip_tunggu_jlh))+")",1)]),e("th",null,[F("Gaji "),e("span",eme,"("+l(t(f)(t(h).trip_tunggu_gaji))+")",1)]),e("th",null,[F("Dinas "),e("span",tme,"("+l(t(f)(t(h).trip_tunggu_dinas))+")",1)])])]),e("tbody",lme,[(s(!0),_(ye,null,Ae(t(_e),(V,me)=>(s(),_(ye,{key:me},[V.p_status!="Remove"?(s(),_("tr",{key:0,"data-index":me},[e("td",null,l(me+1)+".",1),e("td",null,l(V.employee_id),1),e("td",null,l(V.employee_name),1),e("td",null,l(V.employee_role),1),e("td",null,l(V.employee_birth_place),1),e("td",null,l(V.employee_birth_date?t(x)(V.employee_birth_date).format("DD-MM-Y"):""),1),e("td",null,l(V.employee_tmk?t(x)(V.employee_tmk).format("DD-MM-Y"):""),1),e("td",null,l(V.employee_ktp_no),1),e("td",null,l(V.employee_address),1),e("td",null,l(V.employee_status),1),e("td",null,l(V.employee_rek_no),1),e("td",null,l(V.employee_rek_name),1),e("td",null,l(V.employee_bank_name),1),e("td",null,l(t(f)(V.sb_gaji)),1),e("td",null,l(t(f)(V.sb_makan)),1),e("td",null,l(t(f)(V.sb_dinas)),1),e("td",null,l(t(f)(V.salary_bonus_nominal)),1),e("td",null,l(t(f)(V.periode_1_ttl)),1),e("td",null,l(t(f)(V.sb_gaji_2)),1),e("td",null,l(t(f)(V.sb_makan_2)),1),e("td",null,l(t(f)(V.sb_dinas_2)),1),e("td",null,l(t(f)(V.salary_bonus_nominal_2)),1),e("td",null,l(t(f)(V.kerajinan)),1),e("td",null,l(t(f)(V.bonus_trip_gaji)),1),e("td",null,l(t(f)(V.bonus_trip_dinas)),1),e("td",null,l(t(f)(V.salary_bonus_bonus_trip)),1),e("td",null,l(t(f)(V.periode_2_ttl)),1),e("td",null,l(t(f)(V.periode_ttl)),1),e("td",null,l(t(f)(V.trip_jumlah)),1),e("td",null,l(t(f)(V.uj_gaji)),1),e("td",null,l(t(f)(V.uj_makan)),1),e("td",null,l(t(f)(V.uj_dinas)),1),e("td",null,l(t(f)(V.trip_lain)),1),e("td",null,l(t(f)(V.trip_lain_gaji)),1),e("td",null,l(t(f)(V.trip_lain_makan)),1),e("td",null,l(t(f)(V.trip_lain_dinas)),1),e("td",null,l(t(f)(V.trip_tunggu)),1),e("td",null,l(t(f)(V.trip_tunggu_gaji)),1),e("td",null,l(t(f)(V.trip_tunggu_dinas)),1),e("td",null,l(t(f)(V.nominal_cut)),1),e("td",null,l(t(f)(V.total)),1),e("td",null,l(t(f)(V.employee_bpjs_kesehatan)),1),e("td",null,l(t(f)(V.employee_bpjs_jamsos)),1),e("td",null,l(t(f)(V.total_grand)),1)],8,ame)):O("",!0)],64))),128))],512)])])])):O("",!0)]),e("div",sme,[e("div",ome,[nme,t(a).val1||t(a).val2||t(a).val3?(s(),_("div",rme,[t(a).val1?(s(),_("div",ime," App 1 : "+l(t(a).val1_by.username)+" ( "+l(t(a).val1_at?t(x)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):O("",!0)])):O("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:B[1]||(B[1]=V=>n.fnClose())}," Cancel "),n.is_view==0?(s(),_("button",{key:0,ref_key:"it_val",ref:i,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:B[2]||(B[2]=ze(V=>k(),["prevent"]))}," Validasi ",512)):O("",!0)])])])],512)),[[Be,n.show]])}}},Hs=Oe(dme,[["__scopeId","data-v-b9d3a71c"]]),Owe=Object.freeze(Object.defineProperty({__proto__:null,default:Hs},Symbol.toStringTag,{value:"Module"}));const va=n=>(nt("data-v-66f08dae"),n=n(),rt(),n),_me={class:"box-fixed"},ume={class:"w-full flex grow flex-col overflow-auto h-0"},cme={class:"w-full flex justify-between flex-wrap"},pme={class:"grow flex"},vme={class:"w-full flex flex-col overflow-auto grow h-0 p-1"},fme={key:0,class:"w-full"},mme=va(()=>e("div",null," PV yang nilai nya tidak sama diascend ",-1)),hme={class:"tacky"},bme=va(()=>e("thead",null,[e("tr",null,[e("th",null,"NO."),e("th",null,"Header"),e("th",null,"Detail"),e("th",null,"Selisih")])],-1)),yme={class:"w-full"},xme={key:0},wme={key:1},gme={class:"tacky w-full"},$me=va(()=>e("thead",null,[e("tr",null,[e("th",null,"No"),e("th",null,"Nominal")])],-1)),kme={__name:"rpt_salary_check",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!0,default:0}},setup(n){const o=n,{pointFormat:x}=K(),f={};f._TimeZoneOffset=new Date().getTimezoneOffset(),f.sort="tanggal:desc";const d=u({}),a=ke("token"),r=u([]),p=u([]);u(-1);const i=()=>Y(this,null,function*(){$().loading_full=!0,d.value={},f.id=o.id;const{data:h,error:k,status:C}=yield W("/rpt_salary/check_nilai_ascend",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:f,retry:0});if($().loading_full=!1,C.value==="error"){X().trigger(k,d);return}r.value=h.value.total_tidak_sesuai,p.value=h.value.pembanding}),c=()=>{i()};return je(()=>o.show,(h,k)=>{h==!0&&i()},{immediate:!0}),(h,k)=>{const C=Xe,y=Vl;return ae((s(),_("section",_me,[e("div",null,[j(C,{title:"Form Check Nilai",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",ume,[e("div",cme,[e("div",pme,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:k[0]||(k[0]=g=>c())},[j(y)])])]),e("div",vme,[t(r).length>0?(s(),_("div",fme,[mme,e("table",hme,[bme,e("tbody",null,[(s(!0),_(ye,null,Ae(t(r),(g,b)=>(s(),_("tr",{key:b},[e("td",null,l(g.no),1),e("td",null,l(t(x)(g.header||0)),1),e("td",null,l(t(x)(g.detail||0)),1),e("td",null,l(t(x)(g.selisih||0)),1)]))),128))])])])):O("",!0),(s(!0),_(ye,null,Ae(t(p),(g,b)=>(s(),_("div",yme,[e("div",null,l(b),1),(s(!0),_(ye,null,Ae(g,(v,w)=>(s(),_("div",null,[w=="AL"?(s(),_("div",xme,"Ascend Ada / Local Tidak Ada")):O("",!0),w=="LA"?(s(),_("div",wme,"Local Ada / Ascend Tidak Ada")):O("",!0),e("table",gme,[$me,e("tbody",null,[(s(!0),_(ye,null,Ae(v,(m,S)=>(s(),_("tr",{key:S},[e("td",null,l(m.voucherno),1),e("td",null,l(t(x)(m.amount||0)),1)]))),128))])])]))),256))]))),256))])])])],512)),[[Be,n.show]])}}},zs=Oe(kme,[["__scopeId","data-v-66f08dae"]]),Nwe=Object.freeze(Object.defineProperty({__proto__:null,default:zs},Symbol.toStringTag,{value:"Module"})),jme={class:"w-full h-full flex flex-col"},Dme={class:"w-full flex grow flex-col overflow-auto h-0"},Sme={class:"w-full flex"},Tme={class:"w-full flex justify-center items-center grow h-0 p-1"},Cme={key:0,class:""},Pme={class:"tacky"},Ame=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"Logistik"),e("th",null,"ID"),e("th",null,"Period End"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),Mme=["onClick"],Ome={class:"flex items-center justify-center"},Nme={class:"bold"},Fme={class:"grow mb-5"},Ime={__name:"rpt",setup(n){return Y(this,null,function*(){let o,x;const{$moment:f}=Ke(),d={};d._TimeZoneOffset=new Date().getTimezoneOffset(),d.sort="created_at:desc";const a=ke("token"),{data:r}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){let I=[];$().loading_full=!0;const{data:Z,error:E,status:H}=yield W("/rpt_salarys",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});return $().loading_full=!1,H.value==="error"?(X().trigger(E),{rpt_salarys:I}):(I=Z.value.data,{rpt_salarys:I})}),"$fWJlXxIgiP")})),o=yield o,x(),o),p=u(r.value.rpt_salarys);u(""),u({field:"created_at",by:"desc"});const i=u(-1),c=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),h=u(null),k=()=>Y(this,null,function*(){$().loading_full=!0,c.value.may_get_data=!1,d.page=c.value.page,d.page==1&&(p.value=[]),d.first_row&&delete d.first_row,d.page>1&&(d.first_row=JSON.stringify(p.value[0]));const{data:I,error:Z,status:E}=yield W("/rpt_salarys",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:d,retry:0});if($().loading_full=!1,c.value.may_get_data=!0,E.value==="error"){X().trigger(Z);return}c.value.page==1?(p.value=I.value.data,h.value&&(h.value.scrollTop=0)):c.value.page>1&&(p.value=[...p.value,...I.value.data]),I.value.data.length==0&&(c.value.is_last_record=!0)}),C=()=>Y(this,null,function*(){if(!c.value.may_get_data)return;let I=h.value;if(I.scrollLeft!=c.value.scrollLeft){c.value.scrollLeft=I.scrollLeft;return}c.value.is_last_record||!(Math.round(I.scrollTop)+I.clientHeight>=I.scrollHeight-1)||(c.value.page++,yield k())});Ht();const y=u(!1),g=u(0),b=u(0),v=()=>{g.value=0,y.value=!0,b.value=!1},{display:w}=Je();Dt(Je());const m=()=>{i.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(g.value=p.value[i.value].id,y.value=!0,b.value=!1)},S=u(!1),A=u(0),D=()=>{i.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(A.value=p.value[i.value].id,b.value=!0,S.value=!0)},M=u(!1),T=u({}),q=u(!1),P=u(""),N=()=>Y(this,null,function*(){q.value&&(q.value=!1)});je(()=>P.value,I=>{I.trim().length>0?M.value=!0:M.value=!1},{immediate:!1});const L=()=>Y(this,null,function*(){$().loading_full=!0;const I=new FormData;I.append("id",p.value[i.value].id),I.append("deleted_reason",P.value),I.append("_method","DELETE");const{data:Z,error:E,status:H}=yield W("/rpt_salary",{method:"post",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},body:I,retry:0});if($().loading_full=!1,H.value==="error"){X().trigger(E);return}p.value.splice(i.value,1),i.value=-1,q.value=!1}),{downloadFile:R,viewFile:J}=jt();u(!1),u({});const re=()=>Y(this,null,function*(){$().loading_full=!0;const{data:I,error:Z,status:E}=yield W("/rpt_salary/excel_download",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:p.value[i.value].id},retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}R(I.value)}),te=()=>Y(this,null,function*(){$().loading_full=!0;const{data:I,error:Z,status:E}=yield W("/rpt_salary/excel_download2",{method:"get",headers:{Authorization:`Bearer ${a.value}`,Accept:"application/json"},params:{id:p.value[i.value].id},retry:0});if($().loading_full=!1,E.value==="error"){X().trigger(Z);return}R(I.value)}),ee=u(0),ce=u(!1),U=()=>{i.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=p.value[i.value].id,ce.value=!0)};return(I,Z)=>{const E=_t,H=gt,ve=Pt,Ie=Ft,le=Yt,z=pa,G=$t,oe=ft,se=It,_e=Us,ue=Hs,B=zs;return s(),_("div",jme,[j(E,{title:"List Salary Report"}),e("div",Dme,[e("div",Sme,[("useUtils"in I?I.useUtils:t(K))().checkPermission("rpt_salary.create")?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[0]||(Z[0]=de=>v())},[j(H)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermissions(["rpt_salary.modify"])?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[1]||(Z[1]=de=>m())},[j(ve)])):O("",!0),("useUtils"in I?I.useUtils:t(K))().checkPermissions(["rpt_salary.val1","rpt_salary.val2","rpt_salary.val3"])?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[2]||(Z[2]=de=>D())},[j(Ie)])):O("",!0),t(i)>-1?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[3]||(Z[3]=de=>re())},[j(le)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:Z[4]||(Z[4]=de=>U())}," Check Nilai "),t(i)>-1&&t(p)[t(i)].val1==1?(s(),_("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:Z[5]||(Z[5]=de=>te())},[j(z)])):O("",!0)]),e("div",Tme,[t(p).length==0?(s(),_("div",Cme," Maaf Tidak Ada Record ")):(s(),_("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:h,onScroll:C},[e("table",Pme,[Ame,e("tbody",null,[(s(!0),_(ye,null,Ae(t(p),(de,V)=>(s(),_("tr",{key:V,onClick:me=>i.value=V,class:Ue(t(i)==V?"active":"")},[e("td",null,[e("div",Ome,[de.val1?(s(),pe(oe,{key:1})):(s(),pe(G,{key:0}))])]),e("td",Nme,l(de.id),1),e("td",null,l(de.period_end?t(f)(de.period_end).format("MM-Y"):""),1),e("td",null,l(de.created_at?t(f)(de.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,l(de.updated_at?t(f)(de.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Mme))),128))])])],544))])]),j(se,{type:"delete",show:t(q),data:t(T),fnClose:N,fnConfirm:L,enabledOk:t(M)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",Fme,[ae(e("textarea",{"onUpdate:modelValue":Z[6]||(Z[6]=de=>Ee(P)?P.value=de:null)},null,512),[[Te,t(P)]])])]),_:1},8,["show","data","enabledOk"]),j(_e,{show:t(y),fnClose:()=>{y.value=!1},id:t(g),p_data:t(p),is_copy:t(b)},null,8,["show","fnClose","id","p_data","is_copy"]),j(ue,{show:t(S),fnClose:()=>{S.value=!1},id:t(A),p_data:t(p)},null,8,["show","fnClose","id","p_data"]),j(B,{show:t(ce),fnClose:()=>{ce.value=!1},id:t(ee)},null,8,["show","fnClose","id"])])}})}},Fwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ime},Symbol.toStringTag,{value:"Module"})),Yme={class:"w-full h-full overflow-y-auto"},Bme=["innerHTML"],qme=Lt({__name:"testnotify",setup(n){u(null);const o=u(""),x=u(0);let f=null;const d=a=>{f==null&&(f=setInterval(()=>{x.value+=1e3,o.value+=x.value+"x"+a+"<br/>",x.value>=a&&(x.value=0,clearInterval(f),f=null,o.value+="=====================================================<br/>",o.value+="called<br/>","Notification"in window&&(o.value+="called in<br/>",Notification.permission==="granted"?"Notification"in window&&"serviceWorker"in navigator?navigator.serviceWorker.getRegistration().then(function(r){r?r.showNotification("Test Notification",{body:"This is a test notification",icon:"favicon.png",requireInteraction:!0}):console.error("Service worker not registered.")}).catch(function(r){console.error("Error checking service worker registration:",r)}):console.error("Notifications or service workers not supported."):Notification.requestPermission()))},1e3))};return(a,r)=>{const p=zt;return s(),_(ye,null,[e("div",Yme,[j(p,null,{default:Q(()=>[e("div",{innerHTML:t(o)},null,8,Bme)]),_:1})]),e("button",{onClick:r[0]||(r[0]=i=>d(0))}," Call Notif "),e("button",{onClick:r[1]||(r[1]=i=>d(3e4))}," Call 30 second ")],64)}}}),Iwe=Object.freeze(Object.defineProperty({__proto__:null,default:qme},Symbol.toStringTag,{value:"Module"})),Ume={class:"w-full h-full flex flex-col"},Hme=e("div",{class:"w-full flex grow flex-col overflow-auto h-0"},[e("div",{class:"w-full flex"},[e("iframe",{src:"/upload",title:"",style:{width:"100%",height:"100%"}})])],-1),zme={__name:"index",setup(n){return $().loading_full=!1,(o,x)=>{const f=_t;return s(),_("div",Ume,[j(f,{title:"List Potongan"}),Hme])}}},Ywe=Object.freeze(Object.defineProperty({__proto__:null,default:zme},Symbol.toStringTag,{value:"Module"}));const Ml=n=>(nt("data-v-6cde4f75"),n=n(),rt(),n),Vme={class:"box-fixed"},Lme={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Eme={class:"w-full flex flex-col items-center grow overflow-auto"},Rme={class:"w-full flex flex-row flex-wrap"},Jme={class:"w-full flex flex-col flex-wrap p-1"},Kme=Ml(()=>e("label",{for:""},"Username",-1)),Gme={class:"text-red-500"},Zme={class:"w-full flex flex-col flex-wrap p-1"},Wme=Ml(()=>e("label",{for:""},"Password",-1)),Qme={class:"text-red-500"},Xme={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ehe=Ml(()=>e("label",{for:""},"Hak Akses",-1)),the=Et('<option value="PabrikTransport" data-v-6cde4f75>Pabrik Transport</option><option value="PabrikMandor" data-v-6cde4f75>Pabrik Mandor</option><option value="Logistic" data-v-6cde4f75>Logisitic</option><option value="Finance" data-v-6cde4f75>Finance</option><option value="Marketing" data-v-6cde4f75>Marketing</option><option value="Accounting" data-v-6cde4f75>Accounting</option><option value="MIS" data-v-6cde4f75>MIS</option><option value="ViewOnly" data-v-6cde4f75>ViewOnly</option><option value="SuperAdmin" data-v-6cde4f75>SuperAdmin</option>',9),lhe=[the],ahe={class:"text-red-500"},she={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ohe=Ml(()=>e("label",{for:""},"Status",-1)),nhe=Ml(()=>e("option",{value:"1"},"Aktif",-1)),rhe=Ml(()=>e("option",{value:"0"},"Nonaktif",-1)),ihe=[nhe,rhe],dhe={class:"text-red-500"},_he={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},uhe={class:"w-full max-w-full p-0 2xl:pr-1 2xl:max-h-full 2xl:overflow-auto"},che={class:"w-full",role:"sticky"},phe={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},vhe=Ml(()=>e("tr",{class:"sticky -top-1 !z-[2]"},[e("td",{colspan:"2",class:"!bg-slate-800 text-white font-bold"}," Detail Permission List ")],-1)),fhe={class:"sticky top-7 !z-[2]"},mhe={class:"min-w-[20px] !w-[20px] max-w-[20px]"},hhe={class:"w-full flex items-center"},bhe={ref:"to_move"},yhe={class:"!w-[10px]"},xhe={class:"w-full h-full flex items-center justify-center"},whe=["onUpdate:modelValue"],ghe={class:"w-full h-full flex items-center justify-start"},$he={class:"w-full flex items-center justify-end"},khe={__name:"user",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(n){const o=n,x={id:-1,username:"",password:"",hak_akses:"PabrikTransport",is_active:1},f=u(ie({},x)),d=ke("token"),a=u({}),r=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const g=new FormData;g.append("username",f.value.username),f.value.password&&g.append("password",f.value.password),g.append("hak_akses",f.value.hak_akses),g.append("is_active",f.value.is_active),g.append("permission_list",JSON.stringify(h.value));let b="post",v=o.is_copy?0:o.id;v==0||(g.append("id",v),g.append("_method","PUT"));const{data:w,error:m,status:S}=yield W("/user",{method:b,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:g,retry:0});if($().loading_full=!1,S.value==="error"){X().trigger(m,a);return}if(v<=0)f.value.id=w.value.id,f.value.created_at=w.value.created_at,f.value.updated_at=w.value.updated_at,o.p_data.unshift(f.value);else{f.value.updated_at=w.value.updated_at;let A=o.p_data.map(D=>D.id).indexOf(v);A>-1&&o.p_data.splice(A,1,ie({},f.value))}o.fnClose()}),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:g,error:b,status:v}=yield W("/user",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}f.value=g.value.data,g.value.data.details.forEach((w,m)=>{i.value=i.value.map(S=>(S.name==w.permission_list_name&&(S.checked=!0),S))})}),i=u([]),c=()=>Y(this,null,function*(){$().loading_full=!0;const{data:g,error:b,status:v}=yield W("/permission_lists",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{sort:"name:asc"},retry:0});if($().loading_full=!1,v.value==="error"){X().trigger(b);return}i.value=g.value.data.map(w=>(w.checked=!1,w))}),h=ne(g=>i.value.filter(b=>b.checked)),k=g=>{h.value.length!=i.value.length?i.value=i.value.map(b=>(b.checked=!0,b)):i.value=i.value.map(b=>(b.checked=!1,b))},C=u(""),y=ne(()=>C.value!=""?i.value.filter(g=>g.name.toLowerCase().includes(C.value.toLowerCase())):i.value);return je(()=>o.show,(g,b)=>Y(this,null,function*(){g==!0&&(f.value=ie({},x),i.value=[],yield c(),a.value={},o.id!=0&&(yield p()))}),{immediate:!0}),(g,b)=>{const v=Xe;return ae((s(),_("section",Vme,[e("div",null,[j(v,{title:"Form User",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Lme,[e("div",Eme,[e("div",Rme,[e("div",Jme,[Kme,ae(e("input",{type:"text","onUpdate:modelValue":b[0]||(b[0]=w=>t(f).username=w)},null,512),[[Te,t(f).username]]),e("p",Gme,l(t(a).username),1)]),e("div",Zme,[Wme,ae(e("input",{type:"password","onUpdate:modelValue":b[1]||(b[1]=w=>t(f).password=w)},null,512),[[Te,t(f).password]]),e("p",Qme,l(t(a).password),1)]),e("div",Xme,[ehe,ae(e("select",{"onUpdate:modelValue":b[2]||(b[2]=w=>t(f).hak_akses=w)},lhe,512),[[We,t(f).hak_akses]]),e("p",ahe,l(t(a).hak_akses),1)]),e("div",she,[ohe,ae(e("select",{"onUpdate:modelValue":b[3]||(b[3]=w=>t(f).is_active=w)},ihe,512),[[We,t(f).is_active]]),e("p",dhe,l(t(a).is_active),1)])]),e("div",_he,[e("div",uhe,[e("div",che,[e("table",phe,[e("thead",null,[vhe,e("tr",fhe,[e("th",mhe,[e("button",{type:"button",name:"button",class:Ue(["text-xs",t(h).length!=t(i).length?"bg-green-500":"bg-red-500"]),onClick:b[4]||(b[4]=w=>k())},l(t(h).length!=t(i).length?"Allow":"Deny"),3)]),e("th",null,[e("div",hhe,[ae(e("input",{type:"text","onUpdate:modelValue":b[5]||(b[5]=w=>Ee(C)?C.value=w:null),name:"search",placeholder:"Name"},null,512),[[Te,t(C)]])])])])]),e("tbody",bhe,[(s(!0),_(ye,null,Ae(t(y),(w,m)=>(s(),_("tr",{key:m},[e("td",yhe,[e("div",xhe,[ae(e("input",{type:"checkbox","onUpdate:modelValue":S=>w.checked=S,class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600 cursor-pointer"},null,8,whe),[[Dl,w.checked]])])]),e("td",null,[e("div",ghe,l(w.name),1)])]))),128))],512)])])])])]),e("div",$he,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:b[6]||(b[6]=w=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:b[7]||(b[7]=ze(w=>r(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},Vs=Oe(khe,[["__scopeId","data-v-6cde4f75"]]),Bwe=Object.freeze(Object.defineProperty({__proto__:null,default:Vs},Symbol.toStringTag,{value:"Module"})),jhe={key:0,class:"flex items-center justify-center fixed top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},Dhe={class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},She={class:"absolute -top-7 right-0 py-1 px-2 bg-white border-solid border-2 border-gray-600 border-b-0 rounded-tl-md"},The={class:"w-full"},Che=["src"],Phe={class:"flex w-full justify-between mt-5"},Ls=Lt({__name:"GAQR",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!0},qrCodeUrl:{type:String,required:!1}},setup(n){return(o,x)=>{const f=At;return n.show?(s(),_("div",jhe,[e("div",Dhe,[e("div",She,[j(f,{class:"text-2xl text-black cursor-pointer",onClick:x[0]||(x[0]=d=>n.fnClose())})]),e("div",The,[e("img",{class:"w-full aspect-square",src:n.qrCodeUrl,alt:""},null,8,Che)]),e("div",Phe,[e("button",{onClick:x[1]||(x[1]=d=>n.fnClose()),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Close ")])])])):O("",!0)}}}),qwe=Object.freeze(Object.defineProperty({__proto__:null,default:Ls},Symbol.toStringTag,{value:"Module"}));const fa=n=>(nt("data-v-2a7e3d67"),n=n(),rt(),n),Ahe={class:"w-full h-full flex flex-col"},Mhe={class:"w-full flex grow flex-col overflow-auto h-0"},Ohe={class:"w-full flex justify-between flex-wrap"},Nhe={class:"grow flex"},Fhe={class:"m-1"},Ihe=fa(()=>e("option",{value:"active"},"Active",-1)),Yhe=fa(()=>e("option",{value:"nonactive"},"Nonactive",-1)),Bhe=fa(()=>e("option",{value:"all"},"All",-1)),qhe=[Ihe,Yhe,Bhe],Uhe={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=E=>E.is_active==0?"!bg-red-400":"",d=u("active");je(()=>d.value,E=>{b()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset();const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;const{data:E,error:H,status:ve}=yield W("/users",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,ve.value==="error"?(X().trigger(H),[]):E.value.data}),"$4SJ9UL5Y8i")})),o=yield o,x(),o);u("");const i=u({field:"",by:"desc"}),c=u(-1),h=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),k=ne(()=>p.value[c.value]),C=()=>{a.like="";let E=JSON.parse(JSON.stringify($()._tv.global_keyword));E!=""&&(a.like=`id:%${E}%,username:%${E}%`),a.sort="",i.value.field&&(a.sort=i.value.field+":"+i.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)},y=E=>{let H=[];return E.permission_group_users&&E.permission_group_users.length>0&&E.permission_group_users.forEach(ve=>{H.push(ve.permission_group.name)}),H.join(",")};u(null);const g=()=>Y(this,null,function*(){$().loading_full=!0,h.value.may_get_data=!1,a.page=h.value.page,a.page==1&&(p.value=[]),a.filter_status=d.value;const{data:E,error:H,status:ve}=yield W("/users",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,h.value.may_get_data=!0,ve.value==="error"){X().trigger(H);return}h.value.page==1?p.value=E.value.data:h.value.page>1&&(p.value=[...p.value,...E.value.data]),E.value.data.length==0&&(h.value.is_last_record=!0),$()._tv.filter_box=!1}),b=()=>{c.value=-1,h.value.page=1,h.value.is_last_record=!1,C(),g()},v=u(!1),w=u(0),m=u(0),S=u(!1),A=()=>{w.value=0,S.value=!1,m.value=!1,v.value=!0},{display:D}=Je();Dt(Je());const M=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=p.value[c.value].id,S.value=!1,m.value=!1,v.value=!0)},T=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(w.value=p.value[c.value].id,S.value=!1,m.value=!0,v.value=!0)},q=u({}),P=u(!1),N=()=>Y(this,null,function*(){P.value&&(P.value=!1)}),L=()=>{c.value==-1?D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value={id:p.value[c.value].id},P.value=!0)},R=()=>Y(this,null,function*(){$().loading_full=!0;const E=new FormData;E.append("id",p.value[c.value].id),E.append("_method","DELETE");const{data:H,error:ve,status:Ie}=yield W("/user",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:E,retry:0});if($().loading_full=!1,Ie.value==="error"){X().trigger(ve);return}let le=ie({},p.value[c.value]);le.deleted=H.value.deleted,le.deleted_user=H.value.deleted_user,le.deleted_at=H.value.deleted_at,le.deleted_by=H.value.deleted_by,le.deleted_reason=H.value.deleted_reason,d.value!="all"?p.value.splice(c.value,1):p.value.splice(c.value,1,ie({},le)),c.value=-1,P.value=!1}),J=u(""),re=u(!1),te=()=>Y(this,null,function*(){if(c.value==-1){D({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}a.id=p.value[c.value].id,$().loading_full=!0;const{data:E,error:H,status:ve}=yield W("/ga_qr",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,ve.value==="error"){X().trigger(H);return}J.value=E.value,re.value=!0}),ee=u([{key:"no",label:"No",isai:!0},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"username",label:"Username",freeze:1,filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"hak_akses",label:"Hak Akses",filter_on:1,type:"string"},{key:"group",label:"Group",filter_on:1,type:"string"},{key:"is_active",label:"Status",filter_on:1,type:"select",select_item:[{k:"1",v:"Ya"},{k:"0",v:"Tidak"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]),ce=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&K().checkPermission("user.create")),U=ne(()=>["active","nonactive","all"].indexOf(d.value)>-1&&K().checkPermission("user.create")),I=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&K().checkPermissions(["user.modify"])),Z=ne(()=>c.value>-1&&K().checkPermission("user.remove")&&[void 0,0].indexOf(k.value.deleted)>-1);return(E,H)=>{const ve=_t,Ie=fl,le=gt,z=Pt,G=Zt,oe=Ot,se=It,_e=Vs,ue=Ls;return s(),_(ye,null,[e("div",Ahe,[j(ve,{title:"List User"}),e("div",Mhe,[e("div",Ohe,[e("div",Nhe,[e("div",Fhe,[ae(e("select",{class:"","onUpdate:modelValue":H[0]||(H[0]=B=>Ee(d)?d.value=B:null)},qhe,512),[[We,t(d)]])]),t(ce)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[1]||(H[1]=B=>T())},[j(Ie)])):O("",!0),t(U)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[2]||(H[2]=B=>A())},[j(le)])):O("",!0),t(I)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[3]||(H[3]=B=>M())},[j(z)])):O("",!0),t(Z)?(s(),_("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:H[4]||(H[4]=B=>L())},[j(G)])):O("",!0),e("button",{type:"button",name:"button",class:"m-1 text-xs",onClick:H[5]||(H[5]=B=>te())}," SET 2FA ")])]),j(oe,{thead:t(ee),selected:t(c),onSetSelected:H[6]||(H[6]=B=>c.value=B),tbody:t(p),fnCallData:g,scrolling:t(h),onSetScrollingPage:H[7]||(H[7]=B=>t(h).page=B),onDoFilter:H[8]||(H[8]=B=>b()),rowBgColor:f},{group:Q(({item:B})=>[F(l(y(B)),1)]),is_active:Q(({item:B})=>[F(l(B.is_active==1?"Aktif":"Tidak Aktif"),1)]),_:2},1032,["thead","selected","tbody","scrolling"])])]),j(se,{type:"delete",show:t(P),data:t(q),fnClose:N,fnConfirm:R},null,8,["show","data"]),j(_e,{show:t(v),fnClose:()=>{v.value=!1},id:t(w),p_data:t(p),is_copy:t(m)},null,8,["show","fnClose","id","p_data","is_copy"]),j(ue,{show:t(re),fnClose:()=>{re.value=!1},qrCodeUrl:t(J)},null,8,["show","fnClose","qrCodeUrl"])],64)}})}},Hhe=Oe(Uhe,[["__scopeId","data-v-2a7e3d67"]]),Uwe=Object.freeze(Object.defineProperty({__proto__:null,default:Hhe},Symbol.toStringTag,{value:"Module"}));const zhe=n=>(nt("data-v-298aceec"),n=n(),rt(),n),Vhe={class:"box-fixed"},Lhe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Ehe={class:"w-full flex flex-col items-center grow overflow-auto"},Rhe={class:"w-full flex flex-row flex-wrap"},Jhe={class:"w-full flex flex-col flex-wrap p-1"},Khe=zhe(()=>e("label",{for:""},"No Pol",-1)),Ghe={class:"text-red-500"},Zhe={class:"w-full flex items-center justify-end"},Whe={__name:"vehicle",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(n){const o=n,x={id:-1,no_pol:""},f=u(ie({},x)),d=ke("token"),a=u({}),r=()=>Y(this,null,function*(){$().loading_full=!0,a.value={};const i=new FormData;i.append("no_pol",f.value.no_pol);let c="post",h=o.id;h==0||(i.append("id",h),i.append("_method","PUT"));const{data:k,error:C,status:y}=yield W("/vehicle",{method:c,headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},body:i,retry:0});if($().loading_full=!1,y.value==="error"){X().trigger(C,a);return}if(f.value.updated_at=k.value.updated_at,o.id<=0)f.value.id=k.value.id,f.value.created_at=k.value.created_at,o.p_data.unshift(f.value);else{let g=o.p_data.map(b=>b.id).indexOf(o.id);g>-1&&o.p_data.splice(g,1,ie({},f.value))}o.fnClose()}),p=()=>Y(this,null,function*(){$().loading_full=!0;const{data:i,error:c,status:h}=yield W("/vehicle",{method:"get",headers:{Authorization:`Bearer ${d.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if($().loading_full=!1,h.value==="error"){X().trigger(c);return}f.value=i.value.data});return je(()=>o.show,(i,c)=>{i==!0&&(f.value=ie({},x),a.value={},o.id!=0&&p())},{immediate:!0}),(i,c)=>{const h=Xe;return ae((s(),_("section",Vhe,[e("div",null,[j(h,{title:"Form Vehicle",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Lhe,[e("div",Ehe,[e("div",Rhe,[e("div",Jhe,[Khe,ae(e("input",{type:"text","onUpdate:modelValue":c[0]||(c[0]=k=>t(f).no_pol=k)},null,512),[[Te,t(f).no_pol]]),e("p",Ghe,l(t(a).no_pol),1)])])]),e("div",Zhe,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[1]||(c[1]=k=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:c[2]||(c[2]=ze(k=>r(),["prevent"]))}," Save ")])])])],512)),[[Be,n.show]])}}},Es=Oe(Whe,[["__scopeId","data-v-298aceec"]]),Hwe=Object.freeze(Object.defineProperty({__proto__:null,default:Es},Symbol.toStringTag,{value:"Module"}));const ma=n=>(nt("data-v-98c86ae8"),n=n(),rt(),n),Qhe={class:"w-full h-full flex flex-col"},Xhe={class:"w-full flex grow flex-col overflow-auto h-0"},ebe={class:"w-full flex justify-between flex-wrap"},tbe={class:"grow flex"},lbe={class:"m-1"},abe=ma(()=>e("option",{value:"available"},"Available",-1)),sbe=ma(()=>e("option",{value:"deleted"},"Trash",-1)),obe=ma(()=>e("option",{value:"all"},"All",-1)),nbe=[abe,sbe,obe],rbe={class:"grow mb-5"},ibe={__name:"index",setup(n){return Y(this,null,function*(){let o,x;const f=ee=>ee.deleted==1?"!bg-red-400":ee.val==0?"!bg-gray-300":"",d=u("available");je(()=>d.value,ee=>{g()},{immediate:!1});const a={};a._TimeZoneOffset=new Date().getTimezoneOffset();const r=ke("token"),{data:p}=([o,x]=vt(()=>Y(this,null,function*(){return pt(()=>Y(this,null,function*(){$().loading_full=!0;const{data:ee,error:ce,status:U}=yield W("/vehicles",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:{filter_status:d},retry:0});return $().loading_full=!1,U.value==="error"?(X().trigger(ce),[]):ee.value.data}),"$OEvmawoGm4")})),o=yield o,x(),o);u("");const i=u({field:"",by:"desc"}),c=u(-1),h=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),k=ne(()=>p.value[c.value]),C=()=>{a.like="";let ee=JSON.parse(JSON.stringify($()._tv.global_keyword));ee!=""&&(a.like=`id:%${ee}%,no_pol:%${ee}%`),a.sort="",i.value.field&&(a.sort=i.value.field+":"+i.value.by),a.filter_model=JSON.stringify($()._tv.filter_model)},y=()=>Y(this,null,function*(){$().loading_full=!0,h.value.may_get_data=!1,a.page=h.value.page,a.page==1&&(p.value=[]),a.filter_status=d.value;const{data:ee,error:ce,status:U}=yield W("/vehicles",{method:"get",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},params:a,retry:0});if($().loading_full=!1,h.value.may_get_data=!0,U.value==="error"){X().trigger(ce);return}h.value.page==1?p.value=ee.value.data:h.value.page>1&&(p.value=[...p.value,...ee.value.data]),ee.value.data.length==0&&(h.value.is_last_record=!0),$()._tv.filter_box=!1}),g=()=>{c.value=-1,h.value.page=1,h.value.is_last_record=!1,C(),y()},b=u(!1),v=u(0),w=u(!1),m=()=>{v.value=0,w.value=!1,b.value=!0},{display:S}=Je();Dt(Je());const A=()=>{c.value==-1?S({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(v.value=p.value[c.value].id,w.value=!1,b.value=!0)},D=u(!1),M=u({}),T=u(!1),q=u(""),P=()=>Y(this,null,function*(){T.value&&(T.value=!1)}),N=()=>{c.value==-1?S({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value="",M.value={id:p.value[c.value].id},T.value=!0)};je(()=>q.value,ee=>{ee.trim().length>0?D.value=!0:D.value=!1},{immediate:!1});const L=()=>Y(this,null,function*(){$().loading_full=!0;const ee=new FormData;ee.append("id",p.value[c.value].id),ee.append("deleted_reason",q.value),ee.append("_method","DELETE");const{data:ce,error:U,status:I}=yield W("/vehicle",{method:"post",headers:{Authorization:`Bearer ${r.value}`,Accept:"application/json"},body:ee,retry:0});if($().loading_full=!1,I.value==="error"){X().trigger(U);return}let Z=ie({},p.value[c.value]);Z.deleted=ce.value.deleted,Z.deleted_user=ce.value.deleted_user,Z.deleted_at=ce.value.deleted_at,Z.deleted_by=ce.value.deleted_by,Z.deleted_reason=ce.value.deleted_reason,d.value!="all"?p.value.splice(c.value,1):p.value.splice(c.value,1,ie({},Z)),c.value=-1,T.value=!1}),R=u([{key:"no",label:"No",isai:!0},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]),J=ne(()=>["available","all","unapprove"].indexOf(d.value)>-1&&K().checkPermission("vehicle.create")),re=ne(()=>c.value>-1&&[void 0,0].indexOf(k.value.deleted)>-1&&K().checkPermissions(["vehicle.modify"])),te=ne(()=>c.value>-1&&K().checkPermission("vehicle.remove")&&[void 0,0].indexOf(k.value.deleted)>-1);return(ee,ce)=>{const U=_t,I=gt,Z=Pt,E=Zt,H=$t,ve=ft,Ie=ea,le=Ot,z=It,G=Es;return s(),_(ye,null,[e("div",Qhe,[j(U,{title:"List Vehicle"}),e("div",Xhe,[e("div",ebe,[e("div",tbe,[e("div",lbe,[ae(e("select",{class:"","onUpdate:modelValue":ce[0]||(ce[0]=oe=>Ee(d)?d.value=oe:null)},nbe,512),[[We,t(d)]])]),t(J)?(s(),_("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[1]||(ce[1]=oe=>m())},[j(I)])):O("",!0),t(re)?(s(),_("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[2]||(ce[2]=oe=>A())},[j(Z)])):O("",!0),t(te)?(s(),_("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:ce[3]||(ce[3]=oe=>N())},[j(E)])):O("",!0)])]),j(le,{thead:t(R),selected:t(c),onSetSelected:ce[4]||(ce[4]=oe=>c.value=oe),tbody:t(p),fnCallData:y,scrolling:t(h),onSetScrollingPage:ce[5]||(ce[5]=oe=>t(h).page=oe),onDoFilter:ce[6]||(ce[6]=oe=>g()),rowBgColor:f},{val:Q(({item:oe})=>[oe.val?(s(),pe(ve,{key:1})):(s(),pe(H,{key:0}))]),val1:Q(({item:oe})=>[oe.val1?(s(),pe(ve,{key:1})):(s(),pe(H,{key:0}))]),bank_code:Q(({item:oe})=>{var se;return[F(l((se=oe.bank)==null?void 0:se.code),1)]}),attachment_1_type:Q(({item:oe})=>[j(Ie,{value:oe.attachment_1_type},null,8,["value"])]),deleted_by_username:Q(({item:oe})=>{var se;return[F(l((se=oe.deleted_by)==null?void 0:se.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])]),j(z,{type:"delete",show:t(T),data:t(M),fnClose:P,fnConfirm:L,enabledOk:t(D)},{footer:Q(()=>[F(" Masukkan Alasan Penghapusan: "),e("div",rbe,[ae(e("textarea",{"onUpdate:modelValue":ce[7]||(ce[7]=oe=>Ee(q)?q.value=oe:null)},null,512),[[Te,t(q)]])])]),_:1},8,["show","data","enabledOk"]),j(G,{show:t(b),fnClose:()=>{b.value=!1},id:t(v),p_data:t(p)},null,8,["show","fnClose","id","p_data"])],64)}})}},dbe=Oe(ibe,[["__scopeId","data-v-98c86ae8"]]),zwe=Object.freeze(Object.defineProperty({__proto__:null,default:dbe},Symbol.toStringTag,{value:"Module"}));export{Nt as $,Hbe as A,zbe as B,Vbe as C,Lbe as D,Ebe as E,Rbe as F,Jbe as G,Kbe as H,Gbe as I,Zbe as J,Wbe as K,ot as L,ke as M,$ as N,vbe as O,_t as P,Je as Q,At as R,Ds as S,qa as T,K as U,W as V,X as W,Xe as X,$l as Y,Pt as Z,Oe as _,mbe as a,Gye as a$,Ft as a0,gl as a1,Pl as a2,$t as a3,ft as a4,Ot as a5,Va as a6,Wa as a7,Wl as a8,jl as a9,gye as aA,$ye as aB,kye as aC,jye as aD,Dye as aE,Sye as aF,Tye as aG,Cye as aH,Pye as aI,Aye as aJ,Mye as aK,Oye as aL,Nye as aM,Fye as aN,Iye as aO,Yye as aP,Bye as aQ,qye as aR,Uye as aS,Hye as aT,zye as aU,Vye as aV,Lye as aW,Eye as aX,Rye as aY,Jye as aZ,Kye as a_,Zl as aa,Qa as ab,Qbe as ac,Xbe as ad,eye as ae,tye as af,lye as ag,aye as ah,sye as ai,oye as aj,nye as ak,rye as al,iye as am,dye as an,_ye as ao,uye as ap,cye as aq,pye as ar,vye as as,fye as at,mye as au,hye as av,bye as aw,yye as ax,xye as ay,wye as az,bbe as b,owe as b$,Zye as b0,Wye as b1,Qye as b2,Xye as b3,exe as b4,txe as b5,lxe as b6,axe as b7,sxe as b8,oxe as b9,Mxe as bA,Oxe as bB,Nxe as bC,Fxe as bD,Ixe as bE,Yxe as bF,Bxe as bG,qxe as bH,Uxe as bI,Hxe as bJ,zxe as bK,Vxe as bL,Lxe as bM,Exe as bN,Rxe as bO,Jxe as bP,Kxe as bQ,Gxe as bR,Zxe as bS,Wxe as bT,Qxe as bU,Xxe as bV,ewe as bW,twe as bX,lwe as bY,awe as bZ,swe as b_,nxe as ba,rxe as bb,ixe as bc,dxe as bd,_xe as be,uxe as bf,cxe as bg,pxe as bh,vxe as bi,fxe as bj,mxe as bk,hxe as bl,bxe as bm,yxe as bn,xxe as bo,wxe as bp,gxe as bq,$xe as br,kxe as bs,jxe as bt,Dxe as bu,Sxe as bv,Txe as bw,Cxe as bx,Pxe as by,Axe as bz,ybe as c,nwe as c0,rwe as c1,iwe as c2,dwe as c3,_we as c4,uwe as c5,cwe as c6,pwe as c7,vwe as c8,fwe as c9,zwe as cA,mwe as ca,hwe as cb,bwe as cc,ywe as cd,xwe as ce,wwe as cf,gwe as cg,$we as ch,kwe as ci,jwe as cj,Dwe as ck,Swe as cl,Twe as cm,Cwe as cn,Pwe as co,Awe as cp,Mwe as cq,Owe as cr,Nwe as cs,Fwe as ct,Iwe as cu,Ywe as cv,Bwe as cw,qwe as cx,Uwe as cy,Hwe as cz,wbe as d,gbe as e,$be as f,kbe as g,jbe as h,fbe as i,Dbe as j,Sbe as k,Tbe as l,Cbe as m,Pbe as n,Abe as o,Mbe as p,Obe as q,xbe as r,Nbe as s,hbe as t,Fbe as u,Ibe as v,Ybe as w,Bbe as x,qbe as y,Ube as z};
