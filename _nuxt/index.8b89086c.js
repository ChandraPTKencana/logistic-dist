import{r,f as H,g as Fe,h as Me,i as h,C as Ne,j as le,s as Le,c as g,a as u,b as i,k as ae,v as Re,l as a,m as oe,n as x,w as D,F as Ve,q as Ue,x as m,y as B,o as p,z as L,d as C,t as J,A as He,B as K,_ as Y,p as Je,e as Ke}from"./entry.1e88be79.js";import Ye from"./Header.1a1b27e0.js";import qe from"./Plus.1b3e8542.js";import Ge from"./Edit.8966467b.js";import Ze from"./Eyes.f58c1873.js";import Qe from"./Delete.8ee8ee54.js";import We from"./DeleteOff.4bc12bed.js";import Xe from"./Signature.93c85007.js";import et from"./SignatureOff.64d0569a.js";import tt from"./Line.077d896a.js";import lt from"./Check.48b7183d.js";import at from"./TypeIcon.42b0f3bb.js";import ot from"./TableView.c1b211c9.js";import{u as E}from"./useMyFetch.487dd4ac.js";import{u as y}from"./useUtils.10b12999.js";import{_ as nt}from"./_plugin-vue_export-helper.c27b6911.js";import"./DocJPEG.6edc57dd.js";import"./DocJPG.d65ac075.js";import"./DocPNG.14357c4a.js";import"./DocPDF.c1675b51.js";import"./Search.816b40e6.js";import"./Adjust.ccd3882f.js";import"./TableHeaderEye.5a5ad1e8.js";import"./Times.2d450734.js";import"./ClearAll.48ccd97c.js";import"./client-only.617c5edc.js";import"./ClearEach.7116e6ac.js";import"./CaretLeftDoubleBold.dcfe5d05.js";import"./CaretLeftBold.6ac0cc7a.js";import"./CaretRightBold.0026fdc9.js";import"./CaretRightDoubleBold.a6cb2453.js";const st=K(()=>Y(()=>import("./PopupMini.9efa0efd.js"),["./PopupMini.9efa0efd.js","./PopupMini.vue.08c4ff93.js","./Times.2d450734.js","./_plugin-vue_export-helper.c27b6911.js","./entry.1e88be79.js","./entry.ac1ecdba.css","./Exclamation.c35dd193.js"],import.meta.url).then(d=>d.default||d)),rt=K(()=>Y(()=>import("./employee.9332e3a8.js"),["./employee.9332e3a8.js","./HeaderPopup.vue.17bc73b6.js","./Times.2d450734.js","./_plugin-vue_export-helper.c27b6911.js","./entry.1e88be79.js","./entry.ac1ecdba.css","./client-only.617c5edc.js","./InputPointFormat.vue.da9793c7.js","./Eyes.f58c1873.js","./EyesOff.ab5353b4.js","./AttachmentSingle.66910e00.js","./PDFJsView.2d9fd0bb.js","./PDFJsView.4e9fad9f.css","./useMyFetch.487dd4ac.js"],import.meta.url).then(d=>d.default||d)),ut=K(()=>Y(()=>import("./employee_validasi.5b60fc41.js"),["./employee_validasi.5b60fc41.js","./HeaderPopup.vue.17bc73b6.js","./Times.2d450734.js","./_plugin-vue_export-helper.c27b6911.js","./entry.1e88be79.js","./entry.ac1ecdba.css","./AttachmentSingle.66910e00.js","./PDFJsView.2d9fd0bb.js","./PDFJsView.4e9fad9f.css","./useUtils.10b12999.js","./useMyFetch.487dd4ac.js"],import.meta.url).then(d=>d.default||d)),O=d=>(Je("data-v-a96cfbb5"),d=d(),Ke(),d),it={class:"w-full h-full flex flex-col"},dt={class:"w-full flex grow flex-col overflow-auto h-0"},_t={class:"w-full flex justify-between flex-wrap"},mt={class:"grow flex"},pt={class:"m-1"},vt=O(()=>u("option",{value:"available"},"Available",-1)),ct=O(()=>u("option",{value:"unapprove"},"Unapprove",-1)),ft=O(()=>u("option",{value:"deleted"},"Trash",-1)),yt=O(()=>u("option",{value:"all"},"All",-1)),bt=[vt,ct,ft,yt],kt={class:"grow mb-5"},ht={class:"text-red-500"},gt=O(()=>u("br",null,null,-1)),xt=O(()=>u("b",{class:"text-green-500"},"Kembali Bekerja ",-1)),wt={__name:"index",async setup(d){let z,q;const ne=e=>e.deleted==1?"!bg-red-400":e.val==0||e.val1==0?"!bg-gray-300":"",b=r("available");H(()=>b.value,e=>{Q()},{immediate:!1});const c={};c._TimeZoneOffset=new Date().getTimezoneOffset();const T=Fe("token"),{data:se}=([z,q]=Me(async()=>Ue(async()=>{let e=[];m().loading_full=!0;const{data:t,error:v,status:k}=await E("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{filter_status:b},retry:0});return m().loading_full=!1,k.value==="error"?(B().trigger(v),[]):(e=t.value.data,{employees:e})},{lazy:!0,server:!1,default:()=>({employees:[]})},"$p5jj5crAgd")),z=await z,q(),z),o=r([]);H(()=>{var e;return(e=se.value)==null?void 0:e.employees},e=>{e&&(o.value=[...e])},{immediate:!0});const R=r({field:"",by:"desc"}),l=r(-1),f=r({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),_=h(()=>o.value[l.value]),re=()=>{c.like="";let e=JSON.parse(JSON.stringify(m()._tv.global_keyword));e!=""&&(c.like=`id:%${e}%,name:%${e}%,ktp_no:%${e}%,sim_no:%${e}%,phone_number:%${e}%,rek_no:%${e}%`),c.sort="",R.value.field&&(c.sort=R.value.field+":"+R.value.by),c.filter_model=JSON.stringify(m()._tv.filter_model)},G=r(null),Z=async()=>{m().loading_full=!0,f.value.may_get_data=!1,c.page=f.value.page,c.page==1&&(o.value=[]),c.filter_status=b.value;const{data:e,error:t,status:v}=await E("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:c,retry:0});if(m().loading_full=!1,f.value.may_get_data=!0,v.value==="error"){B().trigger(t);return}f.value.page==1?(o.value=e.value.data,G.value&&(G.value.scrollTop=0)):f.value.page>1&&(o.value=[...o.value,...e.value.data]),e.value.data.length==0&&(f.value.is_last_record=!0),m()._tv.filter_box=!1},Q=()=>{l.value=-1,f.value.page=1,f.value.is_last_record=!1,re(),Z()};Ne();const F=r(!1),V=r(0),P=r(0),A=r(1),ue=()=>{V.value=0,A.value=-1,P.value=!1,F.value=!0},{display:w}=le();Le(le());const ie=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(V.value=o.value[l.value].id,A.value=-1,P.value=!1,F.value=!0)},$=r(!1),M=r(0),de=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=o.value[l.value].id,A.value=1,P.value=!1,$.value=!0)},_e=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=o.value[l.value].id,A.value=0,P.value=!1,$.value=!0)},me=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value=o.value[l.value].id,P.value=!1,A.value=-1,$.value=!0)},U=r(!1),W=r({}),I=r(!1),S=r(""),pe=async()=>{I.value&&(I.value=!1)},ve=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value="",W.value={id:o.value[l.value].id},I.value=!0)},N=r(!1),ce=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):N.value=!0};H(()=>S.value,e=>{e.trim().length>0?U.value=!0:U.value=!1},{immediate:!1});const fe=async()=>{m().loading_full=!0;const e=new FormData;e.append("id",o.value[l.value].id),e.append("deleted_reason",S.value),e.append("_method","DELETE");const{data:t,error:v,status:k}=await E("/employee",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:e,retry:0});if(m().loading_full=!1,k.value==="error"){B().trigger(v);return}let s={...o.value[l.value]};s.deleted=t.value.deleted,s.deleted_user=t.value.deleted_user,s.deleted_at=t.value.deleted_at,s.deleted_by=t.value.deleted_by,s.deleted_reason=t.value.deleted_reason,b.value!="all"?o.value.splice(l.value,1):o.value.splice(l.value,1,{...s}),l.value=-1,I.value=!1},ye=async()=>{m().loading_full=!0;const e=new FormData;e.append("id",o.value[l.value].id),e.append("_method","PUT");const{data:t,error:v,status:k}=await E("/employee_unremove",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:e,retry:0});if(m().loading_full=!1,k.value==="error"){B().trigger(v);return}let s={...o.value[l.value]};s.deleted=t.value.deleted,s.deleted_user=t.value.deleted_user,s.deleted_at=t.value.deleted_at,s.deleted_by=t.value.deleted_by,s.deleted_reason=t.value.deleted_reason,b.value!="all"?o.value.splice(l.value,1):o.value.splice(l.value,1,{...s}),l.value=-1,N.value=!1},be=()=>{l.value==-1?w({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):ke()},ke=async()=>{m().loading_full=!0;const e=new FormData;e.append("id",o.value[l.value].id),e.append("_method","PUT");const{data:t,error:v,status:k}=await E("/employee_generate_code",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:e,retry:0});if(m().loading_full=!1,k.value==="error"){B().trigger(v);return}let s={...o.value[l.value]};s.m_enkey=t.value.m_enkey,o.value.splice(l.value,1,{...s})},he=r([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"m_enkey",label:"Kode Kunci",filter_on:1},{key:"username",label:"Username",filter_on:1},{key:"id",label:"ID",freeze:1,filter_on:1,type:"number"},{key:"name",label:"Nama",freeze:1,freeze_left:"44px",filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"role",label:"Jabatan",filter_on:1,type:"string"},{key:"ktp_no",label:"No KTP",filter_on:1,type:"string"},{key:"sim_no",label:"No SIM",filter_on:1,type:"string"},{key:"bank_code",label:"Nama Bank",filter_on:1,type:"string"},{key:"rek_no",label:"No Rek",filter_on:1,type:"string"},{key:"rek_name",label:"Nama Rek",filter_on:1,type:"string"},{key:"phone_number",label:"No Tlp",filter_on:1,type:"string"},{key:"birth_place",label:"Tempat Lahir",filter_on:1,type:"string"},{key:"birth_date",label:"Tanggal Lahir",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"tmk",label:"TMK",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"address",label:"Alamat",filter_on:1,type:"string"},{key:"status",label:"Status",filter_on:1,type:"string"},{key:"attachment_1_type",label:"File",type:"string"},{key:"bpjs_kesehatan",label:"BPJS Kesehatan",class:" justify-end",type:"number",filter_on:1},{key:"bpjs_jamsos",label:"BPJS Jamsos",class:" justify-end",type:"number",filter_on:1},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]);h(()=>l.value>-1&&[void 0,0].indexOf(_.value.deleted)>-1&&y().checkPermission("employee.create"));const ge=h(()=>["available","all","unapprove"].indexOf(b.value)>-1&&y().checkPermission("employee.create")),xe=h(()=>l.value>-1&&[void 0,0].indexOf(_.value.deleted)>-1&&(y().checkPermission("employee.val")&&[void 0,0].indexOf(_.value.val)>-1||y().checkPermission("employee.val1")&&[void 0,0].indexOf(_.value.val1)>-1)&&y().checkPermissions(["employee.modify","employee.detail.modify","employee.detail2.modify"])),we=h(()=>l.value>-1&&[void 0,0].indexOf(_.value.deleted)>-1&&(y().checkPermission("employee.val")&&[void 0,0].indexOf(_.value.val)>-1||y().checkPermission("employee.val1")&&[void 0,0].indexOf(_.value.val1)>-1)),De=h(()=>l.value>-1&&[void 0,0].indexOf(_.value.deleted)>-1&&y().checkPermission("employee.unval")&&[1].indexOf(_.value.val)>-1),Ce=h(()=>l.value>-1&&y().checkPermission("employee.remove")&&[void 0,0].indexOf(_.value.deleted)>-1),Pe=h(()=>l.value>-1&&y().checkPermission("employee.unremove")&&[1].indexOf(_.value.deleted)>-1),Ae=h(()=>l.value>-1&&[void 0,0].indexOf(_.value.deleted)>-1&&[1].indexOf(_.value.val)>-1);return(e,t)=>{const v=Ye,k=qe,s=Ge,Se=Ze,Oe=Qe,Te=We,$e=Xe,Ie=et,X=tt,ee=lt,je=at,Be=ot,te=st,Ee=rt,ze=ut;return p(),g(Ve,null,[u("div",it,[i(v,{title:"List Employee"}),u("div",dt,[u("div",_t,[u("div",mt,[u("div",pt,[ae(u("select",{class:"","onUpdate:modelValue":t[0]||(t[0]=n=>oe(b)?b.value=n:null)},bt,512),[[Re,a(b)]])]),a(ge)?(p(),g("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[1]||(t[1]=n=>ue())},[i(k)])):x("",!0),a(xe)?(p(),g("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[2]||(t[2]=n=>ie())},[i(s)])):x("",!0),a(l)>-1?(p(),g("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[3]||(t[3]=n=>me())},[i(Se)])):x("",!0),a(Ce)?(p(),g("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[4]||(t[4]=n=>ve())},[i(Oe)])):x("",!0),a(Pe)?(p(),g("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[5]||(t[5]=n=>ce())},[i(Te)])):x("",!0),a(we)?(p(),g("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[6]||(t[6]=n=>de())},[i($e)])):x("",!0),a(De)?(p(),g("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[7]||(t[7]=n=>_e())},[i(Ie)])):x("",!0),a(Ae)?(p(),g("button",{key:7,type:"button",name:"button",class:"m-1 text-sm",onClick:t[8]||(t[8]=n=>be())}," GEN CODE ")):x("",!0)])]),i(Be,{thead:a(he),selected:a(l),onSetSelected:t[9]||(t[9]=n=>l.value=n),tbody:a(o),fnCallData:Z,scrolling:a(f),onSetScrollingPage:t[10]||(t[10]=n=>a(f).page=n),onDoFilter:t[11]||(t[11]=n=>Q()),rowBgColor:ne},{val:D(({item:n})=>[n.val?(p(),L(ee,{key:1})):(p(),L(X,{key:0}))]),val1:D(({item:n})=>[n.val1?(p(),L(ee,{key:1})):(p(),L(X,{key:0}))]),bank_code:D(({item:n})=>{var j;return[C(J((j=n.bank)==null?void 0:j.code),1)]}),attachment_1_type:D(({item:n})=>[i(je,{value:n.attachment_1_type},null,8,["value"])]),deleted_by_username:D(({item:n})=>{var j;return[C(J((j=n.deleted_by)==null?void 0:j.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])]),i(te,{type:"delete",show:a(I),data:a(W),fnClose:pe,fnConfirm:fe,enabledOk:a(U)},{footer:D(()=>[C(" Masukkan Alasan Penghapusan: "),u("div",kt,[ae(u("textarea",{"onUpdate:modelValue":t[12]||(t[12]=n=>oe(S)?S.value=n:null)},null,512),[[He,a(S)]])])]),_:1},8,["show","data","enabledOk"]),i(Ee,{show:a(F),fnClose:()=>{F.value=!1},id:a(V),p_data:a(o),is_copy:a(P)},null,8,["show","fnClose","id","p_data","is_copy"]),i(ze,{show:a($),fnClose:()=>{$.value=!1},id:a(M),p_data:a(o),it_state:a(A)},null,8,["show","fnClose","id","p_data","it_state"]),i(te,{type:"custome",show:a(N),fnClose:()=>N.value=!1,fnConfirm:ye},{words:D(()=>[C(" Alasan Keluar Sebelumnya : "),u("b",ht,J(a(o)[a(l)].deleted_reason),1),C(". "),gt,C(" Pekerja telah "),xt,C(" , yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"])],64)}}},tl=nt(wt,[["__scopeId","data-v-a96cfbb5"]]);export{tl as default};
