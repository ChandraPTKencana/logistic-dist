import{_ as jt}from"./Header.7f55fc2d.js";import{_ as Mt}from"./Plus.721c9691.js";import{_ as Ct}from"./Edit.e3a86702.js";import{_ as Bt}from"./Delete.876c764e.js";import{_ as Ht}from"./Signature.2b6f2c93.js";import{_ as St,u as Pt,a as Yt}from"./useDownload.3c01db61.js";import{_ as Nt}from"./Search.afa00284.js";import{_ as It,a as Ot}from"./Check.fe401740.js";import{_ as Ft}from"./PopupMini.vue.bbc7ce6b.js";import{_ as Vt}from"./HeaderPopup.vue.bfe0c3e8.js";import{r as f,f as J,g as zt,h as I,v as Lt,o as _,c as r,a as t,b as x,t as o,k as e,G as u,m as st,s as at,x as v,y as M,p as Ut,e as Et,D as Kt,B as Jt,H as et,I as Rt,j as qt,i as Gt,l as lt,F as Zt,n as Qt,E as Wt,q as ot,N,O as Xt}from"./entry.1c7a5935.js";import{u as it}from"./useUtils.100f5b4a.js";import{u as C}from"./useMyFetch.1c7a7187.js";import{_ as te}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ee}from"./Times.19987452.js";import"./client-only.3b668053.js";import"./InputPointFormat.vue.c47538a0.js";const n=D=>(Ut("data-v-22cde9d3"),D=D(),Et(),D),le={class:"box-fixed"},oe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},se={class:"w-full flex flex-col items-center grow overflow-auto"},ae={class:"w-full flex flex-row flex-wrap"},ie={class:"w-full flex flex-col flex-wrap p-1"},ne=n(()=>t("label",{for:""},"U.Jalan Per",-1)),_e={class:"card-border"},ce={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},re=n(()=>t("label",{for:""},"Jenis",-1)),de={class:"card-border"},ue={key:0,class:"w-full flex pt-5"},fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pe=n(()=>t("label",{for:""},"Tujuan",-1)),ve={class:"card-border"},me={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},he=n(()=>t("label",{for:""},"Tipe",-1)),we={class:"card-border"},be={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ke=n(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),xe={class:"card-border"},ge={key:1,class:"w-full flex pb-5"},ye={class:"w-full sm:w-8/12 md:w-9/12 lg:w-9/12 flex flex-col flex-wrap p-1"},De=n(()=>t("label",{for:""},"PV",-1)),$e={class:"card-border"},Te={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ae=n(()=>t("label",{for:""},"Total Dari PV",-1)),je={class:"card-border"},Me={key:2,class:"w-full flex flex-col flex-wrap p-1"},Ce=n(()=>t("label",{for:""},"Tiket A",-1)),Be={class:"card-border"},He={key:3,class:"w-full flex flex-wrap"},Se={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pe=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),Ye={class:"card-border"},Ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ie=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),Oe={class:"card-border"},Fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ve=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),ze={class:"card-border"},Le={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ue=n(()=>t("label",{for:""},"Supir",-1)),Ee={class:"card-border"},Ke={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Je=n(()=>t("label",{for:""},"No Pol",-1)),Re={class:"card-border"},qe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ge=n(()=>t("label",{for:""},"In At",-1)),Ze={class:"card-border"},Qe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},We=n(()=>t("label",{for:""},"Out At",-1)),Xe={class:"card-border"},tl={key:4,class:"w-full flex flex-col flex-wrap p-1"},el=n(()=>t("label",{for:""},"Tiket B",-1)),ll={class:"card-border"},ol={key:5,class:"w-full flex flex-wrap"},sl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},al=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),il={class:"card-border"},nl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_l=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),cl={class:"card-border"},rl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},dl=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),ul={class:"card-border"},fl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pl=n(()=>t("label",{for:""},"Supir",-1)),vl={class:"card-border"},ml={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},hl=n(()=>t("label",{for:""},"No Pol",-1)),wl={class:"card-border"},bl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},kl=n(()=>t("label",{for:""},"In At",-1)),xl={class:"card-border"},gl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},yl=n(()=>t("label",{for:""},"Out At",-1)),Dl={class:"card-border"},$l={key:6,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Tl=n(()=>t("label",{for:""},"Bruto",-1)),Al={class:"card-border"},jl={key:7,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ml=n(()=>t("label",{for:""},"Tara",-1)),Cl={class:"card-border"},Bl={key:8,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hl=n(()=>t("label",{for:""},"Netto",-1)),Sl={class:"card-border"},Pl={key:9,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Yl=n(()=>t("label",{for:""},"In At",-1)),Nl={class:"card-border"},Il={key:10,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ol=n(()=>t("label",{for:""},"Out At",-1)),Fl={class:"card-border"},Vl={key:11,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},zl=n(()=>t("label",{for:""},"Supir",-1)),Ll={class:"card-border"},Ul={key:12,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},El=n(()=>t("label",{for:""},"Kernet",-1)),Kl={class:"card-border"},Jl={key:13,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Rl=n(()=>t("label",{for:""},"No Pol",-1)),ql={class:"card-border"},Gl={class:"w-full flex items-center justify-end"},Zl={class:"w-full flex flex-wrap p-3 items-center"},Ql=n(()=>t("div",null," Di Validasi oleh : ",-1)),Wl={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Xl={key:0},to={key:1},eo={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(D){const b=D,{$moment:k}=at(),{pointFormat:d}=it(),l=f({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),j=J("token"),O=async()=>{v().loading_full=!0;const g=new FormData;let c="post",T=b.id;T==0||(g.append("id",T),g.append("_method","PUT"));const{data:m,error:H,status:V}=await C("/trx_trp_validasi",{method:c,headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},body:g,retry:0});if(v().loading_full=!1,V.value==="error"){M().trigger(H);return}l.value.val=m.value.val,l.value.val_user=m.value.val_user,l.value.val_by=m.value.val_by,l.value.val_at=m.value.val_at,l.value.val1=m.value.val1,l.value.val1_user=m.value.val1_user,l.value.val1_by=m.value.val1_by,l.value.val1_at=m.value.val1_at;let p=b.p_data.map(A=>A.id).indexOf(b.id);p>=-1&&b.p_data.splice(p,1,{...l.value}),b.fnClose()},F=async()=>{v().loading_full=!0;const{data:g,error:c,status:T}=await C("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:{id:b.id},retry:0});if(v().loading_full=!1,T.value==="error"){M().trigger(c);return}l.value=g.value.data};return zt(()=>b.show,(g,c)=>{g==!0&&F()},{immediate:!0}),(g,c)=>{const T=Vt;return I((_(),r("section",le,[t("div",null,[x(T,{title:"Form Transaction Validation",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",oe,[t("div",se,[t("div",ae,[t("div",ie,[ne,t("div",_e,o(e(l).tanggal?e(k)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",ce,[re,t("div",de,o(e(l).jenis),1)]),e(l).jenis!=""?(_(),r("div",ue,[t("div",fe,[pe,t("div",ve,o(e(l).xto),1)]),t("div",me,[he,t("div",we,o(e(l).tipe),1)]),t("div",be,[ke,t("div",xe,o(e(d)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),r("div",ge,[t("div",ye,[De,t("div",$e,o(e(l).pv_no),1)]),t("div",Te,[Ae,t("div",je,o(e(d)(e(l).pv_total||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),r("div",Me,[Ce,t("div",Be,o(e(l).ticket_a_no),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",He,[t("div",Se,[Pe,t("div",Ye,o(e(d)(e(l).ticket_a_bruto||0)),1)]),t("div",Ne,[Ie,t("div",Oe,o(e(d)(e(l).ticket_a_tara||0)),1)]),t("div",Fe,[Ve,t("div",ze,o(e(d)(e(l).ticket_a_netto||0)),1)]),t("div",Le,[Ue,t("div",Ee,o(e(l).ticket_a_supir),1)]),t("div",Ke,[Je,t("div",Re,o(e(l).ticket_a_no_pol),1)]),t("div",qe,[Ge,t("div",Ze,o(e(l).ticket_a_in_at?e(k)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",Qe,[We,t("div",Xe,o(e(l).ticket_a_out_at?e(k)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="TBS"?(_(),r("div",tl,[el,t("div",ll,o(e(l).ticket_b_no),1)])):u("",!0),e(l).jenis=="TBS"?(_(),r("div",ol,[t("div",sl,[al,t("div",il,o(e(d)(e(l).ticket_b_bruto||0)),1)]),t("div",nl,[_l,t("div",cl,o(e(d)(e(l).ticket_b_tara||0)),1)]),t("div",rl,[dl,t("div",ul,o(e(d)(e(l).ticket_b_netto||0)),1)]),t("div",fl,[pl,t("div",vl,o(e(l).ticket_b_supir),1)]),t("div",ml,[hl,t("div",wl,o(e(l).ticket_b_no_pol),1)]),t("div",bl,[kl,t("div",xl,o(e(l).ticket_b_in_at?e(k)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",gl,[yl,t("div",Dl,o(e(l).ticket_b_out_at?e(k)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",$l,[Tl,t("div",Al,o(e(d)(e(l).ticket_b_bruto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",jl,[Ml,t("div",Cl,o(e(d)(e(l).ticket_b_tara||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Bl,[Hl,t("div",Sl,o(e(d)(e(l).ticket_b_netto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Pl,[Yl,t("div",Nl,o(e(l).ticket_b_in_at?e(k)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Il,[Ol,t("div",Fl,o(e(l).ticket_b_out_at?e(k)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",Vl,[zl,t("div",Ll,o(e(l).supir),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",Ul,[El,t("div",Kl,o(e(l).kernet),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",Jl,[Rl,t("div",ql,o(e(l).no_pol),1)])):u("",!0)])]),t("div",Gl,[t("div",Zl,[Ql,e(l).val||e(l).val1?(_(),r("div",Wl,[e(l).val?(_(),r("div",Xl," App 1 : "+o(e(l).val_by.username)+" ( "+o(e(l).val_at?e(k)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val1?(_(),r("div",to," App 2 : "+o(e(l).val1_by.username)+" ( "+o(e(l).val1_at?e(k)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[0]||(c[0]=m=>D.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:c[1]||(c[1]=st(m=>O(),["prevent"]))}," Validasi ")])])])],512)),[[Lt,D.show]])}}},lo=te(eo,[["__scopeId","data-v-22cde9d3"]]),oo={class:"w-full h-full flex flex-col"},so={class:"w-full flex grow flex-col overflow-auto h-0"},ao={class:"w-full flex"},io={action:"#",class:"w-full flex p-1"},no={class:"grow"},_o=t("div",{class:"font-bold"}," Keyword ",-1),co={class:"pl-1"},ro=t("div",{class:"font-bold"}," Sort By ",-1),uo=Xt('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),fo=[uo],po={class:"pl-1"},vo=t("div",{class:"font-bold"}," Sort Order ",-1),mo=t("option",{value:"asc"},"Asc",-1),ho=t("option",{value:"desc"},"Desc",-1),wo=[mo,ho],bo={class:"flex items-end pl-1"},ko={class:"w-full flex justify-center items-center grow h-0 p-1"},xo={key:0,class:""},go={class:"tacky"},yo=t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"Status"),t("th",null,"App 1"),t("th",null,"App 2"),t("th",null,"ID"),t("th",null,"U.Jalan Per"),t("th",null,"No Pol"),t("th",null,"Tujuan"),t("th",null,"Tipe"),t("th",null,"Jenis"),t("th",null,"Amount"),t("th",null,"PV No"),t("th",null,"PV Total"),t("th",null,"Ticket A No"),t("th",null,"Ticket A Bruto"),t("th",null,"Ticket A Tara"),t("th",null,"Ticket A Netto"),t("th",null,"Ticket A Supir"),t("th",null,"Ticket A No Pol"),t("th",null,"Ticket A In At"),t("th",null,"Ticket A Out At"),t("th",null,"Ticket B No"),t("th",null,"Ticket B Bruto"),t("th",null,"Ticket B Tara"),t("th",null,"Ticket B Netto"),t("th",null,"Ticket B Supir"),t("th",null,"Ticket B No Pol"),t("th",null,"Ticket B In At"),t("th",null,"Ticket B Out At"),t("th",null,"Supir"),t("th",null,"Kernet"),t("th",null,"Created At"),t("th",null,"Updated At")])],-1),Do=["onClick"],$o={class:"flex items-center justify-center"},To={class:"flex items-center justify-center"},Ao={class:"flex items-center justify-center"},jo={class:"bold"},Mo={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Co={class:"relative",style:{width:"95%",height:"90%"}},Bo={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ho=["src"],Qo={__name:"index",async setup(D){let b,k;const{$moment:d}=at(),{pointFormat:$}=it(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="created_at:desc";const j=J("token"),O=J("role"),F=a=>a.includes(O.value),{data:g}=([b,k]=Kt(async()=>Wt(async()=>{v().loading_full=!0;let a=[];const[i,y]=await Promise.all([C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},retry:0})]);return i.status.value!=="error"&&(a=i.data.value.data),i.status.value==="error"?(M().trigger(i.error),{trx_trps:a}):(v().loading_full=!1,{trx_trps:a})},"$pFLmKcrKj9")),b=await b,k(),b),c=f(g.value.trx_trps||[]),T=f([]),m=f([]),H=f([]),V=async()=>{v().loading_full=!0;const{data:a,error:i,status:y}=await C("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:l,retry:0});if(v().loading_full=!1,y.value==="error"){M().trigger(i);return}T.value=a.value.list_ujalan,m.value=a.value.list_ticket,H.value=a.value.list_pv},p=f(""),A=f({field:"tanggal",by:"desc"}),h=f(-1),w=f({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),nt=()=>{l.like="",p.value!=""&&(l.like=`id:%${p.value}%,xto:%${p.value}%,jenis:%${p.value}%,pv_no:%${p.value}%,ticket_a_no:%${p.value}%,ticket_b_no:%${p.value}%,no_pol:%${p.value}%,supir:%${p.value}%,kernet:%${p.value}%`),l.sort="",A.value.field&&(l.sort=A.value.field+":"+A.value.by)},S=f(null),R=async()=>{v().loading_full=!0,w.value.may_get_data=!1,l.page=w.value.page,l.page==1&&(c.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(c.value[0]));const{data:a,error:i,status:y}=await C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:l,retry:0});if(v().loading_full=!1,w.value.may_get_data=!0,y.value==="error"){M().trigger(i);return}w.value.page==1?(c.value=a.value.data,S.value&&(S.value.scrollTop=0)):w.value.page>1&&(c.value=[...c.value,...a.value.data]),a.value.data.length==0&&(w.value.is_last_record=!0)},_t=async()=>{if(!w.value.may_get_data)return;let a=S.value;if(a.scrollLeft!=w.value.scrollLeft){w.value.scrollLeft=a.scrollLeft;return}w.value.is_last_record||!(Math.round(a.scrollTop)+a.clientHeight>=a.scrollHeight-1)||(w.value.page++,await R())},ct=()=>{w.value.page=1,w.value.is_last_record=!1,nt(),R()};Jt();const P=f(!1),z=f(0),rt=()=>{z.value=0,P.value=!0},{display:Y}=et();Rt(et());const dt=()=>{h.value==-1?Y({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(z.value=c.value[h.value].id,P.value=!0)},L=f(!1),q=f(0),ut=()=>{h.value==-1?Y({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value=c.value[h.value].id,L.value=!0)},G=f({}),B=f(!1),ft=async()=>{B.value&&(B.value=!1)},pt=()=>{h.value==-1?Y({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(G.value={id:c.value[h.value].id},B.value=!0)},vt=async()=>{v().loading_full=!0;const a=new FormData;a.append("id",c.value[h.value].id),a.append("_method","DELETE");const{data:i,error:y,status:E}=await C("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},body:a,retry:0});if(v().loading_full=!1,E.value==="error"){M().trigger(y);return}c.value.splice(h.value,1),h.value=-1,B.value=!1},{downloadFile:mt,printHtml:ht}=Pt(),U=f(!1),Z=f(""),Q=async()=>{if(U.value==!0){U.value=!1;return}if(h.value==-1){Y({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}v().loading_full=!0;const{data:a,error:i,status:y}=await C("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:{id:c.value[h.value].id},retry:0});if(v().loading_full=!1,y.value==="error"){M().trigger(i);return}ht(a.value.html,318)},wt=()=>{mt(Z.value)},W=a=>a.pv_id<=0||["CPO","PK"].indexOf(a.jenis)>-1&&(a.ticket_a_id<=0||a.ticket_b_bruto<=0||a.ticket_b_tara<=0||a.ticket_b_netto<=0||a.ticket_b_in_at==""||a.ticket_b_out_at=="")||a.jenis=="TBS"&&(a.ticket_a_id<=0||a.ticket_b_id<=0)||a.jenis=="TBSK"&&a.ticket_b_id<=0?0:1;return(a,i)=>{const y=jt,E=Mt,bt=Ct,kt=Bt,xt=Ht,gt=Yt,yt=Nt,X=It,tt=Ot,Dt=Ft,$t=St,Tt=lo,At=ee;return _(),r("div",oo,[x(y,{title:"List Transaction"}),t("div",so,[t("div",ao,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[0]||(i[0]=s=>rt())},[x(E)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[1]||(i[1]=s=>dt())},[x(bt)]),F(["PabrikTransport"])?u("",!0):(_(),r("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[2]||(i[2]=s=>pt())},[x(kt)])),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[3]||(i[3]=s=>ut())},[x(xt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[4]||(i[4]=s=>Q())},[x(gt)])]),t("form",io,[t("div",no,[_o,I(t("input",{class:"",type:"text","onUpdate:modelValue":i[5]||(i[5]=s=>Gt(p)?p.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[qt,e(p)]])]),t("div",co,[ro,I(t("select",{class:"","onUpdate:modelValue":i[6]||(i[6]=s=>e(A).field=s)},fo,512),[[lt,e(A).field]])]),t("div",po,[vo,I(t("select",{class:"","onUpdate:modelValue":i[7]||(i[7]=s=>e(A).by=s)},wo,512),[[lt,e(A).by]])]),t("div",bo,[t("button",{class:"",type:"submit",name:"button",onClick:i[8]||(i[8]=st(s=>ct(),["prevent"]))},[x(yt,{class:"text-2xl"})])])]),t("div",ko,[e(c).length==0?(_(),r("div",xo," Maaf Tidak Ada Record ")):(_(),r("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:S,onScroll:_t},[t("table",go,[yo,t("tbody",null,[(_(!0),r(Zt,null,Qt(e(c),(s,K)=>(_(),r("tr",{key:K,onClick:So=>h.value=K,class:ot(e(h)==K?"active":"")},[t("td",null,[t("div",$o,[t("div",{class:ot(["text-white text-xs px-2 py-1 rounded-lg",W(s)?"bg-green-600":"bg-red-600"])},o(W(s)?"Done":"Not Done"),3)])]),t("td",null,[t("div",To,[s.val?(_(),N(tt,{key:1})):(_(),N(X,{key:0}))])]),t("td",null,[t("div",Ao,[s.val1?(_(),N(tt,{key:1})):(_(),N(X,{key:0}))])]),t("td",jo,o(s.id),1),t("td",null,o(s.tanggal?e(d)(s.tanggal).format("DD-MM-Y"):""),1),t("td",null,o(s.no_pol),1),t("td",null,o(s.xto),1),t("td",null,o(s.tipe),1),t("td",null,o(s.jenis),1),t("td",null,o(e($)(s.amount)),1),t("td",null,o(s.pv_no),1),t("td",null,o(e($)(s.pv_total)),1),t("td",null,o(s.ticket_a_no),1),t("td",null,o(e($)(s.ticket_a_bruto)),1),t("td",null,o(e($)(s.ticket_a_tara)),1),t("td",null,o(e($)(s.ticket_a_netto)),1),t("td",null,o(s.ticket_a_supir),1),t("td",null,o(s.ticket_a_no_pol),1),t("td",null,o(s.ticket_a_in_at?e(d)(s.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_a_out_at?e(d)(s.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_no),1),t("td",null,o(e($)(s.ticket_b_bruto)),1),t("td",null,o(e($)(s.ticket_b_tara)),1),t("td",null,o(e($)(s.ticket_b_netto)),1),t("td",null,o(s.ticket_b_supir),1),t("td",null,o(s.ticket_b_no_pol),1),t("td",null,o(s.ticket_b_in_at?e(d)(s.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_out_at?e(d)(s.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.supir),1),t("td",null,o(s.kernet),1),t("td",null,o(s.created_at?e(d)(s.created_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.updated_at?e(d)(s.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Do))),128))])])],544))])]),x(Dt,{type:"delete",show:e(B),data:e(G),fnClose:ft,fnConfirm:vt},null,8,["show","data"]),x($t,{show:e(P),fnClose:()=>{P.value=!1},fnLoadDBData:V,id:e(z),p_data:e(c),list_ujalan:e(T),list_ticket:e(m),list_pv:e(H)},null,8,["show","fnClose","id","p_data","list_ujalan","list_ticket","list_pv"]),x(Tt,{show:e(L),fnClose:()=>{L.value=!1},id:e(q),p_data:e(c)},null,8,["show","fnClose","id","p_data"]),e(U)?(_(),r("div",Mo,[t("div",Co,[t("div",Bo,[x(At,{style:{color:"black",cursor:"pointer"},onClick:i[9]||(i[9]=s=>Q())})]),t("iframe",{ref:"iframe",width:"100%",height:"100%",src:e(Z).dataBase64},null,8,Ho),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:i[10]||(i[10]=s=>wt())})])])):u("",!0)])}}};export{Qo as default};
