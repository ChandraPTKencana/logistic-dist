import it from"./Header.c4b92e80.js";import ct from"./Table2Column.58833b47.js";import dt from"./Calendar.39d81ce4.js";import _t from"./CarTag.33c64d28.js";import ut from"./TruckDriver.2c8efc8c.js";import xt from"./TruckDriverOutline.8deb34fd.js";import ft from"./LocationOn.96f75da6.js";import{_ as pt}from"./HeaderPopup.vue.8a8ddb9d.js";import ht from"./Image.7d382f23.js";import mt from"./GAPIN.8862b58a.js";import{g as gt,h as vt,r as p,j as bt,i as yt,f as wt,c as i,b as x,a as t,k as D,A as kt,l as e,m as Tt,F as I,D as L,K as $,t as o,n as u,d as N,q as Dt,x as g,y as Y,o as c,G as Yt}from"./entry.3185a129.js";import{u as jt}from"./useUtils.c8642c6d.js";import{u as j}from"./useMyFetch.6e8809ba.js";import{u as Mt}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.9d3c8665.js";const At={class:"w-full h-full flex flex-col relative"},Ct={class:"grow flex flex-col"},Ht={class:"w-full flex items-center p-1"},It={class:"grow"},Lt={class:"grow overflow-auto h-0"},$t={class:"p-1 grow"},Nt={class:"bg-white flex py-2 justify-between"},St={class:"flex flex-wrap"},Pt={class:"flex items-center justify-center m-2 text-xs"},Bt={class:"bg-blue-400 p-2 font-bold text-white"},Ft={class:"flex flex-col m-2"},Kt=t("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Rt={class:"flex items-center justify-center"},Vt={class:"flex flex-col m-2"},Ut=t("span",{class:"text-xs"}," Nomor Kendaraan ",-1),qt={class:"flex items-center justify-center"},zt=["data-real"],Et={class:"flex flex-col m-2"},Jt=t("span",{class:"text-xs"}," Nama Supir ",-1),Ot={class:"flex items-center justify-center"},Gt=["data-real"],Wt={key:0,class:"flex flex-col m-2"},Qt=t("span",{class:"text-xs"}," Nama Kernet ",-1),Xt={class:"flex items-center justify-center"},Zt=["data-real"],te={class:"flex flex-col m-2"},ee=t("span",{class:"text-xs"}," Tujuan ",-1),se={class:"flex items-center justify-center"},oe=["onClick"],le={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},ne={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},ae={class:"p-1 flex flex-wrap overflow-auto items-start"},re={class:"w-full flex flex-wrap"},ie={class:"w-full flex flex-wrap"},ce={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},de=t("span",{class:"text-xs font-bold"}," ID ",-1),_e={class:""},ue={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},xe=t("span",{class:"text-xs font-bold"}," Tgl Terima U.Jalan ",-1),fe={class:""},pe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},he=t("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),me={class:""},ge={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ve={class:"flex flex-col"},be=t("span",{class:"text-xs font-bold"}," Nama Supir ",-1),ye={class:""},we={class:"flex flex-col pl-2"},ke=t("span",{class:"text-xs font-bold"}," No rek ",-1),Te={class:""},De={key:0,class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ye={class:"flex flex-col"},je=t("span",{class:"text-xs font-bold"}," Nama Kernet ",-1),Me={class:""},Ae={class:"flex flex-col pl-2"},Ce=t("span",{class:"text-xs font-bold"}," No rek ",-1),He={class:""},Ie={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Le=t("span",{class:"text-xs font-bold"}," Tujuan ",-1),$e={class:""},Ne={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Se=t("span",{class:"text-xs font-bold"}," Info ",-1),Pe={class:""},Be={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Fe=t("span",{class:"text-xs font-bold"}," Tipe ",-1),Ke={class:""},Re={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ve=t("span",{class:"text-xs font-bold"}," Jenis ",-1),Ue={class:""},qe={key:1,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ze=t("span",{class:"text-xs font-bold"}," Pengalihan ",-1),Ee={class:""},Je={class:"w-full flex flex-wrap justify-center"},Oe={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ge=t("span",{class:"text-xs font-bold"}," App Kasir ",-1),We={class:"text-xs"},Qe={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Xe=t("span",{class:"text-xs font-bold"}," App Mandor ",-1),Ze={class:"text-xs"},ts={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},es=t("span",{class:"text-xs font-bold"}," App KTU/W ",-1),ss={class:"text-xs"},os={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ls=t("span",{class:"text-xs font-bold"}," App Marketing ",-1),ns={class:"text-xs"},as={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},rs=t("span",{class:"text-xs font-bold"}," App Logistik ",-1),is={class:"text-xs"},cs={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ds=t("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),_s={class:"text-xs"},us={class:"w-full sm:w-1/2 text-sm flex justify-center"},xs={class:"border border-collapse border-black"},fs=t("tr",null,[t("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),ps={class:"p-1"},hs={class:"p-1"},ms=t("td",{class:"p-1"},"= Rp.",-1),gs={class:"text-right p-1"},vs={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},bs=t("th",{colspan:"2",class:"text-right"},"Total",-1),ys=t("th",{class:"p-1 text-right"},"Rp.",-1),ws={class:"p-1 text-right"},ks={key:0,class:"text-red-500 font-bold"},Ts=t("td",{colspan:"2",class:"text-right"},"Potongan Supir",-1),Ds=t("td",{class:"p-1 text-right"},"Rp.",-1),Ys={class:"p-1 text-right"},js={key:1,class:"text-red-500 font-bold"},Ms=t("td",{colspan:"2",class:"text-right"},"Potongan Kernet",-1),As=t("td",{class:"p-1 text-right"},"Rp.",-1),Cs={class:"p-1 text-right"},Hs={key:2,class:"text-red-500 font-bold"},Is=t("td",{colspan:"2",class:"text-right"},"Total Potongan",-1),Ls=t("td",{class:"p-1 text-right"},"Rp.",-1),$s={class:"p-1 text-right"},Ns={key:3,class:"font-bold"},Ss=t("td",{colspan:"2",class:"text-right"},"Total Diterima",-1),Ps=t("td",{class:"p-1 text-right"},"Rp.",-1),Bs={class:"p-1 text-right"},Fs={class:"w-full sm:w-1/2 h-full"},Ks=["src"],Rs={key:1,class:"flex flex-col justify-center items-center px-2 py-8 border border-gray-700 bg-gray-300"},Vs={class:"w-full border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200 mt-2 flex flex-row flex-wrap"},Us={class:"flex flex-col mr-5"},qs=t("span",{class:"text-xs font-bold"}," EM#ID ",-1),zs={class:""},Es={class:"flex flex-col mr-5"},Js=t("span",{class:"text-xs font-bold"}," Nama Penerima ",-1),Os={class:""},Gs={class:"flex flex-col mr-5"},Ws=t("span",{class:"text-xs font-bold"}," No rek ",-1),Qs={class:""},Xs={class:"flex flex-col mr-5"},Zs=t("span",{class:"text-xs font-bold"}," Tanggal ",-1),to={class:""},eo={class:"flex flex-col mr-5"},so=t("span",{class:"text-xs font-bold"}," Tujuan ",-1),oo={class:""},lo={class:"flex flex-col mr-5"},no=t("span",{class:"text-xs font-bold"}," Desc ",-1),ao={class:""},ro={class:"flex flex-col mr-5"},io=t("span",{class:"text-xs font-bold"}," Total ",-1),co={class:""},_o={class:"flex p-1 justify-end flex-wrap"},uo={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},xo=t("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),Io={__name:"transfer",async setup(fo){let y,S;const{$moment:h}=Yt(),{pointFormat:f}=jt(),w=gt("token");new Date().getTimezoneOffset();const{data:J}=([y,S]=vt(async()=>Dt(async()=>{g().loading_full=!0;let n=[];const[l,d]=await Promise.all([j("/trx_trp/transfers",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},retry:0})]);return l.status.value==="error"?(Y().trigger(l.error),{trx_trps:n}):(g().loading_full=!1,n=l.data.value.data,{trx_trps:n})},"$pIgiM26TjW")),y=await y,S(),y),M=p(J.value.trx_trps||[]),A=p({}),s=p({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),C=p(-1),m=p(""),O=async n=>{g().loading_full=!0;const{data:l,error:d,status:r}=await j("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(g().loading_full=!1,r.value==="error"){Y().trigger(d,A);return}s.value=l.value.data},G=async()=>{g().loading_full=!0,A.value={};const n=new FormData;n.append("id",s.value.id),n.append("_method","PUT");let l="post";const{data:d,error:r,status:_}=await j("/trx_trp/transfer",{method:l,headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},body:n,retry:0});if(g().loading_full=!1,_.value==="error"){Y().trigger(r,A);return}M.value.splice(C.value,1),C.value=-1,b.value=!1,v.value=!1},v=p(!1),W=p(0),b=p(!1);bt();const Q=(n,l)=>{C.value=n,W.value=l,v.value=!0,O(l)},P=yt(()=>m.value!=""?M.value.filter(n=>n.no_pol.toLowerCase().includes(m.value.toLowerCase())||n.supir.toLowerCase().includes(m.value.toLowerCase())||n.kernet.toLowerCase().includes(m.value.toLowerCase())):M.value),k=n=>n.potongan&&n.potongan.length>0?n.potongan.map(l=>parseInt(l.nominal_cut)).reduce((l,d)=>(l+=d,l)):0,B=n=>{if(n.potongan&&n.potongan.length>0){let l=n.potongan.filter(r=>r.potongan_mst.employee_id==n.supir_id);if(l.length==0)return 0;let d=l.map(r=>parseInt(r.nominal_cut));return d.length==0?0:d.reduce((r,_)=>(r+=_,r))}return 0},F=n=>{if(n.potongan&&n.potongan.length>0){let l=n.potongan.filter(r=>r.potongan_mst.employee_id==n.kernet_id);if(l.length==0)return 0;let d=l.map(r=>parseInt(r.nominal_cut));return d.length==0?0:d.reduce((r,_)=>(r+=_,r))}return 0},X=()=>{let n=m.value;document.querySelectorAll(".to_hl").forEach(l=>{let d=l.dataset.real;var r=l.innerHTML,_=d.toLowerCase().indexOf(n.toLowerCase());_>-1&&n!=""?(r=d.substring(0,_)+"<span class='highlight'>"+d.substring(_,_+n.length)+"</span>"+d.substring(_+n.length),l.innerHTML=r):l.innerHTML=r=d})};wt(()=>P,(n,l)=>{setTimeout(()=>{X()},0)},{deep:!0,immediate:!0});const{downloadFile:Z,viewFile:po}=Mt(),tt=async()=>{g().loading_full=!0;const{data:n,error:l,status:d}=await j("/trx_trp/manual_tf",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{},retry:0});if(g().loading_full=!1,d.value==="error"){Y().trigger(l);return}Z(n.value)},K=p(0);return(n,l)=>{var R,V;const d=it,r=ct,_=dt,et=_t,st=ut,ot=xt,lt=ft,nt=pt,at=ht,rt=mt;return c(),i("div",At,[x(d,{title:"List Transaction"}),t("section",Ct,[t("div",Ht,[t("div",It,[D(t("input",{class:"flex-grow",type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>Tt(m)?m.value=a:null),name:"search",placeholder:"Keyword"},null,512),[[kt,e(m)]])]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[1]||(l[1]=a=>tt())},[x(r)])]),t("div",Lt,[(c(!0),i(I,null,L(e(P),(a,T)=>(c(),i("div",$t,[t("div",Nt,[t("div",St,[t("div",Pt,[t("div",Bt,o(a.id),1)]),t("div",Ft,[Kt,t("div",Rt,[x(_,{class:"mr-1"}),N(" "+o(e(h)(a.tanggal).format("DD-MM-YYYY")),1)])]),t("div",Vt,[Ut,t("div",qt,[x(et,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.no_pol},o(a.no_pol),9,zt)])]),t("div",Et,[Jt,t("div",Ot,[x(st,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.supir},o(a.supir),9,Gt)])]),a.kernet?(c(),i("div",Wt,[Qt,t("div",Xt,[x(ot,{class:"mr-1"}),t("span",{class:"to_hl","data-real":a.kernet},o(a.kernet),9,Zt)])])):u("",!0),t("div",te,[ee,t("div",se,[x(lt,{class:"mr-1"}),N(" "+o(a.xto),1)])])]),t("button",{class:"bg-blue-500 text-white rounded",onClick:H=>Q(T,a)}," Detail ",8,oe)])]))),256))])]),D(t("div",le,[t("div",ne,[x(nt,{title:"Detail Information",fn:()=>{v.value=!1,b.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("div",ae,[t("div",re,[t("div",ie,[t("div",ce,[de,t("div",_e,o(e(s).id),1)]),t("div",ue,[xe,t("div",fe,o(e(h)(e(s).tanggal).format("DD-MM-YYYY")),1)]),t("div",pe,[he,t("div",me,o(e(s).no_pol),1)]),t("div",ge,[t("div",ve,[be,t("div",ye,o(e(s).supir),1)]),t("div",we,[ke,t("div",Te,o(e(s).supir_rek_no),1)])]),e(s).kernet?(c(),i("div",De,[t("div",Ye,[je,t("div",Me,o(e(s).kernet),1)]),t("div",Ae,[Ce,t("div",He,o(e(s).kernet_rek_no),1)])])):u("",!0),t("div",Ie,[Le,t("div",$e,o(e(s).xto),1)]),t("div",Ne,[Se,t("div",Pe,o((R=e(s).uj)==null?void 0:R.asst_opt),1)]),t("div",Be,[Fe,t("div",Ke,o(e(s).tipe),1)]),t("div",Re,[Ve,t("div",Ue,o(e(s).jenis),1)]),e(s).transition_type=="From"?(c(),i("div",qe,[ze,t("div",Ee,o(e(s).transition_target),1)])):u("",!0)]),t("div",Je,[e(s).val?(c(),i("div",Oe,[Ge,t("div",null," ( "+o(e(s).val_by.username)+" ) ",1),t("div",We,o(e(h)(e(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val1?(c(),i("div",Qe,[Xe,t("div",null," ( "+o(e(s).val1_by.username)+" ) ",1),t("div",Ze,o(e(h)(e(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val2?(c(),i("div",ts,[es,t("div",null," ( "+o(e(s).val2_by.username)+" ) ",1),t("div",ss,o(e(h)(e(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val3?(c(),i("div",os,[ls,t("div",null," ( "+o(e(s).val3_by.username)+" ) ",1),t("div",ns,o(e(h)(e(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val4?(c(),i("div",as,[rs,t("div",null," ( "+o(e(s).val4_by.username)+" ) ",1),t("div",is,o(e(h)(e(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0),e(s).val5?(c(),i("div",cs,[ds,t("div",null," ( "+o(e(s).val5_by.username)+" ) ",1),t("div",_s,o(e(h)(e(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):u("",!0)])]),t("div",us,[t("table",xs,[fs,(c(!0),i(I,null,L(e(s).details_uj,a=>(c(),i("tr",null,[t("td",ps,o(a.ordinal)+". ",1),t("td",hs,o(a.xdesc)+" "+o(a.qty<=1?"":e(f)(a.qty||0)+" x Rp."+e(f)(a.harga||0)),1),ms,t("td",gs,o(e(f)(a.qty*a.harga)),1)]))),256)),t("tr",vs,[bs,ys,t("th",ws,o(e(f)(e(s).amount)),1)]),B(e(s))>0?(c(),i("tr",ks,[Ts,Ds,t("td",Ys,o(e(f)(B(e(s)))),1)])):u("",!0),F(e(s))>0?(c(),i("tr",js,[Ms,As,t("td",Cs,o(e(f)(F(e(s)))),1)])):u("",!0),k(e(s))>0?(c(),i("tr",Hs,[Is,Ls,t("td",$s,o(e(f)(k(e(s)))),1)])):u("",!0),k(e(s))>0?(c(),i("tr",Ns,[Ss,Ps,t("td",Bs,o(e(f)(e(s).amount-k(e(s)))),1)])):u("",!0)])]),t("div",Fs,[((V=e(s).trx_absens)==null?void 0:V.length)>0?(c(),i("img",{key:0,class:"w-full",src:e(s).trx_absens[0].gambar},null,8,Ks)):(c(),i("div",Rs,[x(at),N(" Tidak Ada Foto Berangkat ")]))]),(c(!0),i(I,null,L(e(s).extra_money_trxs,a=>{var T,H,U,q,z,E;return c(),i("div",Vs,[t("div",Us,[qs,t("div",zs,o(a.id),1)]),t("div",Es,[Js,t("div",Os,o((T=a.employee)==null?void 0:T.name),1)]),t("div",Gs,[Ws,t("div",Qs,o((H=a.employee)==null?void 0:H.rek_no),1)]),t("div",Xs,[Zs,t("div",to,o(a.tanggal),1)]),t("div",eo,[so,t("div",oo,o((U=a.extra_money)==null?void 0:U.xto),1)]),t("div",lo,[no,t("div",ao,o((q=a.extra_money)==null?void 0:q.description),1)]),t("div",ro,[io,t("div",co,o(e(f)(((z=a.extra_money)==null?void 0:z.nominal)*((E=a.extra_money)==null?void 0:E.qty))),1)])])}),256))]),D(t("div",_o,[t("button",{class:"rounded m-1",onClick:l[2]||(l[2]=a=>v.value=!1)}," Cancel "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:l[3]||(l[3]=a=>b.value=!0)}," Transfer ")],512),[[$,!e(b)]]),D(t("div",uo,[xo,t("button",{class:"rounded m-1 bg-white",onClick:l[4]||(l[4]=a=>(b.value=!1,v.value=!1))}," Tidak "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:l[5]||(l[5]=a=>G())}," Ya ")],512),[[$,e(b)]])])],512),[[$,e(v)]]),x(rt,{show:e(K),onSetTimeout:l[6]||(l[6]=a=>K.value=a)},null,8,["show"])])}}};export{Io as default};
