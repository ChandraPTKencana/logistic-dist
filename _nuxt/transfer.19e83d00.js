import R from"./Header.3ab42273.js";import G from"./Calendar.e9ed7071.js";import W from"./CarTag.e2bbdee2.js";import Q from"./TruckDriver.c576cb6e.js";import X from"./TruckDriverOutline.2d5250fc.js";import Z from"./LocationOn.18670600.js";import{_ as ee}from"./HeaderPopup.vue.e89b6351.js";import te from"./GAPIN.4754f2a3.js";import{f as se,g as oe,r as _,i as ae,G as le,j as ne,c as f,b as u,a as e,m as w,v as re,k as a,n as ie,F as M,y as S,J as C,t as l,l as I,z as ce,A as x,B as D,o as p,d as Y,E as _e}from"./entry.b8f45e1d.js";import{u as de}from"./useUtils.02680300.js";import{u as j}from"./useMyFetch.882d4718.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.eee7fe9a.js";const ue={class:"w-full h-full flex flex-col relative"},fe={class:"grow flex flex-col"},pe={class:"w-full flex items-center p-1"},me={class:"grow"},he={class:"grow overflow-auto h-0"},xe={class:"p-1 grow"},ve={class:"bg-white flex py-2 justify-between"},ge={class:"flex flex-wrap"},we={class:"flex items-center justify-center m-2 text-xs"},ye={class:"bg-blue-400 p-2 font-bold text-white"},be={class:"flex flex-col m-2"},ke=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Te={class:"flex items-center justify-center"},Ce={class:"flex flex-col m-2"},De=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),je={class:"flex items-center justify-center"},Le=["data-real"],Ae={class:"flex flex-col m-2"},$e=e("span",{class:"text-xs"}," Nama Supir ",-1),Ne={class:"flex items-center justify-center"},Me=["data-real"],Se={key:0,class:"flex flex-col m-2"},Ie=e("span",{class:"text-xs"}," Nama Kernet ",-1),Ye={class:"flex items-center justify-center"},Be=["data-real"],Ve={class:"flex flex-col m-2"},ze=e("span",{class:"text-xs"}," Tujuan ",-1),He={class:"flex items-center justify-center"},Ue=["onClick"],Fe={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Je={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},Ke={class:"p-1 flex flex-wrap overflow-auto items-start"},qe={class:"w-full sm:w-1/2 flex flex-wrap"},Ee={class:"flex flex-col m-2"},Oe=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Pe={class:""},Re={class:"flex flex-col m-2"},Ge=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),We={class:""},Qe={class:"flex flex-col m-2"},Xe=e("span",{class:"text-xs"}," Nama Supir ",-1),Ze={class:""},et={key:0,class:"flex flex-col m-2"},tt=e("span",{class:"text-xs"}," Nama Kernet ",-1),st={class:""},ot={class:"flex flex-col m-2"},at=e("span",{class:"text-xs"}," Tujuan ",-1),lt={class:""},nt={class:"flex flex-col m-2"},rt=e("span",{class:"text-xs"}," Tipe ",-1),it={class:""},ct={class:"flex flex-col m-2"},_t=e("span",{class:"text-xs"}," Jenis ",-1),dt={class:""},ut={class:"w-full sm:w-1/2 text-sm flex justify-center"},ft={class:"border border-collapse border-black"},pt=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),mt={class:"p-1"},ht={class:"p-1"},xt=e("td",{class:"p-1"},"= Rp.",-1),vt={class:"text-right p-1"},gt={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},wt=e("th",{colspan:"2",class:"text-right"},"Total",-1),yt=e("th",{class:"p-1 text-right"},"Rp.",-1),bt={class:"p-1 text-right"},kt={class:"flex p-1 justify-end flex-wrap"},Tt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},Ct=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),Ft={__name:"transfer",async setup(Dt){let v,L;const{$moment:A}=_e(),{pointFormat:g}=de(),y=se("token");new Date().getTimezoneOffset();const{data:B}=([v,L]=oe(async()=>ce(async()=>{x().loading_full=!0;let o=[];const[t,r]=await Promise.all([j("/trx_trp/transfers",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},retry:0})]);return t.status.value==="error"?(D().trigger(t.error),{trx_trps:o}):(x().loading_full=!1,o=t.data.value.data,{trx_trps:o})},"$pIgiM26TjW")),v=await v,L(),v),b=_(B.value.trx_trps||[]),k=_({}),n=_({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),T=_(-1),d=_(""),V=async o=>{x().loading_full=!0;const{data:t,error:r,status:i}=await j("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(x().loading_full=!1,i.value==="error"){D().trigger(r,k);return}n.value=t.value.data},z=async()=>{x().loading_full=!0,k.value={};const o=new FormData;o.append("id",n.value.id),o.append("_method","PUT");let t="post";const{data:r,error:i,status:c}=await j("/trx_trp/transfer",{method:t,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:o,retry:0});if(x().loading_full=!1,c.value==="error"){D().trigger(i,k);return}b.value.splice(T.value,1),T.value=-1,h.value=!1,m.value=!1},m=_(!1),H=_(0),h=_(!1);ae();const U=(o,t)=>{T.value=o,H.value=t,m.value=!0,V(t)},$=le(()=>d.value!=""?b.value.filter(o=>o.no_pol.toLowerCase().includes(d.value.toLowerCase())||o.supir.toLowerCase().includes(d.value.toLowerCase())||o.kernet.toLowerCase().includes(d.value.toLowerCase())):b.value),F=()=>{let o=d.value;document.querySelectorAll(".to_hl").forEach(t=>{let r=t.dataset.real;var i=t.innerHTML,c=r.toLowerCase().indexOf(o.toLowerCase());c>-1&&o!=""?(i=r.substring(0,c)+"<span class='highlight'>"+r.substring(c,c+o.length)+"</span>"+r.substring(c+o.length),t.innerHTML=i):t.innerHTML=i=r})};ne(()=>$,(o,t)=>{setTimeout(()=>{F()},0)},{deep:!0,immediate:!0});const N=_(0);return(o,t)=>{const r=R,i=G,c=W,J=Q,K=X,q=Z,E=ee,O=te;return p(),f("div",ue,[u(r,{title:"List Transaction"}),e("section",fe,[e("div",pe,[e("div",me,[w(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>ie(d)?d.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[re,a(d)]])])]),e("div",he,[(p(!0),f(M,null,S(a($),(s,P)=>(p(),f("div",xe,[e("div",ve,[e("div",ge,[e("div",we,[e("div",ye,l(s.id),1)]),e("div",be,[ke,e("div",Te,[u(i,{class:"mr-1"}),Y(" "+l(a(A)(s.tanggal).format("DD-MM-YYYY")),1)])]),e("div",Ce,[De,e("div",je,[u(c,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.no_pol},l(s.no_pol),9,Le)])]),e("div",Ae,[$e,e("div",Ne,[u(J,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.supir},l(s.supir),9,Me)])]),s.kernet?(p(),f("div",Se,[Ie,e("div",Ye,[u(K,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.kernet},l(s.kernet),9,Be)])])):I("",!0),e("div",Ve,[ze,e("div",He,[u(q,{class:"mr-1"}),Y(" "+l(s.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:jt=>U(P,s)}," Detail ",8,Ue)])]))),256))])]),w(e("div",Fe,[e("div",Je,[u(E,{title:"Detail Information",fn:()=>{m.value=!1,h.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ke,[e("div",qe,[e("div",Ee,[Oe,e("div",Pe,l(a(A)(a(n).tanggal).format("DD-MM-YYYY")),1)]),e("div",Re,[Ge,e("div",We,l(a(n).no_pol),1)]),e("div",Qe,[Xe,e("div",Ze,l(a(n).supir),1)]),a(n).kernet?(p(),f("div",et,[tt,e("div",st,l(a(n).kernet),1)])):I("",!0),e("div",ot,[at,e("div",lt,l(a(n).xto),1)]),e("div",nt,[rt,e("div",it,l(a(n).tipe),1)]),e("div",ct,[_t,e("div",dt,l(a(n).jenis),1)])]),e("div",ut,[e("table",ft,[pt,(p(!0),f(M,null,S(a(n).details_uj,s=>(p(),f("tr",null,[e("td",mt,l(s.ordinal)+". ",1),e("td",ht,l(s.xdesc)+" "+l(s.qty<=1?"":a(g)(s.qty||0)+" x Rp."+a(g)(s.harga||0)),1),xt,e("td",vt,l(a(g)(s.qty*s.harga)),1)]))),256)),e("tr",gt,[wt,yt,e("th",bt,l(a(g)(a(n).amount)),1)])])])]),w(e("div",kt,[e("button",{class:"rounded m-1",onClick:t[1]||(t[1]=s=>m.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:t[2]||(t[2]=s=>h.value=!0)}," Transfer ")],512),[[C,!a(h)]]),w(e("div",Tt,[Ct,e("button",{class:"rounded m-1 bg-white",onClick:t[3]||(t[3]=s=>(h.value=!1,m.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:t[4]||(t[4]=s=>z())}," Ya ")],512),[[C,a(h)]])])],512),[[C,a(m)]]),u(O,{show:a(N),onSetTimeout:t[5]||(t[5]=s=>N.value=s)},null,8,["show"])])}}};export{Ft as default};
