import{_ as We}from"./Header.7ed22eaf.js";import{_ as et}from"./Edit.158d6997.js";import{_ as tt}from"./Eyes.5c544566.js";import{_ as ot}from"./Void.8ccd3dbb.js";import{_ as lt}from"./Signature.d00cb71d.js";import{_ as at}from"./Cog.ad522703.js";import{_ as st,a as it}from"./trx_absen.3d09649d.js";import{_ as _t}from"./Line.e68bf50f.js";import{_ as rt}from"./Check.f37651e7.js";import{_ as nt}from"./TableView.fbee0208.js";import{_ as dt}from"./PopupMini.vue.949c687b.js";import{_ as ge}from"./HeaderPopup.vue.7aef427f.js";import{_ as $e}from"./client-only.b93dd523.js";import{_ as ct}from"./InputPointFormat.vue.341dc17f.js";import{r as h,f as te,J as z,g as Z,L as De,h as J,v as Te,o as r,c as n,a as t,b as g,t as a,k as e,G as f,l as Me,j as ke,F as xe,n as he,w as K,m as Se,s as de,x as S,y as F,p as je,e as Pe,M as Ae,P as ut,D as ft,B as pt,H as ye,I as vt,i as bt,d as X,q as mt,E as wt,K as R}from"./entry.305f92b2.js";import{u as Ce}from"./useUtils.39deb1be.js";import{u as V}from"./useMyFetch.0ca0d699.js";import{_ as Be}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as kt}from"./Times.9fb78a7f.js";import"./Search.6251252c.js";const m=T=>(je("data-v-7c41c6df"),T=T(),Pe(),T),xt={class:"box-fixed"},ht={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},yt={class:"w-full flex flex-col items-center grow overflow-auto"},gt={class:"w-full flex flex-row flex-wrap"},$t={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dt=m(()=>t("label",{for:""},"U.Jalan Per",-1)),Tt={class:"card-border"},Mt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},St=m(()=>t("label",{for:""},"Jenis",-1)),jt={class:"card-border"},Pt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},At=m(()=>t("label",{for:""},"Supir",-1)),Ct={class:"card-border"},Bt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nt=m(()=>t("label",{for:""},"Kernet",-1)),Ot={class:"card-border"},Ht={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yt=m(()=>t("label",{for:""},"No Pol",-1)),Kt={class:"card-border"},qt={key:0,class:"w-full flex flex-wrap"},It={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ft=m(()=>t("label",{for:""},"Tujuan",-1)),Vt={class:"card-border"},Ut={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Lt=m(()=>t("label",{for:""},"Tipe",-1)),Rt={class:"card-border"},zt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Jt=m(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Et={class:"card-border"},Gt=m(()=>t("label",{for:""},"Peralihan",-1)),Xt=Ae('<option value="" data-v-7c41c6df></option><option value="KPN" data-v-7c41c6df>KPN</option><option value="KAS" data-v-7c41c6df>KAS</option><option value="KUS" data-v-7c41c6df>KUS</option><option value="ARP" data-v-7c41c6df>ARP</option><option value="KAP" data-v-7c41c6df>KAP</option><option value="SMP" data-v-7c41c6df>SMP</option>',7),Zt=[Xt],Qt={class:"text-red-500"},Wt={key:2,class:"w-full flex flex-col flex-wrap p-1"},eo=m(()=>t("label",{for:""},"Tiket A",-1)),to={id:"ticket_a"},oo=["value"],lo={class:"text-red-500"},ao={key:3,class:"w-full flex flex-wrap"},so={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},io=m(()=>t("label",{for:""},"In At",-1)),_o={class:"card-border disabled"},ro={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},no=m(()=>t("label",{for:""},"Out At",-1)),co={class:"card-border disabled"},uo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fo=m(()=>t("label",{for:""},"Bruto",-1)),po={class:"card-border disabled"},vo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},bo=m(()=>t("label",{for:""},"Tara",-1)),mo={class:"card-border disabled"},wo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ko=m(()=>t("label",{for:""},"Netto",-1)),xo={class:"card-border disabled"},ho={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},yo=m(()=>t("label",{for:""},"No Pol",-1)),go={class:"card-border disabled"},$o={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Do=m(()=>t("label",{for:""},"Supir",-1)),To={class:"card-border disabled"},Mo={key:4,class:"w-full flex flex-col flex-wrap p-1"},So=m(()=>t("label",{for:""},"Tiket B",-1)),jo={id:"ticket_b"},Po=["value"],Ao={class:"text-red-500"},Co={key:5,class:"w-full flex flex-wrap"},Bo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},No=m(()=>t("label",{for:""},"In At",-1)),Oo={class:"card-border disabled"},Ho={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yo=m(()=>t("label",{for:""},"Out At",-1)),Ko={class:"card-border disabled"},qo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Io=m(()=>t("label",{for:""},"Bruto ",-1)),Fo={class:"card-border disabled"},Vo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Uo=m(()=>t("label",{for:""},"Tara ",-1)),Lo={class:"card-border disabled"},Ro={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},zo=m(()=>t("label",{for:""},"Netto ",-1)),Jo={class:"card-border disabled"},Eo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Go=m(()=>t("label",{for:""},"No Pol",-1)),Xo={class:"card-border disabled"},Zo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Qo=m(()=>t("label",{for:""},"Supir",-1)),Wo={class:"card-border disabled"},el={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},tl=m(()=>t("label",{for:""},"In At",-1)),ol={class:"text-red-500"},ll={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},al=m(()=>t("label",{for:""},"Out At",-1)),sl={class:"text-red-500"},il={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_l=m(()=>t("label",{for:""},"Bruto",-1)),rl={class:"text-red-500"},nl={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},dl=m(()=>t("label",{for:""},"Tara",-1)),cl={class:"text-red-500"},ul={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fl=m(()=>t("label",{for:""},"Netto",-1)),pl={class:"card-border disabled"},vl={class:"w-full flex items-center justify-end"},bl={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(T){const w=T,{$moment:D}=de(),{pointFormat:y}=Ce(),U={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",transition_to:""};let l={...U};const o=h({...U}),$=te("token"),P=h({}),q=i=>{o.value.jenis=="TBS"&&w.fnLoadDBData(o.value.jenis,i.target.value)},C=async()=>{S().loading_full=!0,P.value={};const i=new FormData;if(i.append("tanggal",D(o.value.tanggal).format("Y-MM-DD")),i.append("jenis",o.value.jenis),i.append("id_uj",o.value.id_uj),i.append("xto",o.value.xto),i.append("online_status",w.online_status),i.append("transition_to",o.value.transition_to),o.value.ticket_a_no){let d=j.value.filter(I=>I.TicketNo==o.value.ticket_a_no);d.length==0&&o.value.ticket_a_no==l.ticket_a_no?i.append("ticket_a_id",l.ticket_a_id):i.append("ticket_a_id",d[0].TicketID)}if(o.value.ticket_b_no){let d=O.value.filter(I=>I.TicketNo==o.value.ticket_b_no);d.length==0&&o.value.ticket_b_no==l.ticket_b_no?i.append("ticket_b_id",l.ticket_b_id):i.append("ticket_b_id",d[0].TicketID)}i.append("ticket_a_no",o.value.ticket_a_no),i.append("ticket_b_no",o.value.ticket_b_no),i.append("ticket_b_bruto",o.value.ticket_b_bruto),i.append("ticket_b_tara",o.value.ticket_b_tara),o.value.ticket_b_in_at&&i.append("ticket_b_in_at",D(o.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),o.value.ticket_b_out_at&&i.append("ticket_b_out_at",D(o.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),i.append("supir",o.value.supir),i.append("kernet",o.value.kernet),i.append("no_pol",o.value.no_pol);let u="post",b=w.id;b==0||(i.append("id",b),i.append("_method","PUT"));const{data:c,error:N,status:B}=await V("/trx_trp_ticket",{method:u,headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},body:i,retry:0});if(S().loading_full=!1,B.value==="error"){F().trigger(N,P);return}if(o.value.ticket_a_netto=parseFloat(o.value.ticket_a_bruto)-parseFloat(o.value.ticket_a_tara),o.value.ticket_b_netto=parseFloat(o.value.ticket_b_bruto)-parseFloat(o.value.ticket_b_tara),o.value.updated_at=c.value.updated_at,w.id<=0)o.value.id=c.value.id,o.value.created_at=c.value.created_at,w.p_data.unshift(o.value);else{let d=w.p_data.map(I=>I.id).indexOf(w.id);d>=-1&&w.p_data.splice(d,1,{...o.value})}w.fnClose()},j=z(()=>{let i=[];return o.value.jenis=="CPO"?i=["cpo"]:o.value.jenis=="PK"?i=["kernel"]:i=["mtbs"],w.list_ticket.filter(u=>i.indexOf(u.ProductName.toLowerCase())>-1)}),O=z(()=>{let i=[];return o.value.transition_to!=""?i=["tbs","rtbs"]:o.value.jenis=="TBSK"?i=["tbs"]:o.value.jenis=="TBS"&&(i=["rtbs"]),w.list_ticket.filter(u=>i.indexOf(u.ProductName.toLowerCase())>-1)}),M=z(()=>!1),x=async()=>{S().loading_full=!0;const{data:i,error:u,status:b}=await V("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(S().loading_full=!1,b.value==="error"){F().trigger(u);return}o.value=i.value.data,l={...i.value.data},w.fnLoadDBData(o.value.jenis,o.value.transition_to)};Z(()=>w.show,(i,u)=>{i==!0&&(o.value={...U},P.value={},w.id!=0&&x())},{immediate:!0});let k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return Z(()=>o.value.ticket_a_no,(i,u)=>{if(i==""||i){if(i){let b=j.value.filter(c=>c.TicketNo==o.value.ticket_a_no);b.length>0?k={id:b[0].TicketID,bruto:b[0].Bruto,tara:b[0].Tara,netto:b[0].Netto,supir:b[0].NamaSupir,no_pol:b[0].VehicleNo,in_at:b[0].DateTimeIn,out_at:b[0].DateTimeOut}:o.value.ticket_a_no==l.ticket_a_no&&(k={id:l.ticket_a_id,bruto:l.ticket_a_bruto,tara:l.ticket_a_tara,netto:l.ticket_a_netto,supir:l.ticket_a_supir,no_pol:l.ticket_a_no_pol,in_at:l.ticket_a_in_at,out_at:l.ticket_a_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_a_id=k.id,o.value.ticket_a_bruto=k.bruto,o.value.ticket_a_tara=k.tara,o.value.ticket_a_netto=k.netto,o.value.ticket_a_in_at=k.in_at,o.value.ticket_a_out_at=k.out_at,o.value.ticket_a_supir=k.supir,o.value.ticket_a_no_pol=k.no_pol}},{deep:!0,immediate:!0}),Z(()=>o.value.ticket_b_no,(i,u)=>{if(["TBS","TBSK"].indexOf(o.value.jenis)>-1&&(i==""||i)){if(i){let b=O.value.filter(c=>c.TicketNo==o.value.ticket_b_no);b.length>0?k={id:b[0].TicketID,bruto:b[0].Bruto,tara:b[0].Tara,netto:b[0].Netto,supir:b[0].NamaSupir,no_pol:b[0].VehicleNo,in_at:b[0].DateTimeIn,out_at:b[0].DateTimeOut}:o.value.ticket_b_no==l.ticket_b_no&&(k={id:l.ticket_b_id,bruto:l.ticket_b_bruto,tara:l.ticket_b_tara,netto:l.ticket_b_netto,supir:l.ticket_b_supir,no_pol:l.ticket_b_no_pol,in_at:l.ticket_b_in_at,out_at:l.ticket_b_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_b_id=k.id,o.value.ticket_b_bruto=k.bruto,o.value.ticket_b_tara=k.tara,o.value.ticket_b_netto=k.netto,o.value.ticket_b_in_at=k.in_at,o.value.ticket_b_out_at=k.out_at,o.value.ticket_b_supir=k.supir,o.value.ticket_b_no_pol=k.no_pol}},{deep:!0,immediate:!0}),(i,u)=>{const b=ge,c=De("vue-date-picker"),N=$e,B=ct;return J((r(),n("section",xt,[t("div",null,[g(b,{title:"Form Transaction",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ht,[t("div",yt,[t("div",gt,[t("div",$t,[Dt,t("div",Tt,a(e(o).tanggal?e(D)(e(o).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Mt,[St,t("div",jt,a(e(o).jenis),1)]),t("div",Pt,[At,t("div",Ct,a(e(o).supir),1)]),t("div",Bt,[Nt,t("div",Ot,a(e(o).kernet),1)]),t("div",Ht,[Yt,t("div",Kt,a(e(o).no_pol),1)]),e(o).jenis!=""?(r(),n("div",qt,[t("div",It,[Ft,t("div",Vt,a(e(o).xto),1)]),t("div",Ut,[Lt,t("div",Rt,a(e(o).tipe),1)]),t("div",zt,[Jt,t("div",Et,a(e(y)(e(o).amount||0)),1)])])):f("",!0),e(o).jenis=="TBS"?(r(),n("div",{key:1,class:"w-full p-1",onChange:u[1]||(u[1]=d=>q(d))},[Gt,J(t("select",{"onUpdate:modelValue":u[0]||(u[0]=d=>e(o).transition_to=d)},Zt,512),[[Me,e(o).transition_to]]),t("p",Qt,a(e(P).transition_to),1)],32)):f("",!0),e(o).jenis!=""&&e(o).jenis!="TBSK"?(r(),n("div",Wt,[eo,J(t("input",{type:"text",list:"ticket_a","onUpdate:modelValue":u[2]||(u[2]=d=>e(o).ticket_a_no=d)},null,512),[[ke,e(o).ticket_a_no]]),t("datalist",to,[(r(!0),n(xe,null,he(e(j),d=>(r(),n("option",{value:d.TicketNo},a(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,oo))),256))]),t("p",lo,a(e(P).ticket),1)])):f("",!0),e(o).jenis!=""&&e(o).jenis!="TBSK"?(r(),n("div",ao,[t("div",so,[io,t("div",_o,a(e(o).ticket_a_in_at?e(D)(e(o).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",ro,[no,t("div",co,a(e(o).ticket_a_out_at?e(D)(e(o).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",uo,[fo,t("div",po,a(e(o).ticket_a_bruto?e(y)(e(o).ticket_a_bruto):0),1)]),t("div",vo,[bo,t("div",mo,a(e(o).ticket_a_tara?e(y)(e(o).ticket_a_tara):0),1)]),t("div",wo,[ko,t("div",xo,a(e(o).ticket_a_bruto?e(y)(e(o).ticket_a_bruto-e(o).ticket_a_tara):0),1)]),t("div",ho,[yo,t("div",go,a(e(o).ticket_a_no_pol),1)]),t("div",$o,[Do,t("div",To,a(e(o).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(e(o).jenis)>-1?(r(),n("div",Mo,[So,J(t("input",{type:"text",list:"ticket_b","onUpdate:modelValue":u[3]||(u[3]=d=>e(o).ticket_b_no=d)},null,512),[[ke,e(o).ticket_b_no]]),t("datalist",jo,[(r(!0),n(xe,null,he(e(O),d=>(r(),n("option",{value:d.TicketNo},a(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,Po))),256))]),t("p",Ao,a(e(P).ticket),1)])):f("",!0),["TBS","TBSK"].indexOf(e(o).jenis)>-1?(r(),n("div",Co,[t("div",Bo,[No,t("div",Oo,a(e(o).ticket_b_in_at?e(D)(e(o).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ho,[Yo,t("div",Ko,a(e(o).ticket_b_out_at?e(D)(e(o).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",qo,[Io,t("div",Fo,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto):0),1)]),t("div",Vo,[Uo,t("div",Lo,a(e(o).ticket_b_tara?e(y)(e(o).ticket_b_tara):0),1)]),t("div",Ro,[zo,t("div",Jo,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto-e(o).ticket_b_tara):0),1)]),t("div",Eo,[Go,t("div",Xo,a(e(o).ticket_b_no_pol),1)]),t("div",Zo,[Qo,t("div",Wo,a(e(o).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",el,[tl,g(N,null,{default:K(()=>[g(c,{modelValue:e(o).ticket_b_in_at,"onUpdate:modelValue":u[4]||(u[4]=d=>e(o).ticket_b_in_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",ol,a(e(P).ticket_b_in_at),1)])):f("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",ll,[al,g(N,null,{default:K(()=>[g(c,{modelValue:e(o).ticket_b_out_at,"onUpdate:modelValue":u[5]||(u[5]=d=>e(o).ticket_b_out_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",sl,a(e(P).ticket_b_out_at),1)])):f("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",il,[_l,t("div",null,[g(B,{class:"card-border p-1",type:"text",value:e(o).ticket_b_bruto||0,onInput:u[6]||(u[6]=d=>e(o).ticket_b_bruto=d),show:T.show},null,8,["value","show"])]),t("p",rl,a(e(P).ticket_b_bruto),1)])):f("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",nl,[dl,t("div",null,[g(B,{class:"card-border p-1",type:"text",value:e(o).ticket_b_tara||0,onInput:u[7]||(u[7]=d=>e(o).ticket_b_tara=d),show:T.show},null,8,["value","show"])]),t("p",cl,a(e(P).ticket_b_tara),1)])):f("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",ul,[fl,t("div",pl,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto-e(o).ticket_b_tara):0),1)])):f("",!0)])]),t("div",vl,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:u[8]||(u[8]=d=>T.fnClose())}," Cancel "),e(M)?f("",!0):(r(),n("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:u[9]||(u[9]=Se(d=>C(),["prevent"]))}," Save "))])])])],512)),[[Te,T.show]])}}},ml=Be(bl,[["__scopeId","data-v-7c41c6df"]]);const v=T=>(je("data-v-153698a5"),T=T(),Pe(),T),wl={class:"box-fixed"},kl={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},xl={class:"w-full flex flex-col items-center grow overflow-auto"},hl={class:"w-full flex flex-row flex-wrap"},yl={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},gl=v(()=>t("label",{for:""},"U.Jalan Per",-1)),$l={class:"card-border"},Dl={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Tl=v(()=>t("label",{for:""},"Jenis",-1)),Ml={class:"card-border"},Sl={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},jl=v(()=>t("label",{for:""},"Supir",-1)),Pl={class:"card-border"},Al={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Cl=v(()=>t("label",{for:""},"Kernet",-1)),Bl={class:"card-border"},Nl={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ol=v(()=>t("label",{for:""},"No Pol",-1)),Hl={class:"card-border"},Yl={key:0,class:"w-full flex flex-wrap"},Kl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ql=v(()=>t("label",{for:""},"Tujuan",-1)),Il={class:"card-border"},Fl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Vl=v(()=>t("label",{for:""},"Tipe",-1)),Ul={class:"card-border"},Ll={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Rl=v(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),zl={class:"card-border"},Jl={key:1,class:"w-full p-1"},El=v(()=>t("label",{for:""},"Peralihan",-1)),Gl={class:"card-border"},Xl={key:2,class:"w-full flex flex-col flex-wrap p-1"},Zl=v(()=>t("label",{for:""},"Tiket A",-1)),Ql={class:"card-border"},Wl={key:3,class:"w-full flex flex-wrap"},ea={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ta=v(()=>t("label",{for:""},"In At",-1)),oa={class:"card-border disabled"},la={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},aa=v(()=>t("label",{for:""},"Out At",-1)),sa={class:"card-border disabled"},ia={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_a=v(()=>t("label",{for:""},"Bruto",-1)),ra={class:"card-border disabled"},na={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},da=v(()=>t("label",{for:""},"Tara",-1)),ca={class:"card-border disabled"},ua={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fa=v(()=>t("label",{for:""},"Netto",-1)),pa={class:"card-border disabled"},va={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ba=v(()=>t("label",{for:""},"No Pol",-1)),ma={class:"card-border disabled"},wa={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ka=v(()=>t("label",{for:""},"Supir",-1)),xa={class:"card-border disabled"},ha={key:4,class:"w-full flex flex-col flex-wrap p-1"},ya=v(()=>t("label",{for:""},"Tiket B",-1)),ga={class:"card-border"},$a={key:5,class:"w-full flex flex-wrap"},Da={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ta=v(()=>t("label",{for:""},"In At",-1)),Ma={class:"card-border disabled"},Sa={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ja=v(()=>t("label",{for:""},"Out At",-1)),Pa={class:"card-border disabled"},Aa={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ca=v(()=>t("label",{for:""},"Bruto ",-1)),Ba={class:"card-border disabled"},Na={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Oa=v(()=>t("label",{for:""},"Tara ",-1)),Ha={class:"card-border disabled"},Ya={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ka=v(()=>t("label",{for:""},"Netto ",-1)),qa={class:"card-border disabled"},Ia={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Fa=v(()=>t("label",{for:""},"No Pol",-1)),Va={class:"card-border disabled"},Ua={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},La=v(()=>t("label",{for:""},"Supir",-1)),Ra={class:"card-border disabled"},za={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ja=v(()=>t("label",{for:""},"In At",-1)),Ea={class:"card-border"},Ga={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Xa=v(()=>t("label",{for:""},"Out At",-1)),Za={class:"card-border"},Qa={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Wa=v(()=>t("label",{for:""},"Bruto",-1)),es={class:"card-border"},ts={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},os=v(()=>t("label",{for:""},"Tara",-1)),ls={class:"card-border"},as={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ss=v(()=>t("label",{for:""},"Netto",-1)),is={class:"card-border"},_s={class:"w-full flex items-center justify-end"},rs={class:"w-full flex flex-wrap p-3 items-center"},ns=v(()=>t("div",null," Di Validasi oleh : ",-1)),ds={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},cs={key:0},us={key:1},fs={key:2},ps={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(T){const w=T,{$moment:D}=de(),{pointFormat:y}=Ce(),l=h({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),o=te("token"),$=h(null),P=async()=>{S().loading_full=!0;const C=new FormData;let j="post",O=w.id;O==0||(C.append("id",O),C.append("_method","PUT"));const{data:M,error:x,status:k}=await V("/trx_trp_validasi",{method:j,headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},body:C,retry:0});if(S().loading_full=!1,k.value==="error"){F().trigger(x);return}l.value.val=M.value.val,l.value.val_user=M.value.val_user,l.value.val_by=M.value.val_by,l.value.val_at=M.value.val_at,l.value.val1=M.value.val1,l.value.val1_user=M.value.val1_user,l.value.val1_by=M.value.val1_by,l.value.val1_at=M.value.val1_at,l.value.val2=M.value.val2,l.value.val2_user=M.value.val2_user,l.value.val2_by=M.value.val2_by,l.value.val2_at=M.value.val2_at;let i=w.p_data.map(u=>u.id).indexOf(w.id);i>=-1&&w.p_data.splice(i,1,{...l.value}),w.fnClose()},q=async()=>{S().loading_full=!0;const{data:C,error:j,status:O}=await V("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(S().loading_full=!1,O.value==="error"){F().trigger(j);return}l.value=C.value.data};return Z(()=>w.show,(C,j)=>{C==!0&&(w.is_view==!1&&setTimeout(()=>{$.value.focus()},1),q())},{immediate:!0}),(C,j)=>{const O=ge;return J((r(),n("section",wl,[t("div",null,[g(O,{title:"Form Transaction Validation",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",kl,[t("div",xl,[t("div",hl,[t("div",yl,[gl,t("div",$l,a(e(l).tanggal?e(D)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Dl,[Tl,t("div",Ml,a(e(l).jenis),1)]),t("div",Sl,[jl,t("div",Pl,a(e(l).supir),1)]),t("div",Al,[Cl,t("div",Bl,a(e(l).kernet),1)]),t("div",Nl,[Ol,t("div",Hl,a(e(l).no_pol),1)]),e(l).jenis!=""?(r(),n("div",Yl,[t("div",Kl,[ql,t("div",Il,a(e(l).xto),1)]),t("div",Fl,[Vl,t("div",Ul,a(e(l).tipe),1)]),t("div",Ll,[Rl,t("div",zl,a(e(y)(e(l).amount||0)),1)])])):f("",!0),e(l).jenis=="TBS"?(r(),n("div",Jl,[El,t("div",Gl,a(e(l).transition_to),1)])):f("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",Xl,[Zl,t("div",Ql,a(e(l).ticket_a_no),1)])):f("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",Wl,[t("div",ea,[ta,t("div",oa,a(e(l).ticket_a_in_at?e(D)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",la,[aa,t("div",sa,a(e(l).ticket_a_out_at?e(D)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",ia,[_a,t("div",ra,a(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto):0),1)]),t("div",na,[da,t("div",ca,a(e(l).ticket_a_tara?e(y)(e(l).ticket_a_tara):0),1)]),t("div",ua,[fa,t("div",pa,a(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto-e(l).ticket_a_tara):0),1)]),t("div",va,[ba,t("div",ma,a(e(l).ticket_a_no_pol),1)]),t("div",wa,[ka,t("div",xa,a(e(l).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",ha,[ya,t("div",ga,a(e(l).ticket_b_no),1)])):f("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",$a,[t("div",Da,[Ta,t("div",Ma,a(e(l).ticket_b_in_at?e(D)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Sa,[ja,t("div",Pa,a(e(l).ticket_b_out_at?e(D)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Aa,[Ca,t("div",Ba,a(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto):0),1)]),t("div",Na,[Oa,t("div",Ha,a(e(l).ticket_b_tara?e(y)(e(l).ticket_b_tara):0),1)]),t("div",Ya,[Ka,t("div",qa,a(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)]),t("div",Ia,[Fa,t("div",Va,a(e(l).ticket_b_no_pol),1)]),t("div",Ua,[La,t("div",Ra,a(e(l).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",za,[Ja,t("div",Ea,a(e(l).ticket_b_in_at?e(D)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",Ga,[Xa,t("div",Za,a(e(l).ticket_b_out_at?e(D)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",Qa,[Wa,t("div",es,a(e(y)(e(l).ticket_b_bruto||0)),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",ts,[os,t("div",ls,a(e(y)(e(l).ticket_b_tara||0)),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",as,[ss,t("div",is,a(e(y)(e(l).ticket_b_netto||0)),1)])):f("",!0)])]),t("div",_s,[t("div",rs,[ns,e(l).val||e(l).val1||e(l).val2?(r(),n("div",ds,[e(l).val?(r(),n("div",cs," App 1 : "+a(e(l).val_by.username)+" ( "+a(e(l).val_at?e(D)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),e(l).val1?(r(),n("div",us," App 2 : "+a(e(l).val1_by.username)+" ( "+a(e(l).val1_at?e(D)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),e(l).val2?(r(),n("div",fs," App 3 : "+a(e(l).val2_by.username)+" ( "+a(e(l).val2_at?e(D)(e(l).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0)])):f("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:j[0]||(j[0]=M=>T.fnClose())}," Cancel "),T.is_view==0?(r(),n("button",{key:0,ref_key:"it_val",ref:$,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:j[1]||(j[1]=Se(M=>P(),["prevent"])),onKeyup:j[2]||(j[2]=ut(M=>P(),["enter"]))}," Validasi ",544)):f("",!0)])])])],512)),[[Te,T.show]])}}},vs=Be(ps,[["__scopeId","data-v-153698a5"]]),bs={class:"w-full h-full flex flex-col"},ms={class:"w-full flex grow flex-col overflow-auto h-0"},ws={class:"w-full flex justify-between flex-wrap"},ks={class:"grow flex"},xs={class:"m-1"},hs=Ae('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),ys=[hs],gs={class:"flex"},$s=t("span",{class:"text-xs"},"Mode",-1),Ds=t("b",null,"tidak dapat dibatalkan lagi",-1),Ts={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Ms={class:"relative",style:{width:"95%",height:"90%"}},Ss={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},js={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Ps={class:"w-full p-1"},As={class:"w-full p-1 bg-gray-200"},Cs=t("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),Bs={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},Ns={class:"flex flex-col flex-wrap p-1"},Os=t("label",{for:""},"From",-1),Hs={class:"grow"},Ys={class:"flex flex-col flex-wrap p-1"},Ks=t("label",{for:""},"To",-1),qs={class:"grow"},_i={__name:"ticket",async setup(T){let w,D;const{$moment:y}=de(),U=s=>s.deleted==1?"!bg-red-400":s.req_deleted==1?"!bg-yellow-300":["CPO","PK"].indexOf(s.jenis)>-1&&(s.ticket_a_id>0||s.ticket_b_bruto>0||s.ticket_b_tara>0||s.ticket_b_netto>0||s.ticket_b_in_at!=""||s.ticket_b_out_at!="")||s.jenis=="TBS"&&(s.ticket_a_id>0||s.ticket_b_id>0)||s.jenis=="TBSK"&&s.ticket_b_id>0?"!bg-blue-300":"",l=s=>(s.map(_=>{_.class_h=U(_)}),s),o=h("ticket_not_done");Z(()=>o.value,s=>{be.value.map(_=>{let Y=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(_.key)>-1;return["all","deleted","req_deleted"].indexOf(s)>-1?Y&&(_.tbl_show=1):Y&&(_.tbl_show=0),_}),ce()},{immediate:!1});const $={};$._TimeZoneOffset=new Date().getTimezoneOffset(),$.sort="tanggal:desc";const P=h({}),q=h({from:"",to:""}),C=te("token"),j=te("role"),O=s=>s.includes(j.value),{data:M}=([w,D]=ft(async()=>wt(async()=>{S().loading_full=!0;let s=[];const[_,Y]=await Promise.all([V("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{filter_status:o},retry:0})]);return _.status.value!=="error"&&(s=l(_.data.value.data)),_.status.value==="error"?(F().trigger(_.error),{trx_trps:s}):(S().loading_full=!1,{trx_trps:s})},"$X4xCu6yBOs")),w=await w,D(),w),x=h(M.value.trx_trps||[]),k=h([]),i=h(!1),u=async(s,_="")=>{S().loading_full=!0;let Y=A.value.from?y(A.value.from).format("Y-MM-DD"):"",G=A.value.to?y(A.value.to).format("Y-MM-DD"):"";const{data:H,error:ie,status:_e}=await V("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{jenis:s,online_status:i.value,from:Y,to:G,transition_to:_},retry:0});if(S().loading_full=!1,_e.value==="error"){F().trigger(ie);return}k.value=H.value.list_ticket},b=h({field:"tanggal",by:"desc"}),c=h(-1),N=z(()=>x.value[c.value]),B=h({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),d=()=>{$.like="";let s=JSON.parse(JSON.stringify(S()._tv.global_keyword));s!=""&&($.like=`id:%${s}%,xto:%${s}%,jenis:%${s}%,pv_no:%${s}%,ticket_a_no:%${s}%,ticket_b_no:%${s}%,no_pol:%${s}%,supir:%${s}%,kernet:%${s}%,cost_center_code:%${s}%,cost_center_desc:%${s}%,pvr_no:%${s}%,tanggal:%${s}%,transition_to:%${s}%`),$.sort="",b.value.field&&($.sort=b.value.field+":"+b.value.by),$.date_from=q.value.from?y(q.value.from).format("YYYY-MM-DD"):"",$.date_to=q.value.to?y(q.value.to).format("YYYY-MM-DD"):"",$.filter_model=JSON.stringify(S()._tv.filter_model)},I=async()=>{S().loading_full=!0,P.value={},B.value.may_get_data=!1,$.page=B.value.page,$.page==1&&(x.value=[]),$.first_row&&delete $.first_row,$.page>1&&($.first_row=JSON.stringify(x.value[0])),$.filter_status=o.value;const{data:s,error:_,status:Y}=await V("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:$,retry:0});if(S().loading_full=!1,B.value.may_get_data=!0,Y.value==="error"){F().trigger(_,P);return}B.value.page==1?x.value=l(s.value.data):B.value.page>1&&(x.value=[...x.value,...l(s.value.data)]),s.value.data.length==0&&(B.value.is_last_record=!0),S()._tv.filter_box=!1},ce=()=>{c.value=-1,B.value.page=1,B.value.is_last_record=!1,d(),I()};pt();const oe=h(!1),ue=h(0),{display:Q}=ye();vt(ye());const Ne=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ue.value=x.value[c.value].id,oe.value=!0)},W=h(!1),le=h(0),ae=h(!1),Oe=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(le.value=x.value[c.value].id,W.value=!0,ae.value=!1)},He=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(le.value=x.value[c.value].id,W.value=!0,ae.value=!0)},se=h(!1),fe=h(0),Ye=s=>{fe.value=s,se.value=!0},pe=h({}),E=h(!1),Ke=h(""),qe=async()=>{E.value&&(E.value=!1)},Ie=()=>{var s;c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Ke.value="",pe.value={id:x.value[c.value].id,"no pol":x.value[c.value].no_pol,tujuan:x.value[c.value].xto,permintaan:(s=x.value[c.value].req_deleted_by)==null?void 0:s.username,alasan:x.value[c.value].req_deleted_reason},E.value=!0)},Fe=async()=>{S().loading_full=!0;const s=new FormData;s.append("id",x.value[c.value].id),s.append("_method","DELETE");const{data:_,error:Y,status:G}=await V("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:s,retry:0});if(S().loading_full=!1,G.value==="error"){F().trigger(Y);return}let H={...x.value[c.value]};H.deleted=_.value.deleted,H.deleted_user=_.value.deleted_user,H.deleted_at=_.value.deleted_at,H.deleted_by=_.value.deleted_by,H.deleted_reason=_.value.deleted_reason,H.class_h=U(H),o.value!="all"?x.value.splice(c.value,1):x.value.splice(c.value,1,{...H}),c.value=-1,E.value=!1},ee=h(!1),A=h({from:new Date().setDate(new Date().getDate()-3),to:new Date}),ve=s=>{s=="from"?A.value.from-A.value.to>0&&(A.value.from=A.value.to):A.value.to-A.value.from<0&&(A.value.to=A.value.from)},be=h([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition_to",label:"Peralihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Ve=z(()=>c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Ue=z(()=>!O(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Le=z(()=>!O(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==1&&N.value.val2==0);return(s,_)=>{const Y=We,G=et,H=tt,ie=ot,_e=lt,Re=at,ze=it,re=_t,ne=rt,Je=nt,Ee=dt,Ge=ml,Xe=vs,Ze=st,Qe=kt,me=De("vue-date-picker"),we=$e;return r(),n("div",bs,[g(Y,{title:"List Transaction"}),t("div",ms,[t("div",ws,[t("div",ks,[t("div",xs,[J(t("select",{class:"","onUpdate:modelValue":_[0]||(_[0]=p=>bt(o)?o.value=p:null)},ys,512),[[Me,e(o)]])]),e(Ve)?(r(),n("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[1]||(_[1]=p=>Ne())},[g(G)])):f("",!0),e(c)>-1?(r(),n("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[2]||(_[2]=p=>He())},[g(H)])):f("",!0),e(Le)?(r(),n("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[3]||(_[3]=p=>Ie())},[g(ie)])):f("",!0),e(Ue)?(r(),n("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[4]||(_[4]=p=>Oe())},[g(_e)])):f("",!0)]),t("div",gs,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:_[5]||(_[5]=p=>ee.value=!0)},[g(Re)]),t("div",{class:"m-1 card-border cursor-pointer",onClick:_[6]||(_[6]=p=>i.value=!e(i))},[$s,X(" : "),t("span",{class:mt(["font-bold",e(i)?"text-green-600":"text-red-600"])},a(e(i)?"ONLINE":"OFFLINE"),3)])])]),g(Je,{thead:e(be),selected:e(c),onSetSelected:_[7]||(_[7]=p=>c.value=p),tbody:e(x),fnCallData:I,scrolling:e(B),onSetScrollingPage:_[8]||(_[8]=p=>e(B).page=p),onDoFilter:_[9]||(_[9]=p=>ce())},{absen:K(({item:p,index:L})=>[p.trx_absens&&p.trx_absens.length>0?(r(),R(ze,{key:0,class:"cursor-pointer",onClick:Is=>Ye(L)},null,8,["onClick"])):f("",!0)]),val:K(({item:p})=>[p.val?(r(),R(ne,{key:1})):(r(),R(re,{key:0}))]),val1:K(({item:p})=>[p.val1?(r(),R(ne,{key:1})):(r(),R(re,{key:0}))]),val2:K(({item:p})=>[p.val2?(r(),R(ne,{key:1})):(r(),R(re,{key:0}))]),deleted_by_username:K(({item:p})=>{var L;return[X(a((L=p.deleted_by)==null?void 0:L.username),1)]}),req_deleted_by_username:K(({item:p})=>{var L;return[X(a((L=p.req_deleted_by)==null?void 0:L.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),g(Ee,{type:"custome",show:e(E),data:e(pe),fnClose:qe,fnConfirm:Fe},{words:K(()=>[X(" Data akan diproses dan "),Ds,X(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),g(Ge,{show:e(oe),fnClose:()=>{oe.value=!1},fnLoadDBData:u,id:e(ue),p_data:e(x),list_ticket:e(k),online_status:e(i)},null,8,["show","fnClose","id","p_data","list_ticket","online_status"]),g(Xe,{show:e(W),fnClose:()=>{W.value=!1},id:e(le),p_data:e(x),is_view:e(ae)},null,8,["show","fnClose","id","p_data","is_view"]),g(Ze,{show:e(se),fnClose:()=>{se.value=!1},index:e(fe),p_data:e(x)},null,8,["show","fnClose","index","p_data"]),e(ee)?(r(),n("div",Ts,[t("div",Ms,[t("div",Ss,[g(Qe,{style:{color:"black",cursor:"pointer"},onClick:_[10]||(_[10]=p=>ee.value=!1)})]),t("div",js,[t("div",Ps,[t("div",As,[Cs,t("div",Bs,[t("div",Ns,[Os,t("div",Hs,[g(we,null,{default:K(()=>[g(me,{modelValue:e(A).from,"onUpdate:modelValue":_[11]||(_[11]=p=>e(A).from=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[12]||(_[12]=p=>ve("from"))},null,8,["modelValue"])]),_:1})])]),t("div",Ys,[Ks,t("div",qs,[g(we,null,{default:K(()=>[g(me,{modelValue:e(A).to,"onUpdate:modelValue":_[13]||(_[13]=p=>e(A).to=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[14]||(_[14]=p=>ve("to"))},null,8,["modelValue"])]),_:1})])])])])])]),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:_[15]||(_[15]=p=>ee.value=!1)})])])):f("",!0)])}}};export{_i as default};
