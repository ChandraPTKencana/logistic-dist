import{_ as M}from"./HeaderPopup.vue.132f678e.js";import{r as w,h as P,I as V,n as u,v as I,o as U,c as B,a as e,b as F,m as l,q as h,t as p,C as x,s as $,x as _,y as b,p as q,e as N,L as T}from"./entry.9b8fbe30.js";import"./useUtils.f37c7c08.js";import{u as k}from"./useMyFetch.a6b0cb71.js";import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.30ad854a.js";const c=n=>(q("data-v-189cc8bc"),n=n(),N(),n),j={class:"box-fixed"},L={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},z={class:"w-full flex flex-col items-center grow overflow-auto"},E={class:"w-full flex flex-row flex-wrap"},H={class:"w-full flex flex-col flex-wrap p-1"},O=c(()=>e("label",{for:""},"Username",-1)),G={class:"text-red-500"},J={class:"w-full flex flex-col flex-wrap p-1"},K=c(()=>e("label",{for:""},"Password",-1)),Q={class:"text-red-500"},R={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=c(()=>e("label",{for:""},"Hak Akses",-1)),X=T('<option value="PabrikTransport" data-v-189cc8bc>Pabrik Transport</option><option value="PabrikMandor" data-v-189cc8bc>Pabrik Mandor</option><option value="Logistic" data-v-189cc8bc>Logisitic</option><option value="Finance" data-v-189cc8bc>Finance</option><option value="Marketing" data-v-189cc8bc>Marketing</option><option value="Accounting" data-v-189cc8bc>Accounting</option><option value="MIS" data-v-189cc8bc>MIS</option><option value="SuperAdmin" data-v-189cc8bc>SuperAdmin</option>',8),Y=[X],Z={class:"text-red-500"},ee={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},te=c(()=>e("label",{for:""},"Status",-1)),ae=c(()=>e("option",{value:"1"},"Aktif",-1)),oe=c(()=>e("option",{value:"0"},"Nonaktif",-1)),se=[ae,oe],le={class:"text-red-500"},ie={class:"w-full flex items-center justify-end"},ne={__name:"user",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(n){const i=n,f={id:-1,username:"",password:"",hak_akses:"PabrikTransport",is_active:1},t=w({...f}),v=P("token"),r=w({}),g=async()=>{_().loading_full=!0,r.value={};const s=new FormData;s.append("username",t.value.username),t.value.password&&s.append("password",t.value.password),s.append("hak_akses",t.value.hak_akses),s.append("is_active",t.value.is_active);let a="post",d=i.id;d==0||(s.append("id",d),s.append("_method","PUT"));const{data:o,error:S,status:A}=await k("/user",{method:a,headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},body:s,retry:0});if(_().loading_full=!1,A.value==="error"){b().trigger(S,r);return}if(i.id<=0)t.value.id=o.value.id,t.value.created_at=o.value.created_at,t.value.updated_at=o.value.updated_at,i.p_data.unshift(t.value);else{t.value.updated_at=o.value.updated_at;let m=i.p_data.map(C=>C.id).indexOf(i.id);m>=-1&&i.p_data.splice(m,1,{...t.value})}i.fnClose()},y=async()=>{_().loading_full=!0;const{data:s,error:a,status:d}=await k("/user",{method:"get",headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(_().loading_full=!1,d.value==="error"){b().trigger(a);return}t.value=s.value.data};return V(()=>i.show,(s,a)=>{s==!0&&(t.value={...f},r.value={},i.id!=0&&y())},{immediate:!0}),(s,a)=>{const d=M;return u((U(),B("section",j,[e("div",null,[F(d,{title:"Form User",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",L,[e("div",z,[e("div",E,[e("div",H,[O,u(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>l(t).username=o)},null,512),[[h,l(t).username]]),e("p",G,p(l(r).username),1)]),e("div",J,[K,u(e("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>l(t).password=o)},null,512),[[h,l(t).password]]),e("p",Q,p(l(r).password),1)]),e("div",R,[W,u(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>l(t).hak_akses=o)},Y,512),[[x,l(t).hak_akses]]),e("p",Z,p(l(r).hak_akses),1)]),e("div",ee,[te,u(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>l(t).is_active=o)},se,512),[[x,l(t).is_active]]),e("p",le,p(l(r).is_active),1)])])]),e("div",ie,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[4]||(a[4]=o=>n.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[5]||(a[5]=$(o=>g(),["prevent"]))}," Save ")])])])],512)),[[I,n.show]])}}},fe=D(ne,[["__scopeId","data-v-189cc8bc"]]);export{fe as default};
