import{_ as P}from"./HeaderPopup.vue.eb0bd3ae.js";import{_ as T}from"./WidthMiniPart.vue.b07e0dc6.js";import $ from"./AttachmentSingle.7ee9f305.js";import{r as u,f as F,j,m as S,J as q,o as f,c as p,a as e,b as w,t as o,k as t,v as O,l as h,x as H,E as J,A as y,B as I,p as R,e as U}from"./entry.a671d556.js";import{u as E}from"./useUtils.8a829c73.js";import{u as A}from"./useMyFetch.8d51a973.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.25cc53d4.js";import"./PDFJsView.a2287245.js";const s=_=>(R("data-v-5a3cd118"),_=_(),U(),_),L={class:"box-fixed"},W={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full flex flex-col items-center grow overflow-auto"},K={class:"w-full flex flex-row flex-wrap"},Q={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},X=s(()=>e("label",{for:""},"Trx Trp #ID",-1)),Z={class:"card-border"},ee={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ae=s(()=>e("label",{for:""},"Tanggal",-1)),le={class:"card-border"},te={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},oe=s(()=>e("label",{for:""},"Payment Method",-1)),se={class:"card-border"},re={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},_e=s(()=>e("label",{for:""},"No Pol",-1)),ne={class:"card-border"},de={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ie=s(()=>e("label",{for:""},"Pekerja",-1)),ce={class:"card-border"},ve={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ue=s(()=>e("label",{for:""},"Uang Tambahan",-1)),me={class:"card-border"},fe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},pe=s(()=>e("label",{for:""},"Note For Remarks",-1)),xe={class:"text-red-500"},we={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},he={class:"w-full flex flex-wrap"},ye={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},be=s(()=>e("label",{for:""},"Cost Center Code",-1)),ge={class:"card-border disabled"},ke={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ne=s(()=>e("label",{for:""},"Cost Center Desc",-1)),Ce={class:"card-border disabled"},De={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Se=s(()=>e("label",{for:""},"PVR No",-1)),Ie={class:"card-border disabled"},Ae={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ve=s(()=>e("label",{for:""},"PVR Total",-1)),Ye={class:"card-border disabled"},Be={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Me=s(()=>e("label",{for:""},"PV",-1)),Pe={class:"card-border disabled"},Te={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},$e=s(()=>e("label",{for:""},"PV Amount",-1)),Fe={class:"card-border disabled"},je={class:"w-full flex items-center justify-end"},qe={class:"w-full flex flex-wrap p-3 items-center"},Oe=s(()=>e("div",null," Di Validasi oleh : ",-1)),He={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Je={key:0},Re={key:1},Ue={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const i=_,{$moment:b}=J(),{pointFormat:x}=E(),a=u({...{id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""}}),N=F("token"),g=u({}),C=u(null);u([]);const V={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},n=u(JSON.parse(JSON.stringify({_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""}))),d=u(JSON.parse(JSON.stringify(V))),Y=async()=>{y().loading_full=!0,g.value={};const c=new FormData;let r="post",v=i.id;v==0||(c.append("id",v),c.append("_method","PUT"));const{data:l,error:k,status:m}=await A("/extra_money_trx_validasi",{method:r,headers:{Authorization:`Bearer ${N.value}`,Accept:"application/json"},body:c,retry:0});if(y().loading_full=!1,m.value==="error"){I().trigger(k,g);return}a.value.val1=l.value.val1,a.value.val1_user=l.value.val1_user,a.value.val1_by=l.value.val1_by,a.value.val1_at=l.value.val1_at,a.value.val2=l.value.val2,a.value.val2_user=l.value.val2_user,a.value.val2_by=l.value.val2_by,a.value.val2_at=l.value.val2_at,a.value.val3=l.value.val3,a.value.val3_user=l.value.val3_user,a.value.val3_by=l.value.val3_by,a.value.val3_at=l.value.val3_at,a.value.val4=l.value.val4,a.value.val4_user=l.value.val4_user,a.value.val4_by=l.value.val4_by,a.value.val4_at=l.value.val4_at,a.value.val5=l.value.val5,a.value.val5_user=l.value.val5_user,a.value.val5_by=l.value.val5_by,a.value.val5_at=l.value.val5_at,a.value.val6=l.value.val6,a.value.val6_user=l.value.val6_user,a.value.val6_by=l.value.val6_by,a.value.val6_at=l.value.val6_at;let D=i.p_data.map(M=>M.id).indexOf(i.id);D>=-1&&i.p_data.splice(D,1,{...a.value}),i.fnClose()},B=async()=>{y().loading_full=!0;const{data:c,error:r,status:v}=await A("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${N.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(y().loading_full=!1,v.value==="error"){I().trigger(r);return}let l=c.value.data;a.value=l,n.value._raw=l.employee,n.value._.id.val=l.employee.id,n.value._.name.val=l.employee.name,n.value._.rek_no.val=l.employee_rek_no,n.value._.rek_name.val=l.employee_rek_name,n.value.id=l.employee.id,n.value.name=l.employee.name,n.value.rek_no=(l.employee_rek_no||"")+" "+(l.employee_rek_name||""),d.value._raw=l.extra_money,d.value._.id.val=l.extra_money.id,d.value._.xto.val=l.extra_money.xto,d.value._.description.val=l.extra_money.description,d.value._.total.val=x(l.extra_money.total),d.value.id=l.extra_money.id,d.value.name=l.extra_money.xto,d.value.title=(x(l.extra_money.total)||"")+" "+(l.extra_money.description||"")};return j(()=>i.show,(c,r)=>{c==!0&&(i.is_view==!1&&setTimeout(()=>{C.value.focus()},1),B())},{immediate:!0}),(c,r)=>{const v=P,l=T,k=$;return S((f(),p("section",L,[e("div",null,[w(v,{title:"Form Transaction Salary Bonus Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",W,[e("div",G,[e("div",K,[e("div",Q,[X,e("div",Z,o(t(a).prev_trx_trp_id),1)]),e("div",ee,[ae,e("div",le,o(t(b)(t(a).tanggal).format("DD-MM-YYYY")),1)]),e("div",te,[oe,e("div",se,o(t(a).payment_method.name),1)]),e("div",re,[_e,e("div",ne,o(t(a).no_pol),1)]),e("div",de,[ie,e("div",ce,[w(l,{selected:t(n)},null,8,["selected"])])]),e("div",ve,[ue,e("div",me,[w(l,{selected:t(d)},null,8,["selected"])])]),e("div",fe,[pe,S(e("textarea",{disabled:"disabled","onUpdate:modelValue":r[0]||(r[0]=m=>t(a).note_for_remarks=m)},null,512),[[O,t(a).note_for_remarks]]),e("p",xe,o(t(g).note_for_remarks),1)]),e("div",we,[w(k,{label:"Attachment",value:t(a).attachment_1_preview},null,8,["value"])]),e("div",he,[e("div",ye,[be,e("div",ge,o(t(a).cost_center_code),1)]),e("div",ke,[Ne,e("div",Ce,o(t(a).cost_center_desc),1)]),e("div",De,[Se,e("div",Ie,o(t(a).pvr_no),1)]),e("div",Ae,[Ve,e("div",Ye,o(t(x)(t(a).pvr_total||0)),1)]),e("div",Be,[Me,e("div",Pe,o(t(a).pv_no),1)]),e("div",Te,[$e,e("div",Fe,o(t(x)(t(a).pv_total)),1)])])])]),e("div",je,[e("div",qe,[Oe,t(a).val1||t(a).val2?(f(),p("div",He,[t(a).val1?(f(),p("div",Je," App 1 : "+o(t(a).val1_by.username)+" ( "+o(t(a).val1_at?t(b)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):h("",!0),t(a).val2?(f(),p("div",Re," App 2 : "+o(t(a).val2_by.username)+" ( "+o(t(a).val2_at?t(b)(t(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):h("",!0)])):h("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[1]||(r[1]=m=>_.fnClose())}," Cancel "),_.is_view==0?(f(),p("button",{key:0,ref_key:"it_val",ref:C,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[2]||(r[2]=H(m=>Y(),["prevent"]))}," Validasi ",512)):h("",!0)])])])],512)),[[q,_.show]])}}},la=z(Ue,[["__scopeId","data-v-5a3cd118"]]);export{la as default};
