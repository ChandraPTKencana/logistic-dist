import{r as u,f as W,g as yt,h as kt,i as j,j as bt,x as _,c as x,b as m,a as b,k as de,v as gt,l as n,m as pe,n as h,d as k,G as xt,t as D,w as c,q as ht,y as C,o as i,z as g,A as Te,B as K,I as wt,H as Dt,_ as Y}from"./entry.2e7ccff6.js";import Pt from"./Header.75641c4b.js";import At from"./Plus.6bcb5bdb.js";import Ct from"./Eyes.c56e3726.js";import $t from"./Delete.6925ce08.js";import Tt from"./Void.e4a4e501.js";import Ot from"./Signature.844a9100.js";import St from"./SignatureOff.c229e61e.js";import jt from"./PrinterEye.4057e4cf.js";import qt from"./Table2Column.66de0aee.js";import It from"./Chain.3d41ba1d.js";import Ut from"./Image.cff7b5d9.js";import Et from"./Line.c9413eb9.js";import Mt from"./Check.d3828acb.js";import Nt from"./TableView.b13db078.js";import{u as f}from"./useUtils.fc5372ab.js";import{u as $}from"./useMyFetch.34128b6b.js";import{u as Oe}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Search.a9028577.js";import"./Adjust.18bd0520.js";import"./TableHeaderEye.c72556cb.js";import"./Times.4d587d62.js";import"./ClearAll.78da3c3f.js";import"./client-only.c77c050a.js";import"./ClearEach.16b6c324.js";import"./CaretLeftDoubleBold.93d3dc9e.js";import"./CaretLeftBold.ecc55c59.js";import"./CaretRightBold.369ba729.js";import"./CaretRightDoubleBold.a79e5030.js";const Bt=K(()=>Y(()=>import("./PopupMini.8a11aaed.js"),["./PopupMini.8a11aaed.js","./PopupMini.vue.d6c7b5cc.js","./Times.4d587d62.js","./_plugin-vue_export-helper.c27b6911.js","./entry.2e7ccff6.js","./entry.493f9183.css","./Exclamation.8e427b68.js"],import.meta.url).then(w=>w.default||w)),zt=K(()=>Y(()=>import("./trx_trp.ba863906.js"),["./trx_trp.ba863906.js","./HeaderPopup.vue.564c0726.js","./Times.4d587d62.js","./_plugin-vue_export-helper.c27b6911.js","./entry.2e7ccff6.js","./entry.493f9183.css","./client-only.c77c050a.js","./WidthMiniList.vue.5dc83e7a.js","./WidthMiniPart.vue.fc94dad0.js","./useUtils.fc5372ab.js","./useMyFetch.34128b6b.js"],import.meta.url).then(w=>w.default||w)),Ft=K(()=>Y(()=>import("./trx_trp_validasi.87f28eda.js"),["./trx_trp_validasi.87f28eda.js","./HeaderPopup.vue.564c0726.js","./Times.4d587d62.js","./_plugin-vue_export-helper.c27b6911.js","./entry.2e7ccff6.js","./entry.493f9183.css","./WidthMiniPart.vue.fc94dad0.js","./CaretTop.7edd2313.js","./CaretDown.5b7f7c81.js","./useUtils.fc5372ab.js","./useMyFetch.34128b6b.js"],import.meta.url).then(w=>w.default||w)),Vt=K(()=>Y(()=>import("./trx_absen.92f08017.js"),["./trx_absen.92f08017.js","./HeaderPopup.vue.564c0726.js","./Times.4d587d62.js","./_plugin-vue_export-helper.c27b6911.js","./entry.2e7ccff6.js","./entry.493f9183.css","./Check.d3828acb.js","./PopupMini.vue.d6c7b5cc.js","./Exclamation.8e427b68.js","./useUtils.fc5372ab.js","./useMyFetch.34128b6b.js"],import.meta.url).then(w=>w.default||w)),Rt=K(()=>Y(()=>import("./trx_trp_full.5eaf5356.js"),["./trx_trp_full.5eaf5356.js","./HeaderPopup.vue.564c0726.js","./Times.4d587d62.js","./_plugin-vue_export-helper.c27b6911.js","./entry.2e7ccff6.js","./entry.493f9183.css","./uj.4acb5164.js","./ClockAnalog.d6028f6a.js","./Calendar.2c075cd0.js","./Truck.8b0d6fa1.js","./LocationOn.3192e4ac.js","./TruckDriver.9dd07dff.js","./useUtils.fc5372ab.js","./useMyFetch.34128b6b.js","./emt.44177afc.js","./Person.16642dc3.js","./AttachmentSingle.d81b03a4.js","./PDFJsView.be253f25.js","./PDFJsView.4e9fad9f.css","./CaretTop.7edd2313.js","./CaretDown.5b7f7c81.js"],import.meta.url).then(w=>w.default||w)),Lt={class:"w-full h-full flex flex-col"},Kt={class:"w-full flex grow flex-col overflow-auto h-0"},Yt={class:"w-full flex justify-between flex-wrap"},Ht={class:"grow flex flex-wrap"},Gt={class:"m-1"},Jt=wt('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Wt=[Jt],Zt=b("span",{class:"text-xs ml-1"}," Download ",-1),Qt=b("span",{class:"text-xs ml-1"}," With UJ ",-1),Xt={class:"flex"},ea=b("span",{class:"text-xs"},"Mode",-1),ta={key:0},aa={class:"w-full flex flex-col items-center justify-center"},la={key:2,class:"text-xs"},na={key:0},ra={key:0},oa={class:"grow mb-5"},sa=b("b",{class:"text-red-500"},"divalidasi",-1),ia=b("b",null,"tidak dapat dibatalkan lagi",-1),ua={class:"grow mb-5"},Fa={__name:"index",async setup(w){let H,ve;const{$moment:Z}=Dt(),{pointFormat:Se}=f();let ce=u({clearCheckBox:!1});const Q=e=>e.deleted==1?"!bg-red-400":e.pvr_id>0&&e.req_deleted==1?"!bg-yellow-300":e.absen_not_done&&e.absen_not_done.length>0?"!bg-gray-300":e.pv_id>0?"!bg-blue-300":"",X=e=>(e.map(t=>{t.class_h=Q(t)}),e),T=u("pv_not_done");W(()=>T.value,e=>{Pe.value.map(t=>{let d=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(t.key)>-1;return["all","deleted","req_deleted"].indexOf(e)>-1?d&&(t.tbl_show=1):d&&(t.tbl_show=0),t}),ke()},{immediate:!1});const y={};y._TimeZoneOffset=new Date().getTimezoneOffset(),y.sort="tanggal:desc";const me=u({}),G=u({from:"",to:""}),P=yt("token"),{data:je}=([H,ve]=kt(async()=>ht(async()=>{_().loading_full=!0;let e=[];const[t,d]=await Promise.all([$("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{filter_status:T},retry:0})]);return t.status.value!=="error"&&(e=X(t.data.value.data)),t.status.value==="error"?(C().trigger(t.error),{trx_trps:e}):(_().loading_full=!1,{trx_trps:e})},{lazy:!0,server:!1,default:()=>({trx_trps:[]})},"$pFLmKcrKj9")),H=await H,ve(),H),s=u([]);W(()=>{var e;return(e=je.value)==null?void 0:e.trx_trps},e=>{e&&(s.value=[...e])},{immediate:!0});const fe=u([]),E=u(!1),qe=async()=>{_().loading_full=!0;const{data:e,error:t,status:d}=await $("/trx_load_cost_center",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{online_status:E.value},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}fe.value=e.value.list_cost_center},ee=u({field:"tanggal",by:"desc"}),o=u(-1),v=j(()=>s.value[o.value]),q=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),te=()=>{y.like="";let e=JSON.parse(JSON.stringify(_()._tv.global_keyword));e!=""&&(y.like=`id:%${e}%,xto:%${e}%,jenis:%${e}%,pv_no:%${e}%,ticket_a_no:%${e}%,ticket_b_no:%${e}%,no_pol:%${e}%,supir:%${e}%,kernet:%${e}%,cost_center_code:%${e}%,cost_center_desc:%${e}%,pvr_no:%${e}%,tanggal:%${e}%,transition_target:%${e}%,uj_asst_opt:%${e}%`),y.sort="",ee.value.field&&(y.sort=ee.value.field+":"+ee.value.by),y.date_from=G.value.from?Z(G.value.from).format("YYYY-MM-DD"):"",y.date_to=G.value.to?Z(G.value.to).format("YYYY-MM-DD"):"",y.filter_model=JSON.stringify(_()._tv.filter_model)},ye=async()=>{_().loading_full=!0,me.value={},q.value.may_get_data=!1,y.page=q.value.page,y.page==1&&(s.value=[]),y.first_row&&delete y.first_row,y.page>1&&(y.first_row=JSON.stringify(s.value[0])),y.filter_status=T.value;const{data:e,error:t,status:d}=await $("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,q.value.may_get_data=!0,d.value==="error"){C().trigger(t,me);return}q.value.page==1?s.value=X(e.value.data):q.value.page>1&&(s.value=[...s.value,...X(e.value.data)]),e.value.data.length==0&&(q.value.is_last_record=!0),_()._tv.filter_box=!1},ke=()=>{o.value=-1,q.value.page=1,q.value.is_last_record=!1,te(),ye()},B=u(1),be=u(1),ae=u(!1),ge=u(0),Ie=()=>{ge.value=0,B.value=-1,ae.value=!0},{display:O}=bt(),z=u(!1),F=u(0),Ue=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value=s.value[o.value].id,B.value=1,z.value=!0)},le=u(!1),ne=u(0),Ee=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ne.value=s.value[o.value].id,be.value=1,le.value=!0)},Me=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value=s.value[o.value].id,B.value=0,z.value=!0)},Ne=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value=s.value[o.value].id,B.value=-1,z.value=!0)},re=u(!1),xe=u(0),Be=e=>{xe.value=e,re.value=!0},oe=u(!1),he=u({}),V=u(!1),M=u(""),ze=async()=>{V.value&&(V.value=!1)},Fe=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value="",he.value={id:s.value[o.value].id,"no pol":s.value[o.value].no_pol,tujuan:s.value[o.value].xto},V.value=!0)};W(()=>M.value,e=>{e.trim().length>0?oe.value=!0:oe.value=!1},{immediate:!1});const Ve=async()=>{_().loading_full=!0;const e=new FormData;e.append("id",s.value[o.value].id),e.append("deleted_reason",M.value),e.append("_method","DELETE");const{data:t,error:d,status:S}=await $("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:e,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}let l={...s.value[o.value]};l.deleted=t.value.deleted,l.deleted_user=t.value.deleted_user,l.deleted_at=t.value.deleted_at,l.deleted_by=t.value.deleted_by,l.deleted_reason=t.value.deleted_reason,l.class_h=Q(l),T.value!="all"?s.value.splice(o.value,1):s.value.splice(o.value,1,{...l}),o.value=-1,V.value=!1},se=u(!1),we=u({}),R=u(!1),N=u(""),Re=async()=>{R.value&&(R.value=!1)},Le=()=>{o.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value="",we.value={id:s.value[o.value].id,"no pol":s.value[o.value].no_pol,tujuan:s.value[o.value].xto},R.value=!0)};W(()=>N.value,e=>{e.trim().length>0?se.value=!0:se.value=!1},{immediate:!1});const Ke=async()=>{_().loading_full=!0;const e=new FormData;e.append("id",s.value[o.value].id),e.append("req_deleted_reason",N.value),e.append("_method","DELETE");const{data:t,error:d,status:S}=await $("/trx_trp_req_delete",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:e,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}let l={...s.value[o.value]};l.req_deleted=t.value.req_deleted,l.req_deleted_user=t.value.req_deleted_user,l.req_deleted_by=t.value.req_deleted_by,l.req_deleted_at=t.value.req_deleted_at,l.req_deleted_reason=t.value.req_deleted_reason,l.class_h=Q(l),T.value!="all"?s.value.splice(o.value,1):s.value.splice(o.value,1,{...l}),o.value=-1,R.value=!1},ie=u([]),J=u(!1),Ye=async()=>{_().loading_full=!0;const e=new FormData;e.append("ids",JSON.stringify(ie.value)),e.append("_method","PUT");const{data:t,error:d,status:S}=await $("/trx_trp_validasis",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:e,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}J.value=!1,t.value.val_lists.forEach(l=>{let A=s.value.map(r=>r.id).indexOf(l.id);if(A>-1){let r=s.value[A];r.val=l.val,r.val_by=l.val_by,r.val_at=l.val_at,r.val1=l.val1,r.val1_by=l.val1_by,r.val1_at=l.val1_at,r.val2=l.val2,r.val2_by=l.val2_by,r.val2_at=l.val2_at,r.val3=l.val3,r.val3_by=l.val3_by,r.val3_at=l.val3_at,r.val4=l.val4,r.val4_by=l.val4_by,r.val4_at=l.val4_at,r.val5=l.val5,r.val5_by=l.val5_by,r.val5_at=l.val5_at,r.val6=l.val6,r.val6_by=l.val6_by,r.val6_at=l.val6_at,r.updated_at=l.updated_at,s.value.splice(A,1,{...r})}}),ce.value.clearCheckBox=!0},{printHtml:De}=Oe(),He=async()=>{if(o.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:e,error:t,status:d}=await $("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:s.value[o.value].id},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}De(e.value.html,318)},Ge=async()=>{if(o.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:e,error:t,status:d}=await $("/trx_trp_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:s.value[o.value].id},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}De(e.value.html,318)},Je=async()=>{_().loading_full=!0;const e=new FormData;e.append("online_status",E.value);const{data:t,error:d,status:S}=await $("/trx_trp_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:e,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}t.value.forEach(l=>{let A=s.value.map(r=>r.id).indexOf(l.id);if(A!==-1){let r=s.value[A];r.pvr_id=l.pvr_id,r.pvr_no=l.pvr_no,r.pvr_total=l.pvr_total,r.pvr_had_detail=l.pvr_had_detail,r.updated_at=l.updated_at,s.value.splice(A,1,{...r})}}),O({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},We=async()=>{_().loading_full=!0;const e=new FormData;e.append("online_status",E.value);const{data:t,error:d,status:S}=await $("/trx_trp_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:e,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}t.value.forEach(l=>{let A=s.value.map(r=>r.id).indexOf(l.id);if(A!==-1){let r=s.value[A];r.pv_id=l.pv_id,r.pv_no=l.pv_no,r.pv_total=l.pv_total,r.pv_datetime=l.pv_datetime,r.pv_complete=l.pv_complete,r.updated_at=l.updated_at,s.value.splice(A,1,{...r})}}),O({show:!0,status:"Success",message:"Generate Or Update PV Done"})},Ze=async()=>{_().loading_full=!0;const{data:e,error:t,status:d}=await $("/trx_trp/link_to_extramoney_trx",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}O({show:!0,status:"Success",message:e.value.message})},Pe=u([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"uj_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"uj_tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"uj_harga",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:_().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"received_payment",label:"Sudah Dibayarkan?",type:"string"},{key:"duitku_supir_disburseId",label:"ID Duitku Supir",type:"string"},{key:"duitku_supir_inv_res_desc",label:"Ket Inquery Duitku Supir",type:"string"},{key:"duitku_supir_trf_res_desc",label:"Ket Pengiriman Duitku Supir",type:"string"},{key:"duitku_kernet_disburseId",label:"ID Duitku Kernet",type:"string"},{key:"duitku_kernet_inv_res_desc",label:"Ket Inquery Duitku Kernet",type:"string"},{key:"duitku_kernet_trf_res_desc",label:"Ket Pengiriman Duitku Kernet",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Qe=j(()=>["pv_not_done","all"].indexOf(T.value)>-1&&f().checkPermission("trp_trx.create")),Xe=j(()=>o.value>-1&&f().checkPermission("trp_trx.view")),et=j(()=>o.value>-1&&f().checkPermission("trp_trx.ticket.views"));j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,0].indexOf(v.value.val4)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermission("trp_trx.modify"));const tt=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&([void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2"])||v.value.val3==0&&f().checkPermissions(["trp_trx.val3"])||v.value.val4==0&&f().checkPermissions(["trp_trx.val4"])||v.value.val5==0&&f().checkPermissions(["trp_trx.val5"])||v.value.val6==0&&f().checkPermissions(["trp_trx.val6"]))),at=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&(v.value.val1==1&&f().checkPermissions(["trp_trx.unval1"])||v.value.val2==1&&f().checkPermissions(["trp_trx.unval2"])||v.value.val3==1&&f().checkPermissions(["trp_trx.unval3"])||v.value.val4==1&&f().checkPermissions(["trp_trx.unval4"])||v.value.val5==1&&f().checkPermissions(["trp_trx.unval5"])||v.value.val6==1&&f().checkPermissions(["trp_trx.unval6"]))),lt=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermission("trp_trx.remove")),nt=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&v.value.pvr_id!=""&&f().checkPermission("trp_trx.request_remove")),rt=j(()=>o.value>-1&&v.value.val==1&&f().checkPermission("trp_trx.preview_file")),ot=j(()=>o.value>-1&&v.value.payment_method_id==2&&v.value.received_payment==1&&f().checkPermission("trp_trx.preview_file")),{downloadFile:Ae,viewFile:_a}=Oe(),st=async()=>{te(),_().loading_full=!0,y.filter_status=T.value;const{data:e,error:t,status:d}=await $("/trx_trp/report_raw_excel",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}Ae(e.value)},it=async()=>{te(),_().loading_full=!0,y.filter_status=T.value;const{data:e,error:t,status:d}=await $("/trx_trp/report_excel_w_uj",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(t);return}Ae(e.value)};return(e,t)=>{const d=Pt,S=At,l=Ct,A=$t,r=Tt,L=Ot,ut=St,Ce=jt,$e=qt,_t=It,dt=Ut,I=Et,U=Mt,pt=Nt,ue=Bt,vt=zt,ct=Ft,mt=Vt,ft=Rt;return i(),x("div",Lt,[m(d,{title:"List Transaction"}),b("div",Kt,[b("div",Yt,[b("div",Ht,[b("div",Gt,[de(b("select",{class:"","onUpdate:modelValue":t[0]||(t[0]=a=>pe(T)?T.value=a:null)},Wt,512),[[gt,n(T)]])]),n(Qe)?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[1]||(t[1]=a=>Ie())},[m(S)])):h("",!0),n(Xe)?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[2]||(t[2]=a=>Ne())},[m(l)])):h("",!0),n(lt)?(i(),x("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[3]||(t[3]=a=>Fe())},[m(A)])):h("",!0),n(nt)?(i(),x("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[4]||(t[4]=a=>Le())},[m(r)])):h("",!0),n(tt)?(i(),x("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[5]||(t[5]=a=>Ue())},[m(L)])):h("",!0),n(at)?(i(),x("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[6]||(t[6]=a=>Me())},[m(ut)])):h("",!0),n(et)?(i(),x("button",{key:6,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:t[7]||(t[7]=a=>Ee())},[m(l)])):h("",!0),n(rt)?(i(),x("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[8]||(t[8]=a=>He())},[m(Ce)])):h("",!0),n(ot)?(i(),x("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:t[9]||(t[9]=a=>Ge())},[m(Ce)])):h("",!0),b("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:t[10]||(t[10]=a=>st())},[m($e),k(),Zt]),b("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:t[11]||(t[11]=a=>it())},[m($e),k(),Qt]),n(ie).length>0&&("useUtils"in e?e.useUtils:n(f))().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2","trp_trx.val3","trp_trx.val4","trp_trx.val5","trp_trx.val6"])?(i(),x("button",{key:9,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:t[12]||(t[12]=a=>J.value=!0)},[m(L),m(L),m(L),m(L)])):h("",!0)]),b("div",Xt,[b("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:t[13]||(t[13]=a=>Ze())},[m(_t)]),("useUtils"in e?e.useUtils:n(f))().checkPermission("trp_trx.generate_pvr")?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:t[14]||(t[14]=a=>Je())}," Gen/Update PVR ")):h("",!0),("useUtils"in e?e.useUtils:n(f))().checkPermission("trp_trx.generate_pv")?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:t[15]||(t[15]=a=>We())}," Gen/Update PV ")):h("",!0),("useUtils"in e?e.useUtils:n(f))().checkPermissions(["trp_trx.generate_pvr","trp_trx.generate_pv","trp_trx.get_pv"])?(i(),x("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:t[16]||(t[16]=a=>E.value=!n(E))},[ea,k(" : "),b("span",{class:xt(["font-bold",n(E)?"text-green-600":"text-red-600"])},D(n(E)?"ONLINE":"OFFLINE"),3)])):h("",!0)])]),m(pt,{thead:n(Pe),selected:n(o),onSetSelected:t[17]||(t[17]=a=>o.value=a),tbody:n(s),fnCallData:ye,scrolling:n(q),onSetScrollingPage:t[18]||(t[18]=a=>n(q).page=a),onDoFilter:t[19]||(t[19]=a=>ke()),onSetCheckbox:t[20]||(t[20]=a=>ie.value=a),deep_state:n(ce)},{id:c(({item:a})=>[k(D(a.id),1),a.potongan&&a.potongan.length>0?(i(),x("span",ta,"*")):h("",!0)]),absen:c(({item:a,index:p})=>[a.trx_absens&&a.trx_absens.length>0?(i(),g(dt,{key:0,class:"cursor-pointer",onClick:_e=>Be(p)},null,8,["onClick"])):h("",!0)]),val:c(({item:a})=>[a.val?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),val1:c(({item:a})=>[b("div",aa,[a.val1?(i(),g(U,{key:1})):(i(),g(I,{key:0})),a.absen_not_done&&a.absen_not_done.length>0?(i(),x("div",la,D(a.absen_not_done.join(",")),1)):h("",!0)])]),val2:c(({item:a})=>[a.val2?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),val3:c(({item:a})=>[a.val3?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),val4:c(({item:a})=>[a.val4?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),val5:c(({item:a})=>[a.val5?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),val6:c(({item:a})=>[a.val6?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),salary_paid:c(({item:a})=>{var p,_e;return[k(D(a.salary_paid?n(Z)((p=a.salary_paid)==null?void 0:p.period_end).format("MM-Y")+"["+((_e=a.salary_paid)==null?void 0:_e.period_part)+"]":""),1)]}),uj_xto:c(({item:a})=>{var p;return[k(D((p=a.uj)==null?void 0:p.xto),1)]}),uj_asst_opt:c(({item:a})=>{var p;return[k(D((p=a.uj)==null?void 0:p.asst_opt),1)]}),uj_tipe:c(({item:a})=>{var p;return[k(D((p=a.uj)==null?void 0:p.tipe),1)]}),uj_harga:c(({item:a})=>{var p;return[k(D(n(Se)((p=a.uj)==null?void 0:p.harga)),1)]}),payment_method_name:c(({item:a})=>{var p;return[k(D((p=a.payment_method)==null?void 0:p.name),1)]}),received_payment:c(({item:a})=>[k(D(a.received_payment?"Ya":"Tidak"),1)]),pvr_had_detail:c(({item:a})=>[a.pvr_had_detail?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),pv_complete:c(({item:a})=>[a.pv_complete?(i(),g(U,{key:1})):(i(),g(I,{key:0}))]),deleted_by_username:c(({item:a})=>{var p;return[k(D((p=a.deleted_by)==null?void 0:p.username),1)]}),req_deleted_by_username:c(({item:a})=>{var p;return[k(D((p=a.req_deleted_by)==null?void 0:p.username),1)]}),supir:c(({item:a})=>[k(D(a.supir)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(p=>p.potongan_mst.employee_id).indexOf(a.supir_id)>-1?(i(),x("span",na," * ")):h("",!0)]),kernet:c(({item:a})=>[k(D(a.kernet)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(p=>p.potongan_mst.employee_id).indexOf(a.kernet_id)>-1?(i(),x("span",ra," * ")):h("",!0)]),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),m(ue,{type:"delete",show:n(V),data:n(he),fnClose:ze,fnConfirm:Ve,enabledOk:n(oe)},{footer:c(()=>[k(" Masukkan Alasan Penghapusan: "),b("div",oa,[de(b("textarea",{"onUpdate:modelValue":t[21]||(t[21]=a=>pe(M)?M.value=a:null)},null,512),[[Te,n(M)]])])]),_:1},8,["show","data","enabledOk"]),m(ue,{type:"custome",show:n(J),fnClose:()=>J.value=!1,fnConfirm:Ye},{words:c(()=>[k(" Ticket akan "),sa,k(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),m(ue,{type:"custome",show:n(R),data:n(we),fnClose:Re,fnConfirm:Ke,enabledOk:n(se)},{words:c(()=>[k(" Data akan diproses dan "),ia,k(", yakin untuk melanjutkan ? ")]),footer:c(()=>[k(" Masukkan Alasan Permintaan Penghapusan: "),b("div",ua,[de(b("textarea",{"onUpdate:modelValue":t[22]||(t[22]=a=>pe(N)?N.value=a:null)},null,512),[[Te,n(N)]])])]),_:1},8,["show","data","enabledOk"]),m(vt,{show:n(ae),fnClose:()=>{ae.value=!1},fnLoadDBData:qe,id:n(ge),p_data:n(s),list_cost_center:n(fe),online_status:n(E)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),m(ct,{show:n(z),fnClose:()=>{z.value=!1},id:n(F),p_data:n(s),it_state:n(B),onSetID:t[23]||(t[23]=a=>F.value=a),onSetIndex:t[24]||(t[24]=a=>o.value=a)},null,8,["show","fnClose","id","p_data","it_state"]),m(mt,{show:n(re),fnClose:()=>{re.value=!1},index:n(xe),p_data:n(s)},null,8,["show","fnClose","index","p_data"]),m(ft,{show:n(le),fnClose:()=>{le.value=!1},id:n(ne),p_data:n(s),it_state:n(be),onSetID:t[25]||(t[25]=a=>ne.value=a),onSetIndex:t[26]||(t[26]=a=>o.value=a)},null,8,["show","fnClose","id","p_data","it_state"])])}}};export{Fa as default};
