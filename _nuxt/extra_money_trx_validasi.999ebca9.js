import{_ as G}from"./HeaderPopup.vue.7b062c59.js";import{_ as z}from"./WidthMiniPart.vue.238bd9ba.js";import J from"./AttachmentSingleV1.2e0a69e0.js";import K from"./CaretTop.c7c17af4.js";import W from"./CaretDown.d812d0b9.js";import{r as w,g as Q,R as X,f as Z,k as L,L as ee,o as _,c as d,a as l,b as D,t as s,l as t,A as ae,z as O,n as c,D as R,d as E,H as te,x as k,y as T,p as le,e as oe}from"./entry.dc2b24f1.js";import{u as se}from"./useUtils.bd40102d.js";import{u as V}from"./useMyFetch.766e9601.js";import{_ as ne}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.42ecdbb9.js";const v=i=>(le("data-v-59a843f3"),i=i(),oe(),i),re={class:"box-fixed"},_e={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ve={class:"w-full flex flex-col items-center grow overflow-auto"},ie={class:"w-full flex flex-row flex-wrap"},de={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ue=v(()=>l("label",{for:""},"Trx Trp #ID",-1)),ce={class:"card-border"},me={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},fe=v(()=>l("label",{for:""},"Tanggal",-1)),pe={class:"card-border"},xe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},we=v(()=>l("label",{for:""},"Payment Method",-1)),ye={class:"card-border"},he={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},be=v(()=>l("label",{for:""},"No Pol",-1)),ke={class:"card-border"},ge={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},De=v(()=>l("label",{for:""},"Pekerja",-1)),Ye={class:"card-border"},Ie={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Me=v(()=>l("label",{for:""},"Uang Tambahan",-1)),Ae={class:"card-border"},Ce={class:"w-full flex flex-col flex-wrap p-1"},Ne=v(()=>l("label",{for:""},"Note For Remarks",-1)),Se={class:"text-red-500"},Te={class:"w-full flex"},Ve={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},He={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},Pe={class:"w-full flex flex-wrap"},$e={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Be=v(()=>l("label",{for:""},"Cost Center Code",-1)),Le={class:"card-border disabled"},Oe={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Re=v(()=>l("label",{for:""},"Cost Center Desc",-1)),Ee={class:"card-border disabled"},Ue={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Fe=v(()=>l("label",{for:""},"PVR No",-1)),je={class:"card-border disabled"},qe={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ge=v(()=>l("label",{for:""},"PVR Total",-1)),ze={class:"card-border disabled"},Je={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ke=v(()=>l("label",{for:""},"PV",-1)),We={class:"card-border disabled"},Qe={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Xe=v(()=>l("label",{for:""},"PV Amount",-1)),Ze={class:"card-border disabled"},ea={class:"w-full flex items-center justify-end"},aa={class:"w-full flex flex-wrap p-3 items-center"},ta=v(()=>l("div",null," Di Validasi oleh : ",-1)),la={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},oa={key:0},sa={key:1},na={key:2},ra={key:3},_a={key:4},va={key:5},ia={key:0,class:"text-xs font-bold"},da={key:0,class:"text-xs font-bold"},ua={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(i,{emit:Y}){const r=i,{$moment:y}=te(),{pointFormat:I}=se(),M={id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0,attachment_1_preview:"",attachment_2_preview:""},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""},e=w({...M}),A=Q("token"),C=w({}),H=w(null),P=w(null);w([]);const U={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},F={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""};let N=o=>{o.key=="ArrowUp"&&B(),o.key=="ArrowDown"&&$()};X(()=>{document.removeEventListener("keydown",N)});const f=w(JSON.parse(JSON.stringify(F))),p=w(JSON.parse(JSON.stringify(U))),u=w(""),j=async()=>{u.value="PROSES...",k().loading_full=!0,C.value={};const o=new FormData;let n="post",x=r.id;x==0||(o.append("id",x),o.append("_method","PUT"));const{data:a,error:b,status:g}=await V("/extra_money_trx_validasi",{method:n,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:o,retry:0});if(k().loading_full=!1,g.value==="error"){u.value="GAGAL",T().trigger(b,C);return}e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at,e.value.val4=a.value.val4,e.value.val4_user=a.value.val4_user,e.value.val4_by=a.value.val4_by,e.value.val4_at=a.value.val4_at,e.value.val5=a.value.val5,e.value.val5_user=a.value.val5_user,e.value.val5_by=a.value.val5_by,e.value.val5_at=a.value.val5_at,e.value.val6=a.value.val6,e.value.val6_user=a.value.val6_user,e.value.val6_by=a.value.val6_by,e.value.val6_at=a.value.val6_at;let h=r.p_data.map(m=>m.id).indexOf(r.id);h>-1&&r.p_data.splice(h,1,{...e.value}),u.value="BERHASIL"},q=async()=>{u.value="PROSES...",k().loading_full=!0;const o=new FormData;let n="post",x=r.id;x==0||(o.append("id",x),o.append("_method","PUT"));const{data:a,error:b,status:g}=await V("/extra_money_trx_unvalidasi",{method:n,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:o,retry:0});if(k().loading_full=!1,g.value==="error"){u.value="GAGAL",T().trigger(b);return}e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at,e.value.val4=a.value.val4,e.value.val4_user=a.value.val4_user,e.value.val4_by=a.value.val4_by,e.value.val4_at=a.value.val4_at,e.value.val5=a.value.val5,e.value.val5_user=a.value.val5_user,e.value.val5_by=a.value.val5_by,e.value.val5_at=a.value.val5_at,e.value.val6=a.value.val6,e.value.val6_user=a.value.val6_user,e.value.val6_by=a.value.val6_by,e.value.val6_at=a.value.val6_at;let h=r.p_data.map(m=>m.id).indexOf(r.id);h>-1&&r.p_data.splice(h,1,{...e.value}),u.value="BERHASIL"},S=async()=>{u.value="",k().loading_full=!0;const{data:o,error:n,status:x}=await V("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(k().loading_full=!1,x.value==="error"){T().trigger(n);return}let a=o.value.data;e.value=a,f.value._raw=a.employee,f.value._.id.val=a.employee.id,f.value._.name.val=a.employee.name,f.value._.rek_no.val=a.employee_rek_no,f.value._.rek_name.val=a.employee_rek_name,f.value.id=a.employee.id,f.value.name=a.employee.name,f.value.rek_no=(a.employee_rek_no||"")+" "+(a.employee_rek_name||""),p.value._raw=a.extra_money,p.value._.id.val=a.extra_money.id,p.value._.xto.val=a.extra_money.xto,p.value._.description.val=a.extra_money.description,p.value._.total.val=I(a.extra_money.total),p.value.id=a.extra_money.id,p.value.name=a.extra_money.xto,p.value.title=(I(a.extra_money.total)||"")+" "+(a.extra_money.description||"")};Z(()=>r.show,(o,n)=>{o==!0?(document.addEventListener("keydown",N),e.value={...M},r.it_state==1&&setTimeout(()=>{H.value.focus()},1),r.it_state==0&&setTimeout(()=>{P.value.focus()},1),S()):document.removeEventListener("keydown",N)},{immediate:!0});const $=()=>{let o=r.p_data.map(n=>n.id).indexOf(r.id);o!=r.p_data.length-1&&(o++,Y("setID",r.p_data[o].id),Y("setIndex",o),e.value={...M},setTimeout(()=>{S()},100))},B=()=>{let o=r.p_data.map(n=>n.id).indexOf(r.id);o!=0&&(o--,Y("setID",r.p_data[o].id),Y("setIndex",o),e.value={...M},setTimeout(()=>{S()},100))};return(o,n)=>{const x=G,a=z,b=J,g=K,h=W;return L((_(),d("section",re,[l("div",null,[D(x,{title:"Form Transaction Extra Money Trx Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),l("form",_e,[l("div",ve,[l("div",ie,[l("div",de,[ue,l("div",ce,s(t(e).prev_trx_trp_id),1)]),l("div",me,[fe,l("div",pe,s(t(y)(t(e).tanggal).format("DD-MM-YYYY")),1)]),l("div",xe,[we,l("div",ye,s(t(e).payment_method.name),1)]),l("div",he,[be,l("div",ke,s(t(e).no_pol),1)]),l("div",ge,[De,l("div",Ye,[D(a,{selected:t(f)},null,8,["selected"])])]),l("div",Ie,[Me,l("div",Ae,[D(a,{selected:t(p)},null,8,["selected"])])]),l("div",Ce,[Ne,L(l("textarea",{disabled:"disabled","onUpdate:modelValue":n[0]||(n[0]=m=>t(e).note_for_remarks=m)},null,512),[[ae,t(e).note_for_remarks]]),l("p",Se,s(t(C).note_for_remarks),1)]),l("div",Te,[l("div",Ve,[(_(),O(b,{label:"Attachment",key:t(e).attachment_1_preview,show:i.show,link:t(e).attachment_1_preview},null,8,["show","link"]))]),l("div",He,[(_(),O(b,{label:"Attachment",key:t(e).attachment_2_preview,show:i.show,link:t(e).attachment_2_preview},null,8,["show","link"]))])]),l("div",Pe,[l("div",$e,[Be,l("div",Le,s(t(e).cost_center_code),1)]),l("div",Oe,[Re,l("div",Ee,s(t(e).cost_center_desc),1)]),l("div",Ue,[Fe,l("div",je,s(t(e).pvr_no),1)]),l("div",qe,[Ge,l("div",ze,s(t(I)(t(e).pvr_total||0)),1)]),l("div",Je,[Ke,l("div",We,s(t(e).pv_no),1)]),l("div",Qe,[Xe,l("div",Ze,s(t(I)(t(e).pv_total)),1)])])])]),l("div",ea,[l("div",aa,[ta,t(e).val1||t(e).val2||t(e).val3||t(e).val4||t(e).val5||t(e).val6?(_(),d("div",la,[t(e).val1?(_(),d("div",oa," Kasir : "+s(t(e).val1_by.username)+" ( "+s(t(e).val1_at?t(y)(t(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),t(e).val2?(_(),d("div",sa," Mandor : "+s(t(e).val2_by.username)+" ( "+s(t(e).val2_at?t(y)(t(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),t(e).val3?(_(),d("div",na," KTU/W : "+s(t(e).val3_by.username)+" ( "+s(t(e).val3_at?t(y)(t(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),t(e).val4?(_(),d("div",ra," Logistik : "+s(t(e).val4_by.username)+" ( "+s(t(e).val4_at?t(y)(t(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),t(e).val5?(_(),d("div",_a," SPV Logistik : "+s(t(e).val5_by.username)+" ( "+s(t(e).val5_at?t(y)(t(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),t(e).val6?(_(),d("div",va," MGR Logistik : "+s(t(e).val6_by.username)+" ( "+s(t(e).val6_at?t(y)(t(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0)])):c("",!0)]),l("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:n[1]||(n[1]=m=>B())},[D(g,{class:"black"})]),l("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[2]||(n[2]=m=>i.fnClose())}," Cancel "),i.it_state==1?(_(),d("button",{key:0,ref_key:"it_val",ref:H,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[3]||(n[3]=R(m=>j(),["prevent"]))},[E(" Validasi "),t(u)!=""?(_(),d("div",ia,s(t(u)),1)):c("",!0)],512)):c("",!0),i.it_state==0?(_(),d("button",{key:1,ref_key:"it_unval",ref:P,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:n[4]||(n[4]=R(m=>q(),["prevent"]))},[E(" Unvalidasi "),t(u)!=""?(_(),d("div",da,s(t(u)),1)):c("",!0)],512)):c("",!0),l("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:n[5]||(n[5]=m=>$())},[D(h,{class:"black"})])])])])],512)),[[ee,i.show]])}}},ga=ne(ua,[["__scopeId","data-v-59a843f3"]]);export{ga as default};
