import{_ as A}from"./HeaderPopup.vue.603f9ea7.js";import{_ as T}from"./WidthMiniPart.vue.e9813b0f.js";import{r as u,f as $,j as F,m as D,J as j,o as f,c as p,a as l,b as g,t as o,k as t,v as q,l as w,x as O,E as H,A as y,B as S,p as J,e as R}from"./entry.c072ef02.js";import{u as U}from"./useUtils.4823dd91.js";import{u as I}from"./useMyFetch.a2f42397.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.2399affe.js";const s=_=>(J("data-v-4a352cb0"),_=_(),R(),_),z={class:"box-fixed"},L={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},W={class:"w-full flex flex-col items-center grow overflow-auto"},G={class:"w-full flex flex-row flex-wrap"},K={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Q=s(()=>l("label",{for:""},"Tanggal",-1)),X={class:"card-border"},Z={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ee=s(()=>l("label",{for:""},"Payment Method",-1)),ae={class:"card-border"},le={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},te=s(()=>l("label",{for:""},"No Pol",-1)),oe={class:"card-border"},se={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},re=s(()=>l("label",{for:""},"Pekerja",-1)),_e={class:"card-border"},ne={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},de=s(()=>l("label",{for:""},"Uang Tambahan",-1)),ie={class:"card-border"},ce={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ve=s(()=>l("label",{for:""},"Note For Remarks",-1)),ue={class:"text-red-500"},me={class:"w-full flex flex-wrap"},fe={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},pe=s(()=>l("label",{for:""},"Cost Center Code",-1)),xe={class:"card-border disabled"},we={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ye=s(()=>l("label",{for:""},"Cost Center Desc",-1)),he={class:"card-border disabled"},be={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ge=s(()=>l("label",{for:""},"PVR No",-1)),ke={class:"card-border disabled"},Ne={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ce=s(()=>l("label",{for:""},"PVR Total",-1)),De={class:"card-border disabled"},Se={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ie=s(()=>l("label",{for:""},"PV",-1)),Ve={class:"card-border disabled"},Ye={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Be=s(()=>l("label",{for:""},"PV Amount",-1)),Me={class:"card-border disabled"},Pe={class:"w-full flex items-center justify-end"},Ae={class:"w-full flex flex-wrap p-3 items-center"},Te=s(()=>l("div",null," Di Validasi oleh : ",-1)),$e={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Fe={key:0},je={key:1},qe={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const i=_,{$moment:h}=H(),{pointFormat:x}=U(),e=u({...{id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""}}),k=$("token"),b=u({}),N=u(null);u([]);const V={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},n=u(JSON.parse(JSON.stringify({_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""}))),d=u(JSON.parse(JSON.stringify(V))),Y=async()=>{y().loading_full=!0,b.value={};const c=new FormData;let r="post",v=i.id;v==0||(c.append("id",v),c.append("_method","PUT"));const{data:a,error:m,status:M}=await I("/extra_money_trx_validasi",{method:r,headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:c,retry:0});if(y().loading_full=!1,M.value==="error"){S().trigger(m,b);return}e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at,e.value.val4=a.value.val4,e.value.val4_user=a.value.val4_user,e.value.val4_by=a.value.val4_by,e.value.val4_at=a.value.val4_at,e.value.val5=a.value.val5,e.value.val5_user=a.value.val5_user,e.value.val5_by=a.value.val5_by,e.value.val5_at=a.value.val5_at,e.value.val6=a.value.val6,e.value.val6_user=a.value.val6_user,e.value.val6_by=a.value.val6_by,e.value.val6_at=a.value.val6_at;let C=i.p_data.map(P=>P.id).indexOf(i.id);C>=-1&&i.p_data.splice(C,1,{...e.value}),i.fnClose()},B=async()=>{y().loading_full=!0;const{data:c,error:r,status:v}=await I("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(y().loading_full=!1,v.value==="error"){S().trigger(r);return}let a=c.value.data;e.value=a,n.value._raw=a.employee,n.value._.id.val=a.employee.id,n.value._.name.val=a.employee.name,n.value._.rek_no.val=a.employee_rek_no,n.value._.rek_name.val=a.employee_rek_name,n.value.id=a.employee.id,n.value.name=a.employee.name,n.value.rek_no=(a.employee_rek_no||"")+" "+(a.employee_rek_name||""),d.value._raw=a.extra_money,d.value._.id.val=a.extra_money.id,d.value._.xto.val=a.extra_money.xto,d.value._.description.val=a.extra_money.description,d.value._.total.val=x(a.extra_money.total),d.value.id=a.extra_money.id,d.value.name=a.extra_money.xto,d.value.title=(x(a.extra_money.total)||"")+" "+(a.extra_money.description||"")};return F(()=>i.show,(c,r)=>{c==!0&&(i.is_view==!1&&setTimeout(()=>{N.value.focus()},1),B())},{immediate:!0}),(c,r)=>{const v=A,a=T;return D((f(),p("section",z,[l("div",null,[g(v,{title:"Form Transaction Salary Bonus Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),l("form",L,[l("div",W,[l("div",G,[l("div",K,[Q,l("div",X,o(t(h)(t(e).tanggal).format("DD-MM-YYYY")),1)]),l("div",Z,[ee,l("div",ae,o(t(e).payment_method.name),1)]),l("div",le,[te,l("div",oe,o(t(e).no_pol),1)]),l("div",se,[re,l("div",_e,[g(a,{selected:t(n)},null,8,["selected"])])]),l("div",ne,[de,l("div",ie,[g(a,{selected:t(d)},null,8,["selected"])])]),l("div",ce,[ve,D(l("textarea",{disabled:"disabled","onUpdate:modelValue":r[0]||(r[0]=m=>t(e).note_for_remarks=m)},null,512),[[q,t(e).note_for_remarks]]),l("p",ue,o(t(b).note_for_remarks),1)]),l("div",me,[l("div",fe,[pe,l("div",xe,o(t(e).cost_center_code),1)]),l("div",we,[ye,l("div",he,o(t(e).cost_center_desc),1)]),l("div",be,[ge,l("div",ke,o(t(e).pvr_no),1)]),l("div",Ne,[Ce,l("div",De,o(t(x)(t(e).pvr_total||0)),1)]),l("div",Se,[Ie,l("div",Ve,o(t(e).pv_no),1)]),l("div",Ye,[Be,l("div",Me,o(t(x)(t(e).pv_total)),1)])])])]),l("div",Pe,[l("div",Ae,[Te,t(e).val1||t(e).val2?(f(),p("div",$e,[t(e).val1?(f(),p("div",Fe," App 1 : "+o(t(e).val1_by.username)+" ( "+o(t(e).val1_at?t(h)(t(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),t(e).val2?(f(),p("div",je," App 2 : "+o(t(e).val2_by.username)+" ( "+o(t(e).val2_at?t(h)(t(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),l("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[1]||(r[1]=m=>_.fnClose())}," Cancel "),_.is_view==0?(f(),p("button",{key:0,ref_key:"it_val",ref:N,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[2]||(r[2]=O(m=>Y(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[j,_.show]])}}},Ge=E(qe,[["__scopeId","data-v-4a352cb0"]]);export{Ge as default};
