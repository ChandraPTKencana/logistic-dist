import B from"./ClockAnalog.11dc3e5f.js";import F from"./Calendar.9c42fc41.js";import z from"./Truck.cb0b4caf.js";import G from"./LocationOn.30e11bca.js";import q from"./TruckDriver.75f377d0.js";import K from"./AttachmentSingle.c566a4b6.js";import J from"./Times.8ca04ec0.js";import W from"./Check.19ae7820.js";import{g as Q,r as X,o as d,c as i,F as R,E as H,a as t,b as p,t as l,l as _,d as r,n as x,G as O,z as M,D as S,H as Z,x as C,y as I}from"./entry.f7e5e777.js";import{u as Y}from"./useUtils.5b6922fd.js";import{u as L}from"./useMyFetch.4b536cbd.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./PDFJsView.8f329be7.js";const tt={key:0,class:"border-2 w-full"},et=t("div",{class:"w-full font-bold text-center bg-blue-300"},"STANDBY ",-1),at={class:"border-2"},st={class:"flex w-full items-center justify-between"},lt={class:"flex items-center justify-center p-1"},ot=t("div",{class:"font-bold text-xs"},"Created At",-1),nt={class:"text-xs sm:flex"},rt={class:"sm:mr-1"},_t={class:"font-bold text-lg text-center"},dt={class:"flex items-center justify-center p-1"},ct=t("div",{class:"font-bold text-xs"},"Updated At",-1),it={class:"text-xs sm:flex"},vt={class:"sm:mr-1"},ut={class:"border-t-2 p-2 flex flex-row flex-wrap items-center justify-center"},bt={class:"flex flex-col items-center justify-center"},mt={class:"flex items-center justify-center"},yt={class:"font-bold italic ml-2"},pt={class:"flex flex-col relative"},ft={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},ht={class:"flex items-center justify-center"},xt={class:"px-1"},wt={class:"w-full flex items-center justify-center"},kt={class:"w-full sm:w-1/2 flex flex-wrap items-center justify-center border-2 rounded-lg"},gt={class:"w-1/2"},Yt={class:"w-1/2"},Dt={class:"font-bold"},At={key:0,class:"w-full sm:w-1/2 flex items-center justify-center border-2 rounded-lg"},Mt={class:"w-1/2"},St={class:"w-1/2"},Ct={class:"font-bold"},Nt={class:"w-full flex flex-row flex-wrap"},Pt={class:"w-full sm:w-7/12 md:w-1/2 p-2"},jt=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA ",-1),Rt={class:"w-full text-sm"},Tt=t("thead",null,[t("tr",null,[t("th",{class:"border-2 border-black p-2"},"Type"),t("th",{class:"border-2 border-black p-2"},"Deskripsi"),t("th",{class:"border-2 border-black p-2"},"Nominal")])],-1),Et={class:"border-2 border-black p-2"},Vt={class:"border-2 border-black p-2"},Ut={class:"border-2 border-black p-2 text-right"},Ht={class:"w-full sm:w-5/12 md:w-1/2 p-2"},Ot=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),It={class:"w-full text-sm"},Lt=t("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),$t={class:"border-2 border-black p-2 font-bold"},Bt=t("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),Ft={class:"border-2 border-black p-2 font-bold"},zt=t("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),Gt={class:"border-2 border-black p-2 font-bold"},qt=t("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),Kt={class:"border-2 border-black p-2 font-bold"},Jt=t("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),Wt={class:"border-2 border-black p-2 font-bold"},Qt=t("td",{class:"border-2 border-black p-2"}," PV NO ",-1),Xt={class:"border-2 border-black p-2 font-bold"},Zt=t("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),te={class:"border-2 border-black p-2 font-bold"},ee={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},ae={class:"w-full",role:"sticky"},se={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},le=t("thead",null,[t("tr",{class:"sticky -top-1 !z-[2]"},[t("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ")]),t("tr",{class:"sticky top-7 !z-[2]"},[t("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),t("th",{class:"!min-w-[90px] !w-[90px] !max-w-[90px]"},"Tanggal"),t("th",{class:"!min-w-[55px] !w-[55px] !max-w-[55px]"},"Waktu"),t("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto"),t("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Note"),t("th",{class:"!min-w-[70px] !w-[70px] !max-w-[70px]"},"Dibayar")])],-1),oe=["data-index"],ne={class:"cell"},re={class:"w-full h-auto flex items-center justify-center relative"},_e={class:"cell"},de={class:"w-full h-auto flex items-center justify-center relative"},ce={class:"cell"},ie={style:{width:"60vw"},class:"h-auto flex items-center justify-center"},ve={class:"cell"},ue={class:"h-auto flex items-center justify-center"},be={class:"w-full h-auto flex items-center justify-center"},me={key:0,class:"text-3xl"},ye=["onClick"],pe=t("div",{class:"w-full text-xl font-bold text-center"}," APPROVER STANDBY TRIP",-1),fe={class:"w-full flex flex-wrap justify-center text-xs text-center"},he={class:"border-2 p-1 m-1"},xe=t("br",null,null,-1),we=t("br",null,null,-1),ke={class:"border-2 p-1 m-1"},ge=t("br",null,null,-1),Ye=t("br",null,null,-1),De={class:"border-2 p-1 m-1"},Ae=t("br",null,null,-1),Me=t("br",null,null,-1),Se={class:"border-2 p-1 m-1"},Ce=t("br",null,null,-1),Ne=t("br",null,null,-1),Pe={class:"border-2 p-1 m-1"},je=t("br",null,null,-1),Re=t("br",null,null,-1),Te={class:"border-2 p-1 m-1"},Ee=t("br",null,null,-1),Ve=t("br",null,null,-1),Ue={class:"flex flex-wrap justify-between"},He=["onClick"],Oe=["onClick"],Ie=["onClick"],Le={key:0,class:"text-xs font-bold"},$e=["onClick"],Be={key:0,class:"text-xs font-bold"},sa={__name:"stt",props:{standby_trxs:{type:Array,required:!1},p_data:{type:Array,required:!0,default:[]},save_state:{type:Array,required:!0,default:[]},save_do:{type:Array,required:!0,default:[]}},setup(u){const s=u,{$moment:v}=Z(),{pointFormat:N}=Y(),T=Q("token"),D=X({}),P=async(e,f)=>{s.save_state[e]="PROSES...",s.save_do[e]="VAL",C().loading_full=!0,D.value={};const y=new FormData;let o=[...s.standby_trxs[e].details];f=="paid"?o=o.map((b,a)=>(b.be_paid=1,b)):f=="nopaid"&&(o=o.map((b,a)=>(b.be_paid=0,b))),y.append("details",JSON.stringify(o)),y.append("id",s.standby_trxs[e].id),y.append("_method","PUT");let w="post";const{data:n,error:h,status:k}=await L("/standby_trx_validasi",{method:w,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:y,retry:0});if(C().loading_full=!1,k.value==="error"){s.save_state[e]="GAGAL",I().trigger(h,D);return}s.standby_trxs[e].val=n.value.val,s.standby_trxs[e].val_user=n.value.val_user,s.standby_trxs[e].val_by=n.value.val_by,s.standby_trxs[e].val_at=n.value.val_at,s.standby_trxs[e].val1=n.value.val1,s.standby_trxs[e].val1_user=n.value.val1_user,s.standby_trxs[e].val1_by=n.value.val1_by,s.standby_trxs[e].val1_at=n.value.val1_at,s.standby_trxs[e].val2=n.value.val2,s.standby_trxs[e].val2_user=n.value.val2_user,s.standby_trxs[e].val2_by=n.value.val2_by,s.standby_trxs[e].val2_at=n.value.val2_at,s.standby_trxs[e].val3=n.value.val3,s.standby_trxs[e].val3_user=n.value.val3_user,s.standby_trxs[e].val3_by=n.value.val3_by,s.standby_trxs[e].val3_at=n.value.val3_at,s.standby_trxs[e].val4=n.value.val4,s.standby_trxs[e].val4_user=n.value.val4_user,s.standby_trxs[e].val4_by=n.value.val4_by,s.standby_trxs[e].val4_at=n.value.val4_at,s.standby_trxs[e].val5=n.value.val5,s.standby_trxs[e].val5_user=n.value.val5_user,s.standby_trxs[e].val5_by=n.value.val5_by,s.standby_trxs[e].val5_at=n.value.val5_at,s.save_state[e]="BERHASIL";let g=s.p_data.map(b=>b.id).indexOf(s.standby_trxs[e].id);g>-1&&s.p_data.splice(g,1,{...s.standby_trxs[e]})},$=async e=>{s.save_state[e]="PROSES...",s.save_do[e]="UNVAL",C().loading_full=!0,D.value={};const f=new FormData;f.append("id",s.standby_trxs[e].id),f.append("_method","PUT");let y="post";const{data:o,error:w,status:n}=await L("/standby_trx_unvalidasi",{method:y,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:f,retry:0});if(C().loading_full=!1,n.value==="error"){s.save_state[e]="GAGAL",I().trigger(w,D);return}s.standby_trxs[e].val=o.value.val,s.standby_trxs[e].val_user=o.value.val_user,s.standby_trxs[e].val_by=o.value.val_by,s.standby_trxs[e].val_at=o.value.val_at,s.standby_trxs[e].val1=o.value.val1,s.standby_trxs[e].val1_user=o.value.val1_user,s.standby_trxs[e].val1_by=o.value.val1_by,s.standby_trxs[e].val1_at=o.value.val1_at,s.standby_trxs[e].val2=o.value.val2,s.standby_trxs[e].val2_user=o.value.val2_user,s.standby_trxs[e].val2_by=o.value.val2_by,s.standby_trxs[e].val2_at=o.value.val2_at,s.standby_trxs[e].val3=o.value.val3,s.standby_trxs[e].val3_user=o.value.val3_user,s.standby_trxs[e].val3_by=o.value.val3_by,s.standby_trxs[e].val3_at=o.value.val3_at,s.standby_trxs[e].val4=o.value.val4,s.standby_trxs[e].val4_user=o.value.val4_user,s.standby_trxs[e].val4_by=o.value.val4_by,s.standby_trxs[e].val4_at=o.value.val4_at,s.standby_trxs[e].val5=o.value.val5,s.standby_trxs[e].val5_user=o.value.val5_user,s.standby_trxs[e].val5_by=o.value.val5_by,s.standby_trxs[e].val5_at=o.value.val5_at,s.save_state[e]="BERHASIL";let h=s.p_data.map(k=>k.id).indexOf(s.standby_trxs[e].id);h>-1&&s.p_data.splice(h,1,{...s.standby_trxs[e]})};return(e,f)=>{const y=B,o=F,w=z,n=G,h=q,k=K,g=J,b=W;return u.standby_trxs&&u.standby_trxs.length>0?(d(),i("div",tt,[et,(d(!0),i(R,null,H(u.standby_trxs,(a,m)=>{var E,V,U;return d(),i("div",at,[t("div",st,[t("div",lt,[p(y,{class:"text-xl mr-1"}),t("div",null,[ot,t("div",nt,[t("div",rt,l(a.created_at?_(v)(a.created_at).format("DD-MM-YYYY"):""),1),t("div",null,l(a.created_at?_(v)(a.created_at).format("H:m:s"):""),1)])])]),t("div",_t,"ID #"+l(a.id),1),t("div",dt,[p(y,{class:"text-xl mr-1"}),t("div",null,[ct,t("div",it,[t("div",vt,l(a.updated_at?_(v)(a.updated_at).format("DD-MM-YYYY"):""),1),t("div",null,l(a.updated_at?_(v)(a.updated_at).format("H:m:s"):""),1)])])])]),t("div",ut,[t("div",bt,[t("div",mt,[p(o,{class:"mr-1"}),r(" "+l(a.tanggal?_(v)(a.tanggal).format("DD-MM-YYYY"):"")+" ",1),t("span",yt,l(a.transition_type)+" "+l(a.transition_target),1)]),t("div",pt,[p(w,{class:"text-9xl"}),t("div",ft,l(a.no_pol),1)]),t("div",ht,[p(n),t("span",xt,l(a.xto),1)])]),t("div",wt,[t("div",kt,[t("div",gt,[p(h,{class:"text-9xl"})]),t("div",Yt,[t("div",Dt," DRIVER #"+l(a.supir_id),1),t("div",null,l(a.supir),1)])]),a.kernet_id?(d(),i("div",At,[t("div",Mt,[p(h,{class:"text-9xl"})]),t("div",St,[t("div",Ct," ASST DRIVER #"+l(a.kernet_id),1),t("div",null,l(a.kernet),1)])])):x("",!0)]),t("div",Nt,[t("div",Pt,[jt,t("table",Rt,[Tt,t("tbody",null,[t("tr",null,[t("td",Et,l((E=a.standby_mst_)==null?void 0:E.tipe),1),t("td",Vt,l((V=a.standby_mst_)==null?void 0:V.name),1),t("td",Ut,l(_(N)((U=a.standby_mst_)==null?void 0:U.amount)),1)])])])]),t("div",Ht,[Ot,t("table",It,[t("tbody",null,[t("tr",null,[Lt,t("td",$t,l(a.note_for_remarks),1)]),t("tr",null,[Bt,t("td",Ft,l(a.cost_center_code),1)]),t("tr",null,[zt,t("td",Gt,l(a.cost_center_desc),1)]),t("tr",null,[qt,t("td",Kt,l(a.pvr_no),1)]),t("tr",null,[Jt,t("td",Wt,l(_(N)(a.pvr_total||0)),1)]),t("tr",null,[Qt,t("td",Xt,l(a.pv_no),1)]),t("tr",null,[Zt,t("td",te,l(_(N)(a.pv_total||0)),1)])])])])]),t("div",ee,[t("div",ae,[t("table",se,[le,t("tbody",{ref_for:!0,ref:"to_move"},[(d(!0),i(R,null,H(a.details,(c,j)=>(d(),i(R,{key:j},[c.p_status!="Remove"?(d(),i("tr",{key:0,"data-index":j},[t("td",null,l(j+1)+".",1),t("td",ne,[t("div",re,l(_(v)(c.tanggal).format("DD-MM-YYYY")),1)]),t("td",_e,[t("div",de,l(c.waktu.substring(0,5)),1)]),t("td",ce,[t("div",ie,[p(k,{value:c.attachment_1_preview,onSetFile:A=>c.attachment_1=A,onSetPreview:A=>c.attachment_1_preview=A},null,8,["value","onSetFile","onSetPreview"])])]),t("td",ve,[t("div",ue,l(c.note),1)]),t("td",{class:O(["cell",!("useUtils"in e?e.useUtils:_(Y))().checkPermissions(["standby_trx.detail.decide_paid"])||a.val5==1?"unselectable":""])},[t("div",be,[!("useUtils"in e?e.useUtils:_(Y))().checkPermissions(["standby_trx.detail.decide_paid"])||a.val5==1?(d(),i("div",me,[c.be_paid==0?(d(),M(g,{key:0,class:"text-red-800"})):(d(),M(b,{key:1,class:"text-green-800"}))])):(d(),i("button",{key:1,type:"button",onClick:A=>c.be_paid=c.be_paid?0:1,class:O(["text-white w-auto rounded text-xl",c.be_paid?"bg-green-600":"bg-red-600"])},[c.be_paid==0?(d(),M(g,{key:0})):(d(),M(b,{key:1}))],10,ye))])],2)],8,oe)):x("",!0)],64))),128))],512)])])]),pe,t("div",fe,[t("div",he,[r(" Kasir "),xe,r(" "+l(a.val_by&&a.val?a.val_by.username:"-")+" ",1),we,r(" ( "+l(a.val_at&&a.val?_(v)(a.val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",ke,[r(" Mandor "),ge,r(" "+l(a.val1_by&&a.val1?a.val1_by.username:"-")+" ",1),Ye,r(" ( "+l(a.val1_at&&a.val1?_(v)(a.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",De,[r(" Staff Logistik "),Ae,r(" "+l(a.val2_by&&a.val2?a.val2_by.username:"-")+" ",1),Me,r(" ( "+l(a.val2_at&&a.val2?_(v)(a.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Se,[r(" Admin LogistiK "),Ce,r(" "+l(a.val3_by&&a.val3?a.val3_by.username:"-")+" ",1),Ne,r(" ( "+l(a.val3_at&&a.val3?_(v)(a.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Pe,[r(" SPV Logistik "),je,r(" "+l(a.val4_by&&a.val4?a.val4_by.username:"-")+" ",1),Re,r(" ( "+l(a.val4_at&&a.val4?_(v)(a.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Te,[r(" MGR Logistik "),Ee,r(" "+l(a.val5_by&&a.val5?a.val5_by.username:"-")+" ",1),Ve,r(" ( "+l(a.val5_at&&a.val5?_(v)(a.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])]),t("div",Ue,[("useUtils"in e?e.useUtils:_(Y))().checkPermissions(["standby_trx.detail.decide_paid"])&&a.val5=="0"?(d(),i("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-green-600 text-white text-xs rounded-sm",onClick:S(c=>P(m,"paid"),["prevent"])}," Paid ",8,He)):x("",!0),("useUtils"in e?e.useUtils:_(Y))().checkPermissions(["standby_trx.detail.decide_paid"])&&a.val5=="0"?(d(),i("button",{key:1,type:"submit",name:"button",class:"w-36 m-1 bg-red-600 text-white text-xs rounded-sm",onClick:S(c=>P(m,"nopaid"),["prevent"])}," NoPaid ",8,Oe)):x("",!0),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:S(c=>P(m),["prevent"])},[r(" Validasi "),u.save_do[m]=="VAL"&&u.save_state[m]!=""?(d(),i("div",Le,l(u.save_state[m]),1)):x("",!0)],8,Ie),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:S(c=>$(m),["prevent"])},[r(" Unvalidasi "),u.save_do[m]=="UNVAL"&&u.save_state[m]!=""?(d(),i("div",Be,l(u.save_state[m]),1)):x("",!0)],8,$e)])])])}),256))])):x("",!0)}}};export{sa as default};
