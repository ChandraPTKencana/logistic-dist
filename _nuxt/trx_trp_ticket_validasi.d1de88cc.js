import{_ as B}from"./HeaderPopup.vue.d8e5a038.js";import{r as h,f as H,j as S,m as T,M as A,o as a,c as _,a as t,b as P,t as l,k as e,l as i,x as O,E as C,A as p,B as k,p as N,e as K}from"./entry.6a371a02.js";import{u as I}from"./useUtils.33aa71b3.js";import{u as g}from"./useMyFetch.debc51ec.js";import{_ as V}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.eb95a29f.js";const o=n=>(N("data-v-9ea471a7"),n=n(),K(),n),$={class:"box-fixed"},q={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},F={class:"w-full flex flex-col items-center grow overflow-auto"},U={class:"w-full flex flex-row flex-wrap"},E={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},J=o(()=>t("label",{for:""},"U.Jalan Per",-1)),z={class:"card-border"},G={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},L=o(()=>t("label",{for:""},"Jenis",-1)),Q={class:"card-border"},R={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=o(()=>t("label",{for:""},"Supir",-1)),X={class:"card-border"},Z={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ee=o(()=>t("label",{for:""},"Kernet",-1)),te={class:"card-border"},se={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},le=o(()=>t("label",{for:""},"No Pol",-1)),oe={class:"card-border"},ae={key:0,class:"w-full flex flex-wrap"},_e={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ie=o(()=>t("label",{for:""},"Tujuan",-1)),de={class:"card-border"},ce={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},re=o(()=>t("label",{for:""},"Tipe",-1)),ne={class:"card-border"},fe={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},we=o(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),ue={class:"card-border"},ve={key:1,class:"w-full p-1"},pe=o(()=>t("label",{for:""},"Peralihan",-1)),be={class:"card-border"},me={key:2,class:"w-full flex flex-col flex-wrap p-1"},xe=o(()=>t("label",{for:""},"Tiket A",-1)),he={class:"card-border"},ke={key:3,class:"w-full flex flex-wrap"},ge={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ye=o(()=>t("label",{for:""},"In At",-1)),De={class:"card-border disabled"},Me={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ye=o(()=>t("label",{for:""},"Out At",-1)),je={class:"card-border disabled"},Be={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},He=o(()=>t("label",{for:""},"Bruto",-1)),Se={class:"card-border disabled"},Te={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ae=o(()=>t("label",{for:""},"Tara",-1)),Pe={class:"card-border disabled"},Oe={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ce=o(()=>t("label",{for:""},"Netto",-1)),Ne={class:"card-border disabled"},Ke={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ie=o(()=>t("label",{for:""},"No Pol",-1)),Ve={class:"card-border disabled"},$e={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},qe=o(()=>t("label",{for:""},"Supir",-1)),Fe={class:"card-border disabled"},Ue={key:4,class:"w-full flex flex-col flex-wrap p-1"},Ee=o(()=>t("label",{for:""},"Tiket B",-1)),Je={class:"card-border"},ze={key:5,class:"w-full flex flex-wrap"},Ge={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Le=o(()=>t("label",{for:""},"In At",-1)),Qe={class:"card-border disabled"},Re={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},We=o(()=>t("label",{for:""},"Out At",-1)),Xe={class:"card-border disabled"},Ze={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},et=o(()=>t("label",{for:""},"Bruto ",-1)),tt={class:"card-border disabled"},st={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},lt=o(()=>t("label",{for:""},"Tara ",-1)),ot={class:"card-border disabled"},at={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_t=o(()=>t("label",{for:""},"Netto ",-1)),it={class:"card-border disabled"},dt={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ct=o(()=>t("label",{for:""},"No Pol",-1)),rt={class:"card-border disabled"},nt={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ft=o(()=>t("label",{for:""},"Supir",-1)),wt={class:"card-border disabled"},ut={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},vt=o(()=>t("label",{for:""},"In At",-1)),pt={class:"card-border"},bt={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},mt=o(()=>t("label",{for:""},"Out At",-1)),xt={class:"card-border"},ht={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},kt=o(()=>t("label",{for:""},"Bruto",-1)),gt={class:"card-border"},yt={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Dt=o(()=>t("label",{for:""},"Tara",-1)),Mt={class:"card-border"},Yt={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},jt=o(()=>t("label",{for:""},"Netto",-1)),Bt={class:"card-border"},Ht={class:"w-full flex flex-col flex-wrap p-1"},St=o(()=>t("label",{for:""},"Note",-1)),Tt={class:"card-border"},At={class:"w-full flex items-center justify-end"},Pt={class:"w-full flex flex-wrap p-3 items-center"},Ot=o(()=>t("div",null," Di Validasi oleh : ",-1)),Ct={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Nt={key:0},Kt={key:1},It={key:2},Vt={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const w=n,{$moment:c}=C(),{pointFormat:r}=I(),s=h({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val_ticket:0,val_ticket_by:{username:""},val_ticket_at:""}}),b=H("token"),m=h(null),y=async()=>{p().loading_full=!0;const u=new FormData;let f="post",v=w.id;v==0||(u.append("id",v),u.append("_method","PUT"));const{data:d,error:M,status:Y}=await g("/trx_trp_validasi",{method:f,headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},body:u,retry:0});if(p().loading_full=!1,Y.value==="error"){k().trigger(M);return}s.value.val=d.value.val,s.value.val_user=d.value.val_user,s.value.val_by=d.value.val_by,s.value.val_at=d.value.val_at,s.value.val1=d.value.val1,s.value.val1_user=d.value.val1_user,s.value.val1_by=d.value.val1_by,s.value.val1_at=d.value.val1_at,s.value.val_ticket=d.value.val_ticket,s.value.val_ticket_by=d.value.val_ticket_by,s.value.val_ticket_at=d.value.val_ticket_at;let x=w.p_data.map(j=>j.id).indexOf(w.id);x>=-1&&w.p_data.splice(x,1,{...s.value}),w.fnClose()},D=async()=>{p().loading_full=!0;const{data:u,error:f,status:v}=await g("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(p().loading_full=!1,v.value==="error"){k().trigger(f);return}s.value=u.value.data};return S(()=>w.show,(u,f)=>{u==!0&&(w.is_view==!1&&setTimeout(()=>{m.value.focus()},1),D())},{immediate:!0}),(u,f)=>{const v=B;return T((a(),_("section",$,[t("div",null,[P(v,{title:"Form Transaction Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",q,[t("div",F,[t("div",U,[t("div",E,[J,t("div",z,l(e(s).tanggal?e(c)(e(s).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",G,[L,t("div",Q,l(e(s).jenis),1)]),t("div",R,[W,t("div",X,l(e(s).supir),1)]),t("div",Z,[ee,t("div",te,l(e(s).kernet),1)]),t("div",se,[le,t("div",oe,l(e(s).no_pol),1)]),e(s).jenis!=""?(a(),_("div",ae,[t("div",_e,[ie,t("div",de,l(e(s).xto),1)]),t("div",ce,[re,t("div",ne,l(e(s).tipe),1)]),t("div",fe,[we,t("div",ue,l(e(r)(e(s).amount||0)),1)])])):i("",!0),e(s).jenis=="TBS"?(a(),_("div",ve,[pe,t("div",be,l(e(s).transition_target),1)])):i("",!0),e(s).jenis!=""&&e(s).jenis!="TBSK"?(a(),_("div",me,[xe,t("div",he,l(e(s).ticket_a_no),1)])):i("",!0),e(s).jenis!=""&&e(s).jenis!="TBSK"?(a(),_("div",ke,[t("div",ge,[ye,t("div",De,l(e(s).ticket_a_in_at?e(c)(e(s).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Me,[Ye,t("div",je,l(e(s).ticket_a_out_at?e(c)(e(s).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Be,[He,t("div",Se,l(e(s).ticket_a_bruto?e(r)(e(s).ticket_a_bruto):0),1)]),t("div",Te,[Ae,t("div",Pe,l(e(s).ticket_a_tara?e(r)(e(s).ticket_a_tara):0),1)]),t("div",Oe,[Ce,t("div",Ne,l(e(s).ticket_a_bruto?e(r)(e(s).ticket_a_bruto-e(s).ticket_a_tara):0),1)]),t("div",Ke,[Ie,t("div",Ve,l(e(s).ticket_a_no_pol),1)]),t("div",$e,[qe,t("div",Fe,l(e(s).ticket_a_supir),1)])])):i("",!0),["TBS","TBSK"].indexOf(e(s).jenis)>-1?(a(),_("div",Ue,[Ee,t("div",Je,l(e(s).ticket_b_no),1)])):i("",!0),["TBS","TBSK"].indexOf(e(s).jenis)>-1?(a(),_("div",ze,[t("div",Ge,[Le,t("div",Qe,l(e(s).ticket_b_in_at?e(c)(e(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Re,[We,t("div",Xe,l(e(s).ticket_b_out_at?e(c)(e(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ze,[et,t("div",tt,l(e(s).ticket_b_bruto?e(r)(e(s).ticket_b_bruto):0),1)]),t("div",st,[lt,t("div",ot,l(e(s).ticket_b_tara?e(r)(e(s).ticket_b_tara):0),1)]),t("div",at,[_t,t("div",it,l(e(s).ticket_b_bruto?e(r)(e(s).ticket_b_bruto-e(s).ticket_b_tara):0),1)]),t("div",dt,[ct,t("div",rt,l(e(s).ticket_b_no_pol),1)]),t("div",nt,[ft,t("div",wt,l(e(s).ticket_b_supir),1)])])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",ut,[vt,t("div",pt,l(e(s).ticket_b_in_at?e(c)(e(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",bt,[mt,t("div",xt,l(e(s).ticket_b_out_at?e(c)(e(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",ht,[kt,t("div",gt,l(e(r)(e(s).ticket_b_bruto||0)),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",yt,[Dt,t("div",Mt,l(e(r)(e(s).ticket_b_tara||0)),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",Yt,[jt,t("div",Bt,l(e(r)(e(s).ticket_b_netto||0)),1)])):i("",!0),t("div",Ht,[St,t("div",Tt,l(e(s).ticket_note),1)])])]),t("div",At,[t("div",Pt,[Ot,e(s).val||e(s).val1||e(s).val_ticket?(a(),_("div",Ct,[e(s).val?(a(),_("div",Nt," App 1 : "+l(e(s).val_by.username)+" ( "+l(e(s).val_at?e(c)(e(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0),e(s).val1?(a(),_("div",Kt," App 2 : "+l(e(s).val1_by.username)+" ( "+l(e(s).val1_at?e(c)(e(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0),e(s).val_ticket?(a(),_("div",It," App 3 : "+l(e(s).val_ticket_by.username)+" ( "+l(e(s).val_ticket_at?e(c)(e(s).val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0)])):i("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:f[0]||(f[0]=d=>n.fnClose())}," Cancel "),n.is_view==0?(a(),_("button",{key:0,ref_key:"it_val",ref:m,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:f[1]||(f[1]=O(d=>y(),["prevent"]))}," Validasi ",512)):i("",!0)])])])],512)),[[A,n.show]])}}},Gt=V(Vt,[["__scopeId","data-v-9ea471a7"]]);export{Gt as default};
