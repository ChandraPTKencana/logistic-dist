import{_ as C}from"./HeaderPopup.vue.108c9d97.js";import{r as _,f as S,j as k,m as v,J as B,o as A,c as $,a as t,b as V,k as u,v as j,t as q,x as D,A as d,B as m,p as F,e as I}from"./entry.9645ef05.js";import"./useUtils.9bbeec39.js";import{u as h}from"./useMyFetch.787bc913.js";import{_ as N}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.d5d32c69.js";const M=s=>(F("data-v-11d3de20"),s=s(),I(),s),P={class:"box-fixed"},z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},E={class:"w-full flex flex-col items-center grow overflow-auto"},T={class:"w-full flex flex-row flex-wrap"},U={class:"w-full flex flex-col flex-wrap p-1"},H=M(()=>t("label",{for:""},"No Pol",-1)),J={class:"text-red-500"},O={class:"w-full flex items-center justify-end"},G={__name:"vehicle",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(s){const o=s,c={id:-1,no_pol:""},a=_({...c}),p=S("token"),n=_({}),w=async()=>{d().loading_full=!0,n.value={};const l=new FormData;l.append("no_pol",a.value.no_pol);let e="post",r=o.id;r==0||(l.append("id",r),l.append("_method","PUT"));const{data:i,error:y,status:g}=await h("/vehicle",{method:e,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:l,retry:0});if(d().loading_full=!1,g.value==="error"){m().trigger(y,n);return}if(a.value.updated_at=i.value.updated_at,o.id<=0)a.value.id=i.value.id,a.value.created_at=i.value.created_at,o.p_data.unshift(a.value);else{let f=o.p_data.map(b=>b.id).indexOf(o.id);f>=-1&&o.p_data.splice(f,1,{...a.value})}o.fnClose()},x=async()=>{d().loading_full=!0;const{data:l,error:e,status:r}=await h("/vehicle",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(d().loading_full=!1,r.value==="error"){m().trigger(e);return}a.value=l.value.data};return k(()=>o.show,(l,e)=>{l==!0&&(a.value={...c},n.value={},o.id!=0&&x())},{immediate:!0}),(l,e)=>{const r=C;return v((A(),$("section",P,[t("div",null,[V(r,{title:"Form Vehicle",fn:s.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",z,[t("div",E,[t("div",T,[t("div",U,[H,v(t("input",{type:"text","onUpdate:modelValue":e[0]||(e[0]=i=>u(a).no_pol=i)},null,512),[[j,u(a).no_pol]]),t("p",J,q(u(n).no_pol),1)])])]),t("div",O,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:e[1]||(e[1]=i=>s.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:e[2]||(e[2]=D(i=>w(),["prevent"]))}," Save ")])])])],512)),[[B,s.show]])}}},Y=N(G,[["__scopeId","data-v-11d3de20"]]);export{Y as default};
