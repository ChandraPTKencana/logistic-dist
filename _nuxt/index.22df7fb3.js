import{g as _e,h as ue,r as a,C as ce,j as O,s as de,f as fe,J as me,c as v,b as i,a as e,w as B,t as y,l as t,k as pe,A as ve,m as ye,D as he,F as we,E as ge,q as xe,o as d,G as ke,z as H,B as T,H as be,x,y as j,_ as L}from"./entry.12334995.js";import De from"./Header.479496c0.js";import Ce from"./Plus.e3caf944.js";import Me from"./Eyes.aba614bd.js";import Ae from"./Signature.88d610d0.js";import{_ as Te}from"./client-only.e7de85ce.js";import Le from"./Search.d5edfe43.js";import Re from"./Line.b04ef005.js";import Ve from"./Check.e5d089d3.js";import{u as N}from"./useMyFetch.b8c93418.js";import"./_plugin-vue_export-helper.c27b6911.js";const ze=T(()=>L(()=>import("./fin_payment_req_trx_trps.543137aa.js"),["./fin_payment_req_trx_trps.543137aa.js","./HeaderPopup.vue.39a3d3fe.js","./Times.2c7e61c7.js","./_plugin-vue_export-helper.c27b6911.js","./entry.12334995.js","./entry.7cb82c40.css","./useUtils.4456ff4d.js","./useMyFetch.b8c93418.js"],import.meta.url).then(u=>u.default||u)),qe=T(()=>L(()=>import("./fin_payment_req_view.ae0b5b53.js"),["./fin_payment_req_view.ae0b5b53.js","./HeaderPopup.vue.39a3d3fe.js","./Times.2c7e61c7.js","./_plugin-vue_export-helper.c27b6911.js","./entry.12334995.js","./entry.7cb82c40.css","./Table2Column.8797b9f6.js","./Send.f5bcc036.js","./Refresh.297a6738.js","./useUtils.4456ff4d.js","./useMyFetch.b8c93418.js","./useDownload.174f4da2.js"],import.meta.url).then(u=>u.default||u)),Pe=T(()=>L(()=>import("./fin_payment_req_validasi.e695ce0a.js"),["./fin_payment_req_validasi.e695ce0a.js","./HeaderPopup.vue.39a3d3fe.js","./Times.2c7e61c7.js","./_plugin-vue_export-helper.c27b6911.js","./entry.12334995.js","./entry.7cb82c40.css","./useUtils.4456ff4d.js","./useMyFetch.b8c93418.js"],import.meta.url).then(u=>u.default||u)),Fe={class:"w-full h-full flex flex-col"},Se={class:"w-full flex grow flex-col overflow-auto h-0"},Ee={class:"w-full flex"},Ie={action:"#",class:"w-full flex"},Ye={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},$e=e("div",{class:"font-bold"}," Tgl Dari ",-1),Oe={class:"text-red-500"},Be={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},He=e("div",{class:"font-bold"}," Tgl Sampai ",-1),je={class:"text-red-500"},Ne={class:"grow p-1"},Ue=e("div",{class:"font-bold"}," Keyword ",-1),Je={class:"flex items-end p-1"},Ke={class:"w-full flex justify-center items-center grow h-0 p-1"},Ge={key:0,class:""},Ze={class:"tacky"},Qe=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App"),e("th",null,"ID"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),We=["onClick"],Xe={class:"flex items-center justify-center"},et={class:"bold"},ft={__name:"index",async setup(u){let h,R;const{$moment:w}=be(),s={};s._TimeZoneOffset=new Date().getTimezoneOffset(),s.sort="created_at:desc";const V=_e("token"),{data:U}=([h,R]=ue(async()=>xe(async()=>{let l=[];x().loading_full=!0;const{data:o,error:p,status:M}=await N("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${V.value}`,Accept:"application/json"},params:s,retry:0});return x().loading_full=!1,M.value==="error"?(j().trigger(p),{fin_payment_reqs:l}):(l=o.value.data,{fin_payment_reqs:l})},"$u2BOcRLizp")),h=await h,R(),h),_=a(U.value.fin_payment_reqs),m=a(""),k=a({field:"created_at",by:"desc"}),f=a(-1),r=a({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),z=a({}),c=a({from:"",to:""}),J=()=>{s.like="",m.value!=""&&(s.like=`id:%${m.value}%`),s.sort="",k.value.field&&(s.sort=k.value.field+":"+k.value.by),s.date_from=c.value.from?w(c.value.from).format("YYYY-MM-DD"):"",s.date_to=c.value.to?w(c.value.to).format("YYYY-MM-DD"):""},g=a(null),q=async()=>{x().loading_full=!0,r.value.may_get_data=!1,s.page=r.value.page,s.page==1&&(_.value=[]),s.first_row&&delete s.first_row,s.page>1&&(s.first_row=JSON.stringify(_.value[0]));const{data:l,error:o,status:p}=await N("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${V.value}`,Accept:"application/json"},params:s,retry:0});if(x().loading_full=!1,r.value.may_get_data=!0,p.value==="error"){j().trigger(o);return}r.value.page==1?(_.value=l.value.data,g.value&&(g.value.scrollTop=0)):r.value.page>1&&(_.value=[..._.value,...l.value.data]),l.value.data.length==0&&(r.value.is_last_record=!0)},K=async()=>{if(!r.value.may_get_data)return;let l=g.value;if(l.scrollLeft!=r.value.scrollLeft){r.value.scrollLeft=l.scrollLeft;return}r.value.is_last_record||!(Math.round(l.scrollTop)+l.clientHeight>=l.scrollHeight-1)||(r.value.page++,await q())},G=()=>{r.value.page=1,r.value.is_last_record=!1,J(),q()};ce();const b=a(!1),P=a(0),Z=a(0),Q=()=>{P.value=0,b.value=!0,Z.value=!1},{display:F}=O();de(O());const D=a(!1),S=a(0),W=()=>{f.value==-1?F({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=_.value[f.value].id,D.value=!0)},C=a(!1),E=a(0),X=()=>{f.value==-1?F({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=_.value[f.value].id,C.value=!0)},I=a(!1);a({}),a(!1);const ee=a("");return fe(()=>ee.value,l=>{l.trim().length>0?I.value=!0:I.value=!1},{immediate:!1}),(l,o)=>{const p=De,M=Ce,te=Me,oe=Ae,Y=me("vue-date-picker"),$=Te,ae=Le,se=Re,le=Ve,ne=ze,re=qe,ie=Pe;return d(),v("div",Fe,[i(p,{title:"List Payment Req"}),e("div",Se,[e("div",Ee,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[0]||(o[0]=n=>Q())},[i(M)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[1]||(o[1]=n=>W())},[i(te)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[2]||(o[2]=n=>X())},[i(oe)])]),e("form",Ie,[e("div",Ye,[$e,i($,null,{default:B(()=>[i(Y,{modelValue:t(c).from,"onUpdate:modelValue":o[3]||(o[3]=n=>t(c).from=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Oe,y(t(z).date_from),1)]),e("div",Be,[He,i($,null,{default:B(()=>[i(Y,{modelValue:t(c).to,"onUpdate:modelValue":o[4]||(o[4]=n=>t(c).to=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",je,y(t(z).date_to),1)]),e("div",Ne,[Ue,pe(e("input",{class:"",type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>ye(m)?m.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[ve,t(m)]])]),e("div",Je,[e("button",{class:"",type:"submit",name:"button",onClick:o[6]||(o[6]=he(n=>G(),["prevent"]))},[i(ae,{class:"text-2xl"})])])]),e("div",Ke,[t(_).length==0?(d(),v("div",Ge," Maaf Tidak Ada Record ")):(d(),v("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:K},[e("table",Ze,[Qe,e("tbody",null,[(d(!0),v(we,null,ge(t(_),(n,A)=>(d(),v("tr",{key:A,onClick:tt=>f.value=A,class:ke(t(f)==A?"active":"")},[e("td",null,[e("div",Xe,[n.val?(d(),H(le,{key:1})):(d(),H(se,{key:0}))])]),e("td",et,y(n.id),1),e("td",null,y(n.created_at?t(w)(n.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,y(n.updated_at?t(w)(n.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,We))),128))])])],544))])]),i(ne,{show:t(b),fnClose:()=>{b.value=!1},id:t(P),p_data:t(_)},null,8,["show","fnClose","id","p_data"]),i(re,{show:t(D),fnClose:()=>{D.value=!1},id:t(S)},null,8,["show","fnClose","id"]),i(ie,{show:t(C),fnClose:()=>{C.value=!1},id:t(E),p_data:t(_)},null,8,["show","fnClose","id","p_data"])])}}};export{ft as default};
