import{_ as vt}from"./Header.fb6d1560.js";import{_ as Fe}from"./Plus.7db820f1.js";import{_ as ft}from"./Edit.6faa7407.js";import{_ as mt}from"./Eyes.59b7d4ec.js";import{_ as bt}from"./Delete.395517c1.js";import{_ as xt}from"./Void.fafa95f0.js";import{_ as wt}from"./Signature.57c43f13.js";import{_ as yt}from"./PrinterEye.268602dd.js";import{_ as ht}from"./Line.a02c18c7.js";import{_ as gt}from"./Check.b7f7b61f.js";import{_ as kt}from"./TableView.be1a29ae.js";import{_ as $t}from"./PopupMini.vue.64f786e8.js";import{_ as Ue}from"./HeaderPopup.vue.bb27efcc.js";import{_ as Dt,a as At}from"./ToolsPopup.b833f498.js";import{_ as Ct}from"./client-only.d52566f1.js";import{r as v,f as $e,H as Pe,J as K,g as ie,L as Tt,o as c,c as m,h as O,v as Be,a as e,b as k,k as t,l as Se,t as d,j as Z,F as Q,n as ne,G as C,w as B,m as Re,x,y as R,p as Ye,e as Ee,M as Ie,s as qe,D as Pt,I as St,i as Te,d as L,q as qt,E as Vt,K as oe}from"./entry.22dc794b.js";import{u as Ve}from"./useUtils.c56abbbd.js";import{u as Y}from"./useMyFetch.7b4ad0a6.js";import{_ as ze}from"./_plugin-vue_export-helper.c27b6911.js";import{u as Ot}from"./useDownload.737fa5e3.js";import"./Search.2f2ab052.js";import"./Times.2a09b75a.js";const w=D=>(Ye("data-v-09051475"),D=D(),Ee(),D),jt={class:"box-fixed"},Mt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Nt={class:"w-full flex flex-col items-center grow overflow-auto"},Ft={class:"w-full flex flex-row flex-wrap"},Ut={class:"w-full sm:w-3/12 flex px-2 py-3"},Bt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Rt=w(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),Yt={class:"w-6/12 flex flex-col flex-wrap p-1"},Et=w(()=>e("label",{for:""},"Tujuan",-1)),It=Ie('<option value="" data-v-09051475></option><option value="KPN" data-v-09051475>KPN</option><option value="KAS" data-v-09051475>KAS</option><option value="KUS" data-v-09051475>KUS</option><option value="ARP" data-v-09051475>ARP</option><option value="KAP" data-v-09051475>KAP</option><option value="SMP" data-v-09051475>SMP</option>',7),zt=[It],Kt={class:"text-red-500"},Ht={class:"w-6/12 flex flex-col flex-wrap p-1"},Lt=w(()=>e("label",{for:""},"Tipe",-1)),Jt=["disabled"],Gt=w(()=>e("option",{value:""},null,-1)),Xt=w(()=>e("option",{value:"From"},"Dari",-1)),Zt=w(()=>e("option",{value:"To"},"Ke",-1)),Qt=[Gt,Xt,Zt],Wt={class:"text-red-500"},el={class:"w-full sm:w-9/12 flex px-2 py-3"},tl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ll=w(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),al={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},sl=w(()=>e("label",{for:""},"ID",-1)),ol=["disabled"],nl={id:"standby_mst"},dl=["value"],rl={class:"text-red-500"},il={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_l=w(()=>e("label",{for:""},"Name",-1)),ul={class:"card-border disabled"},cl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},pl=w(()=>e("label",{for:""},"Type",-1)),vl={class:"card-border disabled"},fl={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ml=w(()=>e("label",{for:""},"Amount",-1)),bl={class:"card-border disabled"},xl={class:"w-full flex flex-wrap"},wl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yl=w(()=>e("label",{for:""},"Supir",-1)),hl=["disabled"],gl={id:"supir"},kl=["value"],$l={class:"text-red-500"},Dl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Al=w(()=>e("label",{for:""},"Kernet",-1)),Cl=["disabled"],Tl={id:"kernet"},Pl=["value"],Sl={class:"text-red-500"},ql={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Vl=w(()=>e("label",{for:""},"No Pol",-1)),Ol=["disabled"],jl={id:"vehicle"},Ml=["value"],Nl={class:"text-red-500"},Fl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ul=w(()=>e("label",{for:""},"Tujuan",-1)),Bl=["disabled"],Rl={id:"xto"},Yl={class:"text-red-500"},El={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Il=w(()=>e("label",{for:""},"Note For Remarks",-1)),zl=["disabled"],Kl={class:"text-red-500"},Hl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ll=w(()=>e("label",{for:""},"Referensi",-1)),Jl=["disabled"],Gl={class:"text-red-500"},Xl={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Zl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ql=w(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Wl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ea=w(()=>e("label",{for:""}," Code",-1)),ta=["disabled"],la={id:"cost_center"},aa=["value"],sa={class:"text-red-500"},oa={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},na=w(()=>e("label",{for:""},"Desc",-1)),da={class:"card-border disabled"},ra={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ia={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},_a=w(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),ua={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ca=w(()=>e("label",{for:""},"No",-1)),pa={class:"card-border disabled"},va={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},fa=w(()=>e("label",{for:""},"Total",-1)),ma={class:"card-border disabled"},ba={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},xa={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},wa=w(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ya={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ha=w(()=>e("label",{for:""},"No",-1)),ga={class:"card-border disabled"},ka={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},$a=w(()=>e("label",{for:""},"Total",-1)),Da={class:"card-border disabled"},Aa={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},Ca={class:"w-full",role:"sticky"},Ta={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Pa={class:"sticky -top-1 !z-[2]"},Sa=["colspan"],qa={class:"sticky top-7 !z-[2]"},Va={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},Oa=w(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),ja=w(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),Ma=w(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan",-1)),Na={ref:"to_move"},Fa=["data-index"],Ua={key:0,class:"tools cell"},Ba={class:"w-full h-full flex items-center justify-center"},Ra=["onClick"],Ya={class:"cell"},Ea={class:"w-full h-full flex items-center justify-center relative"},Ia={class:"cell"},za={class:"w-full h-full flex items-center justify-center"},Ka=["disabled","onUpdate:modelValue"],Ha={key:0},La={class:"tools cell"},Ja={class:"w-full flex items-center justify-end"},Ga={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(D){const y=D,{$moment:W}=qe(),{pointFormat:J}=Ve(),_e={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[]},o=v([]),ee=v({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});let T={..._e};const l=v({..._e}),ae=$e("token"),A=v({});Pe();const E=async()=>{x().loading_full=!0,A.value={};const r=new FormData;r.append("transition_target",l.value.transition_target),r.append("transition_type",l.value.transition_type),r.append("standby_mst_id",l.value.standby_mst_id),r.append("supir",l.value.supir),r.append("kernet",l.value.kernet),r.append("no_pol",l.value.no_pol),r.append("xto",l.value.xto),r.append("note_for_remarks",l.value.note_for_remarks),r.append("ref",l.value.ref),r.append("cost_center_code",l.value.cost_center_code),r.append("online_status",y.online_status);let u=[...o.value];u=u.map(H=>(H.tanggal=W(H.tanggal).format("Y-MM-DD"),H)),r.append("details",JSON.stringify(u));let S="post",N=y.id;N==0||(r.append("id",N),r.append("_method","PUT"));const{data:F,error:fe,status:me}=await Y("/standby_trx",{method:S,headers:{Authorization:`Bearer ${ae.value}`,Accept:"application/json"},body:r,retry:0});if(x().loading_full=!1,me.value==="error"){R().trigger(fe,A);return}if(l.value.updated_at=F.value.updated_at,y.id<=0)l.value.id=F.value.id,l.value.created_at=F.value.created_at,y.p_data.unshift(l.value);else{let H=y.p_data.map(de=>de.id).indexOf(y.id);H>=-1&&y.p_data.splice(H,1,{...l.value})}y.fnClose()},q=K(()=>[...new Set(z.value.filter(r=>r.role=="Supir"))]),h=K(()=>[...new Set(z.value.filter(r=>r.role=="Kernet"))]),j=K(()=>!1),n=async()=>{x().loading_full=!0;const{data:r,error:u,status:S}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${ae.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(x().loading_full=!1,S.value==="error"){R().trigger(u);return}l.value=r.value.data,T={...r.value.data};let N="Edit";o.value=r.value.data.details.map(F=>(F.p_status=N,F.key=F.ordinal,F))},G=v([]),V=v([]),I=v([]),z=v([]),_=async()=>{x().loading_full=!0;const{data:r,error:u,status:S}=await Y("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${ae.value}`,Accept:"application/json"},retry:0});if(x().loading_full=!1,S.value==="error"){R().trigger(u);return}G.value=r.value.list_standby_mst,V.value=r.value.list_xto,I.value=r.value.list_vehicle,z.value=r.value.list_employee},b=v(-1),M=v(!1),we=v({left:0,top:0}),ye=(r,u)=>{b.value=u,M.value=!0,we.value={left:r.clientX,top:r.clientY}},he=()=>{o.value.push({...ee.value,p_status:"Add"})},ue=()=>{M.value=!1},ve=(r="")=>{if(r=="insert")o.value.splice(b.value,0,{...ee.value,p_status:"Add"});else if(r=="delete")o.value[b.value].p_status=="Edit"?o.value[b.value].p_status="Remove":o.value.splice(b.value,1);else if(r=="move_top"){let u=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value-1,0,{...u})}else if(r=="move_bottom"){let u=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value+1,0,{...u})}M.value=!1};ie(()=>y.show,async(r,u)=>{r==!0&&(await _(),await y.fnLoadDBData(),A.value={},l.value={..._e},o.value=[],y.id!=0&&n())},{immediate:!0});let De={name:"",tipe:"",amount:0};return ie(()=>l.value.standby_mst_id,(r,u)=>{if(r==""||r!=""){let S=G.value.filter(N=>N.id==r);S.length>0?l.value.standby_mst_={...S[0]}:l.value.standby_mst_id==T.standby_mst_id?l.value.standby_mst_={...T.standby_mst_}:l.value.standby_mst_={...De}}},{}),ie(()=>l.value.cost_center_code,(r,u)=>{if(r==""&&(l.value.cost_center_desc=""),r){let S=y.list_cost_center.filter(N=>N.CostCenter==r);S.length>0?l.value.cost_center_desc=S[0].Description:l.value.cost_center_code==T.cost_center_code&&(l.value.cost_center_desc=T.cost_center_desc)}},{deep:!0,immediate:!0}),(r,u)=>{var de,se,te;const S=Ue,N=Dt,F=Tt("vue-date-picker"),fe=Ct,me=Fe,H=At;return c(),m(Q,null,[O(e("section",jt,[e("div",null,[k(S,{title:"Form Transaction",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Mt,[e("div",Nt,[e("div",Ft,[e("div",Ut,[e("div",Bt,[Rt,e("div",Yt,[Et,O(e("select",{"onUpdate:modelValue":u[0]||(u[0]=i=>t(l).transition_target=i)},zt,512),[[Se,t(l).transition_target]]),e("p",Kt,d(t(A).transition_target),1)]),e("div",Ht,[Lt,O(e("select",{"onUpdate:modelValue":u[1]||(u[1]=i=>t(l).transition_type=i),disabled:t(l).pvr_no!=""},Qt,8,Jt),[[Se,t(l).transition_type]]),e("p",Wt,d(t(A).transition_type),1)])])]),e("div",el,[e("div",tl,[ll,e("div",al,[sl,O(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":u[2]||(u[2]=i=>t(l).standby_mst_id=i),disabled:t(l).pvr_no!=""},null,8,ol),[[Z,t(l).standby_mst_id]]),e("datalist",nl,[(c(!0),m(Q,null,ne(t(G),i=>(c(),m("option",{value:i.id},d(i.name+"-"+i.tipe+"-"+t(J)(i.amount||0)),9,dl))),256))]),e("p",rl,d(t(A).standby_mst_id),1)]),e("div",il,[_l,e("div",ul,d((de=t(l).standby_mst_)==null?void 0:de.name),1)]),e("div",cl,[pl,e("div",vl,d((se=t(l).standby_mst_)==null?void 0:se.tipe),1)]),e("div",fl,[ml,e("div",bl,d(t(J)((te=t(l).standby_mst_)==null?void 0:te.amount)),1)])])]),e("div",xl,[e("div",wl,[yl,O(e("input",{type:"text",list:"supir","onUpdate:modelValue":u[3]||(u[3]=i=>t(l).supir=i),disabled:t(l).pvr_no!=""},null,8,hl),[[Z,t(l).supir]]),e("datalist",gl,[(c(!0),m(Q,null,ne(t(q),i=>(c(),m("option",{value:i.name},d(i.name),9,kl))),256))]),e("p",$l,d(t(A).supir),1)]),e("div",Dl,[Al,O(e("input",{type:"text",list:"kernet","onUpdate:modelValue":u[4]||(u[4]=i=>t(l).kernet=i),disabled:t(l).pvr_no!=""},null,8,Cl),[[Z,t(l).kernet]]),e("datalist",Tl,[(c(!0),m(Q,null,ne(t(h),i=>(c(),m("option",{value:i.name},d(i.name),9,Pl))),256))]),e("p",Sl,d(t(A).kernet),1)]),e("div",ql,[Vl,O(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":u[5]||(u[5]=i=>t(l).no_pol=i),disabled:t(l).pvr_no!=""},null,8,Ol),[[Z,t(l).no_pol]]),e("datalist",jl,[(c(!0),m(Q,null,ne(t(I),i=>(c(),m("option",{value:i.no_pol},d(i.no_pol),9,Ml))),256))]),e("p",Nl,d(t(A).no_pol),1)]),e("div",Fl,[Ul,O(e("input",{type:"text",list:"xto","onUpdate:modelValue":u[6]||(u[6]=i=>t(l).xto=i),disabled:t(l).pvr_no!=""},null,8,Bl),[[Z,t(l).xto]]),e("datalist",Rl,[(c(!0),m(Q,null,ne(t(V),i=>(c(),m("option",null,d(i),1))),256))]),e("p",Yl,d(t(A).xto),1)]),e("div",El,[Il,O(e("textarea",{"onUpdate:modelValue":u[7]||(u[7]=i=>t(l).note_for_remarks=i),disabled:t(l).pvr_no!=""}," ",8,zl),[[Z,t(l).note_for_remarks]]),e("p",Kl,d(t(A).note_for_remarks),1)]),e("div",Hl,[Ll,O(e("input",{type:"text","onUpdate:modelValue":u[8]||(u[8]=i=>t(l).ref=i),disabled:t(l).pvr_no!=""},null,8,Jl),[[Z,t(l).ref]]),e("p",Gl,d(t(A).ref),1)])]),e("div",Xl,[e("div",Zl,[Ql,e("div",Wl,[ea,O(e("input",{list:"cost_center","onUpdate:modelValue":u[9]||(u[9]=i=>t(l).cost_center_code=i),disabled:t(l).pvr_no!=""},null,8,ta),[[Z,t(l).cost_center_code]]),e("datalist",la,[(c(!0),m(Q,null,ne(D.list_cost_center,i=>(c(),m("option",{value:i.CostCenter},d(i.CostCenter+"-"+i.Description),9,aa))),256))]),e("p",sa,d(t(A).cost_center_code),1)]),e("div",oa,[na,e("div",da,d(t(l).cost_center_desc),1)])])]),e("div",ra,[e("div",ia,[_a,e("div",ua,[ca,e("div",pa,d(t(l).pvr_no),1)]),e("div",va,[fa,e("div",ma,d(t(J)(t(l).pvr_total||0)),1)])])]),e("div",ba,[e("div",xa,[wa,e("div",ya,[ha,e("div",ga,d(t(l).pv_no),1)]),e("div",ka,[$a,e("div",Da,d(t(J)(t(l).pv_total)),1)])])]),e("div",Aa,[e("div",Ca,[e("table",Ta,[e("thead",null,[e("tr",Pa,[e("td",{colspan:t(j)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,Sa)]),e("tr",qa,[t(j)?C("",!0):(c(),m("th",Va)),Oa,ja,Ma])]),e("tbody",Na,[(c(!0),m(Q,null,ne(t(o),(i,ce)=>(c(),m(Q,{key:ce},[i.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":ce},[t(j)?C("",!0):(c(),m("td",Ua,[e("div",Ba,[e("button",{type:"button",name:"button",onClick:re=>ye(re,ce)},[k(N)],8,Ra)])])),e("td",null,d(ce+1)+".",1),e("td",Ya,[e("div",Ea,[k(fe,null,{default:B(()=>[k(F,{modelValue:i.tanggal,"onUpdate:modelValue":re=>i.tanggal=re,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),e("td",Ia,[e("div",za,[O(e("textarea",{disabled:t(j),class:"p-1 w-full","onUpdate:modelValue":re=>i.note=re,cols:"7",rows:"2"},null,8,Ka),[[Z,i.note]])])])],8,Fa)):C("",!0)],64))),128)),t(j)?C("",!0):(c(),m("tr",Ha,[e("td",La,[e("button",{type:"button",name:"button",onClick:u[10]||(u[10]=i=>he())},[k(me)])])]))],512)])])])])]),e("div",Ja,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:u[11]||(u[11]=i=>D.fnClose())}," Cancel "),t(j)?C("",!0):(c(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:u[12]||(u[12]=Re(i=>E(),["prevent"]))}," Save "))])])])],512),[[Be,D.show]]),k(H,{show:t(M),coor:t(we),fn:ue,data:t(o),data_index:t(b),onReplyAct:u[13]||(u[13]=i=>ve(i))},null,8,["show","coor","data","data_index"])],64)}}},Xa=ze(Ga,[["__scopeId","data-v-09051475"]]);const g=D=>(Ye("data-v-056c1dac"),D=D(),Ee(),D),Za={class:"box-fixed"},Qa={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Wa={class:"w-full flex flex-col items-center grow overflow-auto"},es={class:"w-full flex flex-row flex-wrap"},ts={class:"w-full sm:w-3/12 flex px-2 py-3"},ls={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},as=g(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ss={class:"w-6/12 flex flex-col flex-wrap p-1"},os=g(()=>e("label",{for:""},"Tujuan",-1)),ns={class:"card-border"},ds={class:"w-6/12 flex flex-col flex-wrap p-1"},rs=g(()=>e("label",{for:""},"Tipe",-1)),is={class:"card-border"},_s={class:"w-full sm:w-9/12 flex px-2 py-3"},us={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},cs=g(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),ps={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},vs=g(()=>e("label",{for:""},"ID",-1)),fs={class:"card-border"},ms={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},bs=g(()=>e("label",{for:""},"Name",-1)),xs={class:"card-border"},ws={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ys=g(()=>e("label",{for:""},"Type",-1)),hs={class:"card-border"},gs={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ks=g(()=>e("label",{for:""},"Amount",-1)),$s={class:"card-border"},Ds={class:"w-full flex flex-wrap"},As={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Cs=g(()=>e("label",{for:""},"Supir",-1)),Ts={class:"card-border"},Ps={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ss=g(()=>e("label",{for:""},"Kernet",-1)),qs={class:"card-border"},Vs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Os=g(()=>e("label",{for:""},"No Pol",-1)),js={class:"card-border"},Ms={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ns=g(()=>e("label",{for:""},"Tujuan",-1)),Fs={class:"card-border"},Us={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bs=g(()=>e("label",{for:""},"Note For Remarks",-1)),Rs={class:"card-border"},Ys={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Es=g(()=>e("label",{for:""},"Referensi",-1)),Is={class:"card-border"},zs={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Ks={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Hs=g(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Ls={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Js=g(()=>e("label",{for:""}," Code",-1)),Gs={class:"card-border"},Xs={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Zs=g(()=>e("label",{for:""},"Desc",-1)),Qs={class:"card-border disabled"},Ws={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},eo={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},to=g(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),lo={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ao=g(()=>e("label",{for:""},"No",-1)),so={class:"card-border disabled"},oo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},no=g(()=>e("label",{for:""},"Total",-1)),ro={class:"card-border disabled"},io={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},_o={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},uo=g(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),co={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},po=g(()=>e("label",{for:""},"No",-1)),vo={class:"card-border disabled"},fo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},mo=g(()=>e("label",{for:""},"Total",-1)),bo={class:"card-border disabled"},xo={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},wo={class:"w-full",role:"sticky"},yo={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},ho={class:"sticky -top-1 !z-[2]"},go=["colspan"],ko=g(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),$o={ref:"to_move"},Do=["data-index"],Ao={class:"cell"},Co={class:"w-full h-full flex items-center justify-center relative"},To={class:"cell"},Po={class:"w-full h-full flex items-center justify-center"},So={class:"w-full flex items-center justify-end"},qo={class:"w-full flex flex-wrap p-3 items-center"},Vo=g(()=>e("div",null," Di Validasi oleh : ",-1)),Oo={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},jo={key:0},Mo={key:1},No={key:2},Fo={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(D){const y=D,{$moment:W}=qe(),{pointFormat:J}=Ve(),o=v({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),ee=$e("token"),T=v({}),l=v([]),ae=async()=>{x().loading_full=!0,T.value={};const q=new FormData;let h="post",j=y.id;j==0||(q.append("id",j),q.append("_method","PUT"));const{data:n,error:G,status:V}=await Y("/standby_trx_validasi",{method:h,headers:{Authorization:`Bearer ${ee.value}`,Accept:"application/json"},body:q,retry:0});if(x().loading_full=!1,V.value==="error"){R().trigger(G,T);return}o.value.val=n.value.val,o.value.val_user=n.value.val_user,o.value.val_by=n.value.val_by,o.value.val_at=n.value.val_at,o.value.val1=n.value.val1,o.value.val1_user=n.value.val1_user,o.value.val1_by=n.value.val1_by,o.value.val1_at=n.value.val1_at,o.value.val2=n.value.val2,o.value.val2_user=n.value.val2_user,o.value.val2_by=n.value.val2_by,o.value.val2_at=n.value.val2_at;let I=y.p_data.map(z=>z.id).indexOf(y.id);I>=-1&&y.p_data.splice(I,1,{...o.value}),y.fnClose()},A=async()=>{x().loading_full=!0;const{data:q,error:h,status:j}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${ee.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(x().loading_full=!1,j.value==="error"){R().trigger(h);return}o.value=q.value.data,l.value=q.value.data.details};K(()=>{let q=0;return l.value.forEach(h=>{h.p_status!="Remove"&&(q+=h.amount)}),q});const E=K(()=>!1);return ie(()=>y.show,(q,h)=>{q==!0&&A()},{immediate:!0}),(q,h)=>{var n,G,V;const j=Ue;return O((c(),m("section",Za,[e("div",null,[k(j,{title:"Form Transaction Standby Validation",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Qa,[e("div",Wa,[e("div",es,[e("div",ts,[e("div",ls,[as,e("div",ss,[os,e("div",ns,d(t(o).transition_target),1)]),e("div",ds,[rs,e("div",is,d(t(o).transition_type),1)])])]),e("div",_s,[e("div",us,[cs,e("div",ps,[vs,e("div",fs,d(t(o).standby_mst_id),1)]),e("div",ms,[bs,e("div",xs,d((n=t(o).standby_mst_)==null?void 0:n.name),1)]),e("div",ws,[ys,e("div",hs,d((G=t(o).standby_mst_)==null?void 0:G.tipe),1)]),e("div",gs,[ks,e("div",$s,d(t(J)((V=t(o).standby_mst_)==null?void 0:V.amount)),1)])])]),e("div",Ds,[e("div",As,[Cs,e("div",Ts,d(t(o).supir),1)]),e("div",Ps,[Ss,e("div",qs,d(t(o).kernet),1)]),e("div",Vs,[Os,e("div",js,d(t(o).no_pol),1)]),e("div",Ms,[Ns,e("div",Fs,d(t(o).xto),1)]),e("div",Us,[Bs,e("div",Rs,d(t(o).note_for_remarks),1)]),e("div",Ys,[Es,e("div",Is,d(t(o).ref),1)])]),e("div",zs,[e("div",Ks,[Hs,e("div",Ls,[Js,e("div",Gs,d(t(o).cost_center_code),1)]),e("div",Xs,[Zs,e("div",Qs,d(t(o).cost_center_desc),1)])])]),e("div",Ws,[e("div",eo,[to,e("div",lo,[ao,e("div",so,d(t(o).pvr_no),1)]),e("div",oo,[no,e("div",ro,d(t(J)(t(o).pvr_total||0)),1)])])]),e("div",io,[e("div",_o,[uo,e("div",co,[po,e("div",vo,d(t(o).pv_no),1)]),e("div",fo,[mo,e("div",bo,d(t(J)(t(o).pv_total)),1)])])]),e("div",xo,[e("div",wo,[e("table",yo,[e("thead",null,[e("tr",ho,[e("td",{colspan:t(E)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,go)]),ko]),e("tbody",$o,[(c(!0),m(Q,null,ne(t(l),(I,z)=>(c(),m(Q,{key:z},[I.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":z},[e("td",null,d(z+1)+".",1),e("td",Ao,[e("div",Co,d(t(W)(I.tanggal).format("DD-MM-YYYY")),1)]),e("td",To,[e("div",Po,d(I.note),1)])],8,Do)):C("",!0)],64))),128))],512)])])])])]),e("div",So,[e("div",qo,[Vo,t(o).val||t(o).val1||t(o).val2?(c(),m("div",Oo,[t(o).val?(c(),m("div",jo," App 1 : "+d(t(o).val_by.username)+" ( "+d(t(o).val_at?t(W)(t(o).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):C("",!0),t(o).val1?(c(),m("div",Mo," App 2 : "+d(t(o).val1_by.username)+" ( "+d(t(o).val1_at?t(W)(t(o).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):C("",!0),t(o).val2?(c(),m("div",No," App 2 : "+d(t(o).val2_by.username)+" ( "+d(t(o).val2_at?t(W)(t(o).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):C("",!0)])):C("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:h[0]||(h[0]=I=>D.fnClose())}," Cancel "),D.is_view==0?(c(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:h[1]||(h[1]=Re(I=>ae(),["prevent"]))}," Validasi ")):C("",!0)])])])],512)),[[Be,D.show]])}}},Uo=ze(Fo,[["__scopeId","data-v-056c1dac"]]),Bo={class:"w-full h-full flex flex-col"},Ro={class:"w-full flex grow flex-col overflow-auto h-0"},Yo={class:"w-full flex justify-between flex-wrap"},Eo={class:"grow flex"},Io={class:"m-1"},zo=Ie('<option value="trx_not_done">Undone</option><option value="trx_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Ko=[zo],Ho={key:0,class:"flex"},Lo=e("span",{class:"text-xs"},"Mode",-1),Jo={class:"grow mb-5"},Go=e("b",null,"tidak dapat dibatalkan lagi",-1),Xo={class:"grow mb-5"},Zo=e("b",null,"tidak dapat dibatalkan lagi",-1),hn={__name:"trx",async setup(D){let y,W;const{$moment:J}=qe(),{pointFormat:_e}=Ve(),o=a=>a.deleted==1?"!bg-red-400":a.pvr_id>0&&a.req_deleted==1?"!bg-yellow-300":a.pv_id>0?"!bg-blue-300":"",ee=a=>(a.map(s=>{s.class_h=o(s)}),a),T=v("trx_not_done");ie(()=>T.value,a=>{Me.value.map(s=>{let $=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(s.key)>-1;return["all","deleted","req_deleted"].indexOf(a)>-1?$&&(s.tbl_show=1):$&&(s.tbl_show=0),s}),he()},{immediate:!1});const l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const ae=v({}),A=v({from:"",to:""}),E=$e("token"),q=$e("role"),h=a=>a.includes(q.value),{data:j}=([y,W]=Pt(async()=>Vt(async()=>{x().loading_full=!0;let a=[];const[s,$]=await Promise.all([Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{filter_status:T},retry:0})]);return s.status.value!=="error"&&(a=ee(s.data.value.data)),s.status.value==="error"?(R().trigger(s.error),{standby_trxs:a}):(x().loading_full=!1,{standby_trxs:a})},"$rVBHTgwE0s")),y=await y,W(),y),n=v(j.value.standby_trxs||[]),G=v([]),V=v(!1),I=async()=>{x().loading_full=!0;const{data:a,error:s,status:$}=await Y("/standby_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{online_status:V.value},retry:0});if(x().loading_full=!1,$.value==="error"){R().trigger(s);return}G.value=a.value.list_cost_center},z=v({field:"tanggal",by:"desc"}),_=v(-1),b=K(()=>n.value[_.value]),M=v({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),we=()=>{l.like="";let a=JSON.parse(JSON.stringify(x()._tv.global_keyword));a!=""&&(l.like=`id:%${a}%,transition_target:%${a}%,transition_type:%${a}%,standby_mst_name:%${a}%,standby_mst_type:%${a}%,supir:%${a}%,kernet:%${a}%,no_pol:%${a}%,xto:%${a}%,pvr_no:%${a}%,pv_no:%${a}%,pvr_no:%${a}%,tanggal:%${a}%,transition_to:%${a}%,cost_center_code:%${a}%`),l.sort="",z.value.field&&(l.sort=z.value.field+":"+z.value.by),l.date_from=A.value.from?J(A.value.from).format("YYYY-MM-DD"):"",l.date_to=A.value.to?J(A.value.to).format("YYYY-MM-DD"):"",l.filter_model=JSON.stringify(x()._tv.filter_model)},ye=async()=>{x().loading_full=!0,ae.value={},M.value.may_get_data=!1,l.page=M.value.page,l.page==1&&(n.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(n.value[0])),l.filter_status=T.value;const{data:a,error:s,status:$}=await Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:l,retry:0});if(x().loading_full=!1,M.value.may_get_data=!0,$.value==="error"){R().trigger(s,ae);return}M.value.page==1?n.value=ee(a.value.data):M.value.page>1&&(n.value=[...n.value,...ee(a.value.data)]),a.value.data.length==0&&(M.value.is_last_record=!0),x()._tv.filter_box=!1},he=()=>{_.value=-1,M.value.page=1,M.value.is_last_record=!1,we(),ye()},ue=v(!1),ve=v(0),De=()=>{ve.value=0,ue.value=!0},{display:r}=Pe();St(Pe());const u=()=>{_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ve.value=n.value[_.value].id,ue.value=!0)},S=v(!1),N=v(0),F=v(!1),fe=()=>{_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[_.value].id,S.value=!0,F.value=!1)},me=()=>{_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[_.value].id,S.value=!0,F.value=!0)},H=v(!1),de=v({}),se=v(!1),te=v(""),i=async()=>{se.value&&(se.value=!1)},ce=()=>{_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value="",de.value={id:n.value[_.value].id,"no pol":n.value[_.value].no_pol,tujuan:n.value[_.value].xto},se.value=!0)};ie(()=>te.value,a=>{a.trim().length>0?H.value=!0:H.value=!1},{immediate:!1});const re=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",n.value[_.value].id),a.append("deleted_reason",te.value),a.append("_method","DELETE");const{data:s,error:$,status:X}=await Y("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,X.value==="error"){R().trigger($);return}let p={...n.value[_.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),T.value!="all"?n.value.splice(_.value,1):n.value.splice(_.value,1,{...p}),_.value=-1,se.value=!1},Ae=v(!1),Oe=v({}),be=v(!1),pe=v(""),Ke=async()=>{be.value&&(be.value=!1)},He=()=>{_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(pe.value="",Oe.value={id:n.value[_.value].id,"no pol":n.value[_.value].no_pol,tujuan:n.value[_.value].xto},be.value=!0)},je=v({}),xe=v(!1),Le=v(""),Je=async()=>{xe.value&&(xe.value=!1)},Ge=()=>{var a;_.value==-1?r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Le.value="",je.value={id:n.value[_.value].id,"no pol":n.value[_.value].no_pol,tujuan:n.value[_.value].xto,permintaan:(a=n.value[_.value].approve_void_by)==null?void 0:a.username,alasan:n.value[_.value].approve_void_reason},xe.value=!0)},Xe=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",n.value[_.value].id),a.append("_method","DELETE");const{data:s,error:$,status:X}=await Y("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,X.value==="error"){R().trigger($);return}let p={...n.value[_.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),T.value!="all"?n.value.splice(_.value,1):n.value.splice(_.value,1,{...p}),_.value=-1,xe.value=!1};ie(()=>pe.value,a=>{a.trim().length>0?Ae.value=!0:Ae.value=!1},{immediate:!1});const Ze=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",n.value[_.value].id),a.append("req_deleted_reason",pe.value),a.append("_method","DELETE");const{data:s,error:$,status:X}=await Y("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,X.value==="error"){R().trigger($);return}let p={...n.value[_.value]};p.req_deleted=s.value.req_deleted,p.req_deleted_user=s.value.req_deleted_user,p.req_deleted_by=s.value.req_deleted_by,p.req_deleted_at=s.value.req_deleted_at,p.req_deleted_reason=s.value.req_deleted_reason,p.class_h=o(p),T.value!="all"?n.value.splice(_.value,1):n.value.splice(_.value,1,{...p}),_.value=-1,be.value=!1},{printHtml:Qe}=Ot(),We=async()=>{if(_.value==-1){r({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}x().loading_full=!0;const{data:a,error:s,status:$}=await Y("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{id:n.value[_.value].id},retry:0});if(x().loading_full=!1,$.value==="error"){R().trigger(s);return}Qe(a.value.html,318)},et=async()=>{x().loading_full=!0;const a=new FormData;a.append("online_status",V.value);const{data:s,error:$,status:X}=await Y("/standby_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,X.value==="error"){R().trigger($);return}s.value.forEach(p=>{let le=n.value.map(P=>P.id).indexOf(p.id);if(le!==-1){let P=n.value[le];P.pvr_id=p.pvr_id,P.pvr_no=p.pvr_no,P.pvr_total=p.pvr_total,P.pvr_had_detail=p.pvr_had_detail,P.updated_at=p.updated_at,n.value.splice(le,1,{...P})}}),r({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},tt=async()=>{x().loading_full=!0;const a=new FormData;a.append("online_status",V.value);const{data:s,error:$,status:X}=await Y("/standby_trx_do_update_pv",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,X.value==="error"){R().trigger($);return}s.value.data.forEach(p=>{let le=n.value.map(P=>P.id).indexOf(p.id);if(le!==-1){let P=n.value[le];P.pv_id=p.pv_id,P.pv_no=p.pv_no,P.pv_total=p.pv_total,P.pv_datetime=p.pv_datetime,P.updated_at=p.updated_at,n.value.splice(le,1,{...P})}}),r({show:!0,status:"Success",message:"Update PV Done"})},Me=v([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"standby_mst_name",label:"Nama Standby",filter_on:1,type:"string"},{key:"standby_mst_type",label:"Tipe Standby",filter_on:1,type:"string"},{key:"standby_mst_amount",label:"Total Standby",class:" justify-end",filter_on:1,type:"number"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"ref",label:"Ref"},{key:"transition_target",label:"Tujuan Pengalihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),lt=K(()=>["trx_not_done","all"].indexOf(T.value)>-1&&h(["PabrikTransport"])),at=K(()=>h(["PabrikTransport"])&&_.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,0].indexOf(b.value.val)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),st=K(()=>_.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&(h(["PabrikTransport"])&&[void 0,0].indexOf(b.value.val)>-1||h(["PabrikMandor"])&&[void 0,0].indexOf(b.value.val1)>-1||h(["Logistic"])&&[void 0,0].indexOf(b.value.val2)>-1)&&[void 0,""].indexOf(b.value.pvr_id)>-1),ot=K(()=>h(["PabrikTransport"])&&_.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),nt=K(()=>h(["PabrikTransport"])&&_.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.pvr_id!=""),dt=K(()=>h(["Logistic"])&&_.value>-1&&b.value.deleted==0&&b.value.req_deleted==1&&b.value.val2==0),rt=K(()=>h(["PabrikTransport"])&&_.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.val==1);return(a,s)=>{const $=vt,X=Fe,p=ft,le=mt,P=bt,Ne=xt,it=wt,_t=yt,ge=ht,ke=gt,ut=kt,Ce=$t,ct=Xa,pt=Uo;return c(),m("div",Bo,[k($,{title:"List Transaction"}),e("div",Ro,[e("div",Yo,[e("div",Eo,[e("div",Io,[O(e("select",{class:"","onUpdate:modelValue":s[0]||(s[0]=f=>Te(T)?T.value=f:null)},Ko,512),[[Se,t(T)]])]),t(lt)?(c(),m("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[1]||(s[1]=f=>De())},[k(X)])):C("",!0),t(at)?(c(),m("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[2]||(s[2]=f=>u())},[k(p)])):C("",!0),t(_)>-1?(c(),m("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[3]||(s[3]=f=>me())},[k(le)])):C("",!0),t(ot)?(c(),m("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[4]||(s[4]=f=>ce())},[k(P)])):C("",!0),t(nt)?(c(),m("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[5]||(s[5]=f=>He())},[k(Ne)])):C("",!0),t(dt)?(c(),m("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[6]||(s[6]=f=>Ge())},[k(Ne)])):C("",!0),t(st)?(c(),m("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[7]||(s[7]=f=>fe())},[k(it)])):C("",!0),t(rt)?(c(),m("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[8]||(s[8]=f=>We())},[k(_t)])):C("",!0)]),h(["PabrikTransport"])?(c(),m("div",Ho,[e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[9]||(s[9]=f=>et())}," Gen/Update PVR "),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[10]||(s[10]=f=>tt())}," Update PV "),e("div",{class:"m-1 card-border cursor-pointer",onClick:s[11]||(s[11]=f=>V.value=!t(V))},[Lo,L(" : "),e("span",{class:qt(["font-bold",t(V)?"text-green-600":"text-red-600"])},d(t(V)?"ONLINE":"OFFLINE"),3)])])):C("",!0)]),k(ut,{thead:t(Me),selected:t(_),onSetSelected:s[12]||(s[12]=f=>_.value=f),tbody:t(n),fnCallData:ye,scrolling:t(M),onSetScrollingPage:s[13]||(s[13]=f=>t(M).page=f),onDoFilter:s[14]||(s[14]=f=>he())},{val:B(({item:f})=>[f.val?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),val1:B(({item:f})=>[f.val1?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),val2:B(({item:f})=>[f.val2?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),standby_mst_name:B(({item:f})=>{var U;return[L(d((U=f.standby_mst_)==null?void 0:U.name),1)]}),standby_mst_type:B(({item:f})=>{var U;return[L(d((U=f.standby_mst_)==null?void 0:U.tipe),1)]}),standby_mst_amount:B(({item:f})=>{var U;return[L(" Rp. "+d(t(_e)(((U=f.standby_mst_)==null?void 0:U.amount)||0)),1)]}),pvr_had_detail:B(({item:f})=>[f.pvr_had_detail?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),deleted_by_username:B(({item:f})=>{var U;return[L(d((U=f.deleted_by)==null?void 0:U.username),1)]}),req_deleted_by_username:B(({item:f})=>{var U;return[L(d((U=f.req_deleted_by)==null?void 0:U.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),k(Ce,{type:"delete",show:t(se),data:t(de),fnClose:i,fnConfirm:re,enabledOk:t(H)},{footer:B(()=>[L(" Masukkan Alasan Penghapusan: "),e("div",Jo,[O(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=f=>Te(te)?te.value=f:null)},null,512),[[Z,t(te)]])])]),_:1},8,["show","data","enabledOk"]),k(Ce,{type:"custome",show:t(be),data:t(Oe),fnClose:Ke,fnConfirm:Ze,enabledOk:t(Ae)},{words:B(()=>[L(" Data akan diproses dan "),Go,L(", yakin untuk melanjutkan ? ")]),footer:B(()=>[L(" Masukkan Alasan Permintaan Penghapusan: "),e("div",Xo,[O(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=f=>Te(pe)?pe.value=f:null)},null,512),[[Z,t(pe)]])])]),_:1},8,["show","data","enabledOk"]),k(Ce,{type:"custome",show:t(xe),data:t(je),fnClose:Je,fnConfirm:Xe},{words:B(()=>[L(" Data akan diproses dan "),Zo,L(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),k(ct,{show:t(ue),fnClose:()=>{ue.value=!1},fnLoadDBData:I,id:t(ve),p_data:t(n),list_cost_center:t(G),online_status:t(V)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),k(pt,{show:t(S),fnClose:()=>{S.value=!1},id:t(N),p_data:t(n),is_view:t(F)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{hn as default};
