import ne from"./Header.c8ff4d0d.js";import re from"./Plus.72a8e44d.js";import ie from"./Eyes.8827be99.js";import ue from"./Signature.8dcecf3d.js";import{_ as ce}from"./client-only.ca626f03.js";import _e from"./Search.395a8411.js";import de from"./Line.0991ddea.js";import fe from"./Check.b271f09a.js";import me from"./fin_payment_req_trx_trps.973ca9ec.js";import pe from"./fin_payment_req_view.a7a1f942.js";import ve from"./fin_payment_req_validasi.fe5cf6e5.js";import{g as ye,h as he,r as a,B as we,j as I,s as ge,f as xe,I as ke,c as p,b as i,a as e,w as P,t as v,l as t,k as be,A as Ce,m as De,C as Me,F as Ae,D as Te,q as $e,o as _,E as qe,z,G as Fe,x as g,y as H}from"./entry.031eec13.js";import{u as j}from"./useMyFetch.3cfc87b0.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./HeaderPopup.vue.e6cf4e6f.js";import"./Times.9df09de8.js";import"./useUtils.484019b6.js";import"./Table2Column.5bcf8b88.js";import"./Send.a263bef8.js";import"./Refresh.e9c29847.js";import"./useDownload.174f4da2.js";const Re={class:"w-full h-full flex flex-col"},Se={class:"w-full flex grow flex-col overflow-auto h-0"},Ve={class:"w-full flex"},Ye={action:"#",class:"w-full flex"},Le={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},Be=e("div",{class:"font-bold"}," Tgl Dari ",-1),Ie={class:"text-red-500"},Pe={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},ze=e("div",{class:"font-bold"}," Tgl Sampai ",-1),He={class:"text-red-500"},je={class:"grow p-1"},Oe=e("div",{class:"font-bold"}," Keyword ",-1),Ee={class:"flex items-end p-1"},Ne={class:"w-full flex justify-center items-center grow h-0 p-1"},Ue={key:0,class:""},Ke={class:"tacky"},Ge=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App"),e("th",null,"ID"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),Je=["onClick"],Ze={class:"flex items-center justify-center"},Qe={class:"bold"},xt={__name:"index",async setup(We){let y,A;const{$moment:h}=Fe(),s={};s._TimeZoneOffset=new Date().getTimezoneOffset(),s.sort="created_at:desc";const T=ye("token"),{data:O}=([y,A]=he(async()=>$e(async()=>{let l=[];g().loading_full=!0;const{data:o,error:m,status:D}=await j("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:s,retry:0});return g().loading_full=!1,D.value==="error"?(H().trigger(m),{fin_payment_reqs:l}):(l=o.value.data,{fin_payment_reqs:l})},"$u2BOcRLizp")),y=await y,A(),y),u=a(O.value.fin_payment_reqs),f=a(""),x=a({field:"created_at",by:"desc"}),d=a(-1),r=a({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),$=a({}),c=a({from:"",to:""}),E=()=>{s.like="",f.value!=""&&(s.like=`id:%${f.value}%`),s.sort="",x.value.field&&(s.sort=x.value.field+":"+x.value.by),s.date_from=c.value.from?h(c.value.from).format("YYYY-MM-DD"):"",s.date_to=c.value.to?h(c.value.to).format("YYYY-MM-DD"):""},w=a(null),q=async()=>{g().loading_full=!0,r.value.may_get_data=!1,s.page=r.value.page,s.page==1&&(u.value=[]),s.first_row&&delete s.first_row,s.page>1&&(s.first_row=JSON.stringify(u.value[0]));const{data:l,error:o,status:m}=await j("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:s,retry:0});if(g().loading_full=!1,r.value.may_get_data=!0,m.value==="error"){H().trigger(o);return}r.value.page==1?(u.value=l.value.data,w.value&&(w.value.scrollTop=0)):r.value.page>1&&(u.value=[...u.value,...l.value.data]),l.value.data.length==0&&(r.value.is_last_record=!0)},N=async()=>{if(!r.value.may_get_data)return;let l=w.value;if(l.scrollLeft!=r.value.scrollLeft){r.value.scrollLeft=l.scrollLeft;return}r.value.is_last_record||!(Math.round(l.scrollTop)+l.clientHeight>=l.scrollHeight-1)||(r.value.page++,await q())},U=()=>{r.value.page=1,r.value.is_last_record=!1,E(),q()};we();const k=a(!1),F=a(0),K=a(0),G=()=>{F.value=0,k.value=!0,K.value=!1},{display:R}=I();ge(I());const b=a(!1),S=a(0),J=()=>{d.value==-1?R({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=u.value[d.value].id,b.value=!0)},C=a(!1),V=a(0),Z=()=>{d.value==-1?R({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(V.value=u.value[d.value].id,C.value=!0)},Y=a(!1);a({}),a(!1);const Q=a("");return xe(()=>Q.value,l=>{l.trim().length>0?Y.value=!0:Y.value=!1},{immediate:!1}),(l,o)=>{const m=ne,D=re,W=ie,X=ue,L=ke("vue-date-picker"),B=ce,ee=_e,te=de,oe=fe,ae=me,se=pe,le=ve;return _(),p("div",Re,[i(m,{title:"List Payment Req"}),e("div",Se,[e("div",Ve,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[0]||(o[0]=n=>G())},[i(D)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[1]||(o[1]=n=>J())},[i(W)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[2]||(o[2]=n=>Z())},[i(X)])]),e("form",Ye,[e("div",Le,[Be,i(B,null,{default:P(()=>[i(L,{modelValue:t(c).from,"onUpdate:modelValue":o[3]||(o[3]=n=>t(c).from=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Ie,v(t($).date_from),1)]),e("div",Pe,[ze,i(B,null,{default:P(()=>[i(L,{modelValue:t(c).to,"onUpdate:modelValue":o[4]||(o[4]=n=>t(c).to=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",He,v(t($).date_to),1)]),e("div",je,[Oe,be(e("input",{class:"",type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>De(f)?f.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[Ce,t(f)]])]),e("div",Ee,[e("button",{class:"",type:"submit",name:"button",onClick:o[6]||(o[6]=Me(n=>U(),["prevent"]))},[i(ee,{class:"text-2xl"})])])]),e("div",Ne,[t(u).length==0?(_(),p("div",Ue," Maaf Tidak Ada Record ")):(_(),p("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:w,onScroll:N},[e("table",Ke,[Ge,e("tbody",null,[(_(!0),p(Ae,null,Te(t(u),(n,M)=>(_(),p("tr",{key:M,onClick:Xe=>d.value=M,class:qe(t(d)==M?"active":"")},[e("td",null,[e("div",Ze,[n.val?(_(),z(oe,{key:1})):(_(),z(te,{key:0}))])]),e("td",Qe,v(n.id),1),e("td",null,v(n.created_at?t(h)(n.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,v(n.updated_at?t(h)(n.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Je))),128))])])],544))])]),i(ae,{show:t(k),fnClose:()=>{k.value=!1},id:t(F),p_data:t(u)},null,8,["show","fnClose","id","p_data"]),i(se,{show:t(b),fnClose:()=>{b.value=!1},id:t(S)},null,8,["show","fnClose","id"]),i(le,{show:t(C),fnClose:()=>{C.value=!1},id:t(V),p_data:t(u)},null,8,["show","fnClose","id","p_data"])])}}};export{xt as default};
