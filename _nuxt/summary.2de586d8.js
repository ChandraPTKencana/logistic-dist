import{_ as P}from"./HeaderPopup.vue.ba459e4c.js";import{_ as Q}from"./client-only.d813e893.js";import Z from"./Search.3e578fc6.js";import G from"./summary_detail.64c242fd.js";import{h as J,r as i,I as W,K as B,M as X,o as a,c as r,n as O,v as Y,a as s,b as m,w as ee,m as n,t as p,s as te,B as se,q as oe,F as f,D as y,E as R,x as T,y as le,p as ne,e as ae}from"./entry.f3cbd76a.js";import"./useUtils.b8cd834f.js";import{u as re}from"./useMyFetch.508de42b.js";import{_ as ie}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.8933bed3.js";const E=c=>(ne("data-v-f8681792"),c=c(),ae(),c),ce={class:"box-fixed"},ue={action:"#",class:"w-full flex p-1"},de={class:"w-full flex flex-row flex-wrap p-1 items-center"},_e=E(()=>s("label",{for:"",class:"pr-1"},"To",-1)),me={class:"grow"},pe={class:"text-red-500"},fe={class:"flex items-end p-1"},he={class:"w-full flex"},ve={class:"p-1"},xe={class:"grow flex flex-row flex-wrap"},ye={class:"p-1"},we=["onClick"],ke={class:"w-full flex justify-center items-center grow h-0 p-1"},ge={key:0,class:""},Ce={key:1,class:"w-full h-full overflow-auto",role:"sticky",ref:"loadRef"},be={class:"tacky"},Se={class:"sticky top-0 !z-[2]"},De=E(()=>s("th",null,null,-1)),Ie=["onClick"],qe={class:"font-bold !text-left"},Me=["onClick"],Ve={__name:"summary",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1}},setup(c){const F=c,z=J("token"),w=i({from:"",to:new Date}),A=i({}),u=i([]),k=i([]),D=i([]),I=i(-1),g=i(!1),q=i({}),h={};h._TimeZoneOffset=new Date().getTimezoneOffset();const M=async()=>{T().loading_full=!0,h.page=1,h.to=w.value.to,u.value=[];const{data:t,error:e,status:o}=await re("/summary_transactions",{method:"get",headers:{Authorization:`Bearer ${z.value}`,Accept:"application/json"},params:h,retry:0});if(T().loading_full=!1,o.value==="error"){le().trigger(e);return}u.value=t.value.all,k.value=t.value.column_header,D.value=t.value.row_header};W(()=>F.show,(t,e)=>{t==!0&&M()},{immediate:!0});const H=(t,e)=>{let o=u.value.filter(_=>_.id==t)[0];const{items:$,...C}=o;let b=o.items.filter(_=>_.id==e)[0];return{rest:C,item:b}},N=(t,e)=>u.value.filter(o=>o.id==t)[0].items.filter(o=>o.id==e)[0].qty_reminder,U=(t,e,o)=>{q.value=t,g.value=!0},v=i(""),d=i([]),j=t=>{let e=d.value.map(o=>o.id).indexOf(t.id);e==-1?d.value.push(t):d.value.splice(e,1)},K=t=>d.value.some(e=>e.id===t.id),V=B(()=>{let t=[],e=d.value.map(o=>o.id);return k.value.forEach(o=>{e.indexOf(o.id)==-1&&t.push(o)}),t}),L=B(()=>{let t=v.value;const e=new RegExp("("+t+")","i");return D.value.filter(o=>o.name.match(e))});return(t,e)=>{const o=P,$=X("vue-date-picker"),C=Q,b=Z,_=G;return a(),r(f,null,[O(s("section",ce,[s("div",null,[m(o,{title:"Summary",fn:c.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),s("form",ue,[s("div",de,[_e,s("div",me,[m(C,null,{default:ee(()=>[m($,{modelValue:n(w).to,"onUpdate:modelValue":e[0]||(e[0]=l=>n(w).to=l),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),s("p",pe,p(n(A).to),1)]),s("div",fe,[s("button",{style:{width:"38px",height:"38px"},type:"submit",name:"button",onClick:e[1]||(e[1]=te(l=>M(),["prevent"]))},[m(b,{class:"text-2xl"})])])]),s("div",he,[s("div",ve,[O(s("input",{type:"text","onUpdate:modelValue":e[2]||(e[2]=l=>se(v)?v.value=l:null),placeholder:"Item Name"},null,512),[[oe,n(v)]])]),s("div",xe,[(a(!0),r(f,null,y(n(k),l=>(a(),r("div",ye,[s("div",{class:R(["p-1 rounded ring-1 ring-slate-500 cursor-pointer",K(l)?"bg-white text-black":"bg-slate-600 text-white"]),onClick:x=>j(l)},p(l.lokasi),11,we)]))),256))])]),s("div",ke,[n(u).length==0?(a(),r("div",ge," Maaf Tidak Ada Record ")):(a(),r("div",Ce,[s("table",be,[s("thead",null,[s("tr",Se,[De,(a(!0),r(f,null,y(n(V),l=>(a(),r("th",null,p(l.lokasi),1))),256))])]),s("tbody",null,[(a(!0),r(f,null,y(n(L),(l,x)=>(a(),r("tr",{key:x,onClick:S=>I.value=x,class:R(n(I)==x?"active":"")},[s("th",qe,p(l.name),1),(a(!0),r(f,null,y(n(V),S=>(a(),r("td",null,[s("a",{class:"text-blue-500 font-bold underline cursor-pointer",onClick:$e=>U(H(S.id,l.id))},p(N(S.id,l.id)),9,Me)]))),256))],10,Ie))),128))])])],512))])])],512),[[Y,c.show]]),m(_,{show:n(g),data:n(q),fnClose:()=>{g.value=!1}},null,8,["show","data","fnClose"])],64)}}},Ne=ie(Ve,[["__scopeId","data-v-f8681792"]]);export{Ne as default};
