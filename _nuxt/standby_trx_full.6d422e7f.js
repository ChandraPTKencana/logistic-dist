import{_ as D}from"./HeaderPopup.vue.7b062c59.js";import I from"./uj.972979f8.js";import j from"./absen.07915177.js";import q from"./ticket.4e9e8168.js";import A from"./stt.a5626070.js";import B from"./CaretTop.c7c17af4.js";import E from"./CaretDown.d812d0b9.js";import{r as u,R as P,g as L,f as N,k as S,L as O,o as U,c as V,a as o,b as n,l,x as k,y as z}from"./entry.dc2b24f1.js";import{u as H}from"./useMyFetch.766e9601.js";import"./Times.42ecdbb9.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./ClockAnalog.1ce69ece.js";import"./Calendar.52da4772.js";import"./Truck.cc2fe213.js";import"./LocationOn.411ed851.js";import"./TruckDriver.482667dd.js";import"./useUtils.bd40102d.js";import"./AttachmentSingleV1.2e0a69e0.js";import"./Check.131be657.js";const M={class:"box-fixed"},R={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white p-1"},G={class:"w-full flex items-center justify-end"},dt={__name:"standby_trx_full",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},standby_trx:{type:Object,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(s,{emit:_}){const a=s,x=u(null);let m=t=>{t.key=="ArrowUp"&&b(),t.key=="ArrowDown"&&y()};P(()=>{document.removeEventListener("keydown",m)});const i={id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:"",uj_combine:{supir:[],kernet:[]}},r=u({...i}),T=L("token"),d=u([]),p=u([]),c=async()=>{if(!a.standby_trx.trx_trp_id){a.fnClose();return}setTimeout(()=>{x.value.scrollTop=0},1),d.value=[],p.value=[],k().loading_full=!0;const{data:t,error:e,status:v}=await H("/standby_trx/full_view",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{trx_trp_id:a.standby_trx.trx_trp_id},retry:0});if(k().loading_full=!1,v.value==="error"){z().trigger(e);return}let f=t.value.data;r.value=f,r.value.standby_trxs.forEach(w=>{d.value.push(""),p.value.push("")})};N(()=>a.show,(t,e)=>{t==!0?(document.addEventListener("keydown",m),r.value={...i},c()):document.removeEventListener("keydown",m)},{immediate:!0});const y=()=>{let t=a.p_data.map(e=>e.id).indexOf(a.id);t!=a.p_data.length-1&&(t++,_("setID",a.p_data[t].id),_("setIndex",t),setTimeout(()=>{r.value={...i},c()},100))},b=()=>{let t=a.p_data.map(e=>e.id).indexOf(a.id);t!=0&&(t--,_("setID",a.p_data[t].id),_("setIndex",t),setTimeout(()=>{r.value={...i},c()},100))};return(t,e)=>{const v=D,f=I,w=j,g=q,C=A,F=B,$=E;return S((U(),V("section",M,[o("div",null,[n(v,{title:"Form Full Transaction",fn:s.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),o("form",R,[o("div",{ref_key:"main_part",ref:x,class:"w-full flex flex-col items-center grow overflow-auto"},[n(f,{trx_trp:l(r)},null,8,["trx_trp"]),n(w,{trx_trp:l(r)},null,8,["trx_trp"]),n(g,{trx_trp:l(r)},null,8,["trx_trp"]),n(C,{show_for_att:s.show,standby_trxs:l(r).standby_trxs,p_data:s.p_data,save_do:l(p),save_state:l(d)},null,8,["show_for_att","standby_trxs","p_data","save_do","save_state"])],512),o("div",G,[o("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:e[0]||(e[0]=h=>b())},[n(F,{class:"black"})]),o("button",{type:"button",name:"button",class:"w-36 m-1",onClick:e[1]||(e[1]=h=>s.fnClose())}," Cancel "),o("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:e[2]||(e[2]=h=>y())},[n($,{class:"black"})])])])])],512)),[[O,s.show]])}}};export{dt as default};
