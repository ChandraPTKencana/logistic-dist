import{_ as R}from"./HeaderPopup.vue.ed369fc7.js";import{_ as q}from"./WidthMiniPart.vue.b610c5c3.js";import J from"./AttachmentSingle.c4c5e0b2.js";import{r as m,f as O,G as P,j as z,m as E,J as U,o as d,c as n,a as e,b as g,t as a,k as s,F as B,y as G,l as w,x as K,E as L,A as k,B as T,p as W,e as Q}from"./entry.8137c57c.js";import{u as X}from"./useUtils.66646508.js";import{u as V}from"./useMyFetch.05c9822c.js";import{_ as Z}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.48d45154.js";import"./PDFJsView.0d5ac237.js";const o=_=>(W("data-v-efe1c52c"),_=_(),Q(),_),ee={class:"box-fixed"},te={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},se={class:"w-full flex flex-col items-center grow overflow-auto"},le={class:"w-full flex flex-row flex-wrap"},ae={class:"w-full sm:w-9/12 flex px-2 py-3"},oe={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ie=o(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),re={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},_e=o(()=>e("label",{for:""},"ID",-1)),de={class:"card-border"},ne={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ce=o(()=>e("label",{for:""},"Name",-1)),ve={class:"card-border"},fe={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ue=o(()=>e("label",{for:""},"Type",-1)),pe={class:"card-border"},me={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},we=o(()=>e("label",{for:""},"Amount",-1)),he={class:"card-border"},xe={class:"w-full sm:w-3/12 flex px-2 py-3"},be={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},ye=o(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ge={class:"w-6/12 flex flex-col flex-wrap p-1"},ke={class:"card-border"},Se={class:"w-6/12 flex flex-col flex-wrap p-1"},Ne={class:"card-border"},De={class:"w-full flex flex-wrap"},Ye={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ce=o(()=>e("label",{for:""},"Supir",-1)),Ae={class:"card-border"},Fe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Me=o(()=>e("label",{for:""},"Kernet",-1)),Ie={class:"card-border"},Pe={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Be=o(()=>e("label",{for:""},"No Pol",-1)),Te={class:"card-border"},Ve={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},$e=o(()=>e("label",{for:""},"Tujuan",-1)),je={class:"card-border"},He={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Re=o(()=>e("label",{for:""},"Note For Remarks",-1)),qe={class:"card-border"},Je={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Oe=o(()=>e("label",{for:""},"Referensi",-1)),ze={class:"card-border"},Ee={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Ue={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ge=o(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Ke={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Le=o(()=>e("label",{for:""}," Code",-1)),We={class:"card-border"},Qe={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Xe=o(()=>e("label",{for:""},"Desc",-1)),Ze={class:"card-border disabled"},et={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},tt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},st=o(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),lt={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},at=o(()=>e("label",{for:""},"No",-1)),ot={class:"card-border disabled"},it={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},rt=o(()=>e("label",{for:""},"Total",-1)),_t={class:"card-border disabled"},dt={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},nt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ct=o(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),vt={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ft=o(()=>e("label",{for:""},"No",-1)),ut={class:"card-border disabled"},pt={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},mt=o(()=>e("label",{for:""},"Total",-1)),wt={class:"card-border disabled"},ht={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},xt={class:"w-full",role:"sticky"},bt={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},yt={class:"sticky -top-1 !z-[2]"},gt=["colspan"],kt=o(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto")],-1)),St={ref:"to_move"},Nt=["data-index"],Dt={class:"cell"},Yt={class:"w-full h-full flex items-center justify-center relative"},Ct={class:"cell"},At={style:{width:"70vw"},class:"h-full flex items-center justify-center"},Ft={class:"w-full flex items-center justify-end"},Mt={class:"w-full flex flex-wrap p-3 items-center"},It=o(()=>e("div",null," Di Validasi oleh : ",-1)),Pt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Bt={key:0},Tt={key:1},Vt={key:2},$t={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const c=_,{$moment:x}=L(),{pointFormat:S}=X(),t=m({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),A=O("token"),F=m({}),M=m(null),N=m([]),I={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""},v=m(JSON.parse(JSON.stringify(I))),f=m(JSON.parse(JSON.stringify(I))),$=async()=>{k().loading_full=!0,F.value={};const i=new FormData;let r="post",p=c.id;p==0||(i.append("id",p),i.append("_method","PUT"));const{data:l,error:D,status:b}=await V("/standby_trx_validasi",{method:r,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:i,retry:0});if(k().loading_full=!1,b.value==="error"){T().trigger(D,F);return}t.value.val=l.value.val,t.value.val_user=l.value.val_user,t.value.val_by=l.value.val_by,t.value.val_at=l.value.val_at,t.value.val1=l.value.val1,t.value.val1_user=l.value.val1_user,t.value.val1_by=l.value.val1_by,t.value.val1_at=l.value.val1_at,t.value.val2=l.value.val2,t.value.val2_user=l.value.val2_user,t.value.val2_by=l.value.val2_by,t.value.val2_at=l.value.val2_at;let h=c.p_data.map(y=>y.id).indexOf(c.id);h>=-1&&c.p_data.splice(h,1,{...t.value}),c.fnClose()},j=async()=>{k().loading_full=!0;const{data:i,error:r,status:p}=await V("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:c.id},retry:0});if(k().loading_full=!1,p.value==="error"){T().trigger(r);return}let l=i.value.data;t.value=l,v.value._.id.val=l.supir_id,v.value._.name.val=l.supir,v.value._.rek_no.val=l.supir_rek_no,v.value._.rek_name.val=l.supir_rek_name,v.value.id=l.supir_id,v.value.name=l.supir,v.value.rek_no=(l.supir_rek_no||"")+" "+(l.supir_rek_name||""),f.value._.id.val=l.kernet_id,f.value._.name.val=l.kernet,f.value._.rek_no.val=l.kernet_rek_no,f.value._.rek_name.val=l.kernet_rek_name,f.value.id=l.kernet_id,f.value.name=l.kernet,f.value.rek_no=(l.kernet_rek_no||"")+" "+(l.kernet_rek_name||""),N.value=i.value.data.details};P(()=>{let i=0;return N.value.forEach(r=>{r.p_status!="Remove"&&(i+=r.amount)}),i});const H=P(()=>!1);return z(()=>c.show,(i,r)=>{i==!0&&(c.is_view==!1&&setTimeout(()=>{M.value.focus()},1),j())},{immediate:!0}),(i,r)=>{var b,h,y;const p=R,l=q,D=J;return E((d(),n("section",ee,[e("div",null,[g(p,{title:"Form Transaction Standby Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",te,[e("div",se,[e("div",le,[e("div",ae,[e("div",oe,[ie,e("div",re,[_e,e("div",de,a(s(t).standby_mst_id),1)]),e("div",ne,[ce,e("div",ve,a((b=s(t).standby_mst_)==null?void 0:b.name),1)]),e("div",fe,[ue,e("div",pe,a((h=s(t).standby_mst_)==null?void 0:h.tipe),1)]),e("div",me,[we,e("div",he,a(s(S)((y=s(t).standby_mst_)==null?void 0:y.amount)),1)])])]),e("div",xe,[e("div",be,[ye,e("div",ge,[e("div",ke,a(s(t).transition_type),1)]),e("div",Se,[e("div",Ne,a(s(t).transition_target),1)])])]),e("div",De,[e("div",Ye,[Ce,e("div",Ae,[g(l,{selected:s(v)},null,8,["selected"])])]),e("div",Fe,[Me,e("div",Ie,[g(l,{selected:s(f)},null,8,["selected"])])]),e("div",Pe,[Be,e("div",Te,a(s(t).no_pol),1)]),e("div",Ve,[$e,e("div",je,a(s(t).xto),1)]),e("div",He,[Re,e("div",qe,a(s(t).note_for_remarks),1)]),e("div",Je,[Oe,e("div",ze,a(s(t).ref),1)])]),e("div",Ee,[e("div",Ue,[Ge,e("div",Ke,[Le,e("div",We,a(s(t).cost_center_code),1)]),e("div",Qe,[Xe,e("div",Ze,a(s(t).cost_center_desc),1)])])]),e("div",et,[e("div",tt,[st,e("div",lt,[at,e("div",ot,a(s(t).pvr_no),1)]),e("div",it,[rt,e("div",_t,a(s(S)(s(t).pvr_total||0)),1)])])]),e("div",dt,[e("div",nt,[ct,e("div",vt,[ft,e("div",ut,a(s(t).pv_no),1)]),e("div",pt,[mt,e("div",wt,a(s(S)(s(t).pv_total)),1)])])]),e("div",ht,[e("div",xt,[e("table",bt,[e("thead",null,[e("tr",yt,[e("td",{colspan:s(H)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,gt)]),kt]),e("tbody",St,[(d(!0),n(B,null,G(s(N),(u,Y)=>(d(),n(B,{key:Y},[u.p_status!="Remove"?(d(),n("tr",{key:0,"data-index":Y},[e("td",null,a(Y+1)+".",1),e("td",Dt,[e("div",Yt,a(s(x)(u.tanggal).format("DD-MM-YYYY")),1)]),e("td",Ct,[e("div",At,[g(D,{value:u.attachment_1_preview,onSetFile:C=>u.attachment_1=C,onSetPreview:C=>u.attachment_1_preview=C},null,8,["value","onSetFile","onSetPreview"])])])],8,Nt)):w("",!0)],64))),128))],512)])])])])]),e("div",Ft,[e("div",Mt,[It,s(t).val||s(t).val1||s(t).val2?(d(),n("div",Pt,[s(t).val?(d(),n("div",Bt," App 1 : "+a(s(t).val_by.username)+" ( "+a(s(t).val_at?s(x)(s(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),s(t).val1?(d(),n("div",Tt," App 2 : "+a(s(t).val1_by.username)+" ( "+a(s(t).val1_at?s(x)(s(t).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),s(t).val2?(d(),n("div",Vt," App 3 : "+a(s(t).val2_by.username)+" ( "+a(s(t).val2_at?s(x)(s(t).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=u=>_.fnClose())}," Cancel "),_.is_view==0?(d(),n("button",{key:0,ref_key:"it_val",ref:M,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=K(u=>$(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[U,_.show]])}}},Kt=Z($t,[["__scopeId","data-v-efe1c52c"]]);export{Kt as default};
