import{_ as D}from"./HeaderPopup.vue.91ef7d4e.js";import{_ as $}from"./client-only.0e8ce336.js";import F from"./AttachmentSingle.c6362236.js";import{r as k,f as P,j,I as q,m as i,J as E,o as y,c as g,a as e,b as m,k as o,v as u,t as d,q as K,F as z,y as L,w as U,x as O,A as f,B as V,H,E as I}from"./entry.8c82ab4d.js";import{u as S}from"./useMyFetch.106621c5.js";import"./Times.78096a65.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./PDFJsView.56b07e66.js";const J={class:"box-fixed"},R={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Y={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},G={class:"w-full sm:w-full md:w-1/3 flex flex-row flex-wrap"},Q={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},W=e("label",{for:""},"Nama",-1),X={class:"text-red-500"},Z={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ee=e("label",{for:""},"Jabatan",-1),te=e("option",{value:"Supir"},"Supir",-1),oe=e("option",{value:"Kernet"},"Kernet",-1),le=[te,oe],ae={class:"text-red-500"},se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ne=e("label",{for:""},"No KTP",-1),de={class:"text-red-500"},ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},re=e("label",{for:""},"No SIM",-1),pe={class:"text-red-500"},ue={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},_e=e("label",{for:""},"Pilih Bank",-1),me=e("option",{value:""},null,-1),fe=["value"],ce={class:"text-red-500"},we={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ve=e("label",{for:""},"No Rek",-1),xe={class:"text-red-500"},he={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},be=e("label",{for:""},"Nama Rek",-1),ke={class:"text-red-500"},ye={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ge=e("label",{for:""},"Phone Number",-1),Ke={class:"text-red-500"},Ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Se=e("label",{for:""},"Tanggal Lahir",-1),Te={class:"grow"},Me={class:"text-red-500"},Ue={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ae=e("label",{for:""},"Tempat Lahir",-1),Ce={class:"text-red-500"},Ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Be=e("label",{for:""},"TMK",-1),De={class:"grow"},$e={class:"text-red-500"},Fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Pe=e("label",{for:""},"Alamat",-1),je={class:"text-red-500"},qe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ee=e("label",{for:""},"Status",-1),ze=H('<option value="TK/0">TK/0</option><option value="TK/1">TK/1</option><option value="TK/2">TK/2</option><option value="TK/3">TK/3</option><option value="K/0">K/0</option><option value="K/1">K/1</option><option value="K/2">K/2</option><option value="K/3">K/3</option>',8),Le=[ze],Oe={class:"text-red-500"},He={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},Ie={class:"w-full flex items-center justify-end"},et={__name:"employee",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(c){const r=c,{$moment:T}=I(),M={id:-1,name:"",role:"Supir",ktp_no:"",sim_no:"",bank_id:1,rek_no:"",rek_name:"",phone_number:"",attachment_1:"",attachment_1_preview:"",birth_date:new Date,birth_place:"",tmk:new Date,address:"",status:"TK/0"},t=k({...M}),h=P("token"),n=k({}),A=async()=>{f().loading_full=!0,n.value={};const s=new FormData;s.append("name",t.value.name),s.append("role",t.value.role),s.append("ktp_no",t.value.ktp_no),s.append("sim_no",t.value.sim_no),s.append("bank_id",t.value.bank_id),s.append("rek_no",t.value.rek_no),s.append("rek_name",t.value.rek_name),s.append("phone_number",t.value.phone_number),s.append("attachment_1",t.value.attachment_1),s.append("attachment_1_preview",t.value.attachment_1_preview),s.append("birth_date",t.value.birth_date?T(t.value.birth_date).format("Y-MM-DD"):""),s.append("birth_place",t.value.birth_place),s.append("tmk",t.value.tmk?T(t.value.tmk).format("Y-MM-DD"):""),s.append("address",t.value.address),s.append("status",t.value.status);let l="post",p=r.id;p==0||(s.append("id",p),s.append("_method","PUT"));const{data:_,error:v,status:b}=await S("/employee",{method:l,headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},body:s,retry:0});if(f().loading_full=!1,b.value==="error"){V().trigger(v,n);return}let a=w.value.map(x=>x.id).indexOf(t.value.bank_id);if(t.value.bank={...w.value[a]},t.value.updated_at=_.value.updated_at,r.id<=0)t.value.id=_.value.id,t.value.created_at=_.value.created_at,r.p_data.unshift(t.value);else{let x=r.p_data.map(B=>B.id).indexOf(r.id);x>=-1&&r.p_data.splice(x,1,{...t.value})}r.fnClose()},C=async()=>{f().loading_full=!0;const{data:s,error:l,status:p}=await S("/employee",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(f().loading_full=!1,p.value==="error"){V().trigger(l);return}t.value=s.value.data},w=k([]),N=async()=>{f().loading_full=!0;const{data:s,error:l,status:p}=await S("/banks",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(f().loading_full=!1,p.value==="error"){V().trigger(l);return}w.value=s.value.data};return j(()=>r.show,async(s,l)=>{s==!0&&(t.value={...M},n.value={},await N(),r.id!=0&&await C())},{immediate:!0}),(s,l)=>{const p=D,_=q("vue-date-picker"),v=$,b=F;return i((y(),g("section",J,[e("div",null,[m(p,{title:"Form Employee",fn:c.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",R,[e("div",Y,[e("div",G,[e("div",Q,[W,i(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=a=>o(t).name=a)},null,512),[[u,o(t).name]]),e("p",X,d(o(n).name),1)]),e("div",Z,[ee,i(e("select",{"onUpdate:modelValue":l[1]||(l[1]=a=>o(t).role=a)},le,512),[[K,o(t).role]]),e("p",ae,d(o(n).role),1)]),e("div",se,[ne,i(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=a=>o(t).ktp_no=a)},null,512),[[u,o(t).ktp_no]]),e("p",de,d(o(n).ktp_no),1)]),e("div",ie,[re,i(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=a=>o(t).sim_no=a)},null,512),[[u,o(t).sim_no]]),e("p",pe,d(o(n).sim_no),1)]),e("div",ue,[_e,i(e("select",{"onUpdate:modelValue":l[4]||(l[4]=a=>o(t).bank_id=a)},[me,(y(!0),g(z,null,L(o(w),a=>(y(),g("option",{value:a.id},d(a.code),9,fe))),256))],512),[[K,o(t).bank_id]]),e("p",ce,d(o(n).bank_id),1)]),e("div",we,[ve,i(e("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=a=>o(t).rek_no=a)},null,512),[[u,o(t).rek_no]]),e("p",xe,d(o(n).rek_no),1)]),e("div",he,[be,i(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=a=>o(t).rek_name=a)},null,512),[[u,o(t).rek_name]]),e("p",ke,d(o(n).rek_name),1)]),e("div",ye,[ge,i(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=a=>o(t).phone_number=a)},null,512),[[u,o(t).phone_number]]),e("p",Ke,d(o(n).phone_number),1)]),e("div",Ve,[Se,e("div",Te,[m(v,null,{default:U(()=>[m(_,{modelValue:o(t).birth_date,"onUpdate:modelValue":l[8]||(l[8]=a=>o(t).birth_date=a),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",Me,d(o(n).birth_date),1)]),e("div",Ue,[Ae,i(e("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=a=>o(t).birth_place=a)},null,512),[[u,o(t).birth_place]]),e("p",Ce,d(o(n).birth_place),1)]),e("div",Ne,[Be,e("div",De,[m(v,null,{default:U(()=>[m(_,{modelValue:o(t).tmk,"onUpdate:modelValue":l[10]||(l[10]=a=>o(t).tmk=a),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",$e,d(o(n).tmk),1)]),e("div",Fe,[Pe,i(e("textarea",{"onUpdate:modelValue":l[11]||(l[11]=a=>o(t).address=a)},null,512),[[u,o(t).address]]),e("p",je,d(o(n).address),1)]),e("div",qe,[Ee,i(e("select",{"onUpdate:modelValue":l[12]||(l[12]=a=>o(t).status=a)},Le,512),[[K,o(t).status]]),e("p",Oe,d(o(n).status),1)])]),e("div",He,[m(b,{label:"Attachment",value:o(t).attachment_1_preview,onSetFile:l[13]||(l[13]=a=>o(t).attachment_1=a),onSetPreview:l[14]||(l[14]=a=>o(t).attachment_1_preview=a),can_remove:!0},null,8,["value"])])]),e("div",Ie,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[15]||(l[15]=a=>c.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[16]||(l[16]=O(a=>A(),["prevent"]))}," Save ")])])])],512)),[[E,c.show]])}}};export{et as default};
