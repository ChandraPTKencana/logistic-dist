import Fe from"./Header.3a182a2b.js";import Me from"./Plus.6994d14e.js";import Ie from"./Edit.0f315b75.js";import Ne from"./Eyes.fed2112f.js";import Ee from"./Delete.96fa49b2.js";import ze from"./DeleteOff.49cbe93e.js";import Ue from"./Signature.54ea28b3.js";import Re from"./SignatureOff.18182eae.js";import Ve from"./Line.003ddaea.js";import He from"./Check.1aa47b5a.js";import Je from"./TypeIcon.38f75942.js";import Ke from"./TableView.21b5b06c.js";import{_ as Le}from"./PopupMini.vue.e06296b1.js";import Ye from"./employee.7f600d22.js";import qe from"./employee_validasi.e9779f79.js";import{r,f as X,g as Ge,h as Ze,i as b,B as Qe,j as ee,s as We,c as k,a as i,b as u,k as te,v as Xe,l as a,m as le,n as h,w,F as et,q as tt,x as _,y as B,o as m,z as U,d as D,t as J,A as lt,p as at,e as ot}from"./entry.c550775e.js";import{u as F}from"./useMyFetch.105aa333.js";import{u as f}from"./useUtils.5bfaf943.js";import{_ as nt}from"./_plugin-vue_export-helper.c27b6911.js";import"./DocJPEG.0e33553f.js";import"./DocJPG.1d6eb309.js";import"./DocPNG.598e59e7.js";import"./DocPDF.29d656db.js";import"./Search.e7803659.js";import"./Adjust.01ad4635.js";import"./TableHeaderEye.78b7a674.js";import"./Times.3fee37ef.js";import"./ClearAll.646ba420.js";import"./client-only.6377acf0.js";import"./ClearEach.84e90a34.js";import"./CaretLeftDoubleBold.a2a34c2f.js";import"./CaretLeftBold.29064b94.js";import"./CaretRightBold.f710c4a3.js";import"./CaretRightDoubleBold.19fafdd4.js";import"./Exclamation.dfe4e7ea.js";import"./HeaderPopup.vue.b004c5e6.js";import"./InputPointFormat.vue.d88c4129.js";import"./EyesOff.8f516d3f.js";import"./AttachmentSingle.fddfc8f6.js";import"./PDFJsView.0ff51253.js";const $=M=>(at("data-v-df94ca01"),M=M(),ot(),M),st={class:"w-full h-full flex flex-col"},rt={class:"w-full flex grow flex-col overflow-auto h-0"},it={class:"w-full flex justify-between flex-wrap"},ut={class:"grow flex"},dt={class:"m-1"},_t=$(()=>i("option",{value:"available"},"Available",-1)),mt=$(()=>i("option",{value:"unapprove"},"Unapprove",-1)),pt=$(()=>i("option",{value:"deleted"},"Trash",-1)),vt=$(()=>i("option",{value:"all"},"All",-1)),ct=[_t,mt,pt,vt],ft={class:"grow mb-5"},yt={class:"text-red-500"},bt=$(()=>i("br",null,null,-1)),kt=$(()=>i("b",{class:"text-green-500"},"Kembali Bekerja ",-1)),ht={__name:"index",async setup(M){let I,K;const ae=t=>t.deleted==1?"!bg-red-400":t.val==0||t.val1==0?"!bg-gray-300":"",y=r("available");X(()=>y.value,t=>{q()},{immediate:!1});const v={};v._TimeZoneOffset=new Date().getTimezoneOffset();const A=Ge("token"),{data:n}=([I,K]=Ze(async()=>tt(async()=>{_().loading_full=!0;const{data:t,error:e,status:p}=await F("/employees",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{filter_status:y},retry:0});return _().loading_full=!1,p.value==="error"?(B().trigger(e),[]):t.value.data},"$p5jj5crAgd")),I=await I,K(),I),R=r({field:"",by:"desc"}),l=r(-1),c=r({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),d=b(()=>n.value[l.value]),oe=()=>{v.like="";let t=JSON.parse(JSON.stringify(_()._tv.global_keyword));t!=""&&(v.like=`id:%${t}%,name:%${t}%,ktp_no:%${t}%,sim_no:%${t}%,phone_number:%${t}%,rek_no:%${t}%`),v.sort="",R.value.field&&(v.sort=R.value.field+":"+R.value.by),v.filter_model=JSON.stringify(_()._tv.filter_model)},L=r(null),Y=async()=>{_().loading_full=!0,c.value.may_get_data=!1,v.page=c.value.page,v.page==1&&(n.value=[]),v.filter_status=y.value;const{data:t,error:e,status:p}=await F("/employees",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:v,retry:0});if(_().loading_full=!1,c.value.may_get_data=!0,p.value==="error"){B().trigger(e);return}c.value.page==1?(n.value=t.value.data,L.value&&(L.value.scrollTop=0)):c.value.page>1&&(n.value=[...n.value,...t.value.data]),t.value.data.length==0&&(c.value.is_last_record=!0),_()._tv.filter_box=!1},q=()=>{l.value=-1,c.value.page=1,c.value.is_last_record=!1,oe(),Y()};Qe();const N=r(!1),V=r(0),C=r(0),S=r(1),ne=()=>{V.value=0,S.value=-1,C.value=!1,N.value=!0},{display:g}=ee();We(ee());const se=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(V.value=n.value[l.value].id,S.value=-1,C.value=!1,N.value=!0)},O=r(!1),E=r(0),re=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=n.value[l.value].id,S.value=1,C.value=!1,O.value=!0)},ie=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=n.value[l.value].id,S.value=0,C.value=!1,O.value=!0)},ue=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=n.value[l.value].id,C.value=!1,S.value=-1,O.value=!0)},H=r(!1),G=r({}),T=r(!1),P=r(""),de=async()=>{T.value&&(T.value=!1)},_e=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(P.value="",G.value={id:n.value[l.value].id},T.value=!0)},z=r(!1),me=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):z.value=!0};X(()=>P.value,t=>{t.trim().length>0?H.value=!0:H.value=!1},{immediate:!1});const pe=async()=>{_().loading_full=!0;const t=new FormData;t.append("id",n.value[l.value].id),t.append("deleted_reason",P.value),t.append("_method","DELETE");const{data:e,error:p,status:x}=await F("/employee",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,x.value==="error"){B().trigger(p);return}let s={...n.value[l.value]};s.deleted=e.value.deleted,s.deleted_user=e.value.deleted_user,s.deleted_at=e.value.deleted_at,s.deleted_by=e.value.deleted_by,s.deleted_reason=e.value.deleted_reason,y.value!="all"?n.value.splice(l.value,1):n.value.splice(l.value,1,{...s}),l.value=-1,T.value=!1},ve=async()=>{_().loading_full=!0;const t=new FormData;t.append("id",n.value[l.value].id),t.append("_method","PUT");const{data:e,error:p,status:x}=await F("/employee_unremove",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,x.value==="error"){B().trigger(p);return}let s={...n.value[l.value]};s.deleted=e.value.deleted,s.deleted_user=e.value.deleted_user,s.deleted_at=e.value.deleted_at,s.deleted_by=e.value.deleted_by,s.deleted_reason=e.value.deleted_reason,y.value!="all"?n.value.splice(l.value,1):n.value.splice(l.value,1,{...s}),l.value=-1,z.value=!1},ce=()=>{l.value==-1?g({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):fe()},fe=async()=>{_().loading_full=!0;const t=new FormData;t.append("id",n.value[l.value].id),t.append("_method","PUT");const{data:e,error:p,status:x}=await F("/employee_generate_code",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,x.value==="error"){B().trigger(p);return}let s={...n.value[l.value]};s.m_enkey=e.value.m_enkey,n.value.splice(l.value,1,{...s})},ye=r([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"m_enkey",label:"Kode Kunci",filter_on:1},{key:"username",label:"Username",filter_on:1},{key:"id",label:"ID",freeze:1,filter_on:1,type:"number"},{key:"name",label:"Nama",freeze:1,freeze_left:"44px",filter_on:1,type:"string",sort:{priority:1,type:"asc"}},{key:"role",label:"Jabatan",filter_on:1,type:"string"},{key:"ktp_no",label:"No KTP",filter_on:1,type:"string"},{key:"sim_no",label:"No SIM",filter_on:1,type:"string"},{key:"bank_code",label:"Nama Bank",filter_on:1,type:"string"},{key:"rek_no",label:"No Rek",filter_on:1,type:"string"},{key:"rek_name",label:"Nama Rek",filter_on:1,type:"string"},{key:"phone_number",label:"No Tlp",filter_on:1,type:"string"},{key:"birth_place",label:"Tempat Lahir",filter_on:1,type:"string"},{key:"birth_date",label:"Tanggal Lahir",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"tmk",label:"TMK",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"address",label:"Alamat",filter_on:1,type:"string"},{key:"status",label:"Status",filter_on:1,type:"string"},{key:"attachment_1_type",label:"File",type:"string"},{key:"bpjs_kesehatan",label:"BPJS Kesehatan",class:" justify-end",type:"number",filter_on:1},{key:"bpjs_jamsos",label:"BPJS Jamsos",class:" justify-end",type:"number",filter_on:1},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:1},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:1,type:"string",filter_on:1}]);b(()=>l.value>-1&&[void 0,0].indexOf(d.value.deleted)>-1&&f().checkPermission("employee.create"));const be=b(()=>["available","all","unapprove"].indexOf(y.value)>-1&&f().checkPermission("employee.create")),ke=b(()=>l.value>-1&&[void 0,0].indexOf(d.value.deleted)>-1&&(f().checkPermission("employee.val")&&[void 0,0].indexOf(d.value.val)>-1||f().checkPermission("employee.val1")&&[void 0,0].indexOf(d.value.val1)>-1)&&f().checkPermissions(["employee.modify","employee.detail.modify","employee.detail2.modify"])),he=b(()=>l.value>-1&&[void 0,0].indexOf(d.value.deleted)>-1&&(f().checkPermission("employee.val")&&[void 0,0].indexOf(d.value.val)>-1||f().checkPermission("employee.val1")&&[void 0,0].indexOf(d.value.val1)>-1)),ge=b(()=>l.value>-1&&[void 0,0].indexOf(d.value.deleted)>-1&&f().checkPermission("employee.unval")&&[1].indexOf(d.value.val)>-1),xe=b(()=>l.value>-1&&f().checkPermission("employee.remove")&&[void 0,0].indexOf(d.value.deleted)>-1),we=b(()=>l.value>-1&&f().checkPermission("employee.unremove")&&[1].indexOf(d.value.deleted)>-1),De=b(()=>l.value>-1&&[void 0,0].indexOf(d.value.deleted)>-1&&[1].indexOf(d.value.val)>-1);return(t,e)=>{const p=Fe,x=Me,s=Ie,Ce=Ne,Se=Ee,Pe=ze,$e=Ue,Ae=Re,Z=Ve,Q=He,Oe=Je,Te=Ke,W=Le,je=Ye,Be=qe;return m(),k(et,null,[i("div",st,[u(p,{title:"List Employee"}),i("div",rt,[i("div",it,[i("div",ut,[i("div",dt,[te(i("select",{class:"","onUpdate:modelValue":e[0]||(e[0]=o=>le(y)?y.value=o:null)},ct,512),[[Xe,a(y)]])]),a(be)?(m(),k("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[1]||(e[1]=o=>ne())},[u(x)])):h("",!0),a(ke)?(m(),k("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[2]||(e[2]=o=>se())},[u(s)])):h("",!0),a(l)>-1?(m(),k("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[3]||(e[3]=o=>ue())},[u(Ce)])):h("",!0),a(xe)?(m(),k("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[4]||(e[4]=o=>_e())},[u(Se)])):h("",!0),a(we)?(m(),k("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[5]||(e[5]=o=>me())},[u(Pe)])):h("",!0),a(he)?(m(),k("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[6]||(e[6]=o=>re())},[u($e)])):h("",!0),a(ge)?(m(),k("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[7]||(e[7]=o=>ie())},[u(Ae)])):h("",!0),a(De)?(m(),k("button",{key:7,type:"button",name:"button",class:"m-1 text-sm",onClick:e[8]||(e[8]=o=>ce())}," GEN CODE ")):h("",!0)])]),u(Te,{thead:a(ye),selected:a(l),onSetSelected:e[9]||(e[9]=o=>l.value=o),tbody:a(n),fnCallData:Y,scrolling:a(c),onSetScrollingPage:e[10]||(e[10]=o=>a(c).page=o),onDoFilter:e[11]||(e[11]=o=>q()),rowBgColor:ae},{val:w(({item:o})=>[o.val?(m(),U(Q,{key:1})):(m(),U(Z,{key:0}))]),val1:w(({item:o})=>[o.val1?(m(),U(Q,{key:1})):(m(),U(Z,{key:0}))]),bank_code:w(({item:o})=>{var j;return[D(J((j=o.bank)==null?void 0:j.code),1)]}),attachment_1_type:w(({item:o})=>[u(Oe,{value:o.attachment_1_type},null,8,["value"])]),deleted_by_username:w(({item:o})=>{var j;return[D(J((j=o.deleted_by)==null?void 0:j.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])]),u(W,{type:"delete",show:a(T),data:a(G),fnClose:de,fnConfirm:pe,enabledOk:a(H)},{footer:w(()=>[D(" Masukkan Alasan Penghapusan: "),i("div",ft,[te(i("textarea",{"onUpdate:modelValue":e[12]||(e[12]=o=>le(P)?P.value=o:null)},null,512),[[lt,a(P)]])])]),_:1},8,["show","data","enabledOk"]),u(je,{show:a(N),fnClose:()=>{N.value=!1},id:a(V),p_data:a(n),is_copy:a(C)},null,8,["show","fnClose","id","p_data","is_copy"]),u(Be,{show:a(O),fnClose:()=>{O.value=!1},id:a(E),p_data:a(n),it_state:a(S)},null,8,["show","fnClose","id","p_data","it_state"]),u(W,{type:"custome",show:a(z),fnClose:()=>z.value=!1,fnConfirm:ve},{words:w(()=>[D(" Alasan Keluar Sebelumnya : "),i("b",yt,J(a(n)[a(l)].deleted_reason),1),D(". "),bt,D(" Pekerja telah "),kt,D(" , yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"])],64)}}},rl=nt(ht,[["__scopeId","data-v-df94ca01"]]);export{rl as default};
