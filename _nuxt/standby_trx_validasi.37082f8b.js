import{_ as $}from"./HeaderPopup.vue.83dedf7d.js";import{_ as H}from"./WidthMiniPart.vue.0f7a64f6.js";import{r as m,f as R,G as I,j as q,m as O,M as z,o as d,c as n,a as e,b as S,t as a,k as t,F as B,y as E,l as w,x as J,E as K,A as g,B as F,p as U,e as G}from"./entry.1da81da6.js";import{u as L}from"./useUtils.5bacb879.js";import{u as T}from"./useMyFetch.bacdf18d.js";import{_ as W}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.67ba30c4.js";const o=_=>(U("data-v-ef12b1b7"),_=_(),G(),_),Q={class:"box-fixed"},X={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Z={class:"w-full flex flex-col items-center grow overflow-auto"},ee={class:"w-full flex flex-row flex-wrap"},se={class:"w-full sm:w-9/12 flex px-2 py-3"},te={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},le=o(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),ae={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},oe=o(()=>e("label",{for:""},"ID",-1)),ie={class:"card-border"},re={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_e=o(()=>e("label",{for:""},"Name",-1)),de={class:"card-border"},ne={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ce=o(()=>e("label",{for:""},"Type",-1)),ve={class:"card-border"},fe={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ue=o(()=>e("label",{for:""},"Amount",-1)),pe={class:"card-border"},me={class:"w-full sm:w-3/12 flex px-2 py-3"},we={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},xe=o(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),he={class:"w-6/12 flex flex-col flex-wrap p-1"},be={class:"card-border"},ye={class:"w-6/12 flex flex-col flex-wrap p-1"},ge={class:"card-border"},ke={class:"w-full flex flex-wrap"},Ne={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},De=o(()=>e("label",{for:""},"Supir",-1)),Se={class:"card-border !flex"},Ye={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ce=o(()=>e("label",{for:""},"Kernet",-1)),Me={class:"card-border !flex"},Ae={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ie=o(()=>e("label",{for:""},"No Pol",-1)),Be={class:"card-border"},Fe={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Te=o(()=>e("label",{for:""},"Tujuan",-1)),Ve={class:"card-border"},je={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pe=o(()=>e("label",{for:""},"Note For Remarks",-1)),$e={class:"card-border"},He={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Re=o(()=>e("label",{for:""},"Referensi",-1)),qe={class:"card-border"},Oe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ze={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ee=o(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Je={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ke=o(()=>e("label",{for:""}," Code",-1)),Ue={class:"card-border"},Ge={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Le=o(()=>e("label",{for:""},"Desc",-1)),We={class:"card-border disabled"},Qe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Xe={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ze=o(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),es={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ss=o(()=>e("label",{for:""},"No",-1)),ts={class:"card-border disabled"},ls={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},as=o(()=>e("label",{for:""},"Total",-1)),os={class:"card-border disabled"},is={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},rs={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},_s=o(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ds={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ns=o(()=>e("label",{for:""},"No",-1)),cs={class:"card-border disabled"},vs={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},fs=o(()=>e("label",{for:""},"Total",-1)),us={class:"card-border disabled"},ps={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},ms={class:"w-full",role:"sticky"},ws={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},xs={class:"sticky -top-1 !z-[2]"},hs=["colspan"],bs=o(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),ys={ref:"to_move"},gs=["data-index"],ks={class:"cell"},Ns={class:"w-full h-full flex items-center justify-center relative"},Ds={class:"cell"},Ss={class:"w-full h-full flex items-center justify-center"},Ys={class:"w-full flex items-center justify-end"},Cs={class:"w-full flex flex-wrap p-3 items-center"},Ms=o(()=>e("div",null," Di Validasi oleh : ",-1)),As={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Is={key:0},Bs={key:1},Fs={key:2},Ts={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const c=_,{$moment:h}=K(),{pointFormat:k}=L(),s=m({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),Y=R("token"),C=m({}),M=m(null),N=m([]),A={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:""},v=m(JSON.parse(JSON.stringify(A))),f=m(JSON.parse(JSON.stringify(A))),V=async()=>{g().loading_full=!0,C.value={};const i=new FormData;let r="post",p=c.id;p==0||(i.append("id",p),i.append("_method","PUT"));const{data:l,error:b,status:y}=await T("/standby_trx_validasi",{method:r,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:i,retry:0});if(g().loading_full=!1,y.value==="error"){F().trigger(b,C);return}s.value.val=l.value.val,s.value.val_user=l.value.val_user,s.value.val_by=l.value.val_by,s.value.val_at=l.value.val_at,s.value.val1=l.value.val1,s.value.val1_user=l.value.val1_user,s.value.val1_by=l.value.val1_by,s.value.val1_at=l.value.val1_at,s.value.val2=l.value.val2,s.value.val2_user=l.value.val2_user,s.value.val2_by=l.value.val2_by,s.value.val2_at=l.value.val2_at;let x=c.p_data.map(u=>u.id).indexOf(c.id);x>=-1&&c.p_data.splice(x,1,{...s.value}),c.fnClose()},j=async()=>{g().loading_full=!0;const{data:i,error:r,status:p}=await T("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},params:{id:c.id},retry:0});if(g().loading_full=!1,p.value==="error"){F().trigger(r);return}let l=i.value.data;s.value=l,v.value._.id.val=l.supir_id,v.value._.name.val=l.supir,v.value._.rek_no.val=l.supir_rek_no,v.value._.rek_name.val=l.supir_rek_name,v.value.id=l.supir_id,v.value.name=l.supir,v.value.rek_no=(l.supir_rek_no||"")+" "+(l.supir_rek_name||""),f.value._.id.val=l.kernet_id,f.value._.name.val=l.kernet,f.value._.rek_no.val=l.kernet_rek_no,f.value._.rek_name.val=l.kernet_rek_name,f.value.id=l.kernet_id,f.value.name=l.kernet,f.value.rek_no=(l.kernet_rek_no||"")+" "+(l.kernet_rek_name||""),N.value=i.value.data.details};I(()=>{let i=0;return N.value.forEach(r=>{r.p_status!="Remove"&&(i+=r.amount)}),i});const P=I(()=>!1);return q(()=>c.show,(i,r)=>{i==!0&&(c.is_view==!1&&setTimeout(()=>{M.value.focus()},1),j())},{immediate:!0}),(i,r)=>{var b,y,x;const p=$,l=H;return O((d(),n("section",Q,[e("div",null,[S(p,{title:"Form Transaction Standby Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",X,[e("div",Z,[e("div",ee,[e("div",se,[e("div",te,[le,e("div",ae,[oe,e("div",ie,a(t(s).standby_mst_id),1)]),e("div",re,[_e,e("div",de,a((b=t(s).standby_mst_)==null?void 0:b.name),1)]),e("div",ne,[ce,e("div",ve,a((y=t(s).standby_mst_)==null?void 0:y.tipe),1)]),e("div",fe,[ue,e("div",pe,a(t(k)((x=t(s).standby_mst_)==null?void 0:x.amount)),1)])])]),e("div",me,[e("div",we,[xe,e("div",he,[e("div",be,a(t(s).transition_type),1)]),e("div",ye,[e("div",ge,a(t(s).transition_target),1)])])]),e("div",ke,[e("div",Ne,[De,e("div",Se,[S(l,{selected:t(v)},null,8,["selected"])])]),e("div",Ye,[Ce,e("div",Me,[S(l,{selected:t(f)},null,8,["selected"])])]),e("div",Ae,[Ie,e("div",Be,a(t(s).no_pol),1)]),e("div",Fe,[Te,e("div",Ve,a(t(s).xto),1)]),e("div",je,[Pe,e("div",$e,a(t(s).note_for_remarks),1)]),e("div",He,[Re,e("div",qe,a(t(s).ref),1)])]),e("div",Oe,[e("div",ze,[Ee,e("div",Je,[Ke,e("div",Ue,a(t(s).cost_center_code),1)]),e("div",Ge,[Le,e("div",We,a(t(s).cost_center_desc),1)])])]),e("div",Qe,[e("div",Xe,[Ze,e("div",es,[ss,e("div",ts,a(t(s).pvr_no),1)]),e("div",ls,[as,e("div",os,a(t(k)(t(s).pvr_total||0)),1)])])]),e("div",is,[e("div",rs,[_s,e("div",ds,[ns,e("div",cs,a(t(s).pv_no),1)]),e("div",vs,[fs,e("div",us,a(t(k)(t(s).pv_total)),1)])])]),e("div",ps,[e("div",ms,[e("table",ws,[e("thead",null,[e("tr",xs,[e("td",{colspan:t(P)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,hs)]),bs]),e("tbody",ys,[(d(!0),n(B,null,E(t(N),(u,D)=>(d(),n(B,{key:D},[u.p_status!="Remove"?(d(),n("tr",{key:0,"data-index":D},[e("td",null,a(D+1)+".",1),e("td",ks,[e("div",Ns,a(t(h)(u.tanggal).format("DD-MM-YYYY")),1)]),e("td",Ds,[e("div",Ss,a(u.note),1)])],8,gs)):w("",!0)],64))),128))],512)])])])])]),e("div",Ys,[e("div",Cs,[Ms,t(s).val||t(s).val1||t(s).val2?(d(),n("div",As,[t(s).val?(d(),n("div",Is," App 1 : "+a(t(s).val_by.username)+" ( "+a(t(s).val_at?t(h)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),t(s).val1?(d(),n("div",Bs," App 2 : "+a(t(s).val1_by.username)+" ( "+a(t(s).val1_at?t(h)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),t(s).val2?(d(),n("div",Fs," App 2 : "+a(t(s).val2_by.username)+" ( "+a(t(s).val2_at?t(h)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=u=>_.fnClose())}," Cancel "),_.is_view==0?(d(),n("button",{key:0,ref_key:"it_val",ref:M,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=J(u=>V(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[z,_.show]])}}},zs=W(Ts,[["__scopeId","data-v-ef12b1b7"]]);export{zs as default};
