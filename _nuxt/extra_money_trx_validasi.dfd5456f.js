import{_ as R}from"./HeaderPopup.vue.25b1741f.js";import{_ as F}from"./WidthMiniPart.vue.acac0580.js";import U from"./AttachmentSingle.65068dc6.js";import q from"./CaretTop.8cea7e99.js";import j from"./CaretDown.d81530eb.js";import{r as x,g as G,Q as J,f as K,k as V,K as z,o as d,c as i,a,b as w,t as o,l as t,A as W,n as m,C as Q,d as X,G as Z,x as Y,y as $,p as ee,e as te}from"./entry.ebdaeb24.js";import{u as ae}from"./useUtils.952e33bb.js";import{u as B}from"./useMyFetch.c0de91de.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.7f60d4fc.js";import"./PDFJsView.3cbb42c5.js";const _=v=>(ee("data-v-a4f2c43f"),v=v(),te(),v),oe={class:"box-fixed"},se={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ne={class:"w-full flex flex-col items-center grow overflow-auto"},re={class:"w-full flex flex-row flex-wrap"},_e={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},de=_(()=>a("label",{for:""},"Trx Trp #ID",-1)),ie={class:"card-border"},ve={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ce=_(()=>a("label",{for:""},"Tanggal",-1)),ue={class:"card-border"},me={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},fe=_(()=>a("label",{for:""},"Payment Method",-1)),pe={class:"card-border"},xe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},we=_(()=>a("label",{for:""},"No Pol",-1)),ye={class:"card-border"},he={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},be=_(()=>a("label",{for:""},"Pekerja",-1)),ke={class:"card-border"},ge={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},De=_(()=>a("label",{for:""},"Uang Tambahan",-1)),Ye={class:"card-border"},Ie={class:"w-full flex flex-col flex-wrap p-1"},Me=_(()=>a("label",{for:""},"Note For Remarks",-1)),Ce={class:"text-red-500"},Ne={class:"w-full flex"},Se={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},Te={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},Ae={class:"w-full flex flex-wrap"},He={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Pe=_(()=>a("label",{for:""},"Cost Center Code",-1)),Ve={class:"card-border disabled"},$e={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Be=_(()=>a("label",{for:""},"Cost Center Desc",-1)),Le={class:"card-border disabled"},Oe={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ee=_(()=>a("label",{for:""},"PVR No",-1)),Re={class:"card-border disabled"},Fe={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ue=_(()=>a("label",{for:""},"PVR Total",-1)),qe={class:"card-border disabled"},je={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ge=_(()=>a("label",{for:""},"PV",-1)),Je={class:"card-border disabled"},Ke={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ze=_(()=>a("label",{for:""},"PV Amount",-1)),We={class:"card-border disabled"},Qe={class:"w-full flex items-center justify-end"},Xe={class:"w-full flex flex-wrap p-3 items-center"},Ze=_(()=>a("div",null," Di Validasi oleh : ",-1)),et={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},tt={key:0},at={key:1},lt={key:2},ot={key:3},st={key:4},nt={key:5},rt={key:0,class:"text-xs font-bold"},_t={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},emits:["setID","setIndex"],setup(v,{emit:b}){const r=v,{$moment:f}=Z(),{pointFormat:k}=ae(),S={id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""},e=x({...S}),T=G("token"),I=x({}),A=x(null);x([]);const L={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},O={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""};let M=s=>{s.key=="ArrowUp"&&P(),s.key=="ArrowDown"&&H()};J(()=>{document.removeEventListener("keydown",M)});const c=x(JSON.parse(JSON.stringify(O))),u=x(JSON.parse(JSON.stringify(L))),y=x(""),E=async()=>{y.value="PROSES...",Y().loading_full=!0,I.value={};const s=new FormData;let n="post",h=r.id;h==0||(s.append("id",h),s.append("_method","PUT"));const{data:l,error:g,status:N}=await B("/extra_money_trx_validasi",{method:n,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:s,retry:0});if(Y().loading_full=!1,N.value==="error"){y.value="GAGAL",$().trigger(g,I);return}e.value.val1=l.value.val1,e.value.val1_user=l.value.val1_user,e.value.val1_by=l.value.val1_by,e.value.val1_at=l.value.val1_at,e.value.val2=l.value.val2,e.value.val2_user=l.value.val2_user,e.value.val2_by=l.value.val2_by,e.value.val2_at=l.value.val2_at,e.value.val3=l.value.val3,e.value.val3_user=l.value.val3_user,e.value.val3_by=l.value.val3_by,e.value.val3_at=l.value.val3_at,e.value.val4=l.value.val4,e.value.val4_user=l.value.val4_user,e.value.val4_by=l.value.val4_by,e.value.val4_at=l.value.val4_at,e.value.val5=l.value.val5,e.value.val5_user=l.value.val5_user,e.value.val5_by=l.value.val5_by,e.value.val5_at=l.value.val5_at,e.value.val6=l.value.val6,e.value.val6_user=l.value.val6_user,e.value.val6_by=l.value.val6_by,e.value.val6_at=l.value.val6_at;let D=r.p_data.map(p=>p.id).indexOf(r.id);D>=-1&&r.p_data.splice(D,1,{...e.value}),y.value="BERHASIL"},C=async()=>{y.value="",Y().loading_full=!0;const{data:s,error:n,status:h}=await B("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(Y().loading_full=!1,h.value==="error"){$().trigger(n);return}let l=s.value.data;e.value=l,c.value._raw=l.employee,c.value._.id.val=l.employee.id,c.value._.name.val=l.employee.name,c.value._.rek_no.val=l.employee_rek_no,c.value._.rek_name.val=l.employee_rek_name,c.value.id=l.employee.id,c.value.name=l.employee.name,c.value.rek_no=(l.employee_rek_no||"")+" "+(l.employee_rek_name||""),u.value._raw=l.extra_money,u.value._.id.val=l.extra_money.id,u.value._.xto.val=l.extra_money.xto,u.value._.description.val=l.extra_money.description,u.value._.total.val=k(l.extra_money.total),u.value.id=l.extra_money.id,u.value.name=l.extra_money.xto,u.value.title=(k(l.extra_money.total)||"")+" "+(l.extra_money.description||"")};K(()=>r.show,(s,n)=>{s==!0?(document.addEventListener("keydown",M),e.value={...S},r.is_view==!1&&setTimeout(()=>{A.value.focus()},1),C()):document.removeEventListener("keydown",M)},{immediate:!0});const H=()=>{let s=r.p_data.map(n=>n.id).indexOf(r.id);s!=r.p_data.length-1&&(s++,b("setID",r.p_data[s].id),b("setIndex",s),setTimeout(()=>{C()},100))},P=()=>{let s=r.p_data.map(n=>n.id).indexOf(r.id);s!=0&&(s--,b("setID",r.p_data[s].id),b("setIndex",s),setTimeout(()=>{C()},100))};return(s,n)=>{const h=R,l=F,g=U,N=q,D=j;return V((d(),i("section",oe,[a("div",null,[w(h,{title:"Form Transaction Extra Money Trx Validation",fn:v.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),a("form",se,[a("div",ne,[a("div",re,[a("div",_e,[de,a("div",ie,o(t(e).prev_trx_trp_id),1)]),a("div",ve,[ce,a("div",ue,o(t(f)(t(e).tanggal).format("DD-MM-YYYY")),1)]),a("div",me,[fe,a("div",pe,o(t(e).payment_method.name),1)]),a("div",xe,[we,a("div",ye,o(t(e).no_pol),1)]),a("div",he,[be,a("div",ke,[w(l,{selected:t(c)},null,8,["selected"])])]),a("div",ge,[De,a("div",Ye,[w(l,{selected:t(u)},null,8,["selected"])])]),a("div",Ie,[Me,V(a("textarea",{disabled:"disabled","onUpdate:modelValue":n[0]||(n[0]=p=>t(e).note_for_remarks=p)},null,512),[[W,t(e).note_for_remarks]]),a("p",Ce,o(t(I).note_for_remarks),1)]),a("div",Ne,[a("div",Se,[w(g,{label:"Attachment",value:t(e).attachment_1_preview},null,8,["value"])]),a("div",Te,[w(g,{label:"Attachment",value:t(e).attachment_2_preview},null,8,["value"])])]),a("div",Ae,[a("div",He,[Pe,a("div",Ve,o(t(e).cost_center_code),1)]),a("div",$e,[Be,a("div",Le,o(t(e).cost_center_desc),1)]),a("div",Oe,[Ee,a("div",Re,o(t(e).pvr_no),1)]),a("div",Fe,[Ue,a("div",qe,o(t(k)(t(e).pvr_total||0)),1)]),a("div",je,[Ge,a("div",Je,o(t(e).pv_no),1)]),a("div",Ke,[ze,a("div",We,o(t(k)(t(e).pv_total)),1)])])])]),a("div",Qe,[a("div",Xe,[Ze,t(e).val1||t(e).val2||t(e).val3||t(e).val4||t(e).val5||t(e).val6?(d(),i("div",et,[t(e).val1?(d(),i("div",tt," Kasir : "+o(t(e).val1_by.username)+" ( "+o(t(e).val1_at?t(f)(t(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),t(e).val2?(d(),i("div",at," Mandor : "+o(t(e).val2_by.username)+" ( "+o(t(e).val2_at?t(f)(t(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),t(e).val3?(d(),i("div",lt," KTU/W : "+o(t(e).val3_by.username)+" ( "+o(t(e).val3_at?t(f)(t(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),t(e).val4?(d(),i("div",ot," Logistik : "+o(t(e).val4_by.username)+" ( "+o(t(e).val4_at?t(f)(t(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),t(e).val5?(d(),i("div",st," SPV Logistik : "+o(t(e).val5_by.username)+" ( "+o(t(e).val5_at?t(f)(t(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),t(e).val6?(d(),i("div",nt," MGR Logistik : "+o(t(e).val6_by.username)+" ( "+o(t(e).val6_at?t(f)(t(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0)])):m("",!0)]),a("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:n[1]||(n[1]=p=>P())},[w(N,{class:"black"})]),a("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[2]||(n[2]=p=>v.fnClose())}," Cancel "),v.is_view==0?(d(),i("button",{key:0,ref_key:"it_val",ref:A,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[3]||(n[3]=Q(p=>E(),["prevent"]))},[X(" Validasi "),t(y)!=""?(d(),i("div",rt,o(t(y)),1)):m("",!0)],512)):m("",!0),a("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:n[4]||(n[4]=p=>H())},[w(D,{class:"black"})])])])])],512)),[[z,v.show]])}}},ht=le(_t,[["__scopeId","data-v-a4f2c43f"]]);export{ht as default};
