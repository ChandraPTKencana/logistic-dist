import{_ as T}from"./HeaderPopup.vue.11ee92a1.js";import j from"./AttachmentSingle.402e360f.js";import{r as v,g as q,i as M,f as I,k as U,K,o as p,c as w,a as e,b as $,t as s,l,n as x,C as B,G as R,x as u,y as k,p as z,e as E}from"./entry.389d6e00.js";import{u as H}from"./useUtils.6e229016.js";import{u as S}from"./useMyFetch.7cbf3ab7.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.e27267c1.js";import"./PDFJsView.378efffc.js";const i=n=>(z("data-v-389bed1e"),n=n(),E(),n),L={class:"box-fixed"},O={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},Q={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},W={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},X=i(()=>e("label",{for:""},"Name",-1)),Z={class:"card-border"},ee={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},te=i(()=>e("label",{for:""},"Role",-1)),le={class:"card-border"},ae={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},se=i(()=>e("label",{for:""},"No KTP",-1)),oe={class:"card-border"},ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},de=i(()=>e("label",{for:""},"No SIM",-1)),re={class:"card-border"},ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ce=i(()=>e("label",{for:""},"Bank Code",-1)),_e={class:"card-border"},fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ue=i(()=>e("label",{for:""},"No Rek",-1)),me={class:"card-border"},ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pe=i(()=>e("label",{for:""},"Nama Rek",-1)),we={class:"card-border"},he={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},xe=i(()=>e("label",{for:""},"Phone Number",-1)),be={class:"card-border"},ye={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ge=i(()=>e("label",{for:""},"Tanggal Lahir",-1)),ke={class:"card-border"},Se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ce=i(()=>e("label",{for:""},"Tempat Lahir",-1)),Ae={class:"card-border"},De={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ne=i(()=>e("label",{for:""},"TMK",-1)),Ye={class:"card-border"},Me={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},$e=i(()=>e("label",{for:""},"Alamat",-1)),Be={class:"card-border"},Ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Fe=i(()=>e("label",{for:""},"Status",-1)),Pe={class:"card-border"},Te={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},je=i(()=>e("label",{for:""},"BPJS Kesehatan",-1)),qe={class:"card-border"},Ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ue=i(()=>e("label",{for:""},"BPJS Jamsos",-1)),Ke={class:"card-border"},Re={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},ze={class:"w-full flex items-center justify-end"},Ee={class:"w-full flex flex-wrap p-3 items-center"},He=i(()=>e("div",null," Di Validasi oleh : ",-1)),Je={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Le={key:0},Oe={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const d=n,{$moment:b}=R(),{pointFormat:C}=H(),A={id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""},t=v({...A}),y=q("token"),h=v({}),D=v(null),N=v(null),Y=v([]),V=async()=>{u().loading_full=!0,h.value={};const o=new FormData;let a="post",_=d.id;_==0||(o.append("id",_),o.append("_method","PUT"));const{data:r,error:f,status:c}=await S("/employee_validasi",{method:a,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:o,retry:0});if(u().loading_full=!1,c.value==="error"){k().trigger(f,h);return}t.value.val=r.value.val,t.value.val_user=r.value.val_user,t.value.val_by=r.value.val_by,t.value.val_at=r.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>=-1&&d.p_data.splice(m,1,{...t.value}),d.fnClose()},F=async()=>{u().loading_full=!0,h.value={};const o=new FormData;let a="post",_=d.id;_==0||(o.append("id",_),o.append("_method","PUT"));const{data:r,error:f,status:c}=await S("/employee_unvalidasi",{method:a,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:o,retry:0});if(u().loading_full=!1,c.value==="error"){k().trigger(f,h);return}t.value.val=r.value.val,t.value.val_user=r.value.val_user,t.value.val_by=r.value.val_by,t.value.val_at=r.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>=-1&&d.p_data.splice(m,1,{...t.value}),d.fnClose()},P=async()=>{u().loading_full=!0;const{data:o,error:a,status:_}=await S("/employee",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(u().loading_full=!1,_.value==="error"){k().trigger(a);return}t.value=o.value.data,Y.value=o.value.data.details};return M(()=>{let o=0;return Y.value.forEach(a=>{a.p_status!="Remove"&&(o+=parseInt(a.amount))}),o}),M(()=>!1),I(()=>d.show,(o,a)=>{o==!0&&(t.value={...A},d.it_state==1&&setTimeout(()=>{D.value.focus()},1),d.it_state==0&&setTimeout(()=>{N.value.focus()},1),P())},{immediate:!0}),(o,a)=>{var f;const _=T,r=j;return U((p(),w("section",L,[e("div",null,[$(_,{title:"Form Master Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",O,[e("div",G,[e("div",Q,[e("div",W,[X,e("div",Z,s(l(t).name),1)]),e("div",ee,[te,e("div",le,s(l(t).role),1)]),e("div",ae,[se,e("div",oe,s(l(t).ktp_no),1)]),e("div",ie,[de,e("div",re,s(l(t).sim_no),1)]),e("div",ne,[ce,e("div",_e,s((f=l(t).bank)==null?void 0:f.code),1)]),e("div",fe,[ue,e("div",me,s(l(t).rek_no),1)]),e("div",ve,[pe,e("div",we,s(l(t).rek_name),1)]),e("div",he,[xe,e("div",be,s(l(t).phone_number),1)]),e("div",ye,[ge,e("div",ke,s(l(b)(l(t).birth_date).format("DD-MM-YYYY")),1)]),e("div",Se,[Ce,e("div",Ae,s(l(t).birth_place),1)]),e("div",De,[Ne,e("div",Ye,s(l(b)(l(t).tmk).format("DD-MM-YYYY")),1)]),e("div",Me,[$e,e("div",Be,s(l(t).address),1)]),e("div",Ve,[Fe,e("div",Pe,s(l(t).status),1)]),e("div",Te,[je,e("div",qe,s(l(C)(l(t).bpjs_kesehatan)),1)]),e("div",Ie,[Ue,e("div",Ke,s(l(C)(l(t).bpjs_jamsos)),1)])]),e("div",Re,[$(r,{label:"Attachment",value:l(t).attachment_1_preview,onSetFile:a[0]||(a[0]=c=>l(t).attachment_1=c),onSetPreview:a[1]||(a[1]=c=>l(t).attachment_1_preview=c)},null,8,["value"])])]),e("div",ze,[e("div",Ee,[He,l(t).val?(p(),w("div",Je,[l(t).val?(p(),w("div",Le," App 1 : "+s(l(t).val_by.username)+" ( "+s(l(t).val_at?l(b)(l(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):x("",!0)])):x("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[2]||(a[2]=c=>n.fnClose())}," Cancel "),n.it_state==1?(p(),w("button",{key:0,ref_key:"it_val",ref:D,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[3]||(a[3]=B(c=>V(),["prevent"]))}," Validasi ",512)):x("",!0),n.it_state==0?(p(),w("button",{key:1,ref_key:"it_unval",ref:N,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:a[4]||(a[4]=B(c=>F(),["prevent"]))}," Unvalidasi ",512)):x("",!0)])])])],512)),[[K,n.show]])}}},at=J(Oe,[["__scopeId","data-v-389bed1e"]]);export{at as default};
