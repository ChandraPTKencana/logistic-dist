import{_ as Tt}from"./Header.88a6470d.js";import{_ as At}from"./Plus.3c8f50d3.js";import{_ as jt}from"./Edit.a2b5e212.js";import{_ as Mt}from"./Delete.72c82a5b.js";import{_ as Ct}from"./Signature.95a1d6e6.js";import{_ as Bt,u as Ht,a as St}from"./useDownload.ce08ec27.js";import{_ as Pt}from"./Search.379feab0.js";import{_ as Yt,a as Nt}from"./Check.0562d47c.js";import{_ as It}from"./PopupMini.vue.5aa0b1a8.js";import{_ as Ft}from"./HeaderPopup.vue.d18f8874.js";import{r as d,u as ot,g as Vt,n as z,v as Ot,o as _,c as r,a as t,b as y,t as o,x as e,M as u,z as st,C as at,D as h,E as H,p as zt,e as Lt,K as Ut,I as Et,N as tt,O as Jt,s as Kt,q as Rt,y as et,F as qt,A as Zt,L as Gt,B as lt,T as O,U as Qt}from"./entry.9ff93f6a.js";import{u as it}from"./useUtils.100f5b4a.js";import{u as C}from"./useMyFetch.64042c18.js";import{_ as Wt}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as Xt}from"./Times.97bbe94a.js";import"./client-only.616b8d71.js";import"./InputPointFormat.vue.3c0b9233.js";const i=$=>(zt("data-v-22cde9d3"),$=$(),Lt(),$),te={class:"box-fixed"},ee={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},le={class:"w-full flex flex-col items-center grow overflow-auto"},oe={class:"w-full flex flex-row flex-wrap"},se={class:"w-full flex flex-col flex-wrap p-1"},ae=i(()=>t("label",{for:""},"U.Jalan Per",-1)),ie={class:"card-border"},ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_e=i(()=>t("label",{for:""},"Jenis",-1)),re={class:"card-border"},ce={key:0,class:"w-full flex pt-5"},de={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ue=i(()=>t("label",{for:""},"Tujuan",-1)),fe={class:"card-border"},ve={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pe=i(()=>t("label",{for:""},"Tipe",-1)),me={class:"card-border"},he={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},we=i(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),be={class:"card-border"},xe={key:1,class:"w-full flex pb-5"},ke={class:"w-full sm:w-8/12 md:w-9/12 lg:w-9/12 flex flex-col flex-wrap p-1"},ge=i(()=>t("label",{for:""},"PV",-1)),ye={class:"card-border"},De={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},$e=i(()=>t("label",{for:""},"Total Dari PV",-1)),Te={class:"card-border"},Ae={key:2,class:"w-full flex flex-col flex-wrap p-1"},je=i(()=>t("label",{for:""},"Tiket A",-1)),Me={class:"card-border"},Ce={key:3,class:"w-full flex flex-wrap"},Be={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},He=i(()=>t("label",{for:""},"Bruto dari Tiket",-1)),Se={class:"card-border"},Pe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ye=i(()=>t("label",{for:""},"Tara dari Tiket",-1)),Ne={class:"card-border"},Ie={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Fe=i(()=>t("label",{for:""},"Netto dari Tiket",-1)),Ve={class:"card-border"},Oe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ze=i(()=>t("label",{for:""},"Supir",-1)),Le={class:"card-border"},Ue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ee=i(()=>t("label",{for:""},"No Pol",-1)),Je={class:"card-border"},Ke={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Re=i(()=>t("label",{for:""},"In At",-1)),qe={class:"card-border"},Ze={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ge=i(()=>t("label",{for:""},"Out At",-1)),Qe={class:"card-border"},We={key:4,class:"w-full flex flex-col flex-wrap p-1"},Xe=i(()=>t("label",{for:""},"Tiket B",-1)),tl={class:"card-border"},el={key:5,class:"w-full flex flex-wrap"},ll={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ol=i(()=>t("label",{for:""},"Bruto dari Tiket",-1)),sl={class:"card-border"},al={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},il=i(()=>t("label",{for:""},"Tara dari Tiket",-1)),nl={class:"card-border"},_l={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},rl=i(()=>t("label",{for:""},"Netto dari Tiket",-1)),cl={class:"card-border"},dl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ul=i(()=>t("label",{for:""},"Supir",-1)),fl={class:"card-border"},vl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pl=i(()=>t("label",{for:""},"No Pol",-1)),ml={class:"card-border"},hl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},wl=i(()=>t("label",{for:""},"In At",-1)),bl={class:"card-border"},xl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},kl=i(()=>t("label",{for:""},"Out At",-1)),gl={class:"card-border"},yl={key:6,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Dl=i(()=>t("label",{for:""},"Bruto",-1)),$l={class:"card-border"},Tl={key:7,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Al=i(()=>t("label",{for:""},"Tara",-1)),jl={class:"card-border"},Ml={key:8,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Cl=i(()=>t("label",{for:""},"Netto",-1)),Bl={class:"card-border"},Hl={key:9,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Sl=i(()=>t("label",{for:""},"In At",-1)),Pl={class:"card-border"},Yl={key:10,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nl=i(()=>t("label",{for:""},"Out At",-1)),Il={class:"card-border"},Fl={key:11,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Vl=i(()=>t("label",{for:""},"Supir",-1)),Ol={class:"card-border"},zl={key:12,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ll=i(()=>t("label",{for:""},"Kernet",-1)),Ul={class:"card-border"},El={key:13,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Jl=i(()=>t("label",{for:""},"No Pol",-1)),Kl={class:"card-border"},Rl={class:"w-full flex items-center justify-end"},ql={class:"w-full flex flex-wrap p-3 items-center"},Zl=i(()=>t("div",null," Di Validasi oleh : ",-1)),Gl={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Ql={key:0},Wl={key:1},Xl={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup($){const b=$,{$moment:x}=at(),{pointFormat:c}=it(),l=d({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),A=ot("token"),S=async()=>{h().loading_full=!0;const D=new FormData;let k="post",j=b.id;j==0||(D.append("id",j),D.append("_method","PUT"));const{data:g,error:p,status:M}=await C("/trx_trp_validasi",{method:k,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:D,retry:0});if(h().loading_full=!1,M.value==="error"){H().trigger(p);return}l.value.val=g.value.val,l.value.val_user=g.value.val_user,l.value.val_by=g.value.val_by,l.value.val_at=g.value.val_at,l.value.val1=g.value.val1,l.value.val1_user=g.value.val1_user,l.value.val1_by=g.value.val1_by,l.value.val1_at=g.value.val1_at;let v=b.p_data.map(m=>m.id).indexOf(b.id);v>=-1&&b.p_data.splice(v,1,{...l.value}),b.fnClose()},f=async()=>{h().loading_full=!0;const{data:D,error:k,status:j}=await C("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:b.id},retry:0});if(h().loading_full=!1,j.value==="error"){H().trigger(k);return}l.value=D.value.data};return Vt(()=>b.show,(D,k)=>{D==!0&&f()},{immediate:!0}),(D,k)=>{const j=Ft;return z((_(),r("section",te,[t("div",null,[y(j,{title:"Form Transaction Validation",fn:$.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ee,[t("div",le,[t("div",oe,[t("div",se,[ae,t("div",ie,o(e(l).tanggal?e(x)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",ne,[_e,t("div",re,o(e(l).jenis),1)]),e(l).jenis!=""?(_(),r("div",ce,[t("div",de,[ue,t("div",fe,o(e(l).xto),1)]),t("div",ve,[pe,t("div",me,o(e(l).tipe),1)]),t("div",he,[we,t("div",be,o(e(c)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),r("div",xe,[t("div",ke,[ge,t("div",ye,o(e(l).pv_no),1)]),t("div",De,[$e,t("div",Te,o(e(c)(e(l).pv_total||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),r("div",Ae,[je,t("div",Me,o(e(l).ticket_a_no),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",Ce,[t("div",Be,[He,t("div",Se,o(e(c)(e(l).ticket_a_bruto||0)),1)]),t("div",Pe,[Ye,t("div",Ne,o(e(c)(e(l).ticket_a_tara||0)),1)]),t("div",Ie,[Fe,t("div",Ve,o(e(c)(e(l).ticket_a_netto||0)),1)]),t("div",Oe,[ze,t("div",Le,o(e(l).ticket_a_supir),1)]),t("div",Ue,[Ee,t("div",Je,o(e(l).ticket_a_no_pol),1)]),t("div",Ke,[Re,t("div",qe,o(e(l).ticket_a_in_at?e(x)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",Ze,[Ge,t("div",Qe,o(e(l).ticket_a_out_at?e(x)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="TBS"?(_(),r("div",We,[Xe,t("div",tl,o(e(l).ticket_b_no),1)])):u("",!0),e(l).jenis=="TBS"?(_(),r("div",el,[t("div",ll,[ol,t("div",sl,o(e(c)(e(l).ticket_b_bruto||0)),1)]),t("div",al,[il,t("div",nl,o(e(c)(e(l).ticket_b_tara||0)),1)]),t("div",_l,[rl,t("div",cl,o(e(c)(e(l).ticket_b_netto||0)),1)]),t("div",dl,[ul,t("div",fl,o(e(l).ticket_b_supir),1)]),t("div",vl,[pl,t("div",ml,o(e(l).ticket_b_no_pol),1)]),t("div",hl,[wl,t("div",bl,o(e(l).ticket_b_in_at?e(x)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",xl,[kl,t("div",gl,o(e(l).ticket_b_out_at?e(x)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",yl,[Dl,t("div",$l,o(e(c)(e(l).ticket_b_bruto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Tl,[Al,t("div",jl,o(e(c)(e(l).ticket_b_tara||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Ml,[Cl,t("div",Bl,o(e(c)(e(l).ticket_b_netto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Hl,[Sl,t("div",Pl,o(e(l).ticket_b_in_at?e(x)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis=="CPO"?(_(),r("div",Yl,[Nl,t("div",Il,o(e(l).ticket_b_out_at?e(x)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",Fl,[Vl,t("div",Ol,o(e(l).supir),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",zl,[Ll,t("div",Ul,o(e(l).kernet),1)])):u("",!0),e(l).jenis!=""?(_(),r("div",El,[Jl,t("div",Kl,o(e(l).no_pol),1)])):u("",!0)])]),t("div",Rl,[t("div",ql,[Zl,e(l).val||e(l).val1?(_(),r("div",Gl,[e(l).val?(_(),r("div",Ql," App 1 : "+o(e(l).val_by.username)+" ( "+o(e(l).val_at?e(x)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val1?(_(),r("div",Wl," App 2 : "+o(e(l).val1_by.username)+" ( "+o(e(l).val1_at?e(x)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:k[0]||(k[0]=g=>$.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:k[1]||(k[1]=st(g=>S(),["prevent"]))}," Validasi ")])])])],512)),[[Ot,$.show]])}}},to=Wt(Xl,[["__scopeId","data-v-22cde9d3"]]),eo={class:"w-full h-full flex flex-col"},lo={class:"w-full flex grow flex-col overflow-auto h-0"},oo={class:"w-full flex"},so={action:"#",class:"w-full flex p-1"},ao={class:"grow"},io=t("div",{class:"font-bold"}," Keyword ",-1),no={class:"pl-1"},_o=t("div",{class:"font-bold"}," Sort By ",-1),ro=Qt('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),co=[ro],uo={class:"pl-1"},fo=t("div",{class:"font-bold"}," Sort Order ",-1),vo=t("option",{value:"asc"},"Asc",-1),po=t("option",{value:"desc"},"Desc",-1),mo=[vo,po],ho={class:"flex items-end pl-1"},wo={class:"w-full flex justify-center items-center grow h-0 p-1"},bo={key:0,class:""},xo={class:"tacky"},ko=t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"Status"),t("th",null,"App 1"),t("th",null,"App 2"),t("th",null,"ID"),t("th",null,"U.Jalan Per"),t("th",null,"Tujuan"),t("th",null,"Tipe"),t("th",null,"Jenis"),t("th",null,"Amount"),t("th",null,"PV No"),t("th",null,"PV Total"),t("th",null,"Ticket A No"),t("th",null,"Ticket A Bruto"),t("th",null,"Ticket A Tara"),t("th",null,"Ticket A Netto"),t("th",null,"Ticket A Supir"),t("th",null,"Ticket A No Pol"),t("th",null,"Ticket A In At"),t("th",null,"Ticket A Out At"),t("th",null,"Ticket B No"),t("th",null,"Ticket B Bruto"),t("th",null,"Ticket B Tara"),t("th",null,"Ticket B Netto"),t("th",null,"Ticket B Supir"),t("th",null,"Ticket B No Pol"),t("th",null,"Ticket B In At"),t("th",null,"Ticket B Out At"),t("th",null,"Supir"),t("th",null,"Kernet"),t("th",null,"No Pol"),t("th",null,"Created At"),t("th",null,"Updated At")])],-1),go=["onClick"],yo={class:"flex items-center justify-center"},Do={class:"flex items-center justify-center"},$o={class:"flex items-center justify-center"},To={class:"bold"},Ao={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},jo={class:"relative",style:{width:"95%",height:"90%"}},Mo={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Co=["src"],Zo={__name:"index",async setup($){let b,x;const{$moment:c}=at(),{pointFormat:T}=it(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="created_at:desc";const A=ot("token"),{data:S}=([b,x]=Ut(async()=>Gt(async()=>{h().loading_full=!0;let n=[],a=[],w=[],B=[];const[P,Y]=await Promise.all([C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},retry:0}),C("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},retry:0})]);return P.status.value!=="error"&&(n=P.data.value.data),P.status.value==="error"?(H().trigger(P.error),{trx_trps:n,list_ujalan:a,list_ticket:w,list_pv:B}):(Y.status.value!=="error"&&(a=Y.data.value.list_ujalan,w=Y.data.value.list_ticket,B=Y.data.value.list_pv),h().loading_full=!1,{trx_trps:n,list_ujalan:a,list_ticket:w,list_pv:B})},"$pFLmKcrKj9")),b=await b,x(),b),f=d(S.value.trx_trps||[]),D=d(S.value.list_ujalan),k=d(S.value.list_ticket),j=d(S.value.list_pv),g=async()=>{h().loading_full=!0;const{data:n,error:a,status:w}=await C("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:l,retry:0});if(h().loading_full=!1,w.value==="error"){H().trigger(a);return}D.value=n.value.list_ujalan,k.value=n.value.list_ticket,j.value=n.value.list_pv},p=d(""),M=d({field:"created_at",by:"desc"}),v=d(-1),m=d({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),nt=()=>{l.like="",p.value!=""&&(l.like=`id:%${p.value}%,xto:%${p.value}%,jenis:%${p.value}%,pv_no:%${p.value}%,ticket_a_no:%${p.value}%,ticket_b_no:%${p.value}%,nopol:%${p.value}%,supir:%${p.value}%,kernet:%${p.value}%`),l.sort="",M.value.field&&(l.sort=M.value.field+":"+M.value.by)},I=d(null),K=async()=>{h().loading_full=!0,m.value.may_get_data=!1,l.page=m.value.page,l.page==1&&(f.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(f.value[0]));const{data:n,error:a,status:w}=await C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:l,retry:0});if(h().loading_full=!1,m.value.may_get_data=!0,w.value==="error"){H().trigger(a);return}m.value.page==1?(f.value=n.value.data,I.value&&(I.value.scrollTop=0)):m.value.page>1&&(f.value=[...f.value,...n.value.data]),n.value.data.length==0&&(m.value.is_last_record=!0)},_t=async()=>{if(!m.value.may_get_data)return;let n=I.value;if(n.scrollLeft!=m.value.scrollLeft){m.value.scrollLeft=n.scrollLeft;return}m.value.is_last_record||!(Math.round(n.scrollTop)+n.clientHeight>=n.scrollHeight-1)||(m.value.page++,await K())},rt=()=>{m.value.page=1,m.value.is_last_record=!1,nt(),K()};Et();const F=d(!1),L=d(0),ct=()=>{L.value=0,F.value=!0},{display:V}=tt();Jt(tt());const dt=()=>{v.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(L.value=f.value[v.value].id,F.value=!0)},U=d(!1),R=d(0),ut=()=>{v.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=f.value[v.value].id,U.value=!0)},q=d({}),N=d(!1),ft=async()=>{N.value&&(N.value=!1)},vt=()=>{v.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value={id:f.value[v.value].id},N.value=!0)},pt=async()=>{h().loading_full=!0;const n=new FormData;n.append("id",f.value[v.value].id),n.append("_method","DELETE");const{data:a,error:w,status:B}=await C("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:n,retry:0});if(h().loading_full=!1,B.value==="error"){H().trigger(w);return}f.value.splice(v.value,1),v.value=-1,N.value=!1},{downloadFile:mt,printHtml:ht}=Ht(),E=d(!1),Z=d(""),G=async()=>{if(E.value==!0){E.value=!1;return}if(v.value==-1){V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}h().loading_full=!0;const{data:n,error:a,status:w}=await C("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:f.value[v.value].id},retry:0});if(h().loading_full=!1,w.value==="error"){H().trigger(a);return}ht(n.value.html,318)},wt=()=>{mt(Z.value)},Q=n=>n.pv_id<=0||n.ticket_a_id<=0||n.jenis=="TBS"&&n.ticket_b_id<=0?0:1;return(n,a)=>{const w=Tt,B=At,P=jt,Y=Mt,bt=Ct,xt=St,kt=Pt,W=Yt,X=Nt,gt=It,yt=Bt,Dt=to,$t=Xt;return _(),r("div",eo,[y(w,{title:"List Transaction"}),t("div",lo,[t("div",oo,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[0]||(a[0]=s=>ct())},[y(B)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=s=>dt())},[y(P)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=s=>vt())},[y(Y)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=s=>ut())},[y(bt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[4]||(a[4]=s=>G())},[y(xt)])]),t("form",so,[t("div",ao,[io,z(t("input",{class:"",type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>Rt(p)?p.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[Kt,e(p)]])]),t("div",no,[_o,z(t("select",{class:"","onUpdate:modelValue":a[6]||(a[6]=s=>e(M).field=s)},co,512),[[et,e(M).field]])]),t("div",uo,[fo,z(t("select",{class:"","onUpdate:modelValue":a[7]||(a[7]=s=>e(M).by=s)},mo,512),[[et,e(M).by]])]),t("div",ho,[t("button",{class:"",type:"submit",name:"button",onClick:a[8]||(a[8]=st(s=>rt(),["prevent"]))},[y(kt,{class:"text-2xl"})])])]),t("div",wo,[e(f).length==0?(_(),r("div",bo," Maaf Tidak Ada Record ")):(_(),r("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:I,onScroll:_t},[t("table",xo,[ko,t("tbody",null,[(_(!0),r(qt,null,Zt(e(f),(s,J)=>(_(),r("tr",{key:J,onClick:Bo=>v.value=J,class:lt(e(v)==J?"active":"")},[t("td",null,[t("div",yo,[t("div",{class:lt(["text-white text-xs px-2 py-1 rounded-lg",Q(s)?"bg-green-600":"bg-red-600"])},o(Q(s)?"Done":"Not Done"),3)])]),t("td",null,[t("div",Do,[s.val?(_(),O(X,{key:1})):(_(),O(W,{key:0}))])]),t("td",null,[t("div",$o,[s.val1?(_(),O(X,{key:1})):(_(),O(W,{key:0}))])]),t("td",To,o(s.id),1),t("td",null,o(s.tanggal?e(c)(s.tanggal).format("DD-MM-Y"):""),1),t("td",null,o(s.xto),1),t("td",null,o(s.tipe),1),t("td",null,o(s.jenis),1),t("td",null,o(e(T)(s.amount)),1),t("td",null,o(s.pv_no),1),t("td",null,o(e(T)(s.pv_total)),1),t("td",null,o(s.ticket_a_no),1),t("td",null,o(e(T)(s.ticket_a_bruto)),1),t("td",null,o(e(T)(s.ticket_a_tara)),1),t("td",null,o(e(T)(s.ticket_a_netto)),1),t("td",null,o(s.ticket_a_supir),1),t("td",null,o(s.ticket_a_no_pol),1),t("td",null,o(s.ticket_a_in_at?e(c)(s.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_a_out_at?e(c)(s.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_no),1),t("td",null,o(e(T)(s.ticket_b_bruto)),1),t("td",null,o(e(T)(s.ticket_b_tara)),1),t("td",null,o(e(T)(s.ticket_b_netto)),1),t("td",null,o(s.ticket_b_supir),1),t("td",null,o(s.ticket_b_no_pol),1),t("td",null,o(s.ticket_b_in_at?e(c)(s.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_out_at?e(c)(s.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.supir),1),t("td",null,o(s.kernet),1),t("td",null,o(s.no_pol),1),t("td",null,o(s.created_at?e(c)(s.created_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.updated_at?e(c)(s.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,go))),128))])])],544))])]),y(gt,{type:"delete",show:e(N),data:e(q),fnClose:ft,fnConfirm:pt},null,8,["show","data"]),y(yt,{show:e(F),fnClose:()=>{F.value=!1},fnLoadDBData:g,id:e(L),p_data:e(f),list_ujalan:e(D),list_ticket:e(k),list_pv:e(j)},null,8,["show","fnClose","id","p_data","list_ujalan","list_ticket","list_pv"]),y(Dt,{show:e(U),fnClose:()=>{U.value=!1},id:e(R),p_data:e(f)},null,8,["show","fnClose","id","p_data"]),e(E)?(_(),r("div",Ao,[t("div",jo,[t("div",Mo,[y($t,{style:{color:"black",cursor:"pointer"},onClick:a[9]||(a[9]=s=>G())})]),t("iframe",{ref:"iframe",width:"100%",height:"100%",src:e(Z).dataBase64},null,8,Co),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:a[10]||(a[10]=s=>wt())})])])):u("",!0)])}}};export{Zo as default};
