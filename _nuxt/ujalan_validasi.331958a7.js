import{_ as $}from"./HeaderPopup.vue.3737b028.js";import M from"./Times.24a44e7a.js";import R from"./Check.032652e3.js";import{r as v,g as U,i as N,f as E,k as P,J,o as c,c as r,a as e,b as Q,t as l,l as t,d as y,F as b,D as S,E as m,z as V,n as x,C as G,G as K,x as g,y as z,p as L,e as O}from"./entry.2c6f7c1f.js";import{u as W}from"./useUtils.8be4dd3c.js";import{u as B}from"./useMyFetch.d8156c5d.js";import{_ as X}from"./_plugin-vue_export-helper.c27b6911.js";const a=u=>(L("data-v-bacb7aba"),u=u(),O(),u),Z={class:"box-fixed"},ee={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},te={class:"w-full flex flex-col items-center grow overflow-auto"},se={class:"w-full flex flex-row flex-wrap"},le={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ae=a(()=>e("label",{for:""},"To",-1)),oe={class:"card-border"},ce={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ne=a(()=>e("label",{for:""},"Jenis",-1)),ie={class:"card-border"},re={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_e=a(()=>e("label",{for:""},"Harga",-1)),de={class:"card-border"},ue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},fe=a(()=>e("label",{for:""},"Asal Peralihan",-1)),he={class:"card-border"},pe={class:"w-full sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},me=a(()=>e("label",{for:""},"Tipe",-1)),xe={class:"card-border"},we={class:"w-full sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ve=a(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),ye={class:"card-border"},be={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},ge={class:"w-full p-0 2xl:pr-1 2xl:w-1/2 2xl:h-full 2xl:overflow-auto"},ke={class:"w-full",role:"sticky"},je={class:"tacky w-full",style:{"white-space":"normal"}},De=a(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Uang Jalan ")],-1)),Ce={class:"sticky top-8 !z-[2]"},Ae=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),qe=a(()=>e("th",null,"Desc",-1)),Fe=a(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Harga @",-1)),Ne=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"Qty",-1)),Se={class:"min-w-[100px] !w-[100px] max-w-[100px]"},Ve=a(()=>e("br",null,null,-1)),ze={class:"text-sm"},Be=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"For Remarks",-1)),Te={ref:"to_move"},Ye=["data-index"],He={class:"cell"},Ie={class:"w-full h-auto flex items-center justify-center"},$e={class:"cell bold"},Me={class:"w-full h-auto flex items-center justify-center"},Re={class:"cell"},Ue={class:"w-full h-auto flex items-center justify-center"},Ee={class:"cell"},Pe={class:"w-full h-auto flex items-center justify-center"},Je={class:"cell"},Qe={class:"w-full h-auto flex items-center justify-center"},Ge={class:"w-full px-0 py-2 2xl:pl-1 2xl:py-0 2xl:w-1/2 2xl:h-full 2xl:overflow-auto"},Ke={class:"w-full",role:"sticky"},Le={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Oe=a(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"9",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),We={class:"sticky top-8 !z-[2]"},Xe=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),Ze=a(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),et=a(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),tt=a(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),st=a(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),lt=a(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Amount",-1)),at=a(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Qty",-1)),ot=a(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),ct={class:"min-w-[100px] !w-[100px] max-w-[100px]"},nt=a(()=>e("br",null,null,-1)),it={class:"text-sm"},rt={ref:"to_move"},_t=["data-index"],dt={class:"w-full h-auto flex items-center justify-center"},ut={class:"w-full h-auto flex items-center justify-center"},ft={class:"w-full h-auto flex items-center justify-center"},ht={key:0,class:"cell"},pt={class:"w-full h-auto flex items-center justify-center"},mt={class:"w-full h-auto flex items-center justify-center"},xt={class:"cell"},wt={class:"w-full h-auto flex items-center justify-center"},vt={class:"w-full flex items-center justify-end"},yt={class:"w-full flex flex-wrap p-3 items-center"},bt=a(()=>e("div",null," Di Validasi oleh : ",-1)),gt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},kt={key:0},jt={key:1},Dt={__name:"ujalan_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(u){const h=u,{$moment:D}=K(),{pointFormat:f}=W(),s=v({...{id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),C=U("token"),A=v({}),q=v(null),F=v([]),k=v([]),T=async()=>{g().loading_full=!0,A.value={};const n=new FormData;let i="post",w=h.id;w==0||(n.append("id",w),n.append("_method","PUT"));const{data:_,error:j,status:o}=await B("/ujalan_validasi",{method:i,headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},body:n,retry:0});if(g().loading_full=!1,o.value==="error"){z().trigger(j,A);return}s.value.val=_.value.val,s.value.val_user=_.value.val_user,s.value.val_by=_.value.val_by,s.value.val_at=_.value.val_at,s.value.val1=_.value.val1,s.value.val1_user=_.value.val1_user,s.value.val1_by=_.value.val1_by,s.value.val1_at=_.value.val1_at;let d=h.p_data.map(I=>I.id).indexOf(h.id);d>=-1&&h.p_data.splice(d,1,{...s.value}),h.fnClose()},Y=async()=>{g().loading_full=!0;const{data:n,error:i,status:w}=await B("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${C.value}`,Accept:"application/json"},params:{id:h.id},retry:0});if(g().loading_full=!1,w.value==="error"){z().trigger(i);return}s.value=n.value.data,F.value=n.value.data.details,k.value=n.value.data.details2},H=N(()=>{let n=0;return k.value.forEach(i=>{i.p_status!="Remove"&&(n+=i.qty*i.amount)}),n}),p=N(()=>!1);return E(()=>h.show,(n,i)=>{n==!0&&(h.is_view==!1&&setTimeout(()=>{q.value.focus()},1),Y())},{immediate:!0}),(n,i)=>{const w=$,_=M,j=R;return P((c(),r("section",Z,[e("div",null,[Q(w,{title:"Form Ujalan Validation",fn:u.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",ee,[e("div",te,[e("div",se,[e("div",le,[ae,e("div",oe,l(t(s).xto),1)]),e("div",ce,[ne,e("div",ie,l(t(s).jenis),1)]),e("div",re,[_e,e("div",de,l(t(f)(t(s).harga||0)),1)]),e("div",ue,[fe,e("div",he,l(t(s).transition_from),1)]),e("div",pe,[me,e("div",xe,l(t(s).tipe),1)]),e("div",we,[ve,e("div",ye,l(t(s).note_for_remarks),1)])]),e("div",be,[e("div",ge,[e("div",ke,[e("table",je,[e("thead",null,[De,e("tr",Ce,[Ae,qe,Fe,Ne,e("th",Se,[y("Total "),Ve,y(),e("span",ze,"("+l(t(f)(t(s).harga||0))+")",1)]),Be])]),e("tbody",Te,[(c(!0),r(b,null,S(t(F),(o,d)=>(c(),r(b,{key:d},[o.p_status!="Remove"?(c(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",He,[e("div",Ie,l(o.xdesc),1)]),e("td",$e,[e("div",Me,l(t(f)(o.harga||0)),1)]),e("td",Re,[e("div",Ue,l(t(f)(o.qty||0)),1)]),e("td",Ee,[e("div",Pe,l(t(f)(o.qty*o.harga||0)),1)]),e("td",Je,[e("div",Qe,[e("div",{class:m(["text-white rounded text-xl w-5 h-5",o.for_remarks?"bg-green-600":"bg-red-600"])},[o.for_remarks==0?(c(),V(_,{key:0})):(c(),V(j,{key:1}))],2)])])],8,Ye)):x("",!0)],64))),128))],512)])])]),e("div",Ge,[e("div",Ke,[e("table",Le,[e("thead",null,[Oe,e("tr",We,[Xe,Ze,et,tt,st,lt,at,ot,e("th",ct,[y("Total "),nt,y(),e("span",it,"("+l(t(f)(t(H)))+")",1)])])]),e("tbody",rt,[(c(!0),r(b,null,S(t(k),(o,d)=>(c(),r(b,{key:d},[o.p_status!="Remove"?(c(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",dt,l(o.ac_account_id),1)],2),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",ut,l(o.ac_account_code),1)],2),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",ft,l(o.ac_account_name),1)],2),t(p)?x("",!0):(c(),r("td",ht,[e("div",pt,l(o.description),1)])),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",mt,l(t(f)(o.amount||0)),1)],2),e("td",{class:m(["cell",t(p)?"unselectable":""])},l(t(f)(o.qty||0)),3),e("td",{class:m(["cell",t(p)?"unselectable":""])},l(o.xfor),3),e("td",xt,[e("div",wt,l(t(f)(o.qty*o.amount||0)),1)])],8,_t)):x("",!0)],64))),128))],512)])])])])]),e("div",vt,[e("div",yt,[bt,t(s).val||t(s).val1?(c(),r("div",gt,[t(s).val?(c(),r("div",kt," App 1 : "+l(t(s).val_by.username)+" ( "+l(t(s).val_at?t(D)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):x("",!0),t(s).val1?(c(),r("div",jt," App 2 : "+l(t(s).val1_by.username)+" ( "+l(t(s).val1_at?t(D)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):x("",!0)])):x("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:i[0]||(i[0]=o=>u.fnClose())}," Cancel "),u.is_view==0?(c(),r("button",{key:0,ref_key:"it_val",ref:q,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:i[1]||(i[1]=G(o=>T(),["prevent"]))}," Validasi ",512)):x("",!0)])])])],512)),[[J,u.show]])}}},Bt=X(Dt,[["__scopeId","data-v-bacb7aba"]]);export{Bt as default};
