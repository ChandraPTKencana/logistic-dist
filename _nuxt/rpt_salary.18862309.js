import{_ as xt}from"./HeaderPopup.vue.8f4eeb55.js";import{_ as Et}from"./client-only.1d6a8292.js";import{r as F,g as Dt,i as r,f as Mt,I as Pt,k as ct,K as Ct,o as i,c,a as t,b as x,l as a,t as e,w as Nt,m as Tt,A as St,n as k,d as _,F as dt,D as Bt,C as At,G as Gt,x as j,y as mt}from"./entry.c21ffdc3.js";import{u as E}from"./useUtils.abf4045d.js";import{u as ht}from"./useMyFetch.f843d345.js";import"./Times.022951bf.js";import"./_plugin-vue_export-helper.c27b6911.js";const Vt={class:"box-fixed"},qt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Jt={class:"w-full flex flex-col items-center grow overflow-auto"},$t={class:"w-full flex flex-row flex-wrap"},Lt={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},zt=t("label",{for:""},"Period End",-1),Kt={key:0,class:"card-border"},Ut={key:1},Rt={class:"text-red-500"},Yt={key:0,class:"w-full sm:w-6/12 md:w-4/12 lg:w-4/12 p-1"},It=t("div",{class:"font-bold"}," Filter Nama ",-1),Ot={key:0,class:"w-full flex p-1 justify-between flex-wrap"},Ht={class:"w-full",role:"sticky"},Qt={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Wt=t("tr",{class:"sticky -top-1 !z-[2]"},[t("td",{colspan:"43",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1),Xt={class:"sticky top-7 !z-[2]"},Zt=t("th",{rowspan:"2"},"No",-1),ts=t("th",{rowspan:"2"},"ID",-1),ss=t("th",{rowspan:"2"},"Nama Pekerja",-1),as=t("th",{rowspan:"2"},"Jabatan",-1),es=t("th",{rowspan:"2"},"Tmpt Lahir",-1),os=t("th",{rowspan:"2"},"Tgl Lahir",-1),ns=t("th",{rowspan:"2"},"TMK",-1),ls=t("th",{rowspan:"2"},"No KTP",-1),rs=t("th",{rowspan:"2"},"Alamat",-1),_s=t("th",{rowspan:"2"},"Status",-1),us=t("th",{rowspan:"2"},"No Rek",-1),ps=t("th",{rowspan:"2"},"Nama Rek",-1),is=t("th",{rowspan:"2"},"Nama Bank",-1),cs={colspan:"3"},ds={class:"text-sm"},ms={rowspan:"2"},hs={class:"text-sm"},vs={rowspan:"2"},bs={class:"text-sm"},fs={colspan:"3"},gs={class:"text-sm"},ys={rowspan:"2"},Fs={class:"text-sm"},ks={rowspan:"2"},js={class:"text-sm"},ws={rowspan:"2"},xs={class:"text-sm"},Es={rowspan:"2"},Ds={class:"text-sm"},Ms={colspan:"3"},Ps={class:"text-sm"},Cs={colspan:"4"},Ns={class:"text-sm"},Ts={colspan:"3",class:"whitespace-nowrap"},Ss={class:"text-sm"},Bs={colspan:"3"},As={class:"text-sm"},Gs={rowspan:"2"},Vs={class:"text-sm"},qs={rowspan:"2"},Js={class:"text-sm"},$s={rowspan:"2"},Ls={class:"text-sm"},zs={rowspan:"2"},Ks={class:"text-sm"},Us={rowspan:"2"},Rs={class:"text-sm"},Ys={class:"sticky top-[60px] !z-[2]"},Is={class:"text-sm"},Os={class:"text-sm"},Hs={class:"text-sm"},Qs={class:"text-sm"},Ws={class:"text-sm"},Xs={class:"text-sm"},Zs={class:"text-sm"},ta={class:"text-sm"},sa={class:"text-sm"},aa={class:"text-sm"},ea={class:"text-sm"},oa={class:"text-sm"},na={class:"text-sm"},la={class:"text-sm"},ra={class:"text-sm"},_a={class:"text-sm"},ua={class:"text-sm"},pa={class:"text-sm"},ia={class:"text-sm"},ca={ref:"to_move"},da=["data-index"],ma={class:"w-full flex items-center justify-end"},ka={__name:"rpt_salary",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(f){const m=f,{$moment:g}=Gt(),{pointFormat:n}=E(),D={id:"",period_end:new Date},p=F({...D}),M=Dt("token"),y=F({}),u=F([]),vt=async()=>{j().loading_full=!0,y.value={};const s=new FormData;s.append("period_end",p.value.period_end?g(p.value.period_end).format("Y-MM"):"");let o="post",d=p.value.id;d==""||(s.append("id",d),s.append("_method","PUT"));const{data:h,error:w,status:l}=await ht("/rpt_salary",{method:o,headers:{Authorization:`Bearer ${M.value}`,Accept:"application/json"},body:s,retry:0});if(j().loading_full=!1,l.value==="error"){mt().trigger(w,y);return}if(u.value=h.value.details,d<=0)p.value.id=h.value.id,p.value.created_at=h.value.created_at,p.value.updated_at=h.value.updated_at,m.p_data.unshift(p.value);else{p.value.updated_at=h.value.updated_at;let v=m.p_data.map(wt=>wt.id).indexOf(d);v>=-1&&m.p_data.splice(v,1,{...p.value})}};r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.standby_nominal)}),s});const P=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_gaji)}),s}),C=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_makan)}),s}),N=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_dinas)}),s}),T=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_gaji_2)}),s}),S=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_makan_2)}),s}),B=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_dinas_2)}),s}),A=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_gaji)}),s}),G=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_makan)}),s}),V=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_dinas)}),s});r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain)}),s});const bt=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain)}),s}),q=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_gaji)}),s}),J=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_makan)}),s}),$=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_dinas)}),s}),ft=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu)}),s}),L=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu_gaji)}),s}),z=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu_dinas)}),s}),gt=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo)+parseFloat(o.trip_pk)+parseFloat(o.trip_tbs)+parseFloat(o.trip_tbsk)}),s}),K=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo_bonus_gaji)+parseFloat(o.trip_pk_bonus_gaji)+parseFloat(o.trip_tbs_bonus_gaji)+parseFloat(o.trip_tbsk_bonus_gaji)}),s}),U=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo_bonus_dinas)+parseFloat(o.trip_pk_bonus_dinas)+parseFloat(o.trip_tbs_bonus_dinas)+parseFloat(o.trip_tbsk_bonus_dinas)}),s}),R=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.employee_bpjs_kesehatan)}),s}),Y=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.employee_bpjs_jamsos)}),s}),I=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.nominal_cut)}),s}),O=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.salary_bonus_nominal)}),s}),H=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.salary_bonus_nominal_2)}),s}),Q=r(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.kerajinan)}),s}),W=r(()=>P.value+C.value+N.value||0),X=r(()=>W.value+O.value||0),Z=r(()=>T.value+S.value+B.value||0),tt=r(()=>Z.value+H.value+Q.value||0),st=r(()=>X.value+tt.value||0),at=r(()=>A.value+G.value+V.value||0),et=r(()=>q.value+J.value+$.value||0),ot=r(()=>L.value+z.value||0),nt=r(()=>K.value+U.value||0),lt=r(()=>st.value+at.value+et.value+ot.value+nt.value-I.value||0),yt=r(()=>lt.value+R.value+Y.value||0),rt=s=>parseFloat(s.sb_gaji)+parseFloat(s.sb_makan)+parseFloat(s.sb_dinas)+parseFloat(s.salary_bonus_nominal),_t=s=>parseFloat(s.sb_gaji_2)+parseFloat(s.sb_makan_2)+parseFloat(s.sb_dinas_2)+parseFloat(s.salary_bonus_nominal_2)+parseFloat(s.kerajinan),ut=s=>rt(s)+_t(s),pt=s=>ut(s)+parseFloat(s.uj_gaji)+parseFloat(s.uj_makan)+parseFloat(s.uj_dinas)+parseFloat(s.trip_lain_gaji)+parseFloat(s.trip_lain_makan)+parseFloat(s.trip_lain_dinas)+parseFloat(s.trip_tunggu_gaji)+parseFloat(s.trip_tunggu_dinas)+parseFloat(s.trip_cpo_bonus_gaji)+parseFloat(s.trip_cpo_bonus_dinas)+parseFloat(s.trip_pk_bonus_gaji)+parseFloat(s.trip_pk_bonus_dinas)+parseFloat(s.trip_tbs_bonus_gaji)+parseFloat(s.trip_tbs_bonus_dinas)+parseFloat(s.trip_tbsk_bonus_gaji)+parseFloat(s.trip_tbsk_bonus_dinas)-parseFloat(s.nominal_cut),Ft=s=>pt(s)+parseFloat(s.employee_bpjs_kesehatan)+parseFloat(s.employee_bpjs_jamsos),kt=r(()=>p.value.val&&p.value.val1||E().checkPermission("rpt_salary.val")&&p.value.val||E().checkPermission("rpt_salary.val1")&&p.value.val1),jt=async()=>{j().loading_full=!0;const{data:s,error:o,status:d}=await ht("/rpt_salary",{method:"get",headers:{Authorization:`Bearer ${M.value}`,Accept:"application/json"},params:{id:m.id},retry:0});if(j().loading_full=!1,d.value==="error"){mt().trigger(o);return}p.value=s.value.data,m.is_copy&&(p.value.val=0,p.value.val1=0),u.value=s.value.data.details},b=F(""),it=r(()=>b.value!=""?u.value.filter(s=>s.employee.name.toLowerCase().includes(b.value.toLowerCase())):u.value);return Mt(()=>m.show,(s,o)=>{s==!0&&(p.value={...D},u.value=[],y.value={},m.id!=0&&jt())},{immediate:!0}),(s,o)=>{const d=xt,h=Pt("vue-date-picker"),w=Et;return ct((i(),c("section",Vt,[t("div",null,[x(d,{title:"Form Salary Paid",fn:f.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",qt,[t("div",Jt,[t("div",$t,[t("div",Lt,[zt,a(p).id?(i(),c("div",Kt,e(a(g)(a(p).period_end).format("MM-Y")),1)):(i(),c("div",Ut,[x(w,null,{default:Nt(()=>[x(h,{modelValue:a(p).period_end,"onUpdate:modelValue":o[0]||(o[0]=l=>a(p).period_end=l),format:"MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"","month-picker":""},null,8,["modelValue"])]),_:1})])),t("p",Rt,e(a(y).period_end),1)]),a(u).length?(i(),c("div",Yt,[It,ct(t("input",{class:"",type:"text","onUpdate:modelValue":o[1]||(o[1]=l=>Tt(b)?b.value=l:null),name:"search",placeholder:"Nama"},null,512),[[St,a(b)]])])):k("",!0)]),a(it).length?(i(),c("div",Ot,[t("div",Ht,[t("table",Qt,[t("thead",null,[Wt,t("tr",Xt,[Zt,ts,ss,as,es,os,ns,ls,rs,_s,us,ps,is,t("th",cs,[_("Standby 1 "),t("span",ds,"("+e(a(n)(a(W)))+")",1)]),t("th",ms,[_("Potongan 1 "),t("span",hs,"("+e(a(n)(a(O)||0))+")",1)]),t("th",vs,[_("Periode 1 "),t("span",bs,"("+e(a(n)(a(X)))+")",1)]),t("th",fs,[_("Standby 2 "),t("span",gs,"("+e(a(n)(a(Z)))+")",1)]),t("th",ys,[_("Potongan 2 "),t("span",Fs,"("+e(a(n)(a(H)||0))+")",1)]),t("th",ks,[_("U.Kerajinan "),t("span",js,"("+e(a(n)(a(Q)||0))+")",1)]),t("th",ws,[_("Periode 2 "),t("span",xs,"("+e(a(n)(a(tt)))+")",1)]),t("th",Es,[_("Periode 1+2 "),t("span",Ds,"("+e(a(n)(a(st)))+")",1)]),t("th",Ms,[_("Trip "),t("span",Ps,"("+e(a(n)(a(at)))+")",1)]),t("th",Cs,[_("Trip Lain "),t("span",Ns,"("+e(a(n)(a(et)))+")",1)]),t("th",Ts,[_("Trip Tunggu "),t("span",Ss,"("+e(a(n)(a(ot)))+")",1)]),t("th",Bs,[_("Bonus Trip "),t("span",As,"("+e(a(n)(a(nt)))+")",1)]),t("th",Gs,[_("Potongan Trip "),t("span",Vs,"("+e(a(n)(a(I)||0))+")",1)]),t("th",qs,[_("Total "),t("span",Js,"("+e(a(n)(a(lt)))+")",1)]),t("th",$s,[_("BPJS Kesehatan "),t("span",Ls,"("+e(a(n)(a(R)||0))+")",1)]),t("th",zs,[_("BPJS Jamsos "),t("span",Ks,"("+e(a(n)(a(Y)||0))+")",1)]),t("th",Us,[_("Grand Total "),t("span",Rs,"("+e(a(n)(a(yt)))+")",1)])]),t("tr",Ys,[t("th",null,[_("Gaji "),t("span",Is,"("+e(a(n)(a(P)||0))+")",1)]),t("th",null,[_("Makan "),t("span",Os,"("+e(a(n)(a(C)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",Hs,"("+e(a(n)(a(N)||0))+")",1)]),t("th",null,[_("Gaji "),t("span",Qs,"("+e(a(n)(a(T)||0))+")",1)]),t("th",null,[_("Makan "),t("span",Ws,"("+e(a(n)(a(S)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",Xs,"("+e(a(n)(a(B)||0))+")",1)]),t("th",null,[_("Gaji "),t("span",Zs,"("+e(a(n)(a(A)||0))+")",1)]),t("th",null,[_("Makan "),t("span",ta,"("+e(a(n)(a(G)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",sa,"("+e(a(n)(a(V)||0))+")",1)]),t("th",null,[_("Jmlh "),t("span",aa,"("+e(a(n)(a(bt)||0))+")",1)]),t("th",null,[_("Gaji "),t("span",ea,"("+e(a(n)(a(q)||0))+")",1)]),t("th",null,[_("Makan "),t("span",oa,"("+e(a(n)(a(J)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",na,"("+e(a(n)(a($)||0))+")",1)]),t("th",null,[_("Jmlh "),t("span",la,"("+e(a(n)(a(ft)||0))+")",1)]),t("th",null,[_("Gaji "),t("span",ra,"("+e(a(n)(a(L)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",_a,"("+e(a(n)(a(z)||0))+")",1)]),t("th",null,[_("Jmlh "),t("span",ua,"("+e(a(n)(a(gt)||0))+")",1)]),t("th",null,[_("Gaji "),t("span",pa,"("+e(a(n)(a(K)||0))+")",1)]),t("th",null,[_("Dinas "),t("span",ia,"("+e(a(n)(a(U)||0))+")",1)])])]),t("tbody",ca,[(i(!0),c(dt,null,Bt(a(it),(l,v)=>(i(),c(dt,{key:v},[l.p_status!="Remove"?(i(),c("tr",{key:0,"data-index":v},[t("td",null,e(v+1)+".",1),t("td",null,e(l.employee_id),1),t("td",null,e(l.employee_name),1),t("td",null,e(l.employee_role),1),t("td",null,e(l.employee_birth_place),1),t("td",null,e(l.employee_birth_date?a(g)(l.employee_birth_date).format("DD-MM-Y"):""),1),t("td",null,e(l.employee_tmk?a(g)(l.employee_tmk).format("DD-MM-Y"):""),1),t("td",null,e(l.employee_ktp_no),1),t("td",null,e(l.employee_address),1),t("td",null,e(l.employee_status),1),t("td",null,e(l.employee_rek_no),1),t("td",null,e(l.employee_rek_name),1),t("td",null,e(l.employee_bank_name),1),t("td",null,e(a(n)(l.sb_gaji)),1),t("td",null,e(a(n)(l.sb_makan)),1),t("td",null,e(a(n)(l.sb_dinas)),1),t("td",null,e(a(n)(l.salary_bonus_nominal)),1),t("td",null,e(a(n)(rt(l))),1),t("td",null,e(a(n)(l.sb_gaji_2)),1),t("td",null,e(a(n)(l.sb_makan_2)),1),t("td",null,e(a(n)(l.sb_dinas_2)),1),t("td",null,e(a(n)(l.salary_bonus_nominal_2)),1),t("td",null,e(a(n)(l.kerajinan)),1),t("td",null,e(a(n)(_t(l))),1),t("td",null,e(a(n)(ut(l))),1),t("td",null,e(a(n)(l.uj_gaji)),1),t("td",null,e(a(n)(l.uj_makan)),1),t("td",null,e(a(n)(l.uj_dinas)),1),t("td",null,e(a(n)(l.trip_lain)),1),t("td",null,e(a(n)(l.trip_lain_gaji)),1),t("td",null,e(a(n)(l.trip_lain_makan)),1),t("td",null,e(a(n)(l.trip_lain_dinas)),1),t("td",null,e(a(n)(l.trip_tunggu)),1),t("td",null,e(a(n)(l.trip_tunggu_gaji)),1),t("td",null,e(a(n)(l.trip_tunggu_dinas)),1),t("td",null,e(a(n)(l.trip_cpo+l.trip_pk+l.trip_tbs+l.trip_tbsk)),1),t("td",null,e(a(n)(parseFloat(l.trip_cpo_bonus_gaji)+parseFloat(l.trip_pk_bonus_gaji)+parseFloat(l.trip_tbs_bonus_gaji)+parseFloat(l.trip_tbsk_bonus_gaji))),1),t("td",null,e(a(n)(parseFloat(l.trip_cpo_bonus_dinas)+parseFloat(l.trip_pk_bonus_dinas)+parseFloat(l.trip_tbs_bonus_dinas)+parseFloat(l.trip_tbsk_bonus_dinas))),1),t("td",null,e(a(n)(l.nominal_cut)),1),t("td",null,e(a(n)(pt(l))),1),t("td",null,e(a(n)(l.employee_bpjs_kesehatan)),1),t("td",null,e(a(n)(l.employee_bpjs_jamsos)),1),t("td",null,e(a(n)(Ft(l))),1)],8,da)):k("",!0)],64))),128))],512)])])])):k("",!0)]),t("div",ma,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:o[2]||(o[2]=l=>f.fnClose())}," Cancel "),a(kt)?k("",!0):(i(),c("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:o[3]||(o[3]=At(l=>vt(),["prevent"]))}," Generate "+e(a(p).id==""?"& Save":""),1))])])])],512)),[[Ct,f.show]])}}};export{ka as default};
