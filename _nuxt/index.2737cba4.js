import _t from"./Header.3de5f5a1.js";import mt from"./Plus.723b1307.js";import ft from"./Edit.6b0a2be2.js";import pt from"./Delete.563e4efe.js";import vt from"./Signature.70c36eb0.js";import ht from"./Search.1e7f1ac3.js";import gt from"./Line.ff62b9ec.js";import kt from"./Check.0bc81f14.js";import bt from"./TypeIcon.36a86def.js";import{_ as yt}from"./PopupMini.vue.07b5eefb.js";import xt from"./employee.fbdd7742.js";import wt from"./employee_validasi.926bc89c.js";import{f as Dt,g as $t,r,h as Ct,i as V,s as Mt,j as Tt,c as b,a as t,b as d,m as M,v as z,k as l,n as O,q as K,x as St,F as U,y as At,w as It,z as Nt,A as g,B as H,o as v,C as Bt,D as Y,t as s,d as Ht,p as Lt,e as Et,E as Ft}from"./entry.44d5fc3d.js";import{u as L}from"./useMyFetch.7cc1a605.js";import{_ as jt}from"./_plugin-vue_export-helper.c27b6911.js";import"./DocJPEG.1ec0c1a3.js";import"./DocJPG.0d00ecf1.js";import"./DocPNG.6bfbccef.js";import"./DocPDF.f738a411.js";import"./Times.5282973f.js";import"./Exclamation.5378bc1e.js";import"./HeaderPopup.vue.5e43446c.js";import"./client-only.7c5c3e4e.js";import"./AttachmentSingle.1d4b725a.js";import"./PDFJsView.ca0c47f9.js";import"./useUtils.f69303a2.js";const m=y=>(Lt("data-v-0637f20c"),y=y(),Et(),y),Pt={class:"w-full h-full flex flex-col"},Rt={class:"w-full flex grow flex-col overflow-auto h-0"},Vt={class:"w-full flex"},zt={action:"#",class:"w-full flex p-1"},Ot={class:"grow"},Kt=m(()=>t("div",{class:"font-bold"}," Keyword ",-1)),Ut={class:"pl-1"},Yt=m(()=>t("div",{class:"font-bold"}," Sort By ",-1)),Jt=m(()=>t("option",{value:""},null,-1)),qt=m(()=>t("option",{value:"name"},"Nama",-1)),Zt=m(()=>t("option",{value:"role"},"Jabatan",-1)),Gt=[Jt,qt,Zt],Qt={class:"pl-1"},Wt=m(()=>t("div",{class:"font-bold"}," Sort Order ",-1)),Xt=m(()=>t("option",{value:"asc"},"Asc",-1)),te=m(()=>t("option",{value:"desc"},"Desc",-1)),ee=[Xt,te],ae={class:"flex items-end pl-1"},le={class:"w-full flex justify-center items-center grow h-0 p-1"},oe={key:0,class:""},se={class:"tacky"},ne=m(()=>t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"App"),t("th",null,"No."),t("th",null,"Nama"),t("th",null,"Jabatan"),t("th",null,"No KTP"),t("th",null,"No SIM"),t("th",null,"Nama Bank"),t("th",null,"No Rek"),t("th",null,"Nama Rek"),t("th",null,"Phone Number"),t("th",null,"Tempat Lahir"),t("th",null,"Tanggal Lahir"),t("th",null,"TMK"),t("th",null,"Alamat"),t("th",null,"Status"),t("th",null,"File"),t("th",null,"Tanggal Dibuat"),t("th",null,"Tanggal Diubah")])],-1)),ue=["onClick"],re={class:"w-full h-full flex items-center justify-center"},ie={class:"bold"},ce={class:"grow mb-5"},de={__name:"index",async setup(y){let x,E;const{$moment:w}=Ft(),_={};_._TimeZoneOffset=new Date().getTimezoneOffset();const T=Dt("token"),{data:n}=([x,E]=$t(async()=>Nt(async()=>{g().loading_full=!0;const{data:o,error:a,status:p}=await L("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:_,retry:0});return g().loading_full=!1,p.value==="error"?(H().trigger(a),[]):o.value.data},"$p5jj5crAgd")),x=await x,E(),x),c=r(""),f=r({field:"",by:"desc"}),i=r(-1),u=r({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),J=()=>{_.like="",c.value!=""&&(_.like=`id:%${c.value}%,name:%${c.value}%,ktp_no:%${c.value}%,sim_no:%${c.value}%,phone_number:%${c.value}%,rek_no:%${c.value}%`),_.sort="",f.value.field&&(_.sort=f.value.field+":"+f.value.by)},D=r(null),F=async()=>{g().loading_full=!0,u.value.may_get_data=!1,_.page=u.value.page,_.page==1&&(n.value=[]);const{data:o,error:a,status:p}=await L("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:_,retry:0});if(g().loading_full=!1,u.value.may_get_data=!0,p.value==="error"){H().trigger(a);return}u.value.page==1?(n.value=o.value.data,D.value&&(D.value.scrollTop=0)):u.value.page>1&&(n.value=[...n.value,...o.value.data]),o.value.data.length==0&&(u.value.is_last_record=!0)},q=async()=>{if(!u.value.may_get_data)return;let o=D.value;if(o.scrollLeft!=u.value.scrollLeft){u.value.scrollLeft=o.scrollLeft;return}u.value.is_last_record||!(Math.round(o.scrollTop)+o.clientHeight>=o.scrollHeight-1)||(u.value.page++,await F())},Z=()=>{u.value.page=1,u.value.is_last_record=!1,J(),F()};Ct();const $=r(!1),S=r(0),G=()=>{S.value=0,$.value=!0},{display:A}=V();Mt(V());const Q=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=n.value[i.value].id,$.value=!0)},I=r(!1),j=r(0),W=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(j.value=n.value[i.value].id,I.value=!0)},N=r(!1),P=r({}),k=r(!1),h=r(""),X=async()=>{k.value&&(k.value=!1)},tt=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(h.value="",P.value={id:n.value[i.value].id},k.value=!0)};Tt(()=>h.value,o=>{o.trim().length>0?N.value=!0:N.value=!1},{immediate:!1});const et=async()=>{g().loading_full=!0;const o=new FormData;o.append("id",n.value[i.value].id),o.append("deleted_reason",h.value),o.append("_method","DELETE");const{data:a,error:p,status:B}=await L("/employee",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,B.value==="error"){H().trigger(p);return}n.value.splice(i.value,1),i.value=-1,k.value=!1};return(o,a)=>{const p=_t,B=mt,at=ft,lt=pt,ot=vt,st=ht,nt=gt,ut=kt,rt=bt,it=yt,ct=xt,dt=wt;return v(),b(U,null,[t("div",Pt,[d(p,{title:"List Employee"}),t("div",Rt,[t("div",Vt,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[0]||(a[0]=e=>G())},[d(B)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=e=>Q())},[d(at)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=e=>tt())},[d(lt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=e=>W())},[d(ot)])]),t("form",zt,[t("div",Ot,[Kt,M(t("input",{class:"",type:"text","onUpdate:modelValue":a[4]||(a[4]=e=>O(c)?c.value=e:null),name:"search",placeholder:"Keyword"},null,512),[[z,l(c)]])]),t("div",Ut,[Yt,M(t("select",{class:"","onUpdate:modelValue":a[5]||(a[5]=e=>l(f).field=e)},Gt,512),[[K,l(f).field]])]),t("div",Qt,[Wt,M(t("select",{class:"","onUpdate:modelValue":a[6]||(a[6]=e=>l(f).by=e)},ee,512),[[K,l(f).by]])]),t("div",ae,[t("button",{class:"",type:"submit",name:"button",onClick:a[7]||(a[7]=St(e=>Z(),["prevent"]))},[d(st,{class:"text-2xl"})])])]),t("div",le,[l(n).length==0?(v(),b("div",oe," Maaf Tidak Ada Record ")):(v(),b("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:D,onScroll:q},[t("table",se,[ne,t("tbody",null,[(v(!0),b(U,null,At(l(n),(e,C)=>{var R;return v(),b("tr",{key:C,onClick:_e=>i.value=C,class:Bt(l(i)==C?"active":"")},[t("td",null,[t("div",re,[e.val?(v(),Y(ut,{key:1})):(v(),Y(nt,{key:0}))])]),t("td",null,s(C+1)+".",1),t("td",ie,s(e.name),1),t("td",null,s(e.role),1),t("td",null,s(e.ktp_no),1),t("td",null,s(e.sim_no),1),t("td",null,s((R=e.bank)==null?void 0:R.code),1),t("td",null,s(e.rek_no),1),t("td",null,s(e.rek_name),1),t("td",null,s(e.phone_number),1),t("td",null,s(e.birth_date??l(w)(e.birth_date).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(e.birth_place),1),t("td",null,s(e.tmk??l(w)(e.tmk).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(e.address),1),t("td",null,s(e.status),1),t("td",null,[d(rt,{value:e.attachment_1_type},null,8,["value"])]),t("td",null,s(l(w)(e.created_at).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(l(w)(e.updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,ue)}),128))])])],544))])])]),d(it,{type:"delete",show:l(k),data:l(P),fnClose:X,fnConfirm:et,enabledOk:l(N)},{footer:It(()=>[Ht(" Masukkan Alasan Penghapusan: "),t("div",ce,[M(t("textarea",{"onUpdate:modelValue":a[8]||(a[8]=e=>O(h)?h.value=e:null)},null,512),[[z,l(h)]])])]),_:1},8,["show","data","enabledOk"]),d(ct,{show:l($),fnClose:()=>{$.value=!1},id:l(S),p_data:l(n)},null,8,["show","fnClose","id","p_data"]),d(dt,{show:l(I),fnClose:()=>{I.value=!1},id:l(j),p_data:l(n)},null,8,["show","fnClose","id","p_data"])],64)}}},Pe=jt(de,[["__scopeId","data-v-0637f20c"]]);export{Pe as default};
