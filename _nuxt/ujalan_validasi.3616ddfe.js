import{_ as I}from"./HeaderPopup.vue.a23d4aa3.js";import P from"./Times.db8d9a46.js";import L from"./Check.135d567f.js";import{r as x,g as E,i as F,f as K,k as G,L as J,o as _,c as r,a as e,b as O,t as l,l as a,d as j,F as D,E as S,G as w,z as B,n as m,D as N,H as Q,x as b,y as H,p as W,e as X}from"./entry.450f3054.js";import{u as Z}from"./useUtils.f22d17c7.js";import{u as M}from"./useMyFetch.e6f412ed.js";import{_ as ee}from"./_plugin-vue_export-helper.c27b6911.js";const o=f=>(W("data-v-7ace401f"),f=f(),X(),f),te={class:"box-fixed"},ae={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},se={class:"w-full flex flex-col items-center grow overflow-auto"},le={class:"w-full flex flex-row flex-wrap"},oe={class:"w-full sm:w-8/12 md:w-5/12 lg:w-5/12 flex flex-col flex-wrap p-1"},ie=o(()=>e("label",{for:""},"To",-1)),ce={class:"card-border"},ne={class:"w-1/2 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_e=o(()=>e("label",{for:""},"Jenis",-1)),re={class:"card-border"},ue={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"Trip Bonus Supir",-1)),ve={class:"card-border"},fe={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},me=o(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),pe={class:"card-border"},he={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},we=o(()=>e("label",{for:""},"KM Range",-1)),xe={class:"card-border"},be={class:"w-1/2 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ye=o(()=>e("label",{for:""},"Harga",-1)),ge={class:"card-border"},ke={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},je=o(()=>e("label",{for:""},"Asal Peralihan",-1)),De={class:"card-border"},Ye={class:"w-full sm:w-7/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ce=o(()=>e("label",{for:""},"Tipe",-1)),Ae={class:"card-border"},He={class:"w-full sm:w-full md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Me=o(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),Te={class:"card-border"},Ve={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},qe={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pr-1 2xl:max-h-full"},Fe={class:"w-full",role:"sticky"},Se={class:"tacky w-full !table-auto whitespace-normal"},Be=o(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Uang Jalan ")],-1)),Ne={class:"sticky top-8 !z-[2]"},$e=o(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),ze=o(()=>e("th",{class:"min-w-[150px] !w-[150px] max-w-[150px]"},"Desc",-1)),Re=o(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Harga @",-1)),Ue=o(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"Qty",-1)),Ie={class:"min-w-[100px] !w-[100px] max-w-[100px]"},Pe=o(()=>e("br",null,null,-1)),Le={class:"text-sm"},Ee=o(()=>e("th",{class:"min-w-[70px] !w-[70px] max-w-[70px] whitespace-break-spaces"},"For Remarks",-1)),Ke={ref:"to_move"},Ge=["data-index"],Je={class:"cell"},Oe={class:"w-full h-auto flex items-center justify-center"},Qe={class:"cell bold"},We={class:"w-full h-auto flex items-center justify-center"},Xe={class:"cell"},Ze={class:"w-full h-auto flex items-center justify-center"},et={class:"cell"},tt={class:"w-full h-auto flex items-center justify-center"},at={class:"cell"},st={class:"w-full h-auto flex items-center justify-center"},lt={class:"w-full max-w-full 2xl:w-1/2 2xl:overflow-auto 2xl:pl-1 2xl:max-h-full pt-1 2xl:pt-0"},ot={class:"w-full",role:"sticky"},it={class:"tacky w-full !table-auto whitespace-normal"},ct=o(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"9",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),nt={class:"sticky top-8 !z-[2]"},_t=o(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),rt=o(()=>e("th",{class:"min-w-[60px] !w-[60px] max-w-[60px]"},"Acc ID",-1)),ut=o(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),dt=o(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),vt=o(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),ft=o(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Amount",-1)),mt=o(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Qty",-1)),pt=o(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),ht={class:"min-w-[100px] !w-[100px] max-w-[100px]"},wt=o(()=>e("br",null,null,-1)),xt={class:"text-sm"},bt={ref:"to_move"},yt=["data-index"],gt={class:"w-full h-auto flex items-center justify-center"},kt={class:"w-full h-auto flex items-center justify-center"},jt={class:"w-full h-auto flex items-center justify-center"},Dt={key:0,class:"cell"},Yt={class:"w-full h-auto flex items-center justify-center"},Ct={class:"w-full h-auto flex items-center justify-center"},At={class:"cell"},Ht={class:"w-full h-auto flex items-center justify-center"},Mt={class:"w-full flex items-center justify-end"},Tt={class:"w-full flex flex-wrap p-3 items-center"},Vt=o(()=>e("div",null," Di Validasi oleh : ",-1)),qt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Ft={key:0},St={key:1},Bt={key:2},Nt={key:3},$t={__name:"ujalan_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(f){const u=f,{$moment:g}=Q(),{pointFormat:v}=Z(),t=x({...{id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,tipe:"",jenis:"",harga:0,note_for_remarks:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:""}}),Y=E("token"),k=x({}),T=x(null),V=x(null),q=x([]),C=x([]),$=async()=>{b().loading_full=!0,k.value={};const c=new FormData;let n="post",p=u.id;p==0||(c.append("id",p),c.append("_method","PUT"));const{data:s,error:y,status:i}=await M("/ujalan_validasi",{method:n,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:c,retry:0});if(b().loading_full=!1,i.value==="error"){H().trigger(y,k);return}t.value.val=s.value.val,t.value.val_user=s.value.val_user,t.value.val_by=s.value.val_by,t.value.val_at=s.value.val_at,t.value.val1=s.value.val1,t.value.val1_user=s.value.val1_user,t.value.val1_by=s.value.val1_by,t.value.val1_at=s.value.val1_at,t.value.val2=s.value.val2,t.value.val2_user=s.value.val2_user,t.value.val2_by=s.value.val2_by,t.value.val2_at=s.value.val2_at,t.value.val3=s.value.val3,t.value.val3_user=s.value.val3_user,t.value.val3_by=s.value.val3_by,t.value.val3_at=s.value.val3_at;let d=u.p_data.map(A=>A.id).indexOf(u.id);d>-1&&u.p_data.splice(d,1,{...t.value}),u.fnClose()},z=async()=>{b().loading_full=!0,k.value={};const c=new FormData;let n="post",p=u.id;p==0||(c.append("id",p),c.append("_method","PUT"));const{data:s,error:y,status:i}=await M("/ujalan_unvalidasi",{method:n,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:c,retry:0});if(b().loading_full=!1,i.value==="error"){H().trigger(y,k);return}t.value.val=s.value.val,t.value.val_user=s.value.val_user,t.value.val_by=s.value.val_by,t.value.val_at=s.value.val_at,t.value.val1=s.value.val1,t.value.val1_user=s.value.val1_user,t.value.val1_by=s.value.val1_by,t.value.val1_at=s.value.val1_at,t.value.val2=s.value.val2,t.value.val2_user=s.value.val2_user,t.value.val2_by=s.value.val2_by,t.value.val2_at=s.value.val2_at,t.value.val3=s.value.val3,t.value.val3_user=s.value.val3_user,t.value.val3_by=s.value.val3_by,t.value.val3_at=s.value.val3_at;let d=u.p_data.map(A=>A.id).indexOf(u.id);d>-1&&u.p_data.splice(d,1,{...t.value}),u.fnClose()},R=async()=>{b().loading_full=!0;const{data:c,error:n,status:p}=await M("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},params:{id:u.id},retry:0});if(b().loading_full=!1,p.value==="error"){H().trigger(n);return}t.value=c.value.data,q.value=c.value.data.details,C.value=c.value.data.details2},U=F(()=>{let c=0;return C.value.forEach(n=>{n.p_status!="Remove"&&(c+=n.qty*n.amount)}),c}),h=F(()=>!1);return K(()=>u.show,(c,n)=>{c==!0&&(u.it_state==1&&setTimeout(()=>{T.value.focus()},1),u.it_state==0&&setTimeout(()=>{V.value.focus()},1),R())},{immediate:!0}),(c,n)=>{const p=I,s=P,y=L;return G((_(),r("section",te,[e("div",null,[O(p,{title:"Form Ujalan Validation",fn:f.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",ae,[e("div",se,[e("div",le,[e("div",oe,[ie,e("div",ce,l(a(t).xto),1)]),e("div",ne,[_e,e("div",re,l(a(t).jenis),1)]),e("div",ue,[de,e("div",ve,l(a(v)(a(t).bonus_trip_supir||0)),1)]),e("div",fe,[me,e("div",pe,l(a(v)(a(t).bonus_trip_kernet||0)),1)]),e("div",he,[we,e("div",xe,l(a(v)(a(t).km_range||0)),1)]),e("div",be,[ye,e("div",ge,l(a(v)(a(t).harga||0)),1)]),e("div",ke,[je,e("div",De,l(a(t).transition_from),1)]),e("div",Ye,[Ce,e("div",Ae,l(a(t).tipe),1)]),e("div",He,[Me,e("div",Te,l(a(t).note_for_remarks),1)])]),e("div",Ve,[e("div",qe,[e("div",Fe,[e("table",Se,[e("thead",null,[Be,e("tr",Ne,[$e,ze,Re,Ue,e("th",Ie,[j("Total "),Pe,j(),e("span",Le,"("+l(a(v)(a(t).harga||0))+")",1)]),Ee])]),e("tbody",Ke,[(_(!0),r(D,null,S(a(q),(i,d)=>(_(),r(D,{key:d},[i.p_status!="Remove"?(_(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",Je,[e("div",Oe,l(i.xdesc),1)]),e("td",Qe,[e("div",We,l(a(v)(i.harga||0)),1)]),e("td",Xe,[e("div",Ze,l(a(v)(i.qty||0)),1)]),e("td",et,[e("div",tt,l(a(v)(i.qty*i.harga||0)),1)]),e("td",at,[e("div",st,[e("div",{class:w(["text-white rounded text-xl w-5 h-5",i.for_remarks?"bg-green-600":"bg-red-600"])},[i.for_remarks==0?(_(),B(s,{key:0})):(_(),B(y,{key:1}))],2)])])],8,Ge)):m("",!0)],64))),128))],512)])])]),e("div",lt,[e("div",ot,[e("table",it,[e("thead",null,[ct,e("tr",nt,[_t,rt,ut,dt,vt,ft,mt,pt,e("th",ht,[j("Total "),wt,j(),e("span",xt,"("+l(a(v)(a(U)))+")",1)])])]),e("tbody",bt,[(_(!0),r(D,null,S(a(C),(i,d)=>(_(),r(D,{key:d},[i.p_status!="Remove"?(_(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",{class:w(["cell bold",a(h)?"unselectable":""])},[e("div",gt,l(i.ac_account_id),1)],2),e("td",{class:w(["cell bold",a(h)?"unselectable":""])},[e("div",kt,l(i.ac_account_code),1)],2),e("td",{class:w(["cell bold",a(h)?"unselectable":""])},[e("div",jt,l(i.ac_account_name),1)],2),a(h)?m("",!0):(_(),r("td",Dt,[e("div",Yt,l(i.description),1)])),e("td",{class:w(["cell bold",a(h)?"unselectable":""])},[e("div",Ct,l(a(v)(i.amount||0)),1)],2),e("td",{class:w(["cell",a(h)?"unselectable":""])},l(a(v)(i.qty||0)),3),e("td",{class:w(["cell",a(h)?"unselectable":""])},l(i.xfor),3),e("td",At,[e("div",Ht,l(a(v)(i.qty*i.amount||0)),1)])],8,yt)):m("",!0)],64))),128))],512)])])])])]),e("div",Mt,[e("div",Tt,[Vt,a(t).val||a(t).val1||a(t).val2||a(t).val3?(_(),r("div",qt,[a(t).val?(_(),r("div",Ft," Staff Logistik : "+l(a(t).val_by.username)+" ( "+l(a(t).val_at?a(g)(a(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),a(t).val1?(_(),r("div",St," Kasir : "+l(a(t).val1_by.username)+" ( "+l(a(t).val1_at?a(g)(a(t).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),a(t).val2?(_(),r("div",Bt," SPV Logistik: "+l(a(t).val2_by.username)+" ( "+l(a(t).val2_at?a(g)(a(t).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),a(t).val3?(_(),r("div",Nt," MGR Logistik: "+l(a(t).val3_by.username)+" ( "+l(a(t).val3_at?a(g)(a(t).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0)])):m("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=i=>f.fnClose())}," Cancel "),f.it_state==1?(_(),r("button",{key:0,ref_key:"it_val",ref:T,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=N(i=>$(),["prevent"]))}," Validasi ",512)):m("",!0),f.it_state==0?(_(),r("button",{key:1,ref_key:"it_unval",ref:V,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:n[2]||(n[2]=N(i=>z(),["prevent"]))}," Unvalidasi ",512)):m("",!0)])])])],512)),[[J,f.show]])}}},Gt=ee($t,[["__scopeId","data-v-7ace401f"]]);export{Gt as default};
