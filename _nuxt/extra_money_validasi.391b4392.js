import{_ as N}from"./HeaderPopup.vue.03806b35.js";import{_ as q}from"./WidthMiniPart.vue.7a678e73.js";import{r as p,g as $,f as B,k as V,J as j,o as r,c as _,a as t,b as D,t as s,l as a,n as u,C as F,G as I,x as w,y as k,p as T,e as J}from"./entry.0095ed96.js";import{u as P}from"./useUtils.d3103213.js";import{u as M}from"./useMyFetch.35432c46.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.4af9fea0.js";const o=i=>(T("data-v-90307400"),i=i(),J(),i),O={class:"box-fixed"},z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},U={class:"w-full flex flex-col items-center grow overflow-auto"},G={class:"w-full flex flex-row flex-wrap"},K={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Q=o(()=>t("label",{for:""},"Tujuan",-1)),W={class:"w-full card-border"},L={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},R=o(()=>t("label",{for:""},"Jenis",-1)),X={class:"w-full card-border"},Z={class:"w-full sm:w-3/12 flex px-2 py-3"},ee={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},ae=o(()=>t("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),te={class:"w-6/12 flex flex-col flex-wrap p-1"},le={class:"w-full card-border"},se={class:"w-6/12 flex flex-col flex-wrap p-1"},oe={class:"card-border"},ie={class:"w-full sm:w-12/12 flex px-2 py-3"},ne={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-start"},re=o(()=>t("div",{class:"absolute bg-white -top-3"}," Account ",-1)),_e={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ce=o(()=>t("label",{for:""},"Info",-1)),de={class:"card-border"},ue={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ve=o(()=>t("label",{for:""},"Deskripsi",-1)),fe={class:"w-full card-border"},me={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},pe=o(()=>t("label",{for:""},"Nominal",-1)),we={class:"w-full card-border"},xe={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},he=o(()=>t("label",{for:""},"Qty",-1)),ye={class:"w-full card-border"},be={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ge=o(()=>t("label",{for:""},"Total",-1)),Ye={class:"w-full card-border"},De={class:"w-full flex items-center justify-end"},ke={class:"w-full flex flex-wrap p-3 items-center"},Me=o(()=>t("div",null," Di Validasi oleh : ",-1)),Ae={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},He={key:0},Ce={key:1},Se={key:2},Ne={key:3},qe={key:4},$e={key:5},Be={__name:"extra_money_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const c=i,{$moment:f}=I(),{pointFormat:x}=P(),e=p({...{id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""}}),y=$("token"),b=p({}),g=p(null);p([]);const v=p(JSON.parse(JSON.stringify({_:{id:{tcon:"",text:"ID",val:""},code:{tcon:"",text:"Code",val:""},name:{tcon:"",text:"Name",val:""}},id:"",name:"",title:""}))),A=async()=>{w().loading_full=!0,b.value={};const d=new FormData;let n="post",m=c.id;m==0||(d.append("id",m),d.append("_method","PUT"));const{data:l,error:h,status:C}=await M("/extra_money_validasi",{method:n,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:d,retry:0});if(w().loading_full=!1,C.value==="error"){k().trigger(h,b);return}e.value.val=l.value.val,e.value.val_user=l.value.val_user,e.value.val_by=l.value.val_by,e.value.val_at=l.value.val_at,e.value.val1=l.value.val1,e.value.val1_user=l.value.val1_user,e.value.val1_by=l.value.val1_by,e.value.val1_at=l.value.val1_at,e.value.val2=l.value.val2,e.value.val2_user=l.value.val2_user,e.value.val2_by=l.value.val2_by,e.value.val2_at=l.value.val2_at;let Y=c.p_data.map(S=>S.id).indexOf(c.id);Y>=-1&&c.p_data.splice(Y,1,{...e.value}),c.fnClose()},H=async()=>{w().loading_full=!0;const{data:d,error:n,status:m}=await M("/extra_money",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:c.id},retry:0});if(w().loading_full=!1,m.value==="error"){k().trigger(n);return}let l=d.value.data;e.value=l,v.value._.id.val=l.ac_account_id,v.value._.name.val=l.ac_account_name,v.value._.code.val=l.ac_account_code,v.value.id=l.ac_account_id,v.value.name=l.ac_account_code,v.value.title=l.ac_account_name};return B(()=>c.show,(d,n)=>{d==!0&&(c.is_view==!1&&setTimeout(()=>{g.value.focus()},1),H())},{immediate:!0}),(d,n)=>{const m=N,l=q;return V((r(),_("section",O,[t("div",null,[D(m,{title:"Form Transaction Extra Money Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",z,[t("div",U,[t("div",G,[t("div",K,[Q,t("div",W,s(a(e).xto),1)]),t("div",L,[R,t("div",X,s(a(e).jenis),1)]),t("div",Z,[t("div",ee,[ae,t("div",te,[t("div",le,s(a(e).transition_type),1)]),t("div",se,[t("div",oe,s(a(e).transition_target),1)])])]),t("div",ie,[t("div",ne,[re,t("div",_e,[ce,t("div",de,[D(l,{selected:a(v)},null,8,["selected"])])]),t("div",ue,[ve,t("div",fe,s(a(e).description),1)]),t("div",me,[pe,t("div",we,s(a(x)(a(e).nominal)),1)]),t("div",xe,[he,t("div",ye,s(a(x)(a(e).qty)),1)]),t("div",be,[ge,t("div",Ye,s(a(x)(a(e).nominal*a(e).qty)),1)])])])])]),t("div",De,[t("div",ke,[Me,a(e).val1||a(e).val2?(r(),_("div",Ae,[a(e).val1?(r(),_("div",He," App 1 : "+s(a(e).val1_by.username)+" ( "+s(a(e).val1_at?a(f)(a(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),a(e).val2?(r(),_("div",Ce," App 2 : "+s(a(e).val2_by.username)+" ( "+s(a(e).val2_at?a(f)(a(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),a(e).val3?(r(),_("div",Se," App 3 : "+s(a(e).val3_by.username)+" ( "+s(a(e).val3_at?a(f)(a(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),a(e).val4?(r(),_("div",Ne," App 4 : "+s(a(e).val4_by.username)+" ( "+s(a(e).val4_at?a(f)(a(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),a(e).val5?(r(),_("div",qe," App 5 : "+s(a(e).val5_by.username)+" ( "+s(a(e).val5_at?a(f)(a(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),a(e).val6?(r(),_("div",$e," App 6 : "+s(a(e).val6_by.username)+" ( "+s(a(e).val6_at?a(f)(a(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=h=>i.fnClose())}," Cancel "),i.is_view==0?(r(),_("button",{key:0,ref_key:"it_val",ref:g,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=F(h=>A(),["prevent"]))}," Validasi ",512)):u("",!0)])])])],512)),[[j,i.show]])}}},ze=E(Be,[["__scopeId","data-v-90307400"]]);export{ze as default};
