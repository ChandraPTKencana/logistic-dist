import j from"./Header.abb9a0dd.js";import{_ as F}from"./client-only.d61bb849.js";import $ from"./PrinterEye.687ee951.js";import A from"./Table2Column.8d9dce1d.js";import{_ as B}from"./PDFView.vue.31ae95a3.js";import{r as d,g as E,x as c,I as O,c as P,a as e,b as l,w as g,t as y,l as o,C as h,F as z,o as S,y as b,G as I}from"./entry.d3b1eb86.js";import{u as N}from"./useDownload.174f4da2.js";import{u as D}from"./useMyFetch.e123b428.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.55bb2602.js";const U={class:"w-full h-full flex flex-col"},Z={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},G={class:"bg-white p-2"},H={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},R={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},q=e("div",{class:"font-bold"}," Tgl Dari ",-1),J={class:"text-red-500"},K={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},L=e("div",{class:"font-bold"}," Tgl Sampai ",-1),Q={class:"text-red-500"},W={class:"w-full p-1 sm:w-12/12 md:w-12/12 lg:w-4/12 flex items-end justify-end"},X=e("div",{class:"text-left m-1"},"Download PDF",-1),ee=e("div",{class:"text-left m-1"},"Download Excel",-1),ue={__name:"distance",setup(te){const{$moment:f}=I(),n={};n._TimeZoneOffset=new Date().getTimezoneOffset(),n.sort="tanggal:desc";const u=d({}),_=E("token"),s=d({from:"",to:""});c().loading_full=!1;const p=()=>{n._TimeZoneOffset=new Date().getTimezoneOffset(),n.date_from=s.value.from?f(s.value.from).format("YYYY-MM-DD"):"",n.date_to=s.value.to?f(s.value.to).format("YYYY-MM-DD"):""},{downloadFile:C,viewFile:oe}=N(),a=d(!1),w=d({}),k=async()=>{if(a.value==!0){a.value=!1;return}p(),c().loading_full=!0;const{data:m,error:t,status:i}=await D("/report/distance/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:n,retry:0});if(c().loading_full=!1,i.value==="error"){b().trigger(t);return}w.value=m.value,a.value=!0},M=async()=>{p(),c().loading_full=!0;const{data:m,error:t,status:i}=await D("/report/distance/excel_download",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:n,retry:0});if(c().loading_full=!1,i.value==="error"){b().trigger(t);return}C(m.value)};return(m,t)=>{const i=j,x=O("vue-date-picker"),v=F,V=$,T=A,Y=B;return S(),P(z,null,[e("div",U,[l(i,{title:"Report Transaction"}),e("div",Z,[e("div",G,[e("form",H,[e("div",R,[q,l(v,null,{default:g(()=>[l(x,{modelValue:o(s).from,"onUpdate:modelValue":t[0]||(t[0]=r=>o(s).from=r),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",J,y(o(u).date_from),1)]),e("div",K,[L,l(v,null,{default:g(()=>[l(x,{modelValue:o(s).to,"onUpdate:modelValue":t[1]||(t[1]=r=>o(s).to=r),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Q,y(o(u).date_to),1)]),e("div",W,[e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:t[2]||(t[2]=h(r=>k(),["prevent"]))},[e("div",null,[l(V,{class:"text-2xl"})]),X]),e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:t[3]||(t[3]=h(r=>M(),["prevent"]))},[e("div",null,[l(T,{class:"text-2xl"})]),ee])])])])])]),l(Y,{show:o(a),pdfContent:o(w),onClose:t[4]||(t[4]=r=>a.value=!o(a))},null,8,["show","pdfContent"])],64)}}};export{ue as default};
