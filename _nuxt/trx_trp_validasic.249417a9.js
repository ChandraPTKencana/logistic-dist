import{_ as P}from"./HeaderPopup.vue.ba459e4c.js";import{r as C,h as M,I as H,n as S,v as T,o as a,c as _,a as e,b as Y,t as o,m as t,G as i,s as B,H as A,x as u,y as h,p as O,e as N}from"./entry.f3cbd76a.js";import{u as V}from"./useUtils.b8cd834f.js";import{u as m}from"./useMyFetch.508de42b.js";import{_ as K}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.8933bed3.js";const l=f=>(O("data-v-64211b88"),f=f(),N(),f),I={class:"box-fixed"},$={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},F={class:"w-full flex flex-col items-center grow overflow-auto"},q={class:"w-full flex flex-row flex-wrap"},U={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},J=l(()=>e("label",{for:""},"U.Jalan Per",-1)),z={class:"card-border"},E={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},R=l(()=>e("label",{for:""},"Jenis",-1)),G={class:"card-border"},L={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Q=l(()=>e("label",{for:""},"Supir",-1)),W={class:"card-border"},X={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Z=l(()=>e("label",{for:""},"Kernet",-1)),ee={class:"card-border"},te={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},se=l(()=>e("label",{for:""},"No Pol",-1)),oe={class:"card-border"},le={key:0,class:"w-full flex flex-wrap"},ae={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},_e=l(()=>e("label",{for:""},"Tujuan",-1)),ie={class:"card-border"},de={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ce=l(()=>e("label",{for:""},"Tipe",-1)),re={class:"card-border"},ne={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},fe=l(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),we={class:"card-border"},pe={key:1,class:"w-full flex flex-wrap"},ve={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ue=l(()=>e("label",{for:""},"Cost Center Code",-1)),xe={class:"card-border"},be={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},he=l(()=>e("label",{for:""},"Cost Center Desc",-1)),me={class:"card-border"},ke={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ge=l(()=>e("label",{for:""},"PVR No",-1)),ye={class:"card-border"},De={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},je=l(()=>e("label",{for:""},"PVR Total",-1)),Pe={class:"card-border"},Ce={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Me=l(()=>e("label",{for:""},"PV",-1)),He={class:"card-border"},Se={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Te=l(()=>e("label",{for:""},"PV Amount",-1)),Ye={class:"card-border"},Be={key:2,class:"w-full p-1"},Ae=l(()=>e("label",{for:""},"Peralihan",-1)),Oe={class:"card-border"},Ne={key:3,class:"w-full flex flex-col flex-wrap p-1"},Ve=l(()=>e("label",{for:""},"Tiket A",-1)),Ke={class:"card-border"},Ie={key:4,class:"w-full flex flex-wrap"},$e={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Fe=l(()=>e("label",{for:""},"In At",-1)),qe={class:"card-border disabled"},Ue={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Je=l(()=>e("label",{for:""},"Out At",-1)),ze={class:"card-border disabled"},Ee={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Re=l(()=>e("label",{for:""},"Bruto",-1)),Ge={class:"card-border disabled"},Le={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Qe=l(()=>e("label",{for:""},"Tara",-1)),We={class:"card-border disabled"},Xe={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ze=l(()=>e("label",{for:""},"Netto",-1)),et={class:"card-border disabled"},tt={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},st=l(()=>e("label",{for:""},"No Pol",-1)),ot={class:"card-border disabled"},lt={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},at=l(()=>e("label",{for:""},"Supir",-1)),_t={class:"card-border disabled"},it={key:5,class:"w-full flex flex-col flex-wrap p-1"},dt=l(()=>e("label",{for:""},"Tiket B",-1)),ct={class:"card-border"},rt={key:6,class:"w-full flex flex-wrap"},nt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ft=l(()=>e("label",{for:""},"In At",-1)),wt={class:"card-border disabled"},pt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},vt=l(()=>e("label",{for:""},"Out At",-1)),ut={class:"card-border disabled"},xt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},bt=l(()=>e("label",{for:""},"Bruto ",-1)),ht={class:"card-border disabled"},mt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},kt=l(()=>e("label",{for:""},"Tara ",-1)),gt={class:"card-border disabled"},yt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Dt=l(()=>e("label",{for:""},"Netto ",-1)),jt={class:"card-border disabled"},Pt={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ct=l(()=>e("label",{for:""},"No Pol",-1)),Mt={class:"card-border disabled"},Ht={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},St=l(()=>e("label",{for:""},"Supir",-1)),Tt={class:"card-border disabled"},Yt={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bt=l(()=>e("label",{for:""},"In At",-1)),At={class:"card-border"},Ot={key:8,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Nt=l(()=>e("label",{for:""},"Out At",-1)),Vt={class:"card-border"},Kt={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},It=l(()=>e("label",{for:""},"Bruto",-1)),$t={class:"card-border"},Ft={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},qt=l(()=>e("label",{for:""},"Tara",-1)),Ut={class:"card-border"},Jt={key:11,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},zt=l(()=>e("label",{for:""},"Netto",-1)),Et={class:"card-border"},Rt={class:"w-full flex items-center justify-end"},Gt={class:"w-full flex flex-wrap p-3 items-center"},Lt=l(()=>e("div",null," Di Validasi oleh : ",-1)),Qt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Wt={key:0},Xt={key:1},Zt={__name:"trx_trp_validasic",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(f){const p=f,{$moment:r}=A(),{pointFormat:d}=V(),s=C({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:""}}),x=M("token"),k=async()=>{u().loading_full=!0;const w=new FormData;let n="post",v=p.id;v==0||(w.append("id",v),w.append("_method","PUT"));const{data:c,error:y,status:D}=await m("/trx_trp_validasi",{method:n,headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},body:w,retry:0});if(u().loading_full=!1,D.value==="error"){h().trigger(y);return}s.value.val=c.value.val,s.value.val_user=c.value.val_user,s.value.val_by=c.value.val_by,s.value.val_at=c.value.val_at,s.value.val1=c.value.val1,s.value.val1_user=c.value.val1_user,s.value.val1_by=c.value.val1_by,s.value.val1_at=c.value.val1_at;let b=p.p_data.map(j=>j.id).indexOf(p.id);b>=-1&&p.p_data.splice(b,1,{...s.value}),p.fnClose()},g=async()=>{u().loading_full=!0;const{data:w,error:n,status:v}=await m("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},params:{id:p.id},retry:0});if(u().loading_full=!1,v.value==="error"){h().trigger(n);return}s.value=w.value.data};return H(()=>p.show,(w,n)=>{w==!0&&g()},{immediate:!0}),(w,n)=>{const v=P;return S((a(),_("section",I,[e("div",null,[Y(v,{title:"Form Transaction Validation",fn:f.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",$,[e("div",F,[e("div",q,[e("div",U,[J,e("div",z,o(t(s).tanggal?t(r)(t(s).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",E,[R,e("div",G,o(t(s).jenis),1)]),e("div",L,[Q,e("div",W,o(t(s).supir),1)]),e("div",X,[Z,e("div",ee,o(t(s).kernet),1)]),e("div",te,[se,e("div",oe,o(t(s).no_pol),1)]),t(s).jenis!=""?(a(),_("div",le,[e("div",ae,[_e,e("div",ie,o(t(s).xto),1)]),e("div",de,[ce,e("div",re,o(t(s).tipe),1)]),e("div",ne,[fe,e("div",we,o(t(d)(t(s).amount||0)),1)])])):i("",!0),t(s).jenis!=""?(a(),_("div",pe,[e("div",ve,[ue,e("div",xe,o(t(s).cost_center_code),1)]),e("div",be,[he,e("div",me,o(t(s).cost_center_code),1)]),e("div",ke,[ge,e("div",ye,o(t(s).pvr_no),1)]),e("div",De,[je,e("div",Pe,o(t(d)(t(s).pvr_total||0)),1)]),e("div",Ce,[Me,e("div",He,o(t(s).pv_no),1)]),e("div",Se,[Te,e("div",Ye,o(t(d)(t(s).pv_total||0)),1)])])):i("",!0),t(s).jenis=="TBS"?(a(),_("div",Be,[Ae,e("div",Oe,o(t(s).transition_target),1)])):i("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(a(),_("div",Ne,[Ve,e("div",Ke,o(t(s).ticket_a_no),1)])):i("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(a(),_("div",Ie,[e("div",$e,[Fe,e("div",qe,o(t(s).ticket_a_in_at?t(r)(t(s).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Ue,[Je,e("div",ze,o(t(s).ticket_a_out_at?t(r)(t(s).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Ee,[Re,e("div",Ge,o(t(s).ticket_a_bruto?t(d)(t(s).ticket_a_bruto):0),1)]),e("div",Le,[Qe,e("div",We,o(t(s).ticket_a_tara?t(d)(t(s).ticket_a_tara):0),1)]),e("div",Xe,[Ze,e("div",et,o(t(s).ticket_a_bruto?t(d)(t(s).ticket_a_bruto-t(s).ticket_a_tara):0),1)]),e("div",tt,[st,e("div",ot,o(t(s).ticket_a_no_pol),1)]),e("div",lt,[at,e("div",_t,o(t(s).ticket_a_supir),1)])])):i("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(a(),_("div",it,[dt,e("div",ct,o(t(s).ticket_b_no),1)])):i("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(a(),_("div",rt,[e("div",nt,[ft,e("div",wt,o(t(s).ticket_b_in_at?t(r)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",pt,[vt,e("div",ut,o(t(s).ticket_b_out_at?t(r)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",xt,[bt,e("div",ht,o(t(s).ticket_b_bruto?t(d)(t(s).ticket_b_bruto):0),1)]),e("div",mt,[kt,e("div",gt,o(t(s).ticket_b_tara?t(d)(t(s).ticket_b_tara):0),1)]),e("div",yt,[Dt,e("div",jt,o(t(s).ticket_b_bruto?t(d)(t(s).ticket_b_bruto-t(s).ticket_b_tara):0),1)]),e("div",Pt,[Ct,e("div",Mt,o(t(s).ticket_b_no_pol),1)]),e("div",Ht,[St,e("div",Tt,o(t(s).ticket_b_supir),1)])])):i("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),_("div",Yt,[Bt,e("div",At,o(t(s).ticket_b_in_at?t(r)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),_("div",Ot,[Nt,e("div",Vt,o(t(s).ticket_b_out_at?t(r)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),_("div",Kt,[It,e("div",$t,o(t(d)(t(s).ticket_b_bruto||0)),1)])):i("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),_("div",Ft,[qt,e("div",Ut,o(t(d)(t(s).ticket_b_tara||0)),1)])):i("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),_("div",Jt,[zt,e("div",Et,o(t(d)(t(s).ticket_b_netto||0)),1)])):i("",!0)])]),e("div",Rt,[e("div",Gt,[Lt,t(s).val||t(s).val1?(a(),_("div",Qt,[t(s).val?(a(),_("div",Wt," App 1 : "+o(t(s).val_by.username)+" ( "+o(t(s).val_at?t(r)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0),t(s).val1?(a(),_("div",Xt," App 2 : "+o(t(s).val1_by.username)+" ( "+o(t(s).val1_at?t(r)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0)])):i("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=c=>f.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=B(c=>k(),["prevent"]))}," Validasi ")])])])],512)),[[T,f.show]])}}},is=K(Zt,[["__scopeId","data-v-64211b88"]]);export{is as default};
