import{_ as ft}from"./Header.71ed6a7a.js";import{_ as Ne}from"./Plus.20e40809.js";import{_ as mt}from"./Edit.468b824a.js";import{_ as bt}from"./Eyes.a945b41c.js";import{_ as xt}from"./Delete.33334e8b.js";import{_ as ht}from"./Void.93e3bfbf.js";import{_ as wt}from"./Signature.51267873.js";import{u as yt,_ as gt}from"./useDownload.35afcaaa.js";import{_ as kt,a as $t}from"./Check.35d029cf.js";import{_ as Dt}from"./TableView.8cb0d023.js";import{_ as At}from"./PopupMini.vue.47efb420.js";import{_ as Ue}from"./HeaderPopup.vue.185b5495.js";import{_ as Ct,a as Tt}from"./ToolsPopup.e88d6eb5.js";import{_ as Pt}from"./client-only.5c3a87a2.js";import{r as v,f as $e,H as Pe,J as K,g as re,L as St,o as c,c as m,h as j,v as Be,a as e,b as $,k as t,l as Se,t as i,j as X,F as Z,n as ne,G as T,w as B,m as Re,x as b,y as R,p as Ye,e as Ee,M as Ie,s as qe,D as qt,I as Vt,i as Te,d as H,q as jt,E as Mt,K as oe}from"./entry.d239d820.js";import{u as Ve}from"./useUtils.807de404.js";import{u as Y}from"./useMyFetch.75d43dc0.js";import{_ as ze}from"./_plugin-vue_export-helper.c27b6911.js";import"./Search.547d4f6a.js";import"./Times.74e0f3d2.js";const x=A=>(Ye("data-v-09051475"),A=A(),Ee(),A),Ot={class:"box-fixed"},Ft={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Nt={class:"w-full flex flex-col items-center grow overflow-auto"},Ut={class:"w-full flex flex-row flex-wrap"},Bt={class:"w-full sm:w-3/12 flex px-2 py-3"},Rt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Yt=x(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),Et={class:"w-6/12 flex flex-col flex-wrap p-1"},It=x(()=>e("label",{for:""},"Tujuan",-1)),zt=Ie('<option value="" data-v-09051475></option><option value="KPN" data-v-09051475>KPN</option><option value="KAS" data-v-09051475>KAS</option><option value="KUS" data-v-09051475>KUS</option><option value="ARP" data-v-09051475>ARP</option><option value="KAP" data-v-09051475>KAP</option><option value="SMP" data-v-09051475>SMP</option>',7),Kt=[zt],Ht={class:"text-red-500"},Lt={class:"w-6/12 flex flex-col flex-wrap p-1"},Jt=x(()=>e("label",{for:""},"Tipe",-1)),Gt=["disabled"],Xt=x(()=>e("option",{value:""},null,-1)),Zt=x(()=>e("option",{value:"From"},"Dari",-1)),Qt=x(()=>e("option",{value:"To"},"Ke",-1)),Wt=[Xt,Zt,Qt],el={class:"text-red-500"},tl={class:"w-full sm:w-9/12 flex px-2 py-3"},ll={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},al=x(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),sl={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ol=x(()=>e("label",{for:""},"ID",-1)),nl=["disabled"],dl={id:"standby_mst"},il=["value"],rl={class:"text-red-500"},_l={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ul=x(()=>e("label",{for:""},"Name",-1)),cl={class:"card-border disabled"},pl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},vl=x(()=>e("label",{for:""},"Type",-1)),fl={class:"card-border disabled"},ml={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},bl=x(()=>e("label",{for:""},"Amount",-1)),xl={class:"card-border disabled"},hl={class:"w-full flex flex-wrap"},wl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yl=x(()=>e("label",{for:""},"Supir",-1)),gl=["disabled"],kl={id:"supir"},$l=["value"],Dl={class:"text-red-500"},Al={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Cl=x(()=>e("label",{for:""},"Kernet",-1)),Tl=["disabled"],Pl={id:"kernet"},Sl=["value"],ql={class:"text-red-500"},Vl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jl=x(()=>e("label",{for:""},"No Pol",-1)),Ml=["disabled"],Ol={id:"vehicle"},Fl=["value"],Nl={class:"text-red-500"},Ul={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bl=x(()=>e("label",{for:""},"Tujuan",-1)),Rl=["disabled"],Yl={id:"xto"},El={class:"text-red-500"},Il={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},zl=x(()=>e("label",{for:""},"Note For Remarks",-1)),Kl=["disabled"],Hl={class:"text-red-500"},Ll={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Jl=x(()=>e("label",{for:""},"Referensi",-1)),Gl=["disabled"],Xl={class:"text-red-500"},Zl={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Ql={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Wl=x(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),ea={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ta=x(()=>e("label",{for:""}," Code",-1)),la=["disabled"],aa={id:"cost_center"},sa=["value"],oa={class:"text-red-500"},na={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},da=x(()=>e("label",{for:""},"Desc",-1)),ia={class:"card-border disabled"},ra={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},_a={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ua=x(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),ca={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},pa=x(()=>e("label",{for:""},"No",-1)),va={class:"card-border disabled"},fa={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ma=x(()=>e("label",{for:""},"Total",-1)),ba={class:"card-border disabled"},xa={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ha={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},wa=x(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ya={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ga=x(()=>e("label",{for:""},"No",-1)),ka={class:"card-border disabled"},$a={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Da=x(()=>e("label",{for:""},"Total",-1)),Aa={class:"card-border disabled"},Ca={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},Ta={class:"w-full",role:"sticky"},Pa={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Sa={class:"sticky -top-1 !z-[2]"},qa=["colspan"],Va={class:"sticky top-7 !z-[2]"},ja={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},Ma=x(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),Oa=x(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),Fa=x(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan",-1)),Na={ref:"to_move"},Ua=["data-index"],Ba={key:0,class:"tools cell"},Ra={class:"w-full h-full flex items-center justify-center"},Ya=["onClick"],Ea={class:"cell"},Ia={class:"w-full h-full flex items-center justify-center relative"},za={class:"cell"},Ka={class:"w-full h-full flex items-center justify-center"},Ha=["disabled","onUpdate:modelValue"],La={key:0},Ja={class:"tools cell"},Ga={class:"w-full flex items-center justify-end"},Xa={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(A){const y=A,{$moment:W}=qe(),{pointFormat:L}=Ve(),_e={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[]},s=v([]),ee=v({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});let P={..._e};const l=v({..._e}),le=$e("token"),C=v({});Pe();const E=async()=>{b().loading_full=!0,C.value={};const u=new FormData;u.append("transition_target",l.value.transition_target),u.append("transition_type",l.value.transition_type),u.append("standby_mst_id",l.value.standby_mst_id),u.append("supir",l.value.supir),u.append("kernet",l.value.kernet),u.append("no_pol",l.value.no_pol),u.append("xto",l.value.xto),u.append("note_for_remarks",l.value.note_for_remarks),u.append("ref",l.value.ref),u.append("cost_center_code",l.value.cost_center_code),u.append("online_status",y.online_status);let _=[...s.value];_=_.map(Q=>(Q.tanggal=W(Q.tanggal).format("Y-MM-DD"),Q)),u.append("details",JSON.stringify(_));let O="post",F=y.id;F==0||(u.append("id",F),u.append("_method","PUT"));const{data:N,error:de,status:me}=await Y("/standby_trx",{method:O,headers:{Authorization:`Bearer ${le.value}`,Accept:"application/json"},body:u,retry:0});if(b().loading_full=!1,me.value==="error"){R().trigger(de,C);return}if(l.value.updated_at=N.value.updated_at,y.id<=0)l.value.id=N.value.id,l.value.created_at=N.value.created_at,y.p_data.unshift(l.value);else{let Q=y.p_data.map(ae=>ae.id).indexOf(y.id);Q>=-1&&y.p_data.splice(Q,1,{...l.value})}y.fnClose()},q=K(()=>[...new Set(h.value.filter(u=>u.role=="Supir"))]),g=K(()=>[...new Set(h.value.filter(u=>u.role=="Kernet"))]),M=K(()=>!1),n=async()=>{b().loading_full=!0;const{data:u,error:_,status:O}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${le.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(b().loading_full=!1,O.value==="error"){R().trigger(_);return}l.value=u.value.data,P={...u.value.data};let F="Edit";s.value=u.value.data.details.map(N=>(N.p_status=F,N.key=N.ordinal,N))},J=v([]),V=v([]),I=v([]),h=v([]),ve=async()=>{b().loading_full=!0;const{data:u,error:_,status:O}=await Y("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${le.value}`,Accept:"application/json"},retry:0});if(b().loading_full=!1,O.value==="error"){R().trigger(_);return}J.value=u.value.list_standby_mst,V.value=u.value.list_xto,I.value=u.value.list_vehicle,h.value=u.value.list_employee},o=v(-1),w=v(!1),z=v({left:0,top:0}),De=(u,_)=>{o.value=_,w.value=!0,z.value={left:u.clientX,top:u.clientY}},we=()=>{s.value.push({...ee.value,p_status:"Add"})},ye=()=>{w.value=!1},ue=(u="")=>{if(u=="insert")s.value.splice(o.value,0,{...ee.value,p_status:"Add"});else if(u=="delete")s.value[o.value].p_status=="Edit"?s.value[o.value].p_status="Remove":s.value.splice(o.value,1);else if(u=="move_top"){let _=s.value[o.value];s.value.splice(o.value,1),s.value.splice(o.value-1,0,{..._})}else if(u=="move_bottom"){let _=s.value[o.value];s.value.splice(o.value,1),s.value.splice(o.value+1,0,{..._})}w.value=!1};re(()=>y.show,async(u,_)=>{u==!0&&(await ve(),await y.fnLoadDBData(),C.value={},l.value={..._e},s.value=[],y.id!=0&&n())},{immediate:!0});let fe={name:"",tipe:"",amount:0};return re(()=>l.value.standby_mst_id,(u,_)=>{if(u==""||u!=""){let O=J.value.filter(F=>F.id==u);O.length>0?l.value.standby_mst_={...O[0]}:l.value.standby_mst_id==P.standby_mst_id?l.value.standby_mst_={...P.standby_mst_}:l.value.standby_mst_={...fe}}},{}),re(()=>l.value.cost_center_code,(u,_)=>{if(u==""&&(l.value.cost_center_desc=""),u){let O=y.list_cost_center.filter(F=>F.CostCenter==u);O.length>0?l.value.cost_center_desc=O[0].Description:l.value.cost_center_code==P.cost_center_code&&(l.value.cost_center_desc=P.cost_center_desc)}},{deep:!0,immediate:!0}),(u,_)=>{var ae,be,se;const O=Ue,F=Ct,N=St("vue-date-picker"),de=Pt,me=Ne,Q=Tt;return c(),m(Z,null,[j(e("section",Ot,[e("div",null,[$(O,{title:"Form Transaction",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Ft,[e("div",Nt,[e("div",Ut,[e("div",Bt,[e("div",Rt,[Yt,e("div",Et,[It,j(e("select",{"onUpdate:modelValue":_[0]||(_[0]=r=>t(l).transition_target=r)},Kt,512),[[Se,t(l).transition_target]]),e("p",Ht,i(t(C).transition_target),1)]),e("div",Lt,[Jt,j(e("select",{"onUpdate:modelValue":_[1]||(_[1]=r=>t(l).transition_type=r),disabled:t(l).pvr_no!=""},Wt,8,Gt),[[Se,t(l).transition_type]]),e("p",el,i(t(C).transition_type),1)])])]),e("div",tl,[e("div",ll,[al,e("div",sl,[ol,j(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":_[2]||(_[2]=r=>t(l).standby_mst_id=r),disabled:t(l).pvr_no!=""},null,8,nl),[[X,t(l).standby_mst_id]]),e("datalist",dl,[(c(!0),m(Z,null,ne(t(J),r=>(c(),m("option",{value:r.id},i(r.name+"-"+r.tipe+"-"+t(L)(r.amount||0)),9,il))),256))]),e("p",rl,i(t(C).standby_mst_id),1)]),e("div",_l,[ul,e("div",cl,i((ae=t(l).standby_mst_)==null?void 0:ae.name),1)]),e("div",pl,[vl,e("div",fl,i((be=t(l).standby_mst_)==null?void 0:be.tipe),1)]),e("div",ml,[bl,e("div",xl,i(t(L)((se=t(l).standby_mst_)==null?void 0:se.amount)),1)])])]),e("div",hl,[e("div",wl,[yl,j(e("input",{type:"text",list:"supir","onUpdate:modelValue":_[3]||(_[3]=r=>t(l).supir=r),disabled:t(l).pvr_no!=""},null,8,gl),[[X,t(l).supir]]),e("datalist",kl,[(c(!0),m(Z,null,ne(t(q),r=>(c(),m("option",{value:r.name},i(r.name),9,$l))),256))]),e("p",Dl,i(t(C).supir),1)]),e("div",Al,[Cl,j(e("input",{type:"text",list:"kernet","onUpdate:modelValue":_[4]||(_[4]=r=>t(l).kernet=r),disabled:t(l).pvr_no!=""},null,8,Tl),[[X,t(l).kernet]]),e("datalist",Pl,[(c(!0),m(Z,null,ne(t(g),r=>(c(),m("option",{value:r.name},i(r.name),9,Sl))),256))]),e("p",ql,i(t(C).kernet),1)]),e("div",Vl,[jl,j(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":_[5]||(_[5]=r=>t(l).no_pol=r),disabled:t(l).pvr_no!=""},null,8,Ml),[[X,t(l).no_pol]]),e("datalist",Ol,[(c(!0),m(Z,null,ne(t(I),r=>(c(),m("option",{value:r.no_pol},i(r.no_pol),9,Fl))),256))]),e("p",Nl,i(t(C).no_pol),1)]),e("div",Ul,[Bl,j(e("input",{type:"text",list:"xto","onUpdate:modelValue":_[6]||(_[6]=r=>t(l).xto=r),disabled:t(l).pvr_no!=""},null,8,Rl),[[X,t(l).xto]]),e("datalist",Yl,[(c(!0),m(Z,null,ne(t(V),r=>(c(),m("option",null,i(r),1))),256))]),e("p",El,i(t(C).xto),1)]),e("div",Il,[zl,j(e("textarea",{"onUpdate:modelValue":_[7]||(_[7]=r=>t(l).note_for_remarks=r),disabled:t(l).pvr_no!=""}," ",8,Kl),[[X,t(l).note_for_remarks]]),e("p",Hl,i(t(C).note_for_remarks),1)]),e("div",Ll,[Jl,j(e("input",{type:"text","onUpdate:modelValue":_[8]||(_[8]=r=>t(l).ref=r),disabled:t(l).pvr_no!=""},null,8,Gl),[[X,t(l).ref]]),e("p",Xl,i(t(C).ref),1)])]),e("div",Zl,[e("div",Ql,[Wl,e("div",ea,[ta,j(e("input",{list:"cost_center","onUpdate:modelValue":_[9]||(_[9]=r=>t(l).cost_center_code=r),disabled:t(l).pvr_no!=""},null,8,la),[[X,t(l).cost_center_code]]),e("datalist",aa,[(c(!0),m(Z,null,ne(A.list_cost_center,r=>(c(),m("option",{value:r.CostCenter},i(r.CostCenter+"-"+r.Description),9,sa))),256))]),e("p",oa,i(t(C).cost_center_code),1)]),e("div",na,[da,e("div",ia,i(t(l).cost_center_desc),1)])])]),e("div",ra,[e("div",_a,[ua,e("div",ca,[pa,e("div",va,i(t(l).pvr_no),1)]),e("div",fa,[ma,e("div",ba,i(t(L)(t(l).pvr_total||0)),1)])])]),e("div",xa,[e("div",ha,[wa,e("div",ya,[ga,e("div",ka,i(t(l).pv_no),1)]),e("div",$a,[Da,e("div",Aa,i(t(L)(t(l).pv_total)),1)])])]),e("div",Ca,[e("div",Ta,[e("table",Pa,[e("thead",null,[e("tr",Sa,[e("td",{colspan:t(M)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,qa)]),e("tr",Va,[t(M)?T("",!0):(c(),m("th",ja)),Ma,Oa,Fa])]),e("tbody",Na,[(c(!0),m(Z,null,ne(t(s),(r,ce)=>(c(),m(Z,{key:ce},[r.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":ce},[t(M)?T("",!0):(c(),m("td",Ba,[e("div",Ra,[e("button",{type:"button",name:"button",onClick:ie=>De(ie,ce)},[$(F)],8,Ya)])])),e("td",null,i(ce+1)+".",1),e("td",Ea,[e("div",Ia,[$(de,null,{default:B(()=>[$(N,{modelValue:r.tanggal,"onUpdate:modelValue":ie=>r.tanggal=ie,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),e("td",za,[e("div",Ka,[j(e("textarea",{disabled:t(M),class:"p-1 w-full","onUpdate:modelValue":ie=>r.note=ie,cols:"7",rows:"2"},null,8,Ha),[[X,r.note]])])])],8,Ua)):T("",!0)],64))),128)),t(M)?T("",!0):(c(),m("tr",La,[e("td",Ja,[e("button",{type:"button",name:"button",onClick:_[10]||(_[10]=r=>we())},[$(me)])])]))],512)])])])])]),e("div",Ga,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:_[11]||(_[11]=r=>A.fnClose())}," Cancel "),t(M)?T("",!0):(c(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:_[12]||(_[12]=Re(r=>E(),["prevent"]))}," Save "))])])])],512),[[Be,A.show]]),$(Q,{show:t(w),coor:t(z),fn:ye,data:t(s),data_index:t(o),onReplyAct:_[13]||(_[13]=r=>ue(r))},null,8,["show","coor","data","data_index"])],64)}}},Za=ze(Xa,[["__scopeId","data-v-09051475"]]);const k=A=>(Ye("data-v-056c1dac"),A=A(),Ee(),A),Qa={class:"box-fixed"},Wa={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},es={class:"w-full flex flex-col items-center grow overflow-auto"},ts={class:"w-full flex flex-row flex-wrap"},ls={class:"w-full sm:w-3/12 flex px-2 py-3"},as={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ss=k(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),os={class:"w-6/12 flex flex-col flex-wrap p-1"},ns=k(()=>e("label",{for:""},"Tujuan",-1)),ds={class:"card-border"},is={class:"w-6/12 flex flex-col flex-wrap p-1"},rs=k(()=>e("label",{for:""},"Tipe",-1)),_s={class:"card-border"},us={class:"w-full sm:w-9/12 flex px-2 py-3"},cs={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ps=k(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),vs={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},fs=k(()=>e("label",{for:""},"ID",-1)),ms={class:"card-border"},bs={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},xs=k(()=>e("label",{for:""},"Name",-1)),hs={class:"card-border"},ws={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ys=k(()=>e("label",{for:""},"Type",-1)),gs={class:"card-border"},ks={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},$s=k(()=>e("label",{for:""},"Amount",-1)),Ds={class:"card-border"},As={class:"w-full flex flex-wrap"},Cs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ts=k(()=>e("label",{for:""},"Supir",-1)),Ps={class:"card-border"},Ss={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},qs=k(()=>e("label",{for:""},"Kernet",-1)),Vs={class:"card-border"},js={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ms=k(()=>e("label",{for:""},"No Pol",-1)),Os={class:"card-border"},Fs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ns=k(()=>e("label",{for:""},"Tujuan",-1)),Us={class:"card-border"},Bs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Rs=k(()=>e("label",{for:""},"Note For Remarks",-1)),Ys={class:"card-border"},Es={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Is=k(()=>e("label",{for:""},"Referensi",-1)),zs={class:"card-border"},Ks={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Hs={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ls=k(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Js={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Gs=k(()=>e("label",{for:""}," Code",-1)),Xs={class:"card-border"},Zs={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Qs=k(()=>e("label",{for:""},"Desc",-1)),Ws={class:"card-border disabled"},eo={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},to={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},lo=k(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),ao={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},so=k(()=>e("label",{for:""},"No",-1)),oo={class:"card-border disabled"},no={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},io=k(()=>e("label",{for:""},"Total",-1)),ro={class:"card-border disabled"},_o={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},uo={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},co=k(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),po={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},vo=k(()=>e("label",{for:""},"No",-1)),fo={class:"card-border disabled"},mo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},bo=k(()=>e("label",{for:""},"Total",-1)),xo={class:"card-border disabled"},ho={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},wo={class:"w-full",role:"sticky"},yo={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},go={class:"sticky -top-1 !z-[2]"},ko=["colspan"],$o=k(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),Do={ref:"to_move"},Ao=["data-index"],Co={class:"cell"},To={class:"w-full h-full flex items-center justify-center relative"},Po={class:"cell"},So={class:"w-full h-full flex items-center justify-center"},qo={class:"w-full flex items-center justify-end"},Vo={class:"w-full flex flex-wrap p-3 items-center"},jo=k(()=>e("div",null," Di Validasi oleh : ",-1)),Mo={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Oo={key:0},Fo={key:1},No={key:2},Uo={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(A){const y=A,{$moment:W}=qe(),{pointFormat:L}=Ve(),s=v({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),ee=$e("token"),P=v({}),l=v([]),le=async()=>{b().loading_full=!0,P.value={};const q=new FormData;let g="post",M=y.id;M==0||(q.append("id",M),q.append("_method","PUT"));const{data:n,error:J,status:V}=await Y("/standby_trx_validasi",{method:g,headers:{Authorization:`Bearer ${ee.value}`,Accept:"application/json"},body:q,retry:0});if(b().loading_full=!1,V.value==="error"){R().trigger(J,P);return}s.value.val=n.value.val,s.value.val_user=n.value.val_user,s.value.val_by=n.value.val_by,s.value.val_at=n.value.val_at,s.value.val1=n.value.val1,s.value.val1_user=n.value.val1_user,s.value.val1_by=n.value.val1_by,s.value.val1_at=n.value.val1_at,s.value.val2=n.value.val2,s.value.val2_user=n.value.val2_user,s.value.val2_by=n.value.val2_by,s.value.val2_at=n.value.val2_at;let I=y.p_data.map(h=>h.id).indexOf(y.id);I>=-1&&y.p_data.splice(I,1,{...s.value}),y.fnClose()},C=async()=>{b().loading_full=!0;const{data:q,error:g,status:M}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${ee.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(b().loading_full=!1,M.value==="error"){R().trigger(g);return}s.value=q.value.data,l.value=q.value.data.details};K(()=>{let q=0;return l.value.forEach(g=>{g.p_status!="Remove"&&(q+=g.amount)}),q});const E=K(()=>!1);return re(()=>y.show,(q,g)=>{q==!0&&C()},{immediate:!0}),(q,g)=>{var n,J,V;const M=Ue;return j((c(),m("section",Qa,[e("div",null,[$(M,{title:"Form Transaction Standby Validation",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Wa,[e("div",es,[e("div",ts,[e("div",ls,[e("div",as,[ss,e("div",os,[ns,e("div",ds,i(t(s).transition_target),1)]),e("div",is,[rs,e("div",_s,i(t(s).transition_type),1)])])]),e("div",us,[e("div",cs,[ps,e("div",vs,[fs,e("div",ms,i(t(s).standby_mst_id),1)]),e("div",bs,[xs,e("div",hs,i((n=t(s).standby_mst_)==null?void 0:n.name),1)]),e("div",ws,[ys,e("div",gs,i((J=t(s).standby_mst_)==null?void 0:J.tipe),1)]),e("div",ks,[$s,e("div",Ds,i(t(L)((V=t(s).standby_mst_)==null?void 0:V.amount)),1)])])]),e("div",As,[e("div",Cs,[Ts,e("div",Ps,i(t(s).supir),1)]),e("div",Ss,[qs,e("div",Vs,i(t(s).kernet),1)]),e("div",js,[Ms,e("div",Os,i(t(s).no_pol),1)]),e("div",Fs,[Ns,e("div",Us,i(t(s).xto),1)]),e("div",Bs,[Rs,e("div",Ys,i(t(s).note_for_remarks),1)]),e("div",Es,[Is,e("div",zs,i(t(s).ref),1)])]),e("div",Ks,[e("div",Hs,[Ls,e("div",Js,[Gs,e("div",Xs,i(t(s).cost_center_code),1)]),e("div",Zs,[Qs,e("div",Ws,i(t(s).cost_center_desc),1)])])]),e("div",eo,[e("div",to,[lo,e("div",ao,[so,e("div",oo,i(t(s).pvr_no),1)]),e("div",no,[io,e("div",ro,i(t(L)(t(s).pvr_total||0)),1)])])]),e("div",_o,[e("div",uo,[co,e("div",po,[vo,e("div",fo,i(t(s).pv_no),1)]),e("div",mo,[bo,e("div",xo,i(t(L)(t(s).pv_total)),1)])])]),e("div",ho,[e("div",wo,[e("table",yo,[e("thead",null,[e("tr",go,[e("td",{colspan:t(E)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,ko)]),$o]),e("tbody",Do,[(c(!0),m(Z,null,ne(t(l),(I,h)=>(c(),m(Z,{key:h},[I.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":h},[e("td",null,i(h+1)+".",1),e("td",Co,[e("div",To,i(t(W)(I.tanggal).format("DD-MM-YYYY")),1)]),e("td",Po,[e("div",So,i(I.note),1)])],8,Ao)):T("",!0)],64))),128))],512)])])])])]),e("div",qo,[e("div",Vo,[jo,t(s).val||t(s).val1||t(s).val2?(c(),m("div",Mo,[t(s).val?(c(),m("div",Oo," App 1 : "+i(t(s).val_by.username)+" ( "+i(t(s).val_at?t(W)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0),t(s).val1?(c(),m("div",Fo," App 2 : "+i(t(s).val1_by.username)+" ( "+i(t(s).val1_at?t(W)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0),t(s).val2?(c(),m("div",No," App 2 : "+i(t(s).val2_by.username)+" ( "+i(t(s).val2_at?t(W)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0)])):T("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:g[0]||(g[0]=I=>A.fnClose())}," Cancel "),A.is_view==0?(c(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:g[1]||(g[1]=Re(I=>le(),["prevent"]))}," Validasi ")):T("",!0)])])])],512)),[[Be,A.show]])}}},Bo=ze(Uo,[["__scopeId","data-v-056c1dac"]]),Ro={class:"w-full h-full flex flex-col"},Yo={class:"w-full flex grow flex-col overflow-auto h-0"},Eo={class:"w-full flex justify-between flex-wrap"},Io={class:"grow flex"},zo={class:"m-1"},Ko=Ie('<option value="trx_not_done">Undone</option><option value="trx_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Ho=[Ko],Lo={key:0,class:"flex"},Jo=e("span",{class:"text-xs"},"Mode",-1),Go={class:"grow mb-5"},Xo=e("b",null,"tidak dapat dibatalkan lagi",-1),Zo={class:"grow mb-5"},Qo=e("b",null,"tidak dapat dibatalkan lagi",-1),wn={__name:"trx",async setup(A){let y,W;const{$moment:L}=qe(),{pointFormat:_e}=Ve(),s=d=>d.deleted==1?"!bg-red-400":d.pvr_id>0&&d.req_deleted==1?"!bg-yellow-300":d.pv_id>0?"!bg-blue-300":"",ee=d=>(d.map(a=>{a.class_h=s(a)}),d),P=v("trx_not_done");re(()=>P.value,d=>{Oe.value.map(a=>{let D=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(a.key)>-1;return["all","deleted","req_deleted"].indexOf(d)>-1?D&&(a.tbl_show=1):D&&(a.tbl_show=0),a}),ye()},{immediate:!1});const l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const le=v({}),C=v({from:"",to:""}),E=$e("token"),q=$e("role"),g=d=>d.includes(q.value),{data:M}=([y,W]=qt(async()=>Mt(async()=>{b().loading_full=!0;let d=[];const[a,D]=await Promise.all([Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{filter_status:P},retry:0})]);return a.status.value!=="error"&&(d=ee(a.data.value.data)),a.status.value==="error"?(R().trigger(a.error),{standby_trxs:d}):(b().loading_full=!1,{standby_trxs:d})},"$rVBHTgwE0s")),y=await y,W(),y),n=v(M.value.standby_trxs||[]),J=v([]),V=v(!1),I=async()=>{b().loading_full=!0;const{data:d,error:a,status:D}=await Y("/standby_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{online_status:V.value},retry:0});if(b().loading_full=!1,D.value==="error"){R().trigger(a);return}J.value=d.value.list_cost_center},h=v(""),ve=v({field:"tanggal",by:"desc"}),o=v(-1),w=K(()=>n.value[o.value]),z=v({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),De=()=>{l.like="",h.value!=""&&(l.like=`id:%${h.value}%,transition_target:%${h.value}%,transition_type:%${h.value}%,standby_mst_name:%${h.value}%,standby_mst_type:%${h.value}%,supir:%${h.value}%,kernet:%${h.value}%,no_pol:%${h.value}%,xto:%${h.value}%,pvr_no:%${h.value}%,pv_no:%${h.value}%,pvr_id:%${h.value}%,pvr_no:%${h.value}%,tanggal:%${h.value}%,transition_to:%${h.value}%,cost_center_code:%${h.value}%`),l.sort="",ve.value.field&&(l.sort=ve.value.field+":"+ve.value.by),l.date_from=C.value.from?L(C.value.from).format("YYYY-MM-DD"):"",l.date_to=C.value.to?L(C.value.to).format("YYYY-MM-DD"):"",l.filter_model=JSON.stringify(b()._tv.filter_model)},we=async()=>{b().loading_full=!0,le.value={},z.value.may_get_data=!1,l.page=z.value.page,l.page==1&&(n.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(n.value[0])),l.filter_status=P.value;const{data:d,error:a,status:D}=await Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:l,retry:0});if(b().loading_full=!1,z.value.may_get_data=!0,D.value==="error"){R().trigger(a,le);return}z.value.page==1?n.value=ee(d.value.data):z.value.page>1&&(n.value=[...n.value,...ee(d.value.data)]),d.value.data.length==0&&(z.value.is_last_record=!0),b()._tv.filter_box=!1},ye=()=>{o.value=-1,z.value.page=1,z.value.is_last_record=!1,De(),we()},ue=v(!1),fe=v(0),u=()=>{fe.value=0,ue.value=!0},{display:_}=Pe();Vt(Pe());const O=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(fe.value=n.value[o.value].id,ue.value=!0)},F=v(!1),N=v(0),de=v(!1),me=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[o.value].id,F.value=!0,de.value=!1)},Q=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[o.value].id,F.value=!0,de.value=!0)},ae=v(!1),be=v({}),se=v(!1),r=v(""),ce=async()=>{se.value&&(se.value=!1)},ie=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(r.value="",be.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto},se.value=!0)};re(()=>r.value,d=>{d.trim().length>0?ae.value=!0:ae.value=!1},{immediate:!1});const Ke=async()=>{b().loading_full=!0;const d=new FormData;d.append("id",n.value[o.value].id),d.append("deleted_reason",r.value),d.append("_method","DELETE");const{data:a,error:D,status:G}=await Y("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:d,retry:0});if(b().loading_full=!1,G.value==="error"){R().trigger(D);return}let p={...n.value[o.value]};p.deleted=a.value.deleted,p.deleted_user=a.value.deleted_user,p.deleted_at=a.value.deleted_at,p.deleted_by=a.value.deleted_by,p.deleted_reason=a.value.deleted_reason,p.class_h=s(p),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...p}),o.value=-1,se.value=!1},Ae=v(!1),je=v({}),xe=v(!1),pe=v(""),He=async()=>{xe.value&&(xe.value=!1)},Le=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(pe.value="",je.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto},xe.value=!0)},Me=v({}),he=v(!1),Je=v(""),Ge=async()=>{he.value&&(he.value=!1)},Xe=()=>{var d;o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Je.value="",Me.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto,permintaan:(d=n.value[o.value].approve_void_by)==null?void 0:d.username,alasan:n.value[o.value].approve_void_reason},he.value=!0)},Ze=async()=>{b().loading_full=!0;const d=new FormData;d.append("id",n.value[o.value].id),d.append("_method","DELETE");const{data:a,error:D,status:G}=await Y("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:d,retry:0});if(b().loading_full=!1,G.value==="error"){R().trigger(D);return}let p={...n.value[o.value]};p.deleted=a.value.deleted,p.deleted_user=a.value.deleted_user,p.deleted_at=a.value.deleted_at,p.deleted_by=a.value.deleted_by,p.deleted_reason=a.value.deleted_reason,p.class_h=s(p),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...p}),o.value=-1,he.value=!1};re(()=>pe.value,d=>{d.trim().length>0?Ae.value=!0:Ae.value=!1},{immediate:!1});const Qe=async()=>{b().loading_full=!0;const d=new FormData;d.append("id",n.value[o.value].id),d.append("req_deleted_reason",pe.value),d.append("_method","DELETE");const{data:a,error:D,status:G}=await Y("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:d,retry:0});if(b().loading_full=!1,G.value==="error"){R().trigger(D);return}let p={...n.value[o.value]};p.req_deleted=a.value.req_deleted,p.req_deleted_user=a.value.req_deleted_user,p.req_deleted_by=a.value.req_deleted_by,p.req_deleted_at=a.value.req_deleted_at,p.req_deleted_reason=a.value.req_deleted_reason,p.class_h=s(p),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...p}),o.value=-1,xe.value=!1},{printHtml:We}=yt(),et=async()=>{if(o.value==-1){_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}b().loading_full=!0;const{data:d,error:a,status:D}=await Y("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},params:{id:n.value[o.value].id},retry:0});if(b().loading_full=!1,D.value==="error"){R().trigger(a);return}We(d.value.html,318)},tt=async()=>{b().loading_full=!0;const d=new FormData;d.append("online_status",V.value);const{data:a,error:D,status:G}=await Y("/standby_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:d,retry:0});if(b().loading_full=!1,G.value==="error"){R().trigger(D);return}a.value.forEach(p=>{let te=n.value.map(S=>S.id).indexOf(p.id);if(te!==-1){let S=n.value[te];S.pvr_id=p.pvr_id,S.pvr_no=p.pvr_no,S.pvr_total=p.pvr_total,S.pvr_had_detail=p.pvr_had_detail,S.updated_at=p.updated_at,n.value.splice(te,1,{...S})}}),_({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},lt=async()=>{b().loading_full=!0;const d=new FormData;d.append("online_status",V.value);const{data:a,error:D,status:G}=await Y("/standby_trx_do_update_pv",{method:"post",headers:{Authorization:`Bearer ${E.value}`,Accept:"application/json"},body:d,retry:0});if(b().loading_full=!1,G.value==="error"){R().trigger(D);return}a.value.data.forEach(p=>{let te=n.value.map(S=>S.id).indexOf(p.id);if(te!==-1){let S=n.value[te];S.pv_id=p.pv_id,S.pv_no=p.pv_no,S.pv_total=p.pv_total,S.pv_datetime=p.pv_datetime,S.updated_at=p.updated_at,n.value.splice(te,1,{...S})}}),_({show:!0,status:"Success",message:"Update PV Done"})},Oe=v([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"standby_mst_name",label:"Nama Standby",filter_on:1,type:"string"},{key:"standby_mst_type",label:"Tipe Standby",filter_on:1,type:"string"},{key:"standby_mst_amount",label:"Total Standby",class:" justify-end",filter_on:1,type:"number"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"ref",label:"Ref"},{key:"transition_target",label:"Tujuan Pengalihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),at=K(()=>["trx_not_done","all"].indexOf(P.value)>-1&&g(["PabrikTransport"])),st=K(()=>g(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(w.value.deleted)>-1&&[void 0,0].indexOf(w.value.req_deleted)>-1&&[void 0,0].indexOf(w.value.val)>-1&&[void 0,""].indexOf(w.value.pvr_id)>-1),ot=K(()=>o.value>-1&&[void 0,0].indexOf(w.value.deleted)>-1&&[void 0,0].indexOf(w.value.req_deleted)>-1&&(g(["PabrikTransport"])&&[void 0,0].indexOf(w.value.val)>-1||g(["PabrikMandor"])&&[void 0,0].indexOf(w.value.val1)>-1||g(["Logistic"])&&[void 0,0].indexOf(w.value.val2)>-1)&&[void 0,""].indexOf(w.value.pvr_id)>-1),nt=K(()=>g(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(w.value.deleted)>-1&&[void 0,0].indexOf(w.value.req_deleted)>-1&&[void 0,""].indexOf(w.value.pvr_id)>-1),dt=K(()=>g(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(w.value.deleted)>-1&&[void 0,0].indexOf(w.value.req_deleted)>-1&&w.value.pvr_id!=""),it=K(()=>g(["Logistic"])&&o.value>-1&&w.value.deleted==0&&w.value.req_deleted==1&&w.value.val2==0),rt=K(()=>g(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(w.value.deleted)>-1&&[void 0,0].indexOf(w.value.req_deleted)>-1&&w.value.val==1);return(d,a)=>{const D=ft,G=Ne,p=mt,te=bt,S=xt,Fe=ht,_t=wt,ut=gt,ge=kt,ke=$t,ct=Dt,Ce=At,pt=Za,vt=Bo;return c(),m("div",Ro,[$(D,{title:"List Transaction"}),e("div",Yo,[e("div",Eo,[e("div",Io,[e("div",zo,[j(e("select",{class:"","onUpdate:modelValue":a[0]||(a[0]=f=>Te(P)?P.value=f:null)},Ho,512),[[Se,t(P)]])]),t(at)?(c(),m("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=f=>u())},[$(G)])):T("",!0),t(st)?(c(),m("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=f=>O())},[$(p)])):T("",!0),t(o)>-1?(c(),m("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=f=>Q())},[$(te)])):T("",!0),t(nt)?(c(),m("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[4]||(a[4]=f=>ie())},[$(S)])):T("",!0),t(dt)?(c(),m("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[5]||(a[5]=f=>Le())},[$(Fe)])):T("",!0),t(it)?(c(),m("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[6]||(a[6]=f=>Xe())},[$(Fe)])):T("",!0),t(ot)?(c(),m("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[7]||(a[7]=f=>me())},[$(_t)])):T("",!0),t(rt)?(c(),m("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[8]||(a[8]=f=>et())},[$(ut)])):T("",!0)]),g(["PabrikTransport"])?(c(),m("div",Lo,[e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:a[9]||(a[9]=f=>tt())}," Gen/Update PVR "),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:a[10]||(a[10]=f=>lt())}," Update PV "),e("div",{class:"m-1 card-border cursor-pointer",onClick:a[11]||(a[11]=f=>V.value=!t(V))},[Jo,H(" : "),e("span",{class:jt(["font-bold",t(V)?"text-green-600":"text-red-600"])},i(t(V)?"ONLINE":"OFFLINE"),3)])])):T("",!0)]),$(ct,{thead:t(Oe),selected:t(o),onSetSelected:a[12]||(a[12]=f=>o.value=f),tbody:t(n),fnCallData:we,scrolling:t(z),onSetScrollingPage:a[13]||(a[13]=f=>t(z).page=f),onDoFilter:a[14]||(a[14]=f=>ye())},{val:B(({item:f})=>[f.val?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),val1:B(({item:f})=>[f.val1?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),val2:B(({item:f})=>[f.val2?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),standby_mst_name:B(({item:f})=>{var U;return[H(i((U=f.standby_mst_)==null?void 0:U.name),1)]}),standby_mst_type:B(({item:f})=>{var U;return[H(i((U=f.standby_mst_)==null?void 0:U.tipe),1)]}),standby_mst_amount:B(({item:f})=>{var U;return[H(" Rp. "+i(t(_e)(((U=f.standby_mst_)==null?void 0:U.amount)||0)),1)]}),pvr_had_detail:B(({item:f})=>[f.pvr_had_detail?(c(),oe(ke,{key:1})):(c(),oe(ge,{key:0}))]),deleted_by_username:B(({item:f})=>{var U;return[H(i((U=f.deleted_by)==null?void 0:U.username),1)]}),req_deleted_by_username:B(({item:f})=>{var U;return[H(i((U=f.req_deleted_by)==null?void 0:U.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),$(Ce,{type:"delete",show:t(se),data:t(be),fnClose:ce,fnConfirm:Ke,enabledOk:t(ae)},{footer:B(()=>[H(" Masukkan Alasan Penghapusan: "),e("div",Go,[j(e("textarea",{"onUpdate:modelValue":a[15]||(a[15]=f=>Te(r)?r.value=f:null)},null,512),[[X,t(r)]])])]),_:1},8,["show","data","enabledOk"]),$(Ce,{type:"custome",show:t(xe),data:t(je),fnClose:He,fnConfirm:Qe,enabledOk:t(Ae)},{words:B(()=>[H(" Data akan diproses dan "),Xo,H(", yakin untuk melanjutkan ? ")]),footer:B(()=>[H(" Masukkan Alasan Permintaan Penghapusan: "),e("div",Zo,[j(e("textarea",{"onUpdate:modelValue":a[16]||(a[16]=f=>Te(pe)?pe.value=f:null)},null,512),[[X,t(pe)]])])]),_:1},8,["show","data","enabledOk"]),$(Ce,{type:"custome",show:t(he),data:t(Me),fnClose:Ge,fnConfirm:Ze},{words:B(()=>[H(" Data akan diproses dan "),Qo,H(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),$(pt,{show:t(ue),fnClose:()=>{ue.value=!1},fnLoadDBData:I,id:t(fe),p_data:t(n),list_cost_center:t(J),online_status:t(V)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),$(vt,{show:t(F),fnClose:()=>{F.value=!1},id:t(N),p_data:t(n),is_view:t(de)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{wn as default};
