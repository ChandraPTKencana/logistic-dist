import{r as u,f as w,W as _,o as x,c as h,a as s,d as g,m as y,v as k,k as N,n as T,l as B,A as c,B as C}from"./entry.9645ef05.js";import{u as I}from"./useMyFetch.787bc913.js";const A={key:0,class:"flex items-center justify-center absolute top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},S={class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},V={class:"w-full"},j={class:"flex w-full justify-between mt-5"},z={__name:"GAPIN",props:{show:{type:Number,required:!0}},emits:["setTimeout"],setup(d,{emit:r}){const i=u({}),f=w("token"),l=u(""),a=u(0),m=async()=>{c().loading_full=!0,i.value={};const n=new FormData;n.append("pin",l.value);let t="post";const{data:o,error:v,status:b}=await I("/ga_pin",{method:t,headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},body:n,retry:0});if(c().loading_full=!1,b.value==="error"){C().trigger(v,i);return}r("setTimeout",o.value),a.value=o.value,l.value="",p()};let e=null;const p=()=>{e==null&&(e=setInterval(()=>{a.value--,a.value<=0&&(clearInterval(e),e=null,r("setTimeout",0))},1e3))};return _(()=>{clearInterval(e),e=null,r("setTimeout",0)}),(n,t)=>d.show==0?(x(),h("div",A,[s("div",S,[s("div",V,[g(" Enter PIN "),y(s("input",{type:"text",class:"w-full","onUpdate:modelValue":t[0]||(t[0]=o=>T(l)?l.value=o:null)},null,512),[[k,N(l)]])]),s("div",j,[s("button",{onClick:t[1]||(t[1]=o=>m()),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Submit ")])])])):B("",!0)}};export{z as default};
