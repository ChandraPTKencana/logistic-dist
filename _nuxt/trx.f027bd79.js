import{_ as ht}from"./Header.056aa9c8.js";import{_ as Re}from"./Plus.87681946.js";import{_ as yt}from"./Edit.7c310b7c.js";import{_ as gt}from"./Eyes.ad0b64cf.js";import{_ as $t}from"./Delete.d06706bb.js";import{_ as kt}from"./Void.e8833e63.js";import{_ as Dt}from"./Signature.9b55d388.js";import{u as Ct,_ as At}from"./useDownload.a273843f.js";import{_ as Ye}from"./client-only.dd2d3776.js";import{_ as Tt}from"./Search.3b0a4144.js";import{_ as Pt,a as St}from"./Check.eb27de27.js";import{_ as Vt}from"./TableView.72dd7b92.js";import{_ as qt}from"./PopupMini.vue.8dd3ef95.js";import{_ as Ie}from"./HeaderPopup.vue.b690d35d.js";import{_ as Mt,a as Ot}from"./ToolsPopup.271d5242.js";import{r as f,f as Ce,H as Se,J as H,g as _e,L as Ee,o as p,c as m,h as V,v as ze,a as e,b as y,k as t,l as he,t as d,j as L,F as Z,n as de,G as T,w as O,m as Ve,x as b,y as R,p as He,e as Ke,M as Le,s as qe,D as jt,I as Bt,i as De,d as K,q as Ft,E as Nt,K as ne}from"./entry.f4775642.js";import{u as Me}from"./useUtils.ef7aae55.js";import{u as Y}from"./useMyFetch.54f8421a.js";import{_ as Ge}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.147f076f.js";const w=A=>(He("data-v-09051475"),A=A(),Ke(),A),Ut={class:"box-fixed"},Rt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Yt={class:"w-full flex flex-col items-center grow overflow-auto"},It={class:"w-full flex flex-row flex-wrap"},Et={class:"w-full sm:w-3/12 flex px-2 py-3"},zt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ht=w(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),Kt={class:"w-6/12 flex flex-col flex-wrap p-1"},Lt=w(()=>e("label",{for:""},"Tujuan",-1)),Gt=Le('<option value="" data-v-09051475></option><option value="KPN" data-v-09051475>KPN</option><option value="KAS" data-v-09051475>KAS</option><option value="KUS" data-v-09051475>KUS</option><option value="ARP" data-v-09051475>ARP</option><option value="KAP" data-v-09051475>KAP</option><option value="SMP" data-v-09051475>SMP</option>',7),Jt=[Gt],Xt={class:"text-red-500"},Zt={class:"w-6/12 flex flex-col flex-wrap p-1"},Qt=w(()=>e("label",{for:""},"Tipe",-1)),Wt=["disabled"],el=w(()=>e("option",{value:""},null,-1)),tl=w(()=>e("option",{value:"From"},"Dari",-1)),ll=w(()=>e("option",{value:"To"},"Ke",-1)),al=[el,tl,ll],sl={class:"text-red-500"},ol={class:"w-full sm:w-9/12 flex px-2 py-3"},nl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},dl=w(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),il={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},rl=w(()=>e("label",{for:""},"ID",-1)),_l=["disabled"],ul={id:"standby_mst"},cl=["value"],pl={class:"text-red-500"},vl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},fl=w(()=>e("label",{for:""},"Name",-1)),ml={class:"card-border disabled"},xl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},wl=w(()=>e("label",{for:""},"Type",-1)),bl={class:"card-border disabled"},hl={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},yl=w(()=>e("label",{for:""},"Amount",-1)),gl={class:"card-border disabled"},$l={class:"w-full flex flex-wrap"},kl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dl=w(()=>e("label",{for:""},"Supir",-1)),Cl=["disabled"],Al={id:"supir"},Tl=["value"],Pl={class:"text-red-500"},Sl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Vl=w(()=>e("label",{for:""},"Kernet",-1)),ql=["disabled"],Ml={id:"kernet"},Ol=["value"],jl={class:"text-red-500"},Bl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Fl=w(()=>e("label",{for:""},"No Pol",-1)),Nl=["disabled"],Ul={id:"vehicle"},Rl=["value"],Yl={class:"text-red-500"},Il={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},El=w(()=>e("label",{for:""},"Tujuan",-1)),zl=["disabled"],Hl={id:"xto"},Kl={class:"text-red-500"},Ll={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Gl=w(()=>e("label",{for:""},"Note For Remarks",-1)),Jl=["disabled"],Xl={class:"text-red-500"},Zl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ql=w(()=>e("label",{for:""},"Referensi",-1)),Wl=["disabled"],ea={class:"text-red-500"},ta={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},la={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},aa=w(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),sa={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},oa=w(()=>e("label",{for:""}," Code",-1)),na=["disabled"],da={id:"cost_center"},ia=["value"],ra={class:"text-red-500"},_a={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ua=w(()=>e("label",{for:""},"Desc",-1)),ca={class:"card-border disabled"},pa={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},va={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},fa=w(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),ma={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},xa=w(()=>e("label",{for:""},"No",-1)),wa={class:"card-border disabled"},ba={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ha=w(()=>e("label",{for:""},"Total",-1)),ya={class:"card-border disabled"},ga={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},$a={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ka=w(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),Da={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ca=w(()=>e("label",{for:""},"No",-1)),Aa={class:"card-border disabled"},Ta={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Pa=w(()=>e("label",{for:""},"Total",-1)),Sa={class:"card-border disabled"},Va={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},qa={class:"w-full",role:"sticky"},Ma={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Oa={class:"sticky -top-1 !z-[2]"},ja=["colspan"],Ba={class:"sticky top-7 !z-[2]"},Fa={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},Na=w(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),Ua=w(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),Ra=w(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan",-1)),Ya={ref:"to_move"},Ia=["data-index"],Ea={key:0,class:"tools cell"},za={class:"w-full h-full flex items-center justify-center"},Ha=["onClick"],Ka={class:"cell"},La={class:"w-full h-full flex items-center justify-center relative"},Ga={class:"cell"},Ja={class:"w-full h-full flex items-center justify-center"},Xa=["disabled","onUpdate:modelValue"],Za={key:0},Qa={class:"tools cell"},Wa={class:"w-full flex items-center justify-end"},es={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(A){const g=A,{$moment:ee}=qe(),{pointFormat:G}=Me(),ue={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[]},s=f([]),te=f({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});let P={...ue};const l=f({...ue}),Q=Ce("token"),D=f({});Se();const I=async()=>{b().loading_full=!0,D.value={};const u=new FormData;u.append("transition_target",l.value.transition_target),u.append("transition_type",l.value.transition_type),u.append("standby_mst_id",l.value.standby_mst_id),u.append("supir",l.value.supir),u.append("kernet",l.value.kernet),u.append("no_pol",l.value.no_pol),u.append("xto",l.value.xto),u.append("note_for_remarks",l.value.note_for_remarks),u.append("ref",l.value.ref),u.append("cost_center_code",l.value.cost_center_code),u.append("online_status",g.online_status);let _=[...s.value];_=_.map(W=>(W.tanggal=ee(W.tanggal).format("Y-MM-DD"),W)),u.append("details",JSON.stringify(_));let B="post",F=g.id;F==0||(u.append("id",F),u.append("_method","PUT"));const{data:N,error:ie,status:me}=await Y("/standby_trx",{method:B,headers:{Authorization:`Bearer ${Q.value}`,Accept:"application/json"},body:u,retry:0});if(b().loading_full=!1,me.value==="error"){R().trigger(ie,D);return}if(l.value.updated_at=N.value.updated_at,g.id<=0)l.value.id=N.value.id,l.value.created_at=N.value.created_at,g.p_data.unshift(l.value);else{let W=g.p_data.map(se=>se.id).indexOf(g.id);W>=-1&&g.p_data.splice(W,1,{...l.value})}g.fnClose()},q=H(()=>[...new Set(x.value.filter(u=>u.role=="Supir"))]),$=H(()=>[...new Set(x.value.filter(u=>u.role=="Kernet"))]),j=H(()=>!1),n=async()=>{b().loading_full=!0;const{data:u,error:_,status:B}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${Q.value}`,Accept:"application/json"},params:{id:g.id},retry:0});if(b().loading_full=!1,B.value==="error"){R().trigger(_);return}l.value=u.value.data,P={...u.value.data};let F="Edit";s.value=u.value.data.details.map(N=>(N.p_status=F,N.key=N.ordinal,N))},J=f([]),M=f([]),E=f([]),x=f([]),le=async()=>{b().loading_full=!0;const{data:u,error:_,status:B}=await Y("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${Q.value}`,Accept:"application/json"},retry:0});if(b().loading_full=!1,B.value==="error"){R().trigger(_);return}J.value=u.value.list_standby_mst,M.value=u.value.list_xto,E.value=u.value.list_vehicle,x.value=u.value.list_employee},o=f(-1),h=f(!1),z=f({left:0,top:0}),Ae=(u,_)=>{o.value=_,h.value=!0,z.value={left:u.clientX,top:u.clientY}},ye=()=>{s.value.push({...te.value,p_status:"Add"})},ge=()=>{h.value=!1},ce=(u="")=>{if(u=="insert")s.value.splice(o.value,0,{...te.value,p_status:"Add"});else if(u=="delete")s.value[o.value].p_status=="Edit"?s.value[o.value].p_status="Remove":s.value.splice(o.value,1);else if(u=="move_top"){let _=s.value[o.value];s.value.splice(o.value,1),s.value.splice(o.value-1,0,{..._})}else if(u=="move_bottom"){let _=s.value[o.value];s.value.splice(o.value,1),s.value.splice(o.value+1,0,{..._})}h.value=!1};_e(()=>g.show,async(u,_)=>{u==!0&&(await le(),await g.fnLoadDBData(),D.value={},l.value={...ue},s.value=[],g.id!=0&&n())},{immediate:!0});let fe={name:"",tipe:"",amount:0};return _e(()=>l.value.standby_mst_id,(u,_)=>{if(u==""||u!=""){let B=J.value.filter(F=>F.id==u);B.length>0?l.value.standby_mst_={...B[0]}:l.value.standby_mst_id==P.standby_mst_id?l.value.standby_mst_={...P.standby_mst_}:l.value.standby_mst_={...fe}}},{}),_e(()=>l.value.cost_center_code,(u,_)=>{if(u==""&&(l.value.cost_center_desc=""),u){let B=g.list_cost_center.filter(F=>F.CostCenter==u);B.length>0?l.value.cost_center_desc=B[0].Description:l.value.cost_center_code==P.cost_center_code&&(l.value.cost_center_desc=P.cost_center_desc)}},{deep:!0,immediate:!0}),(u,_)=>{var se,xe,oe;const B=Ie,F=Mt,N=Ee("vue-date-picker"),ie=Ye,me=Re,W=Ot;return p(),m(Z,null,[V(e("section",Ut,[e("div",null,[y(B,{title:"Form Transaction",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Rt,[e("div",Yt,[e("div",It,[e("div",Et,[e("div",zt,[Ht,e("div",Kt,[Lt,V(e("select",{"onUpdate:modelValue":_[0]||(_[0]=r=>t(l).transition_target=r)},Jt,512),[[he,t(l).transition_target]]),e("p",Xt,d(t(D).transition_target),1)]),e("div",Zt,[Qt,V(e("select",{"onUpdate:modelValue":_[1]||(_[1]=r=>t(l).transition_type=r),disabled:t(l).pvr_no!=""},al,8,Wt),[[he,t(l).transition_type]]),e("p",sl,d(t(D).transition_type),1)])])]),e("div",ol,[e("div",nl,[dl,e("div",il,[rl,V(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":_[2]||(_[2]=r=>t(l).standby_mst_id=r),disabled:t(l).pvr_no!=""},null,8,_l),[[L,t(l).standby_mst_id]]),e("datalist",ul,[(p(!0),m(Z,null,de(t(J),r=>(p(),m("option",{value:r.id},d(r.name+"-"+r.tipe+"-"+t(G)(r.amount||0)),9,cl))),256))]),e("p",pl,d(t(D).standby_mst_id),1)]),e("div",vl,[fl,e("div",ml,d((se=t(l).standby_mst_)==null?void 0:se.name),1)]),e("div",xl,[wl,e("div",bl,d((xe=t(l).standby_mst_)==null?void 0:xe.tipe),1)]),e("div",hl,[yl,e("div",gl,d(t(G)((oe=t(l).standby_mst_)==null?void 0:oe.amount)),1)])])]),e("div",$l,[e("div",kl,[Dl,V(e("input",{type:"text",list:"supir","onUpdate:modelValue":_[3]||(_[3]=r=>t(l).supir=r),disabled:t(l).pvr_no!=""},null,8,Cl),[[L,t(l).supir]]),e("datalist",Al,[(p(!0),m(Z,null,de(t(q),r=>(p(),m("option",{value:r.name},d(r.name),9,Tl))),256))]),e("p",Pl,d(t(D).supir),1)]),e("div",Sl,[Vl,V(e("input",{type:"text",list:"kernet","onUpdate:modelValue":_[4]||(_[4]=r=>t(l).kernet=r),disabled:t(l).pvr_no!=""},null,8,ql),[[L,t(l).kernet]]),e("datalist",Ml,[(p(!0),m(Z,null,de(t($),r=>(p(),m("option",{value:r.name},d(r.name),9,Ol))),256))]),e("p",jl,d(t(D).kernet),1)]),e("div",Bl,[Fl,V(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":_[5]||(_[5]=r=>t(l).no_pol=r),disabled:t(l).pvr_no!=""},null,8,Nl),[[L,t(l).no_pol]]),e("datalist",Ul,[(p(!0),m(Z,null,de(t(E),r=>(p(),m("option",{value:r.no_pol},d(r.no_pol),9,Rl))),256))]),e("p",Yl,d(t(D).no_pol),1)]),e("div",Il,[El,V(e("input",{type:"text",list:"xto","onUpdate:modelValue":_[6]||(_[6]=r=>t(l).xto=r),disabled:t(l).pvr_no!=""},null,8,zl),[[L,t(l).xto]]),e("datalist",Hl,[(p(!0),m(Z,null,de(t(M),r=>(p(),m("option",null,d(r),1))),256))]),e("p",Kl,d(t(D).xto),1)]),e("div",Ll,[Gl,V(e("textarea",{"onUpdate:modelValue":_[7]||(_[7]=r=>t(l).note_for_remarks=r),disabled:t(l).pvr_no!=""}," ",8,Jl),[[L,t(l).note_for_remarks]]),e("p",Xl,d(t(D).note_for_remarks),1)]),e("div",Zl,[Ql,V(e("input",{type:"text","onUpdate:modelValue":_[8]||(_[8]=r=>t(l).ref=r),disabled:t(l).pvr_no!=""},null,8,Wl),[[L,t(l).ref]]),e("p",ea,d(t(D).ref),1)])]),e("div",ta,[e("div",la,[aa,e("div",sa,[oa,V(e("input",{list:"cost_center","onUpdate:modelValue":_[9]||(_[9]=r=>t(l).cost_center_code=r),disabled:t(l).pvr_no!=""},null,8,na),[[L,t(l).cost_center_code]]),e("datalist",da,[(p(!0),m(Z,null,de(A.list_cost_center,r=>(p(),m("option",{value:r.CostCenter},d(r.CostCenter+"-"+r.Description),9,ia))),256))]),e("p",ra,d(t(D).cost_center_code),1)]),e("div",_a,[ua,e("div",ca,d(t(l).cost_center_desc),1)])])]),e("div",pa,[e("div",va,[fa,e("div",ma,[xa,e("div",wa,d(t(l).pvr_no),1)]),e("div",ba,[ha,e("div",ya,d(t(G)(t(l).pvr_total||0)),1)])])]),e("div",ga,[e("div",$a,[ka,e("div",Da,[Ca,e("div",Aa,d(t(l).pv_no),1)]),e("div",Ta,[Pa,e("div",Sa,d(t(G)(t(l).pv_total)),1)])])]),e("div",Va,[e("div",qa,[e("table",Ma,[e("thead",null,[e("tr",Oa,[e("td",{colspan:t(j)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,ja)]),e("tr",Ba,[t(j)?T("",!0):(p(),m("th",Fa)),Na,Ua,Ra])]),e("tbody",Ya,[(p(!0),m(Z,null,de(t(s),(r,pe)=>(p(),m(Z,{key:pe},[r.p_status!="Remove"?(p(),m("tr",{key:0,"data-index":pe},[t(j)?T("",!0):(p(),m("td",Ea,[e("div",za,[e("button",{type:"button",name:"button",onClick:re=>Ae(re,pe)},[y(F)],8,Ha)])])),e("td",null,d(pe+1)+".",1),e("td",Ka,[e("div",La,[y(ie,null,{default:O(()=>[y(N,{modelValue:r.tanggal,"onUpdate:modelValue":re=>r.tanggal=re,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),e("td",Ga,[e("div",Ja,[V(e("textarea",{disabled:t(j),class:"p-1 w-full","onUpdate:modelValue":re=>r.note=re,cols:"7",rows:"2"},null,8,Xa),[[L,r.note]])])])],8,Ia)):T("",!0)],64))),128)),t(j)?T("",!0):(p(),m("tr",Za,[e("td",Qa,[e("button",{type:"button",name:"button",onClick:_[10]||(_[10]=r=>ye())},[y(me)])])]))],512)])])])])]),e("div",Wa,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:_[11]||(_[11]=r=>A.fnClose())}," Cancel "),t(j)?T("",!0):(p(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:_[12]||(_[12]=Ve(r=>I(),["prevent"]))}," Save "))])])])],512),[[ze,A.show]]),y(W,{show:t(h),coor:t(z),fn:ge,data:t(s),data_index:t(o),onReplyAct:_[13]||(_[13]=r=>ce(r))},null,8,["show","coor","data","data_index"])],64)}}},ts=Ge(es,[["__scopeId","data-v-09051475"]]);const k=A=>(He("data-v-056c1dac"),A=A(),Ke(),A),ls={class:"box-fixed"},as={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ss={class:"w-full flex flex-col items-center grow overflow-auto"},os={class:"w-full flex flex-row flex-wrap"},ns={class:"w-full sm:w-3/12 flex px-2 py-3"},ds={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},is=k(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),rs={class:"w-6/12 flex flex-col flex-wrap p-1"},_s=k(()=>e("label",{for:""},"Tujuan",-1)),us={class:"card-border"},cs={class:"w-6/12 flex flex-col flex-wrap p-1"},ps=k(()=>e("label",{for:""},"Tipe",-1)),vs={class:"card-border"},fs={class:"w-full sm:w-9/12 flex px-2 py-3"},ms={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},xs=k(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),ws={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},bs=k(()=>e("label",{for:""},"ID",-1)),hs={class:"card-border"},ys={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},gs=k(()=>e("label",{for:""},"Name",-1)),$s={class:"card-border"},ks={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ds=k(()=>e("label",{for:""},"Type",-1)),Cs={class:"card-border"},As={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},Ts=k(()=>e("label",{for:""},"Amount",-1)),Ps={class:"card-border"},Ss={class:"w-full flex flex-wrap"},Vs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},qs=k(()=>e("label",{for:""},"Supir",-1)),Ms={class:"card-border"},Os={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},js=k(()=>e("label",{for:""},"Kernet",-1)),Bs={class:"card-border"},Fs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ns=k(()=>e("label",{for:""},"No Pol",-1)),Us={class:"card-border"},Rs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ys=k(()=>e("label",{for:""},"Tujuan",-1)),Is={class:"card-border"},Es={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},zs=k(()=>e("label",{for:""},"Note For Remarks",-1)),Hs={class:"card-border"},Ks={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ls=k(()=>e("label",{for:""},"Referensi",-1)),Gs={class:"card-border"},Js={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Xs={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Zs=k(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Qs={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ws=k(()=>e("label",{for:""}," Code",-1)),eo={class:"card-border"},to={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},lo=k(()=>e("label",{for:""},"Desc",-1)),ao={class:"card-border disabled"},so={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},oo={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},no=k(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),io={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ro=k(()=>e("label",{for:""},"No",-1)),_o={class:"card-border disabled"},uo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},co=k(()=>e("label",{for:""},"Total",-1)),po={class:"card-border disabled"},vo={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},fo={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},mo=k(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),xo={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},wo=k(()=>e("label",{for:""},"No",-1)),bo={class:"card-border disabled"},ho={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},yo=k(()=>e("label",{for:""},"Total",-1)),go={class:"card-border disabled"},$o={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},ko={class:"w-full",role:"sticky"},Do={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Co={class:"sticky -top-1 !z-[2]"},Ao=["colspan"],To=k(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),Po={ref:"to_move"},So=["data-index"],Vo={class:"cell"},qo={class:"w-full h-full flex items-center justify-center relative"},Mo={class:"cell"},Oo={class:"w-full h-full flex items-center justify-center"},jo={class:"w-full flex items-center justify-end"},Bo={class:"w-full flex flex-wrap p-3 items-center"},Fo=k(()=>e("div",null," Di Validasi oleh : ",-1)),No={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Uo={key:0},Ro={key:1},Yo={key:2},Io={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(A){const g=A,{$moment:ee}=qe(),{pointFormat:G}=Me(),s=f({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),te=Ce("token"),P=f({}),l=f([]),Q=async()=>{b().loading_full=!0,P.value={};const q=new FormData;let $="post",j=g.id;j==0||(q.append("id",j),q.append("_method","PUT"));const{data:n,error:J,status:M}=await Y("/standby_trx_validasi",{method:$,headers:{Authorization:`Bearer ${te.value}`,Accept:"application/json"},body:q,retry:0});if(b().loading_full=!1,M.value==="error"){R().trigger(J,P);return}s.value.val=n.value.val,s.value.val_user=n.value.val_user,s.value.val_by=n.value.val_by,s.value.val_at=n.value.val_at,s.value.val1=n.value.val1,s.value.val1_user=n.value.val1_user,s.value.val1_by=n.value.val1_by,s.value.val1_at=n.value.val1_at,s.value.val2=n.value.val2,s.value.val2_user=n.value.val2_user,s.value.val2_by=n.value.val2_by,s.value.val2_at=n.value.val2_at;let E=g.p_data.map(x=>x.id).indexOf(g.id);E>=-1&&g.p_data.splice(E,1,{...s.value}),g.fnClose()},D=async()=>{b().loading_full=!0;const{data:q,error:$,status:j}=await Y("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${te.value}`,Accept:"application/json"},params:{id:g.id},retry:0});if(b().loading_full=!1,j.value==="error"){R().trigger($);return}s.value=q.value.data,l.value=q.value.data.details};H(()=>{let q=0;return l.value.forEach($=>{$.p_status!="Remove"&&(q+=$.amount)}),q});const I=H(()=>!1);return _e(()=>g.show,(q,$)=>{q==!0&&D()},{immediate:!0}),(q,$)=>{var n,J,M;const j=Ie;return V((p(),m("section",ls,[e("div",null,[y(j,{title:"Form Transaction Standby Validation",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",as,[e("div",ss,[e("div",os,[e("div",ns,[e("div",ds,[is,e("div",rs,[_s,e("div",us,d(t(s).transition_target),1)]),e("div",cs,[ps,e("div",vs,d(t(s).transition_type),1)])])]),e("div",fs,[e("div",ms,[xs,e("div",ws,[bs,e("div",hs,d(t(s).standby_mst_id),1)]),e("div",ys,[gs,e("div",$s,d((n=t(s).standby_mst_)==null?void 0:n.name),1)]),e("div",ks,[Ds,e("div",Cs,d((J=t(s).standby_mst_)==null?void 0:J.tipe),1)]),e("div",As,[Ts,e("div",Ps,d(t(G)((M=t(s).standby_mst_)==null?void 0:M.amount)),1)])])]),e("div",Ss,[e("div",Vs,[qs,e("div",Ms,d(t(s).supir),1)]),e("div",Os,[js,e("div",Bs,d(t(s).kernet),1)]),e("div",Fs,[Ns,e("div",Us,d(t(s).no_pol),1)]),e("div",Rs,[Ys,e("div",Is,d(t(s).xto),1)]),e("div",Es,[zs,e("div",Hs,d(t(s).note_for_remarks),1)]),e("div",Ks,[Ls,e("div",Gs,d(t(s).ref),1)])]),e("div",Js,[e("div",Xs,[Zs,e("div",Qs,[Ws,e("div",eo,d(t(s).cost_center_code),1)]),e("div",to,[lo,e("div",ao,d(t(s).cost_center_desc),1)])])]),e("div",so,[e("div",oo,[no,e("div",io,[ro,e("div",_o,d(t(s).pvr_no),1)]),e("div",uo,[co,e("div",po,d(t(G)(t(s).pvr_total||0)),1)])])]),e("div",vo,[e("div",fo,[mo,e("div",xo,[wo,e("div",bo,d(t(s).pv_no),1)]),e("div",ho,[yo,e("div",go,d(t(G)(t(s).pv_total)),1)])])]),e("div",$o,[e("div",ko,[e("table",Do,[e("thead",null,[e("tr",Co,[e("td",{colspan:t(I)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,Ao)]),To]),e("tbody",Po,[(p(!0),m(Z,null,de(t(l),(E,x)=>(p(),m(Z,{key:x},[E.p_status!="Remove"?(p(),m("tr",{key:0,"data-index":x},[e("td",null,d(x+1)+".",1),e("td",Vo,[e("div",qo,d(t(ee)(E.tanggal).format("DD-MM-YYYY")),1)]),e("td",Mo,[e("div",Oo,d(E.note),1)])],8,So)):T("",!0)],64))),128))],512)])])])])]),e("div",jo,[e("div",Bo,[Fo,t(s).val||t(s).val1||t(s).val2?(p(),m("div",No,[t(s).val?(p(),m("div",Uo," App 1 : "+d(t(s).val_by.username)+" ( "+d(t(s).val_at?t(ee)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0),t(s).val1?(p(),m("div",Ro," App 2 : "+d(t(s).val1_by.username)+" ( "+d(t(s).val1_at?t(ee)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0),t(s).val2?(p(),m("div",Yo," App 2 : "+d(t(s).val2_by.username)+" ( "+d(t(s).val2_at?t(ee)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):T("",!0)])):T("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:$[0]||($[0]=E=>A.fnClose())}," Cancel "),A.is_view==0?(p(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:$[1]||($[1]=Ve(E=>Q(),["prevent"]))}," Validasi ")):T("",!0)])])])],512)),[[ze,A.show]])}}},Eo=Ge(Io,[["__scopeId","data-v-056c1dac"]]),zo={class:"w-full h-full flex flex-col"},Ho={class:"w-full flex grow flex-col overflow-auto h-0"},Ko={class:"w-full flex justify-between flex-wrap"},Lo={class:"grow flex"},Go={class:"m-1"},Jo=Le('<option value="trx_not_done">Undone</option><option value="trx_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Xo=[Jo],Zo={key:0,class:"flex"},Qo=e("span",{class:"text-xs"},"Mode",-1),Wo={action:"#",class:"w-full flex flex-wrap text-xs"},en={class:"w-6/12 p-1 sm:w-4/12 md:w-3/12 lg:w-2/12 flex flex-col"},tn=e("div",{class:"font-bold"}," Tgl Dari ",-1),ln={class:"text-red-500"},an={class:"w-6/12 p-1 sm:w-4/12 md:w-3/12 lg:w-2/12 flex flex-col"},sn=e("div",{class:"font-bold"}," Tgl Sampai ",-1),on={class:"text-red-500"},nn={class:"w-6/12 p-1 sm:w-4/12 md:w-2/12 lg:w-4/12 flex flex-col"},dn=e("div",{class:"font-bold"}," Keyword ",-1),rn={class:"w-6/12 p-1 sm:w-4/12 md:w-1/12 lg:w-2/12 flex flex-col"},_n=e("div",{class:"font-bold"}," Sort By ",-1),un=e("option",{value:""},null,-1),cn=e("option",{value:"id"},"ID",-1),pn=e("option",{value:"created_at"},"Tgl Dibuat",-1),vn=[un,cn,pn],fn={class:"w-6/12 p-1 sm:w-4/12 md:w-2/12 lg:w-1/12 flex flex-col"},mn=e("div",{class:"font-bold"}," Sort Order ",-1),xn=e("option",{value:"asc"},"Asc",-1),wn=e("option",{value:"desc"},"Desc",-1),bn=[xn,wn],hn={class:"w-2/12 md:w-1/12 lg:w-1/12 p-1 flex items-end"},yn={class:"grow mb-5"},gn=e("b",null,"tidak dapat dibatalkan lagi",-1),$n={class:"grow mb-5"},kn=e("b",null,"tidak dapat dibatalkan lagi",-1),Hn={__name:"trx",async setup(A){let g,ee;const{$moment:G}=qe(),{pointFormat:ue}=Me(),s=i=>i.deleted==1?"!bg-red-400":i.pvr_id>0&&i.req_deleted==1?"!bg-yellow-300":i.pv_id>0?"!bg-blue-300":"",te=i=>(i.map(a=>{a.class_h=s(a)}),i),P=f("trx_not_done");_e(()=>P.value,i=>{Be.value.map(a=>{let C=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(a.key)>-1;return["all","deleted","req_deleted"].indexOf(i)>-1?C&&(a.tbl_show=1):C&&(a.tbl_show=0),a}),ge()},{immediate:!1});const l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const Q=f({}),D=f({from:"",to:""}),I=Ce("token"),q=Ce("role"),$=i=>i.includes(q.value),{data:j}=([g,ee]=jt(async()=>Nt(async()=>{b().loading_full=!0;let i=[];const[a,C]=await Promise.all([Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{filter_status:P},retry:0})]);return a.status.value!=="error"&&(i=te(a.data.value.data)),a.status.value==="error"?(R().trigger(a.error),{standby_trxs:i}):(b().loading_full=!1,{standby_trxs:i})},"$rVBHTgwE0s")),g=await g,ee(),g),n=f(j.value.standby_trxs||[]),J=f([]),M=f(!1),E=async()=>{b().loading_full=!0;const{data:i,error:a,status:C}=await Y("/standby_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{online_status:M.value},retry:0});if(b().loading_full=!1,C.value==="error"){R().trigger(a);return}J.value=i.value.list_cost_center},x=f(""),le=f({field:"tanggal",by:"desc"}),o=f(-1),h=H(()=>n.value[o.value]),z=f({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),Ae=()=>{l.like="",x.value!=""&&(l.like=`id:%${x.value}%,transition_target:%${x.value}%,transition_type:%${x.value}%,standby_mst_name:%${x.value}%,standby_mst_type:%${x.value}%,supir:%${x.value}%,kernet:%${x.value}%,no_pol:%${x.value}%,xto:%${x.value}%,pvr_no:%${x.value}%,pv_no:%${x.value}%,pvr_id:%${x.value}%,pvr_no:%${x.value}%,tanggal:%${x.value}%,transition_to:%${x.value}%,cost_center_code:%${x.value}%`),l.sort="",le.value.field&&(l.sort=le.value.field+":"+le.value.by),l.date_from=D.value.from?G(D.value.from).format("YYYY-MM-DD"):"",l.date_to=D.value.to?G(D.value.to).format("YYYY-MM-DD"):""},ye=async()=>{b().loading_full=!0,Q.value={},z.value.may_get_data=!1,l.page=z.value.page,l.page==1&&(n.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(n.value[0])),l.filter_status=P.value;const{data:i,error:a,status:C}=await Y("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:l,retry:0});if(b().loading_full=!1,z.value.may_get_data=!0,C.value==="error"){R().trigger(a,Q);return}z.value.page==1?n.value=te(i.value.data):z.value.page>1&&(n.value=[...n.value,...te(i.value.data)]),i.value.data.length==0&&(z.value.is_last_record=!0)},ge=()=>{o.value=-1,z.value.page=1,z.value.is_last_record=!1,Ae(),ye()},ce=f(!1),fe=f(0),u=()=>{fe.value=0,ce.value=!0},{display:_}=Se();Bt(Se());const B=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(fe.value=n.value[o.value].id,ce.value=!0)},F=f(!1),N=f(0),ie=f(!1),me=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[o.value].id,F.value=!0,ie.value=!1)},W=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value=n.value[o.value].id,F.value=!0,ie.value=!0)},se=f(!1),xe=f({}),oe=f(!1),r=f(""),pe=async()=>{oe.value&&(oe.value=!1)},re=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(r.value="",xe.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto},oe.value=!0)};_e(()=>r.value,i=>{i.trim().length>0?se.value=!0:se.value=!1},{immediate:!1});const Je=async()=>{b().loading_full=!0;const i=new FormData;i.append("id",n.value[o.value].id),i.append("deleted_reason",r.value),i.append("_method","DELETE");const{data:a,error:C,status:X}=await Y("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:i,retry:0});if(b().loading_full=!1,X.value==="error"){R().trigger(C);return}let v={...n.value[o.value]};v.deleted=a.value.deleted,v.deleted_user=a.value.deleted_user,v.deleted_at=a.value.deleted_at,v.deleted_by=a.value.deleted_by,v.deleted_reason=a.value.deleted_reason,v.class_h=s(v),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...v}),o.value=-1,oe.value=!1},Te=f(!1),Oe=f({}),we=f(!1),ve=f(""),Xe=async()=>{we.value&&(we.value=!1)},Ze=()=>{o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ve.value="",Oe.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto},we.value=!0)},je=f({}),be=f(!1),Qe=f(""),We=async()=>{be.value&&(be.value=!1)},et=()=>{var i;o.value==-1?_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Qe.value="",je.value={id:n.value[o.value].id,"no pol":n.value[o.value].no_pol,tujuan:n.value[o.value].xto,permintaan:(i=n.value[o.value].approve_void_by)==null?void 0:i.username,alasan:n.value[o.value].approve_void_reason},be.value=!0)},tt=async()=>{b().loading_full=!0;const i=new FormData;i.append("id",n.value[o.value].id),i.append("_method","DELETE");const{data:a,error:C,status:X}=await Y("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:i,retry:0});if(b().loading_full=!1,X.value==="error"){R().trigger(C);return}let v={...n.value[o.value]};v.deleted=a.value.deleted,v.deleted_user=a.value.deleted_user,v.deleted_at=a.value.deleted_at,v.deleted_by=a.value.deleted_by,v.deleted_reason=a.value.deleted_reason,v.class_h=s(v),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...v}),o.value=-1,be.value=!1};_e(()=>ve.value,i=>{i.trim().length>0?Te.value=!0:Te.value=!1},{immediate:!1});const lt=async()=>{b().loading_full=!0;const i=new FormData;i.append("id",n.value[o.value].id),i.append("req_deleted_reason",ve.value),i.append("_method","DELETE");const{data:a,error:C,status:X}=await Y("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:i,retry:0});if(b().loading_full=!1,X.value==="error"){R().trigger(C);return}let v={...n.value[o.value]};v.req_deleted=a.value.req_deleted,v.req_deleted_user=a.value.req_deleted_user,v.req_deleted_by=a.value.req_deleted_by,v.req_deleted_at=a.value.req_deleted_at,v.req_deleted_reason=a.value.req_deleted_reason,v.class_h=s(v),P.value!="all"?n.value.splice(o.value,1):n.value.splice(o.value,1,{...v}),o.value=-1,we.value=!1},{printHtml:at}=Ct(),st=async()=>{if(o.value==-1){_({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}b().loading_full=!0;const{data:i,error:a,status:C}=await Y("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{id:n.value[o.value].id},retry:0});if(b().loading_full=!1,C.value==="error"){R().trigger(a);return}at(i.value.html,318)},ot=async()=>{b().loading_full=!0;const i=new FormData;i.append("online_status",M.value);const{data:a,error:C,status:X}=await Y("/standby_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:i,retry:0});if(b().loading_full=!1,X.value==="error"){R().trigger(C);return}a.value.forEach(v=>{let ae=n.value.map(S=>S.id).indexOf(v.id);if(ae!==-1){let S=n.value[ae];S.pvr_id=v.pvr_id,S.pvr_no=v.pvr_no,S.pvr_total=v.pvr_total,S.pvr_had_detail=v.pvr_had_detail,S.updated_at=v.updated_at,n.value.splice(ae,1,{...S})}}),_({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},nt=async()=>{b().loading_full=!0;const i=new FormData;i.append("online_status",M.value);const{data:a,error:C,status:X}=await Y("/standby_trx_do_update_pv",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:i,retry:0});if(b().loading_full=!1,X.value==="error"){R().trigger(C);return}a.value.data.forEach(v=>{let ae=n.value.map(S=>S.id).indexOf(v.id);if(ae!==-1){let S=n.value[ae];S.pv_id=v.pv_id,S.pv_no=v.pv_no,S.pv_total=v.pv_total,S.pv_datetime=v.pv_datetime,S.updated_at=v.updated_at,n.value.splice(ae,1,{...S})}}),_({show:!0,status:"Success",message:"Update PV Done"})},Be=f([{key:"no",label:"No",isai:!0},{key:"app1",label:"App 1"},{key:"app2",label:"App 2"},{key:"app3",label:"App 3"},{key:"id",label:"ID"},{key:"no_pol",label:"No Pol",freeze:1},{key:"supir",label:"Supir"},{key:"kernet",label:"Kernet"},{key:"xto",label:"Tujuan"},{key:"standby_mst_name",label:"Nama Standby"},{key:"standby_mst_type",label:"Tipe Standby"},{key:"standby_mst_amount",label:"Total Standby",class:" justify-end"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"ref",label:"Ref"},{key:"transition_target",label:"Tujuan Pengalihan"},{key:"transition_type",label:"Tipe Pengalihan"},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"default",class:" justify-start"},{key:"cost_center_desc",label:"Desc"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No"},{key:"pvr_total",label:"Total"},{key:"pvr_completed",label:"Completed"}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",dateformat:"DD-MM-Y"},{key:"pv_no",label:"No"},{key:"pv_total",label:"Total"}]},{key:"created_at",label:"Created At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"updated_at",label:"Updated At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"default"}]),dt=H(()=>["trx_not_done","all"].indexOf(P.value)>-1&&$(["PabrikTransport"])),it=H(()=>$(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(h.value.deleted)>-1&&[void 0,0].indexOf(h.value.req_deleted)>-1&&[void 0,0].indexOf(h.value.val)>-1&&[void 0,""].indexOf(h.value.pvr_id)>-1),rt=H(()=>o.value>-1&&[void 0,0].indexOf(h.value.deleted)>-1&&[void 0,0].indexOf(h.value.req_deleted)>-1&&($(["PabrikTransport"])&&[void 0,0].indexOf(h.value.val)>-1||$(["PabrikMandor"])&&[void 0,0].indexOf(h.value.val1)>-1||$(["Logistic"])&&[void 0,0].indexOf(h.value.val2)>-1)&&[void 0,""].indexOf(h.value.pvr_id)>-1),_t=H(()=>$(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(h.value.deleted)>-1&&[void 0,0].indexOf(h.value.req_deleted)>-1&&[void 0,""].indexOf(h.value.pvr_id)>-1),ut=H(()=>$(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(h.value.deleted)>-1&&[void 0,0].indexOf(h.value.req_deleted)>-1&&h.value.pvr_id!=""),ct=H(()=>$(["Logistic"])&&o.value>-1&&h.value.deleted==0&&h.value.req_deleted==1&&h.value.val2==0),pt=H(()=>$(["PabrikTransport"])&&o.value>-1&&[void 0,0].indexOf(h.value.deleted)>-1&&[void 0,0].indexOf(h.value.req_deleted)>-1&&h.value.val==1);return(i,a)=>{const C=ht,X=Re,v=yt,ae=gt,S=$t,Fe=kt,vt=Dt,ft=At,Ne=Ee("vue-date-picker"),Ue=Ye,mt=Tt,$e=Pt,ke=St,xt=Vt,Pe=qt,wt=ts,bt=Eo;return p(),m("div",zo,[y(C,{title:"List Transaction"}),e("div",Ho,[e("div",Ko,[e("div",Lo,[e("div",Go,[V(e("select",{class:"","onUpdate:modelValue":a[0]||(a[0]=c=>De(P)?P.value=c:null)},Xo,512),[[he,t(P)]])]),t(dt)?(p(),m("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=c=>u())},[y(X)])):T("",!0),t(it)?(p(),m("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=c=>B())},[y(v)])):T("",!0),t(o)>-1?(p(),m("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=c=>W())},[y(ae)])):T("",!0),t(_t)?(p(),m("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[4]||(a[4]=c=>re())},[y(S)])):T("",!0),t(ut)?(p(),m("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[5]||(a[5]=c=>Ze())},[y(Fe)])):T("",!0),t(ct)?(p(),m("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[6]||(a[6]=c=>et())},[y(Fe)])):T("",!0),t(rt)?(p(),m("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[7]||(a[7]=c=>me())},[y(vt)])):T("",!0),t(pt)?(p(),m("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[8]||(a[8]=c=>st())},[y(ft)])):T("",!0)]),$(["PabrikTransport"])?(p(),m("div",Zo,[e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:a[9]||(a[9]=c=>ot())}," Gen/Update PVR "),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:a[10]||(a[10]=c=>nt())}," Update PV "),e("div",{class:"m-1 card-border cursor-pointer",onClick:a[11]||(a[11]=c=>M.value=!t(M))},[Qo,K(" : "),e("span",{class:Ft(["font-bold",t(M)?"text-green-600":"text-red-600"])},d(t(M)?"ONLINE":"OFFLINE"),3)])])):T("",!0)]),e("form",Wo,[e("div",en,[tn,y(Ue,null,{default:O(()=>[y(Ne,{modelValue:t(D).from,"onUpdate:modelValue":a[12]||(a[12]=c=>t(D).from=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",ln,d(t(Q).date_from),1)]),e("div",an,[sn,y(Ue,null,{default:O(()=>[y(Ne,{modelValue:t(D).to,"onUpdate:modelValue":a[13]||(a[13]=c=>t(D).to=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",on,d(t(Q).date_to),1)]),e("div",nn,[dn,V(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":a[14]||(a[14]=c=>De(x)?x.value=c:null),name:"search",placeholder:"Keyword"},null,512),[[L,t(x)]])]),e("div",rn,[_n,V(e("select",{class:"flex-grow","onUpdate:modelValue":a[15]||(a[15]=c=>t(le).field=c)},vn,512),[[he,t(le).field]])]),e("div",fn,[mn,V(e("select",{class:"flex-grow","onUpdate:modelValue":a[16]||(a[16]=c=>t(le).by=c)},bn,512),[[he,t(le).by]])]),e("div",hn,[e("button",{class:"",type:"submit",name:"button",onClick:a[17]||(a[17]=Ve(c=>ge(),["prevent"]))},[y(mt,{class:"text-2xl"})])])]),y(xt,{thead:t(Be),selected:t(o),onSetSelected:a[18]||(a[18]=c=>o.value=c),tbody:t(n),fnCallData:ye,scrolling:t(z),onSetScrollingPage:a[19]||(a[19]=c=>t(z).page=c)},{app1:O(({item:c})=>[c.val?(p(),ne(ke,{key:1})):(p(),ne($e,{key:0}))]),app2:O(({item:c})=>[c.val1?(p(),ne(ke,{key:1})):(p(),ne($e,{key:0}))]),app3:O(({item:c})=>[c.val2?(p(),ne(ke,{key:1})):(p(),ne($e,{key:0}))]),standby_mst_name:O(({item:c})=>{var U;return[K(d((U=c.standby_mst_)==null?void 0:U.name),1)]}),standby_mst_type:O(({item:c})=>{var U;return[K(d((U=c.standby_mst_)==null?void 0:U.tipe),1)]}),standby_mst_amount:O(({item:c})=>{var U;return[K(" Rp. "+d(t(ue)(((U=c.standby_mst_)==null?void 0:U.amount)||0)),1)]}),pvr_completed:O(({item:c})=>[c.pvr_had_detail?(p(),ne(ke,{key:1})):(p(),ne($e,{key:0}))]),deleted_by_username:O(({item:c})=>{var U;return[K(d((U=c.deleted_by)==null?void 0:U.username),1)]}),req_deleted_by_username:O(({item:c})=>{var U;return[K(d((U=c.req_deleted_by)==null?void 0:U.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),y(Pe,{type:"delete",show:t(oe),data:t(xe),fnClose:pe,fnConfirm:Je,enabledOk:t(se)},{footer:O(()=>[K(" Masukkan Alasan Penghapusan: "),e("div",yn,[V(e("textarea",{"onUpdate:modelValue":a[20]||(a[20]=c=>De(r)?r.value=c:null)},null,512),[[L,t(r)]])])]),_:1},8,["show","data","enabledOk"]),y(Pe,{type:"custome",show:t(we),data:t(Oe),fnClose:Xe,fnConfirm:lt,enabledOk:t(Te)},{words:O(()=>[K(" Data akan diproses dan "),gn,K(", yakin untuk melanjutkan ? ")]),footer:O(()=>[K(" Masukkan Alasan Permintaan Penghapusan: "),e("div",$n,[V(e("textarea",{"onUpdate:modelValue":a[21]||(a[21]=c=>De(ve)?ve.value=c:null)},null,512),[[L,t(ve)]])])]),_:1},8,["show","data","enabledOk"]),y(Pe,{type:"custome",show:t(be),data:t(je),fnClose:We,fnConfirm:tt},{words:O(()=>[K(" Data akan diproses dan "),kn,K(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),y(wt,{show:t(ce),fnClose:()=>{ce.value=!1},fnLoadDBData:E,id:t(fe),p_data:t(n),list_cost_center:t(J),online_status:t(M)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),y(bt,{show:t(F),fnClose:()=>{F.value=!1},id:t(N),p_data:t(n),is_view:t(ie)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{Hn as default};
