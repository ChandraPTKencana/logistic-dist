import{_ as ke}from"./Header.5dfdd404.js";import{_ as De}from"./Edit.a6f6ff95.js";import{_ as qe}from"./Eyes.6b8da8a9.js";import{_ as Ce}from"./Signature.5f58c78f.js";import{_ as Me}from"./client-only.000a02fb.js";import{_ as Ae,u as Se}from"./useUtils.5b5c81d3.js";import{a as Ve,_ as Le}from"./trx_absen.439ad8f1.js";import{_ as He,a as je}from"./Check.eec30a4a.js";import{_ as ze}from"./TableView.fce3a1fe.js";import{_ as Ye,a as Be}from"./trx_trp_validasi.f3aa1198.js";import{r as n,f as oe,J as ue,H as pe,g as le,L as Ie,o as c,c as w,h as M,v as O,a as e,k as t,b as f,G as z,w as S,t as u,i as ae,j as fe,l as se,m as Oe,K as V,d as P,F,x as L,y as J,M as Ne,s as me,n as de}from"./entry.3662c5b4.js";import{u as K}from"./useMyFetch.25b712a1.js";import{_ as N}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as Re}from"./HeaderPopup.vue.8b7b8cc9.js";import"./PopupMini.vue.66887c13.js";import"./Times.ae2e5856.js";const Ue={class:"p-1 grow"},Fe={class:"bg-white h-full flex flex-col"},Je={action:"#",class:"w-full flex flex-wrap text-xs"},Ke={class:"w-6/12 p-1 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col"},Pe=e("div",{class:"font-bold"}," Tgl Dari ",-1),Ee={class:"text-red-500"},Ze={class:"w-6/12 p-1 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col"},Ge=e("div",{class:"font-bold"}," Tgl Sampai ",-1),Qe={class:"text-red-500"},We={class:"w-6/12 p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},Xe=e("div",{class:"font-bold"}," Keyword ",-1),et={class:"w-6/12 p-1 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col"},tt=e("div",{class:"font-bold"}," Status ",-1),st=e("option",{value:"ritase_done"},"Done",-1),ot=e("option",{value:"deleted"},"Trash",-1),lt=e("option",{value:"all"},"All",-1),at=e("option",{value:"req_deleted"},"Req Delete",-1),nt=[st,ot,lt,at],rt={class:"w-6/12 p-1 sm:w-4/12 md:w-4/12 lg:w-1/12 flex flex-col"},it=e("div",{class:"font-bold"}," Sort By ",-1),ct=Ne('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),_t=[ct],dt={class:"w-4/12 p-1 sm:w-3/12 md:w-3/12 lg:w-1/12 flex flex-col"},ut=e("div",{class:"font-bold"}," Sort Order ",-1),pt=e("option",{value:"asc"},"Asc",-1),ft=e("option",{value:"desc"},"Desc",-1),mt=[pt,ft],vt={class:"w-2/12 sm:w-1/12 md:w-1/12 lg:w-1/12 p-1 flex items-end"},ht={__name:"history",props:{show:{type:Boolean,required:!0}},setup(k){const D=k,{$moment:q}=me(),h=n("ritase_done"),x=v=>v.deleted==1?"!bg-red-400":v.req_deleted==1?"!bg-yellow-300":v.ritase_val==1?"!bg-blue-300":"",y=v=>(v.map(o=>{o.class_h=x(o)}),v),_={};_._TimeZoneOffset=new Date().getTimezoneOffset(),_.sort="tanggal:desc";const C=n({}),p=n({from:"",to:""}),Y=oe("token");oe("role");const d=n([]),E=n([]),Z=n([]),G=n(!1),r=n(""),A=n({field:"tanggal",by:"desc"}),m=n(-1),B=ue(()=>d.value[m.value]),b=n({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),Q=()=>{_.like="",r.value!=""&&(_.like=`id:%${r.value}%,xto:%${r.value}%,jenis:%${r.value}%,pv_no:%${r.value}%,ticket_a_no:%${r.value}%,ticket_b_no:%${r.value}%,no_pol:%${r.value}%,supir:%${r.value}%,kernet:%${r.value}%,cost_center_code:%${r.value}%,cost_center_desc:%${r.value}%,pvr_id:%${r.value}%,pvr_no:%${r.value}%,tanggal:%${r.value}%,transition_to:%${r.value}%`),_.sort="",A.value.field&&(_.sort=A.value.field+":"+A.value.by),_.date_from=p.value.from?q(p.value.from).format("YYYY-MM-DD"):"",_.date_to=p.value.to?q(p.value.to).format("YYYY-MM-DD"):""},i=async()=>{L().loading_full=!0,C.value={},b.value.may_get_data=!1,_.page=b.value.page,_.page==1&&(d.value=[]),_.first_row&&delete _.first_row,_.page>1&&(_.first_row=JSON.stringify(d.value[0])),_.filter_status=h.value;const{data:v,error:o,status:te}=await K("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},params:_,retry:0});if(L().loading_full=!1,b.value.may_get_data=!0,te.value==="error"){J().trigger(o,C);return}b.value.page==1?d.value=y(v.value.data):b.value.page>1&&(d.value=[...d.value,...y(v.value.data)]),v.value.data.length==0&&(b.value.is_last_record=!0)},a=()=>{ie.value.map(v=>{let o=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(v.key)>-1;return["all","deleted","req_deleted"].indexOf(h.value)>-1?o&&(v.tbl_show=1):o&&(v.tbl_show=0),v}),m.value=-1,b.value.page=1,b.value.is_last_record=!1,Q(),i()},g=n(!1),T=n(0),{display:$}=pe(),W=()=>{m.value==-1?$({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(T.value=d.value[m.value].id,g.value=!0)},j=n(!1),I=n(0),l=n(!1),X=()=>{m.value==-1?$({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(I.value=d.value[m.value].id,j.value=!0,l.value=!1)},ne=()=>{m.value==-1?$({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(I.value=d.value[m.value].id,j.value=!0,l.value=!0)},ee=n(!1),re=n(0),ve=v=>{re.value=v,ee.value=!0},ie=n([{key:"no",label:"No",isai:!0},{key:"app1",label:"A1"},{key:"app2",label:"A2"},{key:"app3",label:"A3"},{key:"id",label:"ID"},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",dateformat:"DD-MM-Y"},{key:"no_pol",label:"No Pol",freeze:1},{key:"xto",label:"Tujuan"},{key:"tipe",label:"Tipe"},{key:"jenis",label:"Jenis"},{key:"amount",label:"Amount",class:" justify-end"},{key:"supir",label:"Supir"},{key:"kernet",label:"Kernet"},{key:"created_at",label:"Created At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"updated_at",label:"Updated At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0}]);return le(()=>D.show,(v,o)=>{v==!0&&i()},{immediate:!0}),(v,o)=>{const te=De,he=qe,xe=Ce,ce=Ie("vue-date-picker"),_e=Me,we=Ae,ge=Ve,R=He,U=je,ye=ze,be=Ye,$e=Be,Te=Le;return c(),w(F,null,[M(e("section",Ue,[e("div",Fe,[e("div",null,[["pv_not_done","all"].indexOf(t(h))>-1&&t(m)>-1&&t(B).deleted==0&&t(B).pvr_id==""?(c(),w("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[0]||(o[0]=s=>W())},[f(te)])):z("",!0),t(m)>-1?(c(),w("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[1]||(o[1]=s=>ne())},[f(he)])):z("",!0),t(h)=="pv_not_done"&&t(m)>-1&&t(B).val==0?(c(),w("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:o[2]||(o[2]=s=>X())},[f(xe)])):z("",!0)]),e("form",Je,[e("div",Ke,[Pe,f(_e,null,{default:S(()=>[f(ce,{modelValue:t(p).from,"onUpdate:modelValue":o[3]||(o[3]=s=>t(p).from=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Ee,u(t(C).date_from),1)]),e("div",Ze,[Ge,f(_e,null,{default:S(()=>[f(ce,{modelValue:t(p).to,"onUpdate:modelValue":o[4]||(o[4]=s=>t(p).to=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Qe,u(t(C).date_to),1)]),e("div",We,[Xe,M(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[5]||(o[5]=s=>ae(r)?r.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[fe,t(r)]])]),e("div",et,[tt,M(e("select",{class:"","onUpdate:modelValue":o[6]||(o[6]=s=>ae(h)?h.value=s:null)},nt,512),[[se,t(h)]])]),e("div",rt,[it,M(e("select",{class:"flex-grow","onUpdate:modelValue":o[7]||(o[7]=s=>t(A).field=s)},_t,512),[[se,t(A).field]])]),e("div",dt,[ut,M(e("select",{class:"flex-grow","onUpdate:modelValue":o[8]||(o[8]=s=>t(A).by=s)},mt,512),[[se,t(A).by]])]),e("div",vt,[e("button",{class:"",type:"submit",name:"button",onClick:o[9]||(o[9]=Oe(s=>a(),["prevent"]))},[f(we,{class:"text-xl"})])])]),f(ye,{thead:t(ie),selected:t(m),onSetSelected:o[10]||(o[10]=s=>m.value=s),tbody:t(d),fnCallData:i,scrolling:t(b),onSetScrollingPage:o[11]||(o[11]=s=>t(b).page=s)},{absen:S(({item:s,index:H})=>[s.trx_absens&&s.trx_absens.length>0?(c(),V(ge,{key:0,class:"cursor-pointer",onClick:uo=>ve(H)},null,8,["onClick"])):z("",!0)]),app1:S(({item:s})=>[s.val?(c(),V(U,{key:1})):(c(),V(R,{key:0}))]),app2:S(({item:s})=>[s.val1?(c(),V(U,{key:1})):(c(),V(R,{key:0}))]),app3:S(({item:s})=>[s.val2?(c(),V(U,{key:1})):(c(),V(R,{key:0}))]),pvr_completed:S(({item:s})=>[s.pvr_had_detail?(c(),V(U,{key:1})):(c(),V(R,{key:0}))]),deleted_by_username:S(({item:s})=>{var H;return[P(u((H=s.deleted_by)==null?void 0:H.username),1)]}),req_deleted_by_username:S(({item:s})=>{var H;return[P(u((H=s.req_deleted_by)==null?void 0:H.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])])],512),[[O,k.show]]),f(be,{show:t(g),fnClose:()=>{g.value=!1},id:t(T),p_data:t(d),list_pv:t(Z),list_cost_center:t(E),online_status:t(G)},null,8,["show","fnClose","id","p_data","list_pv","list_cost_center","online_status"]),f($e,{show:t(j),fnClose:()=>{j.value=!1},id:t(I),p_data:t(d),is_view:t(l)},null,8,["show","fnClose","id","p_data","is_view"]),f(Te,{show:t(ee),fnClose:()=>{ee.value=!1},index:t(re),p_data:t(d)},null,8,["show","fnClose","index","p_data"])],64)}}},xt={name:"MaterialSymbolsCalendarMonth"},wt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},gt=e("path",{fill:"currentColor",d:"M12 14q-.425 0-.712-.288T11 13t.288-.712T12 12t.713.288T13 13t-.288.713T12 14m-4 0q-.425 0-.712-.288T7 13t.288-.712T8 12t.713.288T9 13t-.288.713T8 14m8 0q-.425 0-.712-.288T15 13t.288-.712T16 12t.713.288T17 13t-.288.713T16 14m-4 4q-.425 0-.712-.288T11 17t.288-.712T12 16t.713.288T13 17t-.288.713T12 18m-4 0q-.425 0-.712-.288T7 17t.288-.712T8 16t.713.288T9 17t-.288.713T8 18m8 0q-.425 0-.712-.288T15 17t.288-.712T16 16t.713.288T17 17t-.288.713T16 18M5 22q-.825 0-1.412-.587T3 20V6q0-.825.588-1.412T5 4h1V2h2v2h8V2h2v2h1q.825 0 1.413.588T21 6v14q0 .825-.587 1.413T19 22zm0-2h14V10H5z"},null,-1),yt=[gt];function bt(k,D,q,h,x,y){return c(),w("svg",wt,yt)}const $t=N(xt,[["render",bt]]),Tt={name:"MaterialSymbolsCarTagOutline"},kt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Dt=e("path",{fill:"currentColor",d:"M6.5 16q.625 0 1.063-.437T8 14.5t-.437-1.062T6.5 13t-1.062.438T5 14.5t.438 1.063T6.5 16m9 0q.5 0 .9-.3t.525-.775q-.5-.1-.95-.338t-.825-.612l-.625-.625q-.25.2-.387.5T14 14.5q0 .625.438 1.063T15.5 16M4 17v-5zm1 2v1q0 .425-.288.713T4 21H3q-.425 0-.712-.288T2 20v-8l2.1-6q.15-.45.538-.725T5.5 5H9v1.375q0 .15.013.313T9.05 7h-3.2L4.8 10h6.375l2 2H4v5h14v-2.025q.55-.05 1.063-.275t.937-.625V20q0 .425-.288.713T19 21h-1q-.425 0-.712-.288T17 20v-1zM15 6q.425 0 .713-.288T16 5t-.288-.712T15 4t-.712.288T14 5t.288.713T15 6m1.55 6.55l-5.1-5.1q-.2-.2-.325-.488T11 6.376V2.5q0-.625.438-1.062T12.5 1h3.875q.3 0 .588.125t.487.325l5.1 5.1q.425.425.425 1.063t-.425 1.062l-3.875 3.875q-.425.425-1.062.425t-1.063-.425m1.075-1.75L20.8 7.625L16.175 3H13v3.175zM16.9 6.9"},null,-1),qt=[Dt];function Ct(k,D,q,h,x,y){return c(),w("svg",kt,qt)}const Mt=N(Tt,[["render",Ct]]),At={name:"HealthiconsTruckDriver"},St={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},Vt=e("path",{fill:"currentColor",fillRule:"evenodd",d:"M15 9.5c0-.437 4.516-3.5 9-3.5s9 3.063 9 3.5c0 1.56-.166 2.484-.306 2.987c-.093.33-.402.513-.745.513H16.051c-.343 0-.652-.183-.745-.513C15.166 11.984 15 11.06 15 9.5m7.5-.5a1 1 0 1 0 0 2h3a1 1 0 0 0 0-2zm-6.462 10.218c-3.33-1.03-2.49-2.87-1.22-4.218H33.46c1.016 1.298 1.561 3.049-1.51 4.097a8 8 0 1 1-15.912.12m7.69.782c2.642 0 4.69-.14 6.26-.384a6 6 0 1 1-11.98.069c1.463.202 3.338.315 5.72.315M32.417 34.6A9.992 9.992 0 0 0 24 30a9.992 9.992 0 0 0-8.42 4.602a2.49 2.49 0 0 0-1.447-1.05l-1.932-.517a2.5 2.5 0 0 0-3.062 1.767L8.363 37.7a2.5 2.5 0 0 0 1.768 3.062l1.931.518A2.492 2.492 0 0 0 14 41.006A1 1 0 0 0 16 41v-1c0-.381.027-.756.078-1.123l5.204 1.395a3 3 0 0 0 5.436 0l5.204-1.395c.051.367.078.742.078 1.123v1a1 1 0 0 0 2 .01c.56.336 1.252.453 1.933.27l1.932-.517a2.5 2.5 0 0 0 1.768-3.062l-.777-2.898a2.5 2.5 0 0 0-3.062-1.767l-1.932.517a2.49 2.49 0 0 0-1.445 1.046m-15.814 2.347A8.008 8.008 0 0 1 23 32.062v4.109a3.007 3.007 0 0 0-1.88 1.987zm14.794 0A8.009 8.009 0 0 0 25 32.062v4.109c.904.32 1.61 1.06 1.88 1.987zM24 40a1 1 0 1 0 0-2a1 1 0 0 0 0 2",clipRule:"evenodd"},null,-1),Lt=[Vt];function Ht(k,D,q,h,x,y){return c(),w("svg",St,Lt)}const jt=N(At,[["render",Ht]]),zt={name:"HealthiconsTruckDriverOutline"},Yt={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 48 48"},Bt=e("g",{fill:"currentColor"},[e("path",{d:"M21 11a1 1 0 0 1 1-1h4a1 1 0 1 1 0 2h-4a1 1 0 0 1-1-1"}),e("path",{fillRule:"evenodd",d:"M33.364 18.52c-.363.285-.834.513-1.402.698a8 8 0 1 1-15.924 0c-.568-.185-1.039-.413-1.401-.698c-.47-.37-.785-.864-.822-1.458c-.035-.551.183-1.019.401-1.349a4.31 4.31 0 0 1 .76-.841c.14-.123.278-.232.406-.327c-.038-.205-.08-.453-.122-.74A26.73 26.73 0 0 1 15 10c0-.314.134-.548.196-.647c.078-.125.17-.232.254-.318c.167-.175.383-.353.62-.524c.48-.348 1.14-.739 1.924-1.105C19.557 6.676 21.704 6 24 6c2.297 0 4.443.677 6.006 1.406a12.03 12.03 0 0 1 1.924 1.105c.237.171.453.35.62.524c.084.086.176.193.254.318c.062.099.196.333.196.647c0 1.602-.13 2.9-.26 3.805c-.042.287-.084.535-.122.74c.128.095.267.204.407.327c.25.219.536.504.759.841c.219.33.436.798.402 1.35c-.037.593-.352 1.087-.822 1.457m-16.362-8.202c.015 1.348.127 2.438.238 3.2c.026.18.052.34.076.482h13.368c.025-.142.05-.303.076-.482c.11-.762.223-1.852.238-3.2a3.886 3.886 0 0 0-.241-.188c-.361-.261-.909-.59-1.597-.911C27.777 8.573 25.924 8 24 8s-3.777.573-5.16 1.219c-.688.321-1.236.65-1.596.91a3.886 3.886 0 0 0-.242.19M16.788 16l-.003.002a5.03 5.03 0 0 0-.495.376c-.178.156-.32.308-.406.44a.778.778 0 0 0-.055.093a.71.71 0 0 0 .044.037c.15.118.472.291 1.1.462c.124.034.257.066.399.098l.009.002c.502.111 1.12.21 1.873.288c1.067.111 2.41.184 4.088.2L24 18c3.227 0 5.314-.201 6.62-.49l.008-.002c.143-.032.276-.064.4-.098c.627-.17.95-.344 1.099-.462a.71.71 0 0 0 .044-.037a.782.782 0 0 0-.054-.093a2.348 2.348 0 0 0-.407-.44a5.018 5.018 0 0 0-.494-.376L31.212 16zm6.94 4c2.642 0 4.69-.14 6.26-.384a6 6 0 1 1-11.98.069c1.463.202 3.338.315 5.72.315m-7.65 18.877A8.07 8.07 0 0 0 16 40v1a1 1 0 0 1-1.864.504a2.99 2.99 0 0 1-2.203.259l-1.932-.518a3 3 0 0 1-2.12-3.674l.776-2.898a3 3 0 0 1 3.674-2.121l1.932.517c.672.18 1.23.575 1.618 1.091a9.987 9.987 0 0 1 8.12-4.16a9.987 9.987 0 0 1 8.116 4.158a2.987 2.987 0 0 1 1.616-1.088l1.932-.517a3 3 0 0 1 3.674 2.12l.777 2.899a3 3 0 0 1-2.122 3.674l-1.931.517a2.99 2.99 0 0 1-2.2-.256A1 1 0 0 1 32 41v-1a8.07 8.07 0 0 0-.078-1.123l-5.204 1.395a3 3 0 0 1-5.436 0zm5.042-.72A3.007 3.007 0 0 1 23 36.172v-4.11a8.009 8.009 0 0 0-6.397 4.886zm10.277-1.21A8.009 8.009 0 0 0 25 32.062v4.109c.904.32 1.61 1.06 1.88 1.987zm2.147-.72a1 1 0 0 1 .707-1.225l1.932-.518a1 1 0 0 1 1.224.707l.777 2.898a1 1 0 0 1-.707 1.225l-1.932.518a1 1 0 0 1-1.225-.708zm-21.73-1.743a1 1 0 0 0-1.226.707l-.776 2.897a1 1 0 0 0 .707 1.225l1.932.518a1 1 0 0 0 1.225-.707l.776-2.898A1 1 0 0 0 13.745 35zM25 39a1 1 0 1 1-2 0a1 1 0 0 1 2 0",clipRule:"evenodd"})],-1),It=[Bt];function Ot(k,D,q,h,x,y){return c(),w("svg",Yt,It)}const Nt=N(zt,[["render",Ot]]),Rt={name:"MaterialSymbolsLocationOn"},Ut={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Ft=e("path",{fill:"currentColor",d:"M12 12q.825 0 1.413-.587T14 10t-.587-1.412T12 8t-1.412.588T10 10t.588 1.413T12 12m0 10q-4.025-3.425-6.012-6.362T4 10.2q0-3.75 2.413-5.975T12 2t5.588 2.225T20 10.2q0 2.5-1.987 5.438T12 22"},null,-1),Jt=[Ft];function Kt(k,D,q,h,x,y){return c(),w("svg",Ut,Jt)}const Pt=N(Rt,[["render",Kt]]);const Et={class:"grow flex flex-col"},Zt={class:"w-full flex items-center p-1"},Gt={class:"grow"},Qt={class:"grow overflow-auto h-0"},Wt={class:"p-1 grow"},Xt={class:"bg-white flex py-2 justify-between"},es={class:"flex flex-wrap"},ts={class:"flex items-center justify-center m-2 text-xs"},ss={class:"bg-blue-400 p-2 font-bold text-white"},os={class:"flex flex-col m-2"},ls=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),as={class:"flex items-center justify-center"},ns={class:"flex flex-col m-2"},rs=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),is={class:"flex items-center justify-center"},cs=["data-real"],_s={class:"flex flex-col m-2"},ds=e("span",{class:"text-xs"}," Nama Supir ",-1),us={class:"flex items-center justify-center"},ps=["data-real"],fs={key:0,class:"flex flex-col m-2"},ms=e("span",{class:"text-xs"}," Nama Kernet ",-1),vs={class:"flex items-center justify-center"},hs=["data-real"],xs={class:"flex flex-col m-2"},ws=e("span",{class:"text-xs"}," Tujuan ",-1),gs={class:"flex items-center justify-center"},ys=["onClick"],bs={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},$s={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},Ts={class:"p-1 flex flex-wrap overflow-auto"},ks={class:"w-full sm:w-1/2 flex flex-wrap"},Ds={class:"flex flex-col m-2"},qs=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Cs={class:""},Ms={class:"flex flex-col m-2"},As=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Ss={class:""},Vs={class:"flex flex-col m-2"},Ls=e("span",{class:"text-xs"}," Nama Supir ",-1),Hs={class:""},js={key:0,class:"flex flex-col m-2"},zs=e("span",{class:"text-xs"}," Nama Kernet ",-1),Ys={class:""},Bs={class:"flex flex-col m-2"},Is=e("span",{class:"text-xs"}," Tujuan ",-1),Os={class:""},Ns={class:"flex flex-col m-2"},Rs=e("span",{class:"text-xs"}," Tipe ",-1),Us={class:""},Fs={class:"flex flex-col m-2"},Js=e("span",{class:"text-xs"}," Jenis ",-1),Ks={class:""},Ps={class:"w-full sm:w-1/2 text-sm flex justify-center"},Es={class:"border border-collapse border-black"},Zs=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),Gs={class:"p-1"},Qs={class:"p-1"},Ws=e("td",{class:"p-1"},"= Rp.",-1),Xs={class:"text-right p-1"},eo={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},to=e("th",{colspan:"2",class:"text-right"},"Total",-1),so=e("th",{class:"p-1 text-right"},"Rp.",-1),oo={class:"p-1 text-right"},lo={class:"flex p-1 justify-end flex-wrap"},ao={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},no=e("div",{class:"w-full text-center"}," Data Diatas akan diverifikasi. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),ro={__name:"unverified",props:{show:{type:Boolean,required:!0}},setup(k){const D=k,{$moment:q}=me(),{pointFormat:h}=Se(),x={};x._TimeZoneOffset=new Date().getTimezoneOffset(),x.sort="tanggal:desc";const y=n({}),_=oe("token"),C=n([]),p=n({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),Y=n(-1),d=n(""),E=async i=>{L().loading_full=!0;const{data:a,error:g,status:T}=await K("/trx_trp/mandor_verify_trx",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(L().loading_full=!1,T.value==="error"){J().trigger(g,y);return}p.value=a.value.data},Z=async()=>{L().loading_full=!0,y.value={},x.page==1&&(C.value=[]),x.first_row&&delete x.first_row,x.page>1&&(x.first_row=JSON.stringify(C.value[0])),x.filter_status="mandor_trx_unverified";const{data:i,error:a,status:g}=await K("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:x,retry:0});if(L().loading_full=!1,g.value==="error"){J().trigger(a,y);return}C.value=i.value.data},G=async()=>{L().loading_full=!0,y.value={};const i=new FormData;i.append("id",p.value.id),i.append("_method","PUT");let a="post";const{data:g,error:T,status:$}=await K("/trx_trp/mandor_verify_trx",{method:a,headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},body:i,retry:0});if(L().loading_full=!1,$.value==="error"){J().trigger(T,y);return}C.value.splice(Y.value,1),Y.value=-1,m.value=!1,r.value=!1},r=n(!1),A=n(0),m=n(!1);pe();const B=(i,a)=>{Y.value=i,A.value=a,r.value=!0,E(a)},b=ue(()=>d.value!=""?C.value.filter(i=>i.no_pol.toLowerCase().includes(d.value.toLowerCase())||i.supir.toLowerCase().includes(d.value.toLowerCase())||i.kernet.toLowerCase().includes(d.value.toLowerCase())):C.value),Q=()=>{let i=d.value;document.querySelectorAll(".to_hl").forEach(a=>{let g=a.dataset.real;var T=a.innerHTML,$=g.toLowerCase().indexOf(i.toLowerCase());$>-1&&i!=""?(T=g.substring(0,$)+"<span class='highlight'>"+g.substring($,$+i.length)+"</span>"+g.substring($+i.length),a.innerHTML=T):a.innerHTML=T=g})};return le(()=>b,(i,a)=>{setTimeout(()=>{Q()},0)},{deep:!0,immediate:!0}),le(()=>D.show,(i,a)=>{i==!0&&Z()},{immediate:!0}),(i,a)=>{const g=$t,T=Mt,$=jt,W=Nt,j=Pt,I=Re;return c(),w(F,null,[M(e("section",Et,[e("div",Zt,[e("div",Gt,[M(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":a[0]||(a[0]=l=>ae(d)?d.value=l:null),name:"search",placeholder:"Keyword"},null,512),[[fe,t(d)]])])]),e("div",Qt,[(c(!0),w(F,null,de(t(b),(l,X)=>(c(),w("div",Wt,[e("div",Xt,[e("div",es,[e("div",ts,[e("div",ss,u(l.id),1)]),e("div",os,[ls,e("div",as,[f(g,{class:"mr-1"}),P(" "+u(t(q)(l.tanggal).format("DD-MM-YYYY")),1)])]),e("div",ns,[rs,e("div",is,[f(T,{class:"mr-1"}),e("span",{class:"to_hl","data-real":l.no_pol},u(l.no_pol),9,cs)])]),e("div",_s,[ds,e("div",us,[f($,{class:"mr-1"}),e("span",{class:"to_hl","data-real":l.supir},u(l.supir),9,ps)])]),l.kernet?(c(),w("div",fs,[ms,e("div",vs,[f(W,{class:"mr-1"}),e("span",{class:"to_hl","data-real":l.kernet},u(l.kernet),9,hs)])])):z("",!0),e("div",xs,[ws,e("div",gs,[f(j,{class:"mr-1"}),P(" "+u(l.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:ne=>B(X,l)}," Detail ",8,ys)])]))),256))])],512),[[O,k.show]]),M(e("div",bs,[e("div",$s,[f(I,{title:"Detail Information",fn:()=>{r.value=!1,m.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ts,[e("div",ks,[e("div",Ds,[qs,e("div",Cs,u(t(q)(t(p).tanggal).format("DD-MM-YYYY")),1)]),e("div",Ms,[As,e("div",Ss,u(t(p).no_pol),1)]),e("div",Vs,[Ls,e("div",Hs,u(t(p).supir),1)]),t(p).kernet?(c(),w("div",js,[zs,e("div",Ys,u(t(p).kernet),1)])):z("",!0),e("div",Bs,[Is,e("div",Os,u(t(p).xto),1)]),e("div",Ns,[Rs,e("div",Us,u(t(p).tipe),1)]),e("div",Fs,[Js,e("div",Ks,u(t(p).jenis),1)])]),e("div",Ps,[e("table",Es,[Zs,(c(!0),w(F,null,de(t(p).details_uj,l=>(c(),w("tr",null,[e("td",Gs,u(l.ordinal)+". ",1),e("td",Qs,u(l.xdesc)+" "+u(l.qty<=1?"":t(h)(l.qty||0)+" x Rp."+t(h)(l.harga||0)),1),Ws,e("td",Xs,u(t(h)(l.qty*l.harga)),1)]))),256)),e("tr",eo,[to,so,e("th",oo,u(t(h)(t(p).amount)),1)])])])]),M(e("div",lo,[e("button",{class:"rounded m-1",onClick:a[1]||(a[1]=l=>r.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:a[2]||(a[2]=l=>m.value=!0)}," Verify ")],512),[[O,!t(m)]]),M(e("div",ao,[no,e("button",{class:"rounded m-1 bg-white",onClick:a[3]||(a[3]=l=>(m.value=!1,r.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:a[4]||(a[4]=l=>G())}," Ya ")],512),[[O,t(m)]])])],512),[[O,t(r)]])],64)}}},io={class:"w-full h-full flex flex-col"},co={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-100"},_o=e("div",{class:"w-full flex justify-between flex-wrap"},[e("div",{class:"grow flex flex-wrap justify-between"},[e("div",{class:"flex font-bold"})])],-1),Mo={__name:"ritase",setup(k){const D=n("unverified");return(q,h)=>{const x=ke,y=ht,_=ro;return c(),w("div",io,[f(x,{title:"List Transaction"}),e("div",co,[_o,f(y,{show:t(D)=="history"},null,8,["show"]),f(_,{show:t(D)=="unverified"},null,8,["show"])])])}}};export{Mo as default};
