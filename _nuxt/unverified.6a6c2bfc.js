import E from"./Calendar.c8a63a70.js";import P from"./CarTag.0614b9a5.js";import G from"./TruckDriver.d5b87470.js";import Z from"./TruckDriverOutline.2c087ad9.js";import Q from"./LocationOn.a06a310b.js";import{_ as W}from"./HeaderPopup.vue.75317d7a.js";import{r as u,h as X,z as ee,K as te,I as M,o as f,c as p,n as y,v as k,a as e,B as se,q as oe,m as a,F as D,D as S,t as l,b as v,d as V,G as B,H as ae,x as g,y as L}from"./entry.9bfb7e63.js";import{u as le}from"./useUtils.4001deaf.js";import{u as j}from"./useMyFetch.18476d33.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.c32cdb9b.js";const ne={class:"grow flex flex-col"},re={class:"w-full flex items-center p-1"},ie={class:"grow"},ce={class:"grow overflow-auto h-0"},de={class:"p-1 grow"},_e={class:"bg-white flex py-2 justify-between"},ue={class:"flex flex-wrap"},fe={class:"flex items-center justify-center m-2 text-xs"},pe={class:"bg-blue-400 p-2 font-bold text-white"},he={class:"flex flex-col m-2"},me=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),xe={class:"flex items-center justify-center"},ve={class:"flex flex-col m-2"},ge=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),we={class:"flex items-center justify-center"},ye=["data-real"],be={class:"flex flex-col m-2"},ke=e("span",{class:"text-xs"}," Nama Supir ",-1),Te={class:"flex items-center justify-center"},Ce=["data-real"],De={key:0,class:"flex flex-col m-2"},Le=e("span",{class:"text-xs"}," Nama Kernet ",-1),je={class:"flex items-center justify-center"},Ne=["data-real"],$e={class:"flex flex-col m-2"},Ae=e("span",{class:"text-xs"}," Tujuan ",-1),Me={class:"flex items-center justify-center"},Se=["onClick"],Ve={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Be={class:"w-full sm:w-10/12 md:w-8/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},Ye={class:"p-1 flex flex-wrap overflow-auto items-start"},Ie={class:"w-full sm:w-1/2 flex flex-wrap"},qe={class:"flex flex-col m-2"},ze=e("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),He={class:""},Ke={class:"flex flex-col m-2"},Oe=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Ue={class:""},Fe={class:"flex flex-col m-2"},Je=e("span",{class:"text-xs"}," Nama Supir ",-1),Re={class:""},Ee={key:0,class:"flex flex-col m-2"},Pe=e("span",{class:"text-xs"}," Nama Kernet ",-1),Ge={class:""},Ze={class:"flex flex-col m-2"},Qe=e("span",{class:"text-xs"}," Tujuan ",-1),We={class:""},Xe={class:"flex flex-col m-2"},et=e("span",{class:"text-xs"}," Tipe ",-1),tt={class:""},st={class:"flex flex-col m-2"},ot=e("span",{class:"text-xs"}," Jenis ",-1),at={class:""},lt={class:"w-full sm:w-1/2 text-sm flex justify-center"},nt={class:"border border-collapse border-black"},rt=e("tr",null,[e("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),it={class:"p-1"},ct={class:"p-1"},dt=e("td",{class:"p-1"},"= Rp.",-1),_t={class:"text-right p-1"},ut={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},ft=e("th",{colspan:"2",class:"text-right"},"Total",-1),pt=e("th",{class:"p-1 text-right"},"Rp.",-1),ht={class:"p-1 text-right"},mt={class:"flex p-1 justify-end flex-wrap"},xt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},vt=e("div",{class:"w-full text-center"}," Data Diatas akan diverifikasi. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),At={__name:"unverified",props:{show:{type:Boolean,required:!0}},setup(N){const Y=N,{$moment:$}=ae(),{pointFormat:b}=le(),i={};i._TimeZoneOffset=new Date().getTimezoneOffset(),i.sort="tanggal:desc";const w=u({}),T=X("token"),h=u([]),n=u({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),C=u(-1),_=u(""),I=async o=>{g().loading_full=!0;const{data:t,error:r,status:c}=await j("/trx_trp/mandor_verify_trx",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(g().loading_full=!1,c.value==="error"){L().trigger(r,w);return}n.value=t.value.data},q=async()=>{g().loading_full=!0,w.value={},i.page==1&&(h.value=[]),i.first_row&&delete i.first_row,i.page>1&&(i.first_row=JSON.stringify(h.value[0])),i.filter_status="mandor_trx_unverified";const{data:o,error:t,status:r}=await j("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:i,retry:0});if(g().loading_full=!1,r.value==="error"){L().trigger(t,w);return}h.value=o.value.data},z=async()=>{g().loading_full=!0,w.value={};const o=new FormData;o.append("id",n.value.id),o.append("_method","PUT");let t="post";const{data:r,error:c,status:d}=await j("/trx_trp/mandor_verify_trx",{method:t,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,d.value==="error"){L().trigger(c,w);return}h.value.splice(C.value,1),C.value=-1,x.value=!1,m.value=!1},m=u(!1),H=u(0),x=u(!1);ee();const K=(o,t)=>{C.value=o,H.value=t,m.value=!0,I(t)},A=te(()=>_.value!=""?h.value.filter(o=>o.no_pol.toLowerCase().includes(_.value.toLowerCase())||o.supir.toLowerCase().includes(_.value.toLowerCase())||o.kernet.toLowerCase().includes(_.value.toLowerCase())):h.value),O=()=>{let o=_.value;document.querySelectorAll(".to_hl").forEach(t=>{let r=t.dataset.real;var c=t.innerHTML,d=r.toLowerCase().indexOf(o.toLowerCase());d>-1&&o!=""?(c=r.substring(0,d)+"<span class='highlight'>"+r.substring(d,d+o.length)+"</span>"+r.substring(d+o.length),t.innerHTML=c):t.innerHTML=c=r})};return M(()=>A,(o,t)=>{setTimeout(()=>{O()},0)},{deep:!0,immediate:!0}),M(()=>Y.show,(o,t)=>{o==!0&&q()},{immediate:!0}),(o,t)=>{const r=E,c=P,d=G,U=Z,F=Q,J=W;return f(),p(D,null,[y(e("section",ne,[e("div",re,[e("div",ie,[y(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":t[0]||(t[0]=s=>se(_)?_.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[oe,a(_)]])])]),e("div",ce,[(f(!0),p(D,null,S(a(A),(s,R)=>(f(),p("div",de,[e("div",_e,[e("div",ue,[e("div",fe,[e("div",pe,l(s.id),1)]),e("div",he,[me,e("div",xe,[v(r,{class:"mr-1"}),V(" "+l(a($)(s.tanggal).format("DD-MM-YYYY")),1)])]),e("div",ve,[ge,e("div",we,[v(c,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.no_pol},l(s.no_pol),9,ye)])]),e("div",be,[ke,e("div",Te,[v(d,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.supir},l(s.supir),9,Ce)])]),s.kernet?(f(),p("div",De,[Le,e("div",je,[v(U,{class:"mr-1"}),e("span",{class:"to_hl","data-real":s.kernet},l(s.kernet),9,Ne)])])):B("",!0),e("div",$e,[Ae,e("div",Me,[v(F,{class:"mr-1"}),V(" "+l(s.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:gt=>K(R,s)}," Detail ",8,Se)])]))),256))])],512),[[k,N.show]]),y(e("div",Ve,[e("div",Be,[v(J,{title:"Detail Information",fn:()=>{m.value=!1,x.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ye,[e("div",Ie,[e("div",qe,[ze,e("div",He,l(a($)(a(n).tanggal).format("DD-MM-YYYY")),1)]),e("div",Ke,[Oe,e("div",Ue,l(a(n).no_pol),1)]),e("div",Fe,[Je,e("div",Re,l(a(n).supir),1)]),a(n).kernet?(f(),p("div",Ee,[Pe,e("div",Ge,l(a(n).kernet),1)])):B("",!0),e("div",Ze,[Qe,e("div",We,l(a(n).xto),1)]),e("div",Xe,[et,e("div",tt,l(a(n).tipe),1)]),e("div",st,[ot,e("div",at,l(a(n).jenis),1)])]),e("div",lt,[e("table",nt,[rt,(f(!0),p(D,null,S(a(n).details_uj,s=>(f(),p("tr",null,[e("td",it,l(s.ordinal)+". ",1),e("td",ct,l(s.xdesc)+" "+l(s.qty<=1?"":a(b)(s.qty||0)+" x Rp."+a(b)(s.harga||0)),1),dt,e("td",_t,l(a(b)(s.qty*s.harga)),1)]))),256)),e("tr",ut,[ft,pt,e("th",ht,l(a(b)(a(n).amount)),1)])])])]),y(e("div",mt,[e("button",{class:"rounded m-1",onClick:t[1]||(t[1]=s=>m.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:t[2]||(t[2]=s=>x.value=!0)}," Verify ")],512),[[k,!a(x)]]),y(e("div",xt,[vt,e("button",{class:"rounded m-1 bg-white",onClick:t[3]||(t[3]=s=>(x.value=!1,m.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:t[4]||(t[4]=s=>z())}," Ya ")],512),[[k,a(x)]])])],512),[[k,a(m)]])],64)}}};export{At as default};
