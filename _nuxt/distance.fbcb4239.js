import{r as m,g as A,x as c,J as E,c as F,a as e,b as s,w as g,t as h,l as o,D,F as P,o as $,B as z,y as b,_ as B,H as O}from"./entry.1b15191a.js";import S from"./Header.49bdc5a7.js";import{_ as I}from"./client-only.d396e9df.js";import N from"./PrinterEye.7d2df0d2.js";import H from"./Table2Column.e9857755.js";import{u as L}from"./useDownload.174f4da2.js";import{u as C}from"./useMyFetch.53166450.js";import"./_plugin-vue_export-helper.c27b6911.js";const R=z(()=>B(()=>import("./PDFView.73b8ea4f.js"),["./PDFView.73b8ea4f.js","./Times.a77dacc1.js","./_plugin-vue_export-helper.c27b6911.js","./entry.1b15191a.js","./entry.c5f8f180.css","./useDownload.174f4da2.js"],import.meta.url).then(u=>u.default||u)),U={class:"w-full h-full flex flex-col"},Z={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},J={class:"bg-white p-2"},q={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},G={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},K=e("div",{class:"font-bold"}," Tgl Dari ",-1),Q={class:"text-red-500"},W={class:"w-full p-1 sm:w-6/12 md:w-6/12 lg:w-4/12 flex flex-col"},X=e("div",{class:"font-bold"}," Tgl Sampai ",-1),ee={class:"text-red-500"},te={class:"w-full p-1 sm:w-12/12 md:w-12/12 lg:w-4/12 flex items-end justify-end"},oe=e("div",{class:"text-left m-1"},"Download PDF",-1),le=e("div",{class:"text-left m-1"},"Download Excel",-1),fe={__name:"distance",setup(u){const{$moment:f}=O(),n={};n._TimeZoneOffset=new Date().getTimezoneOffset(),n.sort="tanggal:desc";const _=m({}),p=A("token"),l=m({from:"",to:""});c().loading_full=!1;const w=()=>{n._TimeZoneOffset=new Date().getTimezoneOffset(),n.date_from=l.value.from?f(l.value.from).format("YYYY-MM-DD"):"",n.date_to=l.value.to?f(l.value.to).format("YYYY-MM-DD"):""},{downloadFile:k,viewFile:se}=L(),a=m(!1),x=m({}),V=async()=>{if(a.value==!0){a.value=!1;return}w(),c().loading_full=!0;const{data:d,error:t,status:i}=await C("/report/distance/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:n,retry:0});if(c().loading_full=!1,i.value==="error"){b().trigger(t);return}x.value=d.value,a.value=!0},M=async()=>{w(),c().loading_full=!0;const{data:d,error:t,status:i}=await C("/report/distance/excel_download",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:n,retry:0});if(c().loading_full=!1,i.value==="error"){b().trigger(t);return}k(d.value)};return(d,t)=>{const i=S,v=E("vue-date-picker"),y=I,T=N,Y=H,j=R;return $(),F(P,null,[e("div",U,[s(i,{title:"Report Transaction"}),e("div",Z,[e("div",J,[e("form",q,[e("div",G,[K,s(y,null,{default:g(()=>[s(v,{modelValue:o(l).from,"onUpdate:modelValue":t[0]||(t[0]=r=>o(l).from=r),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Q,h(o(_).date_from),1)]),e("div",W,[X,s(y,null,{default:g(()=>[s(v,{modelValue:o(l).to,"onUpdate:modelValue":t[1]||(t[1]=r=>o(l).to=r),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",ee,h(o(_).date_to),1)]),e("div",te,[e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:t[2]||(t[2]=D(r=>V(),["prevent"]))},[e("div",null,[s(T,{class:"text-2xl"})]),oe]),e("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:t[3]||(t[3]=D(r=>M(),["prevent"]))},[e("div",null,[s(Y,{class:"text-2xl"})]),le])])])])])]),s(j,{show:o(a),pdfContent:o(x),onClose:t[4]||(t[4]=r=>a.value=!o(a))},null,8,["show","pdfContent"])],64)}}};export{fe as default};
