import{_ as T}from"./HeaderPopup.vue.dd0c05c6.js";import j from"./AttachmentSingleV1.0a612353.js";import{r as v,g as I,i as Y,f as q,k as U,L as H,o as w,c as p,a as e,b as k,t as a,l as t,n as x,D as F,H as L,x as u,y as S,p as R,e as z}from"./entry.a8b4d3e0.js";import{u as E}from"./useUtils.4f48d908.js";import{u as D}from"./useMyFetch.5cec154a.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.4a6c134a.js";import"./PDFJsView.1afbfdde.js";const o=n=>(R("data-v-ab07f772"),n=n(),z(),n),K={class:"box-fixed"},O={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},Q={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},W={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},X=o(()=>e("label",{for:""},"Name",-1)),Z={class:"card-border"},ee={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},le=o(()=>e("label",{for:""},"Role",-1)),te={class:"card-border"},se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ae=o(()=>e("label",{for:""},"No KTP",-1)),oe={class:"card-border"},ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"No SIM",-1)),re={class:"card-border"},ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ce=o(()=>e("label",{for:""},"Nama SIM",-1)),_e={class:"card-border"},fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ue=o(()=>e("label",{for:""},"Bank Code",-1)),me={class:"card-border"},ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},we=o(()=>e("label",{for:""},"No Rek",-1)),pe={class:"card-border"},he={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},xe=o(()=>e("label",{for:""},"Nama Rek",-1)),be={class:"card-border"},ye={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ge=o(()=>e("label",{for:""},"Phone Number",-1)),ke={class:"card-border"},Se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},De=o(()=>e("label",{for:""},"Tanggal Lahir",-1)),Ae={class:"card-border"},Pe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ce=o(()=>e("label",{for:""},"Tempat Lahir",-1)),Me={class:"card-border"},Ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ye=o(()=>e("label",{for:""},"TMK",-1)),Fe={class:"card-border"},Be={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ve=o(()=>e("label",{for:""},"Alamat",-1)),$e={class:"card-border"},Te={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},je=o(()=>e("label",{for:""},"Agama",-1)),Ie={class:"card-border"},qe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ue=o(()=>e("label",{for:""},"Status",-1)),He={class:"card-border"},Le={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Re=o(()=>e("label",{for:""},"BPJS Kesehatan",-1)),ze={class:"card-border"},Ee={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Je=o(()=>e("label",{for:""},"BPJS Jamsos",-1)),Ke={class:"card-border"},Oe=o(()=>e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1)),Ge={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Qe=o(()=>e("label",{for:""},"Username",-1)),We={class:"card-border"},Xe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ze={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},el=o(()=>e("label",{for:""},"Face Login?",-1)),ll={class:"card-border"},tl={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},sl=o(()=>e("label",{for:""},"Pekerja Dari",-1)),al={class:"card-border"},ol={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},il={class:"w-full flex items-center justify-end"},dl={class:"w-full flex flex-wrap p-3 items-center"},rl=o(()=>e("div",null," Di Validasi oleh : ",-1)),nl={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},cl={key:0},_l={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const d=n,{$moment:b}=L(),{pointFormat:A}=E(),P={id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""},l=v({...P}),y=I("token"),h=v({}),C=v(null),M=v(null),N=v([]),B=async()=>{u().loading_full=!0,h.value={};const i=new FormData;let s="post",_=d.id;_==0||(i.append("id",_),i.append("_method","PUT"));const{data:c,error:f,status:r}=await D("/employee_validasi",{method:s,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:i,retry:0});if(u().loading_full=!1,r.value==="error"){S().trigger(f,h);return}l.value.val=c.value.val,l.value.val_user=c.value.val_user,l.value.val_by=c.value.val_by,l.value.val_at=c.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>-1&&d.p_data.splice(m,1,{...l.value}),d.fnClose()},V=async()=>{u().loading_full=!0,h.value={};const i=new FormData;let s="post",_=d.id;_==0||(i.append("id",_),i.append("_method","PUT"));const{data:c,error:f,status:r}=await D("/employee_unvalidasi",{method:s,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:i,retry:0});if(u().loading_full=!1,r.value==="error"){S().trigger(f,h);return}l.value.val=c.value.val,l.value.val_user=c.value.val_user,l.value.val_by=c.value.val_by,l.value.val_at=c.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>-1&&d.p_data.splice(m,1,{...l.value}),d.fnClose()},$=async()=>{u().loading_full=!0;const{data:i,error:s,status:_}=await D("/employee",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(u().loading_full=!1,_.value==="error"){S().trigger(s);return}l.value=i.value.data,N.value=i.value.data.details};return Y(()=>{let i=0;return N.value.forEach(s=>{s.p_status!="Remove"&&(i+=parseInt(s.amount))}),i}),Y(()=>!1),q(()=>d.show,(i,s)=>{i==!0&&(l.value={...P},d.it_state==1&&setTimeout(()=>{C.value.focus()},1),d.it_state==0&&setTimeout(()=>{M.value.focus()},1),$())},{immediate:!0}),(i,s)=>{var f;const _=T,c=j;return U((w(),p("section",K,[e("div",null,[k(_,{title:"Form Master Standby Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",O,[e("div",G,[e("div",Q,[e("div",W,[X,e("div",Z,a(t(l).name),1)]),e("div",ee,[le,e("div",te,a(t(l).role),1)]),e("div",se,[ae,e("div",oe,a(t(l).ktp_no),1)]),e("div",ie,[de,e("div",re,a(t(l).sim_no),1)]),e("div",ne,[ce,e("div",_e,a(t(l).sim_name),1)]),e("div",fe,[ue,e("div",me,a((f=t(l).bank)==null?void 0:f.code),1)]),e("div",ve,[we,e("div",pe,a(t(l).rek_no),1)]),e("div",he,[xe,e("div",be,a(t(l).rek_name),1)]),e("div",ye,[ge,e("div",ke,a(t(l).phone_number),1)]),e("div",Se,[De,e("div",Ae,a(t(b)(t(l).birth_date).format("DD-MM-YYYY")),1)]),e("div",Pe,[Ce,e("div",Me,a(t(l).birth_place),1)]),e("div",Ne,[Ye,e("div",Fe,a(t(b)(t(l).tmk).format("DD-MM-YYYY")),1)]),e("div",Be,[Ve,e("div",$e,a(t(l).address),1)]),e("div",Te,[je,e("div",Ie,a(t(l).religion),1)]),e("div",qe,[Ue,e("div",He,a(t(l).status),1)]),e("div",Le,[Re,e("div",ze,a(t(A)(t(l).bpjs_kesehatan)),1)]),e("div",Ee,[Je,e("div",Ke,a(t(A)(t(l).bpjs_jamsos)),1)]),Oe,e("div",Ge,[Qe,e("div",We,a(t(l).username),1)]),e("div",Xe,[k(c,{show:n.show,label:"Photo",link:t(l).face_loc_preview,onSetFile:s[0]||(s[0]=r=>t(l).face_loc=r),onSetPreview:s[1]||(s[1]=r=>t(l).face_loc_preview=r)},null,8,["show","link"])]),e("div",Ze,[el,e("div",ll,a(t(l).m_face_login?"Ya":"Tidak"),1)]),e("div",tl,[sl,e("div",al,a(t(l).workers_from),1)])]),e("div",ol,[k(c,{show:n.show,label:"Attachment",link:t(l).attachment_1_preview,onSetFile:s[2]||(s[2]=r=>t(l).attachment_1=r),onSetPreview:s[3]||(s[3]=r=>t(l).attachment_1_preview=r)},null,8,["show","link"])])]),e("div",il,[e("div",dl,[rl,t(l).val?(w(),p("div",nl,[t(l).val?(w(),p("div",cl," App 1 : "+a(t(l).val_by.username)+" ( "+a(t(l).val_at?t(b)(t(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):x("",!0)])):x("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[4]||(s[4]=r=>n.fnClose())}," Cancel "),n.it_state==1?(w(),p("button",{key:0,ref_key:"it_val",ref:C,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[5]||(s[5]=F(r=>B(),["prevent"]))}," Validasi ",512)):x("",!0),n.it_state==0?(w(),p("button",{key:1,ref_key:"it_unval",ref:M,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:s[6]||(s[6]=F(r=>V(),["prevent"]))}," Unvalidasi ",512)):x("",!0)])])])],512)),[[H,n.show]])}}},bl=J(_l,[["__scopeId","data-v-ab07f772"]]);export{bl as default};
