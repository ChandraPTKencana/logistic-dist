import{_ as S}from"./_plugin-vue_export-helper.c27b6911.js";import{o as _,c as h,a as e,r as x,f as F,g as N,H as I,h as V,v as z,b as g,F as k,n as E,q as M,K as P,G as y,k as s,t as i,m as G,w as J,d as L,x as m,y as C,p as U,e as H}from"./entry.305f92b2.js";import{_ as K}from"./HeaderPopup.vue.7aef427f.js";import{_ as O}from"./Check.f37651e7.js";import{_ as Q}from"./PopupMini.vue.949c687b.js";import{u as R}from"./useUtils.39deb1be.js";import{u as $}from"./useMyFetch.0ca0d699.js";const W={name:"MaterialSymbolsImage"},X={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},Y=e("path",{fill:"currentColor",d:"M5 21q-.825 0-1.412-.587T3 19V5q0-.825.588-1.412T5 3h14q.825 0 1.413.588T21 5v14q0 .825-.587 1.413T19 21zm1-4h12l-3.75-5l-3 4L9 13z"},null,-1),Z=[Y];function ee(r,l,w,j,t,b){return _(),h("svg",X,Z)}const ze=S(W,[["render",ee]]);const d=r=>(U("data-v-a402c5dc"),r=r(),H(),r),te={class:"box-fixed"},se={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},oe={class:"w-full flex flex-col items-center grow overflow-auto"},ae={class:"w-full flex flex-row flex-wrap"},re={class:"w-full grid grid-cols-1 lg:grid-cols-2 p-1 gap-1 relative"},le={class:"relative w-full"},ne=["onClick"],ie=["src"],de={class:"w-full flex items-center justify-end"},ce={class:"w-full flex flex-wrap p-3 items-center text-xs"},_e=d(()=>e("label",{for:""},"U.jalan Per",-1)),ue={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},fe=d(()=>e("label",{for:""},"Jenis",-1)),pe={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},he=d(()=>e("label",{for:""},"Supir",-1)),me={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},be={key:0},xe=d(()=>e("label",{for:""},"Kernet",-1)),we={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ve=d(()=>e("label",{for:""},"No Pol",-1)),ge={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ke=d(()=>e("label",{for:""},"Tujuan",-1)),ye={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Ce=d(()=>e("label",{for:""},"Tipe",-1)),$e={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Se=d(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),je={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},De={__name:"trx_absen",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},p_data:{type:Array,required:!0,default:[]},index:{type:Number,required:!1,default:0}},setup(r){const l=r,{pointFormat:w}=R(),t=x({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,trx_absens:[]}}),b=F("token"),D=async()=>{m().loading_full=!0;const{data:o,error:a,status:f}=await $("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},params:{id:l.p_data[l.index].id},retry:0});if(m().loading_full=!1,f.value==="error"){C().trigger(a);return}t.value=o.value.data,t.value.trx_absens=t.value.trx_absens.map(c=>(c.checked=0,c))};N(()=>l.show,(o,a)=>{o==!0&&D()},{immediate:!0});const{display:T}=I(),v=x({}),u=x(!1),q=async()=>{u.value&&(u.value=!1)},B=()=>{let o=t.value.trx_absens.filter(a=>a.checked==1).length;o<=0?T({show:!0,status:"Failed",message:"Silahkan Pilih Gambar Terlebih Dahulu"}):(v.value={"jumlah gambar yang akan di hapus":o},u.value=!0)},A=async()=>{m().loading_full=!0;const o=new FormData;o.append("id",l.p_data[l.index].id),o.append("ids",JSON.stringify(t.value.trx_absens.filter(p=>p.checked))),o.append("_method","DELETE");const{data:a,error:f,status:c}=await $("/trx_trp_absen",{method:"post",headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},body:o,retry:0});if(m().loading_full=!1,c.value==="error"){C().trigger(f);return}l.p_data[l.index].trx_absens=t.value.trx_absens.filter(p=>p.checked==0),u.value=!1,l.fnClose()};return(o,a)=>{const f=K,c=O,p=Q;return _(),h(k,null,[V(e("section",te,[e("div",null,[g(f,{title:"Form Check Absen",fn:r.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",se,[e("div",oe,[e("div",ae,[e("div",re,[(_(!0),h(k,null,E(s(t).trx_absens,n=>(_(),h("div",le,[e("div",{class:M(["w-7 h-7 ring-1 ring-black absolute right-3 top-3 border-2 border-white flex items-center justify-center text-white",n.checked?"bg-red-600":"bg-transparent"]),onClick:Te=>n.checked=!n.checked},[n.checked?(_(),P(c,{key:0,class:"text-xl"})):y("",!0)],10,ne),e("img",{src:n.gambar,class:"max-w-full max-h-full w-full"},null,8,ie)]))),256))])])]),e("div",de,[e("div",ce,[e("div",null,[_e,e("div",ue,i(s(t).tanggal),1)]),e("div",null,[fe,e("div",pe,i(s(t).jenis),1)]),e("div",null,[he,e("div",me,i(s(t).supir),1)]),s(t).kernet?(_(),h("div",be,[xe,e("div",we,i(s(t).kernet),1)])):y("",!0),e("div",null,[ve,e("div",ge,i(s(t).no_pol),1)]),e("div",null,[ke,e("div",ye,i(s(t).xto),1)]),e("div",null,[Ce,e("div",$e,i(s(t).tipe),1)]),e("div",null,[Se,e("div",je,i(s(w)(s(t).amount||0)),1)])]),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-red-600 text-white rounded-sm",onClick:a[0]||(a[0]=G(n=>B(),["prevent"]))}," Delete "),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[1]||(a[1]=n=>r.fnClose())}," Cancel ")])])])],512),[[z,r.show]]),g(p,{type:"delete",show:s(u),data:s(v),fnClose:q,fnConfirm:A,info_type:"custome"},{info:J(()=>[L(" Ada "+i(s(t).trx_absens.filter(n=>n.checked).length)+" Gambar yang akan di hapus. ",1)]),_:1},8,["show","data"])],64)}}},Ee=S(De,[["__scopeId","data-v-a402c5dc"]]);export{Ee as _,ze as a};
