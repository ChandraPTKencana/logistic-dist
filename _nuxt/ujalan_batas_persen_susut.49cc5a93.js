import{_ as U}from"./HeaderPopup.vue.d93bfc8a.js";import{_ as F}from"./InputPointFormat.vue.3d6b4352.js";import{r as x,g as I,i as T,f as $,k as y,K as D,o as g,c as k,a as e,b as m,t as i,l as t,A as N,C as V,n as K,x as p,y as j,p as M,e as z}from"./entry.10197a4c.js";import{u as w}from"./useUtils.bd30ce45.js";import{u as S}from"./useMyFetch.ae9890da.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.41eb08b0.js";const n=d=>(M("data-v-f25afdc5"),d=d(),z(),d),H={class:"box-fixed"},J={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},O={class:"w-full flex flex-col items-center grow overflow-auto"},R={class:"w-full flex flex-row flex-wrap"},G={class:"w-full sm:w-8/12 md:w-6/12 lg:w-5/12 flex flex-col flex-wrap p-1"},L=n(()=>e("label",{for:""},"To",-1)),Q={class:"card-border disabled"},W={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},X=n(()=>e("label",{for:""},"Jenis",-1)),Y={class:"card-border disabled"},Z={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ee=n(()=>e("label",{for:""},"Trip Bonus Supir",-1)),se={class:"card-border disabled"},te={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ae=n(()=>e("label",{for:""},"Trip Bonus Supir",-1)),le={class:"w-full"},oe={class:"text-red-500"},re={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ie=n(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),ne={class:"w-full"},de={class:"text-red-500"},ue={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},_e=n(()=>e("label",{for:""},"Asal Peralihan",-1)),ce={class:"card-border disabled"},pe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},fe=n(()=>e("label",{for:""},"Tipe",-1)),me={class:"card-border disabled"},we={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ve=n(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),be={class:"card-border disabled"},he={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},xe=n(()=>e("label",{for:""},"Batas Persen Susut",-1)),ye={class:"w-full"},ge={class:"text-red-500"},ke={class:"w-full flex items-center justify-end"},je={__name:"ujalan_batas_persen_susut",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(d){const o=d,{pointFormat:B}=w(),v={id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,batas_persen_susut:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",transition_from:""},s=x({...v}),b=I("token"),c=x({}),C=async()=>{p().loading_full=!0,c.value={};const a=new FormData;a.append("batas_persen_susut",s.value.batas_persen_susut),a.append("bonus_trip_supir",s.value.bonus_trip_supir),a.append("bonus_trip_kernet",s.value.bonus_trip_kernet);let l="post",u=o.is_copy?0:o.id;u==0||(a.append("id",u),a.append("_method","PUT"));const{data:_,error:r,status:q}=await S("/ujalan/batas_persen_susut",{method:l,headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},body:a,retry:0});if(p().loading_full=!1,q.value==="error"){j().trigger(r,c);return}if(u<=0)s.value.id=_.value.id,s.value.created_at=_.value.created_at,s.value.updated_at=_.value.updated_at,o.p_data.unshift(s.value);else{s.value.updated_at=_.value.updated_at;let h=o.p_data.map(A=>A.id).indexOf(u);h>=-1&&o.p_data.splice(h,1,{...s.value})}o.fnClose()},f=T(()=>!1),P=async()=>{p().loading_full=!0;const{data:a,error:l,status:u}=await S("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(p().loading_full=!1,u.value==="error"){j().trigger(l);return}s.value=a.value.data,o.is_copy&&(s.value.val=0,s.value.val1=0)};return $(()=>o.show,(a,l)=>{a==!0&&(s.value={...v},o.id!=0&&P())},{immediate:!0}),(a,l)=>{const u=U,_=F;return y((g(),k("section",H,[e("div",null,[m(u,{title:"Form Batas Persen Susut",fn:d.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",J,[e("div",O,[e("div",R,[e("div",G,[L,e("div",Q,i(t(s).xto),1)]),e("div",W,[X,e("div",Y,i(t(s).jenis),1)]),e("div",Z,[ee,e("div",se,i(t(B)(t(s).bonus_trip_supir||0)),1)]),e("div",te,[ae,e("div",le,[m(_,{class:"w-full h-full p-1",type:"text",value:t(s).bonus_trip_supir||0,onInput:l[0]||(l[0]=r=>t(s).bonus_trip_supir=r),disabled:!("useUtils"in a?a.useUtils:t(w))().checkPermissions(["ujalan.create","ujalan.modify"])||t(f)},null,8,["value","disabled"])]),e("p",oe,i(t(c).bonus_trip_supir),1)]),e("div",re,[ie,e("div",ne,[m(_,{class:"w-full h-full p-1",type:"text",value:t(s).bonus_trip_kernet||0,onInput:l[1]||(l[1]=r=>t(s).bonus_trip_kernet=r),disabled:!("useUtils"in a?a.useUtils:t(w))().checkPermissions(["ujalan.create","ujalan.modify"])||t(f)},null,8,["value","disabled"])]),e("p",de,i(t(c).bonus_trip_kernet),1)]),e("div",ue,[_e,e("div",ce,i(t(s).transition_from),1)]),e("div",pe,[fe,e("div",me,i(t(s).tipe),1)]),e("div",we,[ve,e("div",be,i(t(s).note_for_remarks),1)]),e("div",he,[xe,e("div",ye,[y(e("input",{"onUpdate:modelValue":l[2]||(l[2]=r=>t(s).batas_persen_susut=r)},null,512),[[N,t(s).batas_persen_susut]])]),e("p",ge,i(t(c).batas_persen_susut),1)])])]),e("div",ke,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[3]||(l[3]=r=>d.fnClose())}," Cancel "),t(f)?K("",!0):(g(),k("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[4]||(l[4]=V(r=>C(),["prevent"]))}," Save "))])])])],512)),[[D,d.show]])}}},Fe=E(je,[["__scopeId","data-v-f25afdc5"]]);export{Fe as default};
