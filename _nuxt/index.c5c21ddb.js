import{_ as At}from"./Header.89b2a5d2.js";import{_ as Mt}from"./Plus.20ca3472.js";import{_ as Bt}from"./Edit.70837a82.js";import{_ as Ct}from"./Delete.78c8c015.js";import{_ as Ht}from"./Signature.b49c0a9c.js";import{_ as St,u as Pt,a as Yt}from"./useDownload.2c05cf79.js";import{_ as Nt}from"./Search.69d0656a.js";import{_ as It,a as Ot}from"./Check.d4af9fe1.js";import{_ as Ft}from"./PopupMini.vue.083444a1.js";import{_ as Vt}from"./HeaderPopup.vue.d66b51d3.js";import{r as f,f as q,g as zt,h as V,v as Lt,o as _,c,a as t,b as y,t as o,k as e,G as u,m as it,s as nt,x as p,y as C,p as Ut,e as Et,D as Kt,B as Jt,H as ot,I as Rt,j as qt,i as Gt,l as st,F as Zt,n as Qt,E as Wt,q as at,N as F,O as Xt}from"./entry.8977e57e.js";import{u as _t}from"./useUtils.100f5b4a.js";import{u as M}from"./useMyFetch.f4c1c555.js";import{_ as te}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ee}from"./Times.0d8e20a0.js";import"./client-only.dab780ee.js";import"./InputPointFormat.vue.f7e54857.js";const n=D=>(Ut("data-v-22cde9d3"),D=D(),Et(),D),le={class:"box-fixed"},oe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},se={class:"w-full flex flex-col items-center grow overflow-auto"},ae={class:"w-full flex flex-row flex-wrap"},ie={class:"w-full flex flex-col flex-wrap p-1"},ne=n(()=>t("label",{for:""},"U.Jalan Per",-1)),_e={class:"card-border"},re={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ce=n(()=>t("label",{for:""},"Jenis",-1)),de={class:"card-border"},ue={key:0,class:"w-full flex pt-5"},fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ve=n(()=>t("label",{for:""},"Tujuan",-1)),pe={class:"card-border"},me={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},he=n(()=>t("label",{for:""},"Tipe",-1)),we={class:"card-border"},be={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ke=n(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),xe={class:"card-border"},ge={key:1,class:"w-full flex pb-5"},ye={class:"w-full sm:w-8/12 md:w-9/12 lg:w-9/12 flex flex-col flex-wrap p-1"},De=n(()=>t("label",{for:""},"PV",-1)),$e={class:"card-border"},Te={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},je=n(()=>t("label",{for:""},"Total Dari PV",-1)),Ae={class:"card-border"},Me={key:2,class:"w-full flex flex-col flex-wrap p-1"},Be=n(()=>t("label",{for:""},"Tiket A",-1)),Ce={class:"card-border"},He={key:3,class:"w-full flex flex-wrap"},Se={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pe=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),Ye={class:"card-border"},Ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ie=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),Oe={class:"card-border"},Fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ve=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),ze={class:"card-border"},Le={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ue=n(()=>t("label",{for:""},"Supir",-1)),Ee={class:"card-border"},Ke={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Je=n(()=>t("label",{for:""},"No Pol",-1)),Re={class:"card-border"},qe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ge=n(()=>t("label",{for:""},"In At",-1)),Ze={class:"card-border"},Qe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},We=n(()=>t("label",{for:""},"Out At",-1)),Xe={class:"card-border"},tl={key:4,class:"w-full flex flex-col flex-wrap p-1"},el=n(()=>t("label",{for:""},"Tiket B",-1)),ll={class:"card-border"},ol={key:5,class:"w-full flex flex-wrap"},sl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},al=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),il={class:"card-border"},nl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_l=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),rl={class:"card-border"},cl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},dl=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),ul={class:"card-border"},fl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},vl=n(()=>t("label",{for:""},"Supir",-1)),pl={class:"card-border"},ml={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},hl=n(()=>t("label",{for:""},"No Pol",-1)),wl={class:"card-border"},bl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},kl=n(()=>t("label",{for:""},"In At",-1)),xl={class:"card-border"},gl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},yl=n(()=>t("label",{for:""},"Out At",-1)),Dl={class:"card-border"},$l={key:6,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Tl=n(()=>t("label",{for:""},"Bruto",-1)),jl={class:"card-border"},Al={key:7,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ml=n(()=>t("label",{for:""},"Tara",-1)),Bl={class:"card-border"},Cl={key:8,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hl=n(()=>t("label",{for:""},"Netto",-1)),Sl={class:"card-border"},Pl={key:9,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Yl=n(()=>t("label",{for:""},"In At",-1)),Nl={class:"card-border"},Il={key:10,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ol=n(()=>t("label",{for:""},"Out At",-1)),Fl={class:"card-border"},Vl={key:11,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},zl=n(()=>t("label",{for:""},"Supir",-1)),Ll={class:"card-border"},Ul={key:12,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},El=n(()=>t("label",{for:""},"Kernet",-1)),Kl={class:"card-border"},Jl={key:13,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Rl=n(()=>t("label",{for:""},"No Pol",-1)),ql={class:"card-border"},Gl={class:"w-full flex items-center justify-end"},Zl={class:"w-full flex flex-wrap p-3 items-center"},Ql=n(()=>t("div",null," Di Validasi oleh : ",-1)),Wl={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Xl={key:0},to={key:1},eo={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(D){const x=D,{$moment:g}=nt(),{pointFormat:d}=_t(),l=f({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),T=q("token"),z=async()=>{p().loading_full=!0;const m=new FormData;let r="post",j=x.id;j==0||(m.append("id",j),m.append("_method","PUT"));const{data:h,error:Y,status:U}=await M("/trx_trp_validasi",{method:r,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:m,retry:0});if(p().loading_full=!1,U.value==="error"){C().trigger(Y);return}l.value.val=h.value.val,l.value.val_user=h.value.val_user,l.value.val_by=h.value.val_by,l.value.val_at=h.value.val_at,l.value.val1=h.value.val1,l.value.val1_user=h.value.val1_user,l.value.val1_by=h.value.val1_by,l.value.val1_at=h.value.val1_at;let v=x.p_data.map(A=>A.id).indexOf(x.id);v>=-1&&x.p_data.splice(v,1,{...l.value}),x.fnClose()},L=async()=>{p().loading_full=!0;const{data:m,error:r,status:j}=await M("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:x.id},retry:0});if(p().loading_full=!1,j.value==="error"){C().trigger(r);return}l.value=m.value.data};return zt(()=>x.show,(m,r)=>{m==!0&&L()},{immediate:!0}),(m,r)=>{const j=Vt;return V((_(),c("section",le,[t("div",null,[y(j,{title:"Form Transaction Validation",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",oe,[t("div",se,[t("div",ae,[t("div",ie,[ne,t("div",_e,o(e(l).tanggal?e(g)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",re,[ce,t("div",de,o(e(l).jenis),1)]),e(l).jenis!=""?(_(),c("div",ue,[t("div",fe,[ve,t("div",pe,o(e(l).xto),1)]),t("div",me,[he,t("div",we,o(e(l).tipe),1)]),t("div",be,[ke,t("div",xe,o(e(d)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),c("div",ge,[t("div",ye,[De,t("div",$e,o(e(l).pv_no),1)]),t("div",Te,[je,t("div",Ae,o(e(d)(e(l).pv_total||0)),1)])])):u("",!0),e(l).jenis!=""?(_(),c("div",Me,[Be,t("div",Ce,o(e(l).ticket_a_no),1)])):u("",!0),e(l).jenis!=""?(_(),c("div",He,[t("div",Se,[Pe,t("div",Ye,o(e(d)(e(l).ticket_a_bruto||0)),1)]),t("div",Ne,[Ie,t("div",Oe,o(e(d)(e(l).ticket_a_tara||0)),1)]),t("div",Fe,[Ve,t("div",ze,o(e(d)(e(l).ticket_a_netto||0)),1)]),t("div",Le,[Ue,t("div",Ee,o(e(l).ticket_a_supir),1)]),t("div",Ke,[Je,t("div",Re,o(e(l).ticket_a_no_pol),1)]),t("div",qe,[Ge,t("div",Ze,o(e(l).ticket_a_in_at?e(g)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",Qe,[We,t("div",Xe,o(e(l).ticket_a_out_at?e(g)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="TBS"?(_(),c("div",tl,[el,t("div",ll,o(e(l).ticket_b_no),1)])):u("",!0),e(l).jenis=="TBS"?(_(),c("div",ol,[t("div",sl,[al,t("div",il,o(e(d)(e(l).ticket_b_bruto||0)),1)]),t("div",nl,[_l,t("div",rl,o(e(d)(e(l).ticket_b_tara||0)),1)]),t("div",cl,[dl,t("div",ul,o(e(d)(e(l).ticket_b_netto||0)),1)]),t("div",fl,[vl,t("div",pl,o(e(l).ticket_b_supir),1)]),t("div",ml,[hl,t("div",wl,o(e(l).ticket_b_no_pol),1)]),t("div",bl,[kl,t("div",xl,o(e(l).ticket_b_in_at?e(g)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",gl,[yl,t("div",Dl,o(e(l).ticket_b_out_at?e(g)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="CPO"?(_(),c("div",$l,[Tl,t("div",jl,o(e(d)(e(l).ticket_b_bruto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),c("div",Al,[Ml,t("div",Bl,o(e(d)(e(l).ticket_b_tara||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),c("div",Cl,[Hl,t("div",Sl,o(e(d)(e(l).ticket_b_netto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(_(),c("div",Pl,[Yl,t("div",Nl,o(e(l).ticket_b_in_at?e(g)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis=="CPO"?(_(),c("div",Il,[Ol,t("div",Fl,o(e(l).ticket_b_out_at?e(g)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis!=""?(_(),c("div",Vl,[zl,t("div",Ll,o(e(l).supir),1)])):u("",!0),e(l).jenis!=""?(_(),c("div",Ul,[El,t("div",Kl,o(e(l).kernet),1)])):u("",!0),e(l).jenis!=""?(_(),c("div",Jl,[Rl,t("div",ql,o(e(l).no_pol),1)])):u("",!0)])]),t("div",Gl,[t("div",Zl,[Ql,e(l).val||e(l).val1?(_(),c("div",Wl,[e(l).val?(_(),c("div",Xl," App 1 : "+o(e(l).val_by.username)+" ( "+o(e(l).val_at?e(g)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val1?(_(),c("div",to," App 2 : "+o(e(l).val1_by.username)+" ( "+o(e(l).val1_at?e(g)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=h=>D.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=it(h=>z(),["prevent"]))}," Validasi ")])])])],512)),[[Lt,D.show]])}}},lo=te(eo,[["__scopeId","data-v-22cde9d3"]]),oo={class:"w-full h-full flex flex-col"},so={class:"w-full flex grow flex-col overflow-auto h-0"},ao={class:"w-full flex"},io={action:"#",class:"w-full flex p-1"},no={class:"grow"},_o=t("div",{class:"font-bold"}," Keyword ",-1),ro={class:"pl-1"},co=t("div",{class:"font-bold"}," Sort By ",-1),uo=Xt('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),fo=[uo],vo={class:"pl-1"},po=t("div",{class:"font-bold"}," Sort Order ",-1),mo=t("option",{value:"asc"},"Asc",-1),ho=t("option",{value:"desc"},"Desc",-1),wo=[mo,ho],bo={class:"flex items-end pl-1"},ko={class:"w-full flex justify-center items-center grow h-0 p-1"},xo={key:0,class:""},go={class:"tacky"},yo=t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"Status"),t("th",null,"App 1"),t("th",null,"App 2"),t("th",null,"ID"),t("th",null,"U.Jalan Per"),t("th",null,"No Pol"),t("th",null,"Tujuan"),t("th",null,"Tipe"),t("th",null,"Jenis"),t("th",null,"Amount"),t("th",null,"PV No"),t("th",null,"PV Total"),t("th",null,"Ticket A No"),t("th",null,"Ticket A Bruto"),t("th",null,"Ticket A Tara"),t("th",null,"Ticket A Netto"),t("th",null,"Ticket A Supir"),t("th",null,"Ticket A No Pol"),t("th",null,"Ticket A In At"),t("th",null,"Ticket A Out At"),t("th",null,"Ticket B No"),t("th",null,"Ticket B Bruto"),t("th",null,"Ticket B Tara"),t("th",null,"Ticket B Netto"),t("th",null,"Ticket B Supir"),t("th",null,"Ticket B No Pol"),t("th",null,"Ticket B In At"),t("th",null,"Ticket B Out At"),t("th",null,"Supir"),t("th",null,"Kernet"),t("th",null,"Created At"),t("th",null,"Updated At")])],-1),Do=["onClick"],$o={class:"flex items-center justify-center"},To={class:"flex items-center justify-center"},jo={class:"flex items-center justify-center"},Ao={class:"bold"},Mo={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Bo={class:"relative",style:{width:"95%",height:"90%"}},Co={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ho=["src"],Qo={__name:"index",async setup(D){let x,g;const{$moment:d}=nt(),{pointFormat:$}=_t(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="created_at:desc";const T=q("token"),z=q("role"),L=a=>a.includes(z.value),{data:m}=([x,g]=Kt(async()=>Wt(async()=>{p().loading_full=!0;let a=[],i=[],k=[],B=[];const[H,S]=await Promise.all([M("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},retry:0}),M("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},retry:0})]);return H.status.value!=="error"&&(a=H.data.value.data),H.status.value==="error"?(C().trigger(H.error),{trx_trps:a,list_ujalan:i,list_ticket:k,list_pv:B}):(S.status.value!=="error"&&(i=S.data.value.list_ujalan,k=S.data.value.list_ticket,B=S.data.value.list_pv),p().loading_full=!1,{trx_trps:a,list_ujalan:i,list_ticket:k,list_pv:B})},"$pFLmKcrKj9")),x=await x,g(),x),r=f(m.value.trx_trps||[]),j=f(m.value.list_ujalan),h=f(m.value.list_ticket),Y=f(m.value.list_pv),U=async()=>{p().loading_full=!0;const{data:a,error:i,status:k}=await M("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:l,retry:0});if(p().loading_full=!1,k.value==="error"){C().trigger(i);return}j.value=a.value.list_ujalan,h.value=a.value.list_ticket,Y.value=a.value.list_pv},v=f(""),A=f({field:"created_at",by:"desc"}),w=f(-1),b=f({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),rt=()=>{l.like="",v.value!=""&&(l.like=`id:%${v.value}%,xto:%${v.value}%,jenis:%${v.value}%,pv_no:%${v.value}%,ticket_a_no:%${v.value}%,ticket_b_no:%${v.value}%,no_pol:%${v.value}%,supir:%${v.value}%,kernet:%${v.value}%`),l.sort="",A.value.field&&(l.sort=A.value.field+":"+A.value.by)},N=f(null),G=async()=>{p().loading_full=!0,b.value.may_get_data=!1,l.page=b.value.page,l.page==1&&(r.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(r.value[0]));const{data:a,error:i,status:k}=await M("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:l,retry:0});if(p().loading_full=!1,b.value.may_get_data=!0,k.value==="error"){C().trigger(i);return}b.value.page==1?(r.value=a.value.data,N.value&&(N.value.scrollTop=0)):b.value.page>1&&(r.value=[...r.value,...a.value.data]),a.value.data.length==0&&(b.value.is_last_record=!0)},ct=async()=>{if(!b.value.may_get_data)return;let a=N.value;if(a.scrollLeft!=b.value.scrollLeft){b.value.scrollLeft=a.scrollLeft;return}b.value.is_last_record||!(Math.round(a.scrollTop)+a.clientHeight>=a.scrollHeight-1)||(b.value.page++,await G())},dt=()=>{b.value.page=1,b.value.is_last_record=!1,rt(),G()};Jt();const I=f(!1),E=f(0),ut=()=>{E.value=0,I.value=!0},{display:O}=ot();Rt(ot());const ft=()=>{w.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=r.value[w.value].id,I.value=!0)},K=f(!1),Z=f(0),vt=()=>{w.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Z.value=r.value[w.value].id,K.value=!0)},Q=f({}),P=f(!1),pt=async()=>{P.value&&(P.value=!1)},mt=()=>{w.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Q.value={id:r.value[w.value].id},P.value=!0)},ht=async()=>{p().loading_full=!0;const a=new FormData;a.append("id",r.value[w.value].id),a.append("_method","DELETE");const{data:i,error:k,status:B}=await M("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:a,retry:0});if(p().loading_full=!1,B.value==="error"){C().trigger(k);return}r.value.splice(w.value,1),w.value=-1,P.value=!1},{downloadFile:wt,printHtml:bt}=Pt(),J=f(!1),W=f(""),X=async()=>{if(J.value==!0){J.value=!1;return}if(w.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}p().loading_full=!0;const{data:a,error:i,status:k}=await M("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.value[w.value].id},retry:0});if(p().loading_full=!1,k.value==="error"){C().trigger(i);return}bt(a.value.html,318)},kt=()=>{wt(W.value)},tt=a=>a.pv_id<=0||["CPO","PK"].indexOf(a.jenis)>-1&&(a.ticket_a_id<=0||a.ticket_b_bruto<=0||a.ticket_b_tara<=0||a.ticket_b_netto<=0||a.ticket_b_in_at==""||a.ticket_b_out_at=="")||a.jenis=="TBS"&&(a.ticket_a_id<=0||a.ticket_b_id<=0)||a.jenis=="TBSK"&&a.ticket_b_id<=0?0:1;return(a,i)=>{const k=At,B=Mt,H=Bt,S=Ct,xt=Ht,gt=Yt,yt=Nt,et=It,lt=Ot,Dt=Ft,$t=St,Tt=lo,jt=ee;return _(),c("div",oo,[y(k,{title:"List Transaction"}),t("div",so,[t("div",ao,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[0]||(i[0]=s=>ut())},[y(B)]),L(["PabrikTransport"])?u("",!0):(_(),c("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:i[1]||(i[1]=s=>ft())},[y(H)])),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[2]||(i[2]=s=>mt())},[y(S)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[3]||(i[3]=s=>vt())},[y(xt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:i[4]||(i[4]=s=>X())},[y(gt)])]),t("form",io,[t("div",no,[_o,V(t("input",{class:"",type:"text","onUpdate:modelValue":i[5]||(i[5]=s=>Gt(v)?v.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[qt,e(v)]])]),t("div",ro,[co,V(t("select",{class:"","onUpdate:modelValue":i[6]||(i[6]=s=>e(A).field=s)},fo,512),[[st,e(A).field]])]),t("div",vo,[po,V(t("select",{class:"","onUpdate:modelValue":i[7]||(i[7]=s=>e(A).by=s)},wo,512),[[st,e(A).by]])]),t("div",bo,[t("button",{class:"",type:"submit",name:"button",onClick:i[8]||(i[8]=it(s=>dt(),["prevent"]))},[y(yt,{class:"text-2xl"})])])]),t("div",ko,[e(r).length==0?(_(),c("div",xo," Maaf Tidak Ada Record ")):(_(),c("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:N,onScroll:ct},[t("table",go,[yo,t("tbody",null,[(_(!0),c(Zt,null,Qt(e(r),(s,R)=>(_(),c("tr",{key:R,onClick:So=>w.value=R,class:at(e(w)==R?"active":"")},[t("td",null,[t("div",$o,[t("div",{class:at(["text-white text-xs px-2 py-1 rounded-lg",tt(s)?"bg-green-600":"bg-red-600"])},o(tt(s)?"Done":"Not Done"),3)])]),t("td",null,[t("div",To,[s.val?(_(),F(lt,{key:1})):(_(),F(et,{key:0}))])]),t("td",null,[t("div",jo,[s.val1?(_(),F(lt,{key:1})):(_(),F(et,{key:0}))])]),t("td",Ao,o(s.id),1),t("td",null,o(s.tanggal?e(d)(s.tanggal).format("DD-MM-Y"):""),1),t("td",null,o(s.no_pol),1),t("td",null,o(s.xto),1),t("td",null,o(s.tipe),1),t("td",null,o(s.jenis),1),t("td",null,o(e($)(s.amount)),1),t("td",null,o(s.pv_no),1),t("td",null,o(e($)(s.pv_total)),1),t("td",null,o(s.ticket_a_no),1),t("td",null,o(e($)(s.ticket_a_bruto)),1),t("td",null,o(e($)(s.ticket_a_tara)),1),t("td",null,o(e($)(s.ticket_a_netto)),1),t("td",null,o(s.ticket_a_supir),1),t("td",null,o(s.ticket_a_no_pol),1),t("td",null,o(s.ticket_a_in_at?e(d)(s.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_a_out_at?e(d)(s.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_no),1),t("td",null,o(e($)(s.ticket_b_bruto)),1),t("td",null,o(e($)(s.ticket_b_tara)),1),t("td",null,o(e($)(s.ticket_b_netto)),1),t("td",null,o(s.ticket_b_supir),1),t("td",null,o(s.ticket_b_no_pol),1),t("td",null,o(s.ticket_b_in_at?e(d)(s.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_out_at?e(d)(s.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.supir),1),t("td",null,o(s.kernet),1),t("td",null,o(s.created_at?e(d)(s.created_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.updated_at?e(d)(s.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,Do))),128))])])],544))])]),y(Dt,{type:"delete",show:e(P),data:e(Q),fnClose:pt,fnConfirm:ht},null,8,["show","data"]),y($t,{show:e(I),fnClose:()=>{I.value=!1},fnLoadDBData:U,id:e(E),p_data:e(r),list_ujalan:e(j),list_ticket:e(h),list_pv:e(Y)},null,8,["show","fnClose","id","p_data","list_ujalan","list_ticket","list_pv"]),y(Tt,{show:e(K),fnClose:()=>{K.value=!1},id:e(Z),p_data:e(r)},null,8,["show","fnClose","id","p_data"]),e(J)?(_(),c("div",Mo,[t("div",Bo,[t("div",Co,[y(jt,{style:{color:"black",cursor:"pointer"},onClick:i[9]||(i[9]=s=>X())})]),t("iframe",{ref:"iframe",width:"100%",height:"100%",src:e(W).dataBase64},null,8,Ho),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:i[10]||(i[10]=s=>kt())})])])):u("",!0)])}}};export{Qo as default};
