import{_ as V}from"./HeaderPopup.vue.ed369fc7.js";import q from"./AttachmentSingle.c4c5e0b2.js";import{r as u,f as F,G as k,j as I,m as M,J as P,o as m,c as p,a as e,b as S,t as o,k as l,l as w,x as j,E,A as v,B as C,p as R,e as Y}from"./entry.8137c57c.js";import"./useUtils.66646508.js";import{u as N}from"./useMyFetch.05c9822c.js";import{_ as H}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.48d45154.js";import"./PDFJsView.0d5ac237.js";const r=i=>(R("data-v-12c3293a"),i=i(),Y(),i),T={class:"box-fixed"},z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},K={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},O=r(()=>e("label",{for:""},"Name",-1)),U={class:"card-border"},L={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Q=r(()=>e("label",{for:""},"Role",-1)),W={class:"card-border"},X={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Z=r(()=>e("label",{for:""},"No KTP",-1)),ee={class:"card-border"},te={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},le=r(()=>e("label",{for:""},"No SIM",-1)),ae={class:"card-border"},se={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},oe=r(()=>e("label",{for:""},"Bank Code",-1)),ie={class:"card-border"},re={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ne=r(()=>e("label",{for:""},"No Rek",-1)),de={class:"card-border"},ce={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_e=r(()=>e("label",{for:""},"Nama Rek",-1)),fe={class:"card-border"},ue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},me=r(()=>e("label",{for:""},"Phone Number",-1)),pe={class:"card-border"},ve={class:"p-1 w-full"},we={class:"w-full flex items-center justify-end"},he={class:"w-full flex flex-wrap p-3 items-center"},xe=r(()=>e("div",null," Di Validasi oleh : ",-1)),be={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ye={key:0},ge={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const n=i,{$moment:A}=E(),t=u({...{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""}}),h=F("token"),x=u({}),b=u(null),y=u([]),B=async()=>{v().loading_full=!0,x.value={};const s=new FormData;let a="post",c=n.id;c==0||(s.append("id",c),s.append("_method","PUT"));const{data:_,error:f,status:d}=await N("/employee_validasi",{method:a,headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},body:s,retry:0});if(v().loading_full=!1,d.value==="error"){C().trigger(f,x);return}t.value.val=_.value.val,t.value.val_user=_.value.val_user,t.value.val_by=_.value.val_by,t.value.val_at=_.value.val_at;let g=n.p_data.map(D=>D.id).indexOf(n.id);g>=-1&&n.p_data.splice(g,1,{...t.value}),n.fnClose()},$=async()=>{v().loading_full=!0;const{data:s,error:a,status:c}=await N("/employee",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(v().loading_full=!1,c.value==="error"){C().trigger(a);return}t.value=s.value.data,y.value=s.value.data.details};return k(()=>{let s=0;return y.value.forEach(a=>{a.p_status!="Remove"&&(s+=parseInt(a.amount))}),s}),k(()=>!1),I(()=>n.show,(s,a)=>{s==!0&&(n.is_view==!1&&setTimeout(()=>{b.value.focus()},1),$())},{immediate:!0}),(s,a)=>{var f;const c=V,_=q;return M((m(),p("section",T,[e("div",null,[S(c,{title:"Form Master Standby Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",z,[e("div",G,[e("div",J,[e("div",K,[O,e("div",U,o(l(t).name),1)]),e("div",L,[Q,e("div",W,o(l(t).role),1)]),e("div",X,[Z,e("div",ee,o(l(t).ktp_no),1)]),e("div",te,[le,e("div",ae,o(l(t).sim_no),1)]),e("div",se,[oe,e("div",ie,o((f=l(t).bank)==null?void 0:f.code),1)]),e("div",re,[ne,e("div",de,o(l(t).rek_no),1)]),e("div",ce,[_e,e("div",fe,o(l(t).rek_name),1)]),e("div",ue,[me,e("div",pe,o(l(t).phone_number),1)]),e("div",ve,[S(_,{label:"Attachment",value:l(t).attachment_1_preview,onSetFile:a[0]||(a[0]=d=>l(t).attachment_1=d),onSetPreview:a[1]||(a[1]=d=>l(t).attachment_1_preview=d)},null,8,["value"])])])]),e("div",we,[e("div",he,[xe,l(t).val?(m(),p("div",be,[l(t).val?(m(),p("div",ye," App 1 : "+o(l(t).val_by.username)+" ( "+o(l(t).val_at?l(A)(l(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[2]||(a[2]=d=>i.fnClose())}," Cancel "),i.is_view==0?(m(),p("button",{key:0,ref_key:"it_val",ref:b,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[3]||(a[3]=j(d=>B(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[P,i.show]])}}},qe=H(ge,[["__scopeId","data-v-12c3293a"]]);export{qe as default};
