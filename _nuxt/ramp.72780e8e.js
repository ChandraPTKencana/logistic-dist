import P from"./Header.fc6df3b2.js";import{_ as S}from"./client-only.47dc31b8.js";import I from"./PrinterEye.1ef78b6d.js";import N from"./Table2Column.8f403715.js";import{_ as U}from"./PDFView.vue.08902966.js";import{r as u,h as H,k as L,M as R,c as p,a as t,b as r,w as V,t as v,m as s,n as Z,q,B as G,F as $,D as Q,s as A,l as X,o as w,x as d,y as x,H as J}from"./entry.f2e433ad.js";import{u as y}from"./useMyFetch.04b8e4b6.js";import{u as K}from"./useDownload.737fa5e3.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.ab10e003.js";const W={class:"w-full h-full flex flex-col"},ee={class:"w-full flex grow flex-col overflow-auto h-0 bg-gray-200 justify-center items-center p-2"},te={class:"bg-white p-2"},oe={action:"#",class:"w-full flex flex-col sm:flex-row flex-wrap text-xs"},se={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},le=t("div",{class:"font-bold"}," Tgl Dari ",-1),ae={class:"text-red-500"},ne={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},re=t("div",{class:"font-bold"}," Tgl Sampai ",-1),ie={class:"text-red-500"},ce={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},ue=t("div",{class:"font-bold"}," Lokasi ",-1),de={id:"locations"},me=["value"],fe={class:"w-full p-1 sm:w-12/12 md:w-12/12 lg:w-3/12 flex items-end justify-end"},_e=t("div",{class:"text-left m-1"},"Download PDF",-1),pe=t("div",{class:"text-left m-1"},"Download Excel",-1),$e={__name:"ramp",async setup(ve){let m,g;const{$moment:h}=J(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const D=u({}),_=H("token"),a=u({from:"",to:""}),{data:T}=([m,g]=L(async()=>X(async()=>{d().loading_full=!0;let n=[];const[e,c]=await Promise.all([y("/report/ramp/get_locations",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},retry:0})]);return e.status.value!=="error"&&(n=e.data.value.list_xto),e.status.value==="error"?(x().trigger(e.error),{locations:n}):(d().loading_full=!1,{locations:n})},"$SQhImG8ywX")),m=await m,g(),m),j=u(T.value.locations||[]),f=u(""),b=()=>{l._TimeZoneOffset=new Date().getTimezoneOffset(),l.date_from=a.value.from?h(a.value.from).format("YYYY-MM-DD"):"",l.date_to=a.value.to?h(a.value.to).format("YYYY-MM-DD"):"",l.location=f.value},{downloadFile:Y,viewFile:we}=K(),i=u(!1),k=u({}),B=async()=>{if(i.value==!0){i.value=!1;return}b(),d().loading_full=!0;const{data:n,error:e,status:c}=await y("/report/ramp/pdf_preview",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:l,retry:0});if(d().loading_full=!1,c.value==="error"){x().trigger(e);return}k.value=n.value,i.value=!0},F=async()=>{b(),d().loading_full=!0;const{data:n,error:e,status:c}=await y("/report/ramp/excel_download",{method:"get",headers:{Authorization:`Bearer ${_.value}`,Accept:"application/json"},params:l,retry:0});if(d().loading_full=!1,c.value==="error"){x().trigger(e);return}Y(n.value)};return(n,e)=>{const c=P,C=R("vue-date-picker"),M=S,z=I,E=N,O=U;return w(),p($,null,[t("div",W,[r(c,{title:"Report Transaction"}),t("div",ee,[t("div",te,[t("form",oe,[t("div",se,[le,r(M,null,{default:V(()=>[r(C,{modelValue:s(a).from,"onUpdate:modelValue":e[0]||(e[0]=o=>s(a).from=o),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),t("p",ae,v(s(D).date_from),1)]),t("div",ne,[re,r(M,null,{default:V(()=>[r(C,{modelValue:s(a).to,"onUpdate:modelValue":e[1]||(e[1]=o=>s(a).to=o),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),t("p",ie,v(s(D).date_to),1)]),t("div",ce,[ue,Z(t("input",{type:"text",list:"locations","onUpdate:modelValue":e[2]||(e[2]=o=>G(f)?f.value=o:null)},null,512),[[q,s(f)]]),t("datalist",de,[(w(!0),p($,null,Q(s(j),o=>(w(),p("option",{value:o},v(o),9,me))),256))])]),t("div",fe,[t("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:e[3]||(e[3]=A(o=>B(),["prevent"]))},[t("div",null,[r(z,{class:"text-2xl"})]),_e]),t("button",{class:"flex items-center justify-center m-1",type:"submit",name:"button",onClick:e[4]||(e[4]=A(o=>F(),["prevent"]))},[t("div",null,[r(E,{class:"text-2xl"})]),pe])])])])])]),r(O,{show:s(i),pdfContent:s(k),onClose:e[5]||(e[5]=o=>i.value=!s(i))},null,8,["show","pdfContent"])],64)}}};export{$e as default};
