import{_ as M}from"./HeaderPopup.vue.0e780aae.js";import{r as k,f as H,j as A,m as C,J as S,o as c,c as v,a as e,b as j,t as a,k as s,l as m,x as B,E as N,A as f,B as h,p as V,e as $}from"./entry.e47586b3.js";import"./useUtils.878042fc.js";import{u as g}from"./useMyFetch.e20d4c75.js";import{_ as q}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.b1cb2378.js";const o=i=>(V("data-v-d47a40fb"),i=i(),$(),i),T={class:"box-fixed"},F={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},I={class:"w-full flex flex-col items-center grow overflow-auto"},P={class:"w-full"},E={class:"w-full flex flex-wrap p-3 items-center text-xs"},z=o(()=>e("label",{for:""},"U.jalan Per",-1)),J={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},K=o(()=>e("label",{for:""},"Jenis",-1)),U={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},O=o(()=>e("label",{for:""},"Supir",-1)),G={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},L={key:0},Q=o(()=>e("label",{for:""},"Kernet",-1)),R={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},W=o(()=>e("label",{for:""},"No Pol",-1)),X={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Z=o(()=>e("label",{for:""},"Tujuan",-1)),ee={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},te=o(()=>e("label",{for:""},"Tipe",-1)),se={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ae={class:"w-full flex flex-wrap items-center grow overflow-auto"},le={class:"w-full sm:w-1/2 text-center p-1"},ie={class:"border-[1px] p-1"},re={class:"font-bold"},oe=["src"],_e={class:"w-full sm:w-1/2 text-center p-1"},de={class:"border-[1px] p-1"},ne={class:"border-[1px] p-1"},ce={class:"font-bold"},ve=["src"],ue={class:"w-full sm:w-1/2 text-center p-1"},me={class:"border-[1px] p-1"},fe={class:"border-[1px] p-1"},pe={class:"font-bold"},be=["src"],he={class:"w-full sm:w-1/2 text-center p-1"},ge={class:"border-[1px] p-1"},we={class:"border-[1px] p-1"},xe={class:"font-bold"},ye=["src"],Ye={class:"w-full p-1"},De=o(()=>e("label",{for:""}," Note ",-1)),Me={class:"card-border"},ke={class:"w-full flex items-center justify-end"},He={class:"w-full flex flex-wrap p-3 items-center"},Ae=o(()=>e("div",null," Di Validasi oleh : ",-1)),Ce={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Se={key:0},je={key:1},Be={key:2},Ne={__name:"trx_trp_absen_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const n=i,{$moment:_}=N(),t=k({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:""}}),p=H("token"),w=async()=>{f().loading_full=!0;const d=new FormData;let r="post",u=n.id;u==0||(d.append("id",u),d.append("_method","PUT"));const{data:l,error:y,status:Y}=await g("/trx_trp/absen/validasi",{method:r,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:d,retry:0});if(f().loading_full=!1,Y.value==="error"){h().trigger(y);return}t.value.ritase_val=l.value.ritase_val,t.value.ritase_val_user=l.value.ritase_val_user,t.value.ritase_val_by=l.value.ritase_val_by,t.value.ritase_val_at=l.value.ritase_val_at,t.value.ritase_val1=l.value.ritase_val1,t.value.ritase_val1_user=l.value.ritase_val1_user,t.value.ritase_val1_by=l.value.ritase_val1_by,t.value.ritase_val1_at=l.value.ritase_val1_at,t.value.ritase_val2=l.value.ritase_val2,t.value.ritase_val2_user=l.value.ritase_val2_user,t.value.ritase_val2_by=l.value.ritase_val2_by,t.value.ritase_val2_at=l.value.ritase_val2_at;let b=n.p_data.map(D=>D.id).indexOf(n.id);b>=-1&&n.p_data.splice(b,1,{...t.value}),n.fnClose()},x=async()=>{f().loading_full=!0;const{data:d,error:r,status:u}=await g("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(f().loading_full=!1,u.value==="error"){h().trigger(r);return}t.value=d.value.data};return A(()=>n.show,(d,r)=>{d==!0&&x()},{immediate:!0}),(d,r)=>{const u=M;return C((c(),v("section",T,[e("div",null,[j(u,{title:"Form Transaction Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",F,[e("div",I,[e("div",P,[e("div",E,[e("div",null,[z,e("div",J,a(s(t).tanggal?s(_)(s(t).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",null,[K,e("div",U,a(s(t).jenis),1)]),e("div",null,[O,e("div",G,a(s(t).supir),1)]),s(t).kernet?(c(),v("div",L,[Q,e("div",R,a(s(t).kernet),1)])):m("",!0),e("div",null,[W,e("div",X,a(s(t).no_pol),1)]),e("div",null,[Z,e("div",ee,a(s(t).xto),1)]),e("div",null,[te,e("div",se,a(s(t).tipe),1)])])]),e("div",ae,[e("div",le,[e("div",ie,[e("label",re,"Berangkat : "+a(s(t).img_leave_ts?s(_)(s(t).img_leave_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_leave,alt:""},null,8,oe)])])]),e("div",_e,[e("div",de,[e("div",ne,[e("label",ce,"Tiba : "+a(s(t).img_arrive_ts?s(_)(s(t).img_arrive_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_arrive,alt:""},null,8,ve)])])])]),e("div",ue,[e("div",me,[e("div",fe,[e("label",pe,"Kembali : "+a(s(t).img_return_ts?s(_)(s(t).img_return_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_return,alt:""},null,8,be)])])])]),e("div",he,[e("div",ge,[e("div",we,[e("label",xe,"Sampai : "+a(s(t).img_till_ts?s(_)(s(t).img_till_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_till,alt:""},null,8,ye)])])])]),e("div",Ye,[De,e("div",Me,a(s(t).ritase_note),1)])])]),e("div",ke,[e("div",He,[Ae,s(t).ritase_val||s(t).ritase_val1||s(t).ritase_val2?(c(),v("div",Ce,[s(t).ritase_val?(c(),v("div",Se," App 1 : "+a(s(t).ritase_val_by.username)+" ( "+a(s(t).ritase_val_at?s(_)(s(t).ritase_val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),s(t).ritase_val1?(c(),v("div",je," App 2 : "+a(s(t).ritase_val1_by.username)+" ( "+a(s(t).ritase_val1_at?s(_)(s(t).ritase_val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),s(t).ritase_val2?(c(),v("div",Be," App 3 : "+a(s(t).ritase_val2_by.username)+" ( "+a(s(t).ritase_val2_at?s(_)(s(t).ritase_val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0)])):m("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=l=>i.fnClose())}," Cancel "),i.is_view==0?(c(),v("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=B(l=>w(),["prevent"]))}," Validasi ")):m("",!0)])])])],512)),[[S,i.show]])}}},Ee=q(Ne,[["__scopeId","data-v-d47a40fb"]]);export{Ee as default};
