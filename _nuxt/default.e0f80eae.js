import W from"./Times.863bc3d2.js";import H from"./Burger.9e4077d8.js";import{_ as K}from"./nuxt-link.82dd0063.js";import{_ as Q}from"./Alert.vue.a5033d6e.js";import{_ as q}from"./Loading.vue.407b85e7.js";import{M as X,C as Y,O as Z,r as _,f as B,i as ee,N as F,s as L,x as y,g as v,Q as te,o as c,c as g,a as o,l as r,z as x,k as E,A as se,m as oe,b as f,F as k,E as ne,G as ie,w as M,a0 as ae,J as re,n as P,d as I,t as b,L as le,$ as ce,a6 as ue,y as pe}from"./entry.f858b9d8.js";import{u as t}from"./useUtils.49b1f2e4.js";import{u as de}from"./useMyFetch.ce86c1a9.js";import{_ as me}from"./_plugin-vue_export-helper.c27b6911.js";import"./client-only.af94c1c3.js";import"./Loading.9e1f96a8.js";const _e={class:"w-full h-full flex"},ve={class:"relative h-full"},fe={class:"h-full flex flex-col overflow-hidden"},he={class:"p-2 relative"},we={class:"grow overflow-auto"},ye={id:"panel",class:"min-h-7 p-2 text-xs relative"},ge={class:"w-full absolute bottom-full mb-2 bg-slate-700 bg-opacity-80 cursor-pointer"},xe={class:"grow flex flex-col overflow-hidden"},ke={class:"w-full text-xs bg-slate-700 text-white p-1 flex justify-evenly"},Me=X({__name:"default",setup(Pe){const R=Y(),$=Z(),h=_("");B(()=>$.path,(e,s)=>{let i=e.split("/");i=i.filter(d=>d!=""),h.value="/"+i.join("/")},{immediate:!0});const C=[{activeMenu:"/",showing:!0,title:"Dashboard",icon:"IconsHome"},{activeMenu:"/destination_location",showing:t().checkPermission("destination_location.views"),title:"Dest.Location",icon:"IconsLocationOn"},{activeMenu:"/data_ujalan",showing:t().checkPermission("ujalan.views"),title:"UJ Mst",icon:"IconsMoney"},{activeMenu:"/data_trx_trp",showing:t().checkPermission("trp_trx.views"),title:"Trx Trp",icon:"IconsProduct"},{activeMenu:"/data_trx_trp/transfer",showing:t().checkPermission("trp_trx.transfer.views"),title:"Trx Transfer",icon:"IconsProduct"},{activeMenu:"/data_trx_trp/ticket",showing:t().checkPermission("trp_trx.ticket.views"),title:"Ticket Logistik",icon:"IconsProduct"},{activeMenu:"/data_trx_trp/ritase",showing:t().checkPermission("trp_trx.ritase.views"),title:"Trx Ritase",icon:"IconsProduct"},{activeMenu:"/data_trx_trp/absen",showing:t().checkPermission("trp_trx.absen.views"),title:"Trx Absen",icon:"IconsProduct"},{activeMenu:"/data_standby",showing:t().checkPermission("standby_mst.views"),title:"StandBy Mst",icon:"IconsMoney"},{activeMenu:"/data_standby/trx",showing:t().checkPermission("standby_trx.views"),title:"StandBy Trx",icon:"IconsMoney"},{activeMenu:"/report_trx_trp",showing:t().checkPermission("trp_trx.report.views"),title:"Report Susut",icon:"IconsFileCopy"},{activeMenu:"/report_trx_trp/finance",showing:t().checkPermission("trp_trx.report.views"),title:"Report Fin",icon:"IconsFileCopy"},{activeMenu:"/report/ramp",showing:t().checkPermission("report.ramp.views"),title:"Rpt Hsl Trip",icon:"IconsFileCopy"},{activeMenu:"/report/ast_n_driver",showing:t().checkPermission("report.ast_n_driver.views"),title:"Rpt Gaji Supir & Kernet",icon:"IconsFileCopy"},{activeMenu:"/report/distance",showing:t().checkPermission("report.distance.views"),title:"Rpt Jarak",icon:"IconsFileCopy"},{activeMenu:"/vehicle",showing:t().checkPermission("vehicle.views"),title:"Vehicle",icon:"IconsTruck"},{activeMenu:"/employee",showing:t().checkPermission("employee.views"),title:"Employee",icon:"IconsPerson"},{activeMenu:"/potongan",showing:t().checkPermission("potongan_mst.views"),title:"Potongan",icon:"IconsMoneySlash"},{activeMenu:"/extra_money",showing:t().checkPermission("extra_money.views"),title:"Extra Money",icon:"IconsMoneyMulti"},{activeMenu:"/extra_money/trx",showing:t().checkPermission("extra_money_trx.views"),title:"Extra Money Trx",icon:"IconsMoneyMulti"},{activeMenu:"/salary_paid",showing:t().checkPermission("salary_paid.views"),title:"Salary Paid",icon:"IconsMoneyBag"},{activeMenu:"/salary_paid/rpt",showing:t().checkPermission("rpt_salary.views"),title:"Salary Report",icon:"IconsFileCopy"},{activeMenu:"/salary_bonus",showing:t().checkPermission("salary_bonus.views"),title:"Salary Additional",icon:"IconsMoneyBag"},{activeMenu:"/user",showing:t().checkPermission("user.views"),title:"User",icon:"IconsPerson"},{activeMenu:"/permission_group",showing:t().checkPermission("permission_group.views"),title:"Permission Group",icon:"IconsPeople"}],u=_(""),T=_(null),A=async()=>{var e;u.value="",await ue(),(e=T.value)==null||e.focus()},V=ee(()=>u.value!=""?C.filter(e=>e.showing&&e.title.toLowerCase().includes(u.value.toLowerCase())):C),{logUserOut:j}=F(),{authenticated:z}=L(F()),{triggerSidebar:D}=y(),{is_sidebar_open:p}=L(y()),N=v("token"),U=async()=>{y().loading_full=!0;const{data:e,error:s,status:i}=await de("/logout",{method:"post",headers:{Authorization:`Bearer ${N.value}`,Accept:"application/json"},retry:0});if(y().loading_full=!1,i.value==="error"){pe().trigger(s);return}else j()},G=v("company_name");v("company_email");const J=v("username");v("fullname");const w=_(!1);window.addEventListener("click",e=>{var i;const s=e.target;s instanceof Element&&((i=document==null?void 0:document.getElementById("panel"))!=null&&i.contains(s)||(w.value=!1))}),window.addEventListener("resize",e=>{let s=document.getElementById("side_menu");s&&(window.innerWidth>=640?s.style.left="0px":p.value||(s.style.left="-150px"))}),te(()=>{let e=document.getElementById("side_menu");e&&(window.innerWidth>=640?e.style.left="0px":p.value||(e.style.left="-150px"))});const O=e=>{h.value!=e&&(h.value=e,window.innerWidth<640&&(p.value=!1),R.push(e))},S=_(null);return B(()=>p.value,(e,s)=>{let i=150,d=300/150,n=null,l=S.value;n&&(clearInterval(n),n=null),l&&(n=setInterval(()=>{let m=parseFloat(l.style.left);e?m>=0&&n?(l.style.left="0px",clearInterval(n),n=null):l.style.left=m+d+"px":m<=i*-1&&n?(l.style.left="-150px",clearInterval(n),n=null):l.style.left=m-d+"px"},1))}),(e,s)=>{const i=W,d=H,n=K,l=Q,m=q;return c(),g(k,null,[o("div",_e,[o("nav",{id:"side_menu",ref_key:"side_menu",ref:S,class:"bg-slate-900 h-full min-w-[150px] max-w-[150px] fixed sm:relative sm:left-0 text-white z-10",style:{width:"320px"}},[o("div",ve,[o("button",{class:"absolute left-full h-8 text-2xl text-white bg-slate-500 sm:hidden bg-opacity-0 ring-0 focus:ring-0 flex justify-center items-center",onClick:s[0]||(s[0]=a=>r(D)(!r(p)))},[r(p)?(c(),x(i,{key:0})):(c(),x(d,{key:1}))]),o("header",fe,[o("div",he,[E(o("input",{ref_key:"searchInput",ref:T,type:"text","onUpdate:modelValue":s[1]||(s[1]=a=>oe(u)?u.value=a:null),placeholder:"search"},null,512),[[se,r(u)]]),o("div",{class:"absolute z-10 top-3 right-3 bg-white cursor-pointer",onClick:s[2]||(s[2]=a=>A())},[f(i,{class:"text-red-900 text-3xl"})])]),o("ul",we,[(c(!0),g(k,null,ne(V.value,a=>(c(),g(k,null,[a.showing?(c(),g("li",{key:0,class:ie(r(h)==a.activeMenu?"active":"")},[f(n,{to:a.activeMenu,class:"cursor-pointer",onClick:Ie=>O(a.activeMenu)},{default:M(()=>[a.icon?(c(),x(ae(("resolveComponent"in e?e.resolveComponent:r(re))(a.icon)),{key:0,class:"mr-1"})):P("",!0),I(" "+b(a.title),1)]),_:2},1032,["to","onClick"])],2)):P("",!0)],64))),256))]),o("div",ye,[E(o("div",ge,[f(n,{to:"/profile/change_password",class:"block w-full text-left p-2 hover:bg-slate-900"},{default:M(()=>[I(" Change Password ")]),_:1}),r(z)?(c(),x(n,{key:0,class:"block w-full text-left p-2 hover:bg-slate-900",onClick:U},{default:M(()=>[I(" Logout ")]),_:1})):P("",!0)],512),[[le,r(w)]]),o("div",{class:"bg-slate-700 bg-opacity-80 p-2 cursor-pointer",onClick:s[3]||(s[3]=a=>w.value=!r(w))},b(r(J)),1)])])])],512),o("div",xe,[ce(e.$slots,"default",{},void 0,!0),o("div",ke,[o("div",null,b(r(G)),1)])])]),f(l),f(m)],64)}}});const Ve=me(Me,[["__scopeId","data-v-fb217053"]]);export{Ve as default};
