import{_ as q}from"./HeaderPopup.vue.39a3d3fe.js";import{_ as G}from"./WidthMiniPart.vue.2800d05b.js";import J from"./AttachmentSingle.3210d8db.js";import z from"./CaretTop.5de80357.js";import K from"./CaretDown.8a5ca46f.js";import{r as y,g as W,R as Q,f as X,k as B,L as Z,o as _,c as i,a as t,b as h,t as s,l,A as ee,n as u,D as O,d as R,H as ae,x as g,y as S,p as le,e as te}from"./entry.12334995.js";import{u as oe}from"./useUtils.4456ff4d.js";import{u as T}from"./useMyFetch.b8c93418.js";import{_ as se}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.2c7e61c7.js";import"./PDFJsView.58c56477.js";const v=c=>(le("data-v-2e19f33e"),c=c(),te(),c),re={class:"box-fixed"},ne={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ve={class:"w-full flex flex-col items-center grow overflow-auto"},_e={class:"w-full flex flex-row flex-wrap"},ie={class:"w-full sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},de=v(()=>t("label",{for:""},"Trx Trp #ID",-1)),ue={class:"card-border"},ce={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},me=v(()=>t("label",{for:""},"Tanggal",-1)),fe={class:"card-border"},pe={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},xe=v(()=>t("label",{for:""},"Payment Method",-1)),ye={class:"card-border"},we={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},be=v(()=>t("label",{for:""},"No Pol",-1)),he={class:"card-border"},ke={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ge=v(()=>t("label",{for:""},"Pekerja",-1)),De={class:"card-border"},Ye={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},Ie=v(()=>t("label",{for:""},"Uang Tambahan",-1)),Me={class:"card-border"},Ae={class:"w-full flex flex-col flex-wrap p-1"},Ce=v(()=>t("label",{for:""},"Note For Remarks",-1)),Ne={class:"text-red-500"},Se={class:"w-full flex"},Te={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},He={class:"p-1 w-full sm:w-full md:w-1/2 md:overflow-auto max-h-full"},Pe={class:"w-full flex flex-wrap"},Ve={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},$e=v(()=>t("label",{for:""},"Cost Center Code",-1)),Le={class:"card-border disabled"},Be={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Oe=v(()=>t("label",{for:""},"Cost Center Desc",-1)),Re={class:"card-border disabled"},Ee={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ue=v(()=>t("label",{for:""},"PVR No",-1)),Fe={class:"card-border disabled"},je={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},qe=v(()=>t("label",{for:""},"PVR Total",-1)),Ge={class:"card-border disabled"},Je={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ze=v(()=>t("label",{for:""},"PV",-1)),Ke={class:"card-border disabled"},We={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Qe=v(()=>t("label",{for:""},"PV Amount",-1)),Xe={class:"card-border disabled"},Ze={class:"w-full flex items-center justify-end"},ea={class:"w-full flex flex-wrap p-3 items-center"},aa=v(()=>t("div",null," Di Validasi oleh : ",-1)),la={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ta={key:0},oa={key:1},sa={key:2},ra={key:3},na={key:4},va={key:5},_a={key:0,class:"text-xs font-bold"},ia={key:0,class:"text-xs font-bold"},da={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(c,{emit:Y}){const n=c,{$moment:w}=ae(),{pointFormat:I}=oe(),H={id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},payment_method:{name:""},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""},e=y({...H}),M=W("token"),A=y({}),P=y(null),V=y(null);y([]);const E={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},U={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""};let C=o=>{o.key=="ArrowUp"&&L(),o.key=="ArrowDown"&&$()};Q(()=>{document.removeEventListener("keydown",C)});const f=y(JSON.parse(JSON.stringify(U))),p=y(JSON.parse(JSON.stringify(E))),d=y(""),F=async()=>{d.value="PROSES...",g().loading_full=!0,A.value={};const o=new FormData;let r="post",x=n.id;x==0||(o.append("id",x),o.append("_method","PUT"));const{data:a,error:k,status:D}=await T("/extra_money_trx_validasi",{method:r,headers:{Authorization:`Bearer ${M.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,D.value==="error"){d.value="GAGAL",S().trigger(k,A);return}e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at,e.value.val4=a.value.val4,e.value.val4_user=a.value.val4_user,e.value.val4_by=a.value.val4_by,e.value.val4_at=a.value.val4_at,e.value.val5=a.value.val5,e.value.val5_user=a.value.val5_user,e.value.val5_by=a.value.val5_by,e.value.val5_at=a.value.val5_at,e.value.val6=a.value.val6,e.value.val6_user=a.value.val6_user,e.value.val6_by=a.value.val6_by,e.value.val6_at=a.value.val6_at;let b=n.p_data.map(m=>m.id).indexOf(n.id);b>-1&&n.p_data.splice(b,1,{...e.value}),d.value="BERHASIL"},j=async()=>{d.value="PROSES...",g().loading_full=!0;const o=new FormData;let r="post",x=n.id;x==0||(o.append("id",x),o.append("_method","PUT"));const{data:a,error:k,status:D}=await T("/extra_money_trx_unvalidasi",{method:r,headers:{Authorization:`Bearer ${M.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,D.value==="error"){d.value="GAGAL",S().trigger(k);return}e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at,e.value.val3=a.value.val3,e.value.val3_user=a.value.val3_user,e.value.val3_by=a.value.val3_by,e.value.val3_at=a.value.val3_at,e.value.val4=a.value.val4,e.value.val4_user=a.value.val4_user,e.value.val4_by=a.value.val4_by,e.value.val4_at=a.value.val4_at,e.value.val5=a.value.val5,e.value.val5_user=a.value.val5_user,e.value.val5_by=a.value.val5_by,e.value.val5_at=a.value.val5_at,e.value.val6=a.value.val6,e.value.val6_user=a.value.val6_user,e.value.val6_by=a.value.val6_by,e.value.val6_at=a.value.val6_at;let b=n.p_data.map(m=>m.id).indexOf(n.id);b>-1&&n.p_data.splice(b,1,{...e.value}),d.value="BERHASIL"},N=async()=>{d.value="",g().loading_full=!0;const{data:o,error:r,status:x}=await T("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${M.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(g().loading_full=!1,x.value==="error"){S().trigger(r);return}let a=o.value.data;e.value=a,f.value._raw=a.employee,f.value._.id.val=a.employee.id,f.value._.name.val=a.employee.name,f.value._.rek_no.val=a.employee_rek_no,f.value._.rek_name.val=a.employee_rek_name,f.value.id=a.employee.id,f.value.name=a.employee.name,f.value.rek_no=(a.employee_rek_no||"")+" "+(a.employee_rek_name||""),p.value._raw=a.extra_money,p.value._.id.val=a.extra_money.id,p.value._.xto.val=a.extra_money.xto,p.value._.description.val=a.extra_money.description,p.value._.total.val=I(a.extra_money.total),p.value.id=a.extra_money.id,p.value.name=a.extra_money.xto,p.value.title=(I(a.extra_money.total)||"")+" "+(a.extra_money.description||"")};X(()=>n.show,(o,r)=>{o==!0?(document.addEventListener("keydown",C),e.value={...H},n.it_state==1&&setTimeout(()=>{P.value.focus()},1),n.it_state==0&&setTimeout(()=>{V.value.focus()},1),N()):document.removeEventListener("keydown",C)},{immediate:!0});const $=()=>{let o=n.p_data.map(r=>r.id).indexOf(n.id);o!=n.p_data.length-1&&(o++,Y("setID",n.p_data[o].id),Y("setIndex",o),setTimeout(()=>{N()},100))},L=()=>{let o=n.p_data.map(r=>r.id).indexOf(n.id);o!=0&&(o--,Y("setID",n.p_data[o].id),Y("setIndex",o),setTimeout(()=>{N()},100))};return(o,r)=>{const x=q,a=G,k=J,D=z,b=K;return B((_(),i("section",re,[t("div",null,[h(x,{title:"Form Transaction Extra Money Trx Validation",fn:c.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ne,[t("div",ve,[t("div",_e,[t("div",ie,[de,t("div",ue,s(l(e).prev_trx_trp_id),1)]),t("div",ce,[me,t("div",fe,s(l(w)(l(e).tanggal).format("DD-MM-YYYY")),1)]),t("div",pe,[xe,t("div",ye,s(l(e).payment_method.name),1)]),t("div",we,[be,t("div",he,s(l(e).no_pol),1)]),t("div",ke,[ge,t("div",De,[h(a,{selected:l(f)},null,8,["selected"])])]),t("div",Ye,[Ie,t("div",Me,[h(a,{selected:l(p)},null,8,["selected"])])]),t("div",Ae,[Ce,B(t("textarea",{disabled:"disabled","onUpdate:modelValue":r[0]||(r[0]=m=>l(e).note_for_remarks=m)},null,512),[[ee,l(e).note_for_remarks]]),t("p",Ne,s(l(A).note_for_remarks),1)]),t("div",Se,[t("div",Te,[h(k,{label:"Attachment",value:l(e).attachment_1_preview},null,8,["value"])]),t("div",He,[h(k,{label:"Attachment",value:l(e).attachment_2_preview},null,8,["value"])])]),t("div",Pe,[t("div",Ve,[$e,t("div",Le,s(l(e).cost_center_code),1)]),t("div",Be,[Oe,t("div",Re,s(l(e).cost_center_desc),1)]),t("div",Ee,[Ue,t("div",Fe,s(l(e).pvr_no),1)]),t("div",je,[qe,t("div",Ge,s(l(I)(l(e).pvr_total||0)),1)]),t("div",Je,[ze,t("div",Ke,s(l(e).pv_no),1)]),t("div",We,[Qe,t("div",Xe,s(l(I)(l(e).pv_total)),1)])])])]),t("div",Ze,[t("div",ea,[aa,l(e).val1||l(e).val2||l(e).val3||l(e).val4||l(e).val5||l(e).val6?(_(),i("div",la,[l(e).val1?(_(),i("div",ta," Kasir : "+s(l(e).val1_by.username)+" ( "+s(l(e).val1_at?l(w)(l(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),l(e).val2?(_(),i("div",oa," Mandor : "+s(l(e).val2_by.username)+" ( "+s(l(e).val2_at?l(w)(l(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),l(e).val3?(_(),i("div",sa," KTU/W : "+s(l(e).val3_by.username)+" ( "+s(l(e).val3_at?l(w)(l(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),l(e).val4?(_(),i("div",ra," Logistik : "+s(l(e).val4_by.username)+" ( "+s(l(e).val4_at?l(w)(l(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),l(e).val5?(_(),i("div",na," SPV Logistik : "+s(l(e).val5_by.username)+" ( "+s(l(e).val5_at?l(w)(l(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),l(e).val6?(_(),i("div",va," MGR Logistik : "+s(l(e).val6_by.username)+" ( "+s(l(e).val6_at?l(w)(l(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:r[1]||(r[1]=m=>L())},[h(D,{class:"black"})]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[2]||(r[2]=m=>c.fnClose())}," Cancel "),c.it_state==1?(_(),i("button",{key:0,ref_key:"it_val",ref:P,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[3]||(r[3]=O(m=>F(),["prevent"]))},[R(" Validasi "),l(d)!=""?(_(),i("div",_a,s(l(d)),1)):u("",!0)],512)):u("",!0),c.it_state==0?(_(),i("button",{key:1,ref_key:"it_unval",ref:V,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:r[4]||(r[4]=O(m=>j(),["prevent"]))},[R(" Unvalidasi "),l(d)!=""?(_(),i("div",ia,s(l(d)),1)):u("",!0)],512)):u("",!0),t("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:r[5]||(r[5]=m=>$())},[h(b,{class:"black"})])])])])],512)),[[Z,c.show]])}}},ga=se(da,[["__scopeId","data-v-2e19f33e"]]);export{ga as default};
