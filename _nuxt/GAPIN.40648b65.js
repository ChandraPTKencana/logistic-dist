import{r,O as w,g as x,_ as y,o as h,c as g,a as s,d as k,k as T,A as C,l as N,m as I,C as A,n as B,x as d,y as M}from"./entry.01ae9c7d.js";import{u as S}from"./useMyFetch.dcbeaa01.js";const V={key:0,class:"flex items-center justify-center absolute top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},j={action:"#",class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},E={class:"w-full"},$={class:"flex w-full justify-between mt-5"},F={__name:"GAPIN",props:{show:{type:Number,required:!0}},emits:["setTimeout"],setup(f,{emit:a}){const i=r(null);w(()=>{setTimeout(()=>{i.value.focus()},1)});const c=r({}),m=x("token"),o=r(""),n=r(0),p=async()=>{d().loading_full=!0,c.value={};const u=new FormData;u.append("pin",o.value);let t="post";const{data:l,error:b,status:_}=await S("/ga_pin",{method:t,headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},body:u,retry:0});if(d().loading_full=!1,_.value==="error"){M().trigger(b,c);return}a("setTimeout",l.value),n.value=l.value,o.value="",v()};let e=null;const v=()=>{e==null&&(e=setInterval(()=>{n.value--,n.value<=0&&(clearInterval(e),e=null,a("setTimeout",0))},1e3))};return y(()=>{clearInterval(e),e=null,a("setTimeout",0)}),(u,t)=>f.show==0?(h(),g("div",V,[s("form",j,[s("div",E,[k(" Enter PIN "),T(s("input",{ref_key:"it_pin",ref:i,type:"text",class:"w-full","onUpdate:modelValue":t[0]||(t[0]=l=>I(o)?o.value=l:null)},null,512),[[C,N(o)]])]),s("div",$,[s("button",{type:"submit",onClick:t[1]||(t[1]=A(l=>p(),["prevent"])),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Submit ")])])])):B("",!0)}};export{F as default};
