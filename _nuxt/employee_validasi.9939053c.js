import{_ as M}from"./HeaderPopup.vue.d6f31a0e.js";import{r as _,f as V,G as y,j as $,m as q,M as I,o as f,c as u,a as e,b as F,t as o,k as l,l as p,x as j,E,A as m,B as g,p as P,e as R}from"./entry.5e60e084.js";import"./useUtils.8f5554e5.js";import{u as k}from"./useMyFetch.6c881b2f.js";import{_ as Y}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.042464b5.js";const r=i=>(P("data-v-863aec91"),i=i(),R(),i),H={class:"box-fixed"},T={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},z={class:"w-full flex flex-col items-center grow overflow-auto"},G={class:"w-full flex flex-row flex-wrap"},K={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},O=r(()=>e("label",{for:""},"Name",-1)),U={class:"card-border"},J={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},L=r(()=>e("label",{for:""},"Role",-1)),Q={class:"card-border"},W={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},X=r(()=>e("label",{for:""},"No KTP",-1)),Z={class:"card-border"},ee={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},te=r(()=>e("label",{for:""},"No SIM",-1)),le={class:"card-border"},ae={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},se=r(()=>e("label",{for:""},"Nama Bank",-1)),oe={class:"card-border"},ie={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},re=r(()=>e("label",{for:""},"No Rek",-1)),de={class:"card-border"},ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ce=r(()=>e("label",{for:""},"Nama Rek",-1)),_e={class:"card-border"},fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ue=r(()=>e("label",{for:""},"Phone Number",-1)),me={class:"card-border"},pe={class:"w-full flex items-center justify-end"},ve={class:"w-full flex flex-wrap p-3 items-center"},we=r(()=>e("div",null," Di Validasi oleh : ",-1)),he={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},xe={key:0},be={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const d=i,{$moment:N}=E(),t=_({...{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),v=V("token"),w=_({}),h=_(null),x=_([]),S=async()=>{m().loading_full=!0,w.value={};const a=new FormData;let s="post",n=d.id;n==0||(a.append("id",n),a.append("_method","PUT"));const{data:c,error:B,status:A}=await k("/employee_validasi",{method:s,headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},body:a,retry:0});if(m().loading_full=!1,A.value==="error"){g().trigger(B,w);return}t.value.val=c.value.val,t.value.val_user=c.value.val_user,t.value.val_by=c.value.val_by,t.value.val_at=c.value.val_at;let b=d.p_data.map(D=>D.id).indexOf(d.id);b>=-1&&d.p_data.splice(b,1,{...t.value}),d.fnClose()},C=async()=>{m().loading_full=!0;const{data:a,error:s,status:n}=await k("/employee",{method:"get",headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(m().loading_full=!1,n.value==="error"){g().trigger(s);return}t.value=a.value.data,x.value=a.value.data.details};return y(()=>{let a=0;return x.value.forEach(s=>{s.p_status!="Remove"&&(a+=parseInt(s.amount))}),a}),y(()=>!1),$(()=>d.show,(a,s)=>{a==!0&&(d.is_view==!1&&setTimeout(()=>{h.value.focus()},1),C())},{immediate:!0}),(a,s)=>{const n=M;return q((f(),u("section",H,[e("div",null,[F(n,{title:"Form Master Standby Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",T,[e("div",z,[e("div",G,[e("div",K,[O,e("div",U,o(l(t).name),1)]),e("div",J,[L,e("div",Q,o(l(t).role),1)]),e("div",W,[X,e("div",Z,o(l(t).ktp_no),1)]),e("div",ee,[te,e("div",le,o(l(t).sim_no),1)]),e("div",ae,[se,e("div",oe,o(l(t).bank_name),1)]),e("div",ie,[re,e("div",de,o(l(t).rek_no),1)]),e("div",ne,[ce,e("div",_e,o(l(t).rek_name),1)]),e("div",fe,[ue,e("div",me,o(l(t).phone_number),1)])])]),e("div",pe,[e("div",ve,[we,l(t).val?(f(),u("div",he,[l(t).val?(f(),u("div",xe," App 1 : "+o(l(t).val_by.username)+" ( "+o(l(t).val_at?l(N)(l(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):p("",!0)])):p("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[0]||(s[0]=c=>i.fnClose())}," Cancel "),i.is_view==0?(f(),u("button",{key:0,ref_key:"it_val",ref:h,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[1]||(s[1]=j(c=>S(),["prevent"]))}," Validasi ",512)):p("",!0)])])])],512)),[[I,i.show]])}}},Ae=Y(be,[["__scopeId","data-v-863aec91"]]);export{Ae as default};
