import{g as W,h as Q,r as u,f as V,j as X,i as Z,c as i,b as m,a as e,k as w,A as ee,l as t,m as te,F as se,E as oe,L as T,t as l,n as p,q as ae,x as y,y as M,o as c,d as I,B as le,H as ne,_ as re}from"./entry.06343418.js";import ie from"./Header.c893405f.js";import ce from"./Calendar.8c7b8b82.js";import de from"./CarTag.eaeb07ce.js";import _e from"./TruckDriver.f6314fb8.js";import ue from"./LocationOn.a463b976.js";import{_ as xe}from"./HeaderPopup.vue.c01cff49.js";import{u as fe}from"./useUtils.8655c900.js";import{u as A}from"./useMyFetch.45d0e523.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.f6c113e0.js";const me=le(()=>re(()=>import("./GAPIN.fdadd16c.js"),["./GAPIN.fdadd16c.js","./entry.06343418.js","./entry.c5f8f180.css","./useMyFetch.45d0e523.js"],import.meta.url).then(k=>k.default||k)),pe={class:"w-full h-full flex flex-col relative"},ve={class:"grow flex flex-col"},he={class:"w-full flex items-center p-1"},ye={class:"grow"},ge={class:"grow overflow-auto h-0"},be={class:"p-1 grow"},we={class:"bg-white flex py-2 justify-between"},ke={class:"flex flex-wrap"},De={class:"flex items-center justify-center m-2 text-xs"},Ye={class:"bg-blue-400 p-2 font-bold text-white"},je={class:"flex flex-col m-2"},Te=e("span",{class:"text-xs"}," Tgl Terima Uang ",-1),Me={class:"flex items-center justify-center"},Ae={class:"flex flex-col m-2"},Ce=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Le={class:"flex items-center justify-center"},He=["data-real"],Ne={class:"flex flex-col m-2"},$e=e("span",{class:"text-xs"}," Nama Pekerja ",-1),Pe={class:"flex items-center justify-center"},Ve=["data-real"],Ie={class:"flex flex-col m-2"},Se=e("span",{class:"text-xs"}," Tujuan ",-1),ze={class:"flex items-center justify-center"},Be=["onClick"],Ee={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Fe={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},Ue={class:"p-1 flex flex-wrap overflow-auto items-start"},Ke={class:"w-full flex flex-wrap"},Oe={class:"w-full flex flex-wrap"},qe={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},Re=e("span",{class:"text-xs font-bold"}," ID ",-1),Ge={class:""},Je={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},We=e("span",{class:"text-xs font-bold"}," Tgl Terima Uang ",-1),Qe={class:""},Xe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ze=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),et={class:""},tt={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},st={class:"flex flex-col"},ot=e("span",{class:"text-xs font-bold"}," Nama Pekerja ",-1),at={class:""},lt={class:"flex flex-col pl-2"},nt=e("span",{class:"text-xs font-bold"}," No rek ",-1),rt={class:""},it={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ct=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),dt={class:""},_t={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ut=e("span",{class:"text-xs font-bold"}," Jenis ",-1),xt={class:""},ft={key:0,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},mt=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),pt={class:""},vt={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ht=e("span",{class:"text-xs font-bold"}," Nominal Dibayarkan ",-1),yt={class:""},gt={class:"w-full flex flex-wrap justify-center"},bt={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},wt=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),kt={class:"text-xs"},Dt={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Yt=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),jt={class:"text-xs"},Tt={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Mt=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),At={class:"text-xs"},Ct={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Lt=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),Ht={class:"text-xs"},Nt={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},$t=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),Pt={class:"text-xs"},Vt={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},It=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),St={class:"text-xs"},zt={class:"flex p-1 justify-end flex-wrap"},Bt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},Et=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),es={__name:"transfer",async setup(k){let g,C;const{$moment:x}=ne(),{pointFormat:S}=fe(),D=W("token");new Date().getTimezoneOffset();const{data:z}=([g,C]=Q(async()=>ae(async()=>{y().loading_full=!0;let a=[];const[o,r]=await Promise.all([A("/extra_money_trx/transfers",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},retry:0})]);return o.status.value==="error"?(M().trigger(o.error),{extra_money_trxs:a}):(y().loading_full=!1,a=o.data.value.data,{extra_money_trxs:a})},{lazy:!0,server:!1,default:()=>({extra_money_trxs:[]})},"$0Pi8hCNVwD")),g=await g,C(),g),b=u([]);V(()=>{var a;return(a=z.value)==null?void 0:a.extra_money_trxs},a=>{a&&(b.value=[...a])},{immediate:!0});const Y=u({}),s=u({id:-1,tanggal:new Date,extra_money:{xto:"",tipe:"",jenis:"",amount:0},employee:"",kernet:"",no_pol:"",details_uj:[]}),j=u(-1),f=u(""),B=async a=>{y().loading_full=!0;const{data:o,error:r,status:d}=await A("/extra_money_trx/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:a.id},retry:0});if(y().loading_full=!1,d.value==="error"){M().trigger(r,Y);return}s.value=o.value.data},E=async()=>{y().loading_full=!0,Y.value={};const a=new FormData;a.append("id",s.value.id),a.append("_method","PUT");let o="post";const{data:r,error:d,status:_}=await A("/extra_money_trx/transfer",{method:o,headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,_.value==="error"){M().trigger(d,Y);return}b.value.splice(j.value,1),j.value=-1,h.value=!1,v.value=!1},v=u(!1),F=u(0),h=u(!1);X();const U=(a,o)=>{j.value=a,F.value=o,v.value=!0,B(o)},L=Z(()=>f.value!=""?b.value.filter(a=>a.no_pol.toLowerCase().includes(f.value.toLowerCase())||a.employee.toLowerCase().includes(f.value.toLowerCase())||a.kernet.toLowerCase().includes(f.value.toLowerCase())):b.value),K=()=>{let a=f.value;document.querySelectorAll(".to_hl").forEach(o=>{let r=o.dataset.real;var d=o.innerHTML,_=r==null?void 0:r.toLowerCase().indexOf(a.toLowerCase());_>-1&&a!=""?(d=r.substring(0,_)+"<span class='highlight'>"+r.substring(_,_+a.length)+"</span>"+r.substring(_+a.length),o.innerHTML=d):o.innerHTML=d=r})};V(()=>L,(a,o)=>{setTimeout(()=>{K()},0)},{deep:!0,immediate:!0});const H=u(0);return(a,o)=>{var N;const r=ie,d=ce,_=de,O=_e,q=ue,R=xe,G=me;return c(),i("div",pe,[m(r,{title:"List Transaction"}),e("section",ve,[e("div",he,[e("div",ye,[w(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>te(f)?f.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[ee,t(f)]])])]),e("div",ge,[(c(!0),i(se,null,oe(t(L),(n,J)=>{var $,P;return c(),i("div",be,[e("div",we,[e("div",ke,[e("div",De,[e("div",Ye,l(n.id),1)]),e("div",je,[Te,e("div",Me,[m(d,{class:"mr-1"}),I(" "+l(t(x)(n.tanggal).format("DD-MM-YYYY")),1)])]),e("div",Ae,[Ce,e("div",Le,[m(_,{class:"mr-1"}),e("span",{class:"to_hl","data-real":n.no_pol},l(n.no_pol),9,He)])]),e("div",Ne,[$e,e("div",Pe,[m(O,{class:"mr-1"}),e("span",{class:"to_hl","data-real":($=n.employee)==null?void 0:$.name},l((P=n.employee)==null?void 0:P.name),9,Ve)])]),e("div",Ie,[Se,e("div",ze,[m(q,{class:"mr-1"}),I(" "+l(n.extra_money.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:Ft=>U(J,n)}," Detail ",8,Be)])])}),256))])]),w(e("div",Ee,[e("div",Fe,[m(R,{title:"Detail Information",fn:()=>{v.value=!1,h.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ue,[e("div",Ke,[e("div",Oe,[e("div",qe,[Re,e("div",Ge,l(t(s).id),1)]),e("div",Je,[We,e("div",Qe,l(t(x)(t(s).tanggal).format("DD-MM-YYYY")),1)]),e("div",Xe,[Ze,e("div",et,l(t(s).no_pol),1)]),e("div",tt,[e("div",st,[ot,e("div",at,l((N=t(s).employee)==null?void 0:N.name),1)]),e("div",lt,[nt,e("div",rt,l(t(s).employee_rek_no),1)])]),e("div",it,[ct,e("div",dt,l(t(s).extra_money.xto),1)]),e("div",_t,[ut,e("div",xt,l(t(s).extra_money.jenis),1)]),t(s).extra_money.transition_type=="From"?(c(),i("div",ft,[mt,e("div",pt,l(t(s).extra_money.transition_target),1)])):p("",!0),e("div",vt,[ht,e("div",yt,l(t(S)(t(s).extra_money.total)),1)])]),e("div",gt,[t(s).val?(c(),i("div",bt,[wt,e("div",null," ( "+l(t(s).val_by.username)+" ) ",1),e("div",kt,l(t(x)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val1?(c(),i("div",Dt,[Yt,e("div",null," ( "+l(t(s).val1_by.username)+" ) ",1),e("div",jt,l(t(x)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val2?(c(),i("div",Tt,[Mt,e("div",null," ( "+l(t(s).val2_by.username)+" ) ",1),e("div",At,l(t(x)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val3?(c(),i("div",Ct,[Lt,e("div",null," ( "+l(t(s).val3_by.username)+" ) ",1),e("div",Ht,l(t(x)(t(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val4?(c(),i("div",Nt,[$t,e("div",null," ( "+l(t(s).val4_by.username)+" ) ",1),e("div",Pt,l(t(x)(t(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val5?(c(),i("div",Vt,[It,e("div",null," ( "+l(t(s).val5_by.username)+" ) ",1),e("div",St,l(t(x)(t(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0)])])]),w(e("div",zt,[e("button",{class:"rounded m-1",onClick:o[1]||(o[1]=n=>v.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[2]||(o[2]=n=>h.value=!0)}," Transfer ")],512),[[T,!t(h)]]),w(e("div",Bt,[Et,e("button",{class:"rounded m-1 bg-white",onClick:o[3]||(o[3]=n=>(h.value=!1,v.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[4]||(o[4]=n=>E())}," Ya ")],512),[[T,t(h)]])])],512),[[T,t(v)]]),m(G,{show:t(H),onSetTimeout:o[5]||(o[5]=n=>H.value=n)},null,8,["show"])])}}};export{es as default};
