import{_ as B}from"./HeaderPopup.vue.ed369fc7.js";import{r as m,f as H,j as T,m as S,J as A,o as _,c as i,a as e,b as P,t as o,k as t,l as d,x as O,E as C,A as b,B as k,p as N,e as K}from"./entry.8137c57c.js";import{u as I}from"./useUtils.66646508.js";import{u as g}from"./useMyFetch.05c9822c.js";import{_ as V}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.48d45154.js";const a=n=>(N("data-v-5990cd08"),n=n(),K(),n),$={class:"box-fixed"},q={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},F={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},U={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},E=a(()=>e("label",{for:""},"U.Jalan Per",-1)),z={class:"card-border"},G={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},L=a(()=>e("label",{for:""},"Jenis",-1)),Q={class:"card-border"},R={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=a(()=>e("label",{for:""},"Supir",-1)),X={class:"card-border"},Z={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},tt=a(()=>e("label",{for:""},"Kernet",-1)),et={class:"card-border"},st={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ot=a(()=>e("label",{for:""},"No Pol",-1)),at={class:"card-border"},lt={key:0,class:"w-full flex flex-wrap"},_t={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},it=a(()=>e("label",{for:""},"Tujuan",-1)),dt={class:"card-border"},ct={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},rt=a(()=>e("label",{for:""},"Tipe",-1)),nt={class:"card-border"},ft={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},vt=a(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),wt={class:"card-border"},ut={key:1,class:"w-full p-1"},bt=a(()=>e("label",{for:""},"Peralihan",-1)),pt={class:"card-border"},ht={key:2,class:"w-full flex flex-col flex-wrap p-1"},xt=a(()=>e("label",{for:""},"Tiket A",-1)),mt={class:"card-border"},kt={key:3,class:"w-full flex flex-wrap"},gt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yt=a(()=>e("label",{for:""},"In At",-1)),Dt={class:"card-border disabled"},Mt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yt=a(()=>e("label",{for:""},"Out At",-1)),jt={class:"card-border disabled"},Bt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ht=a(()=>e("label",{for:""},"Bruto",-1)),Tt={class:"card-border disabled"},St={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},At=a(()=>e("label",{for:""},"Tara",-1)),Pt={class:"card-border disabled"},Ot={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ct=a(()=>e("label",{for:""},"Netto",-1)),Nt={class:"card-border disabled"},Kt={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},It=a(()=>e("label",{for:""},"No Pol",-1)),Vt={class:"card-border disabled"},$t={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},qt=a(()=>e("label",{for:""},"Supir",-1)),Ft={class:"card-border disabled"},Jt={key:4,class:"w-full flex flex-col flex-wrap p-1"},Ut=a(()=>e("label",{for:""},"Tiket B",-1)),Et={class:"card-border"},zt={key:5,class:"w-full flex flex-wrap"},Gt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Lt=a(()=>e("label",{for:""},"In At",-1)),Qt={class:"card-border disabled"},Rt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Wt=a(()=>e("label",{for:""},"Out At",-1)),Xt={class:"card-border disabled"},Zt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},te=a(()=>e("label",{for:""},"Bruto ",-1)),ee={class:"card-border disabled"},se={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},oe=a(()=>e("label",{for:""},"Tara ",-1)),ae={class:"card-border disabled"},le={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_e=a(()=>e("label",{for:""},"Netto ",-1)),ie={class:"card-border disabled"},de={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ce=a(()=>e("label",{for:""},"No Pol",-1)),re={class:"card-border disabled"},ne={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},fe=a(()=>e("label",{for:""},"Supir",-1)),ve={class:"card-border disabled"},we={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ue=a(()=>e("label",{for:""},"In At",-1)),be={class:"card-border"},pe={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},he=a(()=>e("label",{for:""},"Out At",-1)),xe={class:"card-border"},me={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ke=a(()=>e("label",{for:""},"Bruto",-1)),ge={class:"card-border"},ye={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},De=a(()=>e("label",{for:""},"Tara",-1)),Me={class:"card-border"},Ye={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},je=a(()=>e("label",{for:""},"Netto",-1)),Be={class:"card-border"},He={class:"w-full flex flex-col flex-wrap p-1"},Te=a(()=>e("label",{for:""},"Note",-1)),Se={class:"card-border"},Ae={class:"w-full grid grid-cols-3 gap-1 p-1"},Pe={class:"border-[1px] border-gray-300 p-1"},Oe=a(()=>e("div",{class:"font-bold text-center"}," Bruto ",-1)),Ce={class:"text-right"},Ne={class:"text-right"},Ke={class:"text-right border-t border-gray-700"},Ie={class:"border-[1px] border-gray-300 p-1"},Ve=a(()=>e("div",{class:"font-bold text-center"}," Tara ",-1)),$e={class:"text-right"},qe={class:"text-right"},Fe={class:"text-right border-t border-gray-700"},Je={class:"border-[1px] border-gray-300 p-1"},Ue=a(()=>e("div",{class:"font-bold text-center"}," Netto ",-1)),Ee={class:"text-right"},ze={class:"text-right"},Ge={class:"text-right border-t border-gray-700"},Le={class:"w-full flex items-center justify-end"},Qe={class:"w-full flex flex-wrap p-3 items-center"},Re=a(()=>e("div",null," Di Validasi oleh : ",-1)),We={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Xe={key:0},Ze={key:1},ts={key:2},es={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(n){const v=n,{$moment:r}=C(),{pointFormat:l}=I(),s=m({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val_ticket:0,val_ticket_by:{username:""},val_ticket_at:""}}),p=H("token"),h=m(null),y=async()=>{b().loading_full=!0;const w=new FormData;let f="post",u=v.id;u==0||(w.append("id",u),w.append("_method","PUT"));const{data:c,error:M,status:Y}=await g("/trx_trp_validasi",{method:f,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:w,retry:0});if(b().loading_full=!1,Y.value==="error"){k().trigger(M);return}s.value.val=c.value.val,s.value.val_user=c.value.val_user,s.value.val_by=c.value.val_by,s.value.val_at=c.value.val_at,s.value.val1=c.value.val1,s.value.val1_user=c.value.val1_user,s.value.val1_by=c.value.val1_by,s.value.val1_at=c.value.val1_at,s.value.val_ticket=c.value.val_ticket,s.value.val_ticket_by=c.value.val_ticket_by,s.value.val_ticket_at=c.value.val_ticket_at;let x=v.p_data.map(j=>j.id).indexOf(v.id);x>=-1&&v.p_data.splice(x,1,{...s.value}),v.fnClose()},D=async()=>{b().loading_full=!0;const{data:w,error:f,status:u}=await g("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{id:v.id},retry:0});if(b().loading_full=!1,u.value==="error"){k().trigger(f);return}s.value=w.value.data};return T(()=>v.show,(w,f)=>{w==!0&&(v.is_view==!1&&setTimeout(()=>{h.value.focus()},1),D())},{immediate:!0}),(w,f)=>{const u=B;return S((_(),i("section",$,[e("div",null,[P(u,{title:"Form Transaction Validation",fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",q,[e("div",F,[e("div",J,[e("div",U,[E,e("div",z,o(t(s).tanggal?t(r)(t(s).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",G,[L,e("div",Q,o(t(s).jenis),1)]),e("div",R,[W,e("div",X,o(t(s).supir),1)]),e("div",Z,[tt,e("div",et,o(t(s).kernet),1)]),e("div",st,[ot,e("div",at,o(t(s).no_pol),1)]),t(s).jenis!=""?(_(),i("div",lt,[e("div",_t,[it,e("div",dt,o(t(s).xto),1)]),e("div",ct,[rt,e("div",nt,o(t(s).tipe),1)]),e("div",ft,[vt,e("div",wt,o(t(l)(t(s).amount||0)),1)])])):d("",!0),t(s).jenis=="TBS"?(_(),i("div",ut,[bt,e("div",pt,o(t(s).transition_target),1)])):d("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(_(),i("div",ht,[xt,e("div",mt,o(t(s).ticket_a_no),1)])):d("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(_(),i("div",kt,[e("div",gt,[yt,e("div",Dt,o(t(s).ticket_a_in_at?t(r)(t(s).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Mt,[Yt,e("div",jt,o(t(s).ticket_a_out_at?t(r)(t(s).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Bt,[Ht,e("div",Tt,o(t(s).ticket_a_bruto?t(l)(t(s).ticket_a_bruto):0),1)]),e("div",St,[At,e("div",Pt,o(t(s).ticket_a_tara?t(l)(t(s).ticket_a_tara):0),1)]),e("div",Ot,[Ct,e("div",Nt,o(t(s).ticket_a_bruto?t(l)(t(s).ticket_a_bruto-t(s).ticket_a_tara):0),1)]),e("div",Kt,[It,e("div",Vt,o(t(s).ticket_a_no_pol),1)]),e("div",$t,[qt,e("div",Ft,o(t(s).ticket_a_supir),1)])])):d("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(_(),i("div",Jt,[Ut,e("div",Et,o(t(s).ticket_b_no),1)])):d("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(_(),i("div",zt,[e("div",Gt,[Lt,e("div",Qt,o(t(s).ticket_b_in_at?t(r)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Rt,[Wt,e("div",Xt,o(t(s).ticket_b_out_at?t(r)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Zt,[te,e("div",ee,o(t(s).ticket_b_bruto?t(l)(t(s).ticket_b_bruto):0),1)]),e("div",se,[oe,e("div",ae,o(t(s).ticket_b_tara?t(l)(t(s).ticket_b_tara):0),1)]),e("div",le,[_e,e("div",ie,o(t(s).ticket_b_bruto?t(l)(t(s).ticket_b_bruto-t(s).ticket_b_tara):0),1)]),e("div",de,[ce,e("div",re,o(t(s).ticket_b_no_pol),1)]),e("div",ne,[fe,e("div",ve,o(t(s).ticket_b_supir),1)])])):d("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(_(),i("div",we,[ue,e("div",be,o(t(s).ticket_b_in_at?t(r)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):d("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(_(),i("div",pe,[he,e("div",xe,o(t(s).ticket_b_out_at?t(r)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):d("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(_(),i("div",me,[ke,e("div",ge,o(t(l)(t(s).ticket_b_bruto||0)),1)])):d("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(_(),i("div",ye,[De,e("div",Me,o(t(l)(t(s).ticket_b_tara||0)),1)])):d("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(_(),i("div",Ye,[je,e("div",Be,o(t(l)(t(s).ticket_b_netto||0)),1)])):d("",!0),e("div",He,[Te,e("div",Se,o(t(s).ticket_note),1)]),e("div",Ae,[e("div",Pe,[Oe,e("div",Ce,o(t(l)(t(s).ticket_a_bruto||0)),1),e("div",Ne,o(t(l)(t(s).ticket_b_bruto||0)),1),e("div",Ke,o(t(l)(t(s).ticket_a_bruto-t(s).ticket_b_bruto||0)),1)]),e("div",Ie,[Ve,e("div",$e,o(t(l)(t(s).ticket_a_tara||0)),1),e("div",qe,o(t(l)(t(s).ticket_b_tara||0)),1),e("div",Fe,o(t(l)(t(s).ticket_a_tara-t(s).ticket_b_tara||0)),1)]),e("div",Je,[Ue,e("div",Ee,o(t(l)(t(s).ticket_a_netto||0)),1),e("div",ze,o(t(l)(t(s).ticket_b_netto||0)),1),e("div",Ge,o(t(l)(t(s).ticket_a_bruto-t(s).ticket_a_tara-(t(s).ticket_b_bruto-t(s).ticket_b_tara)||0)),1)])])])]),e("div",Le,[e("div",Qe,[Re,t(s).val||t(s).val1||t(s).val_ticket?(_(),i("div",We,[t(s).val?(_(),i("div",Xe," App 1 : "+o(t(s).val_by.username)+" ( "+o(t(s).val_at?t(r)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):d("",!0),t(s).val1?(_(),i("div",Ze," App 2 : "+o(t(s).val1_by.username)+" ( "+o(t(s).val1_at?t(r)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):d("",!0),t(s).val_ticket?(_(),i("div",ts," App 3 : "+o(t(s).val_ticket_by.username)+" ( "+o(t(s).val_ticket_at?t(r)(t(s).val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):d("",!0)])):d("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:f[0]||(f[0]=c=>n.fnClose())}," Cancel "),n.is_view==0?(_(),i("button",{key:0,ref_key:"it_val",ref:h,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:f[1]||(f[1]=O(c=>y(),["prevent"]))}," Validasi ",512)):d("",!0)])])])],512)),[[A,n.show]])}}},cs=V(es,[["__scopeId","data-v-5990cd08"]]);export{cs as default};
