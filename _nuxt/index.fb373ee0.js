import _t from"./Header.ecd51a96.js";import mt from"./Plus.bd97e52b.js";import pt from"./Edit.5da8c949.js";import ft from"./Delete.140e9887.js";import vt from"./Signature.e138771a.js";import ht from"./Search.52cd39ae.js";import gt from"./Line.392db885.js";import kt from"./Check.0cb9a1ab.js";import bt from"./TypeIcon.a3eb5bfd.js";import{_ as yt}from"./PopupMini.vue.c4f98b69.js";import xt from"./employee.043bf1e7.js";import wt from"./employee_validasi.f1cab952.js";import{f as Dt,g as $t,r,h as Ct,i as V,s as Mt,j as Tt,c as b,a as t,b as c,m as M,v as z,k as a,n as O,q as K,x as St,F as U,y as At,w as It,z as Nt,A as g,B as H,o as v,C as Bt,D as Y,t as s,d as Ht,p as Lt,e as Et,E as Ft}from"./entry.ee87ecfe.js";import{u as L}from"./useMyFetch.6728ea6f.js";import{_ as jt}from"./_plugin-vue_export-helper.c27b6911.js";import"./DocJPEG.ee512d25.js";import"./DocJPG.52ef4a1d.js";import"./DocPNG.672a1397.js";import"./DocPDF.b7479a87.js";import"./Times.3112f93f.js";import"./Exclamation.83b00ed4.js";import"./HeaderPopup.vue.6db44442.js";import"./client-only.4e3a5bd7.js";import"./AttachmentSingle.6108e33d.js";import"./PDFJsView.508dc8e3.js";import"./useUtils.52d38825.js";const m=y=>(Lt("data-v-155cd827"),y=y(),Et(),y),Pt={class:"w-full h-full flex flex-col"},Rt={class:"w-full flex grow flex-col overflow-auto h-0"},Vt={class:"w-full flex"},zt={action:"#",class:"w-full flex p-1"},Ot={class:"grow"},Kt=m(()=>t("div",{class:"font-bold"}," Keyword ",-1)),Ut={class:"pl-1"},Yt=m(()=>t("div",{class:"font-bold"}," Sort By ",-1)),Jt=m(()=>t("option",{value:""},null,-1)),qt=m(()=>t("option",{value:"name"},"Nama",-1)),Zt=m(()=>t("option",{value:"role"},"Jabatan",-1)),Gt=[Jt,qt,Zt],Qt={class:"pl-1"},Wt=m(()=>t("div",{class:"font-bold"}," Sort Order ",-1)),Xt=m(()=>t("option",{value:"asc"},"Asc",-1)),te=m(()=>t("option",{value:"desc"},"Desc",-1)),ee=[Xt,te],le={class:"flex items-end pl-1"},ae={class:"w-full flex justify-center items-center grow h-0 p-1"},oe={key:0,class:""},se={class:"tacky"},ne=m(()=>t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"App"),t("th",null,"No."),t("th",null,"ID."),t("th",null,"Nama"),t("th",null,"Jabatan"),t("th",null,"No KTP"),t("th",null,"No SIM"),t("th",null,"Nama Bank"),t("th",null,"No Rek"),t("th",null,"Nama Rek"),t("th",null,"Phone Number"),t("th",null,"Tempat Lahir"),t("th",null,"Tanggal Lahir"),t("th",null,"TMK"),t("th",null,"Alamat"),t("th",null,"Status"),t("th",null,"File"),t("th",null,"Tanggal Dibuat"),t("th",null,"Tanggal Diubah")])],-1)),ue=["onClick"],re={class:"w-full h-full flex items-center justify-center"},ie={class:"bold"},de={class:"grow mb-5"},ce={__name:"index",async setup(y){let x,E;const{$moment:w}=Ft(),_={};_._TimeZoneOffset=new Date().getTimezoneOffset();const T=Dt("token"),{data:n}=([x,E]=$t(async()=>Nt(async()=>{g().loading_full=!0;const{data:o,error:l,status:f}=await L("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:_,retry:0});return g().loading_full=!1,f.value==="error"?(H().trigger(l),[]):o.value.data},"$p5jj5crAgd")),x=await x,E(),x),d=r(""),p=r({field:"",by:"desc"}),i=r(-1),u=r({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),J=()=>{_.like="",d.value!=""&&(_.like=`id:%${d.value}%,name:%${d.value}%,ktp_no:%${d.value}%,sim_no:%${d.value}%,phone_number:%${d.value}%,rek_no:%${d.value}%`),_.sort="",p.value.field&&(_.sort=p.value.field+":"+p.value.by)},D=r(null),F=async()=>{g().loading_full=!0,u.value.may_get_data=!1,_.page=u.value.page,_.page==1&&(n.value=[]);const{data:o,error:l,status:f}=await L("/employees",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:_,retry:0});if(g().loading_full=!1,u.value.may_get_data=!0,f.value==="error"){H().trigger(l);return}u.value.page==1?(n.value=o.value.data,D.value&&(D.value.scrollTop=0)):u.value.page>1&&(n.value=[...n.value,...o.value.data]),o.value.data.length==0&&(u.value.is_last_record=!0)},q=async()=>{if(!u.value.may_get_data)return;let o=D.value;if(o.scrollLeft!=u.value.scrollLeft){u.value.scrollLeft=o.scrollLeft;return}u.value.is_last_record||!(Math.round(o.scrollTop)+o.clientHeight>=o.scrollHeight-1)||(u.value.page++,await F())},Z=()=>{u.value.page=1,u.value.is_last_record=!1,J(),F()};Ct();const $=r(!1),S=r(0),G=()=>{S.value=0,$.value=!0},{display:A}=V();Mt(V());const Q=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=n.value[i.value].id,$.value=!0)},I=r(!1),j=r(0),W=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(j.value=n.value[i.value].id,I.value=!0)},N=r(!1),P=r({}),k=r(!1),h=r(""),X=async()=>{k.value&&(k.value=!1)},tt=()=>{i.value==-1?A({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(h.value="",P.value={id:n.value[i.value].id},k.value=!0)};Tt(()=>h.value,o=>{o.trim().length>0?N.value=!0:N.value=!1},{immediate:!1});const et=async()=>{g().loading_full=!0;const o=new FormData;o.append("id",n.value[i.value].id),o.append("deleted_reason",h.value),o.append("_method","DELETE");const{data:l,error:f,status:B}=await L("/employee",{method:"post",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:o,retry:0});if(g().loading_full=!1,B.value==="error"){H().trigger(f);return}n.value.splice(i.value,1),i.value=-1,k.value=!1};return(o,l)=>{const f=_t,B=mt,lt=pt,at=ft,ot=vt,st=ht,nt=gt,ut=kt,rt=bt,it=yt,dt=xt,ct=wt;return v(),b(U,null,[t("div",Pt,[c(f,{title:"List Employee"}),t("div",Rt,[t("div",Vt,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[0]||(l[0]=e=>G())},[c(B)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[1]||(l[1]=e=>Q())},[c(lt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[2]||(l[2]=e=>tt())},[c(at)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[3]||(l[3]=e=>W())},[c(ot)])]),t("form",zt,[t("div",Ot,[Kt,M(t("input",{class:"",type:"text","onUpdate:modelValue":l[4]||(l[4]=e=>O(d)?d.value=e:null),name:"search",placeholder:"Keyword"},null,512),[[z,a(d)]])]),t("div",Ut,[Yt,M(t("select",{class:"","onUpdate:modelValue":l[5]||(l[5]=e=>a(p).field=e)},Gt,512),[[K,a(p).field]])]),t("div",Qt,[Wt,M(t("select",{class:"","onUpdate:modelValue":l[6]||(l[6]=e=>a(p).by=e)},ee,512),[[K,a(p).by]])]),t("div",le,[t("button",{class:"",type:"submit",name:"button",onClick:l[7]||(l[7]=St(e=>Z(),["prevent"]))},[c(st,{class:"text-2xl"})])])]),t("div",ae,[a(n).length==0?(v(),b("div",oe," Maaf Tidak Ada Record ")):(v(),b("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:D,onScroll:q},[t("table",se,[ne,t("tbody",null,[(v(!0),b(U,null,At(a(n),(e,C)=>{var R;return v(),b("tr",{key:C,onClick:_e=>i.value=C,class:Bt(a(i)==C?"active":"")},[t("td",null,[t("div",re,[e.val?(v(),Y(ut,{key:1})):(v(),Y(nt,{key:0}))])]),t("td",null,s(C+1)+".",1),t("td",null,s(e.id),1),t("td",ie,s(e.name),1),t("td",null,s(e.role),1),t("td",null,s(e.ktp_no),1),t("td",null,s(e.sim_no),1),t("td",null,s((R=e.bank)==null?void 0:R.code),1),t("td",null,s(e.rek_no),1),t("td",null,s(e.rek_name),1),t("td",null,s(e.phone_number),1),t("td",null,s(e.birth_date??a(w)(e.birth_date).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(e.birth_place),1),t("td",null,s(e.tmk??a(w)(e.tmk).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(e.address),1),t("td",null,s(e.status),1),t("td",null,[c(rt,{value:e.attachment_1_type},null,8,["value"])]),t("td",null,s(a(w)(e.created_at).format("DD-MM-Y HH:mm:ss")),1),t("td",null,s(a(w)(e.updated_at).format("DD-MM-Y HH:mm:ss")),1)],10,ue)}),128))])])],544))])])]),c(it,{type:"delete",show:a(k),data:a(P),fnClose:X,fnConfirm:et,enabledOk:a(N)},{footer:It(()=>[Ht(" Masukkan Alasan Penghapusan: "),t("div",de,[M(t("textarea",{"onUpdate:modelValue":l[8]||(l[8]=e=>O(h)?h.value=e:null)},null,512),[[z,a(h)]])])]),_:1},8,["show","data","enabledOk"]),c(dt,{show:a($),fnClose:()=>{$.value=!1},id:a(S),p_data:a(n)},null,8,["show","fnClose","id","p_data"]),c(ct,{show:a(I),fnClose:()=>{I.value=!1},id:a(j),p_data:a(n)},null,8,["show","fnClose","id","p_data"])],64)}}},Pe=jt(ce,[["__scopeId","data-v-155cd827"]]);export{Pe as default};
