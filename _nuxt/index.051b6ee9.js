import{_ as Dt}from"./Header.1fe24143.js";import{_ as $t}from"./Plus.db305947.js";import{_ as Tt}from"./Edit.2c476978.js";import{_ as At}from"./Delete.f36331a4.js";import{_ as jt}from"./Signature.2794b5e5.js";import{_ as Mt,u as Ct,a as Bt}from"./useDownload.82e78981.js";import{_ as Ht}from"./Search.a74de324.js";import{_ as St,a as Pt}from"./Check.f6c35021.js";import{_ as Yt}from"./PopupMini.vue.9a27dbd5.js";import{_ as Nt}from"./HeaderPopup.vue.500a487a.js";import{r as d,u as et,g as It,n as z,v as Ft,o as n,c as r,a as t,b as y,t as o,x as e,M as u,z as lt,C as ot,D as m,E as H,p as Vt,e as Ot,K as zt,I as Lt,N as X,O as Ut,s as Et,q as Jt,y as tt,F as Kt,A as Rt,L as qt,B as Zt,T as O,U as Gt}from"./entry.f2f55729.js";import{u as st}from"./useUtils.100f5b4a.js";import{u as C}from"./useMyFetch.ceb8bd97.js";import{_ as Qt}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as Wt}from"./Times.8a479e3f.js";import"./client-only.28312e28.js";import"./InputPointFormat.vue.3fa06a6c.js";const i=$=>(Vt("data-v-22cde9d3"),$=$(),Ot(),$),Xt={class:"box-fixed"},te={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ee={class:"w-full flex flex-col items-center grow overflow-auto"},le={class:"w-full flex flex-row flex-wrap"},oe={class:"w-full flex flex-col flex-wrap p-1"},se=i(()=>t("label",{for:""},"U.Jalan Per",-1)),ae={class:"card-border"},ie={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ne=i(()=>t("label",{for:""},"Jenis",-1)),_e={class:"card-border"},re={key:0,class:"w-full flex pt-5"},ce={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},de=i(()=>t("label",{for:""},"Tujuan",-1)),ue={class:"card-border"},fe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pe=i(()=>t("label",{for:""},"Tipe",-1)),ve={class:"card-border"},me={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},he=i(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),we={class:"card-border"},be={key:1,class:"w-full flex pb-5"},xe={class:"w-full sm:w-8/12 md:w-9/12 lg:w-9/12 flex flex-col flex-wrap p-1"},ke=i(()=>t("label",{for:""},"PV",-1)),ge={class:"card-border"},ye={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},De=i(()=>t("label",{for:""},"Total Dari PV",-1)),$e={class:"card-border"},Te={key:2,class:"w-full flex flex-col flex-wrap p-1"},Ae=i(()=>t("label",{for:""},"Tiket A",-1)),je={class:"card-border"},Me={key:3,class:"w-full flex flex-wrap"},Ce={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Be=i(()=>t("label",{for:""},"Bruto dari Tiket",-1)),He={class:"card-border"},Se={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pe=i(()=>t("label",{for:""},"Tara dari Tiket",-1)),Ye={class:"card-border"},Ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ie=i(()=>t("label",{for:""},"Netto dari Tiket",-1)),Fe={class:"card-border"},Ve={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Oe=i(()=>t("label",{for:""},"Supir",-1)),ze={class:"card-border"},Le={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ue=i(()=>t("label",{for:""},"No Pol",-1)),Ee={class:"card-border"},Je={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ke=i(()=>t("label",{for:""},"In At",-1)),Re={class:"card-border"},qe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ze=i(()=>t("label",{for:""},"Out At",-1)),Ge={class:"card-border"},Qe={key:4,class:"w-full flex flex-col flex-wrap p-1"},We=i(()=>t("label",{for:""},"Tiket B",-1)),Xe={class:"card-border"},tl={key:5,class:"w-full flex flex-wrap"},el={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ll=i(()=>t("label",{for:""},"Bruto dari Tiket",-1)),ol={class:"card-border"},sl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},al=i(()=>t("label",{for:""},"Tara dari Tiket",-1)),il={class:"card-border"},nl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},_l=i(()=>t("label",{for:""},"Netto dari Tiket",-1)),rl={class:"card-border"},cl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},dl=i(()=>t("label",{for:""},"Supir",-1)),ul={class:"card-border"},fl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pl=i(()=>t("label",{for:""},"No Pol",-1)),vl={class:"card-border"},ml={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},hl=i(()=>t("label",{for:""},"In At",-1)),wl={class:"card-border"},bl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},xl=i(()=>t("label",{for:""},"Out At",-1)),kl={class:"card-border"},gl={key:6,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},yl=i(()=>t("label",{for:""},"Bruto",-1)),Dl={class:"card-border"},$l={key:7,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Tl=i(()=>t("label",{for:""},"Tara",-1)),Al={class:"card-border"},jl={key:8,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ml=i(()=>t("label",{for:""},"Netto",-1)),Cl={class:"card-border"},Bl={key:9,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hl=i(()=>t("label",{for:""},"In At",-1)),Sl={class:"card-border"},Pl={key:10,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Yl=i(()=>t("label",{for:""},"Out At",-1)),Nl={class:"card-border"},Il={key:11,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Fl=i(()=>t("label",{for:""},"Supir",-1)),Vl={class:"card-border"},Ol={key:12,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},zl=i(()=>t("label",{for:""},"Kernet",-1)),Ll={class:"card-border"},Ul={key:13,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},El=i(()=>t("label",{for:""},"No Pol",-1)),Jl={class:"card-border"},Kl={class:"w-full flex items-center justify-end"},Rl={class:"w-full flex flex-wrap p-3 items-center"},ql=i(()=>t("div",null," Di Validasi oleh : ",-1)),Zl={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Gl={key:0},Ql={key:1},Wl={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup($){const b=$,{$moment:x}=ot(),{pointFormat:c}=st(),l=d({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),A=et("token"),S=async()=>{m().loading_full=!0;const D=new FormData;let k="post",j=b.id;j==0||(D.append("id",j),D.append("_method","PUT"));const{data:g,error:h,status:M}=await C("/trx_trp_validasi",{method:k,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:D,retry:0});if(m().loading_full=!1,M.value==="error"){H().trigger(h);return}l.value.val=g.value.val,l.value.val_user=g.value.val_user,l.value.val_by=g.value.val_by,l.value.val_at=g.value.val_at,l.value.val1=g.value.val1,l.value.val1_user=g.value.val1_user,l.value.val1_by=g.value.val1_by,l.value.val1_at=g.value.val1_at;let p=b.p_data.map(v=>v.id).indexOf(b.id);p>=-1&&b.p_data.splice(p,1,{...l.value}),b.fnClose()},f=async()=>{m().loading_full=!0;const{data:D,error:k,status:j}=await C("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:b.id},retry:0});if(m().loading_full=!1,j.value==="error"){H().trigger(k);return}l.value=D.value.data};return It(()=>b.show,(D,k)=>{D==!0&&f()},{immediate:!0}),(D,k)=>{const j=Nt;return z((n(),r("section",Xt,[t("div",null,[y(j,{title:"Form Transaction Validation",fn:$.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",te,[t("div",ee,[t("div",le,[t("div",oe,[se,t("div",ae,o(e(l).tanggal?e(x)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",ie,[ne,t("div",_e,o(e(l).jenis),1)]),e(l).jenis!=""?(n(),r("div",re,[t("div",ce,[de,t("div",ue,o(e(l).xto),1)]),t("div",fe,[pe,t("div",ve,o(e(l).tipe),1)]),t("div",me,[he,t("div",we,o(e(c)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis!=""?(n(),r("div",be,[t("div",xe,[ke,t("div",ge,o(e(l).pv_no),1)]),t("div",ye,[De,t("div",$e,o(e(c)(e(l).pv_total||0)),1)])])):u("",!0),e(l).jenis!=""?(n(),r("div",Te,[Ae,t("div",je,o(e(l).ticket_a_no),1)])):u("",!0),e(l).jenis!=""?(n(),r("div",Me,[t("div",Ce,[Be,t("div",He,o(e(c)(e(l).ticket_a_bruto||0)),1)]),t("div",Se,[Pe,t("div",Ye,o(e(c)(e(l).ticket_a_tara||0)),1)]),t("div",Ne,[Ie,t("div",Fe,o(e(c)(e(l).ticket_a_netto||0)),1)]),t("div",Ve,[Oe,t("div",ze,o(e(l).ticket_a_supir),1)]),t("div",Le,[Ue,t("div",Ee,o(e(l).ticket_a_no_pol),1)]),t("div",Je,[Ke,t("div",Re,o(e(l).ticket_a_in_at?e(x)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",qe,[Ze,t("div",Ge,o(e(l).ticket_a_out_at?e(x)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="TBS"?(n(),r("div",Qe,[We,t("div",Xe,o(e(l).ticket_b_no),1)])):u("",!0),e(l).jenis=="TBS"?(n(),r("div",tl,[t("div",el,[ll,t("div",ol,o(e(c)(e(l).ticket_b_bruto||0)),1)]),t("div",sl,[al,t("div",il,o(e(c)(e(l).ticket_b_tara||0)),1)]),t("div",nl,[_l,t("div",rl,o(e(c)(e(l).ticket_b_netto||0)),1)]),t("div",cl,[dl,t("div",ul,o(e(l).ticket_b_supir),1)]),t("div",fl,[pl,t("div",vl,o(e(l).ticket_b_no_pol),1)]),t("div",ml,[hl,t("div",wl,o(e(l).ticket_b_in_at?e(x)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",bl,[xl,t("div",kl,o(e(l).ticket_b_out_at?e(x)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):u("",!0),e(l).jenis=="CPO"?(n(),r("div",gl,[yl,t("div",Dl,o(e(c)(e(l).ticket_b_bruto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(n(),r("div",$l,[Tl,t("div",Al,o(e(c)(e(l).ticket_b_tara||0)),1)])):u("",!0),e(l).jenis=="CPO"?(n(),r("div",jl,[Ml,t("div",Cl,o(e(c)(e(l).ticket_b_netto||0)),1)])):u("",!0),e(l).jenis=="CPO"?(n(),r("div",Bl,[Hl,t("div",Sl,o(e(l).ticket_b_in_at?e(x)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis=="CPO"?(n(),r("div",Pl,[Yl,t("div",Nl,o(e(l).ticket_b_out_at?e(x)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),e(l).jenis!=""?(n(),r("div",Il,[Fl,t("div",Vl,o(e(l).supir),1)])):u("",!0),e(l).jenis!=""?(n(),r("div",Ol,[zl,t("div",Ll,o(e(l).kernet),1)])):u("",!0),e(l).jenis!=""?(n(),r("div",Ul,[El,t("div",Jl,o(e(l).no_pol),1)])):u("",!0)])]),t("div",Kl,[t("div",Rl,[ql,e(l).val||e(l).val1?(n(),r("div",Zl,[e(l).val?(n(),r("div",Gl," App 1 : "+o(e(l).val_by.username)+" ( "+o(e(l).val_at?e(x)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val1?(n(),r("div",Ql," App 2 : "+o(e(l).val1_by.username)+" ( "+o(e(l).val1_at?e(x)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:k[0]||(k[0]=g=>$.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:k[1]||(k[1]=lt(g=>S(),["prevent"]))}," Validasi ")])])])],512)),[[Ft,$.show]])}}},Xl=Qt(Wl,[["__scopeId","data-v-22cde9d3"]]),to={class:"w-full h-full flex flex-col"},eo={class:"w-full flex grow flex-col overflow-auto h-0"},lo={class:"w-full flex"},oo={action:"#",class:"w-full flex p-1"},so={class:"grow"},ao=t("div",{class:"font-bold"}," Keyword ",-1),io={class:"pl-1"},no=t("div",{class:"font-bold"}," Sort By ",-1),_o=Gt('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),ro=[_o],co={class:"pl-1"},uo=t("div",{class:"font-bold"}," Sort Order ",-1),fo=t("option",{value:"asc"},"Asc",-1),po=t("option",{value:"desc"},"Desc",-1),vo=[fo,po],mo={class:"flex items-end pl-1"},ho={class:"w-full flex justify-center items-center grow h-0 p-1"},wo={key:0,class:""},bo={class:"tacky"},xo=t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"App 1"),t("th",null,"App 2"),t("th",null,"ID"),t("th",null,"U.Jalan Per"),t("th",null,"Tujuan"),t("th",null,"Tipe"),t("th",null,"Jenis"),t("th",null,"Amount"),t("th",null,"PV No"),t("th",null,"PV Total"),t("th",null,"Ticket A No"),t("th",null,"Ticket A Bruto"),t("th",null,"Ticket A Tara"),t("th",null,"Ticket A Netto"),t("th",null,"Ticket A Supir"),t("th",null,"Ticket A No Pol"),t("th",null,"Ticket A In At"),t("th",null,"Ticket A Out At"),t("th",null,"Ticket B No"),t("th",null,"Ticket B Bruto"),t("th",null,"Ticket B Tara"),t("th",null,"Ticket B Netto"),t("th",null,"Ticket B Supir"),t("th",null,"Ticket B No Pol"),t("th",null,"Ticket B In At"),t("th",null,"Ticket B Out At"),t("th",null,"Supir"),t("th",null,"Kernet"),t("th",null,"No Pol"),t("th",null,"Created At"),t("th",null,"Updated At")])],-1),ko=["onClick"],go={class:"flex items-center justify-center"},yo={class:"flex items-center justify-center"},Do={class:"bold"},$o={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},To={class:"relative",style:{width:"95%",height:"90%"}},Ao={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},jo=["src"],Ro={__name:"index",async setup($){let b,x;const{$moment:c}=ot(),{pointFormat:T}=st(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="created_at:desc";const A=et("token"),{data:S}=([b,x]=zt(async()=>qt(async()=>{m().loading_full=!0;let _=[],a=[],w=[],B=[];const[P,Y]=await Promise.all([C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},retry:0}),C("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},retry:0})]);return P.status.value!=="error"&&(_=P.data.value.data),P.status.value==="error"?(H().trigger(P.error),{trx_trps:_,list_ujalan:a,list_ticket:w,list_pv:B}):(Y.status.value!=="error"&&(a=Y.data.value.list_ujalan,w=Y.data.value.list_ticket,B=Y.data.value.list_pv),m().loading_full=!1,{trx_trps:_,list_ujalan:a,list_ticket:w,list_pv:B})},"$pFLmKcrKj9")),b=await b,x(),b),f=d(S.value.trx_trps||[]),D=d(S.value.list_ujalan),k=d(S.value.list_ticket),j=d(S.value.list_pv),g=async()=>{m().loading_full=!0;const{data:_,error:a,status:w}=await C("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:l,retry:0});if(m().loading_full=!1,w.value==="error"){H().trigger(a);return}D.value=_.value.list_ujalan,k.value=_.value.list_ticket,j.value=_.value.list_pv},h=d(""),M=d({field:"created_at",by:"desc"}),p=d(-1),v=d({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),at=()=>{l.like="",h.value!=""&&(l.like=`id:%${h.value}%,warehouse_name:%${h.value}%,warehouse_source_name:%${h.value}%,warehouse_target_name:%${h.value}%,item_name:%${h.value}%,status:%${h.value}%,type:%${h.value}%`),l.sort="",M.value.field&&(l.sort=M.value.field+":"+M.value.by)},I=d(null),K=async()=>{m().loading_full=!0,v.value.may_get_data=!1,l.page=v.value.page,l.page==1&&(f.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(f.value[0]));const{data:_,error:a,status:w}=await C("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:l,retry:0});if(m().loading_full=!1,v.value.may_get_data=!0,w.value==="error"){H().trigger(a);return}v.value.page==1?(f.value=_.value.data,I.value&&(I.value.scrollTop=0)):v.value.page>1&&(f.value=[...f.value,..._.value.data]),_.value.data.length==0&&(v.value.is_last_record=!0)},it=async()=>{if(!v.value.may_get_data)return;let _=I.value;if(_.scrollLeft!=v.value.scrollLeft){v.value.scrollLeft=_.scrollLeft;return}v.value.is_last_record||!(Math.round(_.scrollTop)+_.clientHeight>=_.scrollHeight-1)||(v.value.page++,await K())},nt=()=>{v.value.page=1,v.value.is_last_record=!1,at(),K()};Lt();const F=d(!1),L=d(0),_t=()=>{L.value=0,F.value=!0},{display:V}=X();Ut(X());const rt=()=>{p.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(L.value=f.value[p.value].id,F.value=!0)},U=d(!1),R=d(0),ct=()=>{p.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=f.value[p.value].id,U.value=!0)},q=d({}),N=d(!1),dt=async()=>{N.value&&(N.value=!1)},ut=()=>{p.value==-1?V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(q.value={id:f.value[p.value].id},N.value=!0)},ft=async()=>{m().loading_full=!0;const _=new FormData;_.append("id",f.value[p.value].id),_.append("_method","DELETE");const{data:a,error:w,status:B}=await C("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:_,retry:0});if(m().loading_full=!1,B.value==="error"){H().trigger(w);return}f.value.splice(p.value,1),p.value=-1,N.value=!1},{downloadFile:pt,printHtml:vt}=Ct(),E=d(!1),Z=d(""),G=async()=>{if(E.value==!0){E.value=!1;return}if(p.value==-1){V({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}m().loading_full=!0;const{data:_,error:a,status:w}=await C("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:f.value[p.value].id},retry:0});if(m().loading_full=!1,w.value==="error"){H().trigger(a);return}vt(_.value.html,318)},mt=()=>{pt(Z.value)};return(_,a)=>{const w=Dt,B=$t,P=Tt,Y=At,ht=jt,wt=Bt,bt=Ht,Q=St,W=Pt,xt=Yt,kt=Mt,gt=Xl,yt=Wt;return n(),r("div",to,[y(w,{title:"List Transaction"}),t("div",eo,[t("div",lo,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[0]||(a[0]=s=>_t())},[y(B)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=s=>rt())},[y(P)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=s=>ut())},[y(Y)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=s=>ct())},[y(ht)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[4]||(a[4]=s=>G())},[y(wt)])]),t("form",oo,[t("div",so,[ao,z(t("input",{class:"",type:"text","onUpdate:modelValue":a[5]||(a[5]=s=>Jt(h)?h.value=s:null),name:"search",placeholder:"Keyword"},null,512),[[Et,e(h)]])]),t("div",io,[no,z(t("select",{class:"","onUpdate:modelValue":a[6]||(a[6]=s=>e(M).field=s)},ro,512),[[tt,e(M).field]])]),t("div",co,[uo,z(t("select",{class:"","onUpdate:modelValue":a[7]||(a[7]=s=>e(M).by=s)},vo,512),[[tt,e(M).by]])]),t("div",mo,[t("button",{class:"",type:"submit",name:"button",onClick:a[8]||(a[8]=lt(s=>nt(),["prevent"]))},[y(bt,{class:"text-2xl"})])])]),t("div",ho,[e(f).length==0?(n(),r("div",wo," Maaf Tidak Ada Record ")):(n(),r("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:I,onScroll:it},[t("table",bo,[xo,t("tbody",null,[(n(!0),r(Kt,null,Rt(e(f),(s,J)=>(n(),r("tr",{key:J,onClick:Mo=>p.value=J,class:Zt(e(p)==J?"active":"")},[t("td",null,[t("div",go,[s.val?(n(),O(W,{key:1})):(n(),O(Q,{key:0}))])]),t("td",null,[t("div",yo,[s.val1?(n(),O(W,{key:1})):(n(),O(Q,{key:0}))])]),t("td",Do,o(s.id),1),t("td",null,o(s.tanggal?e(c)(s.tanggal).format("DD-MM-Y"):""),1),t("td",null,o(s.xto),1),t("td",null,o(s.tipe),1),t("td",null,o(s.jenis),1),t("td",null,o(e(T)(s.amount)),1),t("td",null,o(s.pv_no),1),t("td",null,o(e(T)(s.pv_total)),1),t("td",null,o(s.ticket_a_no),1),t("td",null,o(e(T)(s.ticket_a_bruto)),1),t("td",null,o(e(T)(s.ticket_a_tara)),1),t("td",null,o(e(T)(s.ticket_a_netto)),1),t("td",null,o(s.ticket_a_supir),1),t("td",null,o(s.ticket_a_no_pol),1),t("td",null,o(s.ticket_a_in_at?e(c)(s.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_a_out_at?e(c)(s.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_no),1),t("td",null,o(e(T)(s.ticket_b_bruto)),1),t("td",null,o(e(T)(s.ticket_b_tara)),1),t("td",null,o(e(T)(s.ticket_b_netto)),1),t("td",null,o(s.ticket_b_supir),1),t("td",null,o(s.ticket_b_no_pol),1),t("td",null,o(s.ticket_b_in_at?e(c)(s.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.ticket_b_out_at?e(c)(s.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.supir),1),t("td",null,o(s.kernet),1),t("td",null,o(s.no_pol),1),t("td",null,o(s.created_at?e(c)(s.created_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,o(s.updated_at?e(c)(s.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,ko))),128))])])],544))])]),y(xt,{type:"delete",show:e(N),data:e(q),fnClose:dt,fnConfirm:ft},null,8,["show","data"]),y(kt,{show:e(F),fnClose:()=>{F.value=!1},fnLoadDBData:g,id:e(L),p_data:e(f),list_ujalan:e(D),list_ticket:e(k),list_pv:e(j)},null,8,["show","fnClose","id","p_data","list_ujalan","list_ticket","list_pv"]),y(gt,{show:e(U),fnClose:()=>{U.value=!1},id:e(R),p_data:e(f)},null,8,["show","fnClose","id","p_data"]),e(E)?(n(),r("div",$o,[t("div",To,[t("div",Ao,[y(yt,{style:{color:"black",cursor:"pointer"},onClick:a[9]||(a[9]=s=>G())})]),t("iframe",{ref:"iframe",width:"100%",height:"100%",src:e(Z).dataBase64},null,8,jo),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:a[10]||(a[10]=s=>mt())})])])):u("",!0)])}}};export{Ro as default};
