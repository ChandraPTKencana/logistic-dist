import{_ as A}from"./HeaderPopup.vue.79d0fe53.js";import{r as v,g as F,i as P,f as T,k as h,K as $,o as b,c as x,a as e,b as D,t as r,l as t,A as N,C as V,n as I,x as u,y as g,p as K,e as M}from"./entry.235ba944.js";import{u as U}from"./useUtils.486c47d3.js";import{u as y}from"./useMyFetch.e52b6e39.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.5e11bd02.js";const d=i=>(K("data-v-6932cf36"),i=i(),M(),i),E={class:"box-fixed"},R={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},H={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},O={class:"w-full sm:w-8/12 md:w-6/12 lg:w-5/12 flex flex-col flex-wrap p-1"},G=d(()=>e("label",{for:""},"To",-1)),L={class:"card-border disabled"},Q={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},W=d(()=>e("label",{for:""},"Jenis",-1)),X={class:"card-border disabled"},Y={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Z=d(()=>e("label",{for:""},"Trip Bonus Supir",-1)),ee={class:"card-border disabled"},se={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},te=d(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),ae={class:"card-border disabled"},oe={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},le=d(()=>e("label",{for:""},"KM Range",-1)),re={class:"card-border disabled"},de={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ie=d(()=>e("label",{for:""},"Asal Peralihan",-1)),ne={class:"card-border disabled"},_e={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ue=d(()=>e("label",{for:""},"Tipe",-1)),ce={class:"card-border disabled"},fe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},pe=d(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),me={class:"card-border disabled"},we={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ve=d(()=>e("label",{for:""},"Batas Persen Susut",-1)),he={class:"w-full"},be={class:"text-red-500"},xe={class:"w-full flex items-center justify-end"},ge={__name:"ujalan_batas_persen_susut",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(i){const o=i,{pointFormat:c}=U(),p={id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,batas_persen_susut:"",tipe:"",jenis:"",harga:0,note_for_remarks:"",transition_from:""},s=v({...p}),m=F("token"),f=v({}),k=async()=>{u().loading_full=!0,f.value={};const l=new FormData;l.append("batas_persen_susut",s.value.batas_persen_susut);let a="post",n=o.is_copy?0:o.id;n==0||(l.append("id",n),l.append("_method","PUT"));const{data:_,error:B,status:C}=await y("/ujalan/batas_persen_susut",{method:a,headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},body:l,retry:0});if(u().loading_full=!1,C.value==="error"){g().trigger(B,f);return}if(n<=0)s.value.id=_.value.id,s.value.created_at=_.value.created_at,s.value.updated_at=_.value.updated_at,o.p_data.unshift(s.value);else{s.value.updated_at=_.value.updated_at;let w=o.p_data.map(q=>q.id).indexOf(n);w>=-1&&o.p_data.splice(w,1,{...s.value})}o.fnClose()},S=P(()=>!1),j=async()=>{u().loading_full=!0;const{data:l,error:a,status:n}=await y("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(u().loading_full=!1,n.value==="error"){g().trigger(a);return}s.value=l.value.data,o.is_copy&&(s.value.val=0,s.value.val1=0)};return T(()=>o.show,(l,a)=>{l==!0&&(s.value={...p},o.id!=0&&j())},{immediate:!0}),(l,a)=>{const n=A;return h((b(),x("section",E,[e("div",null,[D(n,{title:"Form Batas Persen Susut",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",R,[e("div",H,[e("div",J,[e("div",O,[G,e("div",L,r(t(s).xto),1)]),e("div",Q,[W,e("div",X,r(t(s).jenis),1)]),e("div",Y,[Z,e("div",ee,r(t(c)(t(s).bonus_trip_supir||0)),1)]),e("div",se,[te,e("div",ae,r(t(c)(t(s).bonus_trip_kernet||0)),1)]),e("div",oe,[le,e("div",re,r(t(c)(t(s).km_range||0)),1)]),e("div",de,[ie,e("div",ne,r(t(s).transition_from),1)]),e("div",_e,[ue,e("div",ce,r(t(s).tipe),1)]),e("div",fe,[pe,e("div",me,r(t(s).note_for_remarks),1)]),e("div",we,[ve,e("div",he,[h(e("input",{"onUpdate:modelValue":a[0]||(a[0]=_=>t(s).batas_persen_susut=_)},null,512),[[N,t(s).batas_persen_susut]])]),e("p",be,r(t(f).batas_persen_susut),1)])])]),e("div",xe,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[1]||(a[1]=_=>i.fnClose())}," Cancel "),t(S)?I("",!0):(b(),x("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[2]||(a[2]=V(_=>k(),["prevent"]))}," Save "))])])])],512)),[[$,i.show]])}}},qe=z(ge,[["__scopeId","data-v-6932cf36"]]);export{qe as default};
