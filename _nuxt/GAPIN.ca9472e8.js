import{r as a,P as w,g as x,$ as y,o as h,c as g,a as l,d as k,k as T,A as C,l as N,m as I,C as A,n as B,x as d,y as M}from"./entry.01c2230e.js";import{u as P}from"./useMyFetch.f17f669a.js";const S={key:0,class:"flex items-center justify-center absolute top-0 left-0 z-10 p-3 w-full h-full bg-black bg-opacity-80"},V={action:"#",class:"flex items-center max-w-xs w-full relative bg-white border-solid border-gray-600 border-2 p-3 flex-col flex-wrap"},$={class:"w-full"},j={class:"flex w-full justify-between mt-5"},D={__name:"GAPIN",props:{show:{type:Number,required:!0}},emits:["setTimeout"],setup(m,{emit:r}){const i=a(null);w(()=>{setTimeout(()=>{i.value.focus()},1)});const c=a({}),f=x("token"),o=a(""),n=a(0),p=async()=>{d().loading_full=!0,c.value={};const u=new FormData;u.append("pin",o.value);let t="post";const{data:s,error:_,status:b}=await P("/ga_pin",{method:t,headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},body:u,retry:0});if(d().loading_full=!1,b.value==="error"){M().trigger(_,c);return}r("setTimeout",s.value),n.value=s.value,o.value="",v()};let e=null;const v=()=>{e==null&&(e=setInterval(()=>{n.value--,n.value<=0&&(clearInterval(e),e=null,r("setTimeout",0))},1e3))};return y(()=>{clearInterval(e),e=null,r("setTimeout",0)}),(u,t)=>m.show==0?(h(),g("div",S,[l("form",V,[l("div",$,[k(" Enter PIN "),T(l("input",{ref_key:"it_pin",ref:i,type:"text",class:"w-full","onUpdate:modelValue":t[0]||(t[0]=s=>I(o)?o.value=s:null)},null,512),[[C,N(o)]])]),l("div",j,[l("button",{type:"submit",onClick:t[1]||(t[1]=A(s=>p(),["prevent"])),class:"w-full bg-blue-500 border-blue-500 border-solid border-2 p-1 text-white mr-2"}," Submit ")])])])):B("",!0)}},F=D;export{F as default};
