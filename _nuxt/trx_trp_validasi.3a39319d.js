import{_ as O}from"./HeaderPopup.vue.eec85662.js";import{_ as A}from"./WidthMiniPart.vue.85362d55.js";import{r as h,g as B,f as F,k as U,K as q,o as i,c as r,a,b as k,t as s,l as t,n,C as T,G as K,x as b,y as D}from"./entry.01c2230e.js";import{u as M}from"./useUtils.1d2cad7d.js";import{u as N}from"./useMyFetch.f17f669a.js";import"./Times.f39974ac.js";import"./_plugin-vue_export-helper.c27b6911.js";const R={class:"box-fixed"},L={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},z={class:"w-full flex flex-col items-center grow overflow-auto"},E={class:"w-full flex flex-row flex-wrap"},G={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},W=a("label",{for:""},"U.Jalan Per",-1),Q={class:"card-border"},X={class:"w-6/12 sm:w-2/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Z=a("label",{for:""},"Jenis",-1),ee={class:"card-border"},ae={class:"w-6/12 sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},le=a("label",{for:""},"Payment Method",-1),te={class:"card-border"},se={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},oe=a("label",{for:""},"No Pol",-1),_e={class:"card-border"},ve={key:0,class:"w-full flex flex-wrap"},ie={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},re=a("label",{for:""},"Uang Jalan",-1),ne={class:"card-border"},de={class:"w-full sm:w-6/12 flex flex-col flex-wrap p-1"},ue=a("label",{for:""},"Note For Remarks",-1),ce={class:"card-border"},fe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},me=a("label",{for:""},"Supir",-1),pe={class:"card-border"},we={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},xe=a("label",{for:""},"Kernet",-1),he={class:"card-border"},be=a("div",{class:"w-full flex flex-col flex-wrap p-1 bg-yellow-300 font-bold mt-5 text-red-900"}," Informasi Pembayaran ( Harap di baca sebelum melakukan unvalidasi ) ",-1),ye={class:"w-full md:w-4/12 flex flex-wrap"},ke={class:"w-full flex flex-col flex-wrap p-1"},ge=a("label",{for:""},"Sudah dibayarkan ?",-1),Ye={class:"card-border"},De={class:"w-full sm:w-6/12 md:w-4/12 flex flex-wrap flex-col p-1"},Me=a("label",{for:""},"Duitku Supir",-1),Ne={class:"card-border !flex flex-row flex-wrap"},Ie={class:"w-4/12 flex-col"},Ce=a("div",{class:"font-bold"},"ID",-1),He={class:"w-4/12 flex-col pl-1"},Se=a("div",{class:"font-bold"},"Inquery",-1),Pe={class:"w-4/12 flex-col pl-1"},Te=a("div",{class:"font-bold"},"Transfer",-1),je={class:"w-full sm:w-6/12 md:w-4/12 flex flex-wrap flex-col p-1"},$e=a("label",{for:""},"Duitku Kernet",-1),Ve={class:"card-border !flex flex-row flex-wrap"},Je={class:"w-4/12 flex-col"},Oe=a("div",{class:"font-bold"},"ID",-1),Ae={class:"w-4/12 flex-col pl-1"},Be=a("div",{class:"font-bold"},"Inquery",-1),Fe={class:"w-4/12 flex-col pl-1"},Ue=a("div",{class:"font-bold"},"Transfer",-1),qe={class:"w-full sm:w-6/12 md:w-6/12 flex flex-wrap flex-col p-1"},Ke=a("label",{for:""},"Cost Center",-1),Re={class:"card-border !flex flex-row flex-wrap"},Le={class:"w-6/12 flex-col"},ze=a("div",{class:"font-bold"},"Code",-1),Ee={class:"w-6/12 flex-col pl-1"},Ge=a("div",{class:"font-bold"},"Desc",-1),We={class:"w-full sm:w-6/12 md:w-3/12 flex flex-wrap flex-col p-1"},Qe=a("label",{for:""},"PVR",-1),Xe={class:"card-border !flex flex-row flex-wrap"},Ze={class:"w-6/12 flex-col"},ea=a("div",{class:"font-bold"},"No",-1),aa={class:"w-6/12 flex-col pl-1"},la=a("div",{class:"font-bold"},"Total",-1),ta={class:"w-full sm:w-6/12 md:w-3/12 flex flex-wrap flex-col p-1"},sa=a("label",{for:""},"PV",-1),oa={class:"card-border !flex flex-row flex-wrap"},_a={class:"w-6/12 flex-col"},va=a("div",{class:"font-bold"},"No",-1),ia={class:"w-6/12 flex-col pl-1"},ra=a("div",{class:"font-bold"},"Amount",-1),na={class:"w-full flex items-center justify-end"},da={class:"w-full flex flex-wrap p-3 items-center"},ua=a("div",null," Di Validasi oleh : ",-1),ca={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},fa={key:0},ma={key:1},pa={key:2},wa={key:3},xa={key:4},ha={key:5},ba={key:6},ya={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(x){const v=x,{$moment:p}=K(),{pointFormat:y}=M(),e=h({...{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:""}}),g=B("token"),I=h(null),C=h(null),H={_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:-1,name:"",title:"",note:""},d=h(JSON.parse(JSON.stringify(H))),u=h(JSON.parse(JSON.stringify(H))),S={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},asst_opt:{tcon:"IconsPerson",text:"Info",val:""},tipe:{tcon:"",text:"Tipe",val:""},harga:{tcon:"IconsMoney",text:"Amount",val:""}},id:"",name:"",title:"",note:""},P=h(JSON.parse(JSON.stringify(S))),j=async()=>{b().loading_full=!0;const o=new FormData;let _="post",m=v.id;m==0||(o.append("id",m),o.append("_method","PUT"));const{data:l,error:c,status:w}=await N("/trx_trp_validasi",{method:_,headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:o,retry:0});if(b().loading_full=!1,w.value==="error"){D().trigger(c);return}e.value.val=l.value.val,e.value.val_user=l.value.val_user,e.value.val_by=l.value.val_by,e.value.val_at=l.value.val_at,e.value.val1=l.value.val1,e.value.val1_user=l.value.val1_user,e.value.val1_by=l.value.val1_by,e.value.val1_at=l.value.val1_at,e.value.val2=l.value.val2,e.value.val2_user=l.value.val2_user,e.value.val2_by=l.value.val2_by,e.value.val2_at=l.value.val2_at,e.value.val3=l.value.val3,e.value.val3_user=l.value.val3_user,e.value.val3_by=l.value.val3_by,e.value.val3_at=l.value.val3_at,e.value.val4=l.value.val4,e.value.val4_user=l.value.val4_user,e.value.val4_by=l.value.val4_by,e.value.val4_at=l.value.val4_at,e.value.val5=l.value.val5,e.value.val5_user=l.value.val5_user,e.value.val5_by=l.value.val5_by,e.value.val5_at=l.value.val5_at,e.value.val6=l.value.val6,e.value.val6_user=l.value.val6_user,e.value.val6_by=l.value.val6_by,e.value.val6_at=l.value.val6_at;let f=v.p_data.map(Y=>Y.id).indexOf(v.id);f>=-1&&v.p_data.splice(f,1,{...e.value}),v.fnClose()},$=async()=>{b().loading_full=!0;const o=new FormData;let _="post",m=v.id;m==0||(o.append("id",m),o.append("_method","PUT"));const{data:l,error:c,status:w}=await N("/trx_trp_unvalidasi",{method:_,headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},body:o,retry:0});if(b().loading_full=!1,w.value==="error"){D().trigger(c);return}e.value.val=l.value.val,e.value.val_user=l.value.val_user,e.value.val_by=l.value.val_by,e.value.val_at=l.value.val_at,e.value.val1=l.value.val1,e.value.val1_user=l.value.val1_user,e.value.val1_by=l.value.val1_by,e.value.val1_at=l.value.val1_at,e.value.val2=l.value.val2,e.value.val2_user=l.value.val2_user,e.value.val2_by=l.value.val2_by,e.value.val2_at=l.value.val2_at,e.value.val3=l.value.val3,e.value.val3_user=l.value.val3_user,e.value.val3_by=l.value.val3_by,e.value.val3_at=l.value.val3_at,e.value.val4=l.value.val4,e.value.val4_user=l.value.val4_user,e.value.val4_by=l.value.val4_by,e.value.val4_at=l.value.val4_at,e.value.val5=l.value.val5,e.value.val5_user=l.value.val5_user,e.value.val5_by=l.value.val5_by,e.value.val5_at=l.value.val5_at,e.value.val6=l.value.val6,e.value.val6_user=l.value.val6_user,e.value.val6_by=l.value.val6_by,e.value.val6_at=l.value.val6_at;let f=v.p_data.map(Y=>Y.id).indexOf(v.id);f>=-1&&v.p_data.splice(f,1,{...e.value}),v.fnClose()},V=o=>{let _=JSON.parse(JSON.stringify(S));return _._.id.val=o.id,_._.xto.val=o.xto,_._.asst_opt.val=o.asst_opt,_._.tipe.val=o.tipe,_._.harga.val=y(o.harga),_.id=o.id,_.name=o.xto,_.title=(o.asst_opt||"")+" "+(o.tipe||"")+" "+(y(o.harga)||""),_._raw=o,_},J=async()=>{b().loading_full=!0;const{data:o,error:_,status:m}=await N("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${g.value}`,Accept:"application/json"},params:{id:v.id},retry:0});if(b().loading_full=!1,m.value==="error"){D().trigger(_);return}let l=o.value.data;e.value=l,d.value._.id.val=l.supir_id,d.value._.name.val=l.supir,d.value._.rek_no.val=l.supir_rek_no,d.value._.rek_name.val=l.supir_rek_name,d.value.id=l.supir_id,d.value.name=l.supir,d.value.rek_no=(l.supir_rek_no||"")+" "+(l.supir_rek_name||""),u.value._.id.val=l.kernet_id,u.value._.name.val=l.kernet,u.value._.rek_no.val=l.kernet_rek_no,u.value._.rek_name.val=l.kernet_rek_name,u.value.id=l.kernet_id,u.value.name=l.kernet,u.value.rek_no=(l.kernet_rek_no||"")+" "+(l.kernet_rek_name||""),P.value=V(l.uj);let c=0,w=0;l.potongan.forEach(f=>{f.potongan_mst.employee_id==l.supir_id&&(c+=parseInt(f.nominal_cut)),f.potongan_mst.employee_id==l.kernet_id&&(w+=parseInt(f.nominal_cut))}),d.value.note="",u.value.note="",c>0&&(d.value.note="Telah di potong sebesar :"+M().pointFormat(c)),w>0&&(u.value.note="Telah di potong sebesar :"+M().pointFormat(w))};return F(()=>v.show,(o,_)=>{o==!0&&(v.it_state==1&&setTimeout(()=>{I.value.focus()},1),v.it_state==0&&setTimeout(()=>{C.value.focus()},1),J())},{immediate:!0}),(o,_)=>{const m=O,l=A;return U((i(),r("section",R,[a("div",null,[k(m,{title:"Form Transaction Validation",fn:x.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),a("form",L,[a("div",z,[a("div",E,[a("div",G,[W,a("div",Q,s(t(e).tanggal?t(p)(t(e).tanggal).format("DD-MM-YYYY"):""),1)]),a("div",X,[Z,a("div",ee,s(t(e).jenis),1)]),a("div",ae,[le,a("div",te,s(t(e).payment_method.name),1)]),a("div",se,[oe,a("div",_e,s(t(e).no_pol),1)]),t(e).jenis!=""?(i(),r("div",ve,[a("div",ie,[re,a("div",ne,[k(l,{selected:t(P)},null,8,["selected"])])]),a("div",de,[ue,a("div",ce,s(t(e).note_for_remarks),1)])])):n("",!0),a("div",fe,[me,a("div",pe,[k(l,{selected:t(d)},null,8,["selected"])])]),a("div",we,[xe,a("div",he,[k(l,{selected:t(u)},null,8,["selected"])])]),be,a("div",ye,[a("div",ke,[ge,a("div",Ye,s(t(e).received_payment?"Ya":"Tidak"),1)])]),a("div",De,[Me,a("div",Ne,[a("div",Ie,[Ce,a("div",null,s(t(e).duitku_supir_disburseId),1)]),a("div",He,[Se,a("div",null,s(t(e).duitku_supir_inv_res_desc),1)]),a("div",Pe,[Te,a("div",null,s(t(e).duitku_supir_trf_res_desc),1)])])]),a("div",je,[$e,a("div",Ve,[a("div",Je,[Oe,a("div",null,s(t(e).duitku_kernet_disburseId),1)]),a("div",Ae,[Be,a("div",null,s(t(e).duitku_kernet_inv_res_desc),1)]),a("div",Fe,[Ue,a("div",null,s(t(e).duitku_kernet_trf_res_desc),1)])])]),a("div",qe,[Ke,a("div",Re,[a("div",Le,[ze,a("div",null,s(t(e).cost_center_code),1)]),a("div",Ee,[Ge,a("div",null,s(t(e).cost_center_desc),1)])])]),a("div",We,[Qe,a("div",Xe,[a("div",Ze,[ea,a("div",null,s(t(e).pvr_no),1)]),a("div",aa,[la,a("div",null,s(t(y)(t(e).pvr_total||0)),1)])])]),a("div",ta,[sa,a("div",oa,[a("div",_a,[va,a("div",null,s(t(e).pv_no),1)]),a("div",ia,[ra,a("div",null,s(t(y)(t(e).pv_total||0)),1)])])])])]),a("div",na,[a("div",da,[ua,t(e).val||t(e).val1||t(e).val2||t(e).val3||t(e).val4||t(e).val5||t(e).val6?(i(),r("div",ca,[t(e).val?(i(),r("div",fa," Kasir : "+s(t(e).val_by.username)+" ( "+s(t(e).val_at?t(p)(t(e).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val1?(i(),r("div",ma," Mandor : "+s(t(e).val1_by.username)+" ( "+s(t(e).val1_at?t(p)(t(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val2?(i(),r("div",pa," KTU/W : "+s(t(e).val2_by.username)+" ( "+s(t(e).val2_at?t(p)(t(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val3?(i(),r("div",wa," Marketing : "+s(t(e).val3_by.username)+" ( "+s(t(e).val3_at?t(p)(t(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val4?(i(),r("div",xa," Logistik : "+s(t(e).val4_by.username)+" ( "+s(t(e).val4_at?t(p)(t(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val5?(i(),r("div",ha," SPV Logistik : "+s(t(e).val5_by.username)+" ( "+s(t(e).val5_at?t(p)(t(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0),t(e).val6?(i(),r("div",ba," MGR Logistik : "+s(t(e).val6_by.username)+" ( "+s(t(e).val6_at?t(p)(t(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):n("",!0)])):n("",!0)]),a("button",{type:"button",name:"button",class:"w-36 m-1",onClick:_[0]||(_[0]=c=>x.fnClose())}," Cancel "),x.it_state==1?(i(),r("button",{key:0,ref_key:"it_val",ref:I,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:_[1]||(_[1]=T(c=>j(),["prevent"]))}," Validasi ",512)):n("",!0),x.it_state==0?(i(),r("button",{key:1,ref_key:"it_unval",ref:C,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:_[2]||(_[2]=T(c=>$(),["prevent"]))}," Unvalidasi ",512)):n("",!0)])])])],512)),[[q,x.show]])}}},Ha=ya;export{Ha as default};
