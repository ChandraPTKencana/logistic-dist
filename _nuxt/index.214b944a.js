import{r as d,f as W,g as ht,h as wt,i as A,j as Dt,x as _,c as x,b as c,a as f,k as ve,v as Pt,l as s,m as ce,n as g,d as b,t as w,G as At,w as m,q as Ct,y as C,o as i,z as h,A as je,B as K,I as $t,H as Tt,_ as Y}from"./entry.72ad639a.js";import jt from"./Header.a5dfa56e.js";import Ot from"./Plus.ec76ee5a.js";import St from"./Eyes.069883bb.js";import qt from"./Delete.61a07c9b.js";import It from"./Void.fb06057c.js";import Et from"./Signature.79274b58.js";import Ut from"./SignatureOff.a7aa571d.js";import Ft from"./PrinterEye.a6a47a4f.js";import Mt from"./QrCode.191fb525.js";import zt from"./Table2Column.b8766c31.js";import Nt from"./Chain.cdca3b02.js";import Bt from"./Image.36e848c0.js";import Rt from"./Line.00ab0e16.js";import Vt from"./Check.68bf0e88.js";import Lt from"./TableView.4340bbdf.js";import{u as y}from"./useUtils.f50d732b.js";import{u as $}from"./useMyFetch.f486e350.js";import{u as Oe}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Search.0d07bba4.js";import"./Adjust.02dddada.js";import"./TableHeaderEye.4e02d038.js";import"./Times.55fb13ee.js";import"./ClearAll.9945a344.js";import"./client-only.e68ff8ea.js";import"./ClearEach.f26c61b1.js";import"./CaretLeftDoubleBold.3972a995.js";import"./CaretLeftBold.390626c4.js";import"./CaretRightBold.fbf5811c.js";import"./CaretRightDoubleBold.444441f9.js";const Kt=K(()=>Y(()=>import("./PopupMini.8ad996f4.js"),["./PopupMini.8ad996f4.js","./PopupMini.vue.fa758ae1.js","./Times.55fb13ee.js","./_plugin-vue_export-helper.c27b6911.js","./entry.72ad639a.js","./entry.d3e41f65.css","./Exclamation.5525942b.js"],import.meta.url).then(D=>D.default||D)),Yt=K(()=>Y(()=>import("./trx_trp.9a0d6d29.js"),["./trx_trp.9a0d6d29.js","./HeaderPopup.vue.2a23fcec.js","./Times.55fb13ee.js","./_plugin-vue_export-helper.c27b6911.js","./entry.72ad639a.js","./entry.d3e41f65.css","./client-only.e68ff8ea.js","./WidthMiniList.vue.dc56bd2b.js","./WidthMiniPart.vue.732c9331.js","./useUtils.f50d732b.js","./useMyFetch.f486e350.js"],import.meta.url).then(D=>D.default||D)),Ht=K(()=>Y(()=>import("./trx_trp_validasi.f5ec057a.js"),["./trx_trp_validasi.f5ec057a.js","./HeaderPopup.vue.2a23fcec.js","./Times.55fb13ee.js","./_plugin-vue_export-helper.c27b6911.js","./entry.72ad639a.js","./entry.d3e41f65.css","./WidthMiniPart.vue.732c9331.js","./CaretTop.d10d9b30.js","./CaretDown.e5303cc3.js","./useUtils.f50d732b.js","./useMyFetch.f486e350.js"],import.meta.url).then(D=>D.default||D)),Jt=K(()=>Y(()=>import("./trx_absen.d89754b4.js"),["./trx_absen.d89754b4.js","./HeaderPopup.vue.2a23fcec.js","./Times.55fb13ee.js","./_plugin-vue_export-helper.c27b6911.js","./entry.72ad639a.js","./entry.d3e41f65.css","./Check.68bf0e88.js","./PopupMini.vue.fa758ae1.js","./Exclamation.5525942b.js","./useUtils.f50d732b.js","./useMyFetch.f486e350.js"],import.meta.url).then(D=>D.default||D)),Gt=K(()=>Y(()=>import("./trx_trp_full.fd1bd637.js"),["./trx_trp_full.fd1bd637.js","./HeaderPopup.vue.2a23fcec.js","./Times.55fb13ee.js","./_plugin-vue_export-helper.c27b6911.js","./entry.72ad639a.js","./entry.d3e41f65.css","./uj.4d35c25c.js","./ClockAnalog.f36a22a3.js","./Calendar.f85f59b8.js","./Truck.b661cbd3.js","./LocationOn.ed446b56.js","./TruckDriver.971b15b1.js","./useUtils.f50d732b.js","./useMyFetch.f486e350.js","./emt.5ede3a33.js","./Person.5b09d1db.js","./AttachmentSingleV1.f89245a2.js","./AttachmentSingleV1.1c5a519c.css","./CaretTop.d10d9b30.js","./CaretDown.e5303cc3.js"],import.meta.url).then(D=>D.default||D)),Wt={class:"w-full h-full flex flex-col"},Qt={class:"w-full flex grow flex-col overflow-auto h-0"},Zt={class:"w-full flex justify-between flex-wrap"},Xt={class:"grow flex flex-wrap"},ea={class:"m-1"},ta=$t('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),aa=[ta],la=f("span",{class:"text-xs ml-1"}," Download ",-1),ra=f("span",{class:"text-xs ml-1"}," With UJ ",-1),na={class:"flex"},oa={class:"m-1 p-1 border-2 border-gray-600 whitespace-nowrap flex flex-col"},sa=f("span",{class:"w-full text-[10px] -mt-[3px]"}," No Paid ",-1),ia={class:"w-full text-xs font-bold -mt-1"},ua={class:"m-1 p-1 border-2 border-blue-600 text-blue-600 whitespace-nowrap flex flex-col"},_a=f("span",{class:"w-full text-[10px] -mt-[3px]"}," All Total ",-1),da={class:"w-full text-xs font-bold -mt-1"},pa=f("span",{class:"text-xs"},"Mode",-1),va={key:0},ca={class:"w-full flex flex-col items-center justify-center"},ma={key:2,class:"text-xs"},fa={key:0},ya={key:0},ka={class:"grow mb-5"},ba=f("b",{class:"text-red-500"},"divalidasi",-1),xa=f("b",null,"tidak dapat dibatalkan lagi",-1),ga={class:"grow mb-5"},el={__name:"index",async setup(D){let H,me;const{$moment:Q}=Tt(),{pointFormat:Z}=y();let fe=d({clearCheckBox:!1});const X=t=>t.deleted==1?"!bg-red-400":t.pvr_id>0&&t.req_deleted==1?"!bg-yellow-300":t.absen_not_done&&t.absen_not_done.length>0?"!bg-gray-300":t.pv_id>0?"!bg-blue-300":"",ee=t=>(t.map(e=>{e.class_h=X(e)}),t),O=d("pv_not_done");W(()=>O.value,t=>{Ae.value.map(e=>{let u=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(e.key)>-1;return["all","deleted","req_deleted"].indexOf(t)>-1?u&&(e.tbl_show=1):u&&(e.tbl_show=0),e}),xe()},{immediate:!1});const k={};k._TimeZoneOffset=new Date().getTimezoneOffset(),k.sort="tanggal:desc";const ye=d({}),J=d({from:"",to:""}),P=ht("token"),{data:Se}=([H,me]=wt(async()=>Ct(async()=>{_().loading_full=!0;let t=[];const[e,u]=await Promise.all([$("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{filter_status:O},retry:0})]);return e.status.value!=="error"&&(t=ee(e.data.value.data)),e.status.value==="error"?(C().trigger(e.error),{trx_trps:t}):(_().loading_full=!1,{trx_trps:t})},{lazy:!0,server:!1,default:()=>({trx_trps:[]})},"$pFLmKcrKj9")),H=await H,me(),H),o=d([]);W(()=>{var t;return(t=Se.value)==null?void 0:t.trx_trps},t=>{t&&(o.value=[...t])},{immediate:!0});const ke=d([]),U=d(!1),qe=async()=>{_().loading_full=!0;const{data:t,error:e,status:u}=await $("/trx_load_cost_center",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{online_status:U.value},retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}ke.value=t.value.list_cost_center},te=d({field:"tanggal",by:"desc"}),r=d(-1),p=A(()=>o.value[r.value]),q=d({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),ae=()=>{k.like="";let t=JSON.parse(JSON.stringify(_()._tv.global_keyword));t!=""&&(k.like=`id:%${t}%,xto:%${t}%,jenis:%${t}%,pv_no:%${t}%,ticket_a_no:%${t}%,ticket_b_no:%${t}%,no_pol:%${t}%,supir:%${t}%,kernet:%${t}%,cost_center_code:%${t}%,cost_center_desc:%${t}%,pvr_no:%${t}%,tanggal:%${t}%,transition_target:%${t}%,uj_asst_opt:%${t}%`),k.sort="",te.value.field&&(k.sort=te.value.field+":"+te.value.by),k.date_from=J.value.from?Q(J.value.from).format("YYYY-MM-DD"):"",k.date_to=J.value.to?Q(J.value.to).format("YYYY-MM-DD"):"",k.filter_model=JSON.stringify(_()._tv.filter_model)},be=async()=>{_().loading_full=!0,ye.value={},q.value.may_get_data=!1,k.page=q.value.page,k.page==1&&(o.value=[]),k.first_row&&delete k.first_row,k.page>1&&(k.first_row=JSON.stringify(o.value[0])),k.filter_status=O.value;const{data:t,error:e,status:u}=await $("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(_().loading_full=!1,q.value.may_get_data=!0,u.value==="error"){C().trigger(e,ye);return}q.value.page==1?o.value=ee(t.value.data):q.value.page>1&&(o.value=[...o.value,...ee(t.value.data)]),t.value.data.length==0&&(q.value.is_last_record=!0),_()._tv.filter_box=!1},xe=()=>{r.value=-1,q.value.page=1,q.value.is_last_record=!1,ae(),be()},z=d(1),ge=d(1),le=d(!1),he=d(0),Ie=()=>{he.value=0,z.value=-1,le.value=!0},{display:j}=Dt(),N=d(!1),B=d(0),Ee=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=o.value[r.value].id,z.value=1,N.value=!0)},re=d(!1),ne=d(0),Ue=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ne.value=o.value[r.value].id,ge.value=1,re.value=!0)},Fe=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=o.value[r.value].id,z.value=0,N.value=!0)},Me=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=o.value[r.value].id,z.value=-1,N.value=!0)},oe=d(!1),we=d(0),ze=t=>{we.value=t,oe.value=!0},se=d(!1),De=d({}),R=d(!1),F=d(""),Ne=async()=>{R.value&&(R.value=!1)},Be=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value="",De.value={id:o.value[r.value].id,"no pol":o.value[r.value].no_pol,tujuan:o.value[r.value].xto},R.value=!0)};W(()=>F.value,t=>{t.trim().length>0?se.value=!0:se.value=!1},{immediate:!1});const Re=async()=>{_().loading_full=!0;const t=new FormData;t.append("id",o.value[r.value].id),t.append("deleted_reason",F.value),t.append("_method","DELETE");const{data:e,error:u,status:S}=await $("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(u);return}let l={...o.value[r.value]};l.deleted=e.value.deleted,l.deleted_user=e.value.deleted_user,l.deleted_at=e.value.deleted_at,l.deleted_by=e.value.deleted_by,l.deleted_reason=e.value.deleted_reason,l.class_h=X(l),O.value!="all"?o.value.splice(r.value,1):o.value.splice(r.value,1,{...l}),r.value=-1,R.value=!1},ie=d(!1),Pe=d({}),V=d(!1),M=d(""),Ve=async()=>{V.value&&(V.value=!1)},Le=()=>{r.value==-1?j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value="",Pe.value={id:o.value[r.value].id,"no pol":o.value[r.value].no_pol,tujuan:o.value[r.value].xto},V.value=!0)};W(()=>M.value,t=>{t.trim().length>0?ie.value=!0:ie.value=!1},{immediate:!1});const Ke=async()=>{_().loading_full=!0;const t=new FormData;t.append("id",o.value[r.value].id),t.append("req_deleted_reason",M.value),t.append("_method","DELETE");const{data:e,error:u,status:S}=await $("/trx_trp_req_delete",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(u);return}let l={...o.value[r.value]};l.req_deleted=e.value.req_deleted,l.req_deleted_user=e.value.req_deleted_user,l.req_deleted_by=e.value.req_deleted_by,l.req_deleted_at=e.value.req_deleted_at,l.req_deleted_reason=e.value.req_deleted_reason,l.class_h=X(l),O.value!="all"?o.value.splice(r.value,1):o.value.splice(r.value,1,{...l}),r.value=-1,V.value=!1},ue=d([]),G=d(!1),Ye=async()=>{_().loading_full=!0;const t=new FormData;t.append("ids",JSON.stringify(ue.value)),t.append("_method","PUT");const{data:e,error:u,status:S}=await $("/trx_trp_validasis",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(u);return}G.value=!1,e.value.val_lists.forEach(l=>{let T=o.value.map(n=>n.id).indexOf(l.id);if(T>-1){let n=o.value[T];n.val=l.val,n.val_by=l.val_by,n.val_at=l.val_at,n.val1=l.val1,n.val1_by=l.val1_by,n.val1_at=l.val1_at,n.val2=l.val2,n.val2_by=l.val2_by,n.val2_at=l.val2_at,n.val3=l.val3,n.val3_by=l.val3_by,n.val3_at=l.val3_at,n.val4=l.val4,n.val4_by=l.val4_by,n.val4_at=l.val4_at,n.val5=l.val5,n.val5_by=l.val5_by,n.val5_at=l.val5_at,n.val6=l.val6,n.val6_by=l.val6_by,n.val6_at=l.val6_at,n.updated_at=l.updated_at,o.value.splice(T,1,{...n})}}),fe.value.clearCheckBox=!0},{printHtml:_e}=Oe(),He=async()=>{if(r.value==-1){j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:t,error:e,status:u}=await $("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:o.value[r.value].id},retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}_e(t.value.html,318)},Je=async()=>{if(r.value==-1){j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:t,error:e,status:u}=await $("/trx_trp_preview_file_qr",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:o.value[r.value].id},retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}_e(t.value.html,318)},Ge=async()=>{if(r.value==-1){j({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:t,error:e,status:u}=await $("/trx_trp_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:o.value[r.value].id},retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}_e(t.value.html,318)},We=async()=>{_().loading_full=!0;const t=new FormData;t.append("online_status",U.value);const{data:e,error:u,status:S}=await $("/trx_trp_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(u);return}e.value.forEach(l=>{let T=o.value.map(n=>n.id).indexOf(l.id);if(T!==-1){let n=o.value[T];n.pvr_id=l.pvr_id,n.pvr_no=l.pvr_no,n.pvr_total=l.pvr_total,n.pvr_had_detail=l.pvr_had_detail,n.updated_at=l.updated_at,o.value.splice(T,1,{...n})}}),j({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},Qe=async()=>{_().loading_full=!0;const t=new FormData;t.append("online_status",U.value);const{data:e,error:u,status:S}=await $("/trx_trp_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(u);return}e.value.forEach(l=>{let T=o.value.map(n=>n.id).indexOf(l.id);if(T!==-1){let n=o.value[T];n.pv_id=l.pv_id,n.pv_no=l.pv_no,n.pv_total=l.pv_total,n.pv_datetime=l.pv_datetime,n.pv_complete=l.pv_complete,n.updated_at=l.updated_at,o.value.splice(T,1,{...n})}}),j({show:!0,status:"Success",message:"Generate Or Update PV Done"})},Ze=async()=>{_().loading_full=!0;const{data:t,error:e,status:u}=await $("/trx_trp/link_to_extramoney_trx",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}j({show:!0,status:"Success",message:t.value.message})},Ae=d([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"uj_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"uj_tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"string"},{key:"uj_harga",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:_().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"received_payment",label:"Sudah Dibayarkan?",type:"string"},{key:"duitku_supir_disburseId",label:"ID Duitku Supir",type:"string"},{key:"duitku_supir_inv_res_desc",label:"Ket Inquery Duitku Supir",type:"string"},{key:"duitku_supir_trf_res_desc",label:"Ket Pengiriman Duitku Supir",type:"string"},{key:"duitku_kernet_disburseId",label:"ID Duitku Kernet",type:"string"},{key:"duitku_kernet_inv_res_desc",label:"Ket Inquery Duitku Kernet",type:"string"},{key:"duitku_kernet_trf_res_desc",label:"Ket Pengiriman Duitku Kernet",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Xe=A(()=>["pv_not_done","all"].indexOf(O.value)>-1&&y().checkPermission("trp_trx.create")),et=A(()=>r.value>-1&&y().checkPermission("trp_trx.view")),tt=A(()=>r.value>-1&&y().checkPermission("trp_trx.ticket.views"));A(()=>r.value>-1&&[void 0,0].indexOf(p.value.deleted)>-1&&[void 0,0].indexOf(p.value.req_deleted)>-1&&[void 0,0].indexOf(p.value.val4)>-1&&[void 0,""].indexOf(p.value.pvr_id)>-1&&y().checkPermission("trp_trx.modify"));const at=A(()=>r.value>-1&&[void 0,0].indexOf(p.value.deleted)>-1&&[void 0,0].indexOf(p.value.req_deleted)>-1&&([void 0,""].indexOf(p.value.pvr_id)>-1&&y().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2"])||p.value.val3==0&&y().checkPermissions(["trp_trx.val3"])||p.value.val4==0&&y().checkPermissions(["trp_trx.val4"])||p.value.val5==0&&y().checkPermissions(["trp_trx.val5"])||p.value.val6==0&&y().checkPermissions(["trp_trx.val6"]))),lt=A(()=>r.value>-1&&[void 0,0].indexOf(p.value.deleted)>-1&&[void 0,0].indexOf(p.value.req_deleted)>-1&&(p.value.val1==1&&y().checkPermissions(["trp_trx.unval1"])||p.value.val2==1&&y().checkPermissions(["trp_trx.unval2"])||p.value.val3==1&&y().checkPermissions(["trp_trx.unval3"])||p.value.val4==1&&y().checkPermissions(["trp_trx.unval4"])||p.value.val5==1&&y().checkPermissions(["trp_trx.unval5"])||p.value.val6==1&&y().checkPermissions(["trp_trx.unval6"]))),rt=A(()=>r.value>-1&&[void 0,0].indexOf(p.value.deleted)>-1&&[void 0,0].indexOf(p.value.req_deleted)>-1&&[void 0,""].indexOf(p.value.pvr_id)>-1&&y().checkPermission("trp_trx.remove")),nt=A(()=>r.value>-1&&[void 0,0].indexOf(p.value.deleted)>-1&&[void 0,0].indexOf(p.value.req_deleted)>-1&&p.value.pvr_id!=""&&y().checkPermission("trp_trx.request_remove")),ot=A(()=>r.value>-1&&p.value.val==1&&y().checkPermission("trp_trx.preview_file")),st=A(()=>r.value>-1&&p.value.val==1&&y().checkPermission("trp_trx.preview_file")),it=A(()=>r.value>-1&&p.value.payment_method_id==2&&p.value.received_payment==1&&y().checkPermission("trp_trx.preview_file")),{downloadFile:Ce,viewFile:ha}=Oe(),ut=async()=>{ae(),_().loading_full=!0,k.filter_status=O.value;const{data:t,error:e,status:u}=await $("/trx_trp/report_raw_excel",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}Ce(t.value)},_t=async()=>{ae(),_().loading_full=!0,k.filter_status=O.value;const{data:t,error:e,status:u}=await $("/trx_trp/report_excel_w_uj",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(_().loading_full=!1,u.value==="error"){C().trigger(e);return}Ce(t.value)},dt=A(()=>o.value.filter(e=>e.received_payment==0).reduce((e,u)=>e+parseFloat(u.uj.harga),0)),pt=A(()=>o.value.reduce((t,e)=>t+parseFloat(e.uj.harga),0));return(t,e)=>{const u=jt,S=Ot,l=St,T=qt,n=It,L=Et,vt=Ut,$e=Ft,ct=Mt,Te=zt,mt=Nt,ft=Bt,I=Rt,E=Vt,yt=Lt,de=Kt,kt=Yt,bt=Ht,xt=Jt,gt=Gt;return i(),x("div",Wt,[c(u,{title:"List Transaction"}),f("div",Qt,[f("div",Zt,[f("div",Xt,[f("div",ea,[ve(f("select",{class:"","onUpdate:modelValue":e[0]||(e[0]=a=>ce(O)?O.value=a:null)},aa,512),[[Pt,s(O)]])]),Xe.value?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[1]||(e[1]=a=>Ie())},[c(S)])):g("",!0),et.value?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[2]||(e[2]=a=>Me())},[c(l)])):g("",!0),rt.value?(i(),x("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[3]||(e[3]=a=>Be())},[c(T)])):g("",!0),nt.value?(i(),x("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[4]||(e[4]=a=>Le())},[c(n)])):g("",!0),at.value?(i(),x("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[5]||(e[5]=a=>Ee())},[c(L)])):g("",!0),lt.value?(i(),x("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[6]||(e[6]=a=>Fe())},[c(vt)])):g("",!0),tt.value?(i(),x("button",{key:6,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:e[7]||(e[7]=a=>Ue())},[c(l)])):g("",!0),ot.value?(i(),x("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[8]||(e[8]=a=>He())},[c($e)])):g("",!0),st.value?(i(),x("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[9]||(e[9]=a=>Je())},[c(ct)])):g("",!0),it.value?(i(),x("button",{key:9,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[10]||(e[10]=a=>Ge())},[c($e)])):g("",!0),f("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[11]||(e[11]=a=>ut())},[c(Te),b(),la]),f("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[12]||(e[12]=a=>_t())},[c(Te),b(),ra]),s(ue).length>0&&("useUtils"in t?t.useUtils:s(y))().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2","trp_trx.val3","trp_trx.val4","trp_trx.val5","trp_trx.val6"])?(i(),x("button",{key:10,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:e[13]||(e[13]=a=>G.value=!0)},[c(L),c(L),c(L),c(L)])):g("",!0)]),f("div",na,[f("div",oa,[sa,f("span",ia," Rp. "+w(s(Z)(dt.value||0))+" ",1)]),f("div",ua,[_a,f("span",da," Rp. "+w(s(Z)(pt.value||0)),1)]),f("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:e[14]||(e[14]=a=>Ze())},[c(mt)]),("useUtils"in t?t.useUtils:s(y))().checkPermission("trp_trx.generate_pvr")?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[15]||(e[15]=a=>We())}," Gen/Update PVR ")):g("",!0),("useUtils"in t?t.useUtils:s(y))().checkPermission("trp_trx.generate_pv")?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[16]||(e[16]=a=>Qe())}," Gen/Update PV ")):g("",!0),("useUtils"in t?t.useUtils:s(y))().checkPermissions(["trp_trx.generate_pvr","trp_trx.generate_pv","trp_trx.get_pv"])?(i(),x("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:e[17]||(e[17]=a=>U.value=!s(U))},[pa,b(" : "),f("span",{class:At(["font-bold",s(U)?"text-green-600":"text-red-600"])},w(s(U)?"ONLINE":"OFFLINE"),3)])):g("",!0)])]),c(yt,{thead:s(Ae),selected:s(r),onSetSelected:e[18]||(e[18]=a=>r.value=a),tbody:s(o),fnCallData:be,scrolling:s(q),onSetScrollingPage:e[19]||(e[19]=a=>s(q).page=a),onDoFilter:e[20]||(e[20]=a=>xe()),onSetCheckbox:e[21]||(e[21]=a=>ue.value=a),deep_state:s(fe)},{id:m(({item:a})=>[b(w(a.id),1),a.potongan&&a.potongan.length>0?(i(),x("span",va,"*")):g("",!0)]),absen:m(({item:a,index:v})=>[a.trx_absens&&a.trx_absens.length>0?(i(),h(ft,{key:0,class:"cursor-pointer",onClick:pe=>ze(v)},null,8,["onClick"])):g("",!0)]),val:m(({item:a})=>[a.val?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),val1:m(({item:a})=>[f("div",ca,[a.val1?(i(),h(E,{key:1})):(i(),h(I,{key:0})),a.absen_not_done&&a.absen_not_done.length>0?(i(),x("div",ma,w(a.absen_not_done.join(",")),1)):g("",!0)])]),val2:m(({item:a})=>[a.val2?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),val3:m(({item:a})=>[a.val3?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),val4:m(({item:a})=>[a.val4?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),val5:m(({item:a})=>[a.val5?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),val6:m(({item:a})=>[a.val6?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),salary_paid:m(({item:a})=>{var v,pe;return[b(w(a.salary_paid?s(Q)((v=a.salary_paid)==null?void 0:v.period_end).format("MM-Y")+"["+((pe=a.salary_paid)==null?void 0:pe.period_part)+"]":""),1)]}),uj_xto:m(({item:a})=>{var v;return[b(w((v=a.uj)==null?void 0:v.xto),1)]}),uj_asst_opt:m(({item:a})=>{var v;return[b(w((v=a.uj)==null?void 0:v.asst_opt),1)]}),uj_tipe:m(({item:a})=>{var v;return[b(w((v=a.uj)==null?void 0:v.tipe),1)]}),uj_harga:m(({item:a})=>{var v;return[b(w(s(Z)((v=a.uj)==null?void 0:v.harga)),1)]}),payment_method_name:m(({item:a})=>{var v;return[b(w((v=a.payment_method)==null?void 0:v.name),1)]}),received_payment:m(({item:a})=>[b(w(a.received_payment?"Ya":"Tidak"),1)]),pvr_had_detail:m(({item:a})=>[a.pvr_had_detail?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),pv_complete:m(({item:a})=>[a.pv_complete?(i(),h(E,{key:1})):(i(),h(I,{key:0}))]),deleted_by_username:m(({item:a})=>{var v;return[b(w((v=a.deleted_by)==null?void 0:v.username),1)]}),req_deleted_by_username:m(({item:a})=>{var v;return[b(w((v=a.req_deleted_by)==null?void 0:v.username),1)]}),supir:m(({item:a})=>[b(w(a.supir)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(v=>v.potongan_mst.employee_id).indexOf(a.supir_id)>-1?(i(),x("span",fa," * ")):g("",!0)]),kernet:m(({item:a})=>[b(w(a.kernet)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(v=>v.potongan_mst.employee_id).indexOf(a.kernet_id)>-1?(i(),x("span",ya," * ")):g("",!0)]),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),c(de,{type:"delete",show:s(R),data:s(De),fnClose:Ne,fnConfirm:Re,enabledOk:s(se)},{footer:m(()=>[b(" Masukkan Alasan Penghapusan: "),f("div",ka,[ve(f("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>ce(F)?F.value=a:null)},null,512),[[je,s(F)]])])]),_:1},8,["show","data","enabledOk"]),c(de,{type:"custome",show:s(G),fnClose:()=>G.value=!1,fnConfirm:Ye},{words:m(()=>[b(" Ticket akan "),ba,b(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),c(de,{type:"custome",show:s(V),data:s(Pe),fnClose:Ve,fnConfirm:Ke,enabledOk:s(ie)},{words:m(()=>[b(" Data akan diproses dan "),xa,b(", yakin untuk melanjutkan ? ")]),footer:m(()=>[b(" Masukkan Alasan Permintaan Penghapusan: "),f("div",ga,[ve(f("textarea",{"onUpdate:modelValue":e[23]||(e[23]=a=>ce(M)?M.value=a:null)},null,512),[[je,s(M)]])])]),_:1},8,["show","data","enabledOk"]),c(kt,{show:s(le),fnClose:()=>{le.value=!1},fnLoadDBData:qe,id:s(he),p_data:s(o),list_cost_center:s(ke),online_status:s(U)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),c(bt,{show:s(N),fnClose:()=>{N.value=!1},id:s(B),p_data:s(o),it_state:s(z),onSetID:e[24]||(e[24]=a=>B.value=a),onSetIndex:e[25]||(e[25]=a=>r.value=a)},null,8,["show","fnClose","id","p_data","it_state"]),c(xt,{show:s(oe),fnClose:()=>{oe.value=!1},index:s(we),p_data:s(o)},null,8,["show","fnClose","index","p_data"]),c(gt,{show:s(re),fnClose:()=>{re.value=!1},id:s(ne),p_data:s(o),it_state:s(ge),onSetID:e[26]||(e[26]=a=>ne.value=a),onSetIndex:e[27]||(e[27]=a=>r.value=a)},null,8,["show","fnClose","id","p_data","it_state"])])}}};export{el as default};
