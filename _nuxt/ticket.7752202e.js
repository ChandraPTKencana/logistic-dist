import{_ as We}from"./Header.5229fb2b.js";import{_ as et}from"./Edit.128af0d8.js";import{_ as tt}from"./Eyes.86e05d90.js";import{_ as ot}from"./Void.f9529620.js";import{_ as lt}from"./Signature.a4f0e7d4.js";import{_ as at}from"./Cog.67881993.js";import{_ as st,a as it}from"./trx_absen.a9ab8315.js";import{_ as _t}from"./Line.93246c3c.js";import{_ as rt}from"./Check.b50119df.js";import{_ as nt}from"./TableView.44365904.js";import{_ as dt}from"./PopupMini.vue.20e17d38.js";import{_ as ge}from"./HeaderPopup.vue.c3fedf1e.js";import{_ as $e}from"./client-only.92f847e9.js";import{_ as ct}from"./InputPointFormat.vue.0527cad2.js";import{r as h,f as te,J as R,g as Z,L as De,h as z,v as Te,o as r,c as n,a as t,b as g,t as a,k as e,G as u,l as Me,j as ke,F as xe,n as he,w as K,m as Se,s as de,x as S,y as I,p as je,e as Pe,M as Ae,D as ut,B as ft,H as ye,I as pt,i as vt,d as X,q as bt,E as mt,K as L}from"./entry.2ea6ee01.js";import{u as Ce}from"./useUtils.35f2b1a7.js";import{u as F}from"./useMyFetch.f9b2b7b2.js";import{_ as Be}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as wt}from"./Times.d78ccce2.js";import"./Search.b3832684.js";const m=T=>(je("data-v-7c41c6df"),T=T(),Pe(),T),kt={class:"box-fixed"},xt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ht={class:"w-full flex flex-col items-center grow overflow-auto"},yt={class:"w-full flex flex-row flex-wrap"},gt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},$t=m(()=>t("label",{for:""},"U.Jalan Per",-1)),Dt={class:"card-border"},Tt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Mt=m(()=>t("label",{for:""},"Jenis",-1)),St={class:"card-border"},jt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pt=m(()=>t("label",{for:""},"Supir",-1)),At={class:"card-border"},Ct={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bt=m(()=>t("label",{for:""},"Kernet",-1)),Nt={class:"card-border"},Ot={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ht=m(()=>t("label",{for:""},"No Pol",-1)),Yt={class:"card-border"},Kt={key:0,class:"w-full flex flex-wrap"},qt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},It=m(()=>t("label",{for:""},"Tujuan",-1)),Ft={class:"card-border"},Vt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ut=m(()=>t("label",{for:""},"Tipe",-1)),Lt={class:"card-border"},Rt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},zt=m(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Jt={class:"card-border"},Et=m(()=>t("label",{for:""},"Peralihan",-1)),Gt=Ae('<option value="" data-v-7c41c6df></option><option value="KPN" data-v-7c41c6df>KPN</option><option value="KAS" data-v-7c41c6df>KAS</option><option value="KUS" data-v-7c41c6df>KUS</option><option value="ARP" data-v-7c41c6df>ARP</option><option value="KAP" data-v-7c41c6df>KAP</option><option value="SMP" data-v-7c41c6df>SMP</option>',7),Xt=[Gt],Zt={class:"text-red-500"},Qt={key:2,class:"w-full flex flex-col flex-wrap p-1"},Wt=m(()=>t("label",{for:""},"Tiket A",-1)),eo={id:"ticket_a"},to=["value"],oo={class:"text-red-500"},lo={key:3,class:"w-full flex flex-wrap"},ao={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},so=m(()=>t("label",{for:""},"In At",-1)),io={class:"card-border disabled"},_o={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ro=m(()=>t("label",{for:""},"Out At",-1)),no={class:"card-border disabled"},co={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},uo=m(()=>t("label",{for:""},"Bruto",-1)),fo={class:"card-border disabled"},po={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},vo=m(()=>t("label",{for:""},"Tara",-1)),bo={class:"card-border disabled"},mo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},wo=m(()=>t("label",{for:""},"Netto",-1)),ko={class:"card-border disabled"},xo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ho=m(()=>t("label",{for:""},"No Pol",-1)),yo={class:"card-border disabled"},go={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},$o=m(()=>t("label",{for:""},"Supir",-1)),Do={class:"card-border disabled"},To={key:4,class:"w-full flex flex-col flex-wrap p-1"},Mo=m(()=>t("label",{for:""},"Tiket B",-1)),So={id:"ticket_b"},jo=["value"],Po={class:"text-red-500"},Ao={key:5,class:"w-full flex flex-wrap"},Co={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bo=m(()=>t("label",{for:""},"In At",-1)),No={class:"card-border disabled"},Oo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ho=m(()=>t("label",{for:""},"Out At",-1)),Yo={class:"card-border disabled"},Ko={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},qo=m(()=>t("label",{for:""},"Bruto ",-1)),Io={class:"card-border disabled"},Fo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Vo=m(()=>t("label",{for:""},"Tara ",-1)),Uo={class:"card-border disabled"},Lo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ro=m(()=>t("label",{for:""},"Netto ",-1)),zo={class:"card-border disabled"},Jo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Eo=m(()=>t("label",{for:""},"No Pol",-1)),Go={class:"card-border disabled"},Xo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Zo=m(()=>t("label",{for:""},"Supir",-1)),Qo={class:"card-border disabled"},Wo={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},el=m(()=>t("label",{for:""},"In At",-1)),tl={class:"text-red-500"},ol={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},ll=m(()=>t("label",{for:""},"Out At",-1)),al={class:"text-red-500"},sl={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},il=m(()=>t("label",{for:""},"Bruto",-1)),_l={class:"text-red-500"},rl={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},nl=m(()=>t("label",{for:""},"Tara",-1)),dl={class:"text-red-500"},cl={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ul=m(()=>t("label",{for:""},"Netto",-1)),fl={class:"card-border disabled"},pl={class:"w-full flex items-center justify-end"},vl={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(T){const w=T,{$moment:$}=de(),{pointFormat:y}=Ce(),V={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",transition_to:""};let l={...V};const o=h({...V}),D=te("token"),A=h({}),C=i=>{o.value.jenis=="TBS"&&w.fnLoadDBData(o.value.jenis,i.target.value)},j=async()=>{S().loading_full=!0,A.value={};const i=new FormData;if(i.append("tanggal",$(o.value.tanggal).format("Y-MM-DD")),i.append("jenis",o.value.jenis),i.append("id_uj",o.value.id_uj),i.append("xto",o.value.xto),i.append("online_status",w.online_status),i.append("transition_to",o.value.transition_to),o.value.ticket_a_no){let d=O.value.filter(q=>q.TicketNo==o.value.ticket_a_no);d.length==0&&o.value.ticket_a_no==l.ticket_a_no?i.append("ticket_a_id",l.ticket_a_id):i.append("ticket_a_id",d[0].TicketID)}if(o.value.ticket_b_no){let d=M.value.filter(q=>q.TicketNo==o.value.ticket_b_no);d.length==0&&o.value.ticket_b_no==l.ticket_b_no?i.append("ticket_b_id",l.ticket_b_id):i.append("ticket_b_id",d[0].TicketID)}i.append("ticket_a_no",o.value.ticket_a_no),i.append("ticket_b_no",o.value.ticket_b_no),i.append("ticket_b_bruto",o.value.ticket_b_bruto),i.append("ticket_b_tara",o.value.ticket_b_tara),o.value.ticket_b_in_at&&i.append("ticket_b_in_at",$(o.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),o.value.ticket_b_out_at&&i.append("ticket_b_out_at",$(o.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),i.append("supir",o.value.supir),i.append("kernet",o.value.kernet),i.append("no_pol",o.value.no_pol);let f="post",b=w.id;b==0||(i.append("id",b),i.append("_method","PUT"));const{data:c,error:N,status:B}=await F("/trx_trp_ticket",{method:f,headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:i,retry:0});if(S().loading_full=!1,B.value==="error"){I().trigger(N,A);return}if(o.value.ticket_a_netto=parseFloat(o.value.ticket_a_bruto)-parseFloat(o.value.ticket_a_tara),o.value.ticket_b_netto=parseFloat(o.value.ticket_b_bruto)-parseFloat(o.value.ticket_b_tara),o.value.updated_at=c.value.updated_at,w.id<=0)o.value.id=c.value.id,o.value.created_at=c.value.created_at,w.p_data.unshift(o.value);else{let d=w.p_data.map(q=>q.id).indexOf(w.id);d>=-1&&w.p_data.splice(d,1,{...o.value})}w.fnClose()},O=R(()=>{let i=[];return o.value.jenis=="CPO"?i=["cpo"]:o.value.jenis=="PK"?i=["kernel"]:i=["mtbs"],w.list_ticket.filter(f=>i.indexOf(f.ProductName.toLowerCase())>-1)}),M=R(()=>{let i=[];return o.value.transition_to!=""?i=["tbs","rtbs"]:o.value.jenis=="TBSK"?i=["tbs"]:o.value.jenis=="TBS"&&(i=["rtbs"]),w.list_ticket.filter(f=>i.indexOf(f.ProductName.toLowerCase())>-1)}),J=R(()=>!1),x=async()=>{S().loading_full=!0;const{data:i,error:f,status:b}=await F("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(S().loading_full=!1,b.value==="error"){I().trigger(f);return}o.value=i.value.data,l={...i.value.data},w.fnLoadDBData(o.value.jenis,o.value.transition_to)};Z(()=>w.show,(i,f)=>{i==!0&&(o.value={...V},A.value={},w.id!=0&&x())},{immediate:!0});let k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return Z(()=>o.value.ticket_a_no,(i,f)=>{if(i==""||i){if(i){let b=O.value.filter(c=>c.TicketNo==o.value.ticket_a_no);b.length>0?k={id:b[0].TicketID,bruto:b[0].Bruto,tara:b[0].Tara,netto:b[0].Netto,supir:b[0].NamaSupir,no_pol:b[0].VehicleNo,in_at:b[0].DateTimeIn,out_at:b[0].DateTimeOut}:o.value.ticket_a_no==l.ticket_a_no&&(k={id:l.ticket_a_id,bruto:l.ticket_a_bruto,tara:l.ticket_a_tara,netto:l.ticket_a_netto,supir:l.ticket_a_supir,no_pol:l.ticket_a_no_pol,in_at:l.ticket_a_in_at,out_at:l.ticket_a_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_a_id=k.id,o.value.ticket_a_bruto=k.bruto,o.value.ticket_a_tara=k.tara,o.value.ticket_a_netto=k.netto,o.value.ticket_a_in_at=k.in_at,o.value.ticket_a_out_at=k.out_at,o.value.ticket_a_supir=k.supir,o.value.ticket_a_no_pol=k.no_pol}},{deep:!0,immediate:!0}),Z(()=>o.value.ticket_b_no,(i,f)=>{if(["TBS","TBSK"].indexOf(o.value.jenis)>-1&&(i==""||i)){if(i){let b=M.value.filter(c=>c.TicketNo==o.value.ticket_b_no);b.length>0?k={id:b[0].TicketID,bruto:b[0].Bruto,tara:b[0].Tara,netto:b[0].Netto,supir:b[0].NamaSupir,no_pol:b[0].VehicleNo,in_at:b[0].DateTimeIn,out_at:b[0].DateTimeOut}:o.value.ticket_b_no==l.ticket_b_no&&(k={id:l.ticket_b_id,bruto:l.ticket_b_bruto,tara:l.ticket_b_tara,netto:l.ticket_b_netto,supir:l.ticket_b_supir,no_pol:l.ticket_b_no_pol,in_at:l.ticket_b_in_at,out_at:l.ticket_b_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_b_id=k.id,o.value.ticket_b_bruto=k.bruto,o.value.ticket_b_tara=k.tara,o.value.ticket_b_netto=k.netto,o.value.ticket_b_in_at=k.in_at,o.value.ticket_b_out_at=k.out_at,o.value.ticket_b_supir=k.supir,o.value.ticket_b_no_pol=k.no_pol}},{deep:!0,immediate:!0}),(i,f)=>{const b=ge,c=De("vue-date-picker"),N=$e,B=ct;return z((r(),n("section",kt,[t("div",null,[g(b,{title:"Form Transaction",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",xt,[t("div",ht,[t("div",yt,[t("div",gt,[$t,t("div",Dt,a(e(o).tanggal?e($)(e(o).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Tt,[Mt,t("div",St,a(e(o).jenis),1)]),t("div",jt,[Pt,t("div",At,a(e(o).supir),1)]),t("div",Ct,[Bt,t("div",Nt,a(e(o).kernet),1)]),t("div",Ot,[Ht,t("div",Yt,a(e(o).no_pol),1)]),e(o).jenis!=""?(r(),n("div",Kt,[t("div",qt,[It,t("div",Ft,a(e(o).xto),1)]),t("div",Vt,[Ut,t("div",Lt,a(e(o).tipe),1)]),t("div",Rt,[zt,t("div",Jt,a(e(y)(e(o).amount||0)),1)])])):u("",!0),e(o).jenis=="TBS"?(r(),n("div",{key:1,class:"w-full p-1",onChange:f[1]||(f[1]=d=>C(d))},[Et,z(t("select",{"onUpdate:modelValue":f[0]||(f[0]=d=>e(o).transition_to=d)},Xt,512),[[Me,e(o).transition_to]]),t("p",Zt,a(e(A).transition_to),1)],32)):u("",!0),e(o).jenis!=""&&e(o).jenis!="TBSK"?(r(),n("div",Qt,[Wt,z(t("input",{type:"text",list:"ticket_a","onUpdate:modelValue":f[2]||(f[2]=d=>e(o).ticket_a_no=d)},null,512),[[ke,e(o).ticket_a_no]]),t("datalist",eo,[(r(!0),n(xe,null,he(e(O),d=>(r(),n("option",{value:d.TicketNo},a(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,to))),256))]),t("p",oo,a(e(A).ticket),1)])):u("",!0),e(o).jenis!=""&&e(o).jenis!="TBSK"?(r(),n("div",lo,[t("div",ao,[so,t("div",io,a(e(o).ticket_a_in_at?e($)(e(o).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",_o,[ro,t("div",no,a(e(o).ticket_a_out_at?e($)(e(o).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",co,[uo,t("div",fo,a(e(o).ticket_a_bruto?e(y)(e(o).ticket_a_bruto):0),1)]),t("div",po,[vo,t("div",bo,a(e(o).ticket_a_tara?e(y)(e(o).ticket_a_tara):0),1)]),t("div",mo,[wo,t("div",ko,a(e(o).ticket_a_bruto?e(y)(e(o).ticket_a_bruto-e(o).ticket_a_tara):0),1)]),t("div",xo,[ho,t("div",yo,a(e(o).ticket_a_no_pol),1)]),t("div",go,[$o,t("div",Do,a(e(o).ticket_a_supir),1)])])):u("",!0),["TBS","TBSK"].indexOf(e(o).jenis)>-1?(r(),n("div",To,[Mo,z(t("input",{type:"text",list:"ticket_b","onUpdate:modelValue":f[3]||(f[3]=d=>e(o).ticket_b_no=d)},null,512),[[ke,e(o).ticket_b_no]]),t("datalist",So,[(r(!0),n(xe,null,he(e(M),d=>(r(),n("option",{value:d.TicketNo},a(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,jo))),256))]),t("p",Po,a(e(A).ticket),1)])):u("",!0),["TBS","TBSK"].indexOf(e(o).jenis)>-1?(r(),n("div",Ao,[t("div",Co,[Bo,t("div",No,a(e(o).ticket_b_in_at?e($)(e(o).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Oo,[Ho,t("div",Yo,a(e(o).ticket_b_out_at?e($)(e(o).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ko,[qo,t("div",Io,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto):0),1)]),t("div",Fo,[Vo,t("div",Uo,a(e(o).ticket_b_tara?e(y)(e(o).ticket_b_tara):0),1)]),t("div",Lo,[Ro,t("div",zo,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto-e(o).ticket_b_tara):0),1)]),t("div",Jo,[Eo,t("div",Go,a(e(o).ticket_b_no_pol),1)]),t("div",Xo,[Zo,t("div",Qo,a(e(o).ticket_b_supir),1)])])):u("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",Wo,[el,g(N,null,{default:K(()=>[g(c,{modelValue:e(o).ticket_b_in_at,"onUpdate:modelValue":f[4]||(f[4]=d=>e(o).ticket_b_in_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",tl,a(e(A).ticket_b_in_at),1)])):u("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",ol,[ll,g(N,null,{default:K(()=>[g(c,{modelValue:e(o).ticket_b_out_at,"onUpdate:modelValue":f[5]||(f[5]=d=>e(o).ticket_b_out_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",al,a(e(A).ticket_b_out_at),1)])):u("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",sl,[il,t("div",null,[g(B,{class:"card-border p-1",type:"text",value:e(o).ticket_b_bruto||0,onInput:f[6]||(f[6]=d=>e(o).ticket_b_bruto=d),show:T.show},null,8,["value","show"])]),t("p",_l,a(e(A).ticket_b_bruto),1)])):u("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",rl,[nl,t("div",null,[g(B,{class:"card-border p-1",type:"text",value:e(o).ticket_b_tara||0,onInput:f[7]||(f[7]=d=>e(o).ticket_b_tara=d),show:T.show},null,8,["value","show"])]),t("p",dl,a(e(A).ticket_b_tara),1)])):u("",!0),["CPO","PK"].indexOf(e(o).jenis)>-1?(r(),n("div",cl,[ul,t("div",fl,a(e(o).ticket_b_bruto?e(y)(e(o).ticket_b_bruto-e(o).ticket_b_tara):0),1)])):u("",!0)])]),t("div",pl,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:f[8]||(f[8]=d=>T.fnClose())}," Cancel "),e(J)?u("",!0):(r(),n("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:f[9]||(f[9]=Se(d=>j(),["prevent"]))}," Save "))])])])],512)),[[Te,T.show]])}}},bl=Be(vl,[["__scopeId","data-v-7c41c6df"]]);const v=T=>(je("data-v-19b2ff48"),T=T(),Pe(),T),ml={class:"box-fixed"},wl={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},kl={class:"w-full flex flex-col items-center grow overflow-auto"},xl={class:"w-full flex flex-row flex-wrap"},hl={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yl=v(()=>t("label",{for:""},"U.Jalan Per",-1)),gl={class:"card-border"},$l={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dl=v(()=>t("label",{for:""},"Jenis",-1)),Tl={class:"card-border"},Ml={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Sl=v(()=>t("label",{for:""},"Supir",-1)),jl={class:"card-border"},Pl={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Al=v(()=>t("label",{for:""},"Kernet",-1)),Cl={class:"card-border"},Bl={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Nl=v(()=>t("label",{for:""},"No Pol",-1)),Ol={class:"card-border"},Hl={key:0,class:"w-full flex flex-wrap"},Yl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Kl=v(()=>t("label",{for:""},"Tujuan",-1)),ql={class:"card-border"},Il={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Fl=v(()=>t("label",{for:""},"Tipe",-1)),Vl={class:"card-border"},Ul={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ll=v(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Rl={class:"card-border"},zl={key:1,class:"w-full p-1"},Jl=v(()=>t("label",{for:""},"Peralihan",-1)),El={class:"card-border"},Gl={key:2,class:"w-full flex flex-col flex-wrap p-1"},Xl=v(()=>t("label",{for:""},"Tiket A",-1)),Zl={class:"card-border"},Ql={key:3,class:"w-full flex flex-wrap"},Wl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ea=v(()=>t("label",{for:""},"In At",-1)),ta={class:"card-border disabled"},oa={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},la=v(()=>t("label",{for:""},"Out At",-1)),aa={class:"card-border disabled"},sa={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ia=v(()=>t("label",{for:""},"Bruto",-1)),_a={class:"card-border disabled"},ra={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},na=v(()=>t("label",{for:""},"Tara",-1)),da={class:"card-border disabled"},ca={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ua=v(()=>t("label",{for:""},"Netto",-1)),fa={class:"card-border disabled"},pa={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},va=v(()=>t("label",{for:""},"No Pol",-1)),ba={class:"card-border disabled"},ma={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},wa=v(()=>t("label",{for:""},"Supir",-1)),ka={class:"card-border disabled"},xa={key:4,class:"w-full flex flex-col flex-wrap p-1"},ha=v(()=>t("label",{for:""},"Tiket B",-1)),ya={class:"card-border"},ga={key:5,class:"w-full flex flex-wrap"},$a={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Da=v(()=>t("label",{for:""},"In At",-1)),Ta={class:"card-border disabled"},Ma={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Sa=v(()=>t("label",{for:""},"Out At",-1)),ja={class:"card-border disabled"},Pa={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Aa=v(()=>t("label",{for:""},"Bruto ",-1)),Ca={class:"card-border disabled"},Ba={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Na=v(()=>t("label",{for:""},"Tara ",-1)),Oa={class:"card-border disabled"},Ha={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ya=v(()=>t("label",{for:""},"Netto ",-1)),Ka={class:"card-border disabled"},qa={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ia=v(()=>t("label",{for:""},"No Pol",-1)),Fa={class:"card-border disabled"},Va={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ua=v(()=>t("label",{for:""},"Supir",-1)),La={class:"card-border disabled"},Ra={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},za=v(()=>t("label",{for:""},"In At",-1)),Ja={class:"card-border"},Ea={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ga=v(()=>t("label",{for:""},"Out At",-1)),Xa={class:"card-border"},Za={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Qa=v(()=>t("label",{for:""},"Bruto",-1)),Wa={class:"card-border"},es={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ts=v(()=>t("label",{for:""},"Tara",-1)),os={class:"card-border"},ls={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},as=v(()=>t("label",{for:""},"Netto",-1)),ss={class:"card-border"},is={class:"w-full flex items-center justify-end"},_s={class:"w-full flex flex-wrap p-3 items-center"},rs=v(()=>t("div",null," Di Validasi oleh : ",-1)),ns={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ds={key:0},cs={key:1},us={key:2},fs={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(T){const w=T,{$moment:$}=de(),{pointFormat:y}=Ce(),l=h({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),o=te("token"),D=async()=>{S().loading_full=!0;const C=new FormData;let j="post",O=w.id;O==0||(C.append("id",O),C.append("_method","PUT"));const{data:M,error:J,status:x}=await F("/trx_trp_validasi",{method:j,headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},body:C,retry:0});if(S().loading_full=!1,x.value==="error"){I().trigger(J);return}l.value.val=M.value.val,l.value.val_user=M.value.val_user,l.value.val_by=M.value.val_by,l.value.val_at=M.value.val_at,l.value.val1=M.value.val1,l.value.val1_user=M.value.val1_user,l.value.val1_by=M.value.val1_by,l.value.val1_at=M.value.val1_at,l.value.val2=M.value.val2,l.value.val2_user=M.value.val2_user,l.value.val2_by=M.value.val2_by,l.value.val2_at=M.value.val2_at;let k=w.p_data.map(i=>i.id).indexOf(w.id);k>=-1&&w.p_data.splice(k,1,{...l.value}),w.fnClose()},A=async()=>{S().loading_full=!0;const{data:C,error:j,status:O}=await F("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(S().loading_full=!1,O.value==="error"){I().trigger(j);return}l.value=C.value.data};return Z(()=>w.show,(C,j)=>{C==!0&&A()},{immediate:!0}),(C,j)=>{const O=ge;return z((r(),n("section",ml,[t("div",null,[g(O,{title:"Form Transaction Validation",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",wl,[t("div",kl,[t("div",xl,[t("div",hl,[yl,t("div",gl,a(e(l).tanggal?e($)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",$l,[Dl,t("div",Tl,a(e(l).jenis),1)]),t("div",Ml,[Sl,t("div",jl,a(e(l).supir),1)]),t("div",Pl,[Al,t("div",Cl,a(e(l).kernet),1)]),t("div",Bl,[Nl,t("div",Ol,a(e(l).no_pol),1)]),e(l).jenis!=""?(r(),n("div",Hl,[t("div",Yl,[Kl,t("div",ql,a(e(l).xto),1)]),t("div",Il,[Fl,t("div",Vl,a(e(l).tipe),1)]),t("div",Ul,[Ll,t("div",Rl,a(e(y)(e(l).amount||0)),1)])])):u("",!0),e(l).jenis=="TBS"?(r(),n("div",zl,[Jl,t("div",El,a(e(l).transition_to),1)])):u("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",Gl,[Xl,t("div",Zl,a(e(l).ticket_a_no),1)])):u("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",Ql,[t("div",Wl,[ea,t("div",ta,a(e(l).ticket_a_in_at?e($)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",oa,[la,t("div",aa,a(e(l).ticket_a_out_at?e($)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",sa,[ia,t("div",_a,a(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto):0),1)]),t("div",ra,[na,t("div",da,a(e(l).ticket_a_tara?e(y)(e(l).ticket_a_tara):0),1)]),t("div",ca,[ua,t("div",fa,a(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto-e(l).ticket_a_tara):0),1)]),t("div",pa,[va,t("div",ba,a(e(l).ticket_a_no_pol),1)]),t("div",ma,[wa,t("div",ka,a(e(l).ticket_a_supir),1)])])):u("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",xa,[ha,t("div",ya,a(e(l).ticket_b_no),1)])):u("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",ga,[t("div",$a,[Da,t("div",Ta,a(e(l).ticket_b_in_at?e($)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ma,[Sa,t("div",ja,a(e(l).ticket_b_out_at?e($)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Pa,[Aa,t("div",Ca,a(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto):0),1)]),t("div",Ba,[Na,t("div",Oa,a(e(l).ticket_b_tara?e(y)(e(l).ticket_b_tara):0),1)]),t("div",Ha,[Ya,t("div",Ka,a(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)]),t("div",qa,[Ia,t("div",Fa,a(e(l).ticket_b_no_pol),1)]),t("div",Va,[Ua,t("div",La,a(e(l).ticket_b_supir),1)])])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",Ra,[za,t("div",Ja,a(e(l).ticket_b_in_at?e($)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",Ea,[Ga,t("div",Xa,a(e(l).ticket_b_out_at?e($)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",Za,[Qa,t("div",Wa,a(e(y)(e(l).ticket_b_bruto||0)),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",es,[ts,t("div",os,a(e(y)(e(l).ticket_b_tara||0)),1)])):u("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",ls,[as,t("div",ss,a(e(y)(e(l).ticket_b_netto||0)),1)])):u("",!0)])]),t("div",is,[t("div",_s,[rs,e(l).val||e(l).val1||e(l).val2?(r(),n("div",ns,[e(l).val?(r(),n("div",ds," App 1 : "+a(e(l).val_by.username)+" ( "+a(e(l).val_at?e($)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val1?(r(),n("div",cs," App 2 : "+a(e(l).val1_by.username)+" ( "+a(e(l).val1_at?e($)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0),e(l).val2?(r(),n("div",us," App 3 : "+a(e(l).val2_by.username)+" ( "+a(e(l).val2_at?e($)(e(l).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):u("",!0)])):u("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:j[0]||(j[0]=M=>T.fnClose())}," Cancel "),T.is_view==0?(r(),n("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:j[1]||(j[1]=Se(M=>D(),["prevent"]))}," Validasi ")):u("",!0)])])])],512)),[[Te,T.show]])}}},ps=Be(fs,[["__scopeId","data-v-19b2ff48"]]),vs={class:"w-full h-full flex flex-col"},bs={class:"w-full flex grow flex-col overflow-auto h-0"},ms={class:"w-full flex justify-between flex-wrap"},ws={class:"grow flex"},ks={class:"m-1"},xs=Ae('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),hs=[xs],ys={class:"flex"},gs=t("span",{class:"text-xs"},"Mode",-1),$s=t("b",null,"tidak dapat dibatalkan lagi",-1),Ds={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Ts={class:"relative",style:{width:"95%",height:"90%"}},Ms={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ss={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},js={class:"w-full p-1"},Ps={class:"w-full p-1 bg-gray-200"},As=t("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),Cs={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},Bs={class:"flex flex-col flex-wrap p-1"},Ns=t("label",{for:""},"From",-1),Os={class:"grow"},Hs={class:"flex flex-col flex-wrap p-1"},Ys=t("label",{for:""},"To",-1),Ks={class:"grow"},ii={__name:"ticket",async setup(T){let w,$;const{$moment:y}=de(),V=s=>s.deleted==1?"!bg-red-400":s.req_deleted==1?"!bg-yellow-300":["CPO","PK"].indexOf(s.jenis)>-1&&(s.ticket_a_id>0||s.ticket_b_bruto>0||s.ticket_b_tara>0||s.ticket_b_netto>0||s.ticket_b_in_at!=""||s.ticket_b_out_at!="")||s.jenis=="TBS"&&(s.ticket_a_id>0||s.ticket_b_id>0)||s.jenis=="TBSK"&&s.ticket_b_id>0?"!bg-blue-300":"",l=s=>(s.map(_=>{_.class_h=V(_)}),s),o=h("ticket_not_done");Z(()=>o.value,s=>{be.value.map(_=>{let Y=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(_.key)>-1;return["all","deleted","req_deleted"].indexOf(s)>-1?Y&&(_.tbl_show=1):Y&&(_.tbl_show=0),_}),ce()},{immediate:!1});const D={};D._TimeZoneOffset=new Date().getTimezoneOffset(),D.sort="tanggal:desc";const A=h({}),C=h({from:"",to:""}),j=te("token"),O=te("role"),M=s=>s.includes(O.value),{data:J}=([w,$]=ut(async()=>mt(async()=>{S().loading_full=!0;let s=[];const[_,Y]=await Promise.all([F("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:{filter_status:o},retry:0})]);return _.status.value!=="error"&&(s=l(_.data.value.data)),_.status.value==="error"?(I().trigger(_.error),{trx_trps:s}):(S().loading_full=!1,{trx_trps:s})},"$X4xCu6yBOs")),w=await w,$(),w),x=h(J.value.trx_trps||[]),k=h([]),i=h(!1),f=async(s,_="")=>{S().loading_full=!0;let Y=P.value.from?y(P.value.from).format("Y-MM-DD"):"",G=P.value.to?y(P.value.to).format("Y-MM-DD"):"";const{data:H,error:ie,status:_e}=await F("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:{jenis:s,online_status:i.value,from:Y,to:G,transition_to:_},retry:0});if(S().loading_full=!1,_e.value==="error"){I().trigger(ie);return}k.value=H.value.list_ticket},b=h({field:"tanggal",by:"desc"}),c=h(-1),N=R(()=>x.value[c.value]),B=h({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),d=()=>{D.like="";let s=JSON.parse(JSON.stringify(S()._tv.global_keyword));s!=""&&(D.like=`id:%${s}%,xto:%${s}%,jenis:%${s}%,pv_no:%${s}%,ticket_a_no:%${s}%,ticket_b_no:%${s}%,no_pol:%${s}%,supir:%${s}%,kernet:%${s}%,cost_center_code:%${s}%,cost_center_desc:%${s}%,pvr_no:%${s}%,tanggal:%${s}%,transition_to:%${s}%`),D.sort="",b.value.field&&(D.sort=b.value.field+":"+b.value.by),D.date_from=C.value.from?y(C.value.from).format("YYYY-MM-DD"):"",D.date_to=C.value.to?y(C.value.to).format("YYYY-MM-DD"):"",D.filter_model=JSON.stringify(S()._tv.filter_model)},q=async()=>{S().loading_full=!0,A.value={},B.value.may_get_data=!1,D.page=B.value.page,D.page==1&&(x.value=[]),D.first_row&&delete D.first_row,D.page>1&&(D.first_row=JSON.stringify(x.value[0])),D.filter_status=o.value;const{data:s,error:_,status:Y}=await F("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:D,retry:0});if(S().loading_full=!1,B.value.may_get_data=!0,Y.value==="error"){I().trigger(_,A);return}B.value.page==1?x.value=l(s.value.data):B.value.page>1&&(x.value=[...x.value,...l(s.value.data)]),s.value.data.length==0&&(B.value.is_last_record=!0),S()._tv.filter_box=!1},ce=()=>{c.value=-1,B.value.page=1,B.value.is_last_record=!1,d(),q()};ft();const oe=h(!1),ue=h(0),{display:Q}=ye();pt(ye());const Ne=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ue.value=x.value[c.value].id,oe.value=!0)},W=h(!1),le=h(0),ae=h(!1),Oe=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(le.value=x.value[c.value].id,W.value=!0,ae.value=!1)},He=()=>{c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(le.value=x.value[c.value].id,W.value=!0,ae.value=!0)},se=h(!1),fe=h(0),Ye=s=>{fe.value=s,se.value=!0},pe=h({}),E=h(!1),Ke=h(""),qe=async()=>{E.value&&(E.value=!1)},Ie=()=>{var s;c.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Ke.value="",pe.value={id:x.value[c.value].id,"no pol":x.value[c.value].no_pol,tujuan:x.value[c.value].xto,permintaan:(s=x.value[c.value].req_deleted_by)==null?void 0:s.username,alasan:x.value[c.value].req_deleted_reason},E.value=!0)},Fe=async()=>{S().loading_full=!0;const s=new FormData;s.append("id",x.value[c.value].id),s.append("_method","DELETE");const{data:_,error:Y,status:G}=await F("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},body:s,retry:0});if(S().loading_full=!1,G.value==="error"){I().trigger(Y);return}let H={...x.value[c.value]};H.deleted=_.value.deleted,H.deleted_user=_.value.deleted_user,H.deleted_at=_.value.deleted_at,H.deleted_by=_.value.deleted_by,H.deleted_reason=_.value.deleted_reason,H.class_h=V(H),o.value!="all"?x.value.splice(c.value,1):x.value.splice(c.value,1,{...H}),c.value=-1,E.value=!1},ee=h(!1),P=h({from:new Date().setDate(new Date().getDate()-3),to:new Date}),ve=s=>{s=="from"?P.value.from-P.value.to>0&&(P.value.from=P.value.to):P.value.to-P.value.from<0&&(P.value.to=P.value.from)},be=h([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition_to",label:"Peralihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Ve=R(()=>c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Ue=R(()=>!M(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Le=R(()=>!M(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==1&&N.value.val2==0);return(s,_)=>{const Y=We,G=et,H=tt,ie=ot,_e=lt,Re=at,ze=it,re=_t,ne=rt,Je=nt,Ee=dt,Ge=bl,Xe=ps,Ze=st,Qe=wt,me=De("vue-date-picker"),we=$e;return r(),n("div",vs,[g(Y,{title:"List Transaction"}),t("div",bs,[t("div",ms,[t("div",ws,[t("div",ks,[z(t("select",{class:"","onUpdate:modelValue":_[0]||(_[0]=p=>vt(o)?o.value=p:null)},hs,512),[[Me,e(o)]])]),e(Ve)?(r(),n("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[1]||(_[1]=p=>Ne())},[g(G)])):u("",!0),e(c)>-1?(r(),n("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[2]||(_[2]=p=>He())},[g(H)])):u("",!0),e(Le)?(r(),n("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[3]||(_[3]=p=>Ie())},[g(ie)])):u("",!0),e(Ue)?(r(),n("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[4]||(_[4]=p=>Oe())},[g(_e)])):u("",!0)]),t("div",ys,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:_[5]||(_[5]=p=>ee.value=!0)},[g(Re)]),t("div",{class:"m-1 card-border cursor-pointer",onClick:_[6]||(_[6]=p=>i.value=!e(i))},[gs,X(" : "),t("span",{class:bt(["font-bold",e(i)?"text-green-600":"text-red-600"])},a(e(i)?"ONLINE":"OFFLINE"),3)])])]),g(Je,{thead:e(be),selected:e(c),onSetSelected:_[7]||(_[7]=p=>c.value=p),tbody:e(x),fnCallData:q,scrolling:e(B),onSetScrollingPage:_[8]||(_[8]=p=>e(B).page=p),onDoFilter:_[9]||(_[9]=p=>ce())},{absen:K(({item:p,index:U})=>[p.trx_absens&&p.trx_absens.length>0?(r(),L(ze,{key:0,class:"cursor-pointer",onClick:qs=>Ye(U)},null,8,["onClick"])):u("",!0)]),val:K(({item:p})=>[p.val?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),val1:K(({item:p})=>[p.val1?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),val2:K(({item:p})=>[p.val2?(r(),L(ne,{key:1})):(r(),L(re,{key:0}))]),deleted_by_username:K(({item:p})=>{var U;return[X(a((U=p.deleted_by)==null?void 0:U.username),1)]}),req_deleted_by_username:K(({item:p})=>{var U;return[X(a((U=p.req_deleted_by)==null?void 0:U.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),g(Ee,{type:"custome",show:e(E),data:e(pe),fnClose:qe,fnConfirm:Fe},{words:K(()=>[X(" Data akan diproses dan "),$s,X(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),g(Ge,{show:e(oe),fnClose:()=>{oe.value=!1},fnLoadDBData:f,id:e(ue),p_data:e(x),list_ticket:e(k),online_status:e(i)},null,8,["show","fnClose","id","p_data","list_ticket","online_status"]),g(Xe,{show:e(W),fnClose:()=>{W.value=!1},id:e(le),p_data:e(x),is_view:e(ae)},null,8,["show","fnClose","id","p_data","is_view"]),g(Ze,{show:e(se),fnClose:()=>{se.value=!1},index:e(fe),p_data:e(x)},null,8,["show","fnClose","index","p_data"]),e(ee)?(r(),n("div",Ds,[t("div",Ts,[t("div",Ms,[g(Qe,{style:{color:"black",cursor:"pointer"},onClick:_[10]||(_[10]=p=>ee.value=!1)})]),t("div",Ss,[t("div",js,[t("div",Ps,[As,t("div",Cs,[t("div",Bs,[Ns,t("div",Os,[g(we,null,{default:K(()=>[g(me,{modelValue:e(P).from,"onUpdate:modelValue":_[11]||(_[11]=p=>e(P).from=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[12]||(_[12]=p=>ve("from"))},null,8,["modelValue"])]),_:1})])]),t("div",Hs,[Ys,t("div",Ks,[g(we,null,{default:K(()=>[g(me,{modelValue:e(P).to,"onUpdate:modelValue":_[13]||(_[13]=p=>e(P).to=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[14]||(_[14]=p=>ve("to"))},null,8,["modelValue"])]),_:1})])])])])])]),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:_[15]||(_[15]=p=>ee.value=!1)})])])):u("",!0)])}}};export{ii as default};
