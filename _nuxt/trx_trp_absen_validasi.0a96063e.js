import{_ as D}from"./HeaderPopup.vue.e89b6351.js";import{r as k,f as M,j as H,m as C,J as j,o as d,c,a as e,b as A,t as a,k as s,l as v,x as B,E as N,A as m,B as h}from"./entry.b8f45e1d.js";import"./useUtils.02680300.js";import{u as b}from"./useMyFetch.882d4718.js";import"./Times.eee7fe9a.js";import"./_plugin-vue_export-helper.c27b6911.js";const S={class:"box-fixed"},V={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},$={class:"w-full flex flex-col items-center grow overflow-auto"},q={class:"w-full"},T={class:"w-full flex flex-wrap p-3 items-center text-xs"},F=e("label",{for:""},"U.jalan Per",-1),P={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},E=e("label",{for:""},"Jenis",-1),z={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},J=e("label",{for:""},"Supir",-1),K={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},U={key:0},O=e("label",{for:""},"Kernet",-1),G={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},I=e("label",{for:""},"No Pol",-1),L={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Q=e("label",{for:""},"Tujuan",-1),R={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},W=e("label",{for:""},"Tipe",-1),X={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Z={class:"w-full flex flex-wrap items-center grow overflow-auto"},ee={class:"w-full sm:w-1/2 text-center p-1"},te={class:"border-[1px] p-1"},se={class:"font-bold"},ae=["src"],le={class:"w-full sm:w-1/2 text-center p-1"},ie={class:"border-[1px] p-1"},oe={class:"border-[1px] p-1"},re={class:"font-bold"},_e=["src"],ne={class:"w-full sm:w-1/2 text-center p-1"},de={class:"border-[1px] p-1"},ce={class:"border-[1px] p-1"},ue={class:"font-bold"},ve=["src"],me={class:"w-full sm:w-1/2 text-center p-1"},fe={class:"border-[1px] p-1"},pe={class:"border-[1px] p-1"},he={class:"font-bold"},be=["src"],ge={class:"w-full p-1"},we=e("label",{for:""}," Note ",-1),xe={class:"card-border"},ye={class:"w-full flex items-center justify-end"},Ye={class:"w-full flex flex-wrap p-3 items-center"},De=e("div",null," Di Validasi oleh : ",-1),ke={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Me={key:0},He={key:1},$e={__name:"trx_trp_absen_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(u){const r=u,{$moment:_}=N(),t=k({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:""}}),f=M("token"),g=async()=>{m().loading_full=!0;const o=new FormData;let i="post",n=r.id;n==0||(o.append("id",n),o.append("_method","PUT"));const{data:l,error:x,status:y}=await b("/trx_trp/absen/validasi",{method:i,headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},body:o,retry:0});if(m().loading_full=!1,y.value==="error"){h().trigger(x);return}t.value.ritase_val=l.value.ritase_val,t.value.ritase_val_user=l.value.ritase_val_user,t.value.ritase_val_by=l.value.ritase_val_by,t.value.ritase_val_at=l.value.ritase_val_at,t.value.ritase_val1=l.value.ritase_val1,t.value.ritase_val1_user=l.value.ritase_val1_user,t.value.ritase_val1_by=l.value.ritase_val1_by,t.value.ritase_val1_at=l.value.ritase_val1_at;let p=r.p_data.map(Y=>Y.id).indexOf(r.id);p>=-1&&r.p_data.splice(p,1,{...t.value}),r.fnClose()},w=async()=>{m().loading_full=!0;const{data:o,error:i,status:n}=await b("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(m().loading_full=!1,n.value==="error"){h().trigger(i);return}t.value=o.value.data};return H(()=>r.show,(o,i)=>{o==!0&&w()},{immediate:!0}),(o,i)=>{const n=D;return C((d(),c("section",S,[e("div",null,[A(n,{title:"Form Transaction Validation",fn:u.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",V,[e("div",$,[e("div",q,[e("div",T,[e("div",null,[F,e("div",P,a(s(t).tanggal?s(_)(s(t).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",null,[E,e("div",z,a(s(t).jenis),1)]),e("div",null,[J,e("div",K,a(s(t).supir),1)]),s(t).kernet?(d(),c("div",U,[O,e("div",G,a(s(t).kernet),1)])):v("",!0),e("div",null,[I,e("div",L,a(s(t).no_pol),1)]),e("div",null,[Q,e("div",R,a(s(t).xto),1)]),e("div",null,[W,e("div",X,a(s(t).tipe),1)])])]),e("div",Z,[e("div",ee,[e("div",te,[e("label",se,"Berangkat : "+a(s(t).img_leave_ts?s(_)(s(t).img_leave_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_leave,alt:""},null,8,ae)])])]),e("div",le,[e("div",ie,[e("div",oe,[e("label",re,"Tiba : "+a(s(t).img_arrive_ts?s(_)(s(t).img_arrive_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_arrive,alt:""},null,8,_e)])])])]),e("div",ne,[e("div",de,[e("div",ce,[e("label",ue,"Kembali : "+a(s(t).img_return_ts?s(_)(s(t).img_return_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_return,alt:""},null,8,ve)])])])]),e("div",me,[e("div",fe,[e("div",pe,[e("label",he,"Sampai : "+a(s(t).img_till_ts?s(_)(s(t).img_till_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_till,alt:""},null,8,be)])])])]),e("div",ge,[we,e("div",xe,a(s(t).ritase_note),1)])])]),e("div",ye,[e("div",Ye,[De,s(t).ritase_val||s(t).ritase_val1||s(t).ritase_val2||s(t).ritase_val3||s(t).ritase_val4||s(t).ritase_val5?(d(),c("div",ke,[s(t).ritase_val?(d(),c("div",Me," App 1 : "+a(s(t).ritase_val_by.username)+" ( "+a(s(t).ritase_val_at?s(_)(s(t).ritase_val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),s(t).ritase_val1?(d(),c("div",He," App 2 : "+a(s(t).ritase_val1_by.username)+" ( "+a(s(t).ritase_val1_at?s(_)(s(t).ritase_val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0)])):v("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:i[0]||(i[0]=l=>u.fnClose())}," Cancel "),u.is_view==0?(d(),c("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:i[1]||(i[1]=B(l=>g(),["prevent"]))}," Validasi ")):v("",!0)])])])],512)),[[j,u.show]])}}};export{$e as default};
