import{g as J,h as W,r as u,j as Q,i as X,f as Z,c as i,b as m,a as e,k as b,A as ee,l as t,m as te,F as se,E as oe,L as T,t as a,n as p,q as ae,x as y,y as M,o as c,d as V,B as le,H as ne,_ as re}from"./entry.2e8b78c1.js";import ie from"./Header.47406e40.js";import ce from"./Calendar.62dd2f0a.js";import de from"./CarTag.3d252cee.js";import _e from"./TruckDriver.2b92b0d3.js";import ue from"./LocationOn.fe5eef24.js";import{_ as xe}from"./HeaderPopup.vue.f669f300.js";import{u as fe}from"./useUtils.49acee3f.js";import{u as A}from"./useMyFetch.e6d47c09.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.1251e55b.js";const me=le(()=>re(()=>import("./GAPIN.b5b76b46.js"),["./GAPIN.b5b76b46.js","./entry.2e8b78c1.js","./entry.493f9183.css","./useMyFetch.e6d47c09.js"],import.meta.url).then(w=>w.default||w)),pe={class:"w-full h-full flex flex-col relative"},ve={class:"grow flex flex-col"},he={class:"w-full flex items-center p-1"},ye={class:"grow"},ge={class:"grow overflow-auto h-0"},be={class:"p-1 grow"},we={class:"bg-white flex py-2 justify-between"},ke={class:"flex flex-wrap"},De={class:"flex items-center justify-center m-2 text-xs"},Ye={class:"bg-blue-400 p-2 font-bold text-white"},je={class:"flex flex-col m-2"},Te=e("span",{class:"text-xs"}," Tgl Terima Uang ",-1),Me={class:"flex items-center justify-center"},Ae={class:"flex flex-col m-2"},Ce=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Le={class:"flex items-center justify-center"},He=["data-real"],Ne={class:"flex flex-col m-2"},$e=e("span",{class:"text-xs"}," Nama Pekerja ",-1),Pe={class:"flex items-center justify-center"},Ve=["data-real"],Ie={class:"flex flex-col m-2"},Se=e("span",{class:"text-xs"}," Tujuan ",-1),Be={class:"flex items-center justify-center"},ze=["onClick"],Ee={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Fe={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},Ue={class:"p-1 flex flex-wrap overflow-auto items-start"},Ke={class:"w-full flex flex-wrap"},Oe={class:"w-full flex flex-wrap"},qe={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},Re=e("span",{class:"text-xs font-bold"}," ID ",-1),Ge={class:""},Je={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},We=e("span",{class:"text-xs font-bold"}," Tgl Terima Uang ",-1),Qe={class:""},Xe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ze=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),et={class:""},tt={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},st={class:"flex flex-col"},ot=e("span",{class:"text-xs font-bold"}," Nama Pekerja ",-1),at={class:""},lt={class:"flex flex-col pl-2"},nt=e("span",{class:"text-xs font-bold"}," No rek ",-1),rt={class:""},it={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ct=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),dt={class:""},_t={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ut=e("span",{class:"text-xs font-bold"}," Jenis ",-1),xt={class:""},ft={key:0,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},mt=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),pt={class:""},vt={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ht=e("span",{class:"text-xs font-bold"}," Nominal Dibayarkan ",-1),yt={class:""},gt={class:"w-full flex flex-wrap justify-center"},bt={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},wt=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),kt={class:"text-xs"},Dt={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Yt=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),jt={class:"text-xs"},Tt={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Mt=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),At={class:"text-xs"},Ct={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Lt=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),Ht={class:"text-xs"},Nt={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},$t=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),Pt={class:"text-xs"},Vt={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},It=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),St={class:"text-xs"},Bt={class:"flex p-1 justify-end flex-wrap"},zt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},Et=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),es={__name:"transfer",async setup(w){let g,C;const{$moment:x}=ne(),{pointFormat:I}=fe(),k=J("token");new Date().getTimezoneOffset();const{data:S}=([g,C]=W(async()=>ae(async()=>{y().loading_full=!0;let l=[];const[o,r]=await Promise.all([A("/extra_money_trx/transfers",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},retry:0})]);return o.status.value==="error"?(M().trigger(o.error),{extra_money_trxs:l}):(y().loading_full=!1,l=o.data.value.data,{extra_money_trxs:l})},"$0Pi8hCNVwD")),g=await g,C(),g),D=u(S.value.extra_money_trxs||[]),Y=u({}),s=u({id:-1,tanggal:new Date,extra_money:{xto:"",tipe:"",jenis:"",amount:0},employee:"",kernet:"",no_pol:"",details_uj:[]}),j=u(-1),f=u(""),B=async l=>{y().loading_full=!0;const{data:o,error:r,status:d}=await A("/extra_money_trx/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:l.id},retry:0});if(y().loading_full=!1,d.value==="error"){M().trigger(r,Y);return}s.value=o.value.data},z=async()=>{y().loading_full=!0,Y.value={};const l=new FormData;l.append("id",s.value.id),l.append("_method","PUT");let o="post";const{data:r,error:d,status:_}=await A("/extra_money_trx/transfer",{method:o,headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:l,retry:0});if(y().loading_full=!1,_.value==="error"){M().trigger(d,Y);return}D.value.splice(j.value,1),j.value=-1,h.value=!1,v.value=!1},v=u(!1),E=u(0),h=u(!1);Q();const F=(l,o)=>{j.value=l,E.value=o,v.value=!0,B(o)},L=X(()=>f.value!=""?D.value.filter(l=>l.no_pol.toLowerCase().includes(f.value.toLowerCase())||l.employee.toLowerCase().includes(f.value.toLowerCase())||l.kernet.toLowerCase().includes(f.value.toLowerCase())):D.value),U=()=>{let l=f.value;document.querySelectorAll(".to_hl").forEach(o=>{let r=o.dataset.real;var d=o.innerHTML,_=r==null?void 0:r.toLowerCase().indexOf(l.toLowerCase());_>-1&&l!=""?(d=r.substring(0,_)+"<span class='highlight'>"+r.substring(_,_+l.length)+"</span>"+r.substring(_+l.length),o.innerHTML=d):o.innerHTML=d=r})};Z(()=>L,(l,o)=>{setTimeout(()=>{U()},0)},{deep:!0,immediate:!0});const H=u(0);return(l,o)=>{var N;const r=ie,d=ce,_=de,K=_e,O=ue,q=xe,R=me;return c(),i("div",pe,[m(r,{title:"List Transaction"}),e("section",ve,[e("div",he,[e("div",ye,[b(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>te(f)?f.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[ee,t(f)]])])]),e("div",ge,[(c(!0),i(se,null,oe(t(L),(n,G)=>{var $,P;return c(),i("div",be,[e("div",we,[e("div",ke,[e("div",De,[e("div",Ye,a(n.id),1)]),e("div",je,[Te,e("div",Me,[m(d,{class:"mr-1"}),V(" "+a(t(x)(n.tanggal).format("DD-MM-YYYY")),1)])]),e("div",Ae,[Ce,e("div",Le,[m(_,{class:"mr-1"}),e("span",{class:"to_hl","data-real":n.no_pol},a(n.no_pol),9,He)])]),e("div",Ne,[$e,e("div",Pe,[m(K,{class:"mr-1"}),e("span",{class:"to_hl","data-real":($=n.employee)==null?void 0:$.name},a((P=n.employee)==null?void 0:P.name),9,Ve)])]),e("div",Ie,[Se,e("div",Be,[m(O,{class:"mr-1"}),V(" "+a(n.extra_money.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:Ft=>F(G,n)}," Detail ",8,ze)])])}),256))])]),b(e("div",Ee,[e("div",Fe,[m(q,{title:"Detail Information",fn:()=>{v.value=!1,h.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Ue,[e("div",Ke,[e("div",Oe,[e("div",qe,[Re,e("div",Ge,a(t(s).id),1)]),e("div",Je,[We,e("div",Qe,a(t(x)(t(s).tanggal).format("DD-MM-YYYY")),1)]),e("div",Xe,[Ze,e("div",et,a(t(s).no_pol),1)]),e("div",tt,[e("div",st,[ot,e("div",at,a((N=t(s).employee)==null?void 0:N.name),1)]),e("div",lt,[nt,e("div",rt,a(t(s).employee_rek_no),1)])]),e("div",it,[ct,e("div",dt,a(t(s).extra_money.xto),1)]),e("div",_t,[ut,e("div",xt,a(t(s).extra_money.jenis),1)]),t(s).extra_money.transition_type=="From"?(c(),i("div",ft,[mt,e("div",pt,a(t(s).extra_money.transition_target),1)])):p("",!0),e("div",vt,[ht,e("div",yt,a(t(I)(t(s).extra_money.total)),1)])]),e("div",gt,[t(s).val?(c(),i("div",bt,[wt,e("div",null," ( "+a(t(s).val_by.username)+" ) ",1),e("div",kt,a(t(x)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val1?(c(),i("div",Dt,[Yt,e("div",null," ( "+a(t(s).val1_by.username)+" ) ",1),e("div",jt,a(t(x)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val2?(c(),i("div",Tt,[Mt,e("div",null," ( "+a(t(s).val2_by.username)+" ) ",1),e("div",At,a(t(x)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val3?(c(),i("div",Ct,[Lt,e("div",null," ( "+a(t(s).val3_by.username)+" ) ",1),e("div",Ht,a(t(x)(t(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val4?(c(),i("div",Nt,[$t,e("div",null," ( "+a(t(s).val4_by.username)+" ) ",1),e("div",Pt,a(t(x)(t(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val5?(c(),i("div",Vt,[It,e("div",null," ( "+a(t(s).val5_by.username)+" ) ",1),e("div",St,a(t(x)(t(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0)])])]),b(e("div",Bt,[e("button",{class:"rounded m-1",onClick:o[1]||(o[1]=n=>v.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[2]||(o[2]=n=>h.value=!0)}," Transfer ")],512),[[T,!t(h)]]),b(e("div",zt,[Et,e("button",{class:"rounded m-1 bg-white",onClick:o[3]||(o[3]=n=>(h.value=!1,v.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[4]||(o[4]=n=>z())}," Ya ")],512),[[T,t(h)]])])],512),[[T,t(v)]]),m(R,{show:t(H),onSetTimeout:o[5]||(o[5]=n=>H.value=n)},null,8,["show"])])}}};export{es as default};
