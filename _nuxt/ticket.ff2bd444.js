import{_ as ot}from"./Header.1af76631.js";import{_ as lt}from"./Edit.f044e47c.js";import{_ as at}from"./Eyes.2e7b4112.js";import{_ as st}from"./Void.8021b46f.js";import{_ as it}from"./Signature.58de9035.js";import{_ as _t}from"./Cog.691fb147.js";import{_ as je}from"./client-only.f9e962fd.js";import{u as Se,_ as nt}from"./useUtils.05691110.js";import{_ as rt,a as dt}from"./trx_absen.05ef3057.js";import{_ as ct,a as ut}from"./Check.bfe530ae.js";import{_ as ft}from"./TableView.fd9e6e3e.js";import{_ as pt}from"./PopupMini.vue.1e775b69.js";import{_ as Ce}from"./HeaderPopup.vue.90e3c952.js";import{_ as vt}from"./InputPointFormat.vue.3d1e4786.js";import{r as y,f as ae,J as z,g as Z,L as Ae,h as I,v as Pe,o as n,c as u,a as e,b as w,t as a,k as t,G as f,l as le,j as fe,F as $e,n as De,w as N,m as pe,s as ve,x as B,y as V,p as Be,e as He,M as me,D as mt,B as bt,H as Te,I as wt,i as Me,d as X,q as kt,E as xt,K as R}from"./entry.2013267e.js";import{u as K}from"./useMyFetch.2c6ff7fa.js";import{_ as Ne}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as ht}from"./Times.2b5687e7.js";const b=D=>(Be("data-v-c01cf6f5"),D=D(),He(),D),yt={class:"box-fixed"},gt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},$t={class:"w-full flex flex-col items-center grow overflow-auto"},Dt={class:"w-full flex flex-row flex-wrap"},Tt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Mt=b(()=>e("label",{for:""},"U.Jalan Per",-1)),jt={class:"card-border"},St={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ct=b(()=>e("label",{for:""},"Jenis",-1)),At={class:"card-border"},Pt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bt=b(()=>e("label",{for:""},"Supir",-1)),Ht={class:"card-border"},Nt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ot=b(()=>e("label",{for:""},"Kernet",-1)),Yt={class:"card-border"},qt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},It=b(()=>e("label",{for:""},"No Pol",-1)),Vt={class:"card-border"},Kt={key:0,class:"w-full flex flex-wrap"},Ft={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ut=b(()=>e("label",{for:""},"Tujuan",-1)),Lt={class:"card-border"},Rt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},zt=b(()=>e("label",{for:""},"Tipe",-1)),Jt={class:"card-border"},Et={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Gt=b(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),Xt={class:"card-border"},Zt=b(()=>e("label",{for:""},"Peralihan",-1)),Qt=me('<option value="" data-v-c01cf6f5></option><option value="KPN" data-v-c01cf6f5>KPN</option><option value="KAS" data-v-c01cf6f5>KAS</option><option value="KUS" data-v-c01cf6f5>KUS</option><option value="ARP" data-v-c01cf6f5>ARP</option><option value="KAP" data-v-c01cf6f5>KAP</option><option value="SMP" data-v-c01cf6f5>SMP</option>',7),Wt=[Qt],eo={class:"text-red-500"},to={key:2,class:"w-full flex flex-col flex-wrap p-1"},oo=b(()=>e("label",{for:""},"Tiket A",-1)),lo={id:"ticket_a"},ao=["value"],so={class:"text-red-500"},io={key:3,class:"w-full flex flex-wrap"},_o={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},no=b(()=>e("label",{for:""},"In At",-1)),ro={class:"card-border disabled"},co={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},uo=b(()=>e("label",{for:""},"Out At",-1)),fo={class:"card-border disabled"},po={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},vo=b(()=>e("label",{for:""},"Bruto",-1)),mo={class:"card-border disabled"},bo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},wo=b(()=>e("label",{for:""},"Tara",-1)),ko={class:"card-border disabled"},xo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ho=b(()=>e("label",{for:""},"Netto",-1)),yo={class:"card-border disabled"},go={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},$o=b(()=>e("label",{for:""},"No Pol",-1)),Do={class:"card-border disabled"},To={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Mo=b(()=>e("label",{for:""},"Supir",-1)),jo={class:"card-border disabled"},So={key:4,class:"w-full flex flex-col flex-wrap p-1"},Co=b(()=>e("label",{for:""},"Tiket B",-1)),Ao={id:"ticket_b"},Po=["value"],Bo={class:"text-red-500"},Ho={key:5,class:"w-full flex flex-wrap"},No={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Oo=b(()=>e("label",{for:""},"In At",-1)),Yo={class:"card-border disabled"},qo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Io=b(()=>e("label",{for:""},"Out At",-1)),Vo={class:"card-border disabled"},Ko={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Fo=b(()=>e("label",{for:""},"Bruto ",-1)),Uo={class:"card-border disabled"},Lo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ro=b(()=>e("label",{for:""},"Tara ",-1)),zo={class:"card-border disabled"},Jo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Eo=b(()=>e("label",{for:""},"Netto ",-1)),Go={class:"card-border disabled"},Xo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Zo=b(()=>e("label",{for:""},"No Pol",-1)),Qo={class:"card-border disabled"},Wo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},el=b(()=>e("label",{for:""},"Supir",-1)),tl={class:"card-border disabled"},ol={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},ll=b(()=>e("label",{for:""},"In At",-1)),al={class:"text-red-500"},sl={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},il=b(()=>e("label",{for:""},"Out At",-1)),_l={class:"text-red-500"},nl={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},rl=b(()=>e("label",{for:""},"Bruto",-1)),dl={class:"text-red-500"},cl={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ul=b(()=>e("label",{for:""},"Tara",-1)),fl={class:"text-red-500"},pl={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},vl=b(()=>e("label",{for:""},"Netto",-1)),ml={class:"card-border disabled"},bl={class:"w-full flex items-center justify-end"},wl={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(D){const k=D,{$moment:$}=ve(),{pointFormat:g}=Se(),F={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",transition_to:""};let l={...F};const o=y({...F}),T=ae("token"),C=y({}),j=i=>{o.value.jenis=="TBS"&&k.fnLoadDBData(o.value.jenis,i.target.value)},A=async()=>{B().loading_full=!0,C.value={};const i=new FormData;if(i.append("tanggal",$(o.value.tanggal).format("Y-MM-DD")),i.append("jenis",o.value.jenis),i.append("id_uj",o.value.id_uj),i.append("xto",o.value.xto),i.append("online_status",k.online_status),i.append("transition_to",o.value.transition_to),o.value.ticket_a_no){let _=O.value.filter(U=>U.TicketNo==o.value.ticket_a_no);_.length==0&&o.value.ticket_a_no==l.ticket_a_no?i.append("ticket_a_id",l.ticket_a_id):i.append("ticket_a_id",_[0].TicketID)}if(o.value.ticket_b_no){let _=M.value.filter(U=>U.TicketNo==o.value.ticket_b_no);_.length==0&&o.value.ticket_b_no==l.ticket_b_no?i.append("ticket_b_id",l.ticket_b_id):i.append("ticket_b_id",_[0].TicketID)}i.append("ticket_a_no",o.value.ticket_a_no),i.append("ticket_b_no",o.value.ticket_b_no),i.append("ticket_b_bruto",o.value.ticket_b_bruto),i.append("ticket_b_tara",o.value.ticket_b_tara),o.value.ticket_b_in_at&&i.append("ticket_b_in_at",$(o.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),o.value.ticket_b_out_at&&i.append("ticket_b_out_at",$(o.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),i.append("supir",o.value.supir),i.append("kernet",o.value.kernet),i.append("no_pol",o.value.no_pol);let p="post",r=k.id;r==0||(i.append("id",r),i.append("_method","PUT"));const{data:S,error:m,status:H}=await K("/trx_trp_ticket",{method:p,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:i,retry:0});if(B().loading_full=!1,H.value==="error"){V().trigger(m,C);return}if(o.value.ticket_a_netto=parseFloat(o.value.ticket_a_bruto)-parseFloat(o.value.ticket_a_tara),o.value.ticket_b_netto=parseFloat(o.value.ticket_b_bruto)-parseFloat(o.value.ticket_b_tara),o.value.updated_at=S.value.updated_at,k.id<=0)o.value.id=S.value.id,o.value.created_at=S.value.created_at,k.p_data.unshift(o.value);else{let _=k.p_data.map(U=>U.id).indexOf(k.id);_>=-1&&k.p_data.splice(_,1,{...o.value})}k.fnClose()},O=z(()=>{let i=[];return o.value.jenis=="CPO"?i=["cpo"]:o.value.jenis=="PK"?i=["kernel"]:i=["mtbs"],k.list_ticket.filter(p=>i.indexOf(p.ProductName.toLowerCase())>-1)}),M=z(()=>{let i=[];return o.value.jenis=="TBSK"||o.value.transition_to!=""?i=["tbs"]:o.value.jenis=="TBS"&&(i=["rtbs"]),k.list_ticket.filter(p=>i.indexOf(p.ProductName.toLowerCase())>-1)}),J=z(()=>!1),h=async()=>{B().loading_full=!0;const{data:i,error:p,status:r}=await K("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:k.id},retry:0});if(B().loading_full=!1,r.value==="error"){V().trigger(p);return}o.value=i.value.data,l={...i.value.data},k.fnLoadDBData(o.value.jenis,o.value.transition_to)};Z(()=>k.show,(i,p)=>{i==!0&&(o.value={...F},C.value={},k.id!=0&&h())},{immediate:!0});let x={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return Z(()=>o.value.ticket_a_no,(i,p)=>{if(i==""||i){if(i){let r=O.value.filter(S=>S.TicketNo==o.value.ticket_a_no);r.length>0?x={id:r[0].TicketID,bruto:r[0].Bruto,tara:r[0].Tara,netto:r[0].Netto,supir:r[0].NamaSupir,no_pol:r[0].VehicleNo,in_at:r[0].DateTimeIn,out_at:r[0].DateTimeOut}:o.value.ticket_a_no==l.ticket_a_no&&(x={id:l.ticket_a_id,bruto:l.ticket_a_bruto,tara:l.ticket_a_tara,netto:l.ticket_a_netto,supir:l.ticket_a_supir,no_pol:l.ticket_a_no_pol,in_at:l.ticket_a_in_at,out_at:l.ticket_a_out_at})}i==""&&(x={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_a_id=x.id,o.value.ticket_a_bruto=x.bruto,o.value.ticket_a_tara=x.tara,o.value.ticket_a_netto=x.netto,o.value.ticket_a_in_at=x.in_at,o.value.ticket_a_out_at=x.out_at,o.value.ticket_a_supir=x.supir,o.value.ticket_a_no_pol=x.no_pol}},{deep:!0,immediate:!0}),Z(()=>o.value.ticket_b_no,(i,p)=>{if(["TBS","TBSK"].indexOf(o.value.jenis)>-1&&(i==""||i)){if(i){let r=M.value.filter(S=>S.TicketNo==o.value.ticket_b_no);r.length>0?x={id:r[0].TicketID,bruto:r[0].Bruto,tara:r[0].Tara,netto:r[0].Netto,supir:r[0].NamaSupir,no_pol:r[0].VehicleNo,in_at:r[0].DateTimeIn,out_at:r[0].DateTimeOut}:o.value.ticket_b_no==l.ticket_b_no&&(x={id:l.ticket_b_id,bruto:l.ticket_b_bruto,tara:l.ticket_b_tara,netto:l.ticket_b_netto,supir:l.ticket_b_supir,no_pol:l.ticket_b_no_pol,in_at:l.ticket_b_in_at,out_at:l.ticket_b_out_at})}i==""&&(x={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),o.value.ticket_b_id=x.id,o.value.ticket_b_bruto=x.bruto,o.value.ticket_b_tara=x.tara,o.value.ticket_b_netto=x.netto,o.value.ticket_b_in_at=x.in_at,o.value.ticket_b_out_at=x.out_at,o.value.ticket_b_supir=x.supir,o.value.ticket_b_no_pol=x.no_pol}},{deep:!0,immediate:!0}),(i,p)=>{const r=Ce,S=Ae("vue-date-picker"),m=je,H=vt;return I((n(),u("section",yt,[e("div",null,[w(r,{title:"Form Transaction",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",gt,[e("div",$t,[e("div",Dt,[e("div",Tt,[Mt,e("div",jt,a(t(o).tanggal?t($)(t(o).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",St,[Ct,e("div",At,a(t(o).jenis),1)]),e("div",Pt,[Bt,e("div",Ht,a(t(o).supir),1)]),e("div",Nt,[Ot,e("div",Yt,a(t(o).kernet),1)]),e("div",qt,[It,e("div",Vt,a(t(o).no_pol),1)]),t(o).jenis!=""?(n(),u("div",Kt,[e("div",Ft,[Ut,e("div",Lt,a(t(o).xto),1)]),e("div",Rt,[zt,e("div",Jt,a(t(o).tipe),1)]),e("div",Et,[Gt,e("div",Xt,a(t(g)(t(o).amount||0)),1)])])):f("",!0),t(o).jenis=="TBS"?(n(),u("div",{key:1,class:"w-full p-1",onChange:p[1]||(p[1]=_=>j(_))},[Zt,I(e("select",{"onUpdate:modelValue":p[0]||(p[0]=_=>t(o).transition_to=_)},Wt,512),[[le,t(o).transition_to]]),e("p",eo,a(t(C).transition_to),1)],32)):f("",!0),t(o).jenis!=""&&t(o).jenis!="TBSK"?(n(),u("div",to,[oo,I(e("input",{type:"text",list:"ticket_a","onUpdate:modelValue":p[2]||(p[2]=_=>t(o).ticket_a_no=_)},null,512),[[fe,t(o).ticket_a_no]]),e("datalist",lo,[(n(!0),u($e,null,De(t(O),_=>(n(),u("option",{value:_.TicketNo},a(_.TicketNo+"-"+_.VehicleNo+"-"+_.NamaSupir),9,ao))),256))]),e("p",so,a(t(C).ticket),1)])):f("",!0),t(o).jenis!=""&&t(o).jenis!="TBSK"?(n(),u("div",io,[e("div",_o,[no,e("div",ro,a(t(o).ticket_a_in_at?t($)(t(o).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",co,[uo,e("div",fo,a(t(o).ticket_a_out_at?t($)(t(o).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",po,[vo,e("div",mo,a(t(o).ticket_a_bruto?t(g)(t(o).ticket_a_bruto):0),1)]),e("div",bo,[wo,e("div",ko,a(t(o).ticket_a_tara?t(g)(t(o).ticket_a_tara):0),1)]),e("div",xo,[ho,e("div",yo,a(t(o).ticket_a_bruto?t(g)(t(o).ticket_a_bruto-t(o).ticket_a_tara):0),1)]),e("div",go,[$o,e("div",Do,a(t(o).ticket_a_no_pol),1)]),e("div",To,[Mo,e("div",jo,a(t(o).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(t(o).jenis)>-1?(n(),u("div",So,[Co,I(e("input",{type:"text",list:"ticket_b","onUpdate:modelValue":p[3]||(p[3]=_=>t(o).ticket_b_no=_)},null,512),[[fe,t(o).ticket_b_no]]),e("datalist",Ao,[(n(!0),u($e,null,De(t(M),_=>(n(),u("option",{value:_.TicketNo},a(_.TicketNo+"-"+_.VehicleNo+"-"+_.NamaSupir),9,Po))),256))]),e("p",Bo,a(t(C).ticket),1)])):f("",!0),["TBS","TBSK"].indexOf(t(o).jenis)>-1?(n(),u("div",Ho,[e("div",No,[Oo,e("div",Yo,a(t(o).ticket_b_in_at?t($)(t(o).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",qo,[Io,e("div",Vo,a(t(o).ticket_b_out_at?t($)(t(o).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Ko,[Fo,e("div",Uo,a(t(o).ticket_b_bruto?t(g)(t(o).ticket_b_bruto):0),1)]),e("div",Lo,[Ro,e("div",zo,a(t(o).ticket_b_tara?t(g)(t(o).ticket_b_tara):0),1)]),e("div",Jo,[Eo,e("div",Go,a(t(o).ticket_b_bruto?t(g)(t(o).ticket_b_bruto-t(o).ticket_b_tara):0),1)]),e("div",Xo,[Zo,e("div",Qo,a(t(o).ticket_b_no_pol),1)]),e("div",Wo,[el,e("div",tl,a(t(o).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(t(o).jenis)>-1?(n(),u("div",ol,[ll,w(m,null,{default:N(()=>[w(S,{modelValue:t(o).ticket_b_in_at,"onUpdate:modelValue":p[4]||(p[4]=_=>t(o).ticket_b_in_at=_),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",al,a(t(C).ticket_b_in_at),1)])):f("",!0),["CPO","PK"].indexOf(t(o).jenis)>-1?(n(),u("div",sl,[il,w(m,null,{default:N(()=>[w(S,{modelValue:t(o).ticket_b_out_at,"onUpdate:modelValue":p[5]||(p[5]=_=>t(o).ticket_b_out_at=_),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),e("p",_l,a(t(C).ticket_b_out_at),1)])):f("",!0),["CPO","PK"].indexOf(t(o).jenis)>-1?(n(),u("div",nl,[rl,e("div",null,[w(H,{class:"card-border p-1",type:"text",value:t(o).ticket_b_bruto||0,onInput:p[6]||(p[6]=_=>t(o).ticket_b_bruto=_),show:D.show},null,8,["value","show"])]),e("p",dl,a(t(C).ticket_b_bruto),1)])):f("",!0),["CPO","PK"].indexOf(t(o).jenis)>-1?(n(),u("div",cl,[ul,e("div",null,[w(H,{class:"card-border p-1",type:"text",value:t(o).ticket_b_tara||0,onInput:p[7]||(p[7]=_=>t(o).ticket_b_tara=_),show:D.show},null,8,["value","show"])]),e("p",fl,a(t(C).ticket_b_tara),1)])):f("",!0),["CPO","PK"].indexOf(t(o).jenis)>-1?(n(),u("div",pl,[vl,e("div",ml,a(t(o).ticket_b_bruto?t(g)(t(o).ticket_b_bruto-t(o).ticket_b_tara):0),1)])):f("",!0)])]),e("div",bl,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:p[8]||(p[8]=_=>D.fnClose())}," Cancel "),t(J)?f("",!0):(n(),u("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:p[9]||(p[9]=pe(_=>A(),["prevent"]))}," Save "))])])])],512)),[[Pe,D.show]])}}},kl=Ne(wl,[["__scopeId","data-v-c01cf6f5"]]);const v=D=>(Be("data-v-1230e3ba"),D=D(),He(),D),xl={class:"box-fixed"},hl={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},yl={class:"w-full flex flex-col items-center grow overflow-auto"},gl={class:"w-full flex flex-row flex-wrap"},$l={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dl=v(()=>e("label",{for:""},"U.Jalan Per",-1)),Tl={class:"card-border"},Ml={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jl=v(()=>e("label",{for:""},"Jenis",-1)),Sl={class:"card-border"},Cl={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Al=v(()=>e("label",{for:""},"Supir",-1)),Pl={class:"card-border"},Bl={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Hl=v(()=>e("label",{for:""},"Kernet",-1)),Nl={class:"card-border"},Ol={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yl=v(()=>e("label",{for:""},"No Pol",-1)),ql={class:"card-border"},Il={key:0,class:"w-full flex flex-wrap"},Vl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Kl=v(()=>e("label",{for:""},"Tujuan",-1)),Fl={class:"card-border"},Ul={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ll=v(()=>e("label",{for:""},"Tipe",-1)),Rl={class:"card-border"},zl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Jl=v(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),El={class:"card-border"},Gl={key:1,class:"w-full p-1"},Xl=v(()=>e("label",{for:""},"Peralihan",-1)),Zl={class:"card-border"},Ql={key:2,class:"w-full flex flex-col flex-wrap p-1"},Wl=v(()=>e("label",{for:""},"Tiket A",-1)),ea={class:"card-border"},ta={key:3,class:"w-full flex flex-wrap"},oa={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},la=v(()=>e("label",{for:""},"In At",-1)),aa={class:"card-border disabled"},sa={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ia=v(()=>e("label",{for:""},"Out At",-1)),_a={class:"card-border disabled"},na={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ra=v(()=>e("label",{for:""},"Bruto",-1)),da={class:"card-border disabled"},ca={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ua=v(()=>e("label",{for:""},"Tara",-1)),fa={class:"card-border disabled"},pa={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},va=v(()=>e("label",{for:""},"Netto",-1)),ma={class:"card-border disabled"},ba={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},wa=v(()=>e("label",{for:""},"No Pol",-1)),ka={class:"card-border disabled"},xa={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ha=v(()=>e("label",{for:""},"Supir",-1)),ya={class:"card-border disabled"},ga={key:4,class:"w-full flex flex-col flex-wrap p-1"},$a=v(()=>e("label",{for:""},"Tiket B",-1)),Da={class:"card-border"},Ta={key:5,class:"w-full flex flex-wrap"},Ma={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ja=v(()=>e("label",{for:""},"In At",-1)),Sa={class:"card-border disabled"},Ca={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Aa=v(()=>e("label",{for:""},"Out At",-1)),Pa={class:"card-border disabled"},Ba={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ha=v(()=>e("label",{for:""},"Bruto ",-1)),Na={class:"card-border disabled"},Oa={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ya=v(()=>e("label",{for:""},"Tara ",-1)),qa={class:"card-border disabled"},Ia={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Va=v(()=>e("label",{for:""},"Netto ",-1)),Ka={class:"card-border disabled"},Fa={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ua=v(()=>e("label",{for:""},"No Pol",-1)),La={class:"card-border disabled"},Ra={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},za=v(()=>e("label",{for:""},"Supir",-1)),Ja={class:"card-border disabled"},Ea={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ga=v(()=>e("label",{for:""},"In At",-1)),Xa={class:"card-border"},Za={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Qa=v(()=>e("label",{for:""},"Out At",-1)),Wa={class:"card-border"},es={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ts=v(()=>e("label",{for:""},"Bruto",-1)),os={class:"card-border"},ls={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},as=v(()=>e("label",{for:""},"Tara",-1)),ss={class:"card-border"},is={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_s=v(()=>e("label",{for:""},"Netto",-1)),ns={class:"card-border"},rs={class:"w-full flex items-center justify-end"},ds={class:"w-full flex flex-wrap p-3 items-center"},cs=v(()=>e("div",null," Di Validasi oleh : ",-1)),us={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},fs={key:0},ps={key:1},vs={key:2},ms={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(D){const k=D,{$moment:$}=ve(),{pointFormat:g}=Se(),l=y({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),o=ae("token"),T=async()=>{B().loading_full=!0;const j=new FormData;let A="post",O=k.id;O==0||(j.append("id",O),j.append("_method","PUT"));const{data:M,error:J,status:h}=await K("/trx_trp_validasi",{method:A,headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},body:j,retry:0});if(B().loading_full=!1,h.value==="error"){V().trigger(J);return}l.value.val=M.value.val,l.value.val_user=M.value.val_user,l.value.val_by=M.value.val_by,l.value.val_at=M.value.val_at,l.value.val1=M.value.val1,l.value.val1_user=M.value.val1_user,l.value.val1_by=M.value.val1_by,l.value.val1_at=M.value.val1_at,l.value.val2=M.value.val2,l.value.val2_user=M.value.val2_user,l.value.val2_by=M.value.val2_by,l.value.val2_at=M.value.val2_at;let x=k.p_data.map(i=>i.id).indexOf(k.id);x>=-1&&k.p_data.splice(x,1,{...l.value}),k.fnClose()},C=async()=>{B().loading_full=!0;const{data:j,error:A,status:O}=await K("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${o.value}`,Accept:"application/json"},params:{id:k.id},retry:0});if(B().loading_full=!1,O.value==="error"){V().trigger(A);return}l.value=j.value.data};return Z(()=>k.show,(j,A)=>{j==!0&&C()},{immediate:!0}),(j,A)=>{const O=Ce;return I((n(),u("section",xl,[e("div",null,[w(O,{title:"Form Transaction Validation",fn:D.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",hl,[e("div",yl,[e("div",gl,[e("div",$l,[Dl,e("div",Tl,a(t(l).tanggal?t($)(t(l).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",Ml,[jl,e("div",Sl,a(t(l).jenis),1)]),e("div",Cl,[Al,e("div",Pl,a(t(l).supir),1)]),e("div",Bl,[Hl,e("div",Nl,a(t(l).kernet),1)]),e("div",Ol,[Yl,e("div",ql,a(t(l).no_pol),1)]),t(l).jenis!=""?(n(),u("div",Il,[e("div",Vl,[Kl,e("div",Fl,a(t(l).xto),1)]),e("div",Ul,[Ll,e("div",Rl,a(t(l).tipe),1)]),e("div",zl,[Jl,e("div",El,a(t(g)(t(l).amount||0)),1)])])):f("",!0),t(l).jenis=="TBS"?(n(),u("div",Gl,[Xl,e("div",Zl,a(t(l).transition_to),1)])):f("",!0),t(l).jenis!=""&&t(l).jenis!="TBSK"?(n(),u("div",Ql,[Wl,e("div",ea,a(t(l).ticket_a_no),1)])):f("",!0),t(l).jenis!=""&&t(l).jenis!="TBSK"?(n(),u("div",ta,[e("div",oa,[la,e("div",aa,a(t(l).ticket_a_in_at?t($)(t(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",sa,[ia,e("div",_a,a(t(l).ticket_a_out_at?t($)(t(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",na,[ra,e("div",da,a(t(l).ticket_a_bruto?t(g)(t(l).ticket_a_bruto):0),1)]),e("div",ca,[ua,e("div",fa,a(t(l).ticket_a_tara?t(g)(t(l).ticket_a_tara):0),1)]),e("div",pa,[va,e("div",ma,a(t(l).ticket_a_bruto?t(g)(t(l).ticket_a_bruto-t(l).ticket_a_tara):0),1)]),e("div",ba,[wa,e("div",ka,a(t(l).ticket_a_no_pol),1)]),e("div",xa,[ha,e("div",ya,a(t(l).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(t(l).jenis)>-1?(n(),u("div",ga,[$a,e("div",Da,a(t(l).ticket_b_no),1)])):f("",!0),["TBS","TBSK"].indexOf(t(l).jenis)>-1?(n(),u("div",Ta,[e("div",Ma,[ja,e("div",Sa,a(t(l).ticket_b_in_at?t($)(t(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Ca,[Aa,e("div",Pa,a(t(l).ticket_b_out_at?t($)(t(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Ba,[Ha,e("div",Na,a(t(l).ticket_b_bruto?t(g)(t(l).ticket_b_bruto):0),1)]),e("div",Oa,[Ya,e("div",qa,a(t(l).ticket_b_tara?t(g)(t(l).ticket_b_tara):0),1)]),e("div",Ia,[Va,e("div",Ka,a(t(l).ticket_b_bruto?t(g)(t(l).ticket_b_bruto-t(l).ticket_b_tara):0),1)]),e("div",Fa,[Ua,e("div",La,a(t(l).ticket_b_no_pol),1)]),e("div",Ra,[za,e("div",Ja,a(t(l).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(t(l).jenis)>-1?(n(),u("div",Ea,[Ga,e("div",Xa,a(t(l).ticket_b_in_at?t($)(t(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(t(l).jenis)>-1?(n(),u("div",Za,[Qa,e("div",Wa,a(t(l).ticket_b_out_at?t($)(t(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(t(l).jenis)>-1?(n(),u("div",es,[ts,e("div",os,a(t(g)(t(l).ticket_b_bruto||0)),1)])):f("",!0),["CPO","PK"].indexOf(t(l).jenis)>-1?(n(),u("div",ls,[as,e("div",ss,a(t(g)(t(l).ticket_b_tara||0)),1)])):f("",!0),["CPO","PK"].indexOf(t(l).jenis)>-1?(n(),u("div",is,[_s,e("div",ns,a(t(g)(t(l).ticket_b_netto||0)),1)])):f("",!0)])]),e("div",rs,[e("div",ds,[cs,t(l).val||t(l).val1||t(l).val2?(n(),u("div",us,[t(l).val?(n(),u("div",fs," App 1 : "+a(t(l).val_by.username)+" ( "+a(t(l).val_at?t($)(t(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),t(l).val1?(n(),u("div",ps," App 2 : "+a(t(l).val1_by.username)+" ( "+a(t(l).val1_at?t($)(t(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),t(l).val2?(n(),u("div",vs," App 3 : "+a(t(l).val2_by.username)+" ( "+a(t(l).val2_at?t($)(t(l).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0)])):f("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:A[0]||(A[0]=M=>D.fnClose())}," Cancel "),D.is_view==0?(n(),u("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:A[1]||(A[1]=pe(M=>T(),["prevent"]))}," Validasi ")):f("",!0)])])])],512)),[[Pe,D.show]])}}},bs=Ne(ms,[["__scopeId","data-v-1230e3ba"]]),ws={class:"w-full h-full flex flex-col"},ks={class:"w-full flex grow flex-col overflow-auto h-0"},xs={class:"w-full flex justify-between flex-wrap"},hs={class:"grow flex"},ys={class:"m-1"},gs=me('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),$s=[gs],Ds={class:"flex"},Ts=e("span",{class:"text-xs"},"Mode",-1),Ms={action:"#",class:"w-full flex flex-wrap text-xs"},js={class:"w-6/12 p-1 sm:w-4/12 md:w-3/12 lg:w-2/12 flex flex-col"},Ss=e("div",{class:"font-bold"}," Tgl Dari ",-1),Cs={class:"text-red-500"},As={class:"w-6/12 p-1 sm:w-4/12 md:w-3/12 lg:w-2/12 flex flex-col"},Ps=e("div",{class:"font-bold"}," Tgl Sampai ",-1),Bs={class:"text-red-500"},Hs={class:"w-6/12 p-1 sm:w-4/12 md:w-2/12 lg:w-4/12 flex flex-col"},Ns=e("div",{class:"font-bold"}," Keyword ",-1),Os={class:"w-6/12 p-1 sm:w-4/12 md:w-1/12 lg:w-2/12 flex flex-col"},Ys=e("div",{class:"font-bold"}," Sort By ",-1),qs=me('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),Is=[qs],Vs={class:"w-6/12 p-1 sm:w-4/12 md:w-2/12 lg:w-1/12 flex flex-col"},Ks=e("div",{class:"font-bold"}," Sort Order ",-1),Fs=e("option",{value:"asc"},"Asc",-1),Us=e("option",{value:"desc"},"Desc",-1),Ls=[Fs,Us],Rs={class:"w-2/12 md:w-1/12 lg:w-1/12 p-1 flex items-end"},zs=e("b",null,"tidak dapat dibatalkan lagi",-1),Js={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Es={class:"relative",style:{width:"95%",height:"90%"}},Gs={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Xs={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Zs={class:"w-full p-1"},Qs={class:"w-full p-1 bg-gray-200"},Ws=e("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),ei={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},ti={class:"flex flex-col flex-wrap p-1"},oi=e("label",{for:""},"From",-1),li={class:"grow"},ai={class:"flex flex-col flex-wrap p-1"},si=e("label",{for:""},"To",-1),ii={class:"grow"},Ti={__name:"ticket",async setup(D){let k,$;const{$moment:g}=ve(),F=d=>d.deleted==1?"!bg-red-400":d.req_deleted==1?"!bg-yellow-300":["CPO","PK"].indexOf(d.jenis)>-1&&(d.ticket_a_id>0||d.ticket_b_bruto>0||d.ticket_b_tara>0||d.ticket_b_netto>0||d.ticket_b_in_at!=""||d.ticket_b_out_at!="")||d.jenis=="TBS"&&(d.ticket_a_id>0||d.ticket_b_id>0)||d.jenis=="TBSK"&&d.ticket_b_id>0?"!bg-blue-300":"",l=d=>(d.map(s=>{s.class_h=F(s)}),d),o=y("ticket_not_done");Z(()=>o.value,d=>{ge.value.map(s=>{let q=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(s.key)>-1;return["all","deleted","req_deleted"].indexOf(d)>-1?q&&(s.tbl_show=1):q&&(s.tbl_show=0),s}),we()},{immediate:!1});const T={};T._TimeZoneOffset=new Date().getTimezoneOffset(),T.sort="tanggal:desc";const C=y({}),j=y({from:"",to:""}),A=ae("token"),O=ae("role"),M=d=>d.includes(O.value),{data:J}=([k,$]=mt(async()=>xt(async()=>{B().loading_full=!0;let d=[];const[s,q]=await Promise.all([K("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{filter_status:o},retry:0})]);return s.status.value!=="error"&&(d=l(s.data.value.data)),s.status.value==="error"?(V().trigger(s.error),{trx_trps:d}):(B().loading_full=!1,{trx_trps:d})},"$X4xCu6yBOs")),k=await k,$(),k),h=y(J.value.trx_trps||[]),x=y([]),i=y(!1),p=async(d,s="")=>{B().loading_full=!0;let q=P.value.from?g(P.value.from).format("Y-MM-DD"):"",G=P.value.to?g(P.value.to).format("Y-MM-DD"):"";const{data:Y,error:re,status:de}=await K("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{jenis:d,online_status:i.value,from:q,to:G,transition_to:s},retry:0});if(B().loading_full=!1,de.value==="error"){V().trigger(re);return}x.value=Y.value.list_ticket},r=y(""),S=y({field:"tanggal",by:"desc"}),m=y(-1),H=z(()=>h.value[m.value]),_=y({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),U=()=>{T.like="",r.value!=""&&(T.like=`id:%${r.value}%,xto:%${r.value}%,jenis:%${r.value}%,pv_no:%${r.value}%,ticket_a_no:%${r.value}%,ticket_b_no:%${r.value}%,no_pol:%${r.value}%,supir:%${r.value}%,kernet:%${r.value}%,cost_center_code:%${r.value}%,cost_center_desc:%${r.value}%,pvr_id:%${r.value}%,pvr_no:%${r.value}%,tanggal:%${r.value}%,transition_to:%${r.value}%`),T.sort="",S.value.field&&(T.sort=S.value.field+":"+S.value.by),T.date_from=j.value.from?g(j.value.from).format("YYYY-MM-DD"):"",T.date_to=j.value.to?g(j.value.to).format("YYYY-MM-DD"):""},be=async()=>{B().loading_full=!0,C.value={},_.value.may_get_data=!1,T.page=_.value.page,T.page==1&&(h.value=[]),T.first_row&&delete T.first_row,T.page>1&&(T.first_row=JSON.stringify(h.value[0])),T.filter_status=o.value;const{data:d,error:s,status:q}=await K("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:T,retry:0});if(B().loading_full=!1,_.value.may_get_data=!0,q.value==="error"){V().trigger(s,C);return}_.value.page==1?h.value=l(d.value.data):_.value.page>1&&(h.value=[...h.value,...l(d.value.data)]),d.value.data.length==0&&(_.value.is_last_record=!0)},we=()=>{m.value=-1,_.value.page=1,_.value.is_last_record=!1,U(),be()};bt();const se=y(!1),ke=y(0),{display:Q}=Te();wt(Te());const Oe=()=>{m.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ke.value=h.value[m.value].id,se.value=!0)},W=y(!1),ie=y(0),_e=y(!1),Ye=()=>{m.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ie.value=h.value[m.value].id,W.value=!0,_e.value=!1)},qe=()=>{m.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ie.value=h.value[m.value].id,W.value=!0,_e.value=!0)},ne=y(!1),xe=y(0),Ie=d=>{xe.value=d,ne.value=!0},he=y({}),E=y(!1),Ve=y(""),Ke=async()=>{E.value&&(E.value=!1)},Fe=()=>{var d;m.value==-1?Q({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Ve.value="",he.value={id:h.value[m.value].id,"no pol":h.value[m.value].no_pol,tujuan:h.value[m.value].xto,permintaan:(d=h.value[m.value].req_deleted_by)==null?void 0:d.username,alasan:h.value[m.value].req_deleted_reason},E.value=!0)},Ue=async()=>{B().loading_full=!0;const d=new FormData;d.append("id",h.value[m.value].id),d.append("_method","DELETE");const{data:s,error:q,status:G}=await K("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:d,retry:0});if(B().loading_full=!1,G.value==="error"){V().trigger(q);return}let Y={...h.value[m.value]};Y.deleted=s.value.deleted,Y.deleted_user=s.value.deleted_user,Y.deleted_at=s.value.deleted_at,Y.deleted_by=s.value.deleted_by,Y.deleted_reason=s.value.deleted_reason,Y.class_h=F(Y),o.value!="all"?h.value.splice(m.value,1):h.value.splice(m.value,1,{...Y}),m.value=-1,E.value=!1},ee=y(!1),P=y({from:new Date().setDate(new Date().getDate()-3),to:new Date}),ye=d=>{d=="from"?P.value.from-P.value.to>0&&(P.value.from=P.value.to):P.value.to-P.value.from<0&&(P.value.to=P.value.from)},ge=y([{key:"no",label:"No",isai:!0},{key:"app1",label:"App 1"},{key:"app2",label:"App 2"},{key:"app3",label:"App 3"},{key:"id",label:"ID"},{key:"tanggal",label:"U.Jalan Per",dateformat:"DD-MM-Y"},{key:"no_pol",label:"No Pol",freeze:1},{key:"xto",label:"Tujuan"},{key:"tipe",label:"Tipe"},{key:"jenis",label:"Jenis"},{key:"amount",label:"Amount",class:" justify-end"},{key:"transition_to",label:"Peralihan"},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No"},{key:"ticket_a_bruto",label:"Bruto"},{key:"ticket_a_tara",label:"Tara"},{key:"ticket_a_netto",label:"Netto"},{key:"ticket_a_supir",label:"Supir"},{key:"ticket_a_no_pol",label:"No Pol"},{key:"ticket_a_in_at",label:"In At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"ticket_a_out_at",label:"Out At",dateformat:"DD-MM-Y HH:mm:ss"}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No"},{key:"ticket_b_bruto",label:"Bruto"},{key:"ticket_b_tara",label:"Tara"},{key:"ticket_b_netto",label:"Netto"},{key:"ticket_b_supir",label:"Supir"},{key:"ticket_b_no_pol",label:"No Pol"},{key:"ticket_b_in_at",label:"In At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"ticket_b_out_at",label:"Out At",dateformat:"DD-MM-Y HH:mm:ss"}]},{key:"supir",label:"Supir"},{key:"kernet",label:"Kernet"},{key:"created_at",label:"Created At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"updated_at",label:"Updated At",dateformat:"DD-MM-Y HH:mm:ss"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0},{key:"req_deleted_reason",label:"Req Deleted Reason",tbl_show:0}]),Le=z(()=>m.value>-1&&H.value.deleted==0&&H.value.req_deleted==0&&H.value.val2==0),Re=z(()=>!M(["PabrikTransport"])&&m.value>-1&&H.value.deleted==0&&H.value.req_deleted==0&&H.value.val2==0),ze=z(()=>!M(["PabrikTransport"])&&m.value>-1&&H.value.deleted==0&&H.value.req_deleted==1&&H.value.val2==0);return(d,s)=>{const q=ot,G=lt,Y=at,re=st,de=it,Je=_t,te=Ae("vue-date-picker"),oe=je,Ee=nt,Ge=dt,ce=ct,ue=ut,Xe=ft,Ze=pt,Qe=kl,We=bs,et=rt,tt=ht;return n(),u("div",ws,[w(q,{title:"List Transaction"}),e("div",ks,[e("div",xs,[e("div",hs,[e("div",ys,[I(e("select",{class:"","onUpdate:modelValue":s[0]||(s[0]=c=>Me(o)?o.value=c:null)},$s,512),[[le,t(o)]])]),t(Le)?(n(),u("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[1]||(s[1]=c=>Oe())},[w(G)])):f("",!0),t(m)>-1?(n(),u("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[2]||(s[2]=c=>qe())},[w(Y)])):f("",!0),t(ze)?(n(),u("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[3]||(s[3]=c=>Fe())},[w(re)])):f("",!0),t(Re)?(n(),u("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[4]||(s[4]=c=>Ye())},[w(de)])):f("",!0)]),e("div",Ds,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:s[5]||(s[5]=c=>ee.value=!0)},[w(Je)]),e("div",{class:"m-1 card-border cursor-pointer",onClick:s[6]||(s[6]=c=>i.value=!t(i))},[Ts,X(" : "),e("span",{class:kt(["font-bold",t(i)?"text-green-600":"text-red-600"])},a(t(i)?"ONLINE":"OFFLINE"),3)])])]),e("form",Ms,[e("div",js,[Ss,w(oe,null,{default:N(()=>[w(te,{modelValue:t(j).from,"onUpdate:modelValue":s[7]||(s[7]=c=>t(j).from=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Cs,a(t(C).date_from),1)]),e("div",As,[Ps,w(oe,null,{default:N(()=>[w(te,{modelValue:t(j).to,"onUpdate:modelValue":s[8]||(s[8]=c=>t(j).to=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Bs,a(t(C).date_to),1)]),e("div",Hs,[Ns,I(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":s[9]||(s[9]=c=>Me(r)?r.value=c:null),name:"search",placeholder:"Keyword"},null,512),[[fe,t(r)]])]),e("div",Os,[Ys,I(e("select",{class:"flex-grow","onUpdate:modelValue":s[10]||(s[10]=c=>t(S).field=c)},Is,512),[[le,t(S).field]])]),e("div",Vs,[Ks,I(e("select",{class:"flex-grow","onUpdate:modelValue":s[11]||(s[11]=c=>t(S).by=c)},Ls,512),[[le,t(S).by]])]),e("div",Rs,[e("button",{class:"",type:"submit",name:"button",onClick:s[12]||(s[12]=pe(c=>we(),["prevent"]))},[w(Ee,{class:"text-2xl"})])])]),w(Xe,{thead:t(ge),selected:t(m),onSetSelected:s[13]||(s[13]=c=>m.value=c),tbody:t(h),fnCallData:be,scrolling:t(_),onSetScrollingPage:s[14]||(s[14]=c=>t(_).page=c)},{absen:N(({item:c,index:L})=>[c.trx_absens&&c.trx_absens.length>0?(n(),R(Ge,{key:0,class:"cursor-pointer",onClick:_i=>Ie(L)},null,8,["onClick"])):f("",!0)]),app1:N(({item:c})=>[c.val?(n(),R(ue,{key:1})):(n(),R(ce,{key:0}))]),app2:N(({item:c})=>[c.val1?(n(),R(ue,{key:1})):(n(),R(ce,{key:0}))]),app3:N(({item:c})=>[c.val2?(n(),R(ue,{key:1})):(n(),R(ce,{key:0}))]),deleted_by_username:N(({item:c})=>{var L;return[X(a((L=c.deleted_by)==null?void 0:L.username),1)]}),req_deleted_by_username:N(({item:c})=>{var L;return[X(a((L=c.req_deleted_by)==null?void 0:L.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),w(Ze,{type:"custome",show:t(E),data:t(he),fnClose:Ke,fnConfirm:Ue},{words:N(()=>[X(" Data akan diproses dan "),zs,X(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),w(Qe,{show:t(se),fnClose:()=>{se.value=!1},fnLoadDBData:p,id:t(ke),p_data:t(h),list_ticket:t(x),online_status:t(i)},null,8,["show","fnClose","id","p_data","list_ticket","online_status"]),w(We,{show:t(W),fnClose:()=>{W.value=!1},id:t(ie),p_data:t(h),is_view:t(_e)},null,8,["show","fnClose","id","p_data","is_view"]),w(et,{show:t(ne),fnClose:()=>{ne.value=!1},index:t(xe),p_data:t(h)},null,8,["show","fnClose","index","p_data"]),t(ee)?(n(),u("div",Js,[e("div",Es,[e("div",Gs,[w(tt,{style:{color:"black",cursor:"pointer"},onClick:s[15]||(s[15]=c=>ee.value=!1)})]),e("div",Xs,[e("div",Zs,[e("div",Qs,[Ws,e("div",ei,[e("div",ti,[oi,e("div",li,[w(oe,null,{default:N(()=>[w(te,{modelValue:t(P).from,"onUpdate:modelValue":s[16]||(s[16]=c=>t(P).from=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:s[17]||(s[17]=c=>ye("from"))},null,8,["modelValue"])]),_:1})])]),e("div",ai,[si,e("div",ii,[w(oe,null,{default:N(()=>[w(te,{modelValue:t(P).to,"onUpdate:modelValue":s[18]||(s[18]=c=>t(P).to=c),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:s[19]||(s[19]=c=>ye("to"))},null,8,["modelValue"])]),_:1})])])])])])]),e("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:s[20]||(s[20]=c=>ee.value=!1)})])])):f("",!0)])}}};export{Ti as default};
