import{_ as vt}from"./Header.4c4e13a0.js";import{_ as Fe}from"./Plus.27bb8732.js";import{_ as ft}from"./Edit.18f13116.js";import{_ as mt}from"./Eyes.973285a5.js";import{_ as bt}from"./Delete.06731f63.js";import{_ as xt}from"./Void.8ee34c52.js";import{_ as wt}from"./Signature.fdb7556c.js";import{_ as yt}from"./PrinterEye.6d66a83c.js";import{_ as ht}from"./Line.1d1334cf.js";import{_ as gt}from"./Check.e0722d10.js";import{_ as kt}from"./TableView.01bce0bd.js";import{_ as $t}from"./PopupMini.vue.c4f8b53f.js";import{_ as Ue}from"./HeaderPopup.vue.e5ba255c.js";import{_ as Dt,a as At}from"./ToolsPopup.05068cf9.js";import{_ as Ct}from"./client-only.e61f926f.js";import{r as v,f as $e,H as Pe,J as K,g as ie,L as Tt,o as c,c as m,h as M,v as Be,a as e,b as $,k as t,l as Se,t as n,j as G,F as X,n as oe,G as P,w as R,m as Re,x,y as Y,p as Ye,e as Ee,M as Ie,s as qe,D as Pt,I as St,i as Te,d as H,q as qt,E as Vt,K as se}from"./entry.acc468b4.js";import{u as Ve}from"./useUtils.a9534de6.js";import{u as E}from"./useMyFetch.c756e4b3.js";import{_ as ze}from"./_plugin-vue_export-helper.c27b6911.js";import{u as Ot}from"./useDownload.737fa5e3.js";import"./Search.e365ca20.js";import"./Times.fc483249.js";const w=C=>(Ye("data-v-d7db9a00"),C=C(),Ee(),C),jt={class:"box-fixed"},Mt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Nt={class:"w-full flex flex-col items-center grow overflow-auto"},Ft={class:"w-full flex flex-row flex-wrap"},Ut={class:"w-full sm:w-3/12 flex px-2 py-3"},Bt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Rt=w(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),Yt={class:"w-6/12 flex flex-col flex-wrap p-1"},Et=w(()=>e("label",{for:""},"Tujuan",-1)),It=Ie('<option value="" data-v-d7db9a00></option><option value="KPN" data-v-d7db9a00>KPN</option><option value="KAS" data-v-d7db9a00>KAS</option><option value="KUS" data-v-d7db9a00>KUS</option><option value="ARP" data-v-d7db9a00>ARP</option><option value="KAP" data-v-d7db9a00>KAP</option><option value="SMP" data-v-d7db9a00>SMP</option>',7),zt=[It],Kt={class:"text-red-500"},Ht={class:"w-6/12 flex flex-col flex-wrap p-1"},Lt=w(()=>e("label",{for:""},"Tipe",-1)),Jt=["disabled"],Gt=w(()=>e("option",{value:""},null,-1)),Xt=w(()=>e("option",{value:"From"},"Dari",-1)),Zt=w(()=>e("option",{value:"To"},"Ke",-1)),Qt=[Gt,Xt,Zt],Wt={class:"text-red-500"},el={class:"w-full sm:w-9/12 flex px-2 py-3"},tl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ll=w(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),al={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},sl=w(()=>e("label",{for:""},"ID",-1)),ol=["disabled"],nl={id:"standby_mst"},dl=["value"],il={class:"text-red-500"},rl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_l=w(()=>e("label",{for:""},"Name",-1)),ul={class:"card-border disabled"},cl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},pl=w(()=>e("label",{for:""},"Type",-1)),vl={class:"card-border disabled"},fl={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ml=w(()=>e("label",{for:""},"Amount",-1)),bl={class:"card-border disabled"},xl={class:"w-full flex flex-wrap"},wl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},yl=w(()=>e("label",{for:""},"Supir",-1)),hl=["disabled"],gl={id:"supir"},kl=["value"],$l={class:"text-red-500"},Dl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Al=w(()=>e("label",{for:""},"Kernet",-1)),Cl=["disabled"],Tl={id:"kernet"},Pl=["value"],Sl={class:"text-red-500"},ql={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Vl=w(()=>e("label",{for:""},"No Pol",-1)),Ol=["disabled"],jl={id:"vehicle"},Ml=["value"],Nl={class:"text-red-500"},Fl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ul=w(()=>e("label",{for:""},"Tujuan",-1)),Bl=["disabled"],Rl={id:"xto"},Yl={class:"text-red-500"},El={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Il=w(()=>e("label",{for:""},"Note For Remarks",-1)),zl=["disabled"],Kl={class:"text-red-500"},Hl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ll=w(()=>e("label",{for:""},"Referensi",-1)),Jl=["disabled"],Gl={class:"text-red-500"},Xl={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Zl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Ql=w(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Wl={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ea=w(()=>e("label",{for:""}," Code",-1)),ta=["disabled"],la={id:"cost_center"},aa=["value"],sa={class:"text-red-500"},oa={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},na=w(()=>e("label",{for:""},"Desc",-1)),da={class:"card-border disabled"},ia={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ra={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},_a=w(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),ua={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ca=w(()=>e("label",{for:""},"No",-1)),pa={class:"card-border disabled"},va={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},fa=w(()=>e("label",{for:""},"Total",-1)),ma={class:"card-border disabled"},ba={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},xa={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},wa=w(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ya={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ha=w(()=>e("label",{for:""},"No",-1)),ga={class:"card-border disabled"},ka={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},$a=w(()=>e("label",{for:""},"Total",-1)),Da={class:"card-border disabled"},Aa={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},Ca={class:"w-full",role:"sticky"},Ta={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Pa={class:"sticky -top-1 !z-[2]"},Sa=["colspan"],qa={class:"sticky top-7 !z-[2]"},Va={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},Oa=w(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),ja=w(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),Ma=w(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan",-1)),Na={ref:"to_move"},Fa=["data-index"],Ua={key:0,class:"tools cell"},Ba={class:"w-full h-full flex items-center justify-center"},Ra=["onClick"],Ya={class:"cell"},Ea={class:"w-full h-full flex items-center justify-center relative"},Ia={class:"cell"},za={class:"w-full h-full flex items-center justify-center"},Ka=["disabled","onUpdate:modelValue"],Ha={key:0},La={class:"tools cell"},Ja={class:"w-full flex items-center justify-end"},Ga={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(C){const y=C,{$moment:Q}=qe(),{pointFormat:L}=Ve(),re={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[]},o=v([]),W=v({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});let S={...re};const l=v({...re}),Z=$e("token"),T=v({});Pe();const I=async()=>{x().loading_full=!0,T.value={};const d=new FormData;d.append("transition_target",l.value.transition_target),d.append("transition_type",l.value.transition_type),d.append("standby_mst_id",l.value.standby_mst_id),d.append("supir",l.value.supir),d.append("kernet",l.value.kernet),d.append("no_pol",l.value.no_pol),d.append("xto",l.value.xto),d.append("note_for_remarks",l.value.note_for_remarks),d.append("ref",l.value.ref),d.append("cost_center_code",l.value.cost_center_code),d.append("online_status",y.online_status);let u=[...o.value];u=u.map(z=>(z.tanggal=z.tanggal?Q(z.tanggal).format("Y-MM-DD"):"",z)),d.append("details",JSON.stringify(u));let V="post",F=y.id;F==0||(d.append("id",F),d.append("_method","PUT"));const{data:U,error:fe,status:me}=await E("/standby_trx",{method:V,headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},body:d,retry:0});if(x().loading_full=!1,me.value==="error"){Y().trigger(fe,T);return}if(l.value.updated_at=U.value.updated_at,y.id<=0)l.value.id=U.value.id,l.value.created_at=U.value.created_at,y.p_data.unshift(l.value);else{let z=y.p_data.map(ne=>ne.id).indexOf(y.id);z>=-1&&y.p_data.splice(z,1,{...l.value})}y.fnClose()},pe=K(()=>[...new Set(j.value.filter(d=>d.role=="Supir"))]),h=K(()=>[...new Set(j.value.filter(d=>d.role=="Kernet"))]),D=K(()=>!1),_=async()=>{x().loading_full=!0;const{data:d,error:u,status:V}=await E("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(x().loading_full=!1,V.value==="error"){Y().trigger(u);return}l.value=d.value.data,S={...d.value.data};let F="Edit";o.value=d.value.data.details.map(U=>(U.p_status=F,U.key=U.ordinal,U))},k=v([]),O=v([]),ee=v([]),j=v([]),i=async()=>{x().loading_full=!0;const{data:d,error:u,status:V}=await E("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},retry:0});if(x().loading_full=!1,V.value==="error"){Y().trigger(u);return}k.value=d.value.list_standby_mst,O.value=d.value.list_xto,ee.value=d.value.list_vehicle,j.value=d.value.list_employee},b=v(-1),N=v(!1),we=v({left:0,top:0}),ye=(d,u)=>{b.value=u,N.value=!0,we.value={left:d.clientX,top:d.clientY}},he=()=>{o.value.push({...W.value,p_status:"Add"})},_e=()=>{N.value=!1},ve=(d="")=>{if(d=="insert")o.value.splice(b.value,0,{...W.value,p_status:"Add"});else if(d=="delete")o.value[b.value].p_status=="Edit"?o.value[b.value].p_status="Remove":o.value.splice(b.value,1);else if(d=="move_top"){let u=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value-1,0,{...u})}else if(d=="move_bottom"){let u=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value+1,0,{...u})}N.value=!1};ie(()=>y.show,async(d,u)=>{d==!0&&(await i(),await y.fnLoadDBData(),T.value={},l.value={...re},o.value=[],y.id!=0&&_())},{immediate:!0});let De={name:"",tipe:"",amount:0};return ie(()=>l.value.standby_mst_id,(d,u)=>{if(d==""||d!=""){let V=k.value.filter(F=>F.id==d);V.length>0?l.value.standby_mst_={...V[0]}:l.value.standby_mst_id==S.standby_mst_id?l.value.standby_mst_={...S.standby_mst_}:l.value.standby_mst_={...De}}},{}),ie(()=>l.value.cost_center_code,(d,u)=>{if(d==""&&(l.value.cost_center_desc=""),d){let V=y.list_cost_center.filter(F=>F.CostCenter==d);V.length>0?l.value.cost_center_desc=V[0].Description:l.value.cost_center_code==S.cost_center_code&&(l.value.cost_center_desc=S.cost_center_desc)}},{deep:!0,immediate:!0}),(d,u)=>{var ne,ae,te;const V=Ue,F=Dt,U=Tt("vue-date-picker"),fe=Ct,me=Fe,z=At;return c(),m(X,null,[M(e("section",jt,[e("div",null,[$(V,{title:"Form Transaction",fn:C.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Mt,[e("div",Nt,[e("div",Ft,[e("div",Ut,[e("div",Bt,[Rt,e("div",Yt,[Et,M(e("select",{"onUpdate:modelValue":u[0]||(u[0]=r=>t(l).transition_target=r)},zt,512),[[Se,t(l).transition_target]]),e("p",Kt,n(t(T).transition_target),1)]),e("div",Ht,[Lt,M(e("select",{"onUpdate:modelValue":u[1]||(u[1]=r=>t(l).transition_type=r),disabled:t(l).pvr_no!=""},Qt,8,Jt),[[Se,t(l).transition_type]]),e("p",Wt,n(t(T).transition_type),1)])])]),e("div",el,[e("div",tl,[ll,e("div",al,[sl,M(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":u[2]||(u[2]=r=>t(l).standby_mst_id=r),disabled:t(l).pvr_no!=""},null,8,ol),[[G,t(l).standby_mst_id]]),e("datalist",nl,[(c(!0),m(X,null,oe(t(k),r=>(c(),m("option",{value:r.id},n(r.name+"-"+r.tipe+"-"+t(L)(r.amount||0)),9,dl))),256))]),e("p",il,n(t(T).standby_mst_id),1)]),e("div",rl,[_l,e("div",ul,n((ne=t(l).standby_mst_)==null?void 0:ne.name),1)]),e("div",cl,[pl,e("div",vl,n((ae=t(l).standby_mst_)==null?void 0:ae.tipe),1)]),e("div",fl,[ml,e("div",bl,n(t(L)((te=t(l).standby_mst_)==null?void 0:te.amount)),1)])])]),e("div",xl,[e("div",wl,[yl,M(e("input",{type:"text",list:"supir","onUpdate:modelValue":u[3]||(u[3]=r=>t(l).supir=r),disabled:t(l).pvr_no!=""},null,8,hl),[[G,t(l).supir]]),e("datalist",gl,[(c(!0),m(X,null,oe(t(pe),r=>(c(),m("option",{value:r.name},n(r.name),9,kl))),256))]),e("p",$l,n(t(T).supir),1)]),e("div",Dl,[Al,M(e("input",{type:"text",list:"kernet","onUpdate:modelValue":u[4]||(u[4]=r=>t(l).kernet=r),disabled:t(l).pvr_no!=""},null,8,Cl),[[G,t(l).kernet]]),e("datalist",Tl,[(c(!0),m(X,null,oe(t(h),r=>(c(),m("option",{value:r.name},n(r.name),9,Pl))),256))]),e("p",Sl,n(t(T).kernet),1)]),e("div",ql,[Vl,M(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":u[5]||(u[5]=r=>t(l).no_pol=r),disabled:t(l).pvr_no!=""},null,8,Ol),[[G,t(l).no_pol]]),e("datalist",jl,[(c(!0),m(X,null,oe(t(ee),r=>(c(),m("option",{value:r.no_pol},n(r.no_pol),9,Ml))),256))]),e("p",Nl,n(t(T).no_pol),1)]),e("div",Fl,[Ul,M(e("input",{type:"text",list:"xto","onUpdate:modelValue":u[6]||(u[6]=r=>t(l).xto=r),disabled:t(l).pvr_no!=""},null,8,Bl),[[G,t(l).xto]]),e("datalist",Rl,[(c(!0),m(X,null,oe(t(O),r=>(c(),m("option",null,n(r),1))),256))]),e("p",Yl,n(t(T).xto),1)]),e("div",El,[Il,M(e("textarea",{"onUpdate:modelValue":u[7]||(u[7]=r=>t(l).note_for_remarks=r),disabled:t(l).pvr_no!=""}," ",8,zl),[[G,t(l).note_for_remarks]]),e("p",Kl,n(t(T).note_for_remarks),1)]),e("div",Hl,[Ll,M(e("input",{type:"text","onUpdate:modelValue":u[8]||(u[8]=r=>t(l).ref=r),disabled:t(l).pvr_no!=""},null,8,Jl),[[G,t(l).ref]]),e("p",Gl,n(t(T).ref),1)])]),e("div",Xl,[e("div",Zl,[Ql,e("div",Wl,[ea,M(e("input",{list:"cost_center","onUpdate:modelValue":u[9]||(u[9]=r=>t(l).cost_center_code=r),disabled:t(l).pvr_no!=""},null,8,ta),[[G,t(l).cost_center_code]]),e("datalist",la,[(c(!0),m(X,null,oe(C.list_cost_center,r=>(c(),m("option",{value:r.CostCenter},n(r.CostCenter+"-"+r.Description),9,aa))),256))]),e("p",sa,n(t(T).cost_center_code),1)]),e("div",oa,[na,e("div",da,n(t(l).cost_center_desc),1)])])]),e("div",ia,[e("div",ra,[_a,e("div",ua,[ca,e("div",pa,n(t(l).pvr_no),1)]),e("div",va,[fa,e("div",ma,n(t(L)(t(l).pvr_total||0)),1)])])]),e("div",ba,[e("div",xa,[wa,e("div",ya,[ha,e("div",ga,n(t(l).pv_no),1)]),e("div",ka,[$a,e("div",Da,n(t(L)(t(l).pv_total)),1)])])]),e("div",Aa,[e("div",Ca,[e("table",Ta,[e("thead",null,[e("tr",Pa,[e("td",{colspan:t(D)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,Sa)]),e("tr",qa,[t(D)?P("",!0):(c(),m("th",Va)),Oa,ja,Ma])]),e("tbody",Na,[(c(!0),m(X,null,oe(t(o),(r,ue)=>(c(),m(X,{key:ue},[r.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":ue},[t(D)?P("",!0):(c(),m("td",Ua,[e("div",Ba,[e("button",{type:"button",name:"button",onClick:de=>ye(de,ue)},[$(F)],8,Ra)])])),e("td",null,n(ue+1)+".",1),e("td",Ya,[e("div",Ea,[$(fe,null,{default:R(()=>[$(U,{modelValue:r.tanggal,"onUpdate:modelValue":de=>r.tanggal=de,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),e("td",Ia,[e("div",za,[M(e("textarea",{disabled:t(D),class:"p-1 w-full","onUpdate:modelValue":de=>r.note=de,cols:"7",rows:"2"},null,8,Ka),[[G,r.note]])])])],8,Fa)):P("",!0)],64))),128)),t(D)?P("",!0):(c(),m("tr",Ha,[e("td",La,[e("button",{type:"button",name:"button",onClick:u[10]||(u[10]=r=>he())},[$(me)])])]))],512)])])])])]),e("div",Ja,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:u[11]||(u[11]=r=>C.fnClose())}," Cancel "),t(D)?P("",!0):(c(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:u[12]||(u[12]=Re(r=>I(),["prevent"]))}," Save "))])])])],512),[[Be,C.show]]),$(z,{show:t(N),coor:t(we),fn:_e,data:t(o),data_index:t(b),onReplyAct:u[13]||(u[13]=r=>ve(r))},null,8,["show","coor","data","data_index"])],64)}}},Xa=ze(Ga,[["__scopeId","data-v-d7db9a00"]]);const g=C=>(Ye("data-v-d6441218"),C=C(),Ee(),C),Za={class:"box-fixed"},Qa={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Wa={class:"w-full flex flex-col items-center grow overflow-auto"},es={class:"w-full flex flex-row flex-wrap"},ts={class:"w-full sm:w-3/12 flex px-2 py-3"},ls={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},as=g(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ss={class:"w-6/12 flex flex-col flex-wrap p-1"},os=g(()=>e("label",{for:""},"Tujuan",-1)),ns={class:"card-border"},ds={class:"w-6/12 flex flex-col flex-wrap p-1"},is=g(()=>e("label",{for:""},"Tipe",-1)),rs={class:"card-border"},_s={class:"w-full sm:w-9/12 flex px-2 py-3"},us={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},cs=g(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),ps={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},vs=g(()=>e("label",{for:""},"ID",-1)),fs={class:"card-border"},ms={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},bs=g(()=>e("label",{for:""},"Name",-1)),xs={class:"card-border"},ws={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ys=g(()=>e("label",{for:""},"Type",-1)),hs={class:"card-border"},gs={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ks=g(()=>e("label",{for:""},"Amount",-1)),$s={class:"card-border"},Ds={class:"w-full flex flex-wrap"},As={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Cs=g(()=>e("label",{for:""},"Supir",-1)),Ts={class:"card-border"},Ps={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ss=g(()=>e("label",{for:""},"Kernet",-1)),qs={class:"card-border"},Vs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Os=g(()=>e("label",{for:""},"No Pol",-1)),js={class:"card-border"},Ms={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ns=g(()=>e("label",{for:""},"Tujuan",-1)),Fs={class:"card-border"},Us={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bs=g(()=>e("label",{for:""},"Note For Remarks",-1)),Rs={class:"card-border"},Ys={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Es=g(()=>e("label",{for:""},"Referensi",-1)),Is={class:"card-border"},zs={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Ks={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Hs=g(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Ls={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Js=g(()=>e("label",{for:""}," Code",-1)),Gs={class:"card-border"},Xs={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Zs=g(()=>e("label",{for:""},"Desc",-1)),Qs={class:"card-border disabled"},Ws={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},eo={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},to=g(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),lo={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ao=g(()=>e("label",{for:""},"No",-1)),so={class:"card-border disabled"},oo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},no=g(()=>e("label",{for:""},"Total",-1)),io={class:"card-border disabled"},ro={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},_o={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},uo=g(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),co={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},po=g(()=>e("label",{for:""},"No",-1)),vo={class:"card-border disabled"},fo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},mo=g(()=>e("label",{for:""},"Total",-1)),bo={class:"card-border disabled"},xo={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},wo={class:"w-full",role:"sticky"},yo={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},ho={class:"sticky -top-1 !z-[2]"},go=["colspan"],ko=g(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),$o={ref:"to_move"},Do=["data-index"],Ao={class:"cell"},Co={class:"w-full h-full flex items-center justify-center relative"},To={class:"cell"},Po={class:"w-full h-full flex items-center justify-center"},So={class:"w-full flex items-center justify-end"},qo={class:"w-full flex flex-wrap p-3 items-center"},Vo=g(()=>e("div",null," Di Validasi oleh : ",-1)),Oo={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},jo={key:0},Mo={key:1},No={key:2},Fo={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(C){const y=C,{$moment:Q}=qe(),{pointFormat:L}=Ve(),o=v({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),W=$e("token"),S=v({}),l=v(null),Z=v([]),T=async()=>{x().loading_full=!0,S.value={};const h=new FormData;let D="post",_=y.id;_==0||(h.append("id",_),h.append("_method","PUT"));const{data:k,error:O,status:ee}=await E("/standby_trx_validasi",{method:D,headers:{Authorization:`Bearer ${W.value}`,Accept:"application/json"},body:h,retry:0});if(x().loading_full=!1,ee.value==="error"){Y().trigger(O,S);return}o.value.val=k.value.val,o.value.val_user=k.value.val_user,o.value.val_by=k.value.val_by,o.value.val_at=k.value.val_at,o.value.val1=k.value.val1,o.value.val1_user=k.value.val1_user,o.value.val1_by=k.value.val1_by,o.value.val1_at=k.value.val1_at,o.value.val2=k.value.val2,o.value.val2_user=k.value.val2_user,o.value.val2_by=k.value.val2_by,o.value.val2_at=k.value.val2_at;let j=y.p_data.map(i=>i.id).indexOf(y.id);j>=-1&&y.p_data.splice(j,1,{...o.value}),y.fnClose()},I=async()=>{x().loading_full=!0;const{data:h,error:D,status:_}=await E("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${W.value}`,Accept:"application/json"},params:{id:y.id},retry:0});if(x().loading_full=!1,_.value==="error"){Y().trigger(D);return}o.value=h.value.data,Z.value=h.value.data.details};K(()=>{let h=0;return Z.value.forEach(D=>{D.p_status!="Remove"&&(h+=D.amount)}),h});const pe=K(()=>!1);return ie(()=>y.show,(h,D)=>{h==!0&&(y.is_view==!1&&setTimeout(()=>{l.value.focus()},1),I())},{immediate:!0}),(h,D)=>{var k,O,ee;const _=Ue;return M((c(),m("section",Za,[e("div",null,[$(_,{title:"Form Transaction Standby Validation",fn:C.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Qa,[e("div",Wa,[e("div",es,[e("div",ts,[e("div",ls,[as,e("div",ss,[os,e("div",ns,n(t(o).transition_target),1)]),e("div",ds,[is,e("div",rs,n(t(o).transition_type),1)])])]),e("div",_s,[e("div",us,[cs,e("div",ps,[vs,e("div",fs,n(t(o).standby_mst_id),1)]),e("div",ms,[bs,e("div",xs,n((k=t(o).standby_mst_)==null?void 0:k.name),1)]),e("div",ws,[ys,e("div",hs,n((O=t(o).standby_mst_)==null?void 0:O.tipe),1)]),e("div",gs,[ks,e("div",$s,n(t(L)((ee=t(o).standby_mst_)==null?void 0:ee.amount)),1)])])]),e("div",Ds,[e("div",As,[Cs,e("div",Ts,n(t(o).supir),1)]),e("div",Ps,[Ss,e("div",qs,n(t(o).kernet),1)]),e("div",Vs,[Os,e("div",js,n(t(o).no_pol),1)]),e("div",Ms,[Ns,e("div",Fs,n(t(o).xto),1)]),e("div",Us,[Bs,e("div",Rs,n(t(o).note_for_remarks),1)]),e("div",Ys,[Es,e("div",Is,n(t(o).ref),1)])]),e("div",zs,[e("div",Ks,[Hs,e("div",Ls,[Js,e("div",Gs,n(t(o).cost_center_code),1)]),e("div",Xs,[Zs,e("div",Qs,n(t(o).cost_center_desc),1)])])]),e("div",Ws,[e("div",eo,[to,e("div",lo,[ao,e("div",so,n(t(o).pvr_no),1)]),e("div",oo,[no,e("div",io,n(t(L)(t(o).pvr_total||0)),1)])])]),e("div",ro,[e("div",_o,[uo,e("div",co,[po,e("div",vo,n(t(o).pv_no),1)]),e("div",fo,[mo,e("div",bo,n(t(L)(t(o).pv_total)),1)])])]),e("div",xo,[e("div",wo,[e("table",yo,[e("thead",null,[e("tr",ho,[e("td",{colspan:t(pe)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,go)]),ko]),e("tbody",$o,[(c(!0),m(X,null,oe(t(Z),(j,i)=>(c(),m(X,{key:i},[j.p_status!="Remove"?(c(),m("tr",{key:0,"data-index":i},[e("td",null,n(i+1)+".",1),e("td",Ao,[e("div",Co,n(t(Q)(j.tanggal).format("DD-MM-YYYY")),1)]),e("td",To,[e("div",Po,n(j.note),1)])],8,Do)):P("",!0)],64))),128))],512)])])])])]),e("div",So,[e("div",qo,[Vo,t(o).val||t(o).val1||t(o).val2?(c(),m("div",Oo,[t(o).val?(c(),m("div",jo," App 1 : "+n(t(o).val_by.username)+" ( "+n(t(o).val_at?t(Q)(t(o).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):P("",!0),t(o).val1?(c(),m("div",Mo," App 2 : "+n(t(o).val1_by.username)+" ( "+n(t(o).val1_at?t(Q)(t(o).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):P("",!0),t(o).val2?(c(),m("div",No," App 2 : "+n(t(o).val2_by.username)+" ( "+n(t(o).val2_at?t(Q)(t(o).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):P("",!0)])):P("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:D[0]||(D[0]=j=>C.fnClose())}," Cancel "),C.is_view==0?(c(),m("button",{key:0,ref_key:"it_val",ref:l,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:D[1]||(D[1]=Re(j=>T(),["prevent"]))}," Validasi ",512)):P("",!0)])])])],512)),[[Be,C.show]])}}},Uo=ze(Fo,[["__scopeId","data-v-d6441218"]]),Bo={class:"w-full h-full flex flex-col"},Ro={class:"w-full flex grow flex-col overflow-auto h-0"},Yo={class:"w-full flex justify-between flex-wrap"},Eo={class:"grow flex"},Io={class:"m-1"},zo=Ie('<option value="trx_not_done">Undone</option><option value="trx_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Ko=[zo],Ho={key:0,class:"flex"},Lo=e("span",{class:"text-xs"},"Mode",-1),Jo={class:"grow mb-5"},Go=e("b",null,"tidak dapat dibatalkan lagi",-1),Xo={class:"grow mb-5"},Zo=e("b",null,"tidak dapat dibatalkan lagi",-1),hn={__name:"trx",async setup(C){let y,Q;const{$moment:L}=qe(),{pointFormat:re}=Ve(),o=a=>a.deleted==1?"!bg-red-400":a.pvr_id>0&&a.req_deleted==1?"!bg-yellow-300":a.pv_id>0?"!bg-blue-300":"",W=a=>(a.map(s=>{s.class_h=o(s)}),a),S=v("trx_not_done");ie(()=>S.value,a=>{Me.value.map(s=>{let A=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(s.key)>-1;return["all","deleted","req_deleted"].indexOf(a)>-1?A&&(s.tbl_show=1):A&&(s.tbl_show=0),s}),he()},{immediate:!1});const l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const Z=v({}),T=v({from:"",to:""}),I=$e("token"),pe=$e("role"),h=a=>a.includes(pe.value),{data:D}=([y,Q]=Pt(async()=>Vt(async()=>{x().loading_full=!0;let a=[];const[s,A]=await Promise.all([E("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{filter_status:S},retry:0})]);return s.status.value!=="error"&&(a=W(s.data.value.data)),s.status.value==="error"?(Y().trigger(s.error),{standby_trxs:a}):(x().loading_full=!1,{standby_trxs:a})},"$rVBHTgwE0s")),y=await y,Q(),y),_=v(D.value.standby_trxs||[]),k=v([]),O=v(!1),ee=async()=>{x().loading_full=!0;const{data:a,error:s,status:A}=await E("/standby_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{online_status:O.value},retry:0});if(x().loading_full=!1,A.value==="error"){Y().trigger(s);return}k.value=a.value.list_cost_center},j=v({field:"tanggal",by:"desc"}),i=v(-1),b=K(()=>_.value[i.value]),N=v({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),we=()=>{l.like="";let a=JSON.parse(JSON.stringify(x()._tv.global_keyword));a!=""&&(l.like=`id:%${a}%,transition_target:%${a}%,transition_type:%${a}%,standby_mst_name:%${a}%,standby_mst_type:%${a}%,supir:%${a}%,kernet:%${a}%,no_pol:%${a}%,xto:%${a}%,pvr_no:%${a}%,pv_no:%${a}%,pvr_no:%${a}%,tanggal:%${a}%,transition_to:%${a}%,cost_center_code:%${a}%`),l.sort="",j.value.field&&(l.sort=j.value.field+":"+j.value.by),l.date_from=T.value.from?L(T.value.from).format("YYYY-MM-DD"):"",l.date_to=T.value.to?L(T.value.to).format("YYYY-MM-DD"):"",l.filter_model=JSON.stringify(x()._tv.filter_model)},ye=async()=>{x().loading_full=!0,Z.value={},N.value.may_get_data=!1,l.page=N.value.page,l.page==1&&(_.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(_.value[0])),l.filter_status=S.value;const{data:a,error:s,status:A}=await E("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:l,retry:0});if(x().loading_full=!1,N.value.may_get_data=!0,A.value==="error"){Y().trigger(s,Z);return}N.value.page==1?_.value=W(a.value.data):N.value.page>1&&(_.value=[..._.value,...W(a.value.data)]),a.value.data.length==0&&(N.value.is_last_record=!0),x()._tv.filter_box=!1},he=()=>{i.value=-1,N.value.page=1,N.value.is_last_record=!1,we(),ye()},_e=v(!1),ve=v(0),De=()=>{ve.value=0,_e.value=!0},{display:d}=Pe();St(Pe());const u=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ve.value=_.value[i.value].id,_e.value=!0)},V=v(!1),F=v(0),U=v(!1),fe=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value=_.value[i.value].id,V.value=!0,U.value=!1)},me=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value=_.value[i.value].id,V.value=!0,U.value=!0)},z=v(!1),ne=v({}),ae=v(!1),te=v(""),r=async()=>{ae.value&&(ae.value=!1)},ue=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value="",ne.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto},ae.value=!0)};ie(()=>te.value,a=>{a.trim().length>0?z.value=!0:z.value=!1},{immediate:!1});const de=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("deleted_reason",te.value),a.append("_method","DELETE");const{data:s,error:A,status:J}=await E("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,J.value==="error"){Y().trigger(A);return}let p={..._.value[i.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,ae.value=!1},Ae=v(!1),Oe=v({}),be=v(!1),ce=v(""),Ke=async()=>{be.value&&(be.value=!1)},He=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value="",Oe.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto},be.value=!0)},je=v({}),xe=v(!1),Le=v(""),Je=async()=>{xe.value&&(xe.value=!1)},Ge=()=>{var a;i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Le.value="",je.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto,permintaan:(a=_.value[i.value].approve_void_by)==null?void 0:a.username,alasan:_.value[i.value].approve_void_reason},xe.value=!0)},Xe=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("_method","DELETE");const{data:s,error:A,status:J}=await E("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,J.value==="error"){Y().trigger(A);return}let p={..._.value[i.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,xe.value=!1};ie(()=>ce.value,a=>{a.trim().length>0?Ae.value=!0:Ae.value=!1},{immediate:!1});const Ze=async()=>{x().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("req_deleted_reason",ce.value),a.append("_method","DELETE");const{data:s,error:A,status:J}=await E("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,J.value==="error"){Y().trigger(A);return}let p={..._.value[i.value]};p.req_deleted=s.value.req_deleted,p.req_deleted_user=s.value.req_deleted_user,p.req_deleted_by=s.value.req_deleted_by,p.req_deleted_at=s.value.req_deleted_at,p.req_deleted_reason=s.value.req_deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,be.value=!1},{printHtml:Qe}=Ot(),We=async()=>{if(i.value==-1){d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}x().loading_full=!0;const{data:a,error:s,status:A}=await E("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{id:_.value[i.value].id},retry:0});if(x().loading_full=!1,A.value==="error"){Y().trigger(s);return}Qe(a.value.html,318)},et=async()=>{x().loading_full=!0;const a=new FormData;a.append("online_status",O.value);const{data:s,error:A,status:J}=await E("/standby_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,J.value==="error"){Y().trigger(A);return}s.value.forEach(p=>{let le=_.value.map(q=>q.id).indexOf(p.id);if(le!==-1){let q=_.value[le];q.pvr_id=p.pvr_id,q.pvr_no=p.pvr_no,q.pvr_total=p.pvr_total,q.pvr_had_detail=p.pvr_had_detail,q.updated_at=p.updated_at,_.value.splice(le,1,{...q})}}),d({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},tt=async()=>{x().loading_full=!0;const a=new FormData;a.append("online_status",O.value);const{data:s,error:A,status:J}=await E("/standby_trx_do_update_pv",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(x().loading_full=!1,J.value==="error"){Y().trigger(A);return}s.value.data.forEach(p=>{let le=_.value.map(q=>q.id).indexOf(p.id);if(le!==-1){let q=_.value[le];q.pv_id=p.pv_id,q.pv_no=p.pv_no,q.pv_total=p.pv_total,q.pv_datetime=p.pv_datetime,q.updated_at=p.updated_at,_.value.splice(le,1,{...q})}}),d({show:!0,status:"Success",message:"Update PV Done"})},Me=v([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"standby_mst_name",label:"Nama Standby",filter_on:1,type:"string"},{key:"standby_mst_type",label:"Tipe Standby",filter_on:1,type:"string"},{key:"standby_mst_amount",label:"Total Standby",class:" justify-end",filter_on:1,type:"number"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"ref",label:"Ref"},{key:"transition_target",label:"Tujuan Pengalihan",filter_on:1,type:"select",select_item:["KPN","KAS","KUS","ARP","KAP","SMP"]},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),lt=K(()=>["trx_not_done","all"].indexOf(S.value)>-1&&h(["PabrikTransport"])),at=K(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,0].indexOf(b.value.val)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),st=K(()=>i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&(h(["PabrikTransport"])&&[void 0,0].indexOf(b.value.val)>-1||h(["PabrikMandor"])&&[void 0,0].indexOf(b.value.val1)>-1||h(["Logistic"])&&[void 0,0].indexOf(b.value.val2)>-1)&&[void 0,""].indexOf(b.value.pvr_id)>-1),ot=K(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),nt=K(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.pvr_id!=""),dt=K(()=>h(["Logistic"])&&i.value>-1&&b.value.deleted==0&&b.value.req_deleted==1&&b.value.val2==0),it=K(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.val==1);return(a,s)=>{const A=vt,J=Fe,p=ft,le=mt,q=bt,Ne=xt,rt=wt,_t=yt,ge=ht,ke=gt,ut=kt,Ce=$t,ct=Xa,pt=Uo;return c(),m("div",Bo,[$(A,{title:"List Transaction"}),e("div",Ro,[e("div",Yo,[e("div",Eo,[e("div",Io,[M(e("select",{class:"","onUpdate:modelValue":s[0]||(s[0]=f=>Te(S)?S.value=f:null)},Ko,512),[[Se,t(S)]])]),t(lt)?(c(),m("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[1]||(s[1]=f=>De())},[$(J)])):P("",!0),t(at)?(c(),m("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[2]||(s[2]=f=>u())},[$(p)])):P("",!0),t(i)>-1?(c(),m("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[3]||(s[3]=f=>me())},[$(le)])):P("",!0),t(ot)?(c(),m("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[4]||(s[4]=f=>ue())},[$(q)])):P("",!0),t(nt)?(c(),m("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[5]||(s[5]=f=>He())},[$(Ne)])):P("",!0),t(dt)?(c(),m("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[6]||(s[6]=f=>Ge())},[$(Ne)])):P("",!0),t(st)?(c(),m("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[7]||(s[7]=f=>fe())},[$(rt)])):P("",!0),t(it)?(c(),m("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[8]||(s[8]=f=>We())},[$(_t)])):P("",!0)]),h(["PabrikTransport"])?(c(),m("div",Ho,[e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[9]||(s[9]=f=>et())}," Gen/Update PVR "),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[10]||(s[10]=f=>tt())}," Update PV "),e("div",{class:"m-1 card-border cursor-pointer",onClick:s[11]||(s[11]=f=>O.value=!t(O))},[Lo,H(" : "),e("span",{class:qt(["font-bold",t(O)?"text-green-600":"text-red-600"])},n(t(O)?"ONLINE":"OFFLINE"),3)])])):P("",!0)]),$(ut,{thead:t(Me),selected:t(i),onSetSelected:s[12]||(s[12]=f=>i.value=f),tbody:t(_),fnCallData:ye,scrolling:t(N),onSetScrollingPage:s[13]||(s[13]=f=>t(N).page=f),onDoFilter:s[14]||(s[14]=f=>he())},{val:R(({item:f})=>[f.val?(c(),se(ke,{key:1})):(c(),se(ge,{key:0}))]),val1:R(({item:f})=>[f.val1?(c(),se(ke,{key:1})):(c(),se(ge,{key:0}))]),val2:R(({item:f})=>[f.val2?(c(),se(ke,{key:1})):(c(),se(ge,{key:0}))]),standby_mst_name:R(({item:f})=>{var B;return[H(n((B=f.standby_mst_)==null?void 0:B.name),1)]}),standby_mst_type:R(({item:f})=>{var B;return[H(n((B=f.standby_mst_)==null?void 0:B.tipe),1)]}),standby_mst_amount:R(({item:f})=>{var B;return[H(" Rp. "+n(t(re)(((B=f.standby_mst_)==null?void 0:B.amount)||0)),1)]}),pvr_had_detail:R(({item:f})=>[f.pvr_had_detail?(c(),se(ke,{key:1})):(c(),se(ge,{key:0}))]),deleted_by_username:R(({item:f})=>{var B;return[H(n((B=f.deleted_by)==null?void 0:B.username),1)]}),req_deleted_by_username:R(({item:f})=>{var B;return[H(n((B=f.req_deleted_by)==null?void 0:B.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),$(Ce,{type:"delete",show:t(ae),data:t(ne),fnClose:r,fnConfirm:de,enabledOk:t(z)},{footer:R(()=>[H(" Masukkan Alasan Penghapusan: "),e("div",Jo,[M(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=f=>Te(te)?te.value=f:null)},null,512),[[G,t(te)]])])]),_:1},8,["show","data","enabledOk"]),$(Ce,{type:"custome",show:t(be),data:t(Oe),fnClose:Ke,fnConfirm:Ze,enabledOk:t(Ae)},{words:R(()=>[H(" Data akan diproses dan "),Go,H(", yakin untuk melanjutkan ? ")]),footer:R(()=>[H(" Masukkan Alasan Permintaan Penghapusan: "),e("div",Xo,[M(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=f=>Te(ce)?ce.value=f:null)},null,512),[[G,t(ce)]])])]),_:1},8,["show","data","enabledOk"]),$(Ce,{type:"custome",show:t(xe),data:t(je),fnClose:Je,fnConfirm:Xe},{words:R(()=>[H(" Data akan diproses dan "),Zo,H(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),$(ct,{show:t(_e),fnClose:()=>{_e.value=!1},fnLoadDBData:ee,id:t(ve),p_data:t(_),list_cost_center:t(k),online_status:t(O)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),$(pt,{show:t(V),fnClose:()=>{V.value=!1},id:t(F),p_data:t(_),is_view:t(U)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{hn as default};
