import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import{o,c as i,a as u,r as $,g as E,b as C,k as f,F as _,n as S,q as O,t as T,G as v,h as U,v as G,K as le,w as se,P as ne,d as J,Q as oe,p as ie,e as re}from"./entry.ec567dfd.js";import{_ as ae}from"./Times.1ee77c5d.js";import{u as ce}from"./useUtils.ebfece3e.js";const de={name:"MdiTableHeadersEye"},ue={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},he=u("path",{fill:"currentColor",d:"M1 6v13a2 2 0 0 0 2 2h6V11h12V6a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2m2 0h4v3H3m4 10H3v-3h4m0-2H3v-3h4m2-2V6h4v3m6 0h-4V6h4m-2 10a1 1 0 1 1-1 1a1 1 0 0 1 1-1m0-3a6.45 6.45 0 0 1 6 4a6.5 6.5 0 0 1-12 0a6.45 6.45 0 0 1 6-4m0 1.5a2.5 2.5 0 1 0 2.5 2.5a2.5 2.5 0 0 0-2.5-2.5"},null,-1),fe=[he];function pe(p,x,h,m,w,y){return o(),i("svg",ue,fe)}const _e=D(de,[["render",pe]]),ge={name:"PhCaretDoubleLeftBold"},me={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},ve=u("path",{fill:"currentColor",d:"M208.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L137 128ZM57 128l71.52-71.51a12 12 0 0 0-17-17l-80 80a12 12 0 0 0 0 17l80 80a12 12 0 0 0 17-17Z"},null,-1),we=[ve];function ye(p,x,h,m,w,y){return o(),i("svg",me,we)}const be=D(ge,[["render",ye]]),xe={name:"PhCaretLeftBold"},ke={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},$e=u("path",{fill:"currentColor",d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"},null,-1),Ce=[$e];function Se(p,x,h,m,w,y){return o(),i("svg",ke,Ce)}const Oe=D(xe,[["render",Se]]),Te={name:"PhCaretRightBold"},De={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Le=u("path",{fill:"currentColor",d:"m184.49 136.49l-80 80a12 12 0 0 1-17-17L159 128L87.51 56.49a12 12 0 1 1 17-17l80 80a12 12 0 0 1-.02 17"},null,-1),Ne=[Le];function Be(p,x,h,m,w,y){return o(),i("svg",De,Ne)}const je=D(Te,[["render",Be]]),Ee={name:"PhCaretDoubleRightBold"},Ve={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Ie=u("path",{fill:"currentColor",d:"m144.49 136.49l-80 80a12 12 0 0 1-17-17L119 128L47.51 56.49a12 12 0 0 1 17-17l80 80a12 12 0 0 1-.02 17m80-17l-80-80a12 12 0 1 0-17 17L199 128l-71.52 71.51a12 12 0 0 0 17 17l80-80a12 12 0 0 0 .01-17Z"},null,-1),Je=[Ie];function ze(p,x,h,m,w,y){return o(),i("svg",Ve,Je)}const Pe=D(Ee,[["render",ze]]);const Fe=p=>(ie("data-v-7ded6e7c"),p=p(),re(),p),He={class:"w-full flex justify-center items-center grow h-0 pb-1 px-1 flex-col"},qe={class:"w-full flex justify-end"},Ae={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Me={class:"relative",style:{width:"95%",height:"90%"}},Re={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ze={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Ue=Fe(()=>u("div",{class:"w-full text-blue-600 font-bold grid-"}," Set Show Column Field ",-1)),Ge={class:"w-full flex flex-wrap overflow-auto"},Ke=["onClick"],Qe={class:"w-full flex justify-end"},We={class:"w-full flex justify-center items-center grow h-0 text-sm flex-col"},Xe={key:0,class:""},Ye={class:"tacky"},et={class:"sticky top-0 !z-[2]"},tt=["rowspan","colspan"],lt=["onClick"],st={key:2,class:"w-full pt-1 flex justify-end"},nt={class:"flex gap-2"},ot={class:"flex gap-2"},it=["onClick"],rt={__name:"TableView",props:{title:{type:String,required:!1,default:"Header Info"},thead:{type:Array,required:!0,default:[]},tbody:{type:Array,required:!1,default:[]},selected:{type:Number,required:!1,default:-1},scrolling:{type:Object,required:!1,default:{page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}},fnCallData:{type:Function,required:!0},loadDataType:{type:String,required:!1,default:"scroll"}},emits:["setSelected","setScrollingPage"],setup(p,{emit:x}){const h=p,m=$([]),w=$([]);let y=[],L=1;const z=(l,t="",e=[])=>{l.forEach((n,s)=>{if(n.tbl_show==1&&(t&&(n.dChild=t,n.parentIdx=e),y.push(n),n.childs!=null&&n.childs.length>0)){let c=n.key;e=[s],t&&(c=t+","+c,e.push(s)),L=L>=c.split(",").length+1?L:c.split(",").length+1,z(n.childs,c,e)}})},P=(l,t=[])=>{l.forEach((e,n)=>{t.length>0&&(e.parentIdx=[...t]),e.childs==null||e.childs.length==0?m.value.push(e):(t.length>0?t.push(n):t=[n],P(e.childs,t))}),t.pop()},F=l=>{let t=JSON.parse(JSON.stringify(l)),e=JSON.parse(JSON.stringify(l));w.value.push(e.map(s=>(s.tbl_show==null&&(s.tbl_show=1),s.permit==null&&(s.permit=1),s.freeze==null&&(s.freeze=0),delete s.childs,s)));let n=[];if(t.filter(s=>s.childs!=null&&s.childs.length>0).forEach(s=>{let c=JSON.parse(JSON.stringify(s.childs));n=n.concat(c)}),n.length>0)return F(n)};let B=0;const K=l=>{let t=l.map(e=>e.key);return y.every(e=>{if(e.tbl_show==1){let n=e.childs==null?[]:e.childs.filter(s=>s.tbl_show==1);if(B=n.length>0&&e.tbl_show==1?n.length:1,q(e.childs),e.dChild==null){let s=t.indexOf(e.key);s>-1&&((e.childs==null||e.childs.length==0)&&(l[s].rowspan=L),e.childs!=null&&e.childs.length>0&&(l[s].rowspan=1),l[s].colspan=B)}else{let s=e.dChild.split(","),c=H(l,s,1,e);e.childs==null||e.childs.length==0?c.rowspan=L-e.dChild.split(",").length:c.rowspan=1,c.colspan=B}}return!0}),l},H=(l,t=[],e,n)=>{if(t.length==0){let s=l.childs.map(c=>c.key).indexOf(n.key);return l.childs[s]}if(t.length>0){let s=l;e==0&&(s=l.childs);let c=s.map(I=>I.key).indexOf(t[0]);if(c==-1){console.error("ID not found");return}return t.shift(),H(s[c],t,0,n)}},q=l=>{(l==null?[]:l.filter(e=>e.tbl_show==1)).length>0&&l.forEach(e=>{let n=e.childs==null?[]:e.childs.filter(s=>s.tbl_show==1);n.length>0&&e.tbl_show==1&&(B+=n.length-1,q(e.childs))})},g=$([]),A=(l,t=[])=>{l.forEach((e,n)=>{e.permit!=null&&e.permit==0?l.splice(n,1):(e.permit==null&&(e.permit=1),e.tbl_show==null&&(e.tbl_show=1),e.freeze==null&&(e.freeze=0),l.splice(n,1,e),e.childs!=null&&e.childs.length>0&&(t.push(e),A(e.childs,t)))}),t.reverse(),t.forEach((e,n)=>{e.childs.filter(c=>c.tbl_show==1).length==0?e.tbl_show=0:e.tbl_show=1}),t.reverse(),t.shift()},M=(l,t=[])=>{l.forEach((e,n)=>{e.childs!=null&&e.childs.length>0&&(t.push(e),M(e.childs,t))}),t.reverse(),t.forEach((e,n)=>{e.childs.filter(c=>c.tbl_show==1).length==0?e.tbl_show=0:e.tbl_show=1}),t.reverse(),t.shift()};E(()=>h.thead,(l,t)=>{g.value=JSON.parse(JSON.stringify(l)),A(g.value)},{deep:!0,immediate:!0}),E(()=>g.value,(l,t)=>{y=[],w.value=[],m.value=[],M(l),z(JSON.parse(JSON.stringify(l)));let e=K(JSON.parse(JSON.stringify(l)));P(e),F(e)},{deep:!0,immediate:!0});const{pointFormat:Q}=ce(),W=(l,t="")=>t=="default"?l:l==parseFloat(l)?Q(l):l,k=$(null),X=async()=>{if(h.loadDataType!="scroll"||!h.scrolling.may_get_data)return;let l=k.value;if(l.scrollLeft!=h.scrolling.scrollLeft){h.scrolling.scrollLeft=l.scrollLeft;return}if(h.scrolling.is_last_record||!(Math.round(l.scrollTop)+l.clientHeight>=l.scrollHeight-1))return;let e=h.scrolling.page+1;x("setScrollingPage",e),await h.fnCallData()},j=$(!1),Y=l=>{let t=l.label;if(l.parentIdx!=null&&l.parentIdx.length>0){let e="",n=[];l.parentIdx.forEach((s,c)=>{c==0?e=g.value[s]:e=e.childs[s],n.push(e.label)}),t=n.join(" ")+" "+t}return t},ee=l=>{if(l.parentIdx!=null&&l.parentIdx.length>0){let t="";l.parentIdx.forEach((n,s)=>{s==0?t=g.value[n]:t=t.childs[n]});let e=t.childs.map(n=>n.key).indexOf(l.key);e!=-1&&(t.childs[e].tbl_show=!t.childs[e].tbl_show)}else{let t=g.value.map(e=>e.key).indexOf(l.key);t!=-1&&(g.value[t].tbl_show=!g.value[t].tbl_show)}},R=l=>{let t=JSON.parse(JSON.stringify(g.value));l=="select"?V(t,1):V(t,0),g.value=t},V=(l,t)=>{l.forEach(e=>{e.tbl_show=t,e.childs!==void 0&&e.childs.length>0&&V(e.childs,t)})},a=$({current_page:1,list_page:[],last_page:7,piece:2}),Z=()=>{if(a.value.current_page=h.scrolling.page,h.scrolling.is_last_record&&a.value.current_page--,a.value.list_page=[],a.value.current_page>0){let l=0,t=0,e=0,n=0;for(let s=a.value.current_page;s>=a.value.current_page-a.value.piece;s--)s>0?l=s:e++;if(e+=a.value.piece,a.value.current_page+e>a.value.last_page){t=a.value.last_page;for(let s=l-1;s>=l-(a.value.current_page+e-t);s--)s>0&&n++;l-=n}else t=a.value.current_page+e;for(let s=l;s<=t;s++)a.value.list_page.push(s)}};E(()=>h.scrolling.page,(l,t)=>{l==1&&k.value&&(k.value.scrollTop=0),Z()},{deep:!0,immediate:!0}),E(()=>h.scrolling.is_last_record,(l,t)=>{Z()},{deep:!0,immediate:!0});const N=async l=>{h.loadDataType=="paginate"&&(x("setScrollingPage",l),await h.fnCallData(),k.value&&(k.value.scrollTop=0))};return(l,t)=>{const e=_e,n=ae,s=be,c=Oe,I=je,te=Pe;return o(),i("div",He,[u("div",qe,[u("button",{type:"button",name:"button",class:"m-1 text-xs",onClick:t[0]||(t[0]=r=>j.value=!0)},[C(e)])]),f(j)?(o(),i("div",Ae,[u("div",Me,[u("div",Re,[C(n,{style:{color:"black",cursor:"pointer"},onClick:t[1]||(t[1]=r=>j.value=!1)})]),u("div",Ze,[Ue,u("div",Ge,[(o(!0),i(_,null,S(f(m),(r,b)=>(o(),i("div",{class:O(["p-2 m-1 font-bold cursor-pointer",r.tbl_show==1?"bg-green-600 text-white":"bg-gray-400 text-black"]),onClick:d=>ee(r)},T(Y(r)),11,Ke))),256))]),u("div",Qe,[u("button",{class:"bg-white font-bold mr-2",onClick:t[2]||(t[2]=r=>R("select"))}," Select All "),u("button",{class:"bg-white font-bold",onClick:t[3]||(t[3]=r=>R("invert"))}," Invert All ")])]),u("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:t[4]||(t[4]=r=>j.value=!1)})])])):v("",!0),u("div",We,[p.tbody.length==0?(o(),i("div",Xe," Maaf Tidak Ada Record ")):(o(),i("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:k,onScroll:X},[u("table",Ye,[u("thead",et,[(o(!0),i(_,null,S(f(w),(r,b)=>(o(),i("tr",null,[(o(!0),i(_,null,S(r,d=>(o(),i(_,null,[d.permit?U((o(),i("th",{key:0,rowspan:d.rowspan,colspan:d.colspan,class:O(d.freeze==1?"freeze":"")},T(d.label),11,tt)),[[G,d.tbl_show]]):v("",!0)],64))),256))]))),256))]),u("tbody",null,[(o(!0),i(_,null,S(p.tbody,(r,b)=>(o(),i("tr",{key:b,onClick:d=>l.$emit("setSelected",b),class:O(p.selected==b?"active":"")},[(o(!0),i(_,null,S(f(m),d=>(o(),i(_,null,[d.permit?U((o(),le(oe(d.freeze==0?"td":"th"),{key:0,class:O(["my-list",r.class_h?r.class_h:""])},{default:se(()=>[u("div",{class:O(["w-full h-full flex items-center",d.class?d.class:"justify-center"])},[ne(l.$slots,d.key,{item:r,index:b},()=>[d.isai?(o(),i(_,{key:0},[J(T(b+1),1)],64)):v("",!0),d.dateformat?(o(),i(_,{key:1},[J(T(r[d.key]?l.$moment(r[d.key]).format(d.dateformat):""),1)],64)):(o(),i(_,{key:2},[J(T(r[d.key]?W(r[d.key],d.type):""),1)],64))],!0)],2)]),_:2},1032,["class"])),[[G,d.tbl_show]]):v("",!0)],64))),256))],10,lt))),128))])])],544)),p.loadDataType=="paginate"?(o(),i("div",st,[u("div",nt,[f(a).list_page.indexOf(1)==-1?(o(),i("div",{key:0,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[5]||(t[5]=r=>N(1))},[C(s)])):v("",!0),f(a).list_page.indexOf(1)==-1?(o(),i("div",{key:1,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[6]||(t[6]=r=>N(f(a).current_page-1))},[C(c)])):v("",!0),u("div",ot,[(o(!0),i(_,null,S(f(a).list_page,r=>(o(),i("div",{class:O([r==f(a).current_page?"bg-slate-800 text-white":"bg-white text-slate-800","px-3 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm"]),onClick:b=>N(r)},T(r),11,it))),256))]),f(a).list_page.indexOf(f(a).last_page)==-1?(o(),i("div",{key:2,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[7]||(t[7]=r=>N(f(a).current_page+1))},[C(I)])):v("",!0),f(a).list_page.indexOf(f(a).last_page)==-1?(o(),i("div",{key:3,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[8]||(t[8]=r=>N(f(a).last_page))},[C(te)])):v("",!0)])])):v("",!0)])])}}},ht=D(rt,[["__scopeId","data-v-7ded6e7c"]]);export{ht as _};
