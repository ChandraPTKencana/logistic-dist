import K from"./ClockAnalog.520cdbae.js";import q from"./Calendar.238a2016.js";import J from"./Truck.f1a1f8c7.js";import W from"./LocationOn.262b1082.js";import Q from"./TruckDriver.ef063197.js";import X from"./AttachmentSingle.87f05d64.js";import Z from"./Times.88f1d7df.js";import tt from"./Check.e95b8b8a.js";import{g as et,r as V,o as c,c as i,F as C,D as $,a as t,b as p,t as l,l as r,d as _,n as h,E as B,z as S,C as N,G as at,x as P,y as F}from"./entry.f6b0e5cc.js";import{u as k}from"./useUtils.c9a24de7.js";import{u as z}from"./useMyFetch.20a381b7.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./PDFJsView.915b9516.js";const st=t("div",{class:"w-full font-bold text-center bg-blue-300"},"STANDBY ",-1),lt={class:"border-2"},ot={class:"flex w-full items-center justify-between"},nt={class:"flex items-center justify-center p-1"},rt=t("div",{class:"font-bold text-xs"},"Created At",-1),_t={class:"text-xs sm:flex"},ct={class:"sm:mr-1"},dt={class:"font-bold text-lg text-center"},it={class:"flex items-center justify-center p-1"},vt=t("div",{class:"font-bold text-xs"},"Updated At",-1),ut={class:"text-xs sm:flex"},bt={class:"sm:mr-1"},mt={class:"border-t-2 p-2 flex flex-row flex-wrap items-center justify-center"},yt={class:"flex flex-col items-center justify-center"},pt={class:"flex items-center justify-center"},ht={class:"font-bold italic ml-2"},ft={class:"flex flex-col relative"},xt={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},wt={class:"flex items-center justify-center"},kt={class:"px-1"},gt={class:"w-full flex items-center justify-center"},Yt={class:"w-full sm:w-1/2 flex flex-wrap items-center justify-center border-2 rounded-lg"},Dt={class:"w-1/2"},At={class:"w-1/2"},Mt={class:"font-bold"},Ct={key:0,class:"w-full sm:w-1/2 flex items-center justify-center border-2 rounded-lg"},St={class:"w-1/2"},Nt={class:"w-1/2"},Pt={class:"font-bold"},jt={class:"w-full flex flex-row flex-wrap"},Et={class:"w-full sm:w-7/12 md:w-1/2 p-2"},Rt=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA ",-1),Tt={class:"w-full text-sm"},Vt=t("thead",null,[t("tr",null,[t("th",{class:"border-2 border-black p-2"},"Type"),t("th",{class:"border-2 border-black p-2"},"Deskripsi"),t("th",{class:"border-2 border-black p-2"},"Nominal")])],-1),Ut={class:"border-2 border-black p-2"},Ht={class:"border-2 border-black p-2"},It={class:"border-2 border-black p-2 text-right"},Lt={class:"w-full sm:w-5/12 md:w-1/2 p-2"},Ot=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),$t={class:"w-full text-sm"},Bt=t("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),Ft={class:"border-2 border-black p-2 font-bold"},zt=t("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),Gt={class:"border-2 border-black p-2 font-bold"},Kt=t("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),qt={class:"border-2 border-black p-2 font-bold"},Jt=t("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),Wt={class:"border-2 border-black p-2 font-bold"},Qt=t("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),Xt={class:"border-2 border-black p-2 font-bold"},Zt=t("td",{class:"border-2 border-black p-2"}," PV NO ",-1),te={class:"border-2 border-black p-2 font-bold"},ee=t("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),ae={class:"border-2 border-black p-2 font-bold"},se={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},le={class:"w-full",role:"sticky"},oe={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},ne=t("thead",null,[t("tr",{class:"sticky -top-1 !z-[2]"},[t("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ")]),t("tr",{class:"sticky top-7 !z-[2]"},[t("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),t("th",{class:"!min-w-[90px] !w-[90px] !max-w-[90px]"},"Tanggal"),t("th",{class:"!min-w-[55px] !w-[55px] !max-w-[55px]"},"Waktu"),t("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Foto"),t("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Note"),t("th",{class:"!min-w-[70px] !w-[70px] !max-w-[70px]"},"Dibayar")])],-1),re=["data-index"],_e={class:"cell"},ce={class:"w-full h-auto flex items-center justify-center relative"},de={class:"cell"},ie={class:"w-full h-auto flex items-center justify-center relative"},ve={class:"cell"},ue={style:{width:"60vw"},class:"h-auto flex items-center justify-center"},be={class:"cell"},me={class:"h-auto flex items-center justify-center"},ye={class:"w-full h-auto flex items-center justify-center"},pe={key:0,class:"text-3xl"},he=["onClick"],fe=t("div",{class:"w-full text-xl font-bold text-center"}," APPROVER STANDBY TRIP",-1),xe={class:"w-full flex flex-wrap justify-center text-xs text-center"},we={class:"border-2 p-1 m-1"},ke=t("br",null,null,-1),ge=t("br",null,null,-1),Ye={class:"border-2 p-1 m-1"},De=t("br",null,null,-1),Ae=t("br",null,null,-1),Me={class:"border-2 p-1 m-1"},Ce=t("br",null,null,-1),Se=t("br",null,null,-1),Ne={class:"border-2 p-1 m-1"},Pe=t("br",null,null,-1),je=t("br",null,null,-1),Ee={class:"border-2 p-1 m-1"},Re=t("br",null,null,-1),Te=t("br",null,null,-1),Ve={class:"border-2 p-1 m-1"},Ue=t("br",null,null,-1),He=t("br",null,null,-1),Ie={class:"flex flex-wrap justify-between"},Le=["onClick"],Oe=["onClick"],$e=["onClick"],Be={key:0,class:"text-xs font-bold"},Fe=["onClick"],ze={key:0,class:"text-xs font-bold"},oa={__name:"stt",props:{standby_trxs:{type:Array,required:!1}},setup(g){var H;const s=g,{$moment:v}=at(),{pointFormat:j}=k(),U=et("token"),Y=V({}),u=V([]),x=V([]);(H=s.standby_trxs)==null||H.forEach((a,m)=>{u.value.push(""),x.value.push("")});const E=async(a,m)=>{u.value[a]="PROSES...",x.value[a]="VAL",P().loading_full=!0,Y.value={};const b=new FormData;let o=[...s.standby_trxs[a].details];m=="paid"?o=o.map((y,A)=>(y.be_paid=1,y)):m=="nopaid"&&(o=o.map((y,A)=>(y.be_paid=0,y))),b.append("details",JSON.stringify(o)),b.append("id",s.standby_trxs[a].id),b.append("_method","PUT");let w="post";const{data:n,error:D,status:R}=await z("/standby_trx_validasi",{method:w,headers:{Authorization:`Bearer ${U.value}`,Accept:"application/json"},body:b,retry:0});if(P().loading_full=!1,R.value==="error"){u.value[a]="GAGAL",F().trigger(D,Y);return}s.standby_trxs[a].val=n.value.val,s.standby_trxs[a].val_user=n.value.val_user,s.standby_trxs[a].val_by=n.value.val_by,s.standby_trxs[a].val_at=n.value.val_at,s.standby_trxs[a].val1=n.value.val1,s.standby_trxs[a].val1_user=n.value.val1_user,s.standby_trxs[a].val1_by=n.value.val1_by,s.standby_trxs[a].val1_at=n.value.val1_at,s.standby_trxs[a].val2=n.value.val2,s.standby_trxs[a].val2_user=n.value.val2_user,s.standby_trxs[a].val2_by=n.value.val2_by,s.standby_trxs[a].val2_at=n.value.val2_at,s.standby_trxs[a].val3=n.value.val3,s.standby_trxs[a].val3_user=n.value.val3_user,s.standby_trxs[a].val3_by=n.value.val3_by,s.standby_trxs[a].val3_at=n.value.val3_at,s.standby_trxs[a].val4=n.value.val4,s.standby_trxs[a].val4_user=n.value.val4_user,s.standby_trxs[a].val4_by=n.value.val4_by,s.standby_trxs[a].val4_at=n.value.val4_at,s.standby_trxs[a].val5=n.value.val5,s.standby_trxs[a].val5_user=n.value.val5_user,s.standby_trxs[a].val5_by=n.value.val5_by,s.standby_trxs[a].val5_at=n.value.val5_at,u.value[a]="BERHASIL"},G=async a=>{u.value[a]="PROSES...",x.value[a]="UNVAL",P().loading_full=!0,Y.value={};const m=new FormData;m.append("id",s.standby_trxs[a].id),m.append("_method","PUT");let b="post";const{data:o,error:w,status:n}=await z("/standby_trx_unvalidasi",{method:b,headers:{Authorization:`Bearer ${U.value}`,Accept:"application/json"},body:m,retry:0});if(P().loading_full=!1,n.value==="error"){u.value[a]="GAGAL",F().trigger(w,Y);return}s.standby_trxs[a].val=o.value.val,s.standby_trxs[a].val_user=o.value.val_user,s.standby_trxs[a].val_by=o.value.val_by,s.standby_trxs[a].val_at=o.value.val_at,s.standby_trxs[a].val1=o.value.val1,s.standby_trxs[a].val1_user=o.value.val1_user,s.standby_trxs[a].val1_by=o.value.val1_by,s.standby_trxs[a].val1_at=o.value.val1_at,s.standby_trxs[a].val2=o.value.val2,s.standby_trxs[a].val2_user=o.value.val2_user,s.standby_trxs[a].val2_by=o.value.val2_by,s.standby_trxs[a].val2_at=o.value.val2_at,s.standby_trxs[a].val3=o.value.val3,s.standby_trxs[a].val3_user=o.value.val3_user,s.standby_trxs[a].val3_by=o.value.val3_by,s.standby_trxs[a].val3_at=o.value.val3_at,s.standby_trxs[a].val4=o.value.val4,s.standby_trxs[a].val4_user=o.value.val4_user,s.standby_trxs[a].val4_by=o.value.val4_by,s.standby_trxs[a].val4_at=o.value.val4_at,s.standby_trxs[a].val5=o.value.val5,s.standby_trxs[a].val5_user=o.value.val5_user,s.standby_trxs[a].val5_by=o.value.val5_by,s.standby_trxs[a].val5_at=o.value.val5_at,u.value[a]="BERHASIL"};return(a,m)=>{const b=K,o=q,w=J,n=W,D=Q,R=X,y=Z,A=tt;return g.standby_trxs&&g.standby_trxs.length>0?(c(),i(C,{key:0},[st,(c(!0),i(C,null,$(g.standby_trxs,(e,f)=>{var I,L,O;return c(),i("div",lt,[t("div",ot,[t("div",nt,[p(b,{class:"text-xl mr-1"}),t("div",null,[rt,t("div",_t,[t("div",ct,l(e.created_at?r(v)(e.created_at).format("DD-MM-YYYY"):""),1),t("div",null,l(e.created_at?r(v)(e.created_at).format("H:m:s"):""),1)])])]),t("div",dt,"ID #"+l(e.id),1),t("div",it,[p(b,{class:"text-xl mr-1"}),t("div",null,[vt,t("div",ut,[t("div",bt,l(e.updated_at?r(v)(e.updated_at).format("DD-MM-YYYY"):""),1),t("div",null,l(e.updated_at?r(v)(e.updated_at).format("H:m:s"):""),1)])])])]),t("div",mt,[t("div",yt,[t("div",pt,[p(o,{class:"mr-1"}),_(" "+l(e.tanggal?r(v)(e.tanggal).format("DD-MM-YYYY"):"")+" ",1),t("span",ht,l(e.transition_type)+" "+l(e.transition_target),1)]),t("div",ft,[p(w,{class:"text-9xl"}),t("div",xt,l(e.no_pol),1)]),t("div",wt,[p(n),t("span",kt,l(e.xto),1)])]),t("div",gt,[t("div",Yt,[t("div",Dt,[p(D,{class:"text-9xl"})]),t("div",At,[t("div",Mt," DRIVER #"+l(e.supir_id),1),t("div",null,l(e.supir),1)])]),e.kernet_id?(c(),i("div",Ct,[t("div",St,[p(D,{class:"text-9xl"})]),t("div",Nt,[t("div",Pt," ASST DRIVER #"+l(e.kernet_id),1),t("div",null,l(e.kernet),1)])])):h("",!0)]),t("div",jt,[t("div",Et,[Rt,t("table",Tt,[Vt,t("tbody",null,[t("tr",null,[t("td",Ut,l((I=e.standby_mst_)==null?void 0:I.tipe),1),t("td",Ht,l((L=e.standby_mst_)==null?void 0:L.name),1),t("td",It,l(r(j)((O=e.standby_mst_)==null?void 0:O.amount)),1)])])])]),t("div",Lt,[Ot,t("table",$t,[t("tbody",null,[t("tr",null,[Bt,t("td",Ft,l(e.note_for_remarks),1)]),t("tr",null,[zt,t("td",Gt,l(e.cost_center_code),1)]),t("tr",null,[Kt,t("td",qt,l(e.cost_center_desc),1)]),t("tr",null,[Jt,t("td",Wt,l(e.pvr_no),1)]),t("tr",null,[Qt,t("td",Xt,l(r(j)(e.pvr_total||0)),1)]),t("tr",null,[Zt,t("td",te,l(e.pv_no),1)]),t("tr",null,[ee,t("td",ae,l(r(j)(e.pv_total||0)),1)])])])])]),t("div",se,[t("div",le,[t("table",oe,[ne,t("tbody",{ref_for:!0,ref:"to_move"},[(c(!0),i(C,null,$(e.details,(d,T)=>(c(),i(C,{key:T},[d.p_status!="Remove"?(c(),i("tr",{key:0,"data-index":T},[t("td",null,l(T+1)+".",1),t("td",_e,[t("div",ce,l(r(v)(d.tanggal).format("DD-MM-YYYY")),1)]),t("td",de,[t("div",ie,l(d.waktu.substring(0,5)),1)]),t("td",ve,[t("div",ue,[p(R,{value:d.attachment_1_preview,onSetFile:M=>d.attachment_1=M,onSetPreview:M=>d.attachment_1_preview=M},null,8,["value","onSetFile","onSetPreview"])])]),t("td",be,[t("div",me,l(d.note),1)]),t("td",{class:B(["cell",!("useUtils"in a?a.useUtils:r(k))().checkPermissions(["standby_trx.detail.decide_paid"])||e.val5==1?"unselectable":""])},[t("div",ye,[!("useUtils"in a?a.useUtils:r(k))().checkPermissions(["standby_trx.detail.decide_paid"])||e.val5==1?(c(),i("div",pe,[d.be_paid==0?(c(),S(y,{key:0,class:"text-red-800"})):(c(),S(A,{key:1,class:"text-green-800"}))])):(c(),i("button",{key:1,type:"button",onClick:M=>d.be_paid=d.be_paid?0:1,class:B(["text-white w-auto rounded text-xl",d.be_paid?"bg-green-600":"bg-red-600"])},[d.be_paid==0?(c(),S(y,{key:0})):(c(),S(A,{key:1}))],10,he))])],2)],8,re)):h("",!0)],64))),128))],512)])])]),fe,t("div",xe,[t("div",we,[_(" Kasir "),ke,_(" "+l(e.val_by&&e.val?e.val_by.username:"-")+" ",1),ge,_(" ( "+l(e.val_at&&e.val?r(v)(e.val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ye,[_(" Mandor "),De,_(" "+l(e.val1_by&&e.val1?e.val1_by.username:"-")+" ",1),Ae,_(" ( "+l(e.val1_at&&e.val1?r(v)(e.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Me,[_(" Staff Logistik "),Ce,_(" "+l(e.val2_by&&e.val2?e.val2_by.username:"-")+" ",1),Se,_(" ( "+l(e.val2_at&&e.val2?r(v)(e.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ne,[_(" Admin LogistiK "),Pe,_(" "+l(e.val3_by&&e.val3?e.val3_by.username:"-")+" ",1),je,_(" ( "+l(e.val3_at&&e.val3?r(v)(e.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ee,[_(" SPV Logistik "),Re,_(" "+l(e.val4_by&&e.val4?e.val4_by.username:"-")+" ",1),Te,_(" ( "+l(e.val4_at&&e.val4?r(v)(e.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ve,[_(" MGR Logistik "),Ue,_(" "+l(e.val5_by&&e.val5?e.val5_by.username:"-")+" ",1),He,_(" ( "+l(e.val5_at&&e.val5?r(v)(e.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])]),t("div",Ie,[("useUtils"in a?a.useUtils:r(k))().checkPermissions(["standby_trx.detail.decide_paid"])&&e.val5=="0"?(c(),i("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-green-600 text-white text-xs rounded-sm",onClick:N(d=>E(f,"paid"),["prevent"])}," Paid ",8,Le)):h("",!0),("useUtils"in a?a.useUtils:r(k))().checkPermissions(["standby_trx.detail.decide_paid"])&&e.val5=="0"?(c(),i("button",{key:1,type:"submit",name:"button",class:"w-36 m-1 bg-red-600 text-white text-xs rounded-sm",onClick:N(d=>E(f,"nopaid"),["prevent"])}," NoPaid ",8,Oe)):h("",!0),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:N(d=>E(f),["prevent"])},[_(" Validasi "),r(x)=="VAL"&&r(u)!=""?(c(),i("div",Be,l(r(u)[f]),1)):h("",!0)],8,$e),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:N(d=>G(f),["prevent"])},[_(" Unvalidasi "),r(x)=="UNVAL"&&r(u)!=""?(c(),i("div",ze,l(r(u)[f]),1)):h("",!0)],8,Fe)])])])}),256))],64)):h("",!0)}}};export{oa as default};
