import{_ as L}from"./HeaderPopup.vue.b957002f.js";import{_ as O}from"./client-only.1c0ae7e1.js";import{_ as H}from"./InputPointFormat.vue.dca634b1.js";import R from"./Eyes.9718eb2f.js";import q from"./EyesOff.1ea2099c.js";import J from"./AttachmentSingleV1.be713315.js";import{r as U,g as z,f as Y,J as G,k as i,L as Q,o as u,c as h,a as e,b as m,l as o,A as _,t as d,v as b,F as M,E as I,w as P,a5 as C,z as V,K as W,d as X,x as w,D as Z,y as j,I as B,H as ee}from"./entry.b6435505.js";import{u as N}from"./useMyFetch.f12a4475.js";import"./Times.cfc2c3dd.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./PDFJsView.46ea3f3d.js";const te={class:"box-fixed"},oe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},le={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},se={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},ae={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ne=e("label",{for:""},"Nama",-1),de=["disabled"],ie={class:"text-red-500"},re={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pe=e("label",{for:""},"Jabatan",-1),_e=e("option",{value:"Supir"},"Supir",-1),ue=e("option",{value:"Kernet"},"Kernet",-1),me=[_e,ue],ce={class:"text-red-500"},fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},we=e("label",{for:""},"No KTP",-1),ve={class:"text-red-500"},xe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},he=e("label",{for:""},"No SIM",-1),be={class:"text-red-500"},ke={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ye=e("label",{for:""},"Nama SIM",-1),ge=["disabled"],Ke={class:"text-red-500"},Se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ue=e("label",{for:""},"Pilih Bank",-1),Ve=e("option",{value:""},null,-1),Te=["value"],je={class:"text-red-500"},Ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ae=e("label",{for:""},"No Rek",-1),De={class:"text-red-500"},Me={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ie=e("label",{for:""},"Nama Rek",-1),Pe={class:"text-red-500"},Ce={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Be=e("label",{for:""},"Phone Number",-1),Ee={class:"text-red-500"},Fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},$e=e("label",{for:""},"Tanggal Lahir",-1),Le={class:"grow"},Oe={class:"text-red-500"},He={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Re=e("label",{for:""},"Tempat Lahir",-1),qe={class:"text-red-500"},Je={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ze=e("label",{for:""},"TMK",-1),Ye={class:"grow"},Ge={class:"text-red-500"},Qe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},We=e("label",{for:""},"Alamat",-1),Xe={class:"text-red-500"},Ze={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},et=e("label",{for:""},"Agama",-1),tt=B('<option value="ISLAM">ISLAM</option><option value="KRISTEN PROTESTAN">KRISTEN PROTESTAN</option><option value="KRISTEN KATOLIK">KRISTEN KATOLIK</option><option value="HINDU">HINDU</option><option value="BUDDHA">BUDDHA</option><option value="KONGHUCU">KONGHUCU</option>',6),ot=[tt],lt={class:"text-red-500"},st={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},at=e("label",{for:""},"Status",-1),nt=B('<option value="TK/0">TK/0</option><option value="TK/1">TK/1</option><option value="TK/2">TK/2</option><option value="TK/3">TK/3</option><option value="K/0">K/0</option><option value="K/1">K/1</option><option value="K/2">K/2</option><option value="K/3">K/3</option>',8),dt=[nt],it={class:"text-red-500"},rt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pt=e("label",{for:""},"BPJS Kesehatan",-1),_t={class:"w-full"},ut={class:"text-red-500"},mt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ct=e("label",{for:""},"BPJS Jamsos",-1),ft={class:"w-full"},wt={class:"text-red-500"},vt=e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1),xt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ht=e("label",{for:""},"Username",-1),bt={class:"text-red-500"},kt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},yt=e("label",{for:""},"Password",-1),gt={class:"w-full flex items-center"},Kt=["type"],St={class:"text-red-500"},Ut={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Vt=e("label",{for:""},"Confirm Password",-1),Tt={class:"w-full flex items-center"},jt=["type"],Nt={class:"text-red-500"},At={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Dt={class:"text-red-500"},Mt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},It=e("label",{for:""},"Face Login?",-1),Pt={class:"card-border !flex flex-row items-center"},Ct={for:"checkbox",class:"w-full ml-1 flex items-center"},Bt=["checked"],Et={class:"text-red-500"},Ft={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},$t=e("label",{for:""},"Pekerja Dari",-1),Lt=["value"],Ot={class:"text-red-500"},Ht={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},Rt={class:"text-red-500"},qt={class:"w-full flex items-center justify-end"},lo={__name:"employee",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(v){const r=v,{$moment:A}=ee(),c=U(0),D={id:-1,name:"",role:"Supir",ktp_no:"",sim_no:"",sim_name:"",bank_id:1,rek_no:"",rek_name:"",workers_from:"",phone_number:"",attachment_1:"",attachment_1_preview:"",birth_date:new Date,birth_place:"",bpjs_kesehatan:0,bpjs_jamsos:0,tmk:new Date,address:"",status:"TK/0",val_at:"",religion:"ISLAM",username:"",password:"",confirm_password:"",face_loc:"",face_loc_preview:"",m_face_login:0},t=U({...D}),T=z("token"),n=U({}),E=async()=>{w().loading_full=!0,n.value={};const a=new FormData;a.append("name",t.value.name),a.append("role",t.value.role),a.append("ktp_no",t.value.ktp_no),a.append("sim_no",t.value.sim_no),a.append("sim_name",t.value.sim_name),a.append("workers_from",t.value.workers_from),a.append("bank_id",t.value.bank_id),a.append("rek_no",t.value.rek_no),a.append("rek_name",t.value.rek_name),a.append("phone_number",t.value.phone_number),a.append("attachment_1",t.value.attachment_1),a.append("attachment_1_preview",t.value.attachment_1_preview),a.append("birth_date",t.value.birth_date?A(t.value.birth_date).format("Y-MM-DD"):""),a.append("birth_place",t.value.birth_place),a.append("tmk",t.value.tmk?A(t.value.tmk).format("Y-MM-DD"):""),a.append("address",t.value.address),a.append("status",t.value.status),a.append("bpjs_kesehatan",t.value.bpjs_kesehatan),a.append("bpjs_jamsos",t.value.bpjs_jamsos),a.append("religion",t.value.religion),a.append("username",t.value.username),t.value.password&&a.append("password",t.value.password),t.value.confirm_password&&a.append("confirm_password",t.value.confirm_password),a.append("m_face_login",t.value.m_face_login),a.append("face_loc",t.value.face_loc),a.append("face_loc_preview",t.value.face_loc_preview);let l="post",p=r.is_copy?0:r.id;p==0||(a.append("id",p),a.append("_method","PUT"));const{data:x,error:y,status:g}=await N("/employee",{method:l,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:a,retry:0});if(w().loading_full=!1,g.value==="error"){j().trigger(y,n);return}let K=k.value.map(f=>f.id).indexOf(t.value.bank_id);if(t.value.bank={...k.value[K]},t.value.updated_at=x.value.updated_at,p<=0)t.value.id=x.value.id,t.value.created_at=x.value.created_at,r.p_data.unshift(t.value);else{let f=r.p_data.map(S=>S.id).indexOf(p);f>-1&&r.p_data.splice(f,1,{...t.value})}r.fnClose()},F=async()=>{w().loading_full=!0;const{data:a,error:l,status:p}=await N("/employee",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(w().loading_full=!1,p.value==="error"){j().trigger(l);return}r.is_copy&&(t.value.val=0),t.value=a.value.data},k=U([]),$=async()=>{w().loading_full=!0;const{data:a,error:l,status:p}=await N("/banks",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(w().loading_full=!1,p.value==="error"){j().trigger(l);return}k.value=a.value.data};return Y(()=>r.show,async(a,l)=>{a==!0&&(t.value={...D},n.value={},await $(),r.id!=0&&await F())},{immediate:!0}),(a,l)=>{const p=L,x=G("vue-date-picker"),y=O,g=H,K=R,f=q,S=J;return i((u(),h("section",te,[e("div",null,[m(p,{title:"Form Employee",fn:v.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",oe,[e("div",le,[e("div",se,[e("div",ae,[ne,i(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>o(t).name=s),disabled:o(t).val_at!=""},null,8,de),[[_,o(t).name]]),e("p",ie,d(o(n).name),1)]),e("div",re,[pe,i(e("select",{"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).role=s)},me,512),[[b,o(t).role]]),e("p",ce,d(o(n).role),1)]),e("div",fe,[we,i(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=s=>o(t).ktp_no=s)},null,512),[[_,o(t).ktp_no]]),e("p",ve,d(o(n).ktp_no),1)]),e("div",xe,[he,i(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=s=>o(t).sim_no=s)},null,512),[[_,o(t).sim_no]]),e("p",be,d(o(n).sim_no),1)]),e("div",ke,[ye,i(e("input",{type:"text","onUpdate:modelValue":l[4]||(l[4]=s=>o(t).sim_name=s),disabled:o(t).val1},null,8,ge),[[_,o(t).sim_name]]),e("p",Ke,d(o(n).sim_name),1)]),e("div",Se,[Ue,i(e("select",{"onUpdate:modelValue":l[5]||(l[5]=s=>o(t).bank_id=s)},[Ve,(u(!0),h(M,null,I(o(k),s=>(u(),h("option",{value:s.id},d(s.code),9,Te))),256))],512),[[b,o(t).bank_id]]),e("p",je,d(o(n).bank_id),1)]),e("div",Ne,[Ae,i(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=s=>o(t).rek_no=s)},null,512),[[_,o(t).rek_no]]),e("p",De,d(o(n).rek_no),1)]),e("div",Me,[Ie,i(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>o(t).rek_name=s)},null,512),[[_,o(t).rek_name]]),e("p",Pe,d(o(n).rek_name),1)]),e("div",Ce,[Be,i(e("input",{type:"text","onUpdate:modelValue":l[8]||(l[8]=s=>o(t).phone_number=s)},null,512),[[_,o(t).phone_number]]),e("p",Ee,d(o(n).phone_number),1)]),e("div",Fe,[$e,e("div",Le,[m(y,null,{default:P(()=>[m(x,{modelValue:o(t).birth_date,"onUpdate:modelValue":l[9]||(l[9]=s=>o(t).birth_date=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",Oe,d(o(n).birth_date),1)]),e("div",He,[Re,i(e("input",{type:"text","onUpdate:modelValue":l[10]||(l[10]=s=>o(t).birth_place=s)},null,512),[[_,o(t).birth_place]]),e("p",qe,d(o(n).birth_place),1)]),e("div",Je,[ze,e("div",Ye,[m(y,null,{default:P(()=>[m(x,{modelValue:o(t).tmk,"onUpdate:modelValue":l[11]||(l[11]=s=>o(t).tmk=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",Ge,d(o(n).tmk),1)]),e("div",Qe,[We,i(e("textarea",{"onUpdate:modelValue":l[12]||(l[12]=s=>o(t).address=s)},null,512),[[_,o(t).address]]),e("p",Xe,d(o(n).address),1)]),e("div",Ze,[et,i(e("select",{"onUpdate:modelValue":l[13]||(l[13]=s=>o(t).religion=s)},ot,512),[[b,o(t).religion]]),e("p",lt,d(o(n).religion),1)]),e("div",st,[at,i(e("select",{"onUpdate:modelValue":l[14]||(l[14]=s=>o(t).status=s)},dt,512),[[b,o(t).status]]),e("p",it,d(o(n).status),1)]),e("div",rt,[pt,e("div",_t,[m(g,{class:"w-full h-full p-1",type:"text",value:o(t).bpjs_kesehatan||0,onInput:l[15]||(l[15]=s=>o(t).bpjs_kesehatan=s)},null,8,["value"])]),e("p",ut,d(o(n).bpjs_kesehatan),1)]),e("div",mt,[ct,e("div",ft,[m(g,{class:"w-full h-full p-1",type:"text",value:o(t).bpjs_jamsos||0,onInput:l[16]||(l[16]=s=>o(t).bpjs_jamsos=s)},null,8,["value"])]),e("p",wt,d(o(n).bpjs_jamsos),1)]),vt,e("div",xt,[ht,i(e("input",{type:"text","onUpdate:modelValue":l[17]||(l[17]=s=>o(t).username=s)},null,512),[[_,o(t).username]]),e("p",bt,d(o(n).username),1)]),e("div",kt,[yt,e("div",gt,[i(e("input",{type:o(c)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":l[18]||(l[18]=s=>o(t).password=s)},null,8,Kt),[[C,o(t).password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:l[19]||(l[19]=s=>c.value=!o(c))},[o(c)?(u(),V(K,{key:0})):(u(),V(f,{key:1}))])]),e("p",St,d(o(n).password),1)]),e("div",Ut,[Vt,e("div",Tt,[i(e("input",{type:o(c)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":l[20]||(l[20]=s=>o(t).confirm_password=s)},null,8,jt),[[C,o(t).confirm_password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:l[21]||(l[21]=s=>c.value=!o(c))},[o(c)?(u(),V(K,{key:0})):(u(),V(f,{key:1}))])]),e("p",Nt,d(o(n).confirm_password),1)]),e("div",At,[m(S,{show:v.show,label:"Photo",link:o(t).face_loc_preview,onSetFile:l[22]||(l[22]=s=>o(t).face_loc=s),onSetPreview:l[23]||(l[23]=s=>o(t).face_loc_preview=s),can_remove:!0},null,8,["show","link"]),e("p",Dt,d(o(n).face_loc),1)]),e("div",Mt,[It,e("div",Pt,[e("label",Ct,[i(e("input",{id:"checkbox",checked:o(t).m_face_login,"onUpdate:modelValue":l[24]||(l[24]=s=>o(t).m_face_login=s),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded mr-1"},null,8,Bt),[[W,o(t).m_face_login]]),X(" "+d(o(t).m_face_login?"Ya":"Tidak"),1)])]),e("p",Et,d(o(n).m_face_login),1)]),e("div",Ft,[$t,i(e("select",{"onUpdate:modelValue":l[25]||(l[25]=s=>o(t).workers_from=s)},[(u(!0),h(M,null,I(o(w)().list_pabrik,s=>(u(),h("option",{value:s},d(s),9,Lt))),256))],512),[[b,o(t).workers_from]]),e("p",Ot,d(o(n).workers_from),1)])]),e("div",Ht,[m(S,{show:v.show,label:"Attachment",link:o(t).attachment_1_preview,onSetFile:l[26]||(l[26]=s=>o(t).attachment_1=s),onSetPreview:l[27]||(l[27]=s=>o(t).attachment_1_preview=s),can_remove:!0},null,8,["show","link"]),e("p",Rt,d(o(n).attachment_1),1)])]),e("div",qt,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[28]||(l[28]=s=>v.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[29]||(l[29]=Z(s=>E(),["prevent"]))}," Save ")])])])],512)),[[Q,v.show]])}}};export{lo as default};
