import{_ as q}from"./HeaderPopup.vue.396fcac1.js";import F from"./AttachmentSingle.0a8da19d.js";import{r as u,f as I,G as S,j as M,m as P,J as j,o as m,c as p,a as e,b as C,t as o,k as a,l as w,x as E,E as R,A as v,B as N,p as Y,e as H}from"./entry.25e4ac22.js";import"./useUtils.786a5149.js";import{u as A}from"./useMyFetch.0dee4895.js";import{_ as T}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.87d2be07.js";import"./PDFJsView.8ac127cb.js";const r=i=>(Y("data-v-aae6a4a0"),i=i(),H(),i),z={class:"box-fixed"},G={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},J={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},K={class:"w-full sm:w-full md:w-1/3 flex flex-row flex-wrap"},O={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},U=r(()=>e("label",{for:""},"Name",-1)),L={class:"card-border"},Q={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},W=r(()=>e("label",{for:""},"Role",-1)),X={class:"card-border"},Z={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ee=r(()=>e("label",{for:""},"No KTP",-1)),te={class:"card-border"},ae={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},le=r(()=>e("label",{for:""},"No SIM",-1)),se={class:"card-border"},oe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ie=r(()=>e("label",{for:""},"Bank Code",-1)),re={class:"card-border"},ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},de=r(()=>e("label",{for:""},"No Rek",-1)),ce={class:"card-border"},_e={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},fe=r(()=>e("label",{for:""},"Nama Rek",-1)),ue={class:"card-border"},me={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pe=r(()=>e("label",{for:""},"Phone Number",-1)),ve={class:"card-border"},we={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},he={class:"w-full flex items-center justify-end"},xe={class:"w-full flex flex-wrap p-3 items-center"},be=r(()=>e("div",null," Di Validasi oleh : ",-1)),ye={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ke={key:0},ge={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const n=i,{$moment:B}=R(),h={id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""},t=u({...h}),x=I("token"),b=u({}),y=u(null),k=u([]),$=async()=>{v().loading_full=!0,b.value={};const s=new FormData;let l="post",c=n.id;c==0||(s.append("id",c),s.append("_method","PUT"));const{data:_,error:f,status:d}=await A("/employee_validasi",{method:l,headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},body:s,retry:0});if(v().loading_full=!1,d.value==="error"){N().trigger(f,b);return}t.value.val=_.value.val,t.value.val_user=_.value.val_user,t.value.val_by=_.value.val_by,t.value.val_at=_.value.val_at;let g=n.p_data.map(V=>V.id).indexOf(n.id);g>=-1&&n.p_data.splice(g,1,{...t.value}),n.fnClose()},D=async()=>{v().loading_full=!0;const{data:s,error:l,status:c}=await A("/employee",{method:"get",headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(v().loading_full=!1,c.value==="error"){N().trigger(l);return}t.value=s.value.data,k.value=s.value.data.details};return S(()=>{let s=0;return k.value.forEach(l=>{l.p_status!="Remove"&&(s+=parseInt(l.amount))}),s}),S(()=>!1),M(()=>n.show,(s,l)=>{s==!0&&(t.value={...h},n.is_view==!1&&setTimeout(()=>{y.value.focus()},1),D())},{immediate:!0}),(s,l)=>{var f;const c=q,_=F;return P((m(),p("section",z,[e("div",null,[C(c,{title:"Form Master Standby Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",G,[e("div",J,[e("div",K,[e("div",O,[U,e("div",L,o(a(t).name),1)]),e("div",Q,[W,e("div",X,o(a(t).role),1)]),e("div",Z,[ee,e("div",te,o(a(t).ktp_no),1)]),e("div",ae,[le,e("div",se,o(a(t).sim_no),1)]),e("div",oe,[ie,e("div",re,o((f=a(t).bank)==null?void 0:f.code),1)]),e("div",ne,[de,e("div",ce,o(a(t).rek_no),1)]),e("div",_e,[fe,e("div",ue,o(a(t).rek_name),1)]),e("div",me,[pe,e("div",ve,o(a(t).phone_number),1)])]),e("div",we,[C(_,{label:"Attachment",value:a(t).attachment_1_preview,onSetFile:l[0]||(l[0]=d=>a(t).attachment_1=d),onSetPreview:l[1]||(l[1]=d=>a(t).attachment_1_preview=d)},null,8,["value"])])]),e("div",he,[e("div",xe,[be,a(t).val?(m(),p("div",ye,[a(t).val?(m(),p("div",ke," App 1 : "+o(a(t).val_by.username)+" ( "+o(a(t).val_at?a(B)(a(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[2]||(l[2]=d=>i.fnClose())}," Cancel "),i.is_view==0?(m(),p("button",{key:0,ref_key:"it_val",ref:y,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[3]||(l[3]=E(d=>$(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[j,i.show]])}}},qe=T(ge,[["__scopeId","data-v-aae6a4a0"]]);export{qe as default};
