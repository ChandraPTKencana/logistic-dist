import{_ as Ze}from"./Header.03011c32.js";import{_ as We}from"./Edit.d556bcc7.js";import{_ as et}from"./Eyes.12ef4f12.js";import{_ as tt}from"./Void.d52e3820.js";import{_ as lt}from"./Signature.fa631486.js";import{_ as at}from"./Cog.42d75200.js";import{_ as ot,a as st}from"./trx_absen.414eec67.js";import{_ as it}from"./Line.ef2a08c0.js";import{_ as _t}from"./Check.e1435bcb.js";import{_ as rt}from"./TableView.ea58ee8c.js";import{_ as nt}from"./PopupMini.vue.627fde59.js";import{_ as ge}from"./HeaderPopup.vue.3dbe1371.js";import{_ as $e}from"./client-only.d796d887.js";import{_ as dt}from"./InputPointFormat.vue.f5325e02.js";import{r as h,f as te,J,g as X,M as De,h as R,v as Te,o as r,c as n,a as t,b as g,t as o,k as e,G as f,F as de,n as ce,x as M,l as Me,j as he,w as q,m as je,s as ue,y as K,p as Ce,e as Se,Q as ct,D as ut,B as ft,H as ye,I as pt,i as vt,d as Q,q as bt,E as mt,L as z,N as wt}from"./entry.1e961bb7.js";import{u as Be}from"./useUtils.0b7c2619.js";import{u as V}from"./useMyFetch.a26a0131.js";import{_ as Ae}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as kt}from"./Times.f09ef1bc.js";import"./Search.06448cc3.js";const v=T=>(Ce("data-v-6356cb3f"),T=T(),Se(),T),xt={class:"box-fixed"},ht={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},yt={class:"w-full flex flex-col items-center grow overflow-auto"},gt={class:"w-full flex flex-row flex-wrap"},$t={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dt=v(()=>t("label",{for:""},"U.Jalan Per",-1)),Tt={class:"card-border"},Mt={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},jt=v(()=>t("label",{for:""},"Jenis",-1)),Ct={class:"card-border"},St={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bt=v(()=>t("label",{for:""},"Supir",-1)),At={class:"card-border"},Pt={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Nt=v(()=>t("label",{for:""},"Kernet",-1)),Ot={class:"card-border"},Ht={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yt=v(()=>t("label",{for:""},"No Pol",-1)),qt={class:"card-border"},It={key:0,class:"w-full flex flex-wrap"},Ft={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Kt=v(()=>t("label",{for:""},"Tujuan",-1)),Vt={class:"card-border"},Ut={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Lt=v(()=>t("label",{for:""},"Tipe",-1)),zt={class:"card-border"},Jt={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Rt=v(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Et={class:"card-border"},Gt=v(()=>t("label",{for:""},"Peralihan",-1)),Qt=["disabled"],Xt=v(()=>t("option",{value:""},null,-1)),Zt=["value"],Wt={class:"text-red-500"},el={key:2,class:"w-full flex flex-col flex-wrap p-1"},tl=v(()=>t("label",{for:""},"Tiket A",-1)),ll={id:"ticket_a"},al=["value"],ol={class:"text-red-500"},sl={key:3,class:"w-full flex flex-wrap"},il={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},_l=v(()=>t("label",{for:""},"In At",-1)),rl={class:"card-border disabled"},nl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},dl=v(()=>t("label",{for:""},"Out At",-1)),cl={class:"card-border disabled"},ul={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fl=v(()=>t("label",{for:""},"Bruto",-1)),pl={class:"card-border disabled"},vl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},bl=v(()=>t("label",{for:""},"Tara",-1)),ml={class:"card-border disabled"},wl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},kl=v(()=>t("label",{for:""},"Netto",-1)),xl={class:"card-border disabled"},hl={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},yl=v(()=>t("label",{for:""},"No Pol",-1)),gl={class:"card-border disabled"},$l={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Dl=v(()=>t("label",{for:""},"Supir",-1)),Tl={class:"card-border disabled"},Ml={key:4,class:"w-full flex flex-col flex-wrap p-1"},jl=v(()=>t("label",{for:""},"Tiket B",-1)),Cl={id:"ticket_b"},Sl=["value"],Bl={class:"text-red-500"},Al={key:5,class:"w-full flex flex-wrap"},Pl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Nl=v(()=>t("label",{for:""},"In At",-1)),Ol={class:"card-border disabled"},Hl={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Yl=v(()=>t("label",{for:""},"Out At",-1)),ql={class:"card-border disabled"},Il={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Fl=v(()=>t("label",{for:""},"Bruto ",-1)),Kl={class:"card-border disabled"},Vl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ul=v(()=>t("label",{for:""},"Tara ",-1)),Ll={class:"card-border disabled"},zl={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Jl=v(()=>t("label",{for:""},"Netto ",-1)),Rl={class:"card-border disabled"},El={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Gl=v(()=>t("label",{for:""},"No Pol",-1)),Ql={class:"card-border disabled"},Xl={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Zl=v(()=>t("label",{for:""},"Supir",-1)),Wl={class:"card-border disabled"},ea={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},ta=v(()=>t("label",{for:""},"In At",-1)),la={class:"text-red-500"},aa={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col p-1"},oa=v(()=>t("label",{for:""},"Out At",-1)),sa={class:"text-red-500"},ia={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_a=v(()=>t("label",{for:""},"Bruto",-1)),ra={class:"text-red-500"},na={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},da=v(()=>t("label",{for:""},"Tara",-1)),ca={class:"text-red-500"},ua={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fa=v(()=>t("label",{for:""},"Netto",-1)),pa={class:"card-border disabled"},va={class:"w-full flex items-center justify-end"},ba={__name:"trx_trp_ticket",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_ticket:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(T){const w=T,{$moment:D}=ue(),{pointFormat:y}=Be(),U={id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",transition_target:"",transition_type:""};let a={...U};const l=h({...U}),$=te("token"),S=h({}),I=i=>{l.value.jenis=="TBS"&&w.fnLoadDBData(l.value.jenis,i.target.value)},A=async()=>{M().loading_full=!0,S.value={};const i=new FormData;if(i.append("tanggal",D(l.value.tanggal).format("Y-MM-DD")),i.append("jenis",l.value.jenis),i.append("id_uj",l.value.id_uj),i.append("xto",l.value.xto),i.append("online_status",w.online_status),i.append("transition_target",l.value.transition_target),l.value.ticket_a_no){let d=C.value.filter(F=>F.TicketNo==l.value.ticket_a_no);d.length==0&&l.value.ticket_a_no==a.ticket_a_no?i.append("ticket_a_id",a.ticket_a_id):i.append("ticket_a_id",d[0].TicketID)}if(l.value.ticket_b_no){let d=O.value.filter(F=>F.TicketNo==l.value.ticket_b_no);d.length==0&&l.value.ticket_b_no==a.ticket_b_no?i.append("ticket_b_id",a.ticket_b_id):i.append("ticket_b_id",d[0].TicketID)}i.append("ticket_a_no",l.value.ticket_a_no),i.append("ticket_b_no",l.value.ticket_b_no),i.append("ticket_b_bruto",l.value.ticket_b_bruto),i.append("ticket_b_tara",l.value.ticket_b_tara),l.value.ticket_b_in_at&&i.append("ticket_b_in_at",D(l.value.ticket_b_in_at).format("Y-MM-DD HH:mm:ss")),l.value.ticket_b_out_at&&i.append("ticket_b_out_at",D(l.value.ticket_b_out_at).format("Y-MM-DD HH:mm:ss")),i.append("supir",l.value.supir),i.append("kernet",l.value.kernet),i.append("no_pol",l.value.no_pol);let u="post",m=w.id;m==0||(i.append("id",m),i.append("_method","PUT"));const{data:c,error:N,status:P}=await V("/trx_trp_ticket",{method:u,headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},body:i,retry:0});if(M().loading_full=!1,P.value==="error"){K().trigger(N,S);return}if(l.value.ticket_a_netto=parseFloat(l.value.ticket_a_bruto)-parseFloat(l.value.ticket_a_tara),l.value.ticket_b_netto=parseFloat(l.value.ticket_b_bruto)-parseFloat(l.value.ticket_b_tara),l.value.updated_at=c.value.updated_at,w.id<=0)l.value.id=c.value.id,l.value.created_at=c.value.created_at,w.p_data.unshift(l.value);else{let d=w.p_data.map(F=>F.id).indexOf(w.id);d>=-1&&w.p_data.splice(d,1,{...l.value})}w.fnClose()},C=J(()=>{let i=[];return l.value.jenis=="CPO"?i=["cpo"]:l.value.jenis=="PK"?i=["kernel"]:i=["mtbs"],w.list_ticket.filter(u=>i.indexOf(u.ProductName.toLowerCase())>-1)}),O=J(()=>{let i=[];return l.value.transition_target!=""?i=["tbs","rtbs"]:l.value.jenis=="TBSK"?i=["tbs"]:l.value.jenis=="TBS"&&(i=["rtbs"]),w.list_ticket.filter(u=>i.indexOf(u.ProductName.toLowerCase())>-1)}),j=J(()=>!1),x=async()=>{M().loading_full=!0;const{data:i,error:u,status:m}=await V("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${$.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(M().loading_full=!1,m.value==="error"){K().trigger(u);return}l.value=i.value.data,a={...i.value.data},w.fnLoadDBData(l.value.jenis,l.value.transition_target)};X(()=>w.show,(i,u)=>{i==!0&&(l.value={...U},S.value={},w.id!=0&&x())},{immediate:!0});let k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""};return X(()=>l.value.ticket_a_no,(i,u)=>{if(i==""||i){if(i){let m=C.value.filter(c=>c.TicketNo==l.value.ticket_a_no);m.length>0?k={id:m[0].TicketID,bruto:m[0].Bruto,tara:m[0].Tara,netto:m[0].Netto,supir:m[0].NamaSupir,no_pol:m[0].VehicleNo,in_at:m[0].DateTimeIn,out_at:m[0].DateTimeOut}:l.value.ticket_a_no==a.ticket_a_no&&(k={id:a.ticket_a_id,bruto:a.ticket_a_bruto,tara:a.ticket_a_tara,netto:a.ticket_a_netto,supir:a.ticket_a_supir,no_pol:a.ticket_a_no_pol,in_at:a.ticket_a_in_at,out_at:a.ticket_a_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),l.value.ticket_a_id=k.id,l.value.ticket_a_bruto=k.bruto,l.value.ticket_a_tara=k.tara,l.value.ticket_a_netto=k.netto,l.value.ticket_a_in_at=k.in_at,l.value.ticket_a_out_at=k.out_at,l.value.ticket_a_supir=k.supir,l.value.ticket_a_no_pol=k.no_pol}},{deep:!0,immediate:!0}),X(()=>l.value.ticket_b_no,(i,u)=>{if(["TBS","TBSK"].indexOf(l.value.jenis)>-1&&(i==""||i)){if(i){let m=O.value.filter(c=>c.TicketNo==l.value.ticket_b_no);m.length>0?k={id:m[0].TicketID,bruto:m[0].Bruto,tara:m[0].Tara,netto:m[0].Netto,supir:m[0].NamaSupir,no_pol:m[0].VehicleNo,in_at:m[0].DateTimeIn,out_at:m[0].DateTimeOut}:l.value.ticket_b_no==a.ticket_b_no&&(k={id:a.ticket_b_id,bruto:a.ticket_b_bruto,tara:a.ticket_b_tara,netto:a.ticket_b_netto,supir:a.ticket_b_supir,no_pol:a.ticket_b_no_pol,in_at:a.ticket_b_in_at,out_at:a.ticket_b_out_at})}i==""&&(k={id:-1,bruto:0,tara:0,netto:0,supir:"-",no_pol:"-",in_at:"",out_at:""}),l.value.ticket_b_id=k.id,l.value.ticket_b_bruto=k.bruto,l.value.ticket_b_tara=k.tara,l.value.ticket_b_netto=k.netto,l.value.ticket_b_in_at=k.in_at,l.value.ticket_b_out_at=k.out_at,l.value.ticket_b_supir=k.supir,l.value.ticket_b_no_pol=k.no_pol}},{deep:!0,immediate:!0}),(i,u)=>{const m=ge,c=De("vue-date-picker"),N=$e,P=dt;return R((r(),n("section",xt,[t("div",null,[g(m,{title:"Form Transaction",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ht,[t("div",yt,[t("div",gt,[t("div",$t,[Dt,t("div",Tt,o(e(l).tanggal?e(D)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Mt,[jt,t("div",Ct,o(e(l).jenis),1)]),t("div",St,[Bt,t("div",At,o(e(l).supir),1)]),t("div",Pt,[Nt,t("div",Ot,o(e(l).kernet),1)]),t("div",Ht,[Yt,t("div",qt,o(e(l).no_pol),1)]),e(l).jenis!=""?(r(),n("div",It,[t("div",Ft,[Kt,t("div",Vt,o(e(l).xto),1)]),t("div",Ut,[Lt,t("div",zt,o(e(l).tipe),1)]),t("div",Jt,[Rt,t("div",Et,o(e(y)(e(l).amount||0)),1)])])):f("",!0),e(l).jenis=="TBS"?(r(),n("div",{key:1,class:"w-full p-1",onChange:u[1]||(u[1]=d=>I(d))},[Gt,R(t("select",{"onUpdate:modelValue":u[0]||(u[0]=d=>e(l).transition_target=d),disabled:e(l).transition_type=="From"},[Xt,(r(!0),n(de,null,ce(e(M)().list_pabrik,d=>(r(),n("option",{value:d},o(d),9,Zt))),256))],8,Qt),[[Me,e(l).transition_target]]),t("p",Wt,o(e(S).transition_target),1)],32)):f("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",el,[tl,R(t("input",{type:"text",list:"ticket_a","onUpdate:modelValue":u[2]||(u[2]=d=>e(l).ticket_a_no=d)},null,512),[[he,e(l).ticket_a_no]]),t("datalist",ll,[(r(!0),n(de,null,ce(e(C),d=>(r(),n("option",{value:d.TicketNo},o(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,al))),256))]),t("p",ol,o(e(S).ticket),1)])):f("",!0),e(l).jenis!=""&&e(l).jenis!="TBSK"?(r(),n("div",sl,[t("div",il,[_l,t("div",rl,o(e(l).ticket_a_in_at?e(D)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",nl,[dl,t("div",cl,o(e(l).ticket_a_out_at?e(D)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",ul,[fl,t("div",pl,o(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto):0),1)]),t("div",vl,[bl,t("div",ml,o(e(l).ticket_a_tara?e(y)(e(l).ticket_a_tara):0),1)]),t("div",wl,[kl,t("div",xl,o(e(l).ticket_a_bruto?e(y)(e(l).ticket_a_bruto-e(l).ticket_a_tara):0),1)]),t("div",hl,[yl,t("div",gl,o(e(l).ticket_a_no_pol),1)]),t("div",$l,[Dl,t("div",Tl,o(e(l).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",Ml,[jl,R(t("input",{type:"text",list:"ticket_b","onUpdate:modelValue":u[3]||(u[3]=d=>e(l).ticket_b_no=d)},null,512),[[he,e(l).ticket_b_no]]),t("datalist",Cl,[(r(!0),n(de,null,ce(e(O),d=>(r(),n("option",{value:d.TicketNo},o(d.TicketNo+"-"+d.VehicleNo+"-"+d.NamaSupir),9,Sl))),256))]),t("p",Bl,o(e(S).ticket),1)])):f("",!0),["TBS","TBSK"].indexOf(e(l).jenis)>-1?(r(),n("div",Al,[t("div",Pl,[Nl,t("div",Ol,o(e(l).ticket_b_in_at?e(D)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Hl,[Yl,t("div",ql,o(e(l).ticket_b_out_at?e(D)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Il,[Fl,t("div",Kl,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto):0),1)]),t("div",Vl,[Ul,t("div",Ll,o(e(l).ticket_b_tara?e(y)(e(l).ticket_b_tara):0),1)]),t("div",zl,[Jl,t("div",Rl,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)]),t("div",El,[Gl,t("div",Ql,o(e(l).ticket_b_no_pol),1)]),t("div",Xl,[Zl,t("div",Wl,o(e(l).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",ea,[ta,g(N,null,{default:q(()=>[g(c,{modelValue:e(l).ticket_b_in_at,"onUpdate:modelValue":u[4]||(u[4]=d=>e(l).ticket_b_in_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",la,o(e(S).ticket_b_in_at),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",aa,[oa,g(N,null,{default:q(()=>[g(c,{modelValue:e(l).ticket_b_out_at,"onUpdate:modelValue":u[5]||(u[5]=d=>e(l).ticket_b_out_at=d),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1}),t("p",sa,o(e(S).ticket_b_out_at),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",ia,[_a,t("div",null,[g(P,{class:"card-border p-1",type:"text",value:e(l).ticket_b_bruto||0,onInput:u[6]||(u[6]=d=>e(l).ticket_b_bruto=d),show:T.show},null,8,["value","show"])]),t("p",ra,o(e(S).ticket_b_bruto),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",na,[da,t("div",null,[g(P,{class:"card-border p-1",type:"text",value:e(l).ticket_b_tara||0,onInput:u[7]||(u[7]=d=>e(l).ticket_b_tara=d),show:T.show},null,8,["value","show"])]),t("p",ca,o(e(S).ticket_b_tara),1)])):f("",!0),["CPO","PK"].indexOf(e(l).jenis)>-1?(r(),n("div",ua,[fa,t("div",pa,o(e(l).ticket_b_bruto?e(y)(e(l).ticket_b_bruto-e(l).ticket_b_tara):0),1)])):f("",!0)])]),t("div",va,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:u[8]||(u[8]=d=>T.fnClose())}," Cancel "),e(j)?f("",!0):(r(),n("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:u[9]||(u[9]=je(d=>A(),["prevent"]))}," Save "))])])])],512)),[[Te,T.show]])}}},ma=Ae(ba,[["__scopeId","data-v-6356cb3f"]]);const b=T=>(Ce("data-v-e534cd92"),T=T(),Se(),T),wa={class:"box-fixed"},ka={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},xa={class:"w-full flex flex-col items-center grow overflow-auto"},ha={class:"w-full flex flex-row flex-wrap"},ya={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ga=b(()=>t("label",{for:""},"U.Jalan Per",-1)),$a={class:"card-border"},Da={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ta=b(()=>t("label",{for:""},"Jenis",-1)),Ma={class:"card-border"},ja={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ca=b(()=>t("label",{for:""},"Supir",-1)),Sa={class:"card-border"},Ba={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Aa=b(()=>t("label",{for:""},"Kernet",-1)),Pa={class:"card-border"},Na={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Oa=b(()=>t("label",{for:""},"No Pol",-1)),Ha={class:"card-border"},Ya={key:0,class:"w-full flex flex-wrap"},qa={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ia=b(()=>t("label",{for:""},"Tujuan",-1)),Fa={class:"card-border"},Ka={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Va=b(()=>t("label",{for:""},"Tipe",-1)),Ua={class:"card-border"},La={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},za=b(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),Ja={class:"card-border"},Ra={key:1,class:"w-full p-1"},Ea=b(()=>t("label",{for:""},"Peralihan",-1)),Ga={class:"card-border"},Qa={key:2,class:"w-full flex flex-col flex-wrap p-1"},Xa=b(()=>t("label",{for:""},"Tiket A",-1)),Za={class:"card-border"},Wa={key:3,class:"w-full flex flex-wrap"},eo={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},to=b(()=>t("label",{for:""},"In At",-1)),lo={class:"card-border disabled"},ao={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},oo=b(()=>t("label",{for:""},"Out At",-1)),so={class:"card-border disabled"},io={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_o=b(()=>t("label",{for:""},"Bruto",-1)),ro={class:"card-border disabled"},no={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},co=b(()=>t("label",{for:""},"Tara",-1)),uo={class:"card-border disabled"},fo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},po=b(()=>t("label",{for:""},"Netto",-1)),vo={class:"card-border disabled"},bo={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},mo=b(()=>t("label",{for:""},"No Pol",-1)),wo={class:"card-border disabled"},ko={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},xo=b(()=>t("label",{for:""},"Supir",-1)),ho={class:"card-border disabled"},yo={key:4,class:"w-full flex flex-col flex-wrap p-1"},go=b(()=>t("label",{for:""},"Tiket B",-1)),$o={class:"card-border"},Do={key:5,class:"w-full flex flex-wrap"},To={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Mo=b(()=>t("label",{for:""},"In At",-1)),jo={class:"card-border disabled"},Co={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},So=b(()=>t("label",{for:""},"Out At",-1)),Bo={class:"card-border disabled"},Ao={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Po=b(()=>t("label",{for:""},"Bruto ",-1)),No={class:"card-border disabled"},Oo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ho=b(()=>t("label",{for:""},"Tara ",-1)),Yo={class:"card-border disabled"},qo={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Io=b(()=>t("label",{for:""},"Netto ",-1)),Fo={class:"card-border disabled"},Ko={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Vo=b(()=>t("label",{for:""},"No Pol",-1)),Uo={class:"card-border disabled"},Lo={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},zo=b(()=>t("label",{for:""},"Supir",-1)),Jo={class:"card-border disabled"},Ro={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Eo=b(()=>t("label",{for:""},"In At",-1)),Go={class:"card-border"},Qo={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Xo=b(()=>t("label",{for:""},"Out At",-1)),Zo={class:"card-border"},Wo={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},es=b(()=>t("label",{for:""},"Bruto",-1)),ts={class:"card-border"},ls={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},as=b(()=>t("label",{for:""},"Tara",-1)),os={class:"card-border"},ss={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},is=b(()=>t("label",{for:""},"Netto",-1)),_s={class:"card-border"},rs={class:"w-full flex items-center justify-end"},ns={class:"w-full flex flex-wrap p-3 items-center"},ds=b(()=>t("div",null," Di Validasi oleh : ",-1)),cs={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},us={key:0},fs={key:1},ps={key:2},vs={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(T){const w=T,{$moment:D}=ue(),{pointFormat:y}=Be(),a=h({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),l=te("token"),$=h(null),S=async()=>{M().loading_full=!0;const A=new FormData;let C="post",O=w.id;O==0||(A.append("id",O),A.append("_method","PUT"));const{data:j,error:x,status:k}=await V("/trx_trp_validasi",{method:C,headers:{Authorization:`Bearer ${l.value}`,Accept:"application/json"},body:A,retry:0});if(M().loading_full=!1,k.value==="error"){K().trigger(x);return}a.value.val=j.value.val,a.value.val_user=j.value.val_user,a.value.val_by=j.value.val_by,a.value.val_at=j.value.val_at,a.value.val1=j.value.val1,a.value.val1_user=j.value.val1_user,a.value.val1_by=j.value.val1_by,a.value.val1_at=j.value.val1_at,a.value.val2=j.value.val2,a.value.val2_user=j.value.val2_user,a.value.val2_by=j.value.val2_by,a.value.val2_at=j.value.val2_at;let i=w.p_data.map(u=>u.id).indexOf(w.id);i>=-1&&w.p_data.splice(i,1,{...a.value}),w.fnClose()},I=async()=>{M().loading_full=!0;const{data:A,error:C,status:O}=await V("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${l.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(M().loading_full=!1,O.value==="error"){K().trigger(C);return}a.value=A.value.data};return X(()=>w.show,(A,C)=>{A==!0&&(w.is_view==!1&&setTimeout(()=>{$.value.focus()},1),I())},{immediate:!0}),(A,C)=>{const O=ge;return R((r(),n("section",wa,[t("div",null,[g(O,{title:"Form Transaction Validation",fn:T.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ka,[t("div",xa,[t("div",ha,[t("div",ya,[ga,t("div",$a,o(e(a).tanggal?e(D)(e(a).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",Da,[Ta,t("div",Ma,o(e(a).jenis),1)]),t("div",ja,[Ca,t("div",Sa,o(e(a).supir),1)]),t("div",Ba,[Aa,t("div",Pa,o(e(a).kernet),1)]),t("div",Na,[Oa,t("div",Ha,o(e(a).no_pol),1)]),e(a).jenis!=""?(r(),n("div",Ya,[t("div",qa,[Ia,t("div",Fa,o(e(a).xto),1)]),t("div",Ka,[Va,t("div",Ua,o(e(a).tipe),1)]),t("div",La,[za,t("div",Ja,o(e(y)(e(a).amount||0)),1)])])):f("",!0),e(a).jenis=="TBS"?(r(),n("div",Ra,[Ea,t("div",Ga,o(e(a).transition_target),1)])):f("",!0),e(a).jenis!=""&&e(a).jenis!="TBSK"?(r(),n("div",Qa,[Xa,t("div",Za,o(e(a).ticket_a_no),1)])):f("",!0),e(a).jenis!=""&&e(a).jenis!="TBSK"?(r(),n("div",Wa,[t("div",eo,[to,t("div",lo,o(e(a).ticket_a_in_at?e(D)(e(a).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",ao,[oo,t("div",so,o(e(a).ticket_a_out_at?e(D)(e(a).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",io,[_o,t("div",ro,o(e(a).ticket_a_bruto?e(y)(e(a).ticket_a_bruto):0),1)]),t("div",no,[co,t("div",uo,o(e(a).ticket_a_tara?e(y)(e(a).ticket_a_tara):0),1)]),t("div",fo,[po,t("div",vo,o(e(a).ticket_a_bruto?e(y)(e(a).ticket_a_bruto-e(a).ticket_a_tara):0),1)]),t("div",bo,[mo,t("div",wo,o(e(a).ticket_a_no_pol),1)]),t("div",ko,[xo,t("div",ho,o(e(a).ticket_a_supir),1)])])):f("",!0),["TBS","TBSK"].indexOf(e(a).jenis)>-1?(r(),n("div",yo,[go,t("div",$o,o(e(a).ticket_b_no),1)])):f("",!0),["TBS","TBSK"].indexOf(e(a).jenis)>-1?(r(),n("div",Do,[t("div",To,[Mo,t("div",jo,o(e(a).ticket_b_in_at?e(D)(e(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Co,[So,t("div",Bo,o(e(a).ticket_b_out_at?e(D)(e(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Ao,[Po,t("div",No,o(e(a).ticket_b_bruto?e(y)(e(a).ticket_b_bruto):0),1)]),t("div",Oo,[Ho,t("div",Yo,o(e(a).ticket_b_tara?e(y)(e(a).ticket_b_tara):0),1)]),t("div",qo,[Io,t("div",Fo,o(e(a).ticket_b_bruto?e(y)(e(a).ticket_b_bruto-e(a).ticket_b_tara):0),1)]),t("div",Ko,[Vo,t("div",Uo,o(e(a).ticket_b_no_pol),1)]),t("div",Lo,[zo,t("div",Jo,o(e(a).ticket_b_supir),1)])])):f("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),n("div",Ro,[Eo,t("div",Go,o(e(a).ticket_b_in_at?e(D)(e(a).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),n("div",Qo,[Xo,t("div",Zo,o(e(a).ticket_b_out_at?e(D)(e(a).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),n("div",Wo,[es,t("div",ts,o(e(y)(e(a).ticket_b_bruto||0)),1)])):f("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),n("div",ls,[as,t("div",os,o(e(y)(e(a).ticket_b_tara||0)),1)])):f("",!0),["CPO","PK"].indexOf(e(a).jenis)>-1?(r(),n("div",ss,[is,t("div",_s,o(e(y)(e(a).ticket_b_netto||0)),1)])):f("",!0)])]),t("div",rs,[t("div",ns,[ds,e(a).val||e(a).val1||e(a).val2?(r(),n("div",cs,[e(a).val?(r(),n("div",us," App 1 : "+o(e(a).val_by.username)+" ( "+o(e(a).val_at?e(D)(e(a).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),e(a).val1?(r(),n("div",fs," App 2 : "+o(e(a).val1_by.username)+" ( "+o(e(a).val1_at?e(D)(e(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),e(a).val2?(r(),n("div",ps," App 3 : "+o(e(a).val2_by.username)+" ( "+o(e(a).val2_at?e(D)(e(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0)])):f("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:C[0]||(C[0]=j=>T.fnClose())}," Cancel "),T.is_view==0?(r(),n("button",{key:0,ref_key:"it_val",ref:$,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:C[1]||(C[1]=je(j=>S(),["prevent"])),onKeyup:C[2]||(C[2]=ct(j=>S(),["enter"]))}," Validasi ",544)):f("",!0)])])])],512)),[[Te,T.show]])}}},bs=Ae(vs,[["__scopeId","data-v-e534cd92"]]),ms={class:"w-full h-full flex flex-col"},ws={class:"w-full flex grow flex-col overflow-auto h-0"},ks={class:"w-full flex justify-between flex-wrap"},xs={class:"grow flex"},hs={class:"m-1"},ys=wt('<option value="ticket_not_done">Undone</option><option value="ticket_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),gs=[ys],$s={class:"flex"},Ds=t("span",{class:"text-xs"},"Mode",-1),Ts=t("b",null,"tidak dapat dibatalkan lagi",-1),Ms={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},js={class:"relative",style:{width:"95%",height:"90%"}},Cs={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ss={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Bs={class:"w-full p-1"},As={class:"w-full p-1 bg-gray-200"},Ps=t("div",{class:"w-full text-blue-600 font-bold"}," Set Date For Load Data ",-1),Ns={class:"w-full grid grid-cols-2 grid-rows-1 gap-1"},Os={class:"flex flex-col flex-wrap p-1"},Hs=t("label",{for:""},"From",-1),Ys={class:"grow"},qs={class:"flex flex-col flex-wrap p-1"},Is=t("label",{for:""},"To",-1),Fs={class:"grow"},ri={__name:"ticket",async setup(T){let w,D;const{$moment:y}=ue(),U=s=>s.deleted==1?"!bg-red-400":s.req_deleted==1?"!bg-yellow-300":["CPO","PK"].indexOf(s.jenis)>-1&&(s.ticket_a_id>0||s.ticket_b_bruto>0||s.ticket_b_tara>0||s.ticket_b_netto>0||s.ticket_b_in_at!=""||s.ticket_b_out_at!="")||s.jenis=="TBS"&&(s.ticket_a_id>0||s.ticket_b_id>0)||s.jenis=="TBSK"&&s.ticket_b_id>0?"!bg-blue-300":"",a=s=>(s.map(_=>{_.class_h=U(_)}),s),l=h("ticket_not_done");X(()=>l.value,s=>{we.value.map(_=>{let Y=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(_.key)>-1;return["all","deleted","req_deleted"].indexOf(s)>-1?Y&&(_.tbl_show=1):Y&&(_.tbl_show=0),_}),fe()},{immediate:!1});const $={};$._TimeZoneOffset=new Date().getTimezoneOffset(),$.sort="tanggal:desc";const S=h({}),I=h({from:"",to:""}),A=te("token"),C=te("role"),O=s=>s.includes(C.value),{data:j}=([w,D]=ut(async()=>mt(async()=>{M().loading_full=!0;let s=[];const[_,Y]=await Promise.all([V("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{filter_status:l},retry:0})]);return _.status.value!=="error"&&(s=a(_.data.value.data)),_.status.value==="error"?(K().trigger(_.error),{trx_trps:s}):(M().loading_full=!1,{trx_trps:s})},"$X4xCu6yBOs")),w=await w,D(),w),x=h(j.value.trx_trps||[]),k=h([]),i=h(!1),u=async(s,_="")=>{M().loading_full=!0;let Y=B.value.from?y(B.value.from).format("Y-MM-DD"):"",G=B.value.to?y(B.value.to).format("Y-MM-DD"):"";const{data:H,error:ie,status:_e}=await V("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{jenis:s,online_status:i.value,from:Y,to:G,transition_target:_},retry:0});if(M().loading_full=!1,_e.value==="error"){K().trigger(ie);return}k.value=H.value.list_ticket},m=h({field:"tanggal",by:"desc"}),c=h(-1),N=J(()=>x.value[c.value]),P=h({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),d=()=>{$.like="";let s=JSON.parse(JSON.stringify(M()._tv.global_keyword));s!=""&&($.like=`id:%${s}%,xto:%${s}%,jenis:%${s}%,pv_no:%${s}%,ticket_a_no:%${s}%,ticket_b_no:%${s}%,no_pol:%${s}%,supir:%${s}%,kernet:%${s}%,cost_center_code:%${s}%,cost_center_desc:%${s}%,pvr_no:%${s}%,tanggal:%${s}%,transition_target:%${s}%`),$.sort="",m.value.field&&($.sort=m.value.field+":"+m.value.by),$.date_from=I.value.from?y(I.value.from).format("YYYY-MM-DD"):"",$.date_to=I.value.to?y(I.value.to).format("YYYY-MM-DD"):"",$.filter_model=JSON.stringify(M()._tv.filter_model)},F=async()=>{M().loading_full=!0,S.value={},P.value.may_get_data=!1,$.page=P.value.page,$.page==1&&(x.value=[]),$.first_row&&delete $.first_row,$.page>1&&($.first_row=JSON.stringify(x.value[0])),$.filter_status=l.value;const{data:s,error:_,status:Y}=await V("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:$,retry:0});if(M().loading_full=!1,P.value.may_get_data=!0,Y.value==="error"){K().trigger(_,S);return}P.value.page==1?x.value=a(s.value.data):P.value.page>1&&(x.value=[...x.value,...a(s.value.data)]),s.value.data.length==0&&(P.value.is_last_record=!0),M()._tv.filter_box=!1},fe=()=>{c.value=-1,P.value.page=1,P.value.is_last_record=!1,d(),F()};ft();const le=h(!1),pe=h(0),{display:Z}=ye();pt(ye());const Pe=()=>{c.value==-1?Z({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(pe.value=x.value[c.value].id,le.value=!0)},W=h(!1),ae=h(0),oe=h(!1),Ne=()=>{c.value==-1?Z({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ae.value=x.value[c.value].id,W.value=!0,oe.value=!1)},Oe=()=>{c.value==-1?Z({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ae.value=x.value[c.value].id,W.value=!0,oe.value=!0)},se=h(!1),ve=h(0),He=s=>{ve.value=s,se.value=!0},be=h({}),E=h(!1),Ye=h(""),qe=async()=>{E.value&&(E.value=!1)},Ie=()=>{var s;c.value==-1?Z({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Ye.value="",be.value={id:x.value[c.value].id,"no pol":x.value[c.value].no_pol,tujuan:x.value[c.value].xto,permintaan:(s=x.value[c.value].req_deleted_by)==null?void 0:s.username,alasan:x.value[c.value].req_deleted_reason},E.value=!0)},Fe=async()=>{M().loading_full=!0;const s=new FormData;s.append("id",x.value[c.value].id),s.append("_method","DELETE");const{data:_,error:Y,status:G}=await V("/trx_trp_approve_req_delete",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:s,retry:0});if(M().loading_full=!1,G.value==="error"){K().trigger(Y);return}let H={...x.value[c.value]};H.deleted=_.value.deleted,H.deleted_user=_.value.deleted_user,H.deleted_at=_.value.deleted_at,H.deleted_by=_.value.deleted_by,H.deleted_reason=_.value.deleted_reason,H.class_h=U(H),l.value!="all"?x.value.splice(c.value,1):x.value.splice(c.value,1,{...H}),c.value=-1,E.value=!1},ee=h(!1),B=h({from:new Date().setDate(new Date().getDate()-3),to:new Date}),me=s=>{s=="from"?B.value.from-B.value.to>0&&(B.value.from=B.value.to):B.value.to-B.value.from<0&&(B.value.to=B.value.from)},we=h([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK"]},{key:"amount",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition_target",label:"Peralihan",filter_on:1,type:"select",select_item:M().list_pabrik},{key:"ticket_a",label:"Ticket A",childs:[{key:"ticket_a_no",label:"No",filter_on:1,type:"string"},{key:"ticket_a_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_a_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_a_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_a_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_a_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_a_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_a_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"ticket_b",label:"Ticket B",childs:[{key:"ticket_b_no",label:"No",filter_on:1,type:"string"},{key:"ticket_b_bruto",label:"Bruto",filter_on:1,type:"number"},{key:"ticket_b_tara",label:"Tara",filter_on:1,type:"number"},{key:"ticket_b_netto",label:"Netto",filter_on:1,type:"number"},{key:"ticket_b_supir",label:"Supir",filter_on:1,type:"string"},{key:"ticket_b_no_pol",label:"No Pol",filter_on:1,type:"string"},{key:"ticket_b_in_at",label:"In At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"ticket_b_out_at",label:"Out At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Ke=J(()=>c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Ve=J(()=>!O(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==0&&N.value.val2==0),Ue=J(()=>!O(["PabrikTransport"])&&c.value>-1&&N.value.deleted==0&&N.value.req_deleted==1&&N.value.val2==0);return(s,_)=>{const Y=Ze,G=We,H=et,ie=tt,_e=lt,Le=at,ze=st,re=it,ne=_t,Je=rt,Re=nt,Ee=ma,Ge=bs,Qe=ot,Xe=kt,ke=De("vue-date-picker"),xe=$e;return r(),n("div",ms,[g(Y,{title:"List Transaction"}),t("div",ws,[t("div",ks,[t("div",xs,[t("div",hs,[R(t("select",{class:"","onUpdate:modelValue":_[0]||(_[0]=p=>vt(l)?l.value=p:null)},gs,512),[[Me,e(l)]])]),e(Ke)?(r(),n("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[1]||(_[1]=p=>Pe())},[g(G)])):f("",!0),e(c)>-1?(r(),n("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[2]||(_[2]=p=>Oe())},[g(H)])):f("",!0),e(Ue)?(r(),n("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[3]||(_[3]=p=>Ie())},[g(ie)])):f("",!0),e(Ve)?(r(),n("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:_[4]||(_[4]=p=>Ne())},[g(_e)])):f("",!0)]),t("div",$s,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:_[5]||(_[5]=p=>ee.value=!0)},[g(Le)]),t("div",{class:"m-1 card-border cursor-pointer",onClick:_[6]||(_[6]=p=>i.value=!e(i))},[Ds,Q(" : "),t("span",{class:bt(["font-bold",e(i)?"text-green-600":"text-red-600"])},o(e(i)?"ONLINE":"OFFLINE"),3)])])]),g(Je,{thead:e(we),selected:e(c),onSetSelected:_[7]||(_[7]=p=>c.value=p),tbody:e(x),fnCallData:F,scrolling:e(P),onSetScrollingPage:_[8]||(_[8]=p=>e(P).page=p),onDoFilter:_[9]||(_[9]=p=>fe())},{absen:q(({item:p,index:L})=>[p.trx_absens&&p.trx_absens.length>0?(r(),z(ze,{key:0,class:"cursor-pointer",onClick:Ks=>He(L)},null,8,["onClick"])):f("",!0)]),val:q(({item:p})=>[p.val?(r(),z(ne,{key:1})):(r(),z(re,{key:0}))]),val1:q(({item:p})=>[p.val1?(r(),z(ne,{key:1})):(r(),z(re,{key:0}))]),val2:q(({item:p})=>[p.val2?(r(),z(ne,{key:1})):(r(),z(re,{key:0}))]),deleted_by_username:q(({item:p})=>{var L;return[Q(o((L=p.deleted_by)==null?void 0:L.username),1)]}),req_deleted_by_username:q(({item:p})=>{var L;return[Q(o((L=p.req_deleted_by)==null?void 0:L.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),g(Re,{type:"custome",show:e(E),data:e(be),fnClose:qe,fnConfirm:Fe},{words:q(()=>[Q(" Data akan diproses dan "),Ts,Q(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),g(Ee,{show:e(le),fnClose:()=>{le.value=!1},fnLoadDBData:u,id:e(pe),p_data:e(x),list_ticket:e(k),online_status:e(i)},null,8,["show","fnClose","id","p_data","list_ticket","online_status"]),g(Ge,{show:e(W),fnClose:()=>{W.value=!1},id:e(ae),p_data:e(x),is_view:e(oe)},null,8,["show","fnClose","id","p_data","is_view"]),g(Qe,{show:e(se),fnClose:()=>{se.value=!1},index:e(ve),p_data:e(x)},null,8,["show","fnClose","index","p_data"]),e(ee)?(r(),n("div",Ms,[t("div",js,[t("div",Cs,[g(Xe,{style:{color:"black",cursor:"pointer"},onClick:_[10]||(_[10]=p=>ee.value=!1)})]),t("div",Ss,[t("div",Bs,[t("div",As,[Ps,t("div",Ns,[t("div",Os,[Hs,t("div",Ys,[g(xe,null,{default:q(()=>[g(ke,{modelValue:e(B).from,"onUpdate:modelValue":_[11]||(_[11]=p=>e(B).from=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[12]||(_[12]=p=>me("from"))},null,8,["modelValue"])]),_:1})])]),t("div",qs,[Is,t("div",Fs,[g(xe,null,{default:q(()=>[g(ke,{modelValue:e(B).to,"onUpdate:modelValue":_[13]||(_[13]=p=>e(B).to=p),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,clearable:!1,"text-input":"","teleport-center":"",onClosed:_[14]||(_[14]=p=>me("to"))},null,8,["modelValue"])]),_:1})])])])])])]),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:_[15]||(_[15]=p=>ee.value=!1)})])])):f("",!0)])}}};export{ri as default};
