import{_ as N}from"./HeaderPopup.vue.3da2b044.js";import $ from"./Check.b0958afa.js";import{_ as T}from"./PopupMini.vue.464c94de.js";import{r as b,f as E,j as I,i as P,o as p,c as h,m as V,J as q,a as e,b as v,F as g,y as J,C as z,D as M,l as k,k as s,t as r,x as U,w as G,d as L,A as m,B as y,p as H,e as K}from"./entry.7018568f.js";import{u as O}from"./useUtils.06a8ae99.js";import{u as C}from"./useMyFetch.9ff61eb6.js";import{_ as Q}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.9e709495.js";import"./Exclamation.d3f4a885.js";const d=i=>(H("data-v-a402c5dc"),i=i(),K(),i),R={class:"box-fixed"},W={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},X={class:"w-full flex flex-col items-center grow overflow-auto"},Y={class:"w-full flex flex-row flex-wrap"},Z={class:"w-full grid grid-cols-1 lg:grid-cols-2 p-1 gap-1 relative"},ee={class:"relative w-full"},te=["onClick"],se=["src"],oe={class:"w-full flex items-center justify-end"},ae={class:"w-full flex flex-wrap p-3 items-center text-xs"},le=d(()=>e("label",{for:""},"U.jalan Per",-1)),re={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ie=d(()=>e("label",{for:""},"Jenis",-1)),ne={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},de=d(()=>e("label",{for:""},"Supir",-1)),ce={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},_e={key:0},ue=d(()=>e("label",{for:""},"Kernet",-1)),fe={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},pe=d(()=>e("label",{for:""},"No Pol",-1)),he={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},me=d(()=>e("label",{for:""},"Tujuan",-1)),be={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},xe=d(()=>e("label",{for:""},"Tipe",-1)),we={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ve=d(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),ge={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ke={__name:"trx_absen",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},p_data:{type:Array,required:!0,default:[]},index:{type:Number,required:!1,default:0}},setup(i){const n=i,{pointFormat:j}=O(),t=b({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,trx_absens:[]}}),x=E("token"),D=async()=>{m().loading_full=!0;const{data:o,error:a,status:u}=await C("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},params:{id:n.p_data[n.index].id},retry:0});if(m().loading_full=!1,u.value==="error"){y().trigger(a);return}t.value=o.value.data,t.value.trx_absens=t.value.trx_absens.map(c=>(c.checked=0,c))};I(()=>n.show,(o,a)=>{o==!0&&D()},{immediate:!0});const{display:S}=P(),w=b({}),_=b(!1),A=async()=>{_.value&&(_.value=!1)},B=()=>{let o=t.value.trx_absens.filter(a=>a.checked==1).length;o<=0?S({show:!0,status:"Failed",message:"Silahkan Pilih Gambar Terlebih Dahulu"}):(w.value={"jumlah gambar yang akan di hapus":o},_.value=!0)},F=async()=>{m().loading_full=!0;const o=new FormData;o.append("id",n.p_data[n.index].id),o.append("ids",JSON.stringify(t.value.trx_absens.filter(f=>f.checked))),o.append("_method","DELETE");const{data:a,error:u,status:c}=await C("/trx_trp_absen",{method:"post",headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},body:o,retry:0});if(m().loading_full=!1,c.value==="error"){y().trigger(u);return}n.p_data[n.index].trx_absens=t.value.trx_absens.filter(f=>f.checked==0),_.value=!1,n.fnClose()};return(o,a)=>{const u=N,c=$,f=T;return p(),h(g,null,[V(e("section",R,[e("div",null,[v(u,{title:"Form Check Absen",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",W,[e("div",X,[e("div",Y,[e("div",Z,[(p(!0),h(g,null,J(s(t).trx_absens,l=>(p(),h("div",ee,[e("div",{class:z(["w-7 h-7 ring-1 ring-black absolute right-3 top-3 border-2 border-white flex items-center justify-center text-white",l.checked?"bg-red-600":"bg-transparent"]),onClick:Ce=>l.checked=!l.checked},[l.checked?(p(),M(c,{key:0,class:"text-xl"})):k("",!0)],10,te),e("img",{src:l.gambar,class:"max-w-full max-h-full w-full"},null,8,se)]))),256))])])]),e("div",oe,[e("div",ae,[e("div",null,[le,e("div",re,r(s(t).tanggal),1)]),e("div",null,[ie,e("div",ne,r(s(t).jenis),1)]),e("div",null,[de,e("div",ce,r(s(t).supir),1)]),s(t).kernet?(p(),h("div",_e,[ue,e("div",fe,r(s(t).kernet),1)])):k("",!0),e("div",null,[pe,e("div",he,r(s(t).no_pol),1)]),e("div",null,[me,e("div",be,r(s(t).xto),1)]),e("div",null,[xe,e("div",we,r(s(t).tipe),1)]),e("div",null,[ve,e("div",ge,r(s(j)(s(t).amount||0)),1)])]),e("button",{type:"button",name:"button",class:"w-36 m-1 bg-red-600 text-white rounded-sm",onClick:a[0]||(a[0]=U(l=>B(),["prevent"]))}," Delete "),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[1]||(a[1]=l=>i.fnClose())}," Cancel ")])])])],512),[[q,i.show]]),v(f,{type:"delete",show:s(_),data:s(w),fnClose:A,fnConfirm:F,info_type:"custome"},{info:G(()=>[L(" Ada "+r(s(t).trx_absens.filter(l=>l.checked).length)+" Gambar yang akan di hapus. ",1)]),_:1},8,["show","data"])],64)}}},Ee=Q(ke,[["__scopeId","data-v-a402c5dc"]]);export{Ee as default};
