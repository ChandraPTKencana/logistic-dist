import{_ as S}from"./HeaderPopup.vue.b7f02079.js";import{r as k,g as B,f as H,k as T,J as P,o as a,c as _,a as t,b as A,t as o,l as e,n as i,C,G as O,x as p,y as g,p as N,e as K}from"./entry.48b3d933.js";import{u as I}from"./useUtils.14d22b9a.js";import{u as y}from"./useMyFetch.2a06d70a.js";import{_ as V}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.834f5337.js";const l=r=>(N("data-v-ec44deb3"),r=r(),K(),r),$={class:"box-fixed"},q={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},F={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},U={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},z=l(()=>t("label",{for:""},"U.Jalan Per",-1)),E={class:"card-border"},G={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},L=l(()=>t("label",{for:""},"Jenis",-1)),Q={class:"card-border"},R={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=l(()=>t("label",{for:""},"Supir",-1)),X={class:"card-border"},Z={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},tt=l(()=>t("label",{for:""},"Kernet",-1)),et={class:"card-border"},st={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ot=l(()=>t("label",{for:""},"No Pol",-1)),lt={class:"card-border"},at={key:0,class:"w-full flex flex-wrap"},_t={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},it=l(()=>t("label",{for:""},"Tujuan",-1)),dt={class:"card-border"},ct={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},rt=l(()=>t("label",{for:""},"Info",-1)),nt={class:"card-border"},ft={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},wt=l(()=>t("label",{for:""},"Tipe",-1)),ut={class:"card-border"},bt={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},pt=l(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),xt={class:"card-border"},mt={key:1,class:"w-full p-1"},vt=l(()=>t("label",{for:""},"Peralihan",-1)),ht={class:"card-border"},kt={key:2,class:"w-full flex flex-col flex-wrap p-1"},gt=l(()=>t("label",{for:""},"Tiket A",-1)),yt={class:"card-border"},Dt={key:3,class:"w-full flex flex-wrap"},jt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Mt=l(()=>t("label",{for:""},"In At",-1)),Yt={class:"card-border disabled"},St={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bt=l(()=>t("label",{for:""},"Out At",-1)),Ht={class:"card-border disabled"},Tt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Pt=l(()=>t("label",{for:""},"Bruto",-1)),At={class:"card-border disabled"},Ct={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ot=l(()=>t("label",{for:""},"Tara",-1)),Nt={class:"card-border disabled"},Kt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},It=l(()=>t("label",{for:""},"Netto",-1)),Vt={class:"card-border disabled"},$t={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},qt=l(()=>t("label",{for:""},"No Pol",-1)),Ft={class:"card-border disabled"},Jt={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Ut=l(()=>t("label",{for:""},"Supir",-1)),zt={class:"card-border disabled"},Et={key:4,class:"w-full flex flex-col flex-wrap p-1"},Gt=l(()=>t("label",{for:""},"Tiket B",-1)),Lt={class:"card-border"},Qt={key:5,class:"w-full flex flex-wrap"},Rt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Wt=l(()=>t("label",{for:""},"In At",-1)),Xt={class:"card-border disabled"},Zt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},te=l(()=>t("label",{for:""},"Out At",-1)),ee={class:"card-border disabled"},se={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},oe=l(()=>t("label",{for:""},"Bruto ",-1)),le={class:"card-border disabled"},ae={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_e=l(()=>t("label",{for:""},"Tara ",-1)),ie={class:"card-border disabled"},de={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ce=l(()=>t("label",{for:""},"Netto ",-1)),re={class:"card-border disabled"},ne={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},fe=l(()=>t("label",{for:""},"No Pol",-1)),we={class:"card-border disabled"},ue={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},be=l(()=>t("label",{for:""},"Supir",-1)),pe={class:"card-border disabled"},xe={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},me=l(()=>t("label",{for:""},"In At",-1)),ve={class:"card-border"},he={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ke=l(()=>t("label",{for:""},"Out At",-1)),ge={class:"card-border"},ye={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},De=l(()=>t("label",{for:""},"Bruto",-1)),je={class:"card-border"},Me={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ye=l(()=>t("label",{for:""},"Tara",-1)),Se={class:"card-border"},Be={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},He=l(()=>t("label",{for:""},"Netto",-1)),Te={class:"card-border"},Pe={class:"w-full flex flex-wrap"},Ae=l(()=>t("div",{class:"w-full sm:w-full md:w-6/12 lg:w-4/12 flex flex-col flex-wrap p-1 justify-end"},null,-1)),Ce={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},Oe=l(()=>t("label",{for:"",class:"font-bold"},"Selisih Bruto ",-1)),Ne={class:"card-border disabled"},Ke={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},Ie=l(()=>t("label",{for:"",class:"font-bold"},"Selisih Tara ",-1)),Ve={class:"card-border disabled"},$e={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},qe=l(()=>t("label",{for:"",class:"font-bold"},"Selisih Netto ",-1)),Fe={class:"card-border disabled"},Je={class:"w-full flex flex-col flex-wrap p-1"},Ue=l(()=>t("label",{for:""},"Note",-1)),ze={class:"card-border"},Ee={class:"w-full flex items-center justify-end"},Ge={class:"w-full flex flex-wrap p-3 items-center"},Le=l(()=>t("div",null," Di Validasi oleh : ",-1)),Qe={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Re={key:0},We={key:1},Xe={key:2},Ze={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(r){const f=r,{$moment:c}=O(),{pointFormat:d}=I(),s=k({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val_ticket:0,val_ticket_by:{username:""},val_ticket_at:""}}),m=B("token"),v=k(null),D=async()=>{p().loading_full=!0;const w=new FormData;let n="post",u=f.id;u==0||(w.append("id",u),w.append("_method","PUT"));const{data:b,error:x,status:M}=await y("/trx_trp_val_ticket",{method:n,headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},body:w,retry:0});if(p().loading_full=!1,M.value==="error"){g().trigger(x);return}s.value.val_ticket=b.value.val_ticket,s.value.val_ticket_by=b.value.val_ticket_by,s.value.val_ticket_at=b.value.val_ticket_at;let h=f.p_data.map(Y=>Y.id).indexOf(f.id);h>=-1&&f.p_data.splice(h,1,{...s.value}),f.fnClose()},j=async()=>{p().loading_full=!0;const{data:w,error:n,status:u}=await y("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${m.value}`,Accept:"application/json"},params:{id:f.id},retry:0});if(p().loading_full=!1,u.value==="error"){g().trigger(n);return}s.value=w.value.data};return H(()=>f.show,(w,n)=>{w==!0&&(f.is_view==!1&&setTimeout(()=>{v.value.focus()},1),j())},{immediate:!0}),(w,n)=>{var b;const u=S;return T((a(),_("section",$,[t("div",null,[A(u,{title:"Form Transaction Validation",fn:r.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",q,[t("div",F,[t("div",J,[t("div",U,[z,t("div",E,o(e(s).tanggal?e(c)(e(s).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",G,[L,t("div",Q,o(e(s).jenis),1)]),t("div",R,[W,t("div",X,o(e(s).supir),1)]),t("div",Z,[tt,t("div",et,o(e(s).kernet),1)]),t("div",st,[ot,t("div",lt,o(e(s).no_pol),1)]),e(s).jenis!=""?(a(),_("div",at,[t("div",_t,[it,t("div",dt,o(e(s).xto),1)]),t("div",ct,[rt,t("div",nt,o((b=e(s).uj)==null?void 0:b.asst_opt),1)]),t("div",ft,[wt,t("div",ut,o(e(s).tipe),1)]),t("div",bt,[pt,t("div",xt,o(e(d)(e(s).amount||0)),1)])])):i("",!0),e(s).jenis=="TBS"?(a(),_("div",mt,[vt,t("div",ht,o(e(s).transition_target),1)])):i("",!0),e(s).jenis!=""&&e(s).jenis!="TBSK"?(a(),_("div",kt,[gt,t("div",yt,o(e(s).ticket_a_no),1)])):i("",!0),e(s).jenis!=""&&e(s).jenis!="TBSK"?(a(),_("div",Dt,[t("div",jt,[Mt,t("div",Yt,o(e(s).ticket_a_in_at?e(c)(e(s).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",St,[Bt,t("div",Ht,o(e(s).ticket_a_out_at?e(c)(e(s).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Tt,[Pt,t("div",At,o(e(s).ticket_a_bruto?e(d)(e(s).ticket_a_bruto):0),1)]),t("div",Ct,[Ot,t("div",Nt,o(e(s).ticket_a_tara?e(d)(e(s).ticket_a_tara):0),1)]),t("div",Kt,[It,t("div",Vt,o(e(s).ticket_a_bruto?e(d)(e(s).ticket_a_bruto-e(s).ticket_a_tara):0),1)]),t("div",$t,[qt,t("div",Ft,o(e(s).ticket_a_no_pol),1)]),t("div",Jt,[Ut,t("div",zt,o(e(s).ticket_a_supir),1)])])):i("",!0),["TBS","TBSK"].indexOf(e(s).jenis)>-1?(a(),_("div",Et,[Gt,t("div",Lt,o(e(s).ticket_b_no),1)])):i("",!0),["TBS","TBSK"].indexOf(e(s).jenis)>-1?(a(),_("div",Qt,[t("div",Rt,[Wt,t("div",Xt,o(e(s).ticket_b_in_at?e(c)(e(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",Zt,[te,t("div",ee,o(e(s).ticket_b_out_at?e(c)(e(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),t("div",se,[oe,t("div",le,o(e(s).ticket_b_bruto?e(d)(e(s).ticket_b_bruto):0),1)]),t("div",ae,[_e,t("div",ie,o(e(s).ticket_b_tara?e(d)(e(s).ticket_b_tara):0),1)]),t("div",de,[ce,t("div",re,o(e(s).ticket_b_bruto?e(d)(e(s).ticket_b_bruto-e(s).ticket_b_tara):0),1)]),t("div",ne,[fe,t("div",we,o(e(s).ticket_b_no_pol),1)]),t("div",ue,[be,t("div",pe,o(e(s).ticket_b_supir),1)])])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",xe,[me,t("div",ve,o(e(s).ticket_b_in_at?e(c)(e(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",he,[ke,t("div",ge,o(e(s).ticket_b_out_at?e(c)(e(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",ye,[De,t("div",je,o(e(d)(e(s).ticket_b_bruto||0)),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",Me,[Ye,t("div",Se,o(e(d)(e(s).ticket_b_tara||0)),1)])):i("",!0),["CPO","PK"].indexOf(e(s).jenis)>-1?(a(),_("div",Be,[He,t("div",Te,o(e(d)(e(s).ticket_b_netto||0)),1)])):i("",!0),t("div",Pe,[Ae,t("div",Ce,[Oe,t("div",Ne,o(e(d)(e(s).ticket_b_bruto-e(s).ticket_a_bruto||0)),1)]),t("div",Ke,[Ie,t("div",Ve,o(e(d)(e(s).ticket_b_tara-e(s).ticket_a_tara||0)),1)]),t("div",$e,[qe,t("div",Fe,o(e(d)(e(s).ticket_b_bruto-e(s).ticket_b_tara-(e(s).ticket_a_bruto-e(s).ticket_a_tara)||0)),1)])]),t("div",Je,[Ue,t("div",ze,o(e(s).ticket_note),1)])])]),t("div",Ee,[t("div",Ge,[Le,e(s).val||e(s).val1||e(s).val_ticket?(a(),_("div",Qe,[e(s).val?(a(),_("div",Re," App 1 : "+o(e(s).val_by.username)+" ( "+o(e(s).val_at?e(c)(e(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0),e(s).val1?(a(),_("div",We," App 2 : "+o(e(s).val1_by.username)+" ( "+o(e(s).val1_at?e(c)(e(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0),e(s).val_ticket?(a(),_("div",Xe," App 3 : "+o(e(s).val_ticket_by.username)+" ( "+o(e(s).val_ticket_at?e(c)(e(s).val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):i("",!0)])):i("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=x=>r.fnClose())}," Cancel "),r.is_view==0?(a(),_("button",{key:0,ref_key:"it_val",ref:v,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=C(x=>D(),["prevent"]))}," Validasi ",512)):i("",!0)])])])],512)),[[P,r.show]])}}},is=V(Ze,[["__scopeId","data-v-ec44deb3"]]);export{is as default};
