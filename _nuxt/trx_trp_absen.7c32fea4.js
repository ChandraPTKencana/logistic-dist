import{_ as V}from"./HeaderPopup.vue.3900fd5e.js";import{_ as F}from"./client-only.331a2ffa.js";import j from"./AttachmentSingle.daba9e54.js";import{r as k,g as A,f as $,I as B,k as M,K as P,o as b,c as w,a as t,b as _,t as o,l,n as S,w as x,F as I,D as N,A as U,C as T,G as q,x as h,y as Y,p as K,e as W}from"./entry.98e7da62.js";import"./useUtils.da9425db.js";import{u as C}from"./useMyFetch.279f859a.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.2c682f3c.js";import"./PDFJsView.98e76ce2.js";const r=u=>(K("data-v-81aeb19a"),u=u(),W(),u),z={class:"box-fixed"},E={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full"},J={class:"w-full flex flex-wrap p-3 items-center text-xs"},L=r(()=>t("label",{for:""},"ID",-1)),Q={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},R=r(()=>t("label",{for:""},"U.jalan Per",-1)),X={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Z=r(()=>t("label",{for:""},"Jenis",-1)),ee={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},te=r(()=>t("label",{for:""},"Supir",-1)),le={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ae={key:0},ie=r(()=>t("label",{for:""},"Kernet",-1)),se={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},oe=r(()=>t("label",{for:""},"No Pol",-1)),re={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},_e=r(()=>t("label",{for:""},"Tujuan",-1)),ne={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},de=r(()=>t("label",{for:""},"Tipe",-1)),ue={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},me=r(()=>t("label",{for:""},"Info",-1)),pe={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},ve={class:"w-full flex flex-wrap items-center grow overflow-auto"},ce={class:"w-full sm:w-1/2 text-center p-1"},ge={class:"border-[1px] p-1"},fe=r(()=>t("label",{class:"font-bold"},"Berangkat ",-1)),be={class:"text-red-500"},we={class:"text-red-500"},xe={key:0,class:"flex flex-wrap"},he={class:"w-1/2 sm:w-1/3 md:w-1/4 lg:w-1/5 xl:w-1/6 p-1"},ye=["src","onClick"],ke={class:"w-full sm:w-1/2 text-center p-1"},Me={class:"border-[1px] p-1"},Se=r(()=>t("label",{class:"font-bold"},"Tiba ",-1)),Ye={class:"text-red-500"},Ce={class:"text-red-500"},De={class:"w-full sm:w-1/2 text-center p-1"},He={class:"border-[1px] p-1"},Ve=r(()=>t("label",{class:"font-bold"},"Kembali ",-1)),Fe={class:"text-red-500"},je={class:"text-red-500"},Ae={class:"w-full sm:w-1/2 text-center p-1"},$e={class:"border-[1px] p-1"},Be=r(()=>t("label",{class:"font-bold"},"Sampai ",-1)),Pe={class:"text-red-500"},Ie={class:"text-red-500"},Ne={class:"w-full p-1"},Ue=r(()=>t("label",{for:""}," Note ",-1)),Te={class:"w-full flex items-center justify-end"},qe={__name:"trx_trp_absen",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},p_data:{type:Array,required:!0,default:[]},id:{type:Number,required:!1,default:0}},setup(u){const d=u,{$moment:f}=q(),e=k({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:""}}),n=k({}),y=A("token"),D=async()=>{h().loading_full=!0;const{data:s,error:a,status:v}=await C("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(h().loading_full=!1,v.value==="error"){Y().trigger(a);return}e.value=s.value.data};$(()=>d.show,(s,a)=>{s==!0&&D()},{immediate:!0});const H=async()=>{h().loading_full=!0,n.value={};const s=new FormData;if(e.value.img_leave){let p=e.value.img_leaves.map(i=>i.gambar).indexOf(e.value.img_leave);p==-1?s.append("img_leave","ada"):s.append("img_leave",e.value.img_leaves[p].id)}else s.append("img_leave","");s.append("img_leave_file",e.value.img_leave_file),s.append("img_leave_ts",e.value.img_leave_ts?f(e.value.img_leave_ts).format("YYYY-MM-DD HH:mm"):""),s.append("img_arrive",e.value.img_arrive?"ada":""),s.append("img_arrive_file",e.value.img_arrive_file),s.append("img_arrive_ts",e.value.img_arrive_ts?f(e.value.img_arrive_ts).format("YYYY-MM-DD HH:mm"):""),s.append("img_return",e.value.img_return?"ada":""),s.append("img_return_file",e.value.img_return_file),s.append("img_return_ts",e.value.img_return_ts?f(e.value.img_return_ts).format("YYYY-MM-DD HH:mm"):""),s.append("img_till",e.value.img_till?"ada":""),s.append("img_till_file",e.value.img_till_file),s.append("img_till_ts",e.value.img_till_ts?f(e.value.img_till_ts).format("YYYY-MM-DD HH:mm"):""),s.append("ritase_note",e.value.ritase_note);let a="post",v=d.id;v==0||(s.append("id",v),s.append("_method","PUT"));const{data:m,error:c,status:g}=await C("/trx_trp/absen",{method:a,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:s,retry:0});if(h().loading_full=!1,g.value==="error"){Y().trigger(c,n);return}if(e.value.ritase_leave_at=e.value.img_leave_ts,e.value.ritase_arrive_at=e.value.img_arrive_ts,e.value.ritase_return_at=e.value.img_return_ts,e.value.ritase_till_at=e.value.img_till_ts,e.value.updated_at=m.value.updated_at,d.id<=0)e.value.id=m.value.id,e.value.created_at=m.value.created_at,d.p_data.unshift(e.value);else{let p=d.p_data.map(i=>i.id).indexOf(d.id);p>=-1&&d.p_data.splice(p,1,{...e.value})}d.fnClose()};return(s,a)=>{var p;const v=V,m=B("vue-date-picker"),c=F,g=j;return M((b(),w("section",z,[t("div",null,[_(v,{title:"Form Check Absen",fn:u.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",E,[t("div",G,[t("div",J,[t("div",null,[L,t("div",Q,o(l(e).id),1)]),t("div",null,[R,t("div",X,o(l(e).tanggal?l(f)(l(e).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",null,[Z,t("div",ee,o(l(e).jenis),1)]),t("div",null,[te,t("div",le,o(l(e).supir),1)]),l(e).kernet?(b(),w("div",ae,[ie,t("div",se,o(l(e).kernet),1)])):S("",!0),t("div",null,[oe,t("div",re,o(l(e).no_pol),1)]),t("div",null,[_e,t("div",ne,o(l(e).xto),1)]),t("div",null,[de,t("div",ue,o(l(e).tipe),1)]),t("div",null,[me,t("div",pe,o((p=l(e).uj)==null?void 0:p.asst_opt),1)])])]),t("div",ve,[t("div",ce,[t("div",ge,[fe,_(c,null,{default:x(()=>[_(m,{modelValue:l(e).img_leave_ts,"onUpdate:modelValue":a[0]||(a[0]=i=>l(e).img_leave_ts=i),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Berangkat"},null,8,["modelValue"])]),_:1}),t("p",be,o(l(n).img_leave_ts),1),_(g,{value:l(e).img_leave,onSetFile:a[1]||(a[1]=i=>l(e).img_leave_file=i),onSetPreview:a[2]||(a[2]=i=>l(e).img_leave=i),can_remove:!0},null,8,["value"]),t("p",we,o(l(n).img_leave),1),l(e).img_leaves.length>1?(b(),w("div",xe,[(b(!0),w(I,null,N(l(e).img_leaves,i=>(b(),w("div",he,[t("img",{class:"w-full cursor-pointer",src:i.gambar,onClick:We=>(l(e).img_leave=i.gambar,l(e).img_leave_file="")},null,8,ye)]))),256))])):S("",!0)])]),t("div",ke,[t("div",Me,[Se,_(c,null,{default:x(()=>[_(m,{modelValue:l(e).img_arrive_ts,"onUpdate:modelValue":a[3]||(a[3]=i=>l(e).img_arrive_ts=i),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Tiba"},null,8,["modelValue"])]),_:1}),t("p",Ye,o(l(n).img_arrive_ts),1),_(g,{value:l(e).img_arrive,onSetFile:a[4]||(a[4]=i=>l(e).img_arrive_file=i),onSetPreview:a[5]||(a[5]=i=>l(e).img_arrive=i),can_remove:!0},null,8,["value"]),t("p",Ce,o(l(n).img_arrive),1)])]),t("div",De,[t("div",He,[Ve,_(c,null,{default:x(()=>[_(m,{modelValue:l(e).img_return_ts,"onUpdate:modelValue":a[6]||(a[6]=i=>l(e).img_return_ts=i),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Kembali"},null,8,["modelValue"])]),_:1}),t("p",Fe,o(l(n).img_return_ts),1),_(g,{value:l(e).img_return,onSetFile:a[7]||(a[7]=i=>l(e).img_return_file=i),onSetPreview:a[8]||(a[8]=i=>l(e).img_return=i),can_remove:!0},null,8,["value"]),t("p",je,o(l(n).img_return),1)])]),t("div",Ae,[t("div",$e,[Be,_(c,null,{default:x(()=>[_(m,{modelValue:l(e).img_till_ts,"onUpdate:modelValue":a[9]||(a[9]=i=>l(e).img_till_ts=i),type:"datetime",format:"dd-MM-yyyy HH:mm","enable-time-picker":!0,"text-input":"","teleport-center":"",class:"flex-grow",placeholder:"Waktu Sampai"},null,8,["modelValue"])]),_:1}),t("p",Pe,o(l(n).img_till_ts),1),_(g,{value:l(e).img_till,onSetFile:a[10]||(a[10]=i=>l(e).img_till_file=i),onSetPreview:a[11]||(a[11]=i=>l(e).img_till=i),can_remove:!0},null,8,["value"]),t("p",Ie,o(l(n).img_till),1)])]),t("div",Ne,[Ue,M(t("textarea",{"onUpdate:modelValue":a[12]||(a[12]=i=>l(e).ritase_note=i)},null,512),[[U,l(e).ritase_note]])])]),t("div",Te,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[13]||(a[13]=i=>u.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[14]||(a[14]=T(i=>H(),["prevent"]))}," Save ")])])])],512)),[[P,u.show]])}}},Ze=O(qe,[["__scopeId","data-v-81aeb19a"]]);export{Ze as default};
