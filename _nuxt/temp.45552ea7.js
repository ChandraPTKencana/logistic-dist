import{_ as S}from"./HeaderPopup.vue.75317d7a.js";import{r as _,h as k,I as B,n as c,v as $,o as q,c as A,a as e,b as V,m as n,q as D,t as v,C as F,s as M,x as u,y as w}from"./entry.9bfb7e63.js";import{u as h}from"./useMyFetch.18476d33.js";import"./Times.c32cdb9b.js";import"./_plugin-vue_export-helper.c27b6911.js";const N={class:"box-fixed"},j={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},E={class:"w-full flex flex-col items-center grow overflow-auto"},U={class:"w-full flex flex-row flex-wrap"},z={class:"w-full flex flex-col flex-wrap p-1"},K=e("label",{for:""},"Nama",-1),P={class:"text-red-500"},T={class:"w-full flex flex-col flex-wrap p-1"},H=e("label",{for:""},"Jabatan",-1),I=e("option",{value:"Supir"},"Supir",-1),J=e("option",{value:"Kernet"},"Kernet",-1),O=[I,J],G={class:"text-red-500"},L={class:"w-full flex items-center justify-end"},Z={__name:"temp",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(d){const a=d,p={id:-1,name:"",role:"Supir"},t=_({...p}),f=k("token"),i=_({}),x=async()=>{u().loading_full=!0,i.value={};const l=new FormData;l.append("name",t.value.name),l.append("role",t.value.role);let o="post",r=a.id;r==0||(l.append("id",r),l.append("_method","PUT"));const{data:s,error:b,status:g}=await h("/employee",{method:o,headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},body:l,retry:0});if(u().loading_full=!1,g.value==="error"){w().trigger(b,i);return}if(t.value.updated_at=s.value.updated_at,a.id<=0)t.value.id=s.value.id,t.value.created_at=s.value.created_at,a.p_data.unshift(t.value);else{let m=a.p_data.map(C=>C.id).indexOf(a.id);m>=-1&&a.p_data.splice(m,1,{...t.value})}a.fnClose()},y=async()=>{u().loading_full=!0;const{data:l,error:o,status:r}=await h("/employee",{method:"get",headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},params:{id:a.id},retry:0});if(u().loading_full=!1,r.value==="error"){w().trigger(o);return}t.value=l.value.data};return B(()=>a.show,(l,o)=>{l==!0&&(t.value={...p},i.value={},a.id!=0&&y())},{immediate:!0}),(l,o)=>{const r=S;return c((q(),A("section",N,[e("div",null,[V(r,{title:"Form Employee",fn:d.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",j,[e("div",E,[e("div",U,[e("div",z,[K,c(e("input",{type:"text","onUpdate:modelValue":o[0]||(o[0]=s=>n(t).name=s)},null,512),[[D,n(t).name]]),e("p",P,v(n(i).name),1)]),e("div",T,[H,c(e("select",{"onUpdate:modelValue":o[1]||(o[1]=s=>n(t).role=s)},O,512),[[F,n(t).role]]),e("p",G,v(n(i).role),1)])])]),e("div",L,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:o[2]||(o[2]=s=>d.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:o[3]||(o[3]=M(s=>x(),["prevent"]))}," Save ")])])])],512)),[[$,d.show]])}}};export{Z as default};
