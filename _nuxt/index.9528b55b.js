import{g as ue,h as ce,r as s,f as O,C as de,j as B,s as fe,J as me,c as v,b as _,a as e,w as H,t as y,l as a,k as pe,A as ve,m as ye,D as he,F as we,E as ge,q as xe,o as d,G as ke,z as j,B as T,H as be,x,y as N,_ as L}from"./entry.6bb5a617.js";import De from"./Header.b5243f3e.js";import Ce from"./Plus.3fe977c9.js";import Me from"./Eyes.cd8577ae.js";import Ae from"./Signature.412f52c0.js";import{_ as Te}from"./client-only.cc6b344e.js";import Le from"./Search.67a5428c.js";import ze from"./Line.51e21d0f.js";import Re from"./Check.2caf03fc.js";import{u as U}from"./useMyFetch.5acab9e9.js";import"./_plugin-vue_export-helper.c27b6911.js";const Ve=T(()=>L(()=>import("./fin_payment_req_trx_trps.1fd1de53.js"),["./fin_payment_req_trx_trps.1fd1de53.js","./HeaderPopup.vue.553fe2a0.js","./Times.888657e4.js","./_plugin-vue_export-helper.c27b6911.js","./entry.6bb5a617.js","./entry.493f9183.css","./useUtils.9a9f1e8e.js","./useMyFetch.5acab9e9.js"],import.meta.url).then(u=>u.default||u)),qe=T(()=>L(()=>import("./fin_payment_req_view.e4fb0abb.js"),["./fin_payment_req_view.e4fb0abb.js","./HeaderPopup.vue.553fe2a0.js","./Times.888657e4.js","./_plugin-vue_export-helper.c27b6911.js","./entry.6bb5a617.js","./entry.493f9183.css","./Table2Column.1ba7e0a3.js","./Send.f045ea53.js","./Refresh.f70909ed.js","./useUtils.9a9f1e8e.js","./useMyFetch.5acab9e9.js","./useDownload.174f4da2.js"],import.meta.url).then(u=>u.default||u)),Pe=T(()=>L(()=>import("./fin_payment_req_validasi.e3f45ff9.js"),["./fin_payment_req_validasi.e3f45ff9.js","./HeaderPopup.vue.553fe2a0.js","./Times.888657e4.js","./_plugin-vue_export-helper.c27b6911.js","./entry.6bb5a617.js","./entry.493f9183.css","./useUtils.9a9f1e8e.js","./useMyFetch.5acab9e9.js"],import.meta.url).then(u=>u.default||u)),Fe={class:"w-full h-full flex flex-col"},Se={class:"w-full flex grow flex-col overflow-auto h-0"},Ee={class:"w-full flex"},Ie={action:"#",class:"w-full flex"},Ye={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},$e=e("div",{class:"font-bold"}," Tgl Dari ",-1),Oe={class:"text-red-500"},Be={class:"w-full p-1 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col"},He=e("div",{class:"font-bold"}," Tgl Sampai ",-1),je={class:"text-red-500"},Ne={class:"grow p-1"},Ue=e("div",{class:"font-bold"}," Keyword ",-1),Je={class:"flex items-end p-1"},Ke={class:"w-full flex justify-center items-center grow h-0 p-1"},Ge={key:0,class:""},Ze={class:"tacky"},Qe=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App"),e("th",null,"ID"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),We=["onClick"],Xe={class:"flex items-center justify-center"},et={class:"bold"},ft={__name:"index",async setup(u){let h,z;const{$moment:w}=be(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="created_at:desc";const R=ue("token"),{data:J}=([h,z]=ce(async()=>xe(async()=>{let t=[];x().loading_full=!0;const{data:o,error:p,status:M}=await U("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${R.value}`,Accept:"application/json"},params:l,retry:0});return x().loading_full=!1,M.value==="error"?(N().trigger(p),{fin_payment_reqs:t}):(t=o.value.data,{fin_payment_reqs:t})},{lazy:!0,server:!1,default:()=>({fin_payment_reqs:[]})},"$u2BOcRLizp")),h=await h,z(),h),i=s([]);O(()=>{var t;return(t=J.value)==null?void 0:t.fin_payment_reqs},t=>{t&&(i.value=[...t])},{immediate:!0});const m=s(""),k=s({field:"created_at",by:"desc"}),f=s(-1),r=s({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),V=s({}),c=s({from:"",to:""}),K=()=>{l.like="",m.value!=""&&(l.like=`id:%${m.value}%`),l.sort="",k.value.field&&(l.sort=k.value.field+":"+k.value.by),l.date_from=c.value.from?w(c.value.from).format("YYYY-MM-DD"):"",l.date_to=c.value.to?w(c.value.to).format("YYYY-MM-DD"):""},g=s(null),q=async()=>{x().loading_full=!0,r.value.may_get_data=!1,l.page=r.value.page,l.page==1&&(i.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(i.value[0]));const{data:t,error:o,status:p}=await U("/fin_payment_reqs",{method:"get",headers:{Authorization:`Bearer ${R.value}`,Accept:"application/json"},params:l,retry:0});if(x().loading_full=!1,r.value.may_get_data=!0,p.value==="error"){N().trigger(o);return}r.value.page==1?(i.value=t.value.data,g.value&&(g.value.scrollTop=0)):r.value.page>1&&(i.value=[...i.value,...t.value.data]),t.value.data.length==0&&(r.value.is_last_record=!0)},G=async()=>{if(!r.value.may_get_data)return;let t=g.value;if(t.scrollLeft!=r.value.scrollLeft){r.value.scrollLeft=t.scrollLeft;return}r.value.is_last_record||!(Math.round(t.scrollTop)+t.clientHeight>=t.scrollHeight-1)||(r.value.page++,await q())},Z=()=>{r.value.page=1,r.value.is_last_record=!1,K(),q()};de();const b=s(!1),P=s(0),Q=s(0),W=()=>{P.value=0,b.value=!0,Q.value=!1},{display:F}=B();fe(B());const D=s(!1),S=s(0),X=()=>{f.value==-1?F({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(S.value=i.value[f.value].id,D.value=!0)},C=s(!1),E=s(0),ee=()=>{f.value==-1?F({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=i.value[f.value].id,C.value=!0)},I=s(!1);s({}),s(!1);const te=s("");return O(()=>te.value,t=>{t.trim().length>0?I.value=!0:I.value=!1},{immediate:!1}),(t,o)=>{const p=De,M=Ce,ae=Me,oe=Ae,Y=me("vue-date-picker"),$=Te,se=Le,le=ze,ne=Re,re=Ve,ie=qe,_e=Pe;return d(),v("div",Fe,[_(p,{title:"List Payment Req"}),e("div",Se,[e("div",Ee,[e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[0]||(o[0]=n=>W())},[_(M)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[1]||(o[1]=n=>X())},[_(ae)]),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:o[2]||(o[2]=n=>ee())},[_(oe)])]),e("form",Ie,[e("div",Ye,[$e,_($,null,{default:H(()=>[_(Y,{modelValue:a(c).from,"onUpdate:modelValue":o[3]||(o[3]=n=>a(c).from=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",Oe,y(a(V).date_from),1)]),e("div",Be,[He,_($,null,{default:H(()=>[_(Y,{modelValue:a(c).to,"onUpdate:modelValue":o[4]||(o[4]=n=>a(c).to=n),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",class:"flex-grow"},null,8,["modelValue"])]),_:1}),e("p",je,y(a(V).date_to),1)]),e("div",Ne,[Ue,pe(e("input",{class:"",type:"text","onUpdate:modelValue":o[5]||(o[5]=n=>ye(m)?m.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[ve,a(m)]])]),e("div",Je,[e("button",{class:"",type:"submit",name:"button",onClick:o[6]||(o[6]=he(n=>Z(),["prevent"]))},[_(se,{class:"text-2xl"})])])]),e("div",Ke,[a(i).length==0?(d(),v("div",Ge," Maaf Tidak Ada Record ")):(d(),v("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:g,onScroll:G},[e("table",Ze,[Qe,e("tbody",null,[(d(!0),v(we,null,ge(a(i),(n,A)=>(d(),v("tr",{key:A,onClick:tt=>f.value=A,class:ke(a(f)==A?"active":"")},[e("td",null,[e("div",Xe,[n.val?(d(),j(ne,{key:1})):(d(),j(le,{key:0}))])]),e("td",et,y(n.id),1),e("td",null,y(n.created_at?a(w)(n.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,y(n.updated_at?a(w)(n.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,We))),128))])])],544))])]),_(re,{show:a(b),fnClose:()=>{b.value=!1},id:a(P),p_data:a(i)},null,8,["show","fnClose","id","p_data"]),_(ie,{show:a(D),fnClose:()=>{D.value=!1},id:a(S)},null,8,["show","fnClose","id"]),_(_e,{show:a(C),fnClose:()=>{C.value=!1},id:a(E),p_data:a(i)},null,8,["show","fnClose","id","p_data"])])}}};export{ft as default};
