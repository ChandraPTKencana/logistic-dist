import{_ as $}from"./HeaderPopup.vue.013ce12d.js";import D from"./uj.b7b4594b.js";import I from"./absen.971e4565.js";import j from"./ticket.c38c2d59.js";import q from"./stt.ff812874.js";import A from"./CaretTop.c7297aa5.js";import B from"./CaretDown.de4e10a5.js";import{r as i,R as E,g as P,f as L,k as N,L as S,o as O,c as U,a as r,b as o,l as s,x as k,y as V}from"./entry.64cd1aac.js";import{u as z}from"./useMyFetch.26817b29.js";import"./Times.580cbe5f.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./ClockAnalog.b244871e.js";import"./Calendar.bf73b5ec.js";import"./Truck.2de6375f.js";import"./LocationOn.d788acbd.js";import"./TruckDriver.03c637d5.js";import"./useUtils.5c007a0a.js";import"./AttachmentSingle.a1f49a98.js";import"./PDFJsView.40720343.js";import"./Check.e14d635e.js";const H={class:"box-fixed"},M={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white p-1"},R={class:"w-full flex items-center justify-end"},dt={__name:"standby_trx_full",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},standby_trx:{type:Object,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},emits:["setID","setIndex"],setup(l,{emit:_}){const a=l,f=i(null);let u=t=>{t.key=="ArrowUp"&&y(),t.key=="ArrowDown"&&x()};E(()=>{document.removeEventListener("keydown",u)});const n=i({...{id:-1,tanggal:new Date,payment_method:{name:""},id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:"",val4:0,val4_by:{username:""},val4_at:"",val5:0,val5_by:{username:""},val5_at:"",val6:0,val6_by:{username:""},val6_at:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:"",pvr_had_detail:"",uj_combine:{supir:[],kernet:[]}}}),h=P("token"),m=i([]),p=i([]),d=async()=>{if(!a.standby_trx.trx_trp_id){a.fnClose();return}setTimeout(()=>{f.value.scrollTop=0},1),m.value=[],p.value=[],k().loading_full=!0;const{data:t,error:e,status:c}=await z("/standby_trx/full_view",{method:"get",headers:{Authorization:`Bearer ${h.value}`,Accept:"application/json"},params:{trx_trp_id:a.standby_trx.trx_trp_id},retry:0});if(k().loading_full=!1,c.value==="error"){V().trigger(e);return}let v=t.value.data;n.value=v,n.value.standby_trxs.forEach(b=>{m.value.push(""),p.value.push("")})};L(()=>a.show,(t,e)=>{t==!0?(document.addEventListener("keydown",u),d()):document.removeEventListener("keydown",u)},{immediate:!0});const x=()=>{let t=a.p_data.map(e=>e.id).indexOf(a.id);t!=a.p_data.length-1&&(t++,_("setID",a.p_data[t].id),_("setIndex",t),setTimeout(()=>{d()},100))},y=()=>{let t=a.p_data.map(e=>e.id).indexOf(a.id);t!=0&&(t--,_("setID",a.p_data[t].id),_("setIndex",t),setTimeout(()=>{d()},100))};return(t,e)=>{const c=$,v=D,b=I,T=j,g=q,C=A,F=B;return N((O(),U("section",H,[r("div",null,[o(c,{title:"Form Full Transaction",fn:l.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),r("form",M,[r("div",{ref_key:"main_part",ref:f,class:"w-full flex flex-col items-center grow overflow-auto"},[o(v,{trx_trp:s(n)},null,8,["trx_trp"]),o(b,{trx_trp:s(n)},null,8,["trx_trp"]),o(T,{trx_trp:s(n)},null,8,["trx_trp"]),o(g,{standby_trxs:s(n).standby_trxs,p_data:l.p_data,save_do:s(p),save_state:s(m)},null,8,["standby_trxs","p_data","save_do","save_state"])],512),r("div",R,[r("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:e[0]||(e[0]=w=>y())},[o(C,{class:"black"})]),r("button",{type:"button",name:"button",class:"w-36 m-1",onClick:e[1]||(e[1]=w=>l.fnClose())}," Cancel "),r("button",{type:"button",name:"button",class:"w-36 h-9 m-1 grid place-items-center",onClick:e[2]||(e[2]=w=>x())},[o(F,{class:"black"})])])])])],512)),[[S,l.show]])}}};export{dt as default};
