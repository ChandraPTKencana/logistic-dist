import ct from"./Header.5e74ad9b.js";import mt from"./Plus.919bbf28.js";import ft from"./Eyes.7616f418.js";import yt from"./Delete.bb9c1e50.js";import kt from"./Void.d25fa401.js";import bt from"./Signature.f02137e6.js";import gt from"./SignatureOff.7c03ba00.js";import xt from"./PrinterEye.d4f99a01.js";import ht from"./Table2Column.05bc82c5.js";import wt from"./Chain.96f2bc8b.js";import Dt from"./Image.134f6896.js";import Pt from"./Line.3bb8f6d9.js";import Ct from"./Check.e786f07a.js";import $t from"./TableView.e92de464.js";import{_ as At}from"./PopupMini.vue.d9392aff.js";import Tt from"./trx_trp.c69de8e3.js";import St from"./trx_trp_validasi.8340b4e7.js";import jt from"./trx_absen.d8cbb17e.js";import qt from"./trx_trp_full.964f6ae3.js";import{r as u,f as se,g as Ot,h as Ut,i as j,j as Mt,x as _,c as x,b as m,a as b,k as ie,v as Nt,l as r,m as ue,n as h,d as k,E as Bt,t as w,w as c,q as It,y as C,o as i,z as g,A as Ce,H as Ft,G as Et}from"./entry.52375d75.js";import{u as f}from"./useUtils.e9341d70.js";import{u as $}from"./useMyFetch.1f0ade8e.js";import{u as $e}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Search.6930cdce.js";import"./Adjust.b9821b6a.js";import"./TableHeaderEye.5dae98b4.js";import"./Times.413b2779.js";import"./ClearAll.7fa324cf.js";import"./client-only.3f84bf33.js";import"./ClearEach.2caef11e.js";import"./CaretLeftDoubleBold.041a6b6c.js";import"./CaretLeftBold.e2cec3c7.js";import"./CaretRightBold.9e323bf6.js";import"./CaretRightDoubleBold.b382cd21.js";import"./Exclamation.53730ccc.js";import"./HeaderPopup.vue.6d4cade4.js";import"./WidthMiniList.vue.c528bcb1.js";import"./WidthMiniPart.vue.a39c6bcf.js";import"./CaretTop.2d9c48a8.js";import"./CaretDown.dad5f00f.js";import"./uj.c1662ce7.js";import"./ClockAnalog.57c20e15.js";import"./Calendar.bd1f7084.js";import"./Truck.b91242f5.js";import"./LocationOn.c9e07554.js";import"./TruckDriver.86d810a3.js";import"./emt.081656cc.js";import"./Person.7a532160.js";import"./AttachmentSingle.5d1b1c76.js";import"./PDFJsView.111ab6ff.js";const Vt={class:"w-full h-full flex flex-col"},Rt={class:"w-full flex grow flex-col overflow-auto h-0"},Kt={class:"w-full flex justify-between flex-wrap"},zt={class:"grow flex flex-wrap"},Yt={class:"m-1"},Lt=Ft('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Ht=[Lt],Gt=b("span",{class:"text-xs ml-1"}," Download ",-1),Jt=b("span",{class:"text-xs ml-1"}," With UJ ",-1),Wt={class:"flex"},Zt=b("span",{class:"text-xs"},"Mode",-1),Qt={key:0},Xt={class:"w-full flex flex-col items-center justify-center"},ea={key:2,class:"text-xs"},ta={key:0},aa={key:0},la={class:"grow mb-5"},ra=b("b",{class:"text-red-500"},"divalidasi",-1),na=b("b",null,"tidak dapat dibatalkan lagi",-1),oa={class:"grow mb-5"},ol={__name:"index",async setup(sa){let z,_e;const{$moment:H}=Et(),{pointFormat:Ae}=f();let de=u({clearCheckBox:!1});const G=a=>a.deleted==1?"!bg-red-400":a.pvr_id>0&&a.req_deleted==1?"!bg-yellow-300":a.absen_not_done&&a.absen_not_done.length>0?"!bg-gray-300":a.pv_id>0?"!bg-blue-300":"",J=a=>(a.map(e=>{e.class_h=G(e)}),a),A=u("pv_not_done");se(()=>A.value,a=>{he.value.map(e=>{let d=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(e.key)>-1;return["all","deleted","req_deleted"].indexOf(a)>-1?d&&(e.tbl_show=1):d&&(e.tbl_show=0),e}),me()},{immediate:!1});const y={};y._TimeZoneOffset=new Date().getTimezoneOffset(),y.sort="tanggal:desc";const pe=u({}),Y=u({from:"",to:""}),D=Ot("token"),{data:Te}=([z,_e]=Ut(async()=>It(async()=>{_().loading_full=!0;let a=[];const[e,d]=await Promise.all([$("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{filter_status:A},retry:0})]);return e.status.value!=="error"&&(a=J(e.data.value.data)),e.status.value==="error"?(C().trigger(e.error),{trx_trps:a}):(_().loading_full=!1,{trx_trps:a})},"$pFLmKcrKj9")),z=await z,_e(),z),s=u(Te.value.trx_trps||[]),ve=u([]),M=u(!1),Se=async()=>{_().loading_full=!0;const{data:a,error:e,status:d}=await $("/trx_load_cost_center",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{online_status:M.value},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}ve.value=a.value.list_cost_center},W=u({field:"tanggal",by:"desc"}),o=u(-1),v=j(()=>s.value[o.value]),q=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),Z=()=>{y.like="";let a=JSON.parse(JSON.stringify(_()._tv.global_keyword));a!=""&&(y.like=`id:%${a}%,xto:%${a}%,jenis:%${a}%,pv_no:%${a}%,ticket_a_no:%${a}%,ticket_b_no:%${a}%,no_pol:%${a}%,supir:%${a}%,kernet:%${a}%,cost_center_code:%${a}%,cost_center_desc:%${a}%,pvr_no:%${a}%,tanggal:%${a}%,transition_target:%${a}%,uj_asst_opt:%${a}%`),y.sort="",W.value.field&&(y.sort=W.value.field+":"+W.value.by),y.date_from=Y.value.from?H(Y.value.from).format("YYYY-MM-DD"):"",y.date_to=Y.value.to?H(Y.value.to).format("YYYY-MM-DD"):"",y.filter_model=JSON.stringify(_()._tv.filter_model)},ce=async()=>{_().loading_full=!0,pe.value={},q.value.may_get_data=!1,y.page=q.value.page,y.page==1&&(s.value=[]),y.first_row&&delete y.first_row,y.page>1&&(y.first_row=JSON.stringify(s.value[0])),y.filter_status=A.value;const{data:a,error:e,status:d}=await $("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,q.value.may_get_data=!0,d.value==="error"){C().trigger(e,pe);return}q.value.page==1?s.value=J(a.value.data):q.value.page>1&&(s.value=[...s.value,...J(a.value.data)]),a.value.data.length==0&&(q.value.is_last_record=!0),_()._tv.filter_box=!1},me=()=>{o.value=-1,q.value.page=1,q.value.is_last_record=!1,Z(),ce()},I=u(1),fe=u(1),Q=u(!1),ye=u(0),je=()=>{ye.value=0,I.value=-1,Q.value=!0},{display:T}=Mt(),F=u(!1),E=u(0),qe=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=s.value[o.value].id,I.value=1,F.value=!0)},X=u(!1),ee=u(0),Oe=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ee.value=s.value[o.value].id,fe.value=1,X.value=!0)},Ue=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=s.value[o.value].id,I.value=0,F.value=!0)},Me=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=s.value[o.value].id,I.value=-1,F.value=!0)},te=u(!1),ke=u(0),Ne=a=>{ke.value=a,te.value=!0},ae=u(!1),be=u({}),V=u(!1),N=u(""),Be=async()=>{V.value&&(V.value=!1)},Ie=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(N.value="",be.value={id:s.value[o.value].id,"no pol":s.value[o.value].no_pol,tujuan:s.value[o.value].xto},V.value=!0)};se(()=>N.value,a=>{a.trim().length>0?ae.value=!0:ae.value=!1},{immediate:!1});const Fe=async()=>{_().loading_full=!0;const a=new FormData;a.append("id",s.value[o.value].id),a.append("deleted_reason",N.value),a.append("_method","DELETE");const{data:e,error:d,status:S}=await $("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}let l={...s.value[o.value]};l.deleted=e.value.deleted,l.deleted_user=e.value.deleted_user,l.deleted_at=e.value.deleted_at,l.deleted_by=e.value.deleted_by,l.deleted_reason=e.value.deleted_reason,l.class_h=G(l),A.value!="all"?s.value.splice(o.value,1):s.value.splice(o.value,1,{...l}),o.value=-1,V.value=!1},le=u(!1),ge=u({}),R=u(!1),B=u(""),Ee=async()=>{R.value&&(R.value=!1)},Ve=()=>{o.value==-1?T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value="",ge.value={id:s.value[o.value].id,"no pol":s.value[o.value].no_pol,tujuan:s.value[o.value].xto},R.value=!0)};se(()=>B.value,a=>{a.trim().length>0?le.value=!0:le.value=!1},{immediate:!1});const Re=async()=>{_().loading_full=!0;const a=new FormData;a.append("id",s.value[o.value].id),a.append("req_deleted_reason",B.value),a.append("_method","DELETE");const{data:e,error:d,status:S}=await $("/trx_trp_req_delete",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}let l={...s.value[o.value]};l.req_deleted=e.value.req_deleted,l.req_deleted_user=e.value.req_deleted_user,l.req_deleted_by=e.value.req_deleted_by,l.req_deleted_at=e.value.req_deleted_at,l.req_deleted_reason=e.value.req_deleted_reason,l.class_h=G(l),A.value!="all"?s.value.splice(o.value,1):s.value.splice(o.value,1,{...l}),o.value=-1,R.value=!1},re=u([]),L=u(!1),Ke=async()=>{_().loading_full=!0;const a=new FormData;a.append("ids",JSON.stringify(re.value)),a.append("_method","PUT");const{data:e,error:d,status:S}=await $("/trx_trp_validasis",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}L.value=!1,e.value.val_lists.forEach(l=>{let P=s.value.map(n=>n.id).indexOf(l.id);if(P>-1){let n=s.value[P];n.val=l.val,n.val_by=l.val_by,n.val_at=l.val_at,n.val1=l.val1,n.val1_by=l.val1_by,n.val1_at=l.val1_at,n.val2=l.val2,n.val2_by=l.val2_by,n.val2_at=l.val2_at,n.val3=l.val3,n.val3_by=l.val3_by,n.val3_at=l.val3_at,n.val4=l.val4,n.val4_by=l.val4_by,n.val4_at=l.val4_at,n.val5=l.val5,n.val5_by=l.val5_by,n.val5_at=l.val5_at,n.val6=l.val6,n.val6_by=l.val6_by,n.val6_at=l.val6_at,n.updated_at=l.updated_at,s.value.splice(P,1,{...n})}}),de.value.clearCheckBox=!0},{printHtml:xe}=$e(),ze=async()=>{if(o.value==-1){T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:a,error:e,status:d}=await $("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:s.value[o.value].id},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}xe(a.value.html,318)},Ye=async()=>{if(o.value==-1){T({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}_().loading_full=!0;const{data:a,error:e,status:d}=await $("/trx_trp_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:s.value[o.value].id},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}xe(a.value.html,318)},Le=async()=>{_().loading_full=!0;const a=new FormData;a.append("online_status",M.value);const{data:e,error:d,status:S}=await $("/trx_trp_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}e.value.forEach(l=>{let P=s.value.map(n=>n.id).indexOf(l.id);if(P!==-1){let n=s.value[P];n.pvr_id=l.pvr_id,n.pvr_no=l.pvr_no,n.pvr_total=l.pvr_total,n.pvr_had_detail=l.pvr_had_detail,n.updated_at=l.updated_at,s.value.splice(P,1,{...n})}}),T({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},He=async()=>{_().loading_full=!0;const a=new FormData;a.append("online_status",M.value);const{data:e,error:d,status:S}=await $("/trx_trp_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:a,retry:0});if(_().loading_full=!1,S.value==="error"){C().trigger(d);return}e.value.forEach(l=>{let P=s.value.map(n=>n.id).indexOf(l.id);if(P!==-1){let n=s.value[P];n.pv_id=l.pv_id,n.pv_no=l.pv_no,n.pv_total=l.pv_total,n.pv_datetime=l.pv_datetime,n.pv_complete=l.pv_complete,n.updated_at=l.updated_at,s.value.splice(P,1,{...n})}}),T({show:!0,status:"Success",message:"Generate Or Update PV Done"})},Ge=async()=>{_().loading_full=!0;const{data:a,error:e,status:d}=await $("/trx_trp/link_to_extramoney_trx",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}T({show:!0,status:"Success",message:a.value.message})},he=u([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"uj_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"uj_tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"select",select_item:["TBS","TBSK","CPO","PK","LAIN","TUNGGU"]},{key:"uj_harga",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:_().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"received_payment",label:"Sudah Dibayarkan?",type:"string"},{key:"duitku_supir_disburseId",label:"ID Duitku Supir",type:"string"},{key:"duitku_supir_inv_res_desc",label:"Ket Inquery Duitku Supir",type:"string"},{key:"duitku_supir_trf_res_desc",label:"Ket Pengiriman Duitku Supir",type:"string"},{key:"duitku_kernet_disburseId",label:"ID Duitku Kernet",type:"string"},{key:"duitku_kernet_inv_res_desc",label:"Ket Inquery Duitku Kernet",type:"string"},{key:"duitku_kernet_trf_res_desc",label:"Ket Pengiriman Duitku Kernet",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Je=j(()=>["pv_not_done","all"].indexOf(A.value)>-1&&f().checkPermission("trp_trx.create")),We=j(()=>o.value>-1&&f().checkPermission("trp_trx.view")),Ze=j(()=>o.value>-1&&f().checkPermission("trp_trx.ticket.views"));j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,0].indexOf(v.value.val4)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermission("trp_trx.modify"));const Qe=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&([void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2"])||v.value.val3==0&&f().checkPermissions(["trp_trx.val3"])||v.value.val4==0&&f().checkPermissions(["trp_trx.val4"])||v.value.val5==0&&f().checkPermissions(["trp_trx.val5"])||v.value.val6==0&&f().checkPermissions(["trp_trx.val6"]))),Xe=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&(v.value.val1==1&&f().checkPermissions(["trp_trx.unval1"])||v.value.val2==1&&f().checkPermissions(["trp_trx.unval2"])||v.value.val3==1&&f().checkPermissions(["trp_trx.unval3"])||v.value.val4==1&&f().checkPermissions(["trp_trx.unval4"])||v.value.val5==1&&f().checkPermissions(["trp_trx.unval5"])||v.value.val6==1&&f().checkPermissions(["trp_trx.unval6"]))),et=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&f().checkPermission("trp_trx.remove")),tt=j(()=>o.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&v.value.pvr_id!=""&&f().checkPermission("trp_trx.request_remove")),at=j(()=>o.value>-1&&v.value.val==1&&f().checkPermission("trp_trx.preview_file")),lt=j(()=>o.value>-1&&v.value.payment_method_id==2&&v.value.received_payment==1&&f().checkPermission("trp_trx.preview_file")),{downloadFile:we,viewFile:ia}=$e(),rt=async()=>{Z(),_().loading_full=!0,y.filter_status=A.value;const{data:a,error:e,status:d}=await $("/trx_trp/report_raw_excel",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}we(a.value)},nt=async()=>{Z(),_().loading_full=!0,y.filter_status=A.value;const{data:a,error:e,status:d}=await $("/trx_trp/report_excel_w_uj",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:y,retry:0});if(_().loading_full=!1,d.value==="error"){C().trigger(e);return}we(a.value)};return(a,e)=>{const d=ct,S=mt,l=ft,P=yt,n=kt,K=bt,ot=gt,De=xt,Pe=ht,st=wt,it=Dt,O=Pt,U=Ct,ut=$t,ne=At,_t=Tt,dt=St,pt=jt,vt=qt;return i(),x("div",Vt,[m(d,{title:"List Transaction"}),b("div",Rt,[b("div",Kt,[b("div",zt,[b("div",Yt,[ie(b("select",{class:"","onUpdate:modelValue":e[0]||(e[0]=t=>ue(A)?A.value=t:null)},Ht,512),[[Nt,r(A)]])]),r(Je)?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[1]||(e[1]=t=>je())},[m(S)])):h("",!0),r(We)?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[2]||(e[2]=t=>Me())},[m(l)])):h("",!0),r(et)?(i(),x("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[3]||(e[3]=t=>Ie())},[m(P)])):h("",!0),r(tt)?(i(),x("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[4]||(e[4]=t=>Ve())},[m(n)])):h("",!0),r(Qe)?(i(),x("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[5]||(e[5]=t=>qe())},[m(K)])):h("",!0),r(Xe)?(i(),x("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[6]||(e[6]=t=>Ue())},[m(ot)])):h("",!0),r(Ze)?(i(),x("button",{key:6,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:e[7]||(e[7]=t=>Oe())},[m(l)])):h("",!0),r(at)?(i(),x("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[8]||(e[8]=t=>ze())},[m(De)])):h("",!0),r(lt)?(i(),x("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[9]||(e[9]=t=>Ye())},[m(De)])):h("",!0),b("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[10]||(e[10]=t=>rt())},[m(Pe),k(),Gt]),b("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[11]||(e[11]=t=>nt())},[m(Pe),k(),Jt]),r(re).length>0&&("useUtils"in a?a.useUtils:r(f))().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2","trp_trx.val3","trp_trx.val4","trp_trx.val5","trp_trx.val6"])?(i(),x("button",{key:9,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:e[12]||(e[12]=t=>L.value=!0)},[m(K),m(K),m(K),m(K)])):h("",!0)]),b("div",Wt,[b("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:e[13]||(e[13]=t=>Ge())},[m(st)]),("useUtils"in a?a.useUtils:r(f))().checkPermission("trp_trx.generate_pvr")?(i(),x("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[14]||(e[14]=t=>Le())}," Gen/Update PVR ")):h("",!0),("useUtils"in a?a.useUtils:r(f))().checkPermission("trp_trx.generate_pv")?(i(),x("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[15]||(e[15]=t=>He())}," Gen/Update PV ")):h("",!0),("useUtils"in a?a.useUtils:r(f))().checkPermissions(["trp_trx.generate_pvr","trp_trx.generate_pv","trp_trx.get_pv"])?(i(),x("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:e[16]||(e[16]=t=>M.value=!r(M))},[Zt,k(" : "),b("span",{class:Bt(["font-bold",r(M)?"text-green-600":"text-red-600"])},w(r(M)?"ONLINE":"OFFLINE"),3)])):h("",!0)])]),m(ut,{thead:r(he),selected:r(o),onSetSelected:e[17]||(e[17]=t=>o.value=t),tbody:r(s),fnCallData:ce,scrolling:r(q),onSetScrollingPage:e[18]||(e[18]=t=>r(q).page=t),onDoFilter:e[19]||(e[19]=t=>me()),onSetCheckbox:e[20]||(e[20]=t=>re.value=t),deep_state:r(de)},{id:c(({item:t})=>[k(w(t.id),1),t.potongan&&t.potongan.length>0?(i(),x("span",Qt,"*")):h("",!0)]),absen:c(({item:t,index:p})=>[t.trx_absens&&t.trx_absens.length>0?(i(),g(it,{key:0,class:"cursor-pointer",onClick:oe=>Ne(p)},null,8,["onClick"])):h("",!0)]),val:c(({item:t})=>[t.val?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),val1:c(({item:t})=>[b("div",Xt,[t.val1?(i(),g(U,{key:1})):(i(),g(O,{key:0})),t.absen_not_done&&t.absen_not_done.length>0?(i(),x("div",ea,w(t.absen_not_done.join(",")),1)):h("",!0)])]),val2:c(({item:t})=>[t.val2?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),val3:c(({item:t})=>[t.val3?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),val4:c(({item:t})=>[t.val4?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),val5:c(({item:t})=>[t.val5?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),val6:c(({item:t})=>[t.val6?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),salary_paid:c(({item:t})=>{var p,oe;return[k(w(t.salary_paid?r(H)((p=t.salary_paid)==null?void 0:p.period_end).format("MM-Y")+"["+((oe=t.salary_paid)==null?void 0:oe.period_part)+"]":""),1)]}),uj_xto:c(({item:t})=>{var p;return[k(w((p=t.uj)==null?void 0:p.xto),1)]}),uj_asst_opt:c(({item:t})=>{var p;return[k(w((p=t.uj)==null?void 0:p.asst_opt),1)]}),uj_tipe:c(({item:t})=>{var p;return[k(w((p=t.uj)==null?void 0:p.tipe),1)]}),uj_harga:c(({item:t})=>{var p;return[k(w(r(Ae)((p=t.uj)==null?void 0:p.harga)),1)]}),payment_method_name:c(({item:t})=>{var p;return[k(w((p=t.payment_method)==null?void 0:p.name),1)]}),received_payment:c(({item:t})=>[k(w(t.received_payment?"Ya":"Tidak"),1)]),pvr_had_detail:c(({item:t})=>[t.pvr_had_detail?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),pv_complete:c(({item:t})=>[t.pv_complete?(i(),g(U,{key:1})):(i(),g(O,{key:0}))]),deleted_by_username:c(({item:t})=>{var p;return[k(w((p=t.deleted_by)==null?void 0:p.username),1)]}),req_deleted_by_username:c(({item:t})=>{var p;return[k(w((p=t.req_deleted_by)==null?void 0:p.username),1)]}),supir:c(({item:t})=>[k(w(t.supir)+" ",1),t.potongan&&t.potongan.length>0&&t.potongan.map(p=>p.potongan_mst.employee_id).indexOf(t.supir_id)>-1?(i(),x("span",ta," * ")):h("",!0)]),kernet:c(({item:t})=>[k(w(t.kernet)+" ",1),t.potongan&&t.potongan.length>0&&t.potongan.map(p=>p.potongan_mst.employee_id).indexOf(t.kernet_id)>-1?(i(),x("span",aa," * ")):h("",!0)]),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),m(ne,{type:"delete",show:r(V),data:r(be),fnClose:Be,fnConfirm:Fe,enabledOk:r(ae)},{footer:c(()=>[k(" Masukkan Alasan Penghapusan: "),b("div",la,[ie(b("textarea",{"onUpdate:modelValue":e[21]||(e[21]=t=>ue(N)?N.value=t:null)},null,512),[[Ce,r(N)]])])]),_:1},8,["show","data","enabledOk"]),m(ne,{type:"custome",show:r(L),fnClose:()=>L.value=!1,fnConfirm:Ke},{words:c(()=>[k(" Ticket akan "),ra,k(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),m(ne,{type:"custome",show:r(R),data:r(ge),fnClose:Ee,fnConfirm:Re,enabledOk:r(le)},{words:c(()=>[k(" Data akan diproses dan "),na,k(", yakin untuk melanjutkan ? ")]),footer:c(()=>[k(" Masukkan Alasan Permintaan Penghapusan: "),b("div",oa,[ie(b("textarea",{"onUpdate:modelValue":e[22]||(e[22]=t=>ue(B)?B.value=t:null)},null,512),[[Ce,r(B)]])])]),_:1},8,["show","data","enabledOk"]),m(_t,{show:r(Q),fnClose:()=>{Q.value=!1},fnLoadDBData:Se,id:r(ye),p_data:r(s),list_cost_center:r(ve),online_status:r(M)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),m(dt,{show:r(F),fnClose:()=>{F.value=!1},id:r(E),p_data:r(s),it_state:r(I),onSetID:e[23]||(e[23]=t=>E.value=t),onSetIndex:e[24]||(e[24]=t=>o.value=t)},null,8,["show","fnClose","id","p_data","it_state"]),m(pt,{show:r(te),fnClose:()=>{te.value=!1},index:r(ke),p_data:r(s)},null,8,["show","fnClose","index","p_data"]),m(vt,{show:r(X),fnClose:()=>{X.value=!1},id:r(ee),p_data:r(s),it_state:r(fe),onSetID:e[25]||(e[25]=t=>ee.value=t),onSetIndex:e[26]||(e[26]=t=>o.value=t)},null,8,["show","fnClose","id","p_data","it_state"])])}}};export{ol as default};
