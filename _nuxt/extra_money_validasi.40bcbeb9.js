import{_ as M}from"./HeaderPopup.vue.c8c39cb8.js";import{_ as Y}from"./WidthMiniPart.vue.d6e59f2d.js";import{r as u,f as $,j,m as V,J as F,o as v,c as f,a as e,b as D,t as s,k as a,l as m,x as I,E as H,A as p,B as C,p as T,e as E}from"./entry.d4b0a35b.js";import{u as J}from"./useUtils.f3863b3f.js";import{u as S}from"./useMyFetch.2c8e3aa4.js";import{_ as P}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.820d93a5.js";const o=i=>(T("data-v-d29d29ca"),i=i(),E(),i),O={class:"box-fixed"},z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},U={class:"w-full flex flex-col items-center grow overflow-auto"},K={class:"w-full flex flex-row flex-wrap"},Q={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=o(()=>e("label",{for:""},"Tujuan",-1)),G={class:"w-full card-border"},L={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},R=o(()=>e("label",{for:""},"Jenis",-1)),X={class:"w-full card-border"},Z={class:"w-full sm:w-3/12 flex px-2 py-3"},ee={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},te=o(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ae={class:"w-6/12 flex flex-col flex-wrap p-1"},le={class:"w-full card-border"},se={class:"w-6/12 flex flex-col flex-wrap p-1"},oe={class:"card-border"},ie={class:"w-full sm:w-12/12 flex px-2 py-3"},ne={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-start"},re=o(()=>e("div",{class:"absolute bg-white -top-3"}," Account ",-1)),ce={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"Info",-1)),_e={class:"card-border"},ue={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ve=o(()=>e("label",{for:""},"Deskripsi",-1)),fe={class:"w-full card-border"},me={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},pe=o(()=>e("label",{for:""},"Nominal",-1)),we={class:"w-full card-border"},xe={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},he=o(()=>e("label",{for:""},"Qty",-1)),ye={class:"w-full card-border"},be={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ge=o(()=>e("label",{for:""},"Total",-1)),ke={class:"w-full card-border"},De={class:"w-full flex items-center justify-end"},Ce={class:"w-full flex flex-wrap p-3 items-center"},Se=o(()=>e("div",null," Di Validasi oleh : ",-1)),Ae={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Ne={key:0},qe={key:1},Be={__name:"extra_money_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const r=i,{$moment:h}=H(),{pointFormat:w}=J(),t=u({...{id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""}}),y=$("token"),b=u({}),g=u(null);u([]);const d=u(JSON.parse(JSON.stringify({_:{id:{tcon:"",text:"ID",val:""},code:{tcon:"",text:"Code",val:""},name:{tcon:"",text:"Name",val:""}},id:"",name:"",title:""}))),A=async()=>{p().loading_full=!0,b.value={};const c=new FormData;let n="post",_=r.id;_==0||(c.append("id",_),c.append("_method","PUT"));const{data:l,error:x,status:q}=await S("/extra_money_validasi",{method:n,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:c,retry:0});if(p().loading_full=!1,q.value==="error"){C().trigger(x,b);return}t.value.val=l.value.val,t.value.val_user=l.value.val_user,t.value.val_by=l.value.val_by,t.value.val_at=l.value.val_at,t.value.val1=l.value.val1,t.value.val1_user=l.value.val1_user,t.value.val1_by=l.value.val1_by,t.value.val1_at=l.value.val1_at,t.value.val2=l.value.val2,t.value.val2_user=l.value.val2_user,t.value.val2_by=l.value.val2_by,t.value.val2_at=l.value.val2_at;let k=r.p_data.map(B=>B.id).indexOf(r.id);k>=-1&&r.p_data.splice(k,1,{...t.value}),r.fnClose()},N=async()=>{p().loading_full=!0;const{data:c,error:n,status:_}=await S("/extra_money",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(p().loading_full=!1,_.value==="error"){C().trigger(n);return}let l=c.value.data;t.value=l,d.value._.id.val=l.ac_account_id,d.value._.name.val=l.ac_account_name,d.value._.code.val=l.ac_account_code,d.value.id=l.ac_account_id,d.value.name=l.ac_account_code,d.value.title=l.ac_account_name};return j(()=>r.show,(c,n)=>{c==!0&&(r.is_view==!1&&setTimeout(()=>{g.value.focus()},1),N())},{immediate:!0}),(c,n)=>{const _=M,l=Y;return V((v(),f("section",O,[e("div",null,[D(_,{title:"Form Transaction Extra Money Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",z,[e("div",U,[e("div",K,[e("div",Q,[W,e("div",G,s(a(t).xto),1)]),e("div",L,[R,e("div",X,s(a(t).jenis),1)]),e("div",Z,[e("div",ee,[te,e("div",ae,[e("div",le,s(a(t).transition_type),1)]),e("div",se,[e("div",oe,s(a(t).transition_target),1)])])]),e("div",ie,[e("div",ne,[re,e("div",ce,[de,e("div",_e,[D(l,{selected:a(d)},null,8,["selected"])])]),e("div",ue,[ve,e("div",fe,s(a(t).description),1)]),e("div",me,[pe,e("div",we,s(a(w)(a(t).nominal)),1)]),e("div",xe,[he,e("div",ye,s(a(w)(a(t).qty)),1)]),e("div",be,[ge,e("div",ke,s(a(w)(a(t).nominal*a(t).qty)),1)])])])])]),e("div",De,[e("div",Ce,[Se,a(t).val1||a(t).val2?(v(),f("div",Ae,[a(t).val1?(v(),f("div",Ne," App 1 : "+s(a(t).val1_by.username)+" ( "+s(a(t).val1_at?a(h)(a(t).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0),a(t).val2?(v(),f("div",qe," App 2 : "+s(a(t).val2_by.username)+" ( "+s(a(t).val2_at?a(h)(a(t).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):m("",!0)])):m("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=x=>i.fnClose())}," Cancel "),i.is_view==0?(v(),f("button",{key:0,ref_key:"it_val",ref:g,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=I(x=>A(),["prevent"]))}," Validasi ",512)):m("",!0)])])])],512)),[[F,i.show]])}}},Ee=P(Be,[["__scopeId","data-v-d29d29ca"]]);export{Ee as default};
