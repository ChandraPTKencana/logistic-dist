import{_ as P}from"./HeaderPopup.vue.e17b4467.js";import{_ as T}from"./WidthMiniPart.vue.b7e27855.js";import{r as u,f as $,j,m as D,J as q,o as f,c as p,a as l,b as g,t as o,k as t,v as F,l as w,x as O,E as H,A as y,B as S,p as J,e as R}from"./entry.92b11eb7.js";import{u as U}from"./useUtils.e6218bed.js";import{u as I}from"./useMyFetch.dbdd839c.js";import{_ as E}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.691ca0bc.js";const s=_=>(J("data-v-95ba539c"),_=_(),R(),_),z={class:"box-fixed"},L={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},W={class:"w-full flex flex-col items-center grow overflow-auto"},G={class:"w-full flex flex-row flex-wrap"},K={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Q=s(()=>l("label",{for:""},"Tanggal",-1)),X={class:"card-border"},Z={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ee=s(()=>l("label",{for:""},"No Pol",-1)),ae={class:"card-border"},le={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},te=s(()=>l("label",{for:""},"Pekerja",-1)),oe={class:"card-border"},se={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},re=s(()=>l("label",{for:""},"Uang Tambahan",-1)),_e={class:"card-border"},ne={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ie=s(()=>l("label",{for:""},"Note",-1)),de={class:"text-red-500"},ve={class:"w-full flex flex-wrap"},ce={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ue=s(()=>l("label",{for:""},"Cost Center Code",-1)),me={class:"card-border"},fe={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},pe=s(()=>l("label",{for:""},"Cost Center Desc",-1)),xe={class:"card-border disabled"},we={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ye=s(()=>l("label",{for:""},"PVR No",-1)),he={class:"card-border disabled"},be={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ge=s(()=>l("label",{for:""},"PVR Total",-1)),ke={class:"card-border disabled"},Ne={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Ce=s(()=>l("label",{for:""},"PV",-1)),De={class:"card-border disabled"},Se={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Ie=s(()=>l("label",{for:""},"PV Amount",-1)),Ve={class:"card-border disabled"},Ye={class:"w-full flex items-center justify-end"},Be={class:"w-full flex flex-wrap p-3 items-center"},Ae=s(()=>l("div",null," Di Validasi oleh : ",-1)),Me={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Pe={key:0},Te={key:1},$e={__name:"extra_money_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(_){const d=_,{$moment:h}=H(),{pointFormat:x}=U(),a=u({...{id:-1,tanggal:new Date,employee:{id:0},extra_money_trx:{id:0},pv_id:-1,pv_no:"",pv_total:0,no_pol:"",note:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_complete:""}}),k=$("token"),b=u({}),N=u(null);u([]);const V={_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},xto:{tcon:"IconsLocationOn",text:"Tujuan",val:""},description:{tcon:"",text:"Deskripsi",val:""},total:{tcon:"",text:"Total",val:""}},id:"",name:"",title:"",note:""},n=u(JSON.parse(JSON.stringify({_raw:{},_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},rek_no:{tcon:"IconsNumber",text:"No Rek",val:""},rek_name:{tcon:"IconsCreditCard",text:"Nama Rek",val:""}},id:"",name:"",title:"",note:""}))),i=u(JSON.parse(JSON.stringify(V))),Y=async()=>{y().loading_full=!0,b.value={};const v=new FormData;let r="post",c=d.id;c==0||(v.append("id",c),v.append("_method","PUT"));const{data:e,error:m,status:A}=await I("/extra_money_trx_validasi",{method:r,headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:v,retry:0});if(y().loading_full=!1,A.value==="error"){S().trigger(m,b);return}a.value.val1=e.value.val1,a.value.val1_user=e.value.val1_user,a.value.val1_by=e.value.val1_by,a.value.val1_at=e.value.val1_at,a.value.val2=e.value.val2,a.value.val2_user=e.value.val2_user,a.value.val2_by=e.value.val2_by,a.value.val2_at=e.value.val2_at,a.value.val3=e.value.val3,a.value.val3_user=e.value.val3_user,a.value.val3_by=e.value.val3_by,a.value.val3_at=e.value.val3_at,a.value.val4=e.value.val4,a.value.val4_user=e.value.val4_user,a.value.val4_by=e.value.val4_by,a.value.val4_at=e.value.val4_at,a.value.val5=e.value.val5,a.value.val5_user=e.value.val5_user,a.value.val5_by=e.value.val5_by,a.value.val5_at=e.value.val5_at,a.value.val6=e.value.val6,a.value.val6_user=e.value.val6_user,a.value.val6_by=e.value.val6_by,a.value.val6_at=e.value.val6_at;let C=d.p_data.map(M=>M.id).indexOf(d.id);C>=-1&&d.p_data.splice(C,1,{...a.value}),d.fnClose()},B=async()=>{y().loading_full=!0;const{data:v,error:r,status:c}=await I("/extra_money_trx",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(y().loading_full=!1,c.value==="error"){S().trigger(r);return}let e=v.value.data;a.value=e,n.value._raw=e.employee,n.value._.id.val=e.employee.id,n.value._.name.val=e.employee.name,n.value._.rek_no.val=e.employee_rek_no,n.value._.rek_name.val=e.employee_rek_name,n.value.id=e.employee.id,n.value.name=e.employee.name,n.value.rek_no=(e.employee_rek_no||"")+" "+(e.employee_rek_name||""),i.value._raw=e.extra_money,i.value._.id.val=e.extra_money.id,i.value._.xto.val=e.extra_money.xto,i.value._.description.val=e.extra_money.description,i.value._.total.val=x(e.extra_money.total),i.value.id=e.extra_money.id,i.value.name=e.extra_money.xto,i.value.title=(x(e.extra_money.total)||"")+" "+(e.extra_money.description||"")};return j(()=>d.show,(v,r)=>{v==!0&&(d.is_view==!1&&setTimeout(()=>{N.value.focus()},1),B())},{immediate:!0}),(v,r)=>{const c=P,e=T;return D((f(),p("section",z,[l("div",null,[g(c,{title:"Form Transaction Salary Bonus Validation",fn:_.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),l("form",L,[l("div",W,[l("div",G,[l("div",K,[Q,l("div",X,o(t(h)(t(a).tanggal).format("DD-MM-YYYY")),1)]),l("div",Z,[ee,l("div",ae,o(t(a).no_pol),1)]),l("div",le,[te,l("div",oe,[g(e,{selected:t(n)},null,8,["selected"])])]),l("div",se,[re,l("div",_e,[g(e,{selected:t(i)},null,8,["selected"])])]),l("div",ne,[ie,D(l("textarea",{"onUpdate:modelValue":r[0]||(r[0]=m=>t(a).note=m)},null,512),[[F,t(a).note]]),l("p",de,o(t(b).note),1)]),l("div",ve,[l("div",ce,[ue,l("div",me,o(t(a).cost_center_code),1)]),l("div",fe,[pe,l("div",xe,o(t(a).cost_center_desc),1)]),l("div",we,[ye,l("div",he,o(t(a).pvr_no),1)]),l("div",be,[ge,l("div",ke,o(t(x)(t(a).pvr_total||0)),1)]),l("div",Ne,[Ce,l("div",De,o(t(a).pv_no),1)]),l("div",Se,[Ie,l("div",Ve,o(t(x)(t(a).pv_total)),1)])])])]),l("div",Ye,[l("div",Be,[Ae,t(a).val1||t(a).val2?(f(),p("div",Me,[t(a).val1?(f(),p("div",Pe," App 1 : "+o(t(a).val1_by.username)+" ( "+o(t(a).val1_at?t(h)(t(a).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),t(a).val2?(f(),p("div",Te," App 2 : "+o(t(a).val2_by.username)+" ( "+o(t(a).val2_at?t(h)(t(a).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),l("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[1]||(r[1]=m=>_.fnClose())}," Cancel "),_.is_view==0?(f(),p("button",{key:0,ref_key:"it_val",ref:N,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[2]||(r[2]=O(m=>Y(),["prevent"]))}," Validasi ",512)):w("",!0)])])])],512)),[[q,_.show]])}}},ze=E($e,[["__scopeId","data-v-95ba539c"]]);export{ze as default};
