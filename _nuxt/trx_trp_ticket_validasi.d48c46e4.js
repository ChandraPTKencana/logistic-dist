import{_ as H}from"./HeaderPopup.vue.277b1e3b.js";import{r as g,g as P,f as A,k as C,K as O,o as a,c as i,a as e,b as N,t as l,l as t,n as _,C as Y,G as K,x as v,y,p as $,e as V}from"./entry.4e8b375c.js";import{u as I}from"./useUtils.6a422976.js";import{u as D}from"./useMyFetch.0b4b0401.js";import{_ as U}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.e4560de7.js";const o=n=>($("data-v-d212866f"),n=n(),V(),n),F={class:"box-fixed"},q={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},z={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},E={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},G=o(()=>e("label",{for:""},"U.Jalan Per",-1)),L={class:"card-border"},Q={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},R=o(()=>e("label",{for:""},"Jenis",-1)),W={class:"card-border"},X={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Z=o(()=>e("label",{for:""},"Supir",-1)),tt={class:"card-border"},et={class:"w-6/12 sm:w-3/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},st=o(()=>e("label",{for:""},"Kernet",-1)),lt={class:"card-border"},ot={class:"w-6/12 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},at=o(()=>e("label",{for:""},"No Pol",-1)),it={class:"card-border"},_t={key:0,class:"w-full flex flex-wrap"},dt={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ct={for:""},rt={class:"card-border"},nt={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ft=o(()=>e("label",{for:""},"Info",-1)),wt={class:"card-border"},ut={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},bt=o(()=>e("label",{for:""},"Tipe",-1)),pt={class:"card-border"},vt={class:"w-6/12 sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},mt=o(()=>e("label",{for:""},"Total Dari U.Jalan",-1)),xt={class:"card-border"},ht={key:1,class:"w-full p-1"},kt=o(()=>e("label",{for:""},"Peralihan",-1)),gt={class:"card-border"},yt={key:2,class:"w-full flex flex-col flex-wrap p-1"},Dt=o(()=>e("label",{for:""},"Tiket A",-1)),jt={class:"card-border"},Mt={key:3,class:"w-full flex flex-wrap"},Yt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Tt=o(()=>e("label",{for:""},"In At",-1)),St={class:"card-border disabled"},Bt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ht=o(()=>e("label",{for:""},"Out At",-1)),Pt={class:"card-border disabled"},At={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Ct=o(()=>e("label",{for:""},"Bruto",-1)),Ot={class:"card-border disabled"},Nt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Kt=o(()=>e("label",{for:""},"Tara",-1)),$t={class:"card-border disabled"},Vt={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},It=o(()=>e("label",{for:""},"Netto",-1)),Ut={class:"card-border disabled"},Ft={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},qt=o(()=>e("label",{for:""},"No Pol",-1)),zt={class:"card-border disabled"},Jt={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},Et=o(()=>e("label",{for:""},"Supir",-1)),Gt={class:"card-border disabled"},Lt={key:4,class:"w-full flex flex-col flex-wrap p-1"},Qt=o(()=>e("label",{for:""},"Tiket B",-1)),Rt={class:"card-border"},Wt={key:5,class:"w-full flex flex-wrap"},Xt={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Zt=o(()=>e("label",{for:""},"In At",-1)),te={class:"card-border disabled"},ee={class:"w-6/12 sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},se=o(()=>e("label",{for:""},"Out At",-1)),le={class:"card-border disabled"},oe={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ae=o(()=>e("label",{for:""},"Bruto ",-1)),ie={class:"card-border disabled"},_e={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"Tara ",-1)),ce={class:"card-border disabled"},re={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ne=o(()=>e("label",{for:""},"Netto ",-1)),fe={class:"card-border disabled"},we={class:"w-3/12 sm:w-2/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},ue=o(()=>e("label",{for:""},"No Pol",-1)),be={class:"card-border disabled"},pe={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ve=o(()=>e("label",{for:""},"Supir",-1)),me={class:"card-border disabled"},xe={key:6,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},he=o(()=>e("label",{for:""},"In At",-1)),ke={class:"card-border"},ge={key:7,class:"w-full sm:w-6/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ye=o(()=>e("label",{for:""},"Out At",-1)),De={class:"card-border"},je={key:8,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Me=o(()=>e("label",{for:""},"Bruto",-1)),Ye={class:"card-border"},Te={key:9,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Se=o(()=>e("label",{for:""},"Tara",-1)),Be={class:"card-border"},He={key:10,class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col flex-wrap p-1"},Pe=o(()=>e("label",{for:""},"Netto",-1)),Ae={class:"card-border"},Ce={class:"w-full flex flex-wrap"},Oe=o(()=>e("div",{class:"w-full sm:w-full md:w-6/12 lg:w-4/12 flex flex-col flex-wrap p-1 justify-end"},null,-1)),Ne={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},Ke=o(()=>e("label",{for:"",class:"font-bold"},"Selisih Bruto ",-1)),$e={class:"card-border disabled"},Ve={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},Ie=o(()=>e("label",{for:"",class:"font-bold"},"Selisih Tara ",-1)),Ue={class:"card-border disabled"},Fe={class:"w-3/12 sm:w-2/12 md:w-1/12 lg:w-1/12 flex flex-col justify-end flex-wrap p-1"},qe=o(()=>e("label",{for:"",class:"font-bold"},"Selisih Netto ",-1)),ze={class:"card-border disabled"},Je={class:"w-full flex flex-col flex-wrap p-1"},Ee=o(()=>e("label",{for:""},"Note",-1)),Ge={class:"card-border"},Le={class:"w-full flex items-center justify-end"},Qe={class:"w-full flex flex-wrap p-3 items-center"},Re=o(()=>e("div",null," Di Validasi oleh : ",-1)),We={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Xe={key:0},Ze={key:1},ts={key:2},es={__name:"trx_trp_ticket_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(n){const d=n,{$moment:w}=K(),{pointFormat:c}=I(),s=g({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",ticket_note:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val_ticket:0,val_ticket_by:{username:""},val_ticket_at:""}}),x=P("token"),j=g(null),M=g(null),T=async()=>{v().loading_full=!0;const f=new FormData;let r="post",b=d.id;b==0||(f.append("id",b),f.append("_method","PUT"));const{data:u,error:p,status:h}=await D("/trx_trp_val_ticket",{method:r,headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},body:f,retry:0});if(v().loading_full=!1,h.value==="error"){y().trigger(p);return}s.value.val_ticket=u.value.val_ticket,s.value.val_ticket_by=u.value.val_ticket_by,s.value.val_ticket_at=u.value.val_ticket_at;let m=d.p_data.map(k=>k.id).indexOf(d.id);m>-1&&d.p_data.splice(m,1,{...s.value}),d.fnClose()},S=async()=>{v().loading_full=!0;const f=new FormData;let r="post",b=d.id;b==0||(f.append("id",b),f.append("_method","PUT"));const{data:u,error:p,status:h}=await D("/trx_trp_unval_ticket",{method:r,headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},body:f,retry:0});if(v().loading_full=!1,h.value==="error"){y().trigger(p);return}s.value.val_ticket=u.value.val_ticket,s.value.val_ticket_by=u.value.val_ticket_by,s.value.val_ticket_at=u.value.val_ticket_at;let m=d.p_data.map(k=>k.id).indexOf(d.id);m>-1&&d.p_data.splice(m,1,{...s.value}),d.fnClose()},B=async()=>{v().loading_full=!0;const{data:f,error:r,status:b}=await D("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${x.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(v().loading_full=!1,b.value==="error"){y().trigger(r);return}s.value=f.value.data};return A(()=>d.show,(f,r)=>{f==!0&&(d.it_state==1&&setTimeout(()=>{j.value.focus()},1),d.it_state==0&&setTimeout(()=>{M.value.focus()},1),B())},{immediate:!0}),(f,r)=>{var u;const b=H;return C((a(),i("section",F,[e("div",null,[N(b,{title:"Form Ticket Validation"+(n.id?" #"+n.id:""),fn:n.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["title","fn"]),e("form",q,[e("div",z,[e("div",J,[e("div",E,[G,e("div",L,l(t(s).tanggal?t(w)(t(s).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",Q,[R,e("div",W,l(t(s).jenis),1)]),e("div",X,[Z,e("div",tt,l(t(s).supir),1)]),e("div",et,[st,e("div",lt,l(t(s).kernet),1)]),e("div",ot,[at,e("div",it,l(t(s).no_pol),1)]),t(s).jenis!=""?(a(),i("div",_t,[e("div",dt,[e("label",ct,"Tujuan "+l(t(s).id_uj?" #"+t(s).id_uj:""),1),e("div",rt,l(t(s).xto),1)]),e("div",nt,[ft,e("div",wt,l((u=t(s).uj)==null?void 0:u.asst_opt),1)]),e("div",ut,[bt,e("div",pt,l(t(s).tipe),1)]),e("div",vt,[mt,e("div",xt,l(t(c)(t(s).amount||0)),1)])])):_("",!0),t(s).jenis=="TBS"?(a(),i("div",ht,[kt,e("div",gt,l(t(s).transition_target),1)])):_("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(a(),i("div",yt,[Dt,e("div",jt,l(t(s).ticket_a_no),1)])):_("",!0),t(s).jenis!=""&&t(s).jenis!="TBSK"?(a(),i("div",Mt,[e("div",Yt,[Tt,e("div",St,l(t(s).ticket_a_in_at?t(w)(t(s).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",Bt,[Ht,e("div",Pt,l(t(s).ticket_a_out_at?t(w)(t(s).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",At,[Ct,e("div",Ot,l(t(s).ticket_a_bruto?t(c)(t(s).ticket_a_bruto):0),1)]),e("div",Nt,[Kt,e("div",$t,l(t(s).ticket_a_tara?t(c)(t(s).ticket_a_tara):0),1)]),e("div",Vt,[It,e("div",Ut,l(t(s).ticket_a_bruto?t(c)(t(s).ticket_a_bruto-t(s).ticket_a_tara):0),1)]),e("div",Ft,[qt,e("div",zt,l(t(s).ticket_a_no_pol),1)]),e("div",Jt,[Et,e("div",Gt,l(t(s).ticket_a_supir),1)])])):_("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(a(),i("div",Lt,[Qt,e("div",Rt,l(t(s).ticket_b_no),1)])):_("",!0),["TBS","TBSK"].indexOf(t(s).jenis)>-1?(a(),i("div",Wt,[e("div",Xt,[Zt,e("div",te,l(t(s).ticket_b_in_at?t(w)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",ee,[se,e("div",le,l(t(s).ticket_b_out_at?t(w)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):"-"),1)]),e("div",oe,[ae,e("div",ie,l(t(s).ticket_b_bruto?t(c)(t(s).ticket_b_bruto):0),1)]),e("div",_e,[de,e("div",ce,l(t(s).ticket_b_tara?t(c)(t(s).ticket_b_tara):0),1)]),e("div",re,[ne,e("div",fe,l(t(s).ticket_b_bruto?t(c)(t(s).ticket_b_bruto-t(s).ticket_b_tara):0),1)]),e("div",we,[ue,e("div",be,l(t(s).ticket_b_no_pol),1)]),e("div",pe,[ve,e("div",me,l(t(s).ticket_b_supir),1)])])):_("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),i("div",xe,[he,e("div",ke,l(t(s).ticket_b_in_at?t(w)(t(s).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):_("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),i("div",ge,[ye,e("div",De,l(t(s).ticket_b_out_at?t(w)(t(s).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):_("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),i("div",je,[Me,e("div",Ye,l(t(c)(t(s).ticket_b_bruto||0)),1)])):_("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),i("div",Te,[Se,e("div",Be,l(t(c)(t(s).ticket_b_tara||0)),1)])):_("",!0),["CPO","PK"].indexOf(t(s).jenis)>-1?(a(),i("div",He,[Pe,e("div",Ae,l(t(c)(t(s).ticket_b_netto||0)),1)])):_("",!0),e("div",Ce,[Oe,e("div",Ne,[Ke,e("div",$e,l(t(c)(t(s).ticket_b_bruto-t(s).ticket_a_bruto||0)),1)]),e("div",Ve,[Ie,e("div",Ue,l(t(c)(t(s).ticket_b_tara-t(s).ticket_a_tara||0)),1)]),e("div",Fe,[qe,e("div",ze,l(t(c)(t(s).ticket_b_bruto-t(s).ticket_b_tara-(t(s).ticket_a_bruto-t(s).ticket_a_tara)||0)),1)])]),e("div",Je,[Ee,e("div",Ge,l(t(s).ticket_note),1)])])]),e("div",Le,[e("div",Qe,[Re,t(s).val||t(s).val1||t(s).val_ticket?(a(),i("div",We,[t(s).val?(a(),i("div",Xe," App 1 : "+l(t(s).val_by.username)+" ( "+l(t(s).val_at?t(w)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):_("",!0),t(s).val1?(a(),i("div",Ze," App 2 : "+l(t(s).val1_by.username)+" ( "+l(t(s).val1_at?t(w)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):_("",!0),t(s).val_ticket?(a(),i("div",ts," App 3 : "+l(t(s).val_ticket_by.username)+" ( "+l(t(s).val_ticket_at?t(w)(t(s).val_ticket_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):_("",!0)])):_("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=p=>n.fnClose())}," Cancel "),n.it_state==1?(a(),i("button",{key:0,ref_key:"it_val",ref:j,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=Y(p=>T(),["prevent"]))}," Validasi ",512)):_("",!0),n.it_state==0?(a(),i("button",{key:1,ref_key:"it_unval",ref:M,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:r[2]||(r[2]=Y(p=>S(),["prevent"]))}," Unvalidasi ",512)):_("",!0)])])])],512)),[[O,n.show]])}}},cs=U(es,[["__scopeId","data-v-d212866f"]]);export{cs as default};
