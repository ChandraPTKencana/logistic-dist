import I from"./ClockAnalog.ae94670b.js";import S from"./Calendar.77d83c18.js";import H from"./Truck.43794cbf.js";import U from"./LocationOn.8f7fde1a.js";import P from"./TruckDriver.27ff5afb.js";import{g as V,r as O,o as n,c as _,a as t,b as f,t as a,l as d,d as o,n as v,F as w,E as M,D as R,H as L,x as g,y as N}from"./entry.8afdee77.js";import{u as C}from"./useUtils.32b6c969.js";import{u as E}from"./useMyFetch.20e38539.js";import"./_plugin-vue_export-helper.c27b6911.js";const F={class:"border-2 w-full"},B=t("div",{class:"w-full font-bold text-center bg-blue-300"},"UANG JALAN TRIP INFO ",-1),$={class:"border-t-2 flex w-full items-center justify-between"},q={class:"flex items-center justify-center p-1"},G=t("div",{class:"font-bold text-xs"},"Created At",-1),K={class:"text-xs sm:flex"},J={class:"sm:mr-1"},Q={class:"font-bold text-lg text-center"},z={class:"flex items-center justify-center p-1"},W=t("div",{class:"font-bold text-xs"},"Updated At",-1),X={class:"text-xs sm:flex"},Z={class:"sm:mr-1"},tt={class:"border-t-2 p-2 flex flex-col items-center justify-center"},et={class:"flex flex-col items-center justify-center"},rt={class:"flex items-center justify-center"},lt={class:"font-bold italic ml-2"},at={class:"flex flex-col relative"},st={class:"absolute mt-12 ml-2 w-12 text-center font-bold"},ot={class:"absolute mt-2 w-16 bg-orange-500 text-center font-bold text-xs"},dt={class:"flex items-center justify-center"},nt={class:"px-1"},_t={class:"px-1 font-bold"},ct={class:"w-full flex flex-wrap items-center justify-center"},it={class:"w-full sm:w-1/2 flex flex-wrap items-center justify-center border-2 rounded-lg"},ut={class:"w-1/2"},vt={class:"w-1/2"},bt={class:"font-bold"},xt={key:0,class:"w-full sm:w-1/2 flex items-center justify-center border-2 rounded-lg"},mt={class:"w-1/2"},ht={class:"w-1/2"},ft={class:"font-bold"},pt={class:"w-full flex flex-row flex-wrap"},yt={class:"w-full sm:w-7/12 md:w-1/2 p-2"},kt=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," BIAYA PERJALANAN ",-1),gt={class:"w-full text-xs sm:text-sm"},wt=t("thead",null,[t("tr",null,[t("th",{class:"border-2 border-black p-1"},"No"),t("th",{class:"border-2 border-black p-1"},"Deskripsi"),t("th",{class:"border-2 border-black p-1"},"Qty"),t("th",{class:"border-2 border-black p-1"},"Harga"),t("th",{class:"border-2 border-black p-1"},"Jumlah")])],-1),Yt={class:"border-2 border-black p-1"},At={class:"border-2 border-black p-1"},Dt={class:"border-2 border-black p-1 text-right"},Mt={class:"border-2 border-black p-1 text-right"},Rt={class:"border-2 border-black p-1 text-right"},Nt=t("th",{class:"border-2 border-black p-1",colspan:"4"}," Total ",-1),Et={key:0,class:"border-2 border-black p-1"},jt={class:"border-2 border-black p-1 text-red-500",colspan:"4"},Tt={class:"border-2 border-black p-1 text-red-500 text-right"},It=t("td",{class:"border-2 border-black p-1 text-red-500",colspan:"4"}," Total Potongan ",-1),St={class:"border-2 border-black p-1 text-red-500 text-right"},Ht=t("th",{class:"border-2 border-black p-1",colspan:"4"}," Total Diterima ",-1),Ut={key:0,class:"border-2 border-black p-1 text-right"},Pt={class:"w-full sm:w-5/12 md:w-1/2 p-2"},Vt=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," PEMBAYARAN ",-1),Ot={class:"w-full text-sm"},Lt=t("td",{class:"border-2 border-black p-2"},"Metode ",-1),Ct={class:"border-2 border-black p-2 font-bold"},Ft=t("td",{class:"border-2 border-black p-2"},"Sudah Dibayarkan? ",-1),Bt={class:"border-2 border-black p-2 font-bold"},$t=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," DUITKU SUPIR ",-1),qt={class:"w-full text-sm"},Gt=t("tr",null,[t("td",{class:"border-2 border-black p-2"},"ID "),t("td",{class:"border-2 border-black p-2"},"INQUERY"),t("td",{class:"border-2 border-black p-2"},"TRANSFER")],-1),Kt={class:"border-2 border-black p-2 font-bold"},Jt={class:"border-2 border-black p-2 font-bold"},Qt={class:"border-2 border-black p-2 font-bold"},zt={key:0,class:"w-full font-bold text-xl text-center mt-2"},Wt={key:1,class:"w-full text-sm"},Xt=t("tr",null,[t("td",{class:"border-2 border-black p-2"},"ID "),t("td",{class:"border-2 border-black p-2"},"INQUERY"),t("td",{class:"border-2 border-black p-2"},"TRANSFER")],-1),Zt={class:"border-2 border-black p-2 font-bold"},te={class:"border-2 border-black p-2 font-bold"},ee={class:"border-2 border-black p-2 font-bold"},re=t("div",{class:"w-full font-bold text-xl text-center mt-2"}," ASCEND ",-1),le={class:"w-full text-sm"},ae=t("td",{class:"border-2 border-black p-2"}," NOTE FOR REMARKS ",-1),se={class:"border-2 border-black p-2 font-bold"},oe=t("td",{class:"border-2 border-black p-2"}," COST CENTER CODE ",-1),de={class:"border-2 border-black p-2 font-bold"},ne=t("td",{class:"border-2 border-black p-2"},"COST CENTER DESC",-1),_e={class:"border-2 border-black p-2 font-bold"},ce=t("td",{class:"border-2 border-black p-2"}," PVR NO ",-1),ie={class:"border-2 border-black p-2 font-bold"},ue=t("td",{class:"border-2 border-black p-2"}," PVR AMOUNT ",-1),ve={class:"border-2 border-black p-2 font-bold"},be=t("td",{class:"border-2 border-black p-2"}," PV NO ",-1),xe={class:"border-2 border-black p-2 font-bold"},me=t("td",{class:"border-2 border-black p-2"},"PV AMOUNT",-1),he={class:"border-2 border-black p-2 font-bold"},fe=t("div",{class:"text-xl font-bold"}," APPROVER UANG JALAN TRIP",-1),pe={class:"w-full flex flex-wrap justify-center text-xs text-center"},ye={class:"border-2 p-1 m-1"},ke=t("br",null,null,-1),ge=t("br",null,null,-1),we={class:"border-2 p-1 m-1"},Ye=t("br",null,null,-1),Ae=t("br",null,null,-1),De={class:"border-2 p-1 m-1"},Me=t("br",null,null,-1),Re=t("br",null,null,-1),Ne={class:"border-2 p-1 m-1"},Ee=t("br",null,null,-1),je=t("br",null,null,-1),Te={class:"border-2 p-1 m-1"},Ie=t("br",null,null,-1),Se=t("br",null,null,-1),He={class:"border-2 p-1 m-1"},Ue=t("br",null,null,-1),Pe=t("br",null,null,-1),Ve={class:"border-2 p-1 m-1"},Oe=t("br",null,null,-1),Le=t("br",null,null,-1),Ce={key:0,class:"flex flex-wrap justify-between"},Fe={key:0,class:"text-xs font-bold"},Be={key:0,class:"text-xs font-bold"},Ze={__name:"uj",props:{trx_trp:{type:Object,required:!0},p_data:{type:Array,required:!1,default:[]},save_state:{type:Array,required:!1,default:[]},save_do:{type:Array,required:!1,default:[]}},setup(e){const r=e,{$moment:c}=L(),{pointFormat:i}=C(),Y=V("token");O({});const j=async()=>{r.save_state[0]="PROSES...",r.save_do[0]="VAL",g().loading_full=!0;const b=new FormData;let x="post",m=r.trx_trp.id;m==0||(b.append("id",m),b.append("_method","PUT"));const{data:l,error:y,status:k}=await E("/trx_trp_validasi",{method:x,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:b,retry:0});if(g().loading_full=!1,k.value==="error"){r.save_state[0]="GAGAL",N().trigger(y);return}r.trx_trp.val=l.value.val,r.trx_trp.val_user=l.value.val_user,r.trx_trp.val_by=l.value.val_by,r.trx_trp.val_at=l.value.val_at,r.trx_trp.val1=l.value.val1,r.trx_trp.val1_user=l.value.val1_user,r.trx_trp.val1_by=l.value.val1_by,r.trx_trp.val1_at=l.value.val1_at,r.trx_trp.val2=l.value.val2,r.trx_trp.val2_user=l.value.val2_user,r.trx_trp.val2_by=l.value.val2_by,r.trx_trp.val2_at=l.value.val2_at,r.trx_trp.val3=l.value.val3,r.trx_trp.val3_user=l.value.val3_user,r.trx_trp.val3_by=l.value.val3_by,r.trx_trp.val3_at=l.value.val3_at,r.trx_trp.val4=l.value.val4,r.trx_trp.val4_user=l.value.val4_user,r.trx_trp.val4_by=l.value.val4_by,r.trx_trp.val4_at=l.value.val4_at,r.trx_trp.val5=l.value.val5,r.trx_trp.val5_user=l.value.val5_user,r.trx_trp.val5_by=l.value.val5_by,r.trx_trp.val5_at=l.value.val5_at,r.trx_trp.val6=l.value.val6,r.trx_trp.val6_user=l.value.val6_user,r.trx_trp.val6_by=l.value.val6_by,r.trx_trp.val6_at=l.value.val6_at;let h=r.p_data.map(p=>p.id).indexOf(r.trx_trp.id);h>-1&&r.p_data.splice(h,1,{...r.trx_trp}),r.save_state[0]="BERHASIL"},T=async()=>{r.save_state[0]="PROSES...",r.save_do[0]="UNVAL",g().loading_full=!0;const b=new FormData;let x="post",m=r.trx_trp.id;m==0||(b.append("id",m),b.append("_method","PUT"));const{data:l,error:y,status:k}=await E("/trx_trp_unvalidasi",{method:x,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:b,retry:0});if(g().loading_full=!1,k.value==="error"){r.save_state[0]="GAGAL",N().trigger(y);return}r.trx_trp.val=l.value.val,r.trx_trp.val_user=l.value.val_user,r.trx_trp.val_by=l.value.val_by,r.trx_trp.val_at=l.value.val_at,r.trx_trp.val1=l.value.val1,r.trx_trp.val1_user=l.value.val1_user,r.trx_trp.val1_by=l.value.val1_by,r.trx_trp.val1_at=l.value.val1_at,r.trx_trp.val2=l.value.val2,r.trx_trp.val2_user=l.value.val2_user,r.trx_trp.val2_by=l.value.val2_by,r.trx_trp.val2_at=l.value.val2_at,r.trx_trp.val3=l.value.val3,r.trx_trp.val3_user=l.value.val3_user,r.trx_trp.val3_by=l.value.val3_by,r.trx_trp.val3_at=l.value.val3_at,r.trx_trp.val4=l.value.val4,r.trx_trp.val4_user=l.value.val4_user,r.trx_trp.val4_by=l.value.val4_by,r.trx_trp.val4_at=l.value.val4_at,r.trx_trp.val5=l.value.val5,r.trx_trp.val5_user=l.value.val5_user,r.trx_trp.val5_by=l.value.val5_by,r.trx_trp.val5_at=l.value.val5_at,r.trx_trp.val6=l.value.val6,r.trx_trp.val6_user=l.value.val6_user,r.trx_trp.val6_by=l.value.val6_by,r.trx_trp.val6_at=l.value.val6_at;let h=r.p_data.map(p=>p.id).indexOf(r.trx_trp.id);h>-1&&r.p_data.splice(h,1,{...r.trx_trp}),r.save_state[0]="BERHASIL"};return(b,x)=>{var p,A,D;const m=I,l=S,y=H,k=U,h=P;return n(),_("div",F,[B,t("div",$,[t("div",q,[f(m,{class:"text-xl mr-1"}),t("div",null,[G,t("div",K,[t("div",J,a(e.trx_trp.created_at?d(c)(e.trx_trp.created_at).format("DD-MM-YYYY"):""),1),t("div",null,a(e.trx_trp.created_at?d(c)(e.trx_trp.created_at).format("H:m:s"):""),1)])])]),t("div",Q,"ID #"+a(e.trx_trp.id),1),t("div",z,[f(m,{class:"text-xl mr-1"}),t("div",null,[W,t("div",X,[t("div",Z,a(e.trx_trp.updated_at?d(c)(e.trx_trp.updated_at).format("DD-MM-YYYY"):""),1),t("div",null,a(e.trx_trp.updated_at?d(c)(e.trx_trp.updated_at).format("H:m:s"):""),1)])])])]),t("div",tt,[t("div",et,[t("div",rt,[f(l,{class:"mr-1"}),o(" "+a(e.trx_trp.tanggal?d(c)(e.trx_trp.tanggal).format("DD-MM-YYYY"):"")+" ",1),t("span",lt,a(e.trx_trp.transition_type)+" "+a(e.trx_trp.transition_target),1)]),t("div",at,[f(y,{class:"text-9xl"}),t("div",st,a(e.trx_trp.jenis),1),t("div",ot,a(e.trx_trp.no_pol),1)]),t("div",dt,[f(k),t("span",nt,a((p=e.trx_trp.uj)==null?void 0:p.xto)+" [#"+a((A=e.trx_trp.uj)==null?void 0:A.id)+"]",1),t("span",_t,a(d(i)((D=e.trx_trp.uj)==null?void 0:D.harga)),1)])]),t("div",ct,[t("div",it,[t("div",ut,[f(h,{class:"text-9xl"})]),t("div",vt,[t("div",bt," DRIVER #"+a(e.trx_trp.supir_id),1),t("div",null,a(e.trx_trp.supir),1)])]),e.trx_trp.kernet_id?(n(),_("div",xt,[t("div",mt,[f(h,{class:"text-9xl"})]),t("div",ht,[t("div",ft," ASST DRIVER #"+a(e.trx_trp.kernet_id),1),t("div",null,a(e.trx_trp.kernet),1)])])):v("",!0)]),t("div",pt,[t("div",yt,[kt,t("table",gt,[wt,t("tbody",null,[(n(!0),_(w,null,M(e.trx_trp.details_uj,(s,u)=>(n(),_("tr",null,[t("td",Yt,a(u+1),1),t("td",At,a(s.xdesc),1),t("td",Dt,a(d(i)(s.qty)),1),t("td",Mt,a(d(i)(s.harga)),1),t("td",Rt,a(d(i)(s.qty*s.harga)),1)]))),256))]),t("tfoot",null,[t("tr",null,[Nt,e.trx_trp.details_uj&&e.trx_trp.details_uj.length>0?(n(),_("th",Et,a(d(i)(e.trx_trp.details_uj.map(s=>s.qty*s.harga).reduce((s,u)=>(s+=u,s)))),1)):v("",!0)]),e.trx_trp.potongan&&e.trx_trp.potongan.length>0?(n(),_(w,{key:0},[(n(!0),_(w,null,M(e.trx_trp.potongan,s=>(n(),_("tr",null,[t("td",jt," Potongan "+a(s.potongan_mst.employee_id==e.trx_trp.supir_id?"Supir":"Kernet")+" #"+a(s.potongan_mst.id),1),t("td",Tt,a(d(i)(s.nominal_cut)),1)]))),256)),t("tr",null,[It,t("td",St,a(d(i)(e.trx_trp.potongan.map(s=>s.nominal_cut).reduce((s,u)=>(s+=u,s)))),1)]),t("tr",null,[Ht,e.trx_trp.details_uj&&e.trx_trp.potongan?(n(),_("th",Ut,a(d(i)(e.trx_trp.details_uj.map(s=>s.qty*s.harga).reduce((s,u)=>(s+=u,s))-e.trx_trp.potongan.map(s=>s.nominal_cut).reduce((s,u)=>(s+=u,s)))),1)):v("",!0)])],64)):v("",!0)])])]),t("div",Pt,[Vt,t("table",Ot,[t("tbody",null,[t("tr",null,[Lt,t("td",Ct,a(e.trx_trp.payment_method.name),1)]),t("tr",null,[Ft,t("td",Bt,a(e.trx_trp.received_payment?"Ya":"Tidak"),1)])])]),$t,t("table",qt,[t("tbody",null,[Gt,t("tr",null,[t("td",Kt,a(e.trx_trp.duitku_supir_disburseId),1),t("td",Jt,a(e.trx_trp.duitku_supir_inv_res_desc),1),t("td",Qt,a(e.trx_trp.duitku_supir_trf_res_desc),1)])])]),e.trx_trp.kernet?(n(),_("div",zt," DUITKU KERNET ")):v("",!0),e.trx_trp.kernet?(n(),_("table",Wt,[t("tbody",null,[Xt,t("tr",null,[t("td",Zt,a(e.trx_trp.duitku_kernet_disburseId),1),t("td",te,a(e.trx_trp.duitku_kernet_inv_res_desc),1),t("td",ee,a(e.trx_trp.duitku_kernet_trf_res_desc),1)])])])):v("",!0),re,t("table",le,[t("tbody",null,[t("tr",null,[ae,t("td",se,a(e.trx_trp.note_for_remarks),1)]),t("tr",null,[oe,t("td",de,a(e.trx_trp.cost_center_code),1)]),t("tr",null,[ne,t("td",_e,a(e.trx_trp.cost_center_desc),1)]),t("tr",null,[ce,t("td",ie,a(e.trx_trp.pvr_no),1)]),t("tr",null,[ue,t("td",ve,a(d(i)(e.trx_trp.pvr_total||0)),1)]),t("tr",null,[be,t("td",xe,a(e.trx_trp.pv_no),1)]),t("tr",null,[me,t("td",he,a(d(i)(e.trx_trp.pv_total||0)),1)])])])])]),fe,t("div",pe,[t("div",ye,[o(" Kasir "),ke,o(" "+a(e.trx_trp.val&&e.trx_trp.val_by?e.trx_trp.val_by.username:"-")+" ",1),ge,o(" ( "+a(e.trx_trp.val&&e.trx_trp.val_at?d(c)(e.trx_trp.val_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",we,[o(" Mandor "),Ye,o(" "+a(e.trx_trp.val1&&e.trx_trp.val1_by?e.trx_trp.val1_by.username:"-")+" ",1),Ae,o(" ( "+a(e.trx_trp.val1&&e.trx_trp.val1_at?d(c)(e.trx_trp.val1_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",De,[o(" KTU/W "),Me,o(" "+a(e.trx_trp.val2&&e.trx_trp.val2_by?e.trx_trp.val2_by.username:"-")+" ",1),Re,o(" ( "+a(e.trx_trp.val2&&e.trx_trp.val2_at?d(c)(e.trx_trp.val2_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ne,[o(" Marketing "),Ee,o(" "+a(e.trx_trp.val3&&e.trx_trp.val3_by?e.trx_trp.val3_by.username:"-")+" ",1),je,o(" ( "+a(e.trx_trp.val3&&e.trx_trp.val3_at?d(c)(e.trx_trp.val3_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Te,[o(" Logistik "),Ie,o(" "+a(e.trx_trp.val4&&e.trx_trp.val4_by?e.trx_trp.val4_by.username:"-")+" ",1),Se,o(" ( "+a(e.trx_trp.val4&&e.trx_trp.val4_at?d(c)(e.trx_trp.val4_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",He,[o(" SPV Logistik "),Ue,o(" "+a(e.trx_trp.val5&&e.trx_trp.val5_by?e.trx_trp.val5_by.username:"-")+" ",1),Pe,o(" ( "+a(e.trx_trp.val5&&e.trx_trp.val5_at?d(c)(e.trx_trp.val5_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)]),t("div",Ve,[o(" MGR Logistik "),Oe,o(" "+a(e.trx_trp.val6&&e.trx_trp.val6_by?e.trx_trp.val6_by.username:"-")+" ",1),Le,o(" ( "+a(e.trx_trp.val6&&e.trx_trp.val6_at?d(c)(e.trx_trp.val6_at).format("DD-MM-YYYY HH:mm:ss"):"-")+" ) ",1)])])]),e.save_state.length>0?(n(),_("div",Ce,[t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:x[0]||(x[0]=R(s=>j(),["prevent"]))},[o(" Validasi "),e.save_do[0]=="VAL"&&e.save_state[0]!=""?(n(),_("div",Fe,a(e.save_state[0]),1)):v("",!0)]),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:x[1]||(x[1]=R(s=>T(),["prevent"]))},[o(" Unvalidasi "),e.save_do[0]=="UNVAL"&&e.save_state[0]!=""?(n(),_("div",Be,a(e.save_state[0]),1)):v("",!0)])])):v("",!0)])}}};export{Ze as default};
