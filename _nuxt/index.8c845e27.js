import{_ as Ue}from"./Header.5dfdd404.js";import{_ as Pe,a as Be}from"./ac_accs.fa695de8.js";import{_ as ye}from"./Plus.c37e71b9.js";import{_ as Ve}from"./Edit.a6f6ff95.js";import{_ as qe}from"./Eyes.6b8da8a9.js";import{_ as Re}from"./Delete.9289958d.js";import{_ as ze}from"./Signature.5f58c78f.js";import{u as G,_ as He}from"./useUtils.5b5c81d3.js";import{_ as Le,a as Ee}from"./Check.eec30a4a.js";import{_ as Ye}from"./PopupMini.vue.66887c13.js";import{_ as xe}from"./HeaderPopup.vue.8b7b8cc9.js";import{_ as Oe,a as Ke}from"./ToolsPopup.d014bc1d.js";import{_ as Je}from"./Times.ae2e5856.js";import{_ as Ge}from"./InputPointFormat.vue.d0d233b0.js";import{r as _,f as ne,J as ce,g as re,o as c,c as u,h as H,v as be,a as e,b as $,k as t,j as le,t as i,G as g,d as ae,F as ee,n as _e,q as L,K as se,m as fe,x as S,y as X,p as $e,e as ge,s as ke,D as Xe,B as Ze,H as ve,I as Qe,i as he,l as we,w as We,E as et}from"./entry.3662c5b4.js";import{u as Z}from"./useMyFetch.25b712a1.js";import{_ as Ae}from"./_plugin-vue_export-helper.c27b6911.js";const E=y=>($e("data-v-06ff5777"),y=y(),ge(),y),tt={class:"box-fixed"},st={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},lt={class:"w-full flex flex-col items-center justify-center grow overflow-auto"},at={class:"w-full flex flex-row flex-wrap"},ot={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},nt=E(()=>e("label",{for:""},"Name",-1)),ct={class:"text-red-500"},ut={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},it=E(()=>e("label",{for:""},"Tipe",-1)),dt={class:"text-red-500"},rt={class:"w-full sm:w-4/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},_t=E(()=>e("label",{for:""},"Amount",-1)),ft={class:"card-border disabled"},pt={class:"text-red-500"},mt={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},vt={class:"w-full",role:"sticky"},ht={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},wt={class:"sticky -top-1 !z-[2]"},yt=["colspan"],xt={class:"sticky top-7 !z-[2]"},bt={key:0,class:"min-w-[30px] !w-[30px] max-w-[30px]"},$t=E(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),gt={key:1,class:"min-w-[30px] !w-[30px] max-w-[30px]"},kt=E(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),At=E(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),Ct=E(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),St=E(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),Dt={class:"min-w-[100px] !w-[100px] max-w-[100px]"},jt=E(()=>e("br",null,null,-1)),It={class:"text-sm"},Tt={ref:"to_move"},Ft=["data-index"],Nt={key:0,class:"tools cell"},Mt={class:"w-full h-full flex items-center justify-center"},Ut=["onClick"],Pt={key:1,class:"cell"},Bt={class:"w-full h-full flex items-center justify-center"},Vt=["onClick"],qt=["onClick","disabled"],Rt={class:"w-full h-full flex items-center justify-center"},zt={class:"w-full h-full flex items-center justify-center"},Ht={class:"w-full h-full flex items-center justify-center"},Lt={class:"cell"},Et={class:"w-full h-full flex items-center justify-center"},Yt=["disabled","onUpdate:modelValue"],Ot={class:"w-full h-full flex items-center justify-center"},Kt={key:0},Jt={class:"tools cell"},Gt={class:"w-full flex items-center justify-end"},Xt={__name:"standby_mst",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(y){const m=y,{pointFormat:Y}=G(),q={id:-1,name:"",tipe:"",amount:0,details:[]},f=_({...q}),s=ne("token"),D=_({});_([{xdesc:"Gaji Kernet",qty:1,harga:0},{xdesc:"U.Extrafooding",qty:1,harga:2e4}]);const d=_([]),v=_({ordinal:0,id:-1,ac_account_id:"",ac_account_name:"",ac_account_code:"",description:"",amount:0,p_status:""}),A=_(!1),F=()=>{A.value=!1},x=n=>{d.value[a.value].ac_account_id=n.ac_account_id,d.value[a.value].ac_account_code=n.ac_account_code,d.value[a.value].ac_account_name=n.ac_account_name,A.value=!1},h=(n,o)=>{a.value=o,A.value=!0},k=(n,o)=>{d.value[o].ac_account_id="",d.value[o].ac_account_code="",d.value[o].ac_account_name=""},b=async()=>{S().loading_full=!0,D.value={};const n=new FormData;n.append("name",f.value.name),n.append("tipe",f.value.tipe),n.append("amount",f.value.amount),n.append("details",JSON.stringify(d.value));let o="post",P=m.is_copy?0:m.id;P==0||(n.append("id",P),n.append("_method","PUT"));const{data:N,error:T,status:W}=await Z("/standby_mst",{method:o,headers:{Authorization:`Bearer ${s.value}`,Accept:"application/json"},body:n,retry:0});if(S().loading_full=!1,W.value==="error"){X().trigger(T,D);return}if(P<=0)f.value.id=N.value.id,f.value.created_at=N.value.created_at,f.value.updated_at=N.value.updated_at,m.p_data.unshift(f.value);else{f.value.updated_at=N.value.updated_at;let B=m.p_data.map(V=>V.id).indexOf(P);B>=-1&&m.p_data.splice(B,1,{...f.value})}m.fnClose()},j=ce(()=>{let n=0;return d.value.forEach(o=>{o.p_status!="Remove"&&(n+=1*o.amount)}),f.value.amount=n,n}),a=_(-1),I=_(!1),U=_({left:0,top:0}),R=(n,o)=>{a.value=o,I.value=!0,U.value={left:n.clientX,top:n.clientY}},O=()=>{d.value.push({...v.value,p_status:"Add"})},ue=()=>{I.value=!1},K=(n="")=>{if(n=="insert")d.value.splice(a.value,0,{...v.value,p_status:"Add"});else if(n=="delete")d.value[a.value].p_status=="Edit"?d.value[a.value].p_status="Remove":d.value.splice(a.value,1);else if(n=="move_top"){let o=d.value[a.value];d.value.splice(a.value,1),d.value.splice(a.value-1,0,{...o})}else if(n=="move_bottom"){let o=d.value[a.value];d.value.splice(a.value,1),d.value.splice(a.value+1,0,{...o})}I.value=!1},oe=ne("role"),C=ce(()=>f.value.val&&f.value.val1||oe.value=="Logistic"&&f.value.val||oe.value=="PabrikTransport"&&f.value.val1),Q=async()=>{S().loading_full=!0;const{data:n,error:o,status:P}=await Z("/standby_mst",{method:"get",headers:{Authorization:`Bearer ${s.value}`,Accept:"application/json"},params:{id:m.id},retry:0});if(S().loading_full=!1,P.value==="error"){X().trigger(o);return}f.value=n.value.data;let N="Edit";m.is_copy&&(N="Add",f.value.val=0,f.value.val1=0),d.value=n.value.data.details.map(T=>(T.p_status=N,T.key=T.ordinal,T))};return re(()=>m.show,(n,o)=>{n==!0&&(f.value={...q},d.value=[],m.id!=0&&Q())},{immediate:!0}),(n,o)=>{const P=xe,N=Oe,T=Je,W=Ge,B=ye,V=Ke,ie=Pe;return c(),u(ee,null,[H(e("section",tt,[e("div",null,[$(P,{title:"Form StandBy Mst",fn:y.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",st,[e("div",lt,[e("div",at,[e("div",ot,[nt,H(e("input",{"onUpdate:modelValue":o[0]||(o[0]=w=>t(f).name=w)},null,512),[[le,t(f).name]]),e("p",ct,i(t(D).name),1)]),e("div",ut,[it,H(e("input",{"onUpdate:modelValue":o[1]||(o[1]=w=>t(f).tipe=w)},null,512),[[le,t(f).tipe]]),e("p",dt,i(t(D).tipe),1)]),e("div",rt,[_t,e("div",ft,i(t(Y)(t(j))),1),e("p",pt,i(t(D).amount),1)])]),e("div",mt,[e("div",vt,[e("table",ht,[e("thead",null,[e("tr",wt,[e("td",{colspan:t(C)?6:8,class:"!bg-slate-800 text-white font-bold"}," Detail ",8,yt)]),e("tr",xt,[t(C)?g("",!0):(c(),u("th",bt)),$t,t(C)?g("",!0):(c(),u("th",gt)),kt,At,Ct,St,e("th",Dt,[ae("Amount "),jt,ae(),e("span",It,"("+i(t(Y)(t(j)))+")",1)])])]),e("tbody",Tt,[(c(!0),u(ee,null,_e(t(d),(w,z)=>(c(),u(ee,{key:z},[w.p_status!="Remove"?(c(),u("tr",{key:0,"data-index":z},[t(C)?g("",!0):(c(),u("td",Nt,[e("div",Mt,[e("button",{type:"button",name:"button",onClick:l=>R(l,z)},[$(N)],8,Ut)])])),e("td",null,i(z+1)+".",1),t(C)?g("",!0):(c(),u("td",Pt,[e("div",Bt,[w.ac_account_id?(c(),u("button",{key:1,type:"button",onClick:l=>k(l,z),disabled:w.confirm_by},[$(T,{class:"font-bold text-2xl"})],8,qt)):(c(),u("button",{key:0,type:"button",name:"button",onClick:l=>h(l,z)}," ... ",8,Vt))])])),e("td",{class:L(["cell bold",t(C)?"unselectable":""])},[e("div",Rt,i(w.ac_account_id),1)],2),e("td",{class:L(["cell bold",t(C)?"unselectable":""])},[e("div",zt,i(w.ac_account_code),1)],2),e("td",{class:L(["cell bold",t(C)?"unselectable":""])},[e("div",Ht,i(w.ac_account_name),1)],2),e("td",Lt,[e("div",Et,[H(e("textarea",{disabled:t(C),class:"p-1 w-full","onUpdate:modelValue":l=>w.description=l,cols:"7",rows:"2"},null,8,Yt),[[le,w.description]])])]),e("td",{class:L(["cell bold",t(C)?"unselectable":""])},[e("div",Ot,[(c(),se(W,{key:z,class:"w-full h-full p-1",type:"text",value:w.amount||0,onInput:l=>w.amount=l,show:y.show},null,8,["value","onInput","show"]))])],2)],8,Ft)):g("",!0)],64))),128)),t(C)?g("",!0):(c(),u("tr",Kt,[e("td",Jt,[e("button",{type:"button",name:"button",onClick:o[2]||(o[2]=w=>O())},[$(B)])])]))],512)])])])]),e("div",Gt,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:o[3]||(o[3]=w=>y.fnClose())}," Cancel "),t(C)?g("",!0):(c(),u("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:o[4]||(o[4]=fe(w=>b(),["prevent"]))}," Save "))])])])],512),[[be,y.show]]),$(V,{show:t(I),coor:t(U),fn:ue,data:t(d),data_index:t(a),onReplyAct:o[5]||(o[5]=w=>K(w))},null,8,["show","coor","data","data_index"]),$(ie,{show:t(A),fnClose:F,fnSelect:x},null,8,["show"])],64)}}},Zt=Ae(Xt,[["__scopeId","data-v-06ff5777"]]);const M=y=>($e("data-v-9a882a78"),y=y(),ge(),y),Qt={class:"box-fixed"},Wt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},es={class:"w-full flex flex-col items-center grow overflow-auto"},ts={class:"w-full flex flex-row flex-wrap"},ss={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ls=M(()=>e("label",{for:""},"Name",-1)),as={class:"card-border"},os={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ns=M(()=>e("label",{for:""},"Tipe",-1)),cs={class:"card-border"},us={class:"w-full sm:w-4/12 md:w-2/12 lg:w-1/12 flex flex-col flex-wrap p-1"},is=M(()=>e("label",{for:""},"Amount",-1)),ds={class:"card-border"},rs={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},_s={class:"w-full",role:"sticky"},fs={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},ps=M(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),ms={class:"sticky top-8 !z-[2]"},vs=M(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),hs=M(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),ws=M(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),ys=M(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),xs=M(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),bs={class:"min-w-[100px] !w-[100px] max-w-[100px]"},$s=M(()=>e("br",null,null,-1)),gs={class:"text-sm"},ks={ref:"to_move"},As=["data-index"],Cs={class:"w-full h-full flex items-center justify-center"},Ss={class:"w-full h-full flex items-center justify-center"},Ds={class:"w-full h-full flex items-center justify-center"},js={key:0,class:"cell"},Is={class:"w-full h-full flex items-center justify-center"},Ts={class:"w-full h-full flex items-center justify-center"},Fs={class:"w-full flex items-center justify-end"},Ns={class:"w-full flex flex-wrap p-3 items-center"},Ms=M(()=>e("div",null," Di Validasi oleh : ",-1)),Us={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Ps={key:0},Bs={key:1},Vs={__name:"standby_mst_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(y){const m=y,{$moment:Y}=ke(),{pointFormat:q}=G(),s=_({...{id:-1,name:"",tipe:"",amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),D=ne("token"),d=_({}),v=_([]),A=async()=>{S().loading_full=!0,d.value={};const k=new FormData;let b="post",j=m.id;j==0||(k.append("id",j),k.append("_method","PUT"));const{data:a,error:I,status:U}=await Z("/standby_mst_validasi",{method:b,headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:k,retry:0});if(S().loading_full=!1,U.value==="error"){X().trigger(I,d);return}s.value.val=a.value.val,s.value.val_user=a.value.val_user,s.value.val_by=a.value.val_by,s.value.val_at=a.value.val_at,s.value.val1=a.value.val1,s.value.val1_user=a.value.val1_user,s.value.val1_by=a.value.val1_by,s.value.val1_at=a.value.val1_at;let R=m.p_data.map(O=>O.id).indexOf(m.id);R>=-1&&m.p_data.splice(R,1,{...s.value}),m.fnClose()},F=async()=>{S().loading_full=!0;const{data:k,error:b,status:j}=await Z("/standby_mst",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:{id:m.id},retry:0});if(S().loading_full=!1,j.value==="error"){X().trigger(b);return}s.value=k.value.data,v.value=k.value.data.details},x=ce(()=>{let k=0;return v.value.forEach(b=>{b.p_status!="Remove"&&(k+=b.amount)}),k}),h=ce(()=>!1);return re(()=>m.show,(k,b)=>{k==!0&&F()},{immediate:!0}),(k,b)=>{const j=xe;return H((c(),u("section",Qt,[e("div",null,[$(j,{title:"Form Master Standby Validation",fn:y.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Wt,[e("div",es,[e("div",ts,[e("div",ss,[ls,e("div",as,i(t(s).name),1)]),e("div",os,[ns,e("div",cs,i(t(s).tipe),1)]),e("div",us,[is,e("div",ds,i(t(q)(t(s).amount||0)),1)])]),e("div",rs,[e("div",_s,[e("table",fs,[e("thead",null,[ps,e("tr",ms,[vs,hs,ws,ys,xs,e("th",bs,[ae("Amount "),$s,ae(),e("span",gs,"("+i(t(q)(t(x)))+")",1)])])]),e("tbody",ks,[(c(!0),u(ee,null,_e(t(v),(a,I)=>(c(),u(ee,{key:I},[a.p_status!="Remove"?(c(),u("tr",{key:0,"data-index":I},[e("td",null,i(I+1)+".",1),e("td",{class:L(["cell bold",t(h)?"unselectable":""])},[e("div",Cs,i(a.ac_account_id),1)],2),e("td",{class:L(["cell bold",t(h)?"unselectable":""])},[e("div",Ss,i(a.ac_account_code),1)],2),e("td",{class:L(["cell bold",t(h)?"unselectable":""])},[e("div",Ds,i(a.ac_account_name),1)],2),t(h)?g("",!0):(c(),u("td",js,[e("div",Is,i(a.description),1)])),e("td",{class:L(["cell bold",t(h)?"unselectable":""])},[e("div",Ts,i(t(q)(a.amount||0)),1)],2)],8,As)):g("",!0)],64))),128))],512)])])])]),e("div",Fs,[e("div",Ns,[Ms,t(s).val||t(s).val1?(c(),u("div",Us,[t(s).val?(c(),u("div",Ps," App 1 : "+i(t(s).val_by.username)+" ( "+i(t(s).val_at?t(Y)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):g("",!0),t(s).val1?(c(),u("div",Bs," App 2 : "+i(t(s).val1_by.username)+" ( "+i(t(s).val1_at?t(Y)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):g("",!0)])):g("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:b[0]||(b[0]=a=>y.fnClose())}," Cancel "),y.is_view==0?(c(),u("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:b[1]||(b[1]=fe(a=>A(),["prevent"]))}," Validasi ")):g("",!0)])])])],512)),[[be,y.show]])}}},qs=Ae(Vs,[["__scopeId","data-v-9a882a78"]]),Rs={class:"w-full h-full flex flex-col"},zs={class:"w-full flex grow flex-col overflow-auto h-0"},Hs={class:"w-full flex"},Ls={action:"#",class:"w-full flex p-1"},Es={class:"grow"},Ys=e("div",{class:"font-bold"}," Keyword ",-1),Os={class:"pl-1"},Ks=e("div",{class:"font-bold"}," Sort By ",-1),Js=e("option",{value:""},null,-1),Gs=e("option",{value:"id"},"ID",-1),Xs=e("option",{value:"name"},"Name",-1),Zs=e("option",{value:"tipe"},"Tipe",-1),Qs=[Js,Gs,Xs,Zs],Ws={class:"pl-1"},el=e("div",{class:"font-bold"}," Sort Order ",-1),tl=e("option",{value:"asc"},"Asc",-1),sl=e("option",{value:"desc"},"Desc",-1),ll=[tl,sl],al={class:"flex items-end pl-1"},ol={class:"w-full flex justify-center items-center grow h-0 p-1"},nl={key:0,class:""},cl={class:"tacky"},ul=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",null,"App 1"),e("th",null,"App 2"),e("th",null,"ID"),e("th",null,"Name"),e("th",null,"Tipe"),e("th",null,"Amount"),e("th",null,"Created At"),e("th",null,"Updated At")])],-1),il=["onClick"],dl={class:"flex items-center justify-center"},rl={class:"flex items-center justify-center"},_l={class:"bold"},fl={class:"grow mb-5"},Fl={__name:"index",async setup(y){let m,Y;const{$moment:q}=ke(),{pointFormat:f}=G(),s={};s._TimeZoneOffset=new Date().getTimezoneOffset(),s.sort="created_at:desc";const D=ne("token"),{data:d}=([m,Y]=Xe(async()=>et(async()=>{let l=[];S().loading_full=!0;const{data:r,error:J,status:te}=await Z("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:s,retry:0});return S().loading_full=!1,te.value==="error"?(X().trigger(J),{standby_msts:l}):(l=r.value.data,{standby_msts:l})},"$rczbThuP8g")),m=await m,Y(),m),v=_(d.value.standby_msts),A=_(""),F=_({field:"created_at",by:"desc"}),x=_(-1),h=_({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),k=()=>{s.like="",A.value!=""&&(s.like=`id:%${A.value}%,name:%${A.value}%,amount:%${A.value}%`),s.sort="",F.value.field&&(s.sort=F.value.field+":"+F.value.by)},b=_(null),j=async()=>{S().loading_full=!0,h.value.may_get_data=!1,s.page=h.value.page,s.page==1&&(v.value=[]),s.first_row&&delete s.first_row,s.page>1&&(s.first_row=JSON.stringify(v.value[0]));const{data:l,error:r,status:J}=await Z("/standby_msts",{method:"get",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},params:s,retry:0});if(S().loading_full=!1,h.value.may_get_data=!0,J.value==="error"){X().trigger(r);return}h.value.page==1?(v.value=l.value.data,b.value&&(b.value.scrollTop=0)):h.value.page>1&&(v.value=[...v.value,...l.value.data]),l.value.data.length==0&&(h.value.is_last_record=!0)},a=async()=>{if(!h.value.may_get_data)return;let l=b.value;if(l.scrollLeft!=h.value.scrollLeft){h.value.scrollLeft=l.scrollLeft;return}h.value.is_last_record||!(Math.round(l.scrollTop)+l.clientHeight>=l.scrollHeight-1)||(h.value.page++,await j())},I=()=>{h.value.page=1,h.value.is_last_record=!1,k(),j()};Ze();const U=_(!1),R=_(0),O=_(0),ue=()=>{R.value=0,U.value=!0,O.value=!1},{display:K}=ve();Qe(ve());const oe=()=>{x.value==-1?K({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=v.value[x.value].id,U.value=!0,O.value=!1)},C=()=>{x.value==-1?K({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(R.value=v.value[x.value].id,U.value=!0,O.value=!0)},Q=_(!1),n=_(0),o=_(!1),P=()=>{x.value==-1?K({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(n.value=v.value[x.value].id,Q.value=!0,o.value=!1)},N=()=>{x.value==-1?K({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(n.value=v.value[x.value].id,Q.value=!0,o.value=!0)},T=_(!1),W=_({}),B=_(!1),V=_(""),ie=async()=>{B.value&&(B.value=!1)},w=()=>{x.value==-1?K({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(V.value="",W.value={id:v.value[x.value].id},B.value=!0)};re(()=>V.value,l=>{l.trim().length>0?T.value=!0:T.value=!1},{immediate:!1});const z=async()=>{S().loading_full=!0;const l=new FormData;l.append("id",v.value[x.value].id),l.append("deleted_reason",V.value),l.append("_method","DELETE");const{data:r,error:J,status:te}=await Z("/standby_mst",{method:"post",headers:{Authorization:`Bearer ${D.value}`,Accept:"application/json"},body:l,retry:0});if(S().loading_full=!1,te.value==="error"){X().trigger(J);return}v.value.splice(x.value,1),x.value=-1,B.value=!1};return(l,r)=>{const J=Ue,te=Be,Ce=ye,Se=Ve,De=qe,je=Re,Ie=ze,Te=He,pe=Le,me=Ee,Fe=Ye,Ne=Zt,Me=qs;return c(),u("div",Rs,[$(J,{title:"List Standby"}),e("div",zs,[e("div",Hs,[("useUtils"in l?l.useUtils:t(G))().checkRole(["Logistic"])?g("",!0):(c(),u("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:r[0]||(r[0]=p=>C())},[$(te)])),("useUtils"in l?l.useUtils:t(G))().checkRole(["Logistic"])?g("",!0):(c(),u("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:r[1]||(r[1]=p=>ue())},[$(Ce)])),("useUtils"in l?l.useUtils:t(G))().checkRole(["Logistic"])?g("",!0):(c(),u("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:r[2]||(r[2]=p=>oe())},[$(Se)])),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:r[3]||(r[3]=p=>N())},[$(De)]),("useUtils"in l?l.useUtils:t(G))().checkRole(["PabrikTransport"])?g("",!0):(c(),u("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:r[4]||(r[4]=p=>w())},[$(je)])),e("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:r[5]||(r[5]=p=>P())},[$(Ie)])]),e("form",Ls,[e("div",Es,[Ys,H(e("input",{class:"",type:"text","onUpdate:modelValue":r[6]||(r[6]=p=>he(A)?A.value=p:null),name:"search",placeholder:"Keyword"},null,512),[[le,t(A)]])]),e("div",Os,[Ks,H(e("select",{class:"","onUpdate:modelValue":r[7]||(r[7]=p=>t(F).field=p)},Qs,512),[[we,t(F).field]])]),e("div",Ws,[el,H(e("select",{class:"","onUpdate:modelValue":r[8]||(r[8]=p=>t(F).by=p)},ll,512),[[we,t(F).by]])]),e("div",al,[e("button",{class:"",type:"submit",name:"button",onClick:r[9]||(r[9]=fe(p=>I(),["prevent"]))},[$(Te,{class:"text-2xl"})])])]),e("div",ol,[t(v).length==0?(c(),u("div",nl," Maaf Tidak Ada Record ")):(c(),u("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:b,onScroll:a},[e("table",cl,[ul,e("tbody",null,[(c(!0),u(ee,null,_e(t(v),(p,de)=>(c(),u("tr",{key:de,onClick:pl=>x.value=de,class:L(t(x)==de?"active":"")},[e("td",null,[e("div",dl,[p.val?(c(),se(me,{key:1})):(c(),se(pe,{key:0}))])]),e("td",null,[e("div",rl,[p.val1?(c(),se(me,{key:1})):(c(),se(pe,{key:0}))])]),e("td",_l,i(p.id),1),e("td",null,i(p.name),1),e("td",null,i(p.tipe),1),e("td",null,i(t(f)(p.amount)),1),e("td",null,i(p.created_at?t(q)(p.created_at).format("DD-MM-Y HH:mm:ss"):""),1),e("td",null,i(p.updated_at?t(q)(p.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,il))),128))])])],544))])]),$(Fe,{type:"delete",show:t(B),data:t(W),fnClose:ie,fnConfirm:z,enabledOk:t(T)},{footer:We(()=>[ae(" Masukkan Alasan Penghapusan: "),e("div",fl,[H(e("textarea",{"onUpdate:modelValue":r[10]||(r[10]=p=>he(V)?V.value=p:null)},null,512),[[le,t(V)]])])]),_:1},8,["show","data","enabledOk"]),$(Ne,{show:t(U),fnClose:()=>{U.value=!1},id:t(R),p_data:t(v),is_copy:t(O)},null,8,["show","fnClose","id","p_data","is_copy"]),$(Me,{show:t(Q),fnClose:()=>{Q.value=!1},id:t(n),p_data:t(v),is_view:t(o)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{Fl as default};
