import{_ as A}from"./HeaderPopup.vue.6354cbe7.js";import{_ as Y}from"./WidthMiniPart.vue.efce8626.js";import{r as d,f as $,j as V,m as j,M as q,o as c,c as v,a as l,b as k,t as u,k as t,l as f,x as F,E as P,A as p,B as N,p as H,e as T}from"./entry.ee76e376.js";import{u as E}from"./useUtils.56dadbdf.js";import{u as D}from"./useMyFetch.ece246bd.js";import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.fd762f40.js";const m=o=>(H("data-v-b4ca1087"),o=o(),T(),o),z={class:"box-fixed"},J={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},K={class:"w-full flex flex-col items-center grow overflow-auto"},U={class:"w-full flex flex-row flex-wrap"},W={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},G=m(()=>l("label",{for:""},"Tanggal",-1)),L={class:"card-border"},Q={class:"w-full sm:w-8/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},R=m(()=>l("label",{for:""},"Pekerja",-1)),X={class:"card-border"},Z={class:"w-full sm:w-6/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ee=m(()=>l("label",{for:""},"Nominal",-1)),ae={class:"card-border"},le={class:"w-full sm:w-6/12 md:w-full lg:w-full flex flex-col flex-wrap p-1"},te=m(()=>l("label",{for:""},"Note",-1)),oe={class:"card-border"},se={class:"w-full flex items-center justify-end"},ne={class:"w-full flex flex-wrap p-3 items-center"},ie=m(()=>l("div",null," Di Validasi oleh : ",-1)),re={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ue={key:0},_e={key:1},de={__name:"salary_bonus_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(o){const n=o,{$moment:w}=P(),{pointFormat:S}=E(),e=d({...{id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:""}}),b=$("token"),h=d({}),x=d(null);d([]);const i=d(JSON.parse(JSON.stringify({_:{id:{tcon:"IconsBaselineNumbers",text:"ID",val:""},name:{tcon:"IconsPerson",text:"Nama",val:""},ktp_no:{tcon:"IconsNumber",text:"No KTP",val:""},sim_no:{tcon:"IconsCreditCard",text:"No SIM",val:""}},id:"",name:"",title:""}))),C=async()=>{p().loading_full=!0,h.value={};const r=new FormData;let s="post",_=n.id;_==0||(r.append("id",_),r.append("_method","PUT"));const{data:a,error:y,status:B}=await D("/salary_bonus_validasi",{method:s,headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},body:r,retry:0});if(p().loading_full=!1,B.value==="error"){N().trigger(y,h);return}e.value.val=a.value.val,e.value.val_user=a.value.val_user,e.value.val_by=a.value.val_by,e.value.val_at=a.value.val_at,e.value.val1=a.value.val1,e.value.val1_user=a.value.val1_user,e.value.val1_by=a.value.val1_by,e.value.val1_at=a.value.val1_at,e.value.val2=a.value.val2,e.value.val2_user=a.value.val2_user,e.value.val2_by=a.value.val2_by,e.value.val2_at=a.value.val2_at;let g=n.p_data.map(I=>I.id).indexOf(n.id);g>=-1&&n.p_data.splice(g,1,{...e.value}),n.fnClose()},M=async()=>{p().loading_full=!0;const{data:r,error:s,status:_}=await D("/salary_bonus",{method:"get",headers:{Authorization:`Bearer ${b.value}`,Accept:"application/json"},params:{id:n.id},retry:0});if(p().loading_full=!1,_.value==="error"){N().trigger(s);return}let a=r.value.data;e.value=a,i.value._.id.val=a.employee.id,i.value._.name.val=a.employee.name,i.value._.ktp_no.val=a.employee.ktp_no,i.value._.sim_no.val=a.employee.sim_no,i.value.id=a.employee.id,i.value.name=a.employee.name,i.value.ktp_no=(a.employee.ktp_no||"")+" "+(a.employee.sim_no||"")};return V(()=>n.show,(r,s)=>{r==!0&&(n.is_view==!1&&setTimeout(()=>{x.value.focus()},1),M())},{immediate:!0}),(r,s)=>{const _=A,a=Y;return j((c(),v("section",z,[l("div",null,[k(_,{title:"Form Transaction Salary Bonus Validation",fn:o.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),l("form",J,[l("div",K,[l("div",U,[l("div",W,[G,l("div",L,u(t(w)(t(e).tanggal).format("DD-MM-Y")),1)]),l("div",Q,[R,l("div",X,[k(a,{selected:t(i)},null,8,["selected"])])]),l("div",Z,[ee,l("div",ae,u(t(S)(t(e).nominal||0)),1)]),l("div",le,[te,l("div",oe,u(t(e).note),1)])])]),l("div",se,[l("div",ne,[ie,t(e).val1||t(e).val2?(c(),v("div",re,[t(e).val1?(c(),v("div",ue," App 1 : "+u(t(e).val1_by.username)+" ( "+u(t(e).val1_at?t(w)(t(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),t(e).val2?(c(),v("div",_e," App 2 : "+u(t(e).val2_by.username)+" ( "+u(t(e).val2_at?t(w)(t(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0)])):f("",!0)]),l("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[0]||(s[0]=y=>o.fnClose())}," Cancel "),o.is_view==0?(c(),v("button",{key:0,ref_key:"it_val",ref:x,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[1]||(s[1]=F(y=>C(),["prevent"]))}," Validasi ",512)):f("",!0)])])])],512)),[[q,o.show]])}}},xe=O(de,[["__scopeId","data-v-b4ca1087"]]);export{xe as default};
