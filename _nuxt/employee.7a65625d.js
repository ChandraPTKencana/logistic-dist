import{_ as E}from"./HeaderPopup.vue.f1671a9c.js";import{_ as F}from"./client-only.03f78882.js";import{_ as O}from"./InputPointFormat.vue.85d830ed.js";import L from"./Eyes.878c15fa.js";import H from"./EyesOff.ef8b42bc.js";import R from"./AttachmentSingle.2f42bf74.js";import{r as K,g as q,f as J,I as z,k as i,K as G,o as f,c as V,a as e,b as u,l as o,A as _,t as d,v as S,F as Y,D as Q,w as C,a3 as D,z as U,J as W,d as X,C as Z,x as v,y as j,H as I,G as ee}from"./entry.533afaeb.js";import{u as A}from"./useMyFetch.32387a63.js";import"./Times.ce023c31.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./PDFJsView.e2203d8b.js";const te={class:"box-fixed"},oe={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},le={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},se={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},ae={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ne=e("label",{for:""},"Nama",-1),de=["disabled"],ie={class:"text-red-500"},re={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pe=e("label",{for:""},"Jabatan",-1),ue=e("option",{value:"Supir"},"Supir",-1),_e=e("option",{value:"Kernet"},"Kernet",-1),me=[ue,_e],ce={class:"text-red-500"},fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},we=e("label",{for:""},"No KTP",-1),ve={class:"text-red-500"},xe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},he=e("label",{for:""},"No SIM",-1),be={class:"text-red-500"},ke={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ye=e("label",{for:""},"Pilih Bank",-1),ge=e("option",{value:""},null,-1),Ke=["value"],Se={class:"text-red-500"},Ue={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Te=e("label",{for:""},"No Rek",-1),Ve={class:"text-red-500"},je={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ae=e("label",{for:""},"Nama Rek",-1),Ne={class:"text-red-500"},Me={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ce=e("label",{for:""},"Phone Number",-1),De={class:"text-red-500"},Ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Pe=e("label",{for:""},"Tanggal Lahir",-1),Be={class:"grow"},$e={class:"text-red-500"},Ee={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Fe=e("label",{for:""},"Tempat Lahir",-1),Oe={class:"text-red-500"},Le={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},He=e("label",{for:""},"TMK",-1),Re={class:"grow"},qe={class:"text-red-500"},Je={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ze=e("label",{for:""},"Alamat",-1),Ge={class:"text-red-500"},Ye={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Qe=e("label",{for:""},"Agama",-1),We=I('<option value="ISLAM">ISLAM</option><option value="KRISTEN PROTESTAN">KRISTEN PROTESTAN</option><option value="KRISTEN KATOLIK">KRISTEN KATOLIK</option><option value="HINDU">HINDU</option><option value="BUDDHA">BUDDHA</option><option value="KONGHUCU">KONGHUCU</option>',6),Xe=[We],Ze={class:"text-red-500"},et={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},tt=e("label",{for:""},"Status",-1),ot=I('<option value="TK/0">TK/0</option><option value="TK/1">TK/1</option><option value="TK/2">TK/2</option><option value="TK/3">TK/3</option><option value="K/0">K/0</option><option value="K/1">K/1</option><option value="K/2">K/2</option><option value="K/3">K/3</option>',8),lt=[ot],st={class:"text-red-500"},at={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},nt=e("label",{for:""},"BPJS Kesehatan",-1),dt={class:"w-full"},it={class:"text-red-500"},rt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pt=e("label",{for:""},"BPJS Jamsos",-1),ut={class:"w-full"},_t={class:"text-red-500"},mt=e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1),ct={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ft=e("label",{for:""},"Username",-1),wt={class:"text-red-500"},vt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},xt=e("label",{for:""},"Password",-1),ht={class:"w-full flex items-center"},bt=["type"],kt={class:"text-red-500"},yt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},gt=e("label",{for:""},"Confirm Password",-1),Kt={class:"w-full flex items-center"},St=["type"],Ut={class:"text-red-500"},Tt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Vt={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},jt=e("label",{for:""},"Face Login?",-1),At={class:"card-border !flex flex-row items-center"},Nt={for:"checkbox",class:"w-full ml-1 flex items-center"},Mt=["checked"],Ct={class:"text-red-500"},Dt={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},It={class:"w-full flex items-center justify-end"},zt={__name:"employee",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(x){const r=x,{$moment:N}=ee(),m=K(0),M={id:-1,name:"",role:"Supir",ktp_no:"",sim_no:"",bank_id:1,rek_no:"",rek_name:"",phone_number:"",attachment_1:"",attachment_1_preview:"",birth_date:new Date,birth_place:"",bpjs_kesehatan:0,bpjs_jamsos:0,tmk:new Date,address:"",status:"TK/0",val_at:"",religion:"ISLAM",username:"",password:"",confirm_password:"",face_loc:"",face_loc_preview:"",m_face_login:0},t=K({...M}),T=q("token"),n=K({}),P=async()=>{v().loading_full=!0,n.value={};const a=new FormData;a.append("name",t.value.name),a.append("role",t.value.role),a.append("ktp_no",t.value.ktp_no),a.append("sim_no",t.value.sim_no),a.append("bank_id",t.value.bank_id),a.append("rek_no",t.value.rek_no),a.append("rek_name",t.value.rek_name),a.append("phone_number",t.value.phone_number),a.append("attachment_1",t.value.attachment_1),a.append("attachment_1_preview",t.value.attachment_1_preview),a.append("birth_date",t.value.birth_date?N(t.value.birth_date).format("Y-MM-DD"):""),a.append("birth_place",t.value.birth_place),a.append("tmk",t.value.tmk?N(t.value.tmk).format("Y-MM-DD"):""),a.append("address",t.value.address),a.append("status",t.value.status),a.append("bpjs_kesehatan",t.value.bpjs_kesehatan),a.append("bpjs_jamsos",t.value.bpjs_jamsos),a.append("religion",t.value.religion),a.append("username",t.value.username),t.value.password&&a.append("password",t.value.password),t.value.confirm_password&&a.append("confirm_password",t.value.confirm_password),a.append("m_face_login",t.value.m_face_login),a.append("face_loc",t.value.face_loc),a.append("face_loc_preview",t.value.face_loc_preview);let l="post",p=r.is_copy?0:r.id;p==0||(a.append("id",p),a.append("_method","PUT"));const{data:w,error:b,status:k}=await A("/employee",{method:l,headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},body:a,retry:0});if(v().loading_full=!1,k.value==="error"){j().trigger(b,n);return}let y=h.value.map(c=>c.id).indexOf(t.value.bank_id);if(t.value.bank={...h.value[y]},t.value.updated_at=w.value.updated_at,p<=0)t.value.id=w.value.id,t.value.created_at=w.value.created_at,r.p_data.unshift(t.value);else{let c=r.p_data.map(g=>g.id).indexOf(p);c>=-1&&r.p_data.splice(c,1,{...t.value})}r.fnClose()},B=async()=>{v().loading_full=!0;const{data:a,error:l,status:p}=await A("/employee",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(v().loading_full=!1,p.value==="error"){j().trigger(l);return}r.is_copy&&(t.value.val=0),t.value=a.value.data},h=K([]),$=async()=>{v().loading_full=!0;const{data:a,error:l,status:p}=await A("/banks",{method:"get",headers:{Authorization:`Bearer ${T.value}`,Accept:"application/json"},params:{id:r.id},retry:0});if(v().loading_full=!1,p.value==="error"){j().trigger(l);return}h.value=a.value.data};return J(()=>r.show,async(a,l)=>{a==!0&&(t.value={...M},n.value={},await $(),r.id!=0&&await B())},{immediate:!0}),(a,l)=>{const p=E,w=z("vue-date-picker"),b=F,k=O,y=L,c=H,g=R;return i((f(),V("section",te,[e("div",null,[u(p,{title:"Form Employee",fn:x.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",oe,[e("div",le,[e("div",se,[e("div",ae,[ne,i(e("input",{type:"text","onUpdate:modelValue":l[0]||(l[0]=s=>o(t).name=s),disabled:o(t).val_at!=""},null,8,de),[[_,o(t).name]]),e("p",ie,d(o(n).name),1)]),e("div",re,[pe,i(e("select",{"onUpdate:modelValue":l[1]||(l[1]=s=>o(t).role=s)},me,512),[[S,o(t).role]]),e("p",ce,d(o(n).role),1)]),e("div",fe,[we,i(e("input",{type:"text","onUpdate:modelValue":l[2]||(l[2]=s=>o(t).ktp_no=s)},null,512),[[_,o(t).ktp_no]]),e("p",ve,d(o(n).ktp_no),1)]),e("div",xe,[he,i(e("input",{type:"text","onUpdate:modelValue":l[3]||(l[3]=s=>o(t).sim_no=s)},null,512),[[_,o(t).sim_no]]),e("p",be,d(o(n).sim_no),1)]),e("div",ke,[ye,i(e("select",{"onUpdate:modelValue":l[4]||(l[4]=s=>o(t).bank_id=s)},[ge,(f(!0),V(Y,null,Q(o(h),s=>(f(),V("option",{value:s.id},d(s.code),9,Ke))),256))],512),[[S,o(t).bank_id]]),e("p",Se,d(o(n).bank_id),1)]),e("div",Ue,[Te,i(e("input",{type:"text","onUpdate:modelValue":l[5]||(l[5]=s=>o(t).rek_no=s)},null,512),[[_,o(t).rek_no]]),e("p",Ve,d(o(n).rek_no),1)]),e("div",je,[Ae,i(e("input",{type:"text","onUpdate:modelValue":l[6]||(l[6]=s=>o(t).rek_name=s)},null,512),[[_,o(t).rek_name]]),e("p",Ne,d(o(n).rek_name),1)]),e("div",Me,[Ce,i(e("input",{type:"text","onUpdate:modelValue":l[7]||(l[7]=s=>o(t).phone_number=s)},null,512),[[_,o(t).phone_number]]),e("p",De,d(o(n).phone_number),1)]),e("div",Ie,[Pe,e("div",Be,[u(b,null,{default:C(()=>[u(w,{modelValue:o(t).birth_date,"onUpdate:modelValue":l[8]||(l[8]=s=>o(t).birth_date=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",$e,d(o(n).birth_date),1)]),e("div",Ee,[Fe,i(e("input",{type:"text","onUpdate:modelValue":l[9]||(l[9]=s=>o(t).birth_place=s)},null,512),[[_,o(t).birth_place]]),e("p",Oe,d(o(n).birth_place),1)]),e("div",Le,[He,e("div",Re,[u(b,null,{default:C(()=>[u(w,{modelValue:o(t).tmk,"onUpdate:modelValue":l[10]||(l[10]=s=>o(t).tmk=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue"])]),_:1})]),e("p",qe,d(o(n).tmk),1)]),e("div",Je,[ze,i(e("textarea",{"onUpdate:modelValue":l[11]||(l[11]=s=>o(t).address=s)},null,512),[[_,o(t).address]]),e("p",Ge,d(o(n).address),1)]),e("div",Ye,[Qe,i(e("select",{"onUpdate:modelValue":l[12]||(l[12]=s=>o(t).religion=s)},Xe,512),[[S,o(t).religion]]),e("p",Ze,d(o(n).religion),1)]),e("div",et,[tt,i(e("select",{"onUpdate:modelValue":l[13]||(l[13]=s=>o(t).status=s)},lt,512),[[S,o(t).status]]),e("p",st,d(o(n).status),1)]),e("div",at,[nt,e("div",dt,[u(k,{class:"w-full h-full p-1",type:"text",value:o(t).bpjs_kesehatan||0,onInput:l[14]||(l[14]=s=>o(t).bpjs_kesehatan=s)},null,8,["value"])]),e("p",it,d(o(n).bpjs_kesehatan),1)]),e("div",rt,[pt,e("div",ut,[u(k,{class:"w-full h-full p-1",type:"text",value:o(t).bpjs_jamsos||0,onInput:l[15]||(l[15]=s=>o(t).bpjs_jamsos=s)},null,8,["value"])]),e("p",_t,d(o(n).bpjs_jamsos),1)]),mt,e("div",ct,[ft,i(e("input",{type:"text","onUpdate:modelValue":l[16]||(l[16]=s=>o(t).username=s)},null,512),[[_,o(t).username]]),e("p",wt,d(o(n).username),1)]),e("div",vt,[xt,e("div",ht,[i(e("input",{type:o(m)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":l[17]||(l[17]=s=>o(t).password=s)},null,8,bt),[[D,o(t).password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:l[18]||(l[18]=s=>m.value=!o(m))},[o(m)?(f(),U(y,{key:0})):(f(),U(c,{key:1}))])]),e("p",kt,d(o(n).password),1)]),e("div",yt,[gt,e("div",Kt,[i(e("input",{type:o(m)?"text":"password",class:"grow rounded-tr-none rounded-br-none","onUpdate:modelValue":l[19]||(l[19]=s=>o(t).confirm_password=s)},null,8,St),[[D,o(t).confirm_password]]),e("div",{class:"flex items-center justify-center bg-blue-400 cursor-pointer h-full aspect-square text-white rounded-tr-sm rounded-br-sm",onClick:l[20]||(l[20]=s=>m.value=!o(m))},[o(m)?(f(),U(y,{key:0})):(f(),U(c,{key:1}))])]),e("p",Ut,d(o(n).confirm_password),1)]),e("div",Tt,[u(g,{label:"Photo",value:o(t).face_loc_preview,onSetFile:l[21]||(l[21]=s=>o(t).face_loc=s),onSetPreview:l[22]||(l[22]=s=>o(t).face_loc_preview=s),can_remove:!0},null,8,["value"])]),e("div",Vt,[jt,e("div",At,[e("label",Nt,[i(e("input",{id:"checkbox",checked:o(t).m_face_login,"onUpdate:modelValue":l[23]||(l[23]=s=>o(t).m_face_login=s),type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded mr-1"},null,8,Mt),[[W,o(t).m_face_login]]),X(" "+d(o(t).m_face_login?"Ya":"Tidak"),1)])]),e("p",Ct,d(o(n).m_face_login),1)])]),e("div",Dt,[u(g,{label:"Attachment",value:o(t).attachment_1_preview,onSetFile:l[24]||(l[24]=s=>o(t).attachment_1=s),onSetPreview:l[25]||(l[25]=s=>o(t).attachment_1_preview=s),can_remove:!0},null,8,["value"])])]),e("div",It,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[26]||(l[26]=s=>x.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[27]||(l[27]=Z(s=>P(),["prevent"]))}," Save ")])])])],512)),[[G,x.show]])}}};export{zt as default};
