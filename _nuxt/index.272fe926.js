import{_ as Mt}from"./Header.42524a9b.js";import{_ as Ct}from"./Plus.3056cf0f.js";import{_ as Bt}from"./Edit.35460452.js";import{_ as Ht}from"./Delete.54abf7ad.js";import{_ as St}from"./Signature.40d29006.js";import{_ as Pt,u as Nt,a as Yt}from"./useDownload.38b12668.js";import{u as at,_ as It}from"./useUtils.6d0cdfc1.js";import{_ as Ot,a as Ft}from"./Check.ce514174.js";import{_ as Vt}from"./PopupMini.vue.1bf70407.js";import{_ as Lt}from"./HeaderPopup.vue.17d176a8.js";import{r as u,f as q,g as zt,h as V,v as Et,o as _,c as r,a as t,b as x,t as s,k as e,G as f,m as it,s as nt,x as p,y as C,p as Ut,e as Kt,D as Jt,B as Rt,H as st,I as qt,d as Gt,q as R,j as Zt,i as Qt,l as ot,F as Wt,n as Xt,E as te,N as F,O as ee}from"./entry.b3de7ed1.js";import{u as B}from"./useMyFetch.742dfa38.js";import{_ as le}from"./_plugin-vue_export-helper.c27b6911.js";import{_ as se}from"./Times.6b5d4d0c.js";import"./client-only.dd9c2a4c.js";import"./InputPointFormat.vue.ad8bf603.js";const n=$=>(Ut("data-v-22cde9d3"),$=$(),Kt(),$),oe={class:"box-fixed"},ae={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ie={class:"w-full flex flex-col items-center grow overflow-auto"},ne={class:"w-full flex flex-row flex-wrap"},_e={class:"w-full flex flex-col flex-wrap p-1"},ce=n(()=>t("label",{for:""},"U.Jalan Per",-1)),re={class:"card-border"},de={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ue=n(()=>t("label",{for:""},"Jenis",-1)),fe={class:"card-border"},ve={key:0,class:"w-full flex pt-5"},pe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},me=n(()=>t("label",{for:""},"Tujuan",-1)),he={class:"card-border"},we={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},be=n(()=>t("label",{for:""},"Tipe",-1)),ke={class:"card-border"},xe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ge=n(()=>t("label",{for:""},"Total Dari U.Jalan",-1)),ye={class:"card-border"},$e={key:1,class:"w-full flex pb-5"},De={class:"w-full sm:w-8/12 md:w-9/12 lg:w-9/12 flex flex-col flex-wrap p-1"},Te=n(()=>t("label",{for:""},"PV",-1)),Ae={class:"card-border"},je={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Me=n(()=>t("label",{for:""},"Total Dari PV",-1)),Ce={class:"card-border"},Be={key:2,class:"w-full flex flex-col flex-wrap p-1"},He=n(()=>t("label",{for:""},"Tiket A",-1)),Se={class:"card-border"},Pe={key:3,class:"w-full flex flex-wrap"},Ne={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ye=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),Ie={class:"card-border"},Oe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Fe=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),Ve={class:"card-border"},Le={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ze=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),Ee={class:"card-border"},Ue={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Ke=n(()=>t("label",{for:""},"Supir",-1)),Je={class:"card-border"},Re={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},qe=n(()=>t("label",{for:""},"No Pol",-1)),Ge={class:"card-border"},Ze={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Qe=n(()=>t("label",{for:""},"In At",-1)),We={class:"card-border"},Xe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},tl=n(()=>t("label",{for:""},"Out At",-1)),el={class:"card-border"},ll={key:4,class:"w-full flex flex-col flex-wrap p-1"},sl=n(()=>t("label",{for:""},"Tiket B",-1)),ol={class:"card-border"},al={key:5,class:"w-full flex flex-wrap"},il={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},nl=n(()=>t("label",{for:""},"Bruto dari Tiket",-1)),_l={class:"card-border"},cl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},rl=n(()=>t("label",{for:""},"Tara dari Tiket",-1)),dl={class:"card-border"},ul={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},fl=n(()=>t("label",{for:""},"Netto dari Tiket",-1)),vl={class:"card-border"},pl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ml=n(()=>t("label",{for:""},"Supir",-1)),hl={class:"card-border"},wl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},bl=n(()=>t("label",{for:""},"No Pol",-1)),kl={class:"card-border"},xl={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},gl=n(()=>t("label",{for:""},"In At",-1)),yl={class:"card-border"},$l={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Dl=n(()=>t("label",{for:""},"Out At",-1)),Tl={class:"card-border"},Al={key:6,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},jl=n(()=>t("label",{for:""},"Bruto",-1)),Ml={class:"card-border"},Cl={key:7,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Bl=n(()=>t("label",{for:""},"Tara",-1)),Hl={class:"card-border"},Sl={key:8,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Pl=n(()=>t("label",{for:""},"Netto",-1)),Nl={class:"card-border"},Yl={key:9,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Il=n(()=>t("label",{for:""},"In At",-1)),Ol={class:"card-border"},Fl={key:10,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Vl=n(()=>t("label",{for:""},"Out At",-1)),Ll={class:"card-border"},zl={key:11,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},El=n(()=>t("label",{for:""},"Supir",-1)),Ul={class:"card-border"},Kl={key:12,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Jl=n(()=>t("label",{for:""},"Kernet",-1)),Rl={class:"card-border"},ql={key:13,class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Gl=n(()=>t("label",{for:""},"No Pol",-1)),Zl={class:"card-border"},Ql={class:"w-full flex items-center justify-end"},Wl={class:"w-full flex flex-wrap p-3 items-center"},Xl=n(()=>t("div",null," Di Validasi oleh : ",-1)),ts={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},es={key:0},ls={key:1},ss={__name:"trx_trp_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup($){const b=$,{$moment:k}=nt(),{pointFormat:d}=at(),l=u({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,pv_id:-1,pv_no:"",pv_total:0,ticket_a_id:-1,ticket_a_no:"",ticket_a_bruto:0,ticket_a_tara:0,ticket_a_netto:0,ticket_a_supir:"",ticket_a_no_pol:"",ticket_a_in_at:"",ticket_a_out_at:"",ticket_b_id:-1,ticket_b_no:"",ticket_b_bruto:0,ticket_b_tara:0,ticket_b_netto:0,ticket_b_supir:"",ticket_b_no_pol:"",ticket_b_in_at:"",ticket_b_out_at:"",supir:"",kernet:"",no_pol:"",val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),A=q("token"),L=async()=>{p().loading_full=!0;const g=new FormData;let c="post",T=b.id;T==0||(g.append("id",T),g.append("_method","PUT"));const{data:m,error:P,status:j}=await B("/trx_trp_validasi",{method:c,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:g,retry:0});if(p().loading_full=!1,j.value==="error"){C().trigger(P);return}l.value.val=m.value.val,l.value.val_user=m.value.val_user,l.value.val_by=m.value.val_by,l.value.val_at=m.value.val_at,l.value.val1=m.value.val1,l.value.val1_user=m.value.val1_user,l.value.val1_by=m.value.val1_by,l.value.val1_at=m.value.val1_at;let N=b.p_data.map(v=>v.id).indexOf(b.id);N>=-1&&b.p_data.splice(N,1,{...l.value}),b.fnClose()},z=async()=>{p().loading_full=!0;const{data:g,error:c,status:T}=await B("/trx_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:b.id},retry:0});if(p().loading_full=!1,T.value==="error"){C().trigger(c);return}l.value=g.value.data};return zt(()=>b.show,(g,c)=>{g==!0&&z()},{immediate:!0}),(g,c)=>{const T=Lt;return V((_(),r("section",oe,[t("div",null,[x(T,{title:"Form Transaction Validation",fn:$.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",ae,[t("div",ie,[t("div",ne,[t("div",_e,[ce,t("div",re,s(e(l).tanggal?e(k)(e(l).tanggal).format("DD-MM-YYYY"):""),1)]),t("div",de,[ue,t("div",fe,s(e(l).jenis),1)]),e(l).jenis!=""?(_(),r("div",ve,[t("div",pe,[me,t("div",he,s(e(l).xto),1)]),t("div",we,[be,t("div",ke,s(e(l).tipe),1)]),t("div",xe,[ge,t("div",ye,s(e(d)(e(l).amount||0)),1)])])):f("",!0),e(l).jenis!=""?(_(),r("div",$e,[t("div",De,[Te,t("div",Ae,s(e(l).pv_no),1)]),t("div",je,[Me,t("div",Ce,s(e(d)(e(l).pv_total||0)),1)])])):f("",!0),e(l).jenis!=""?(_(),r("div",Be,[He,t("div",Se,s(e(l).ticket_a_no),1)])):f("",!0),e(l).jenis!=""?(_(),r("div",Pe,[t("div",Ne,[Ye,t("div",Ie,s(e(d)(e(l).ticket_a_bruto||0)),1)]),t("div",Oe,[Fe,t("div",Ve,s(e(d)(e(l).ticket_a_tara||0)),1)]),t("div",Le,[ze,t("div",Ee,s(e(d)(e(l).ticket_a_netto||0)),1)]),t("div",Ue,[Ke,t("div",Je,s(e(l).ticket_a_supir),1)]),t("div",Re,[qe,t("div",Ge,s(e(l).ticket_a_no_pol),1)]),t("div",Ze,[Qe,t("div",We,s(e(l).ticket_a_in_at?e(k)(e(l).ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",Xe,[tl,t("div",el,s(e(l).ticket_a_out_at?e(k)(e(l).ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):f("",!0),e(l).jenis=="TBS"?(_(),r("div",ll,[sl,t("div",ol,s(e(l).ticket_b_no),1)])):f("",!0),e(l).jenis=="TBS"?(_(),r("div",al,[t("div",il,[nl,t("div",_l,s(e(d)(e(l).ticket_b_bruto||0)),1)]),t("div",cl,[rl,t("div",dl,s(e(d)(e(l).ticket_b_tara||0)),1)]),t("div",ul,[fl,t("div",vl,s(e(d)(e(l).ticket_b_netto||0)),1)]),t("div",pl,[ml,t("div",hl,s(e(l).ticket_b_supir),1)]),t("div",wl,[bl,t("div",kl,s(e(l).ticket_b_no_pol),1)]),t("div",xl,[gl,t("div",yl,s(e(l).ticket_b_in_at?e(k)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)]),t("div",$l,[Dl,t("div",Tl,s(e(l).ticket_b_out_at?e(k)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])])):f("",!0),e(l).jenis=="CPO"?(_(),r("div",Al,[jl,t("div",Ml,s(e(d)(e(l).ticket_b_bruto||0)),1)])):f("",!0),e(l).jenis=="CPO"?(_(),r("div",Cl,[Bl,t("div",Hl,s(e(d)(e(l).ticket_b_tara||0)),1)])):f("",!0),e(l).jenis=="CPO"?(_(),r("div",Sl,[Pl,t("div",Nl,s(e(d)(e(l).ticket_b_netto||0)),1)])):f("",!0),e(l).jenis=="CPO"?(_(),r("div",Yl,[Il,t("div",Ol,s(e(l).ticket_b_in_at?e(k)(e(l).ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),e(l).jenis=="CPO"?(_(),r("div",Fl,[Vl,t("div",Ll,s(e(l).ticket_b_out_at?e(k)(e(l).ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1)])):f("",!0),e(l).jenis!=""?(_(),r("div",zl,[El,t("div",Ul,s(e(l).supir),1)])):f("",!0),e(l).jenis!=""?(_(),r("div",Kl,[Jl,t("div",Rl,s(e(l).kernet),1)])):f("",!0),e(l).jenis!=""?(_(),r("div",ql,[Gl,t("div",Zl,s(e(l).no_pol),1)])):f("",!0)])]),t("div",Ql,[t("div",Wl,[Xl,e(l).val||e(l).val1?(_(),r("div",ts,[e(l).val?(_(),r("div",es," App 1 : "+s(e(l).val_by.username)+" ( "+s(e(l).val_at?e(k)(e(l).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0),e(l).val1?(_(),r("div",ls," App 2 : "+s(e(l).val1_by.username)+" ( "+s(e(l).val1_at?e(k)(e(l).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):f("",!0)])):f("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[0]||(c[0]=m=>$.fnClose())}," Cancel "),t("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:c[1]||(c[1]=it(m=>L(),["prevent"]))}," Validasi ")])])])],512)),[[Et,$.show]])}}},os=le(ss,[["__scopeId","data-v-22cde9d3"]]),as={class:"w-full h-full flex flex-col"},is={class:"w-full flex grow flex-col overflow-auto h-0"},ns={class:"w-full flex justify-between"},_s={class:"grow flex"},cs={class:"flex"},rs=t("span",{class:"text-xs"},"Mode",-1),ds={action:"#",class:"w-full flex p-1"},us={class:"grow"},fs=t("div",{class:"font-bold"}," Keyword ",-1),vs={class:"pl-1"},ps=t("div",{class:"font-bold"}," Sort By ",-1),ms=ee('<option value=""></option><option value="id">ID</option><option value="xto">To</option><option value="jenis">Jenis</option><option value="tipe">Tipe</option>',5),hs=[ms],ws={class:"pl-1"},bs=t("div",{class:"font-bold"}," Sort Order ",-1),ks=t("option",{value:"asc"},"Asc",-1),xs=t("option",{value:"desc"},"Desc",-1),gs=[ks,xs],ys={class:"flex items-end pl-1"},$s={class:"w-full flex justify-center items-center grow h-0 p-1"},Ds={key:0,class:""},Ts={class:"tacky"},As=t("thead",null,[t("tr",{class:"sticky top-0 !z-[2]"},[t("th",null,"Status"),t("th",null,"App 1"),t("th",null,"App 2"),t("th",null,"ID"),t("th",null,"U.Jalan Per"),t("th",null,"No Pol"),t("th",null,"Tujuan"),t("th",null,"Tipe"),t("th",null,"Jenis"),t("th",null,"Amount"),t("th",null,"PV No"),t("th",null,"PV Total"),t("th",null,"Ticket A No"),t("th",null,"Ticket A Bruto"),t("th",null,"Ticket A Tara"),t("th",null,"Ticket A Netto"),t("th",null,"Ticket A Supir"),t("th",null,"Ticket A No Pol"),t("th",null,"Ticket A In At"),t("th",null,"Ticket A Out At"),t("th",null,"Ticket B No"),t("th",null,"Ticket B Bruto"),t("th",null,"Ticket B Tara"),t("th",null,"Ticket B Netto"),t("th",null,"Ticket B Supir"),t("th",null,"Ticket B No Pol"),t("th",null,"Ticket B In At"),t("th",null,"Ticket B Out At"),t("th",null,"Supir"),t("th",null,"Kernet"),t("th",null,"Created At"),t("th",null,"Updated At")])],-1),js=["onClick"],Ms={class:"flex items-center justify-center"},Cs={class:"flex items-center justify-center"},Bs={class:"flex items-center justify-center"},Hs={class:"bold"},Ss={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Ps={class:"relative",style:{width:"95%",height:"90%"}},Ns={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ys=["src"],to={__name:"index",async setup($){let b,k;const{$moment:d}=nt(),{pointFormat:D}=at(),l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const A=q("token"),L=q("role"),z=i=>i.includes(L.value),{data:g}=([b,k]=Jt(async()=>te(async()=>{p().loading_full=!0;let i=[];const[a,y]=await Promise.all([B("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},retry:0})]);return a.status.value!=="error"&&(i=a.data.value.data),a.status.value==="error"?(C().trigger(a.error),{trx_trps:i}):(p().loading_full=!1,{trx_trps:i})},"$pFLmKcrKj9")),b=await b,k(),b),c=u(g.value.trx_trps||[]),T=u([]),m=u([]),P=u([]),j=u(!1),N=async i=>{p().loading_full=!0;const{data:a,error:y,status:S}=await B("/trx_load_for_trp",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{jenis:i,online_status:j.value},retry:0});if(p().loading_full=!1,S.value==="error"){C().trigger(y);return}T.value=a.value.list_ujalan,m.value=a.value.list_ticket,P.value=a.value.list_pv},v=u(""),M=u({field:"tanggal",by:"desc"}),h=u(-1),w=u({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),_t=()=>{l.like="",v.value!=""&&(l.like=`id:%${v.value}%,xto:%${v.value}%,jenis:%${v.value}%,pv_no:%${v.value}%,ticket_a_no:%${v.value}%,ticket_b_no:%${v.value}%,no_pol:%${v.value}%,supir:%${v.value}%,kernet:%${v.value}%`),l.sort="",M.value.field&&(l.sort=M.value.field+":"+M.value.by)},Y=u(null),G=async()=>{p().loading_full=!0,w.value.may_get_data=!1,l.page=w.value.page,l.page==1&&(c.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(c.value[0]));const{data:i,error:a,status:y}=await B("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:l,retry:0});if(p().loading_full=!1,w.value.may_get_data=!0,y.value==="error"){C().trigger(a);return}w.value.page==1?(c.value=i.value.data,Y.value&&(Y.value.scrollTop=0)):w.value.page>1&&(c.value=[...c.value,...i.value.data]),i.value.data.length==0&&(w.value.is_last_record=!0)},ct=async()=>{if(!w.value.may_get_data)return;let i=Y.value;if(i.scrollLeft!=w.value.scrollLeft){w.value.scrollLeft=i.scrollLeft;return}w.value.is_last_record||!(Math.round(i.scrollTop)+i.clientHeight>=i.scrollHeight-1)||(w.value.page++,await G())},rt=()=>{w.value.page=1,w.value.is_last_record=!1,_t(),G()};Rt();const I=u(!1),E=u(0),dt=()=>{E.value=0,I.value=!0},{display:O}=st();qt(st());const ut=()=>{h.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(E.value=c.value[h.value].id,I.value=!0)},U=u(!1),Z=u(0),ft=()=>{h.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Z.value=c.value[h.value].id,U.value=!0)},Q=u({}),H=u(!1),vt=async()=>{H.value&&(H.value=!1)},pt=()=>{h.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Q.value={id:c.value[h.value].id},H.value=!0)},mt=async()=>{p().loading_full=!0;const i=new FormData;i.append("id",c.value[h.value].id),i.append("_method","DELETE");const{data:a,error:y,status:S}=await B("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:i,retry:0});if(p().loading_full=!1,S.value==="error"){C().trigger(y);return}c.value.splice(h.value,1),h.value=-1,H.value=!1},{downloadFile:ht,printHtml:wt}=Nt(),K=u(!1),W=u(""),X=async()=>{if(K.value==!0){K.value=!1;return}if(h.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}p().loading_full=!0;const{data:i,error:a,status:y}=await B("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:c.value[h.value].id},retry:0});if(p().loading_full=!1,y.value==="error"){C().trigger(a);return}wt(i.value.html,318)},bt=()=>{ht(W.value)},tt=i=>i.pv_id<=0||["CPO","PK"].indexOf(i.jenis)>-1&&(i.ticket_a_id<=0||i.ticket_b_bruto<=0||i.ticket_b_tara<=0||i.ticket_b_netto<=0||i.ticket_b_in_at==""||i.ticket_b_out_at=="")||i.jenis=="TBS"&&(i.ticket_a_id<=0||i.ticket_b_id<=0)||i.jenis=="TBSK"&&i.ticket_b_id<=0?0:1;return(i,a)=>{const y=Mt,S=Ct,kt=Bt,xt=Ht,gt=St,yt=Yt,$t=It,et=Ot,lt=Ft,Dt=Vt,Tt=Pt,At=os,jt=se;return _(),r("div",as,[x(y,{title:"List Transaction"}),t("div",is,[t("div",ns,[t("div",_s,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[0]||(a[0]=o=>dt())},[x(S)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[1]||(a[1]=o=>ut())},[x(kt)]),z(["PabrikTransport"])?f("",!0):(_(),r("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:a[2]||(a[2]=o=>pt())},[x(xt)])),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[3]||(a[3]=o=>ft())},[x(gt)]),t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:a[4]||(a[4]=o=>X())},[x(yt)])]),t("div",cs,[t("div",{class:"m-1 card-border cursor-pointer",onClick:a[5]||(a[5]=o=>j.value=!e(j))},[rs,Gt(" : "),t("span",{class:R(["font-bold",e(j)?"text-green-600":"text-red-600"])},s(e(j)?"ONLINE":"OFFLINE"),3)])])]),t("form",ds,[t("div",us,[fs,V(t("input",{class:"",type:"text","onUpdate:modelValue":a[6]||(a[6]=o=>Qt(v)?v.value=o:null),name:"search",placeholder:"Keyword"},null,512),[[Zt,e(v)]])]),t("div",vs,[ps,V(t("select",{class:"","onUpdate:modelValue":a[7]||(a[7]=o=>e(M).field=o)},hs,512),[[ot,e(M).field]])]),t("div",ws,[bs,V(t("select",{class:"","onUpdate:modelValue":a[8]||(a[8]=o=>e(M).by=o)},gs,512),[[ot,e(M).by]])]),t("div",ys,[t("button",{class:"",type:"submit",name:"button",onClick:a[9]||(a[9]=it(o=>rt(),["prevent"]))},[x($t,{class:"text-2xl"})])])]),t("div",$s,[e(c).length==0?(_(),r("div",Ds," Maaf Tidak Ada Record ")):(_(),r("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:Y,onScroll:ct},[t("table",Ts,[As,t("tbody",null,[(_(!0),r(Wt,null,Xt(e(c),(o,J)=>(_(),r("tr",{key:J,onClick:Is=>h.value=J,class:R(e(h)==J?"active":"")},[t("td",null,[t("div",Ms,[t("div",{class:R(["text-white text-xs px-2 py-1 rounded-lg",tt(o)?"bg-green-600":"bg-red-600"])},s(tt(o)?"Done":"Not Done"),3)])]),t("td",null,[t("div",Cs,[o.val?(_(),F(lt,{key:1})):(_(),F(et,{key:0}))])]),t("td",null,[t("div",Bs,[o.val1?(_(),F(lt,{key:1})):(_(),F(et,{key:0}))])]),t("td",Hs,s(o.id),1),t("td",null,s(o.tanggal?e(d)(o.tanggal).format("DD-MM-Y"):""),1),t("td",null,s(o.no_pol),1),t("td",null,s(o.xto),1),t("td",null,s(o.tipe),1),t("td",null,s(o.jenis),1),t("td",null,s(e(D)(o.amount)),1),t("td",null,s(o.pv_no),1),t("td",null,s(e(D)(o.pv_total)),1),t("td",null,s(o.ticket_a_no),1),t("td",null,s(e(D)(o.ticket_a_bruto)),1),t("td",null,s(e(D)(o.ticket_a_tara)),1),t("td",null,s(e(D)(o.ticket_a_netto)),1),t("td",null,s(o.ticket_a_supir),1),t("td",null,s(o.ticket_a_no_pol),1),t("td",null,s(o.ticket_a_in_at?e(d)(o.ticket_a_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,s(o.ticket_a_out_at?e(d)(o.ticket_a_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,s(o.ticket_b_no),1),t("td",null,s(e(D)(o.ticket_b_bruto)),1),t("td",null,s(e(D)(o.ticket_b_tara)),1),t("td",null,s(e(D)(o.ticket_b_netto)),1),t("td",null,s(o.ticket_b_supir),1),t("td",null,s(o.ticket_b_no_pol),1),t("td",null,s(o.ticket_b_in_at?e(d)(o.ticket_b_in_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,s(o.ticket_b_out_at?e(d)(o.ticket_b_out_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,s(o.supir),1),t("td",null,s(o.kernet),1),t("td",null,s(o.created_at?e(d)(o.created_at).format("DD-MM-Y HH:mm:ss"):""),1),t("td",null,s(o.updated_at?e(d)(o.updated_at).format("DD-MM-Y HH:mm:ss"):""),1)],10,js))),128))])])],544))])]),x(Dt,{type:"delete",show:e(H),data:e(Q),fnClose:vt,fnConfirm:mt},null,8,["show","data"]),x(Tt,{show:e(I),fnClose:()=>{I.value=!1},fnLoadDBData:N,id:e(E),p_data:e(c),list_ujalan:e(T),list_ticket:e(m),list_pv:e(P)},null,8,["show","fnClose","id","p_data","list_ujalan","list_ticket","list_pv"]),x(At,{show:e(U),fnClose:()=>{U.value=!1},id:e(Z),p_data:e(c)},null,8,["show","fnClose","id","p_data"]),e(K)?(_(),r("div",Ss,[t("div",Ps,[t("div",Ns,[x(jt,{style:{color:"black",cursor:"pointer"},onClick:a[10]||(a[10]=o=>X())})]),t("iframe",{ref:"iframe",width:"100%",height:"100%",src:e(W).dataBase64},null,8,Ys),t("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:a[11]||(a[11]=o=>bt())})])])):f("",!0)])}}};export{to as default};
