import{_ as W}from"./HeaderCustom.vue.0f974749.js";import{_ as G}from"./client-only.54530c7e.js";import{_ as H}from"./PopupMini.vue.cf0486c5.js";import{f as K,g as L,h as U,r as i,i as X,j as Y,k as J,l as Z,M as ee,o as d,c as u,a as e,b as w,m as t,t as l,G as x,F as I,D as te,E as g,s as se,w as k,d as C,x as v,y as q}from"./entry.9bfb7e63.js";import{u as F}from"./useMyFetch.18476d33.js";import"./CaretLeft.217d9f9f.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.c32cdb9b.js";import"./Exclamation.e1e899ad.js";const oe={class:"w-full h-full flex flex-col"},le={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ae={class:"w-full flex flex-col items-center justify-center grow overflow-auto"},ne={class:"w-full flex flex-row flex-wrap"},ie={key:0,class:"w-full flex flex-col flex-wrap p-1"},re=e("label",{for:""},"Input At",-1),ce={class:"card-border"},de={class:"w-full flex flex-col flex-wrap p-1"},ue=e("label",{for:""},"Type",-1),_e={class:"card-border"},fe={class:"text-red-500"},me={class:"w-full flex flex-col flex-wrap p-1"},pe=e("label",{for:""},"From Warehouse",-1),he={class:"card-border flex flex-row flex-wrap"},we={class:"w-full flex",style:{}},xe={class:"flex flex-row flex-wrap grow"},ve={class:"p-1"},ye=e("div",{class:"text-sm text-gray-600"},"ID",-1),be={class:"bold"},ge={class:"p-1"},ke=e("div",{class:"text-sm text-gray-600"},"Name",-1),Ce={class:"bold"},$e={class:"text-red-500"},je={key:1,class:"w-full flex flex-col flex-wrap p-1"},De=e("label",{for:""},"To Warehouse",-1),Ne={class:"card-border flex flex-row flex-wrap"},Me={class:"w-full flex",style:{}},Ae={class:"flex flex-row flex-wrap grow"},Oe={class:"p-1"},Ve=e("div",{class:"text-sm text-gray-600"},"ID",-1),Be={class:"bold"},Ie={class:"p-1"},qe=e("div",{class:"text-sm text-gray-600"},"Name",-1),Fe={class:"bold"},Te={class:"text-red-500"},ze={key:2,class:"w-full flex flex-col flex-wrap p-1"},Se=e("label",{for:""},"Note",-1),Ee={class:"card-border"},Pe={class:"text-red-500"},Qe={class:"w-full flex grow p-1 overflow-auto"},Re={role:"sticky",ref:"loadRef"},We={class:"tacky w-full",style:{"white-space":"normal"}},Ge=e("thead",null,[e("tr",{class:"sticky top-0 !z-[2]"},[e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No"),e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"ID Item"),e("th",null,"Nama Item"),e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"Qty In"),e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"Qty Out"),e("th",null,"Keterangan")])],-1),He={class:"w-full h-full flex items-center justify-center"},Ke={class:"w-full h-full flex items-center justify-center"},Le={class:"w-full h-full flex items-center justify-center"},Ue={class:"cell"},Xe={class:"w-full h-full flex items-center justify-center"},Ye={class:"cell"},Je={class:"w-full h-full flex items-center justify-center"},Ze={class:"w-full flex items-center justify-end"},et=e("b",null,"tidak dapat dikembalikan lagi",-1),tt={class:"grow mb-5"},_t=K({__name:"confirm",async setup(st){var O,V;let p,$;L();const j=U("token"),r=i({}),T=X(),D=Y();let N={id:"",name:""};const{data:M}=([p,$]=J(async()=>Z(async()=>{const n=D.query.id;let a=null,c=null;if(n!==void 0&&n!==""){v().loading_full=!0;const{data:_,error:f,status:m}=await F("/transaction",{method:"get",headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},params:{id:n},retry:0});v().loading_full=!1,m.value==="error"?q().trigger(f,r):(a=_.value.data,c=_.value.data.details.map(s=>(s.status="View",s.key=s.ordinal,s)))}return{transaction:a,details:c}},"$41NQB02kXD")),p=await p,$(),p),y=i(!0),z=()=>{y.value=!1},S=()=>{y.value=!0},o=i(((O=M.value)==null?void 0:O.transaction)||{id:-1,type:"used",note:"",warehouse:{...N},warehouse_target:{...N},details:[]}),E=i(((V=M.value)==null?void 0:V.details)||[]);i({ordinal:0,item:{id:"",name:"",unit:{id:"",name:""}},item_id:"",qty_in:0,qty_out:0,note:"",status:""});const b=i({from:"",to:new Date}),A=i({}),h=i(!1),P=()=>{A.value={id:o.value.id,type:o.value.type,target:o.value.warehouse_target.name},h.value=!0},Q=async()=>{h.value&&(h.value=!1)},R=async()=>{v().loading_full=!0,r.value={};let n={};n.to=b.value.to;let a="post",c=D.query.id;c===""||(a="put",n.id=c);const{data:_,error:f,status:m}=await F("/confirm_transaction",{method:a,headers:{Authorization:`Bearer ${j.value}`,Accept:"application/json"},body:n,retry:0});if(v().loading_full=!1,m.value==="error"){q().trigger(f,r);return}T.go(-1)};return(n,a)=>{const c=W,_=ee("vue-date-picker"),f=G,m=H;return d(),u(I,null,[e("div",oe,[w(c,{title:"Form Confirmation",back:!0}),e("form",le,[e("div",ae,[e("div",ne,[t(o).confirmed_by?(d(),u("div",ie,[re,e("div",ce,l(n.$moment(t(o).input_at).format("DD-MM-Y")),1)])):x("",!0),e("div",de,[ue,e("div",_e,l(t(o).type),1),e("p",fe,l(t(r).type),1)]),e("div",me,[pe,e("div",he,[e("div",we,[e("div",xe,[e("div",ve,[ye,e("div",be,l(t(o).ref_id?t(o).warehouse_source.id:t(o).warehouse.id),1)]),e("div",ge,[ke,e("div",Ce,l(t(o).ref_id?t(o).warehouse_source.name:t(o).warehouse.name),1)])])])]),e("p",$e,l(t(r).warehouse_id),1)]),t(o).type=="transfer"?(d(),u("div",je,[De,e("div",Ne,[e("div",Me,[e("div",Ae,[e("div",Oe,[Ve,e("div",Be,l(t(o).warehouse_target.id),1)]),e("div",Ie,[qe,e("div",Fe,l(t(o).warehouse_target.name),1)])])])]),e("p",Te,l(t(r).warehouse_target_id),1)])):x("",!0),t(o).note?(d(),u("div",ze,[Se,e("div",Ee,l(t(o).note),1),e("p",Pe,l(t(r).note),1)])):x("",!0)]),e("div",Qe,[e("div",Re,[e("table",We,[Ge,e("tbody",null,[(d(!0),u(I,null,te(t(E),(s,B)=>(d(),u("tr",{key:B},[e("td",null,l(B+1)+".",1),e("td",{class:g(["cell bold",s.confirm_by?"unselectable":""])},[e("div",He,l(s.item.id),1)],2),e("td",{class:g(["cell",s.confirm_by?"unselectable":""])},[e("div",Ke,l(s.item.name),1)],2),e("td",{class:g(["cell",s.confirm_by?"unselectable":""])},[e("div",Le,l(s.qty_in),1)],2),e("td",Ue,[e("div",Xe,l(s.qty_out),1)]),e("td",Ye,[e("div",Je,l(s.note),1)])]))),128))])])],512)])]),e("div",Ze,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[0]||(a[0]=s=>n.$router.go(-1))}," Cancel "),t(o).confirmed_by==null?(d(),u("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[1]||(a[1]=se(s=>P(),["prevent"]))}," Confirm ")):x("",!0)])])]),w(m,{type:"custome",show:t(h),data:t(A),fnClose:Q,fnConfirm:R,enabledOk:t(y)},{words:k(()=>[C(" Data akan diproses dan "),et,C(", yakin untuk melanjutkan ? ")]),footer:k(()=>[C(" Pilih Tanggal Transaksi: "),e("div",tt,[w(f,null,{default:k(()=>[w(_,{modelValue:t(b).to,"onUpdate:modelValue":a[2]||(a[2]=s=>t(b).to=s),type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":"",onOpen:a[3]||(a[3]=s=>z()),onClosed:a[4]||(a[4]=s=>S())},null,8,["modelValue"])]),_:1})])]),_:1},8,["show","data","enabledOk"])],64)}}});export{_t as default};
