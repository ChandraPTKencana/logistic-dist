import{_ as V}from"./HeaderPopup.vue.3900fd5e.js";import j from"./AttachmentSingle.daba9e54.js";import{r as v,g as q,i as P,f as I,k as U,K,o as p,c as w,a as e,b as k,t as a,l,n as x,C as F,G as R,x as u,y as S,p as z,e as E}from"./entry.98e7da62.js";import{u as H}from"./useUtils.da9425db.js";import{u as A}from"./useMyFetch.279f859a.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.2c682f3c.js";import"./PDFJsView.98e76ce2.js";const o=c=>(z("data-v-c15362a6"),c=c(),E(),c),L={class:"box-fixed"},O={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},G={class:"w-full flex flex-wrap flex-row grow overflow-auto items-start"},Q={class:"w-full sm:w-full md:w-1/3 md:overflow-auto md:max-h-full flex flex-row flex-wrap"},W={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},X=o(()=>e("label",{for:""},"Name",-1)),Z={class:"card-border"},ee={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},te=o(()=>e("label",{for:""},"Role",-1)),le={class:"card-border"},se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ae=o(()=>e("label",{for:""},"No KTP",-1)),oe={class:"card-border"},ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},de=o(()=>e("label",{for:""},"No SIM",-1)),re={class:"card-border"},ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ce=o(()=>e("label",{for:""},"Bank Code",-1)),_e={class:"card-border"},fe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ue=o(()=>e("label",{for:""},"No Rek",-1)),me={class:"card-border"},ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},pe=o(()=>e("label",{for:""},"Nama Rek",-1)),we={class:"card-border"},he={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},xe=o(()=>e("label",{for:""},"Phone Number",-1)),be={class:"card-border"},ye={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ge=o(()=>e("label",{for:""},"Tanggal Lahir",-1)),ke={class:"card-border"},Se={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ae=o(()=>e("label",{for:""},"Tempat Lahir",-1)),Ce={class:"card-border"},De={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ye=o(()=>e("label",{for:""},"TMK",-1)),Me={class:"card-border"},Ne={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Pe=o(()=>e("label",{for:""},"Alamat",-1)),Fe={class:"card-border"},$e={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Be=o(()=>e("label",{for:""},"Agama",-1)),Te={class:"card-border"},Ve={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},je=o(()=>e("label",{for:""},"Status",-1)),qe={class:"card-border"},Ie={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Ue=o(()=>e("label",{for:""},"BPJS Kesehatan",-1)),Ke={class:"card-border"},Re={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},ze=o(()=>e("label",{for:""},"BPJS Jamsos",-1)),Ee={class:"card-border"},He=o(()=>e("div",{class:"w-full p-2 bg-blue-400 text-white mt-4"}," Data For Mobile APP ",-1)),Je={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Le=o(()=>e("label",{for:""},"Username",-1)),Oe={class:"card-border"},Ge={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},Qe={class:"w-1/2 sm:w-1/2 md:w-full flex flex-col flex-wrap p-1"},We=o(()=>e("label",{for:""},"Face Login?",-1)),Xe={class:"card-border"},Ze={class:"p-1 w-full sm:w-full md:w-2/3 md:overflow-auto max-h-full"},et={class:"w-full flex items-center justify-end"},tt={class:"w-full flex flex-wrap p-3 items-center"},lt=o(()=>e("div",null," Di Validasi oleh : ",-1)),st={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},at={key:0},ot={__name:"employee_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},it_state:{type:Number,required:!1,default:-1}},setup(c){const d=c,{$moment:b}=R(),{pointFormat:C}=H(),D={id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",attachment_1:"",attachment_1_preview:""},t=v({...D}),y=q("token"),h=v({}),Y=v(null),M=v(null),N=v([]),$=async()=>{u().loading_full=!0,h.value={};const i=new FormData;let s="post",_=d.id;_==0||(i.append("id",_),i.append("_method","PUT"));const{data:n,error:f,status:r}=await A("/employee_validasi",{method:s,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:i,retry:0});if(u().loading_full=!1,r.value==="error"){S().trigger(f,h);return}t.value.val=n.value.val,t.value.val_user=n.value.val_user,t.value.val_by=n.value.val_by,t.value.val_at=n.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>=-1&&d.p_data.splice(m,1,{...t.value}),d.fnClose()},B=async()=>{u().loading_full=!0,h.value={};const i=new FormData;let s="post",_=d.id;_==0||(i.append("id",_),i.append("_method","PUT"));const{data:n,error:f,status:r}=await A("/employee_unvalidasi",{method:s,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:i,retry:0});if(u().loading_full=!1,r.value==="error"){S().trigger(f,h);return}t.value.val=n.value.val,t.value.val_user=n.value.val_user,t.value.val_by=n.value.val_by,t.value.val_at=n.value.val_at;let m=d.p_data.map(g=>g.id).indexOf(d.id);m>=-1&&d.p_data.splice(m,1,{...t.value}),d.fnClose()},T=async()=>{u().loading_full=!0;const{data:i,error:s,status:_}=await A("/employee",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:d.id},retry:0});if(u().loading_full=!1,_.value==="error"){S().trigger(s);return}t.value=i.value.data,N.value=i.value.data.details};return P(()=>{let i=0;return N.value.forEach(s=>{s.p_status!="Remove"&&(i+=parseInt(s.amount))}),i}),P(()=>!1),I(()=>d.show,(i,s)=>{i==!0&&(t.value={...D},d.it_state==1&&setTimeout(()=>{Y.value.focus()},1),d.it_state==0&&setTimeout(()=>{M.value.focus()},1),T())},{immediate:!0}),(i,s)=>{var f;const _=V,n=j;return U((p(),w("section",L,[e("div",null,[k(_,{title:"Form Master Standby Validation",fn:c.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",O,[e("div",G,[e("div",Q,[e("div",W,[X,e("div",Z,a(l(t).name),1)]),e("div",ee,[te,e("div",le,a(l(t).role),1)]),e("div",se,[ae,e("div",oe,a(l(t).ktp_no),1)]),e("div",ie,[de,e("div",re,a(l(t).sim_no),1)]),e("div",ne,[ce,e("div",_e,a((f=l(t).bank)==null?void 0:f.code),1)]),e("div",fe,[ue,e("div",me,a(l(t).rek_no),1)]),e("div",ve,[pe,e("div",we,a(l(t).rek_name),1)]),e("div",he,[xe,e("div",be,a(l(t).phone_number),1)]),e("div",ye,[ge,e("div",ke,a(l(b)(l(t).birth_date).format("DD-MM-YYYY")),1)]),e("div",Se,[Ae,e("div",Ce,a(l(t).birth_place),1)]),e("div",De,[Ye,e("div",Me,a(l(b)(l(t).tmk).format("DD-MM-YYYY")),1)]),e("div",Ne,[Pe,e("div",Fe,a(l(t).address),1)]),e("div",$e,[Be,e("div",Te,a(l(t).religion),1)]),e("div",Ve,[je,e("div",qe,a(l(t).status),1)]),e("div",Ie,[Ue,e("div",Ke,a(l(C)(l(t).bpjs_kesehatan)),1)]),e("div",Re,[ze,e("div",Ee,a(l(C)(l(t).bpjs_jamsos)),1)]),He,e("div",Je,[Le,e("div",Oe,a(l(t).username),1)]),e("div",Ge,[k(n,{label:"Photo",value:l(t).face_loc_preview,onSetFile:s[0]||(s[0]=r=>l(t).face_loc=r),onSetPreview:s[1]||(s[1]=r=>l(t).face_loc_preview=r)},null,8,["value"])]),e("div",Qe,[We,e("div",Xe,a(l(t).m_face_login?"Ya":"Tidak"),1)])]),e("div",Ze,[k(n,{label:"Attachment",value:l(t).attachment_1_preview,onSetFile:s[2]||(s[2]=r=>l(t).attachment_1=r),onSetPreview:s[3]||(s[3]=r=>l(t).attachment_1_preview=r)},null,8,["value"])])]),e("div",et,[e("div",tt,[lt,l(t).val?(p(),w("div",st,[l(t).val?(p(),w("div",at," App 1 : "+a(l(t).val_by.username)+" ( "+a(l(t).val_at?l(b)(l(t).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):x("",!0)])):x("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:s[4]||(s[4]=r=>c.fnClose())}," Cancel "),c.it_state==1?(p(),w("button",{key:0,ref_key:"it_val",ref:Y,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:s[5]||(s[5]=F(r=>$(),["prevent"]))}," Validasi ",512)):x("",!0),c.it_state==0?(p(),w("button",{key:1,ref_key:"it_unval",ref:M,type:"submit",name:"button",class:"w-36 m-1 bg-yellow-600 text-white rounded-sm",onClick:s[6]||(s[6]=F(r=>B(),["prevent"]))}," Unvalidasi ",512)):x("",!0)])])])],512)),[[K,c.show]])}}},mt=J(ot,[["__scopeId","data-v-c15362a6"]]);export{mt as default};
