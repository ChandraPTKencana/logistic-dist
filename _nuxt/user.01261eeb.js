import{_ as M}from"./HeaderPopup.vue.e2bec324.js";import{r as w,h as V,I as P,n as p,v as I,o as U,c as B,a as e,b as F,m as d,q as h,t as c,C as x,s as $,x as _,y as k,p as q,e as N,L as T}from"./entry.ef147d81.js";import"./useUtils.7d7bf96c.js";import{u as g}from"./useMyFetch.519debed.js";import{_ as D}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.9c12f483.js";const u=i=>(q("data-v-1d0dd17d"),i=i(),N(),i),j={class:"box-fixed"},L={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},O={class:"w-full flex flex-col items-center grow overflow-auto"},z={class:"w-full flex flex-row flex-wrap"},E={class:"w-full flex flex-col flex-wrap p-1"},H=u(()=>e("label",{for:""},"Username",-1)),G={class:"text-red-500"},J={class:"w-full flex flex-col flex-wrap p-1"},K=u(()=>e("label",{for:""},"Password",-1)),Q={class:"text-red-500"},R={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},W=u(()=>e("label",{for:""},"Hak Akses",-1)),X=T('<option value="PabrikTransport" data-v-1d0dd17d>Pabrik Transport</option><option value="PabrikMandor" data-v-1d0dd17d>Pabrik Mandor</option><option value="Logistic" data-v-1d0dd17d>Logisitic</option><option value="Finance" data-v-1d0dd17d>Finance</option><option value="Marketing" data-v-1d0dd17d>Marketing</option><option value="Accounting" data-v-1d0dd17d>Accounting</option><option value="MIS" data-v-1d0dd17d>MIS</option><option value="ViewOnly" data-v-1d0dd17d>ViewOnly</option><option value="SuperAdmin" data-v-1d0dd17d>SuperAdmin</option>',9),Y=[X],Z={class:"text-red-500"},ee={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},te=u(()=>e("label",{for:""},"Status",-1)),ae=u(()=>e("option",{value:"1"},"Aktif",-1)),oe=u(()=>e("option",{value:"0"},"Nonaktif",-1)),se=[ae,oe],de={class:"text-red-500"},le={class:"w-full flex items-center justify-end"},ie={__name:"user",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(i){const l=i,f={id:-1,username:"",password:"",hak_akses:"PabrikTransport",is_active:1},t=w({...f}),v=V("token"),n=w({}),y=async()=>{_().loading_full=!0,n.value={};const s=new FormData;s.append("username",t.value.username),t.value.password&&s.append("password",t.value.password),s.append("hak_akses",t.value.hak_akses),s.append("is_active",t.value.is_active);let a="post",r=l.id;r==0||(s.append("id",r),s.append("_method","PUT"));const{data:o,error:S,status:A}=await g("/user",{method:a,headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},body:s,retry:0});if(_().loading_full=!1,A.value==="error"){k().trigger(S,n);return}if(l.id<=0)t.value.id=o.value.id,t.value.created_at=o.value.created_at,t.value.updated_at=o.value.updated_at,l.p_data.unshift(t.value);else{t.value.updated_at=o.value.updated_at;let m=l.p_data.map(C=>C.id).indexOf(l.id);m>=-1&&l.p_data.splice(m,1,{...t.value})}l.fnClose()},b=async()=>{_().loading_full=!0;const{data:s,error:a,status:r}=await g("/user",{method:"get",headers:{Authorization:`Bearer ${v.value}`,Accept:"application/json"},params:{id:l.id},retry:0});if(_().loading_full=!1,r.value==="error"){k().trigger(a);return}t.value=s.value.data};return P(()=>l.show,(s,a)=>{s==!0&&(t.value={...f},n.value={},l.id!=0&&b())},{immediate:!0}),(s,a)=>{const r=M;return p((U(),B("section",j,[e("div",null,[F(r,{title:"Form User",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",L,[e("div",O,[e("div",z,[e("div",E,[H,p(e("input",{type:"text","onUpdate:modelValue":a[0]||(a[0]=o=>d(t).username=o)},null,512),[[h,d(t).username]]),e("p",G,c(d(n).username),1)]),e("div",J,[K,p(e("input",{type:"password","onUpdate:modelValue":a[1]||(a[1]=o=>d(t).password=o)},null,512),[[h,d(t).password]]),e("p",Q,c(d(n).password),1)]),e("div",R,[W,p(e("select",{"onUpdate:modelValue":a[2]||(a[2]=o=>d(t).hak_akses=o)},Y,512),[[x,d(t).hak_akses]]),e("p",Z,c(d(n).hak_akses),1)]),e("div",ee,[te,p(e("select",{"onUpdate:modelValue":a[3]||(a[3]=o=>d(t).is_active=o)},se,512),[[x,d(t).is_active]]),e("p",de,c(d(n).is_active),1)])])]),e("div",le,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[4]||(a[4]=o=>i.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[5]||(a[5]=$(o=>y(),["prevent"]))}," Save ")])])])],512)),[[I,i.show]])}}},fe=D(ie,[["__scopeId","data-v-1d0dd17d"]]);export{fe as default};
