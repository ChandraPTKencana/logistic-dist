import J from"./Header.3de5f5a1.js";import q from"./Calendar.9fee579a.js";import R from"./CarTag.aacb0dd4.js";import W from"./TruckDriver.8850eb8d.js";import Q from"./LocationOn.c24c3c0b.js";import{_ as X}from"./HeaderPopup.vue.5e43446c.js";import Z from"./GAPIN.ca5c52a7.js";import{f as ee,g as te,r as u,i as se,G as oe,j as ae,c as i,b as m,a as e,m as b,v as le,k as t,n as ne,F as re,y as ie,J as j,t as a,l as p,z as ce,A as g,B as T,o as c,d as P,E as de}from"./entry.44d5fc3d.js";import"./useUtils.f69303a2.js";import{u as M}from"./useMyFetch.7cc1a605.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.5282973f.js";const _e={class:"w-full h-full flex flex-col relative"},ue={class:"grow flex flex-col"},xe={class:"w-full flex items-center p-1"},fe={class:"grow"},me={class:"grow overflow-auto h-0"},pe={class:"p-1 grow"},ve={class:"bg-white flex py-2 justify-between"},he={class:"flex flex-wrap"},ge={class:"flex items-center justify-center m-2 text-xs"},ye={class:"bg-blue-400 p-2 font-bold text-white"},be={class:"flex flex-col m-2"},we=e("span",{class:"text-xs"}," Tgl Terima Uang ",-1),ke={class:"flex items-center justify-center"},Ye={class:"flex flex-col m-2"},De=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),je={class:"flex items-center justify-center"},Te=["data-real"],Me={class:"flex flex-col m-2"},Ce=e("span",{class:"text-xs"}," Nama Pekerja ",-1),Ae={class:"flex items-center justify-center"},He=["data-real"],Le={class:"flex flex-col m-2"},$e=e("span",{class:"text-xs"}," Tujuan ",-1),Ne={class:"flex items-center justify-center"},Pe=["onClick"],Se={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Ve={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},Be={class:"p-1 flex flex-wrap overflow-auto items-start"},Ie={class:"w-full flex flex-wrap"},ze={class:"w-full flex flex-wrap"},Fe={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},Ke=e("span",{class:"text-xs font-bold"}," ID ",-1),Ue={class:""},Ee={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Oe=e("span",{class:"text-xs font-bold"}," Tgl Terima Uang ",-1),Ge={class:""},Je={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},qe=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),Re={class:""},We={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Qe={class:"flex flex-col"},Xe=e("span",{class:"text-xs font-bold"}," Nama Pekerja ",-1),Ze={class:""},et={class:"flex flex-col pl-2"},tt=e("span",{class:"text-xs font-bold"}," No rek ",-1),st={class:""},ot={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},at=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),lt={class:""},nt={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},rt=e("span",{class:"text-xs font-bold"}," Jenis ",-1),it={class:""},ct={key:0,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},dt=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),_t={class:""},ut={class:"w-full flex flex-wrap justify-center"},xt={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ft=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),mt={class:"text-xs"},pt={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},vt=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),ht={class:"text-xs"},gt={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},yt=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),bt={class:"text-xs"},wt={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},kt=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),Yt={class:"text-xs"},Dt={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},jt=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),Tt={class:"text-xs"},Mt={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ct=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),At={class:"text-xs"},Ht={class:"flex p-1 justify-end flex-wrap"},Lt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},$t=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),qt={__name:"transfer",async setup(Nt){let y,C;const{$moment:x}=de(),w=ee("token");new Date().getTimezoneOffset();const{data:S}=([y,C]=te(async()=>ce(async()=>{g().loading_full=!0;let l=[];const[o,r]=await Promise.all([M("/extra_money_trx/transfers",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},retry:0})]);return o.status.value==="error"?(T().trigger(o.error),{extra_money_trxs:l}):(g().loading_full=!1,l=o.data.value.data,{extra_money_trxs:l})},"$0Pi8hCNVwD")),y=await y,C(),y),k=u(S.value.extra_money_trxs||[]),Y=u({}),s=u({id:-1,tanggal:new Date,extra_money:{xto:"",tipe:"",jenis:"",amount:0},employee:"",kernet:"",no_pol:"",details_uj:[]}),D=u(-1),f=u(""),V=async l=>{g().loading_full=!0;const{data:o,error:r,status:d}=await M("/extra_money_trx/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:l.id},retry:0});if(g().loading_full=!1,d.value==="error"){T().trigger(r,Y);return}s.value=o.value.data},B=async()=>{g().loading_full=!0,Y.value={};const l=new FormData;l.append("id",s.value.id),l.append("_method","PUT");let o="post";const{data:r,error:d,status:_}=await M("/extra_money_trx/transfer",{method:o,headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},body:l,retry:0});if(g().loading_full=!1,_.value==="error"){T().trigger(d,Y);return}k.value.splice(D.value,1),D.value=-1,h.value=!1,v.value=!1},v=u(!1),I=u(0),h=u(!1);se();const z=(l,o)=>{D.value=l,I.value=o,v.value=!0,V(o)},A=oe(()=>f.value!=""?k.value.filter(l=>l.no_pol.toLowerCase().includes(f.value.toLowerCase())||l.employee.toLowerCase().includes(f.value.toLowerCase())||l.kernet.toLowerCase().includes(f.value.toLowerCase())):k.value),F=()=>{let l=f.value;document.querySelectorAll(".to_hl").forEach(o=>{let r=o.dataset.real;var d=o.innerHTML,_=r.toLowerCase().indexOf(l.toLowerCase());_>-1&&l!=""?(d=r.substring(0,_)+"<span class='highlight'>"+r.substring(_,_+l.length)+"</span>"+r.substring(_+l.length),o.innerHTML=d):o.innerHTML=d=r})};ae(()=>A,(l,o)=>{setTimeout(()=>{F()},0)},{deep:!0,immediate:!0});const H=u(0);return(l,o)=>{var L;const r=J,d=q,_=R,K=W,U=Q,E=X,O=Z;return c(),i("div",_e,[m(r,{title:"List Transaction"}),e("section",ue,[e("div",xe,[e("div",fe,[b(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>ne(f)?f.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[le,t(f)]])])]),e("div",me,[(c(!0),i(re,null,ie(t(A),(n,G)=>{var $,N;return c(),i("div",pe,[e("div",ve,[e("div",he,[e("div",ge,[e("div",ye,a(n.id),1)]),e("div",be,[we,e("div",ke,[m(d,{class:"mr-1"}),P(" "+a(t(x)(n.tanggal).format("DD-MM-YYYY")),1)])]),e("div",Ye,[De,e("div",je,[m(_,{class:"mr-1"}),e("span",{class:"to_hl","data-real":n.no_pol},a(n.no_pol),9,Te)])]),e("div",Me,[Ce,e("div",Ae,[m(K,{class:"mr-1"}),e("span",{class:"to_hl","data-real":($=n.employee)==null?void 0:$.name},a((N=n.employee)==null?void 0:N.name),9,He)])]),e("div",Le,[$e,e("div",Ne,[m(U,{class:"mr-1"}),P(" "+a(n.extra_money.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:Pt=>z(G,n)}," Detail ",8,Pe)])])}),256))])]),b(e("div",Se,[e("div",Ve,[m(E,{title:"Detail Information",fn:()=>{v.value=!1,h.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Be,[e("div",Ie,[e("div",ze,[e("div",Fe,[Ke,e("div",Ue,a(t(s).id),1)]),e("div",Ee,[Oe,e("div",Ge,a(t(x)(t(s).tanggal).format("DD-MM-YYYY")),1)]),e("div",Je,[qe,e("div",Re,a(t(s).no_pol),1)]),e("div",We,[e("div",Qe,[Xe,e("div",Ze,a((L=t(s).employee)==null?void 0:L.name),1)]),e("div",et,[tt,e("div",st,a(t(s).employee_rek_no),1)])]),e("div",ot,[at,e("div",lt,a(t(s).extra_money.xto),1)]),e("div",nt,[rt,e("div",it,a(t(s).extra_money.jenis),1)]),t(s).extra_money.transition_type=="From"?(c(),i("div",ct,[dt,e("div",_t,a(t(s).extra_money.transition_target),1)])):p("",!0)]),e("div",ut,[t(s).val?(c(),i("div",xt,[ft,e("div",null," ( "+a(t(s).val_by.username)+" ) ",1),e("div",mt,a(t(x)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val1?(c(),i("div",pt,[vt,e("div",null," ( "+a(t(s).val1_by.username)+" ) ",1),e("div",ht,a(t(x)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val2?(c(),i("div",gt,[yt,e("div",null," ( "+a(t(s).val2_by.username)+" ) ",1),e("div",bt,a(t(x)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val3?(c(),i("div",wt,[kt,e("div",null," ( "+a(t(s).val3_by.username)+" ) ",1),e("div",Yt,a(t(x)(t(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val4?(c(),i("div",Dt,[jt,e("div",null," ( "+a(t(s).val4_by.username)+" ) ",1),e("div",Tt,a(t(x)(t(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val5?(c(),i("div",Mt,[Ct,e("div",null," ( "+a(t(s).val5_by.username)+" ) ",1),e("div",At,a(t(x)(t(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0)])])]),b(e("div",Ht,[e("button",{class:"rounded m-1",onClick:o[1]||(o[1]=n=>v.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[2]||(o[2]=n=>h.value=!0)}," Transfer ")],512),[[j,!t(h)]]),b(e("div",Lt,[$t,e("button",{class:"rounded m-1 bg-white",onClick:o[3]||(o[3]=n=>(h.value=!1,v.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[4]||(o[4]=n=>B())}," Ya ")],512),[[j,t(h)]])])],512),[[j,t(v)]]),m(O,{show:t(H),onSetTimeout:o[5]||(o[5]=n=>H.value=n)},null,8,["show"])])}}};export{qt as default};
