import G from"./Header.0d7146f9.js";import W from"./Calendar.086cfe36.js";import Q from"./CarTag.33018de1.js";import X from"./TruckDriver.79ea2d67.js";import Z from"./TruckDriverOutline.276c03e0.js";import tt from"./LocationOn.dbca6316.js";import{_ as st}from"./HeaderPopup.vue.3ec630e5.js";import et from"./GAPIN.aa731398.js";import{f as ot,g as at,r as f,i as nt,G as lt,j as it,c as i,b as m,a as t,m as k,v as rt,k as s,n as ct,F as N,y as S,J as j,t as a,l as d,z as dt,A as y,B as A,o as r,d as I,E as _t}from"./entry.a1e5190e.js";import{u as ut}from"./useUtils.f2a2cb47.js";import{u as C}from"./useMyFetch.7a853bd2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.7f222972.js";const ft={class:"w-full h-full flex flex-col relative"},xt={class:"grow flex flex-col"},pt={class:"w-full flex items-center p-1"},mt={class:"grow"},ht={class:"grow overflow-auto h-0"},vt={class:"p-1 grow"},gt={class:"bg-white flex py-2 justify-between"},yt={class:"flex flex-wrap"},wt={class:"flex items-center justify-center m-2 text-xs"},bt={class:"bg-blue-400 p-2 font-bold text-white"},kt={class:"flex flex-col m-2"},Yt=t("span",{class:"text-xs"}," Tgl Terima U.Jalan ",-1),Dt={class:"flex items-center justify-center"},Tt={class:"flex flex-col m-2"},Mt=t("span",{class:"text-xs"}," Nomor Kendaraan ",-1),jt={class:"flex items-center justify-center"},At=["data-real"],Ct={class:"flex flex-col m-2"},Ht=t("span",{class:"text-xs"}," Nama Supir ",-1),Lt={class:"flex items-center justify-center"},$t=["data-real"],Nt={key:0,class:"flex flex-col m-2"},St=t("span",{class:"text-xs"}," Nama Kernet ",-1),It={class:"flex items-center justify-center"},Bt=["data-real"],Vt={class:"flex flex-col m-2"},Kt=t("span",{class:"text-xs"}," Tujuan ",-1),Pt={class:"flex items-center justify-center"},Ut=["onClick"],zt={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Ft={class:"w-full sm:w-10/12 md:w-10/12 lg:w-6/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full",style:{"border-width":"1px"}},Rt={class:"p-1 flex flex-wrap overflow-auto items-start"},Jt={class:"w-full sm:w-1/2 flex flex-wrap"},qt={class:"flex flex-col m-2"},Et=t("span",{class:"text-xs font-bold"}," ID ",-1),Ot={class:""},Gt={class:"flex flex-col m-2"},Wt=t("span",{class:"text-xs font-bold"}," Tgl Terima U.Jalan ",-1),Qt={class:""},Xt={class:"flex flex-col m-2"},Zt=t("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),ts={class:""},ss={class:"flex flex-col m-2"},es=t("span",{class:"text-xs font-bold"}," Nama Supir ",-1),os={class:""},as={key:0,class:"flex flex-col m-2"},ns=t("span",{class:"text-xs font-bold"}," Nama Kernet ",-1),ls={class:""},is={class:"flex flex-col m-2"},rs=t("span",{class:"text-xs font-bold"}," Tujuan ",-1),cs={class:""},ds={class:"flex flex-col m-2"},_s=t("span",{class:"text-xs font-bold"}," Tipe ",-1),us={class:""},fs={class:"flex flex-col m-2"},xs=t("span",{class:"text-xs font-bold"}," Jenis ",-1),ps={class:""},ms={key:1,class:"flex flex-col m-2"},hs=t("span",{class:"text-xs font-bold"}," Pengalihan ",-1),vs={class:""},gs={class:"w-full flex flex-wrap"},ys={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},ws=t("span",{class:"text-xs font-bold"}," App Kasir ",-1),bs={class:"text-xs"},ks={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ys=t("span",{class:"text-xs font-bold"}," App Mandor ",-1),Ds={class:"text-xs"},Ts={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ms=t("span",{class:"text-xs font-bold"}," App KTU/W ",-1),js={class:"text-xs"},As={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Cs=t("span",{class:"text-xs font-bold"}," App Marketing ",-1),Hs={class:"text-xs"},Ls={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},$s=t("span",{class:"text-xs font-bold"}," App Logistik ",-1),Ns={class:"text-xs"},Ss={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Is=t("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),Bs={class:"text-xs"},Vs={class:"w-full sm:w-1/2 text-sm flex justify-center"},Ks={class:"border border-collapse border-black"},Ps=t("tr",null,[t("th",{colspan:"4",class:"bg-blue-400"}," List Uang Jalan ")],-1),Us={class:"p-1"},zs={class:"p-1"},Fs=t("td",{class:"p-1"},"= Rp.",-1),Rs={class:"text-right p-1"},Js={class:"border-t-black border-dashed",style:{"border-top-width":"1px"}},qs=t("th",{colspan:"2",class:"text-right"},"Total",-1),Es=t("th",{class:"p-1 text-right"},"Rp.",-1),Os={class:"p-1 text-right"},Gs={key:0,class:"text-red-500 font-bold"},Ws=t("td",{colspan:"2",class:"text-right"},"Potongan",-1),Qs=t("td",{class:"p-1 text-right"},"Rp.",-1),Xs={class:"p-1 text-right"},Zs={key:1,class:"font-bold"},te=t("td",{colspan:"2",class:"text-right"},"Total Diterima",-1),se=t("td",{class:"p-1 text-right"},"Rp.",-1),ee={class:"p-1 text-right"},oe={class:"flex p-1 justify-end flex-wrap"},ae={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},ne=t("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),we={__name:"transfer",async setup(le){let w,H;const{$moment:x}=_t(),{pointFormat:h}=ut(),Y=ot("token");new Date().getTimezoneOffset();const{data:B}=([w,H]=at(async()=>dt(async()=>{y().loading_full=!0;let l=[];const[o,c]=await Promise.all([C("/trx_trp/transfers",{method:"get",headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},retry:0})]);return o.status.value==="error"?(A().trigger(o.error),{trx_trps:l}):(y().loading_full=!1,l=o.data.value.data,{trx_trps:l})},"$pIgiM26TjW")),w=await w,H(),w),D=f(B.value.trx_trps||[]),T=f({}),e=f({id:-1,tanggal:new Date,xto:"",tipe:"",jenis:"",amount:0,supir:"",kernet:"",no_pol:"",details_uj:[]}),M=f(-1),p=f(""),V=async l=>{y().loading_full=!0;const{data:o,error:c,status:_}=await C("/trx_trp/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},params:{id:l.id},retry:0});if(y().loading_full=!1,_.value==="error"){A().trigger(c,T);return}e.value=o.value.data},K=async()=>{y().loading_full=!0,T.value={};const l=new FormData;l.append("id",e.value.id),l.append("_method","PUT");let o="post";const{data:c,error:_,status:u}=await C("/trx_trp/transfer",{method:o,headers:{Authorization:`Bearer ${Y.value}`,Accept:"application/json"},body:l,retry:0});if(y().loading_full=!1,u.value==="error"){A().trigger(_,T);return}D.value.splice(M.value,1),M.value=-1,g.value=!1,v.value=!1},v=f(!1),P=f(0),g=f(!1);nt();const U=(l,o)=>{M.value=l,P.value=o,v.value=!0,V(o)},L=lt(()=>p.value!=""?D.value.filter(l=>l.no_pol.toLowerCase().includes(p.value.toLowerCase())||l.supir.toLowerCase().includes(p.value.toLowerCase())||l.kernet.toLowerCase().includes(p.value.toLowerCase())):D.value),b=l=>l.potongan&&l.potongan.length>0?l.potongan.map(o=>o.nominal_cut).reduce((o,c)=>(o+=c,o)):0,z=()=>{let l=p.value;document.querySelectorAll(".to_hl").forEach(o=>{let c=o.dataset.real;var _=o.innerHTML,u=c.toLowerCase().indexOf(l.toLowerCase());u>-1&&l!=""?(_=c.substring(0,u)+"<span class='highlight'>"+c.substring(u,u+l.length)+"</span>"+c.substring(u+l.length),o.innerHTML=_):o.innerHTML=_=c})};it(()=>L,(l,o)=>{setTimeout(()=>{z()},0)},{deep:!0,immediate:!0});const $=f(0);return(l,o)=>{const c=G,_=W,u=Q,F=X,R=Z,J=tt,q=st,E=et;return r(),i("div",ft,[m(c,{title:"List Transaction"}),t("section",xt,[t("div",pt,[t("div",mt,[k(t("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>ct(p)?p.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[rt,s(p)]])])]),t("div",ht,[(r(!0),i(N,null,S(s(L),(n,O)=>(r(),i("div",vt,[t("div",gt,[t("div",yt,[t("div",wt,[t("div",bt,a(n.id),1)]),t("div",kt,[Yt,t("div",Dt,[m(_,{class:"mr-1"}),I(" "+a(s(x)(n.tanggal).format("DD-MM-YYYY")),1)])]),t("div",Tt,[Mt,t("div",jt,[m(u,{class:"mr-1"}),t("span",{class:"to_hl","data-real":n.no_pol},a(n.no_pol),9,At)])]),t("div",Ct,[Ht,t("div",Lt,[m(F,{class:"mr-1"}),t("span",{class:"to_hl","data-real":n.supir},a(n.supir),9,$t)])]),n.kernet?(r(),i("div",Nt,[St,t("div",It,[m(R,{class:"mr-1"}),t("span",{class:"to_hl","data-real":n.kernet},a(n.kernet),9,Bt)])])):d("",!0),t("div",Vt,[Kt,t("div",Pt,[m(J,{class:"mr-1"}),I(" "+a(n.xto),1)])])]),t("button",{class:"bg-blue-500 text-white rounded",onClick:ie=>U(O,n)}," Detail ",8,Ut)])]))),256))])]),k(t("div",zt,[t("div",Ft,[m(q,{title:"Detail Information",fn:()=>{v.value=!1,g.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("div",Rt,[t("div",Jt,[t("div",qt,[Et,t("div",Ot,a(s(e).id),1)]),t("div",Gt,[Wt,t("div",Qt,a(s(x)(s(e).tanggal).format("DD-MM-YYYY")),1)]),t("div",Xt,[Zt,t("div",ts,a(s(e).no_pol),1)]),t("div",ss,[es,t("div",os,a(s(e).supir),1)]),s(e).kernet?(r(),i("div",as,[ns,t("div",ls,a(s(e).kernet),1)])):d("",!0),t("div",is,[rs,t("div",cs,a(s(e).xto),1)]),t("div",ds,[_s,t("div",us,a(s(e).tipe),1)]),t("div",fs,[xs,t("div",ps,a(s(e).jenis),1)]),s(e).transition_type=="From"?(r(),i("div",ms,[hs,t("div",vs,a(s(e).transition_target),1)])):d("",!0),t("div",gs,[s(e).val?(r(),i("div",ys,[ws,t("div",null," ( "+a(s(e).val_by.username)+" ) ",1),t("div",bs,a(s(x)(s(e).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0),s(e).val1?(r(),i("div",ks,[Ys,t("div",null," ( "+a(s(e).val1_by.username)+" ) ",1),t("div",Ds,a(s(x)(s(e).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0),s(e).val2?(r(),i("div",Ts,[Ms,t("div",null," ( "+a(s(e).val2_by.username)+" ) ",1),t("div",js,a(s(x)(s(e).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0),s(e).val3?(r(),i("div",As,[Cs,t("div",null," ( "+a(s(e).val3_by.username)+" ) ",1),t("div",Hs,a(s(x)(s(e).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0),s(e).val4?(r(),i("div",Ls,[$s,t("div",null," ( "+a(s(e).val4_by.username)+" ) ",1),t("div",Ns,a(s(x)(s(e).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0),s(e).val5?(r(),i("div",Ss,[Is,t("div",null," ( "+a(s(e).val5_by.username)+" ) ",1),t("div",Bs,a(s(x)(s(e).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):d("",!0)])]),t("div",Vs,[t("table",Ks,[Ps,(r(!0),i(N,null,S(s(e).details_uj,n=>(r(),i("tr",null,[t("td",Us,a(n.ordinal)+". ",1),t("td",zs,a(n.xdesc)+" "+a(n.qty<=1?"":s(h)(n.qty||0)+" x Rp."+s(h)(n.harga||0)),1),Fs,t("td",Rs,a(s(h)(n.qty*n.harga)),1)]))),256)),t("tr",Js,[qs,Es,t("th",Os,a(s(h)(s(e).amount)),1)]),b(s(e))>0?(r(),i("tr",Gs,[Ws,Qs,t("td",Xs,a(s(h)(b(s(e)))),1)])):d("",!0),b(s(e))>0?(r(),i("tr",Zs,[te,se,t("td",ee,a(s(h)(s(e).amount-b(s(e)))),1)])):d("",!0)])])]),k(t("div",oe,[t("button",{class:"rounded m-1",onClick:o[1]||(o[1]=n=>v.value=!1)}," Cancel "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[2]||(o[2]=n=>g.value=!0)}," Transfer ")],512),[[j,!s(g)]]),k(t("div",ae,[ne,t("button",{class:"rounded m-1 bg-white",onClick:o[3]||(o[3]=n=>(g.value=!1,v.value=!1))}," Tidak "),t("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[4]||(o[4]=n=>K())}," Ya ")],512),[[j,s(g)]])])],512),[[j,s(v)]]),m(E,{show:s($),onSetTimeout:o[5]||(o[5]=n=>$.value=n)},null,8,["show"])])}}};export{we as default};
