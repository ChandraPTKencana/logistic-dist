import{_ as pt}from"./Header.81a6df34.js";import{_ as Be}from"./Plus.18b443b5.js";import{_ as vt}from"./Edit.a4c9e6b0.js";import{_ as ft}from"./Eyes.5569c390.js";import{_ as mt}from"./Delete.d73c3714.js";import{_ as bt}from"./Void.94a5b026.js";import{_ as yt}from"./Signature.8bc8e5e5.js";import{_ as xt}from"./PrinterEye.0d395d6b.js";import{_ as wt}from"./Line.dec4d95b.js";import{_ as ht}from"./Check.1afdfca7.js";import{_ as gt}from"./TableView.0b4c2b46.js";import{_ as kt}from"./PopupMini.vue.5da55f48.js";import{_ as Fe}from"./HeaderPopup.vue.cdec7e05.js";import{_ as $t,a as Dt}from"./ToolsPopup.bc8bb10a.js";import{_ as Ct}from"./client-only.5bb6526a.js";import{r as f,f as Ce,H as Se,J as L,g as _e,x as y,M as At,o as u,c as m,h as N,v as Ye,a as e,b as $,k as t,j as X,F as K,n as ae,t as n,l as Pe,G as q,w as F,m as Re,y as U,p as Ue,e as Ee,s as Ve,D as Tt,I as qt,i as qe,d as H,q as St,E as Pt,L as de,N as Vt}from"./entry.f98cb9f4.js";import{u as Oe}from"./useUtils.59d59017.js";import{u as E}from"./useMyFetch.263c1627.js";import{_ as Ie}from"./_plugin-vue_export-helper.c27b6911.js";import{u as Ot}from"./useDownload.737fa5e3.js";import"./Search.7198a3ab.js";import"./Times.710f2bbf.js";const x=A=>(Ue("data-v-99d5aa45"),A=A(),Ee(),A),jt={class:"box-fixed"},Mt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Nt={class:"w-full flex flex-col items-center grow overflow-auto"},Bt={class:"w-full flex flex-row flex-wrap"},Ft={class:"w-full sm:w-9/12 flex px-2 py-3"},Yt={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Rt=x(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),Ut={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},Et=x(()=>e("label",{for:""},"ID",-1)),It=["disabled"],zt={id:"standby_mst"},Ht=["value"],Lt={class:"text-red-500"},Kt={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Jt=x(()=>e("label",{for:""},"Name",-1)),Gt={class:"card-border disabled"},Xt={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Zt=x(()=>e("label",{for:""},"Type",-1)),Qt={class:"card-border disabled"},Wt={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},el=x(()=>e("label",{for:""},"Amount",-1)),tl={class:"card-border disabled"},ll={class:"w-full sm:w-3/12 flex px-2 py-3"},al={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},sl=x(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ol={class:"w-6/12 flex flex-col flex-wrap p-1"},nl=["disabled"],dl=x(()=>e("option",{value:""},null,-1)),il=x(()=>e("option",{value:"From"},"Dari",-1)),rl=x(()=>e("option",{value:"To"},"Ke",-1)),_l=[dl,il,rl],ul={class:"text-red-500"},cl={class:"w-6/12 flex flex-col flex-wrap p-1"},pl=["disabled"],vl=x(()=>e("option",{value:""},null,-1)),fl=["value"],ml={class:"text-red-500"},bl={class:"w-full flex flex-wrap"},yl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},xl=x(()=>e("label",{for:""},"Supir",-1)),wl=["disabled"],hl={id:"supir"},gl=["value"],kl={class:"text-red-500"},$l={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Dl=x(()=>e("label",{for:""},"Kernet",-1)),Cl=["disabled"],Al={id:"kernet"},Tl=["value"],ql={class:"text-red-500"},Sl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Pl=x(()=>e("label",{for:""},"No Pol",-1)),Vl=["disabled"],Ol={id:"vehicle"},jl=["value"],Ml={class:"text-red-500"},Nl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Bl=x(()=>e("label",{for:""},"Tujuan",-1)),Fl=["disabled"],Yl={id:"xto"},Rl={class:"text-red-500"},Ul={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},El=x(()=>e("label",{for:""},"Note For Remarks",-1)),Il=["disabled"],zl={class:"text-red-500"},Hl={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ll=x(()=>e("label",{for:""},"Referensi",-1)),Kl=["disabled"],Jl={class:"text-red-500"},Gl={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Xl={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Zl=x(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),Ql={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Wl=x(()=>e("label",{for:""}," Code",-1)),ea=["disabled"],ta={id:"cost_center"},la=["value"],aa={class:"text-red-500"},sa={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},oa=x(()=>e("label",{for:""},"Desc",-1)),na={class:"card-border disabled"},da={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ia={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ra=x(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),_a={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},ua=x(()=>e("label",{for:""},"No",-1)),ca={class:"card-border disabled"},pa={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},va=x(()=>e("label",{for:""},"Total",-1)),fa={class:"card-border disabled"},ma={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},ba={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ya=x(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),xa={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},wa=x(()=>e("label",{for:""},"No",-1)),ha={class:"card-border disabled"},ga={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ka=x(()=>e("label",{for:""},"Total",-1)),$a={class:"card-border disabled"},Da={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},Ca={class:"w-full",role:"sticky"},Aa={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Ta={class:"sticky -top-1 !z-[2]"},qa=["colspan"],Sa={class:"sticky top-7 !z-[2]"},Pa={key:0,class:"!min-w-[30px] !w-[30px] !max-w-[30px]"},Va=x(()=>e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No",-1)),Oa=x(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal",-1)),ja=x(()=>e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan",-1)),Ma={ref:"to_move"},Na=["data-index"],Ba={key:0,class:"tools cell"},Fa={class:"w-full h-full flex items-center justify-center"},Ya=["onClick"],Ra={class:"cell"},Ua={class:"w-full h-full flex items-center justify-center relative"},Ea={class:"cell"},Ia={class:"w-full h-full flex items-center justify-center"},za=["disabled","onUpdate:modelValue"],Ha={key:0},La={class:"tools cell"},Ka={class:"w-full flex items-center justify-end"},Ja={__name:"standby_trx",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnLoadDBData:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},list_cost_center:{type:Array,required:!0,default:[]},online_status:{type:Boolean,required:!0,default:!1}},setup(A){const w=A,{$moment:Q}=Ve(),{pointFormat:J}=Oe(),ie={id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0,is_transition:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[]},o=f([]),W=f({ordinal:0,id:"",tanggal:new Date,note:"",p_status:""});let S={...ie};const l=f({...ie}),Z=Ce("token"),T=f({});Se();const I=async()=>{y().loading_full=!0,T.value={};const d=new FormData;d.append("transition_target",l.value.transition_target),d.append("transition_type",l.value.transition_type),d.append("standby_mst_id",l.value.standby_mst_id),d.append("supir",l.value.supir),d.append("kernet",l.value.kernet),d.append("no_pol",l.value.no_pol),d.append("xto",l.value.xto),d.append("note_for_remarks",l.value.note_for_remarks),d.append("ref",l.value.ref),d.append("cost_center_code",l.value.cost_center_code),d.append("online_status",w.online_status);let c=[...o.value];c=c.map(z=>(z.tanggal=z.tanggal?Q(z.tanggal).format("Y-MM-DD"):"",z)),d.append("details",JSON.stringify(c));let V="post",Y=w.id;Y==0||(d.append("id",Y),d.append("_method","PUT"));const{data:R,error:fe,status:me}=await E("/standby_trx",{method:V,headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},body:d,retry:0});if(y().loading_full=!1,me.value==="error"){U().trigger(fe,T);return}if(l.value.updated_at=R.value.updated_at,w.id<=0)l.value.id=R.value.id,l.value.created_at=R.value.created_at,w.p_data.unshift(l.value);else{let z=w.p_data.map(re=>re.id).indexOf(w.id);z>=-1&&w.p_data.splice(z,1,{...l.value})}w.fnClose()},pe=L(()=>[...new Set(M.value.filter(d=>d.role=="Supir"))]),h=L(()=>[...new Set(M.value.filter(d=>d.role=="Kernet"))]),D=L(()=>!1),_=async()=>{y().loading_full=!0;const{data:d,error:c,status:V}=await E("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(y().loading_full=!1,V.value==="error"){U().trigger(c);return}l.value=d.value.data,S={...d.value.data};let Y="Edit";o.value=d.value.data.details.map(R=>(R.p_status=Y,R.key=R.ordinal,R))},k=f([]),j=f([]),ee=f([]),M=f([]),i=async()=>{y().loading_full=!0;const{data:d,error:c,status:V}=await E("/standby_trx_load_local",{method:"get",headers:{Authorization:`Bearer ${Z.value}`,Accept:"application/json"},retry:0});if(y().loading_full=!1,V.value==="error"){U().trigger(c);return}k.value=d.value.list_standby_mst,j.value=d.value.list_xto,ee.value=d.value.list_vehicle,M.value=d.value.list_employee},b=f(-1),B=f(!1),xe=f({left:0,top:0}),we=(d,c)=>{b.value=c,B.value=!0,xe.value={left:d.clientX,top:d.clientY}},he=()=>{o.value.push({...W.value,p_status:"Add"})},ue=()=>{B.value=!1},ve=(d="")=>{if(d=="insert")o.value.splice(b.value,0,{...W.value,p_status:"Add"});else if(d=="delete")o.value[b.value].p_status=="Edit"?o.value[b.value].p_status="Remove":o.value.splice(b.value,1);else if(d=="move_top"){let c=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value-1,0,{...c})}else if(d=="move_bottom"){let c=o.value[b.value];o.value.splice(b.value,1),o.value.splice(b.value+1,0,{...c})}B.value=!1};_e(()=>w.show,async(d,c)=>{d==!0&&(await i(),await w.fnLoadDBData(),T.value={},l.value={...ie},o.value=[],w.id!=0&&_())},{immediate:!0});let Ae={name:"",tipe:"",amount:0,is_transition:0};return _e(()=>l.value.standby_mst_id,(d,c)=>{if(y().loading_full==!1&&(d==""||d!="")){let V=k.value.filter(Y=>Y.id==d);V.length>0?l.value.standby_mst_={...V[0]}:l.value.standby_mst_id==S.standby_mst_id?l.value.standby_mst_={...S.standby_mst_}:l.value.standby_mst_={...Ae},l.value.standby_mst_.is_transition||(l.value.transition_target="",l.value.transition_type="")}},{}),_e(()=>l.value.cost_center_code,(d,c)=>{if(d==""&&(l.value.cost_center_desc=""),d){let V=w.list_cost_center.filter(Y=>Y.CostCenter==d);V.length>0?l.value.cost_center_desc=V[0].Description:l.value.cost_center_code==S.cost_center_code&&(l.value.cost_center_desc=S.cost_center_desc)}},{deep:!0,immediate:!0}),(d,c)=>{var re,se,te,ge,ke;const V=Fe,Y=$t,R=At("vue-date-picker"),fe=Ct,me=Be,z=Dt;return u(),m(K,null,[N(e("section",jt,[e("div",null,[$(V,{title:"Form Transaction",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Mt,[e("div",Nt,[e("div",Bt,[e("div",Ft,[e("div",Yt,[Rt,e("div",Ut,[Et,N(e("input",{type:"text",list:"standby_mst","onUpdate:modelValue":c[0]||(c[0]=r=>t(l).standby_mst_id=r),disabled:t(l).pvr_no!=""},null,8,It),[[X,t(l).standby_mst_id]]),e("datalist",zt,[(u(!0),m(K,null,ae(t(k),r=>(u(),m("option",{value:r.id},n(r.name+"-"+r.tipe+"-"+t(J)(r.amount||0)),9,Ht))),256))]),e("p",Lt,n(t(T).standby_mst_id),1)]),e("div",Kt,[Jt,e("div",Gt,n((re=t(l).standby_mst_)==null?void 0:re.name),1)]),e("div",Xt,[Zt,e("div",Qt,n((se=t(l).standby_mst_)==null?void 0:se.tipe),1)]),e("div",Wt,[el,e("div",tl,n(t(J)((te=t(l).standby_mst_)==null?void 0:te.amount)),1)])])]),e("div",ll,[e("div",al,[sl,e("div",ol,[N(e("select",{"onUpdate:modelValue":c[1]||(c[1]=r=>t(l).transition_type=r),disabled:((ge=t(l).standby_mst_)==null?void 0:ge.is_transition)==0},_l,8,nl),[[Pe,t(l).transition_type]]),e("p",ul,n(t(T).transition_type),1)]),e("div",cl,[N(e("select",{"onUpdate:modelValue":c[2]||(c[2]=r=>t(l).transition_target=r),disabled:((ke=t(l).standby_mst_)==null?void 0:ke.is_transition)==0},[vl,(u(!0),m(K,null,ae(t(y)().list_pabrik,r=>(u(),m("option",{value:r},n(r),9,fl))),256))],8,pl),[[Pe,t(l).transition_target]]),e("p",ml,n(t(T).transition_target),1)])])]),e("div",bl,[e("div",yl,[xl,N(e("input",{type:"text",list:"supir","onUpdate:modelValue":c[3]||(c[3]=r=>t(l).supir=r),disabled:t(l).pvr_no!=""},null,8,wl),[[X,t(l).supir]]),e("datalist",hl,[(u(!0),m(K,null,ae(t(pe),r=>(u(),m("option",{value:r.name},n(r.name),9,gl))),256))]),e("p",kl,n(t(T).supir),1)]),e("div",$l,[Dl,N(e("input",{type:"text",list:"kernet","onUpdate:modelValue":c[4]||(c[4]=r=>t(l).kernet=r),disabled:t(l).pvr_no!=""},null,8,Cl),[[X,t(l).kernet]]),e("datalist",Al,[(u(!0),m(K,null,ae(t(h),r=>(u(),m("option",{value:r.name},n(r.name),9,Tl))),256))]),e("p",ql,n(t(T).kernet),1)]),e("div",Sl,[Pl,N(e("input",{type:"text",list:"vehicle","onUpdate:modelValue":c[5]||(c[5]=r=>t(l).no_pol=r),disabled:t(l).pvr_no!=""},null,8,Vl),[[X,t(l).no_pol]]),e("datalist",Ol,[(u(!0),m(K,null,ae(t(ee),r=>(u(),m("option",{value:r.no_pol},n(r.no_pol),9,jl))),256))]),e("p",Ml,n(t(T).no_pol),1)]),e("div",Nl,[Bl,N(e("input",{type:"text",list:"xto","onUpdate:modelValue":c[6]||(c[6]=r=>t(l).xto=r),disabled:t(l).pvr_no!=""},null,8,Fl),[[X,t(l).xto]]),e("datalist",Yl,[(u(!0),m(K,null,ae(t(j),r=>(u(),m("option",null,n(r),1))),256))]),e("p",Rl,n(t(T).xto),1)]),e("div",Ul,[El,N(e("textarea",{"onUpdate:modelValue":c[7]||(c[7]=r=>t(l).note_for_remarks=r),disabled:t(l).pvr_no!=""}," ",8,Il),[[X,t(l).note_for_remarks]]),e("p",zl,n(t(T).note_for_remarks),1)]),e("div",Hl,[Ll,N(e("input",{type:"text","onUpdate:modelValue":c[8]||(c[8]=r=>t(l).ref=r),disabled:t(l).pvr_no!=""},null,8,Kl),[[X,t(l).ref]]),e("p",Jl,n(t(T).ref),1)])]),e("div",Gl,[e("div",Xl,[Zl,e("div",Ql,[Wl,N(e("input",{list:"cost_center","onUpdate:modelValue":c[9]||(c[9]=r=>t(l).cost_center_code=r),disabled:t(l).pvr_no!=""},null,8,ea),[[X,t(l).cost_center_code]]),e("datalist",ta,[(u(!0),m(K,null,ae(A.list_cost_center,r=>(u(),m("option",{value:r.CostCenter},n(r.CostCenter+"-"+r.Description),9,la))),256))]),e("p",aa,n(t(T).cost_center_code),1)]),e("div",sa,[oa,e("div",na,n(t(l).cost_center_desc),1)])])]),e("div",da,[e("div",ia,[ra,e("div",_a,[ua,e("div",ca,n(t(l).pvr_no),1)]),e("div",pa,[va,e("div",fa,n(t(J)(t(l).pvr_total||0)),1)])])]),e("div",ma,[e("div",ba,[ya,e("div",xa,[wa,e("div",ha,n(t(l).pv_no),1)]),e("div",ga,[ka,e("div",$a,n(t(J)(t(l).pv_total)),1)])])]),e("div",Da,[e("div",Ca,[e("table",Aa,[e("thead",null,[e("tr",Ta,[e("td",{colspan:t(D)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,qa)]),e("tr",Sa,[t(D)?q("",!0):(u(),m("th",Pa)),Va,Oa,ja])]),e("tbody",Ma,[(u(!0),m(K,null,ae(t(o),(r,oe)=>(u(),m(K,{key:oe},[r.p_status!="Remove"?(u(),m("tr",{key:0,"data-index":oe},[t(D)?q("",!0):(u(),m("td",Ba,[e("div",Fa,[e("button",{type:"button",name:"button",onClick:ne=>we(ne,oe)},[$(Y)],8,Ya)])])),e("td",null,n(oe+1)+".",1),e("td",Ra,[e("div",Ua,[$(fe,null,{default:F(()=>[$(R,{modelValue:r.tanggal,"onUpdate:modelValue":ne=>r.tanggal=ne,type:"datetime",format:"dd-MM-yyyy","enable-time-picker":!1,"text-input":"","teleport-center":""},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024)])]),e("td",Ea,[e("div",Ia,[N(e("textarea",{disabled:t(D),class:"p-1 w-full","onUpdate:modelValue":ne=>r.note=ne,cols:"7",rows:"2"},null,8,za),[[X,r.note]])])])],8,Na)):q("",!0)],64))),128)),t(D)?q("",!0):(u(),m("tr",Ha,[e("td",La,[e("button",{type:"button",name:"button",onClick:c[10]||(c[10]=r=>he())},[$(me)])])]))],512)])])])])]),e("div",Ka,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:c[11]||(c[11]=r=>A.fnClose())}," Cancel "),t(D)?q("",!0):(u(),m("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:c[12]||(c[12]=Re(r=>I(),["prevent"]))}," Save "))])])])],512),[[Ye,A.show]]),$(z,{show:t(B),coor:t(xe),fn:ue,data:t(o),data_index:t(b),onReplyAct:c[13]||(c[13]=r=>ve(r))},null,8,["show","coor","data","data_index"])],64)}}},Ga=Ie(Ja,[["__scopeId","data-v-99d5aa45"]]);const g=A=>(Ue("data-v-06ba9b80"),A=A(),Ee(),A),Xa={class:"box-fixed"},Za={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Qa={class:"w-full flex flex-col items-center grow overflow-auto"},Wa={class:"w-full flex flex-row flex-wrap"},es={class:"w-full sm:w-9/12 flex px-2 py-3"},ts={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},ls=g(()=>e("div",{class:"absolute bg-white -top-3"}," Standby ",-1)),as={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ss=g(()=>e("label",{for:""},"ID",-1)),os={class:"card-border"},ns={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ds=g(()=>e("label",{for:""},"Name",-1)),is={class:"card-border"},rs={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},_s=g(()=>e("label",{for:""},"Type",-1)),us={class:"card-border"},cs={class:"w-6/12 sm:w-2/12 flex flex-col flex-wrap p-1"},ps=g(()=>e("label",{for:""},"Amount",-1)),vs={class:"card-border"},fs={class:"w-full sm:w-3/12 flex px-2 py-3"},ms={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},bs=g(()=>e("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),ys={class:"w-6/12 flex flex-col flex-wrap p-1"},xs={class:"card-border"},ws={class:"w-6/12 flex flex-col flex-wrap p-1"},hs={class:"card-border"},gs={class:"w-full flex flex-wrap"},ks={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},$s=g(()=>e("label",{for:""},"Supir",-1)),Ds={class:"card-border"},Cs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},As=g(()=>e("label",{for:""},"Kernet",-1)),Ts={class:"card-border"},qs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ss=g(()=>e("label",{for:""},"No Pol",-1)),Ps={class:"card-border"},Vs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Os=g(()=>e("label",{for:""},"Tujuan",-1)),js={class:"card-border"},Ms={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ns=g(()=>e("label",{for:""},"Note For Remarks",-1)),Bs={class:"card-border"},Fs={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Ys=g(()=>e("label",{for:""},"Referensi",-1)),Rs={class:"card-border"},Us={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Es={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Is=g(()=>e("div",{class:"absolute bg-white -top-3"}," Cost Center ",-1)),zs={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},Hs=g(()=>e("label",{for:""}," Code",-1)),Ls={class:"card-border"},Ks={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},Js=g(()=>e("label",{for:""},"Desc",-1)),Gs={class:"card-border disabled"},Xs={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},Zs={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},Qs=g(()=>e("div",{class:"absolute bg-white -top-3"}," PVR ",-1)),Ws={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},eo=g(()=>e("label",{for:""},"No",-1)),to={class:"card-border disabled"},lo={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},ao=g(()=>e("label",{for:""},"Total",-1)),so={class:"card-border disabled"},oo={class:"w-full sm:w-6/12 md:w-6/12 lg:w-4/12 flex px-2 py-3"},no={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative"},io=g(()=>e("div",{class:"absolute bg-white -top-3"}," PV ",-1)),ro={class:"w-6/12 sm:w-8/12 flex flex-col flex-wrap p-1"},_o=g(()=>e("label",{for:""},"No",-1)),uo={class:"card-border disabled"},co={class:"w-6/12 sm:w-4/12 flex flex-col flex-wrap p-1"},po=g(()=>e("label",{for:""},"Total",-1)),vo={class:"card-border disabled"},fo={class:"w-full flex grow p-1 overflow-auto 2xl:overflow-hidden justify-between flex-wrap"},mo={class:"w-full",role:"sticky"},bo={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},yo={class:"sticky -top-1 !z-[2]"},xo=["colspan"],wo=g(()=>e("tr",{class:"sticky top-7 !z-[2]"},[e("th",{class:"!min-w-[50px] !w-[50px] !max-w-[50px]"},"No"),e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Tanggal"),e("th",{class:"!min-w-[200px] !w-[200px] !max-w-[200px]"},"Keterangan")],-1)),ho={ref:"to_move"},go=["data-index"],ko={class:"cell"},$o={class:"w-full h-full flex items-center justify-center relative"},Do={class:"cell"},Co={class:"w-full h-full flex items-center justify-center"},Ao={class:"w-full flex items-center justify-end"},To={class:"w-full flex flex-wrap p-3 items-center"},qo=g(()=>e("div",null," Di Validasi oleh : ",-1)),So={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Po={key:0},Vo={key:1},Oo={key:2},jo={__name:"standby_trx_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(A){const w=A,{$moment:Q}=Ve(),{pointFormat:J}=Oe(),o=f({...{id:-1,transition_target:"",transition_type:"",standby_mst_id:"",standby_mst_:{name:"",tipe:"",amount:0},supir:"",kernet:"",no_pol:"",xto:"",note_for_remarks:"",ref:"",cost_center_code:"",cost_center_desc:"",pvr_id:"",pvr_no:"",pvr_total:0,pvr_had_detail:0,pv_id:"",pv_no:"",pv_total:0,pv_datetime:"",rv_id:"",rv_no:"",rv_total:0,rv_had_detail:"",details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:""}}),W=Ce("token"),S=f({}),l=f(null),Z=f([]),T=async()=>{y().loading_full=!0,S.value={};const h=new FormData;let D="post",_=w.id;_==0||(h.append("id",_),h.append("_method","PUT"));const{data:k,error:j,status:ee}=await E("/standby_trx_validasi",{method:D,headers:{Authorization:`Bearer ${W.value}`,Accept:"application/json"},body:h,retry:0});if(y().loading_full=!1,ee.value==="error"){U().trigger(j,S);return}o.value.val=k.value.val,o.value.val_user=k.value.val_user,o.value.val_by=k.value.val_by,o.value.val_at=k.value.val_at,o.value.val1=k.value.val1,o.value.val1_user=k.value.val1_user,o.value.val1_by=k.value.val1_by,o.value.val1_at=k.value.val1_at,o.value.val2=k.value.val2,o.value.val2_user=k.value.val2_user,o.value.val2_by=k.value.val2_by,o.value.val2_at=k.value.val2_at;let M=w.p_data.map(i=>i.id).indexOf(w.id);M>=-1&&w.p_data.splice(M,1,{...o.value}),w.fnClose()},I=async()=>{y().loading_full=!0;const{data:h,error:D,status:_}=await E("/standby_trx",{method:"get",headers:{Authorization:`Bearer ${W.value}`,Accept:"application/json"},params:{id:w.id},retry:0});if(y().loading_full=!1,_.value==="error"){U().trigger(D);return}o.value=h.value.data,Z.value=h.value.data.details};L(()=>{let h=0;return Z.value.forEach(D=>{D.p_status!="Remove"&&(h+=D.amount)}),h});const pe=L(()=>!1);return _e(()=>w.show,(h,D)=>{h==!0&&(w.is_view==!1&&setTimeout(()=>{l.value.focus()},1),I())},{immediate:!0}),(h,D)=>{var k,j,ee;const _=Fe;return N((u(),m("section",Xa,[e("div",null,[$(_,{title:"Form Transaction Standby Validation",fn:A.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Za,[e("div",Qa,[e("div",Wa,[e("div",es,[e("div",ts,[ls,e("div",as,[ss,e("div",os,n(t(o).standby_mst_id),1)]),e("div",ns,[ds,e("div",is,n((k=t(o).standby_mst_)==null?void 0:k.name),1)]),e("div",rs,[_s,e("div",us,n((j=t(o).standby_mst_)==null?void 0:j.tipe),1)]),e("div",cs,[ps,e("div",vs,n(t(J)((ee=t(o).standby_mst_)==null?void 0:ee.amount)),1)])])]),e("div",fs,[e("div",ms,[bs,e("div",ys,[e("div",xs,n(t(o).transition_type),1)]),e("div",ws,[e("div",hs,n(t(o).transition_target),1)])])]),e("div",gs,[e("div",ks,[$s,e("div",Ds,n(t(o).supir),1)]),e("div",Cs,[As,e("div",Ts,n(t(o).kernet),1)]),e("div",qs,[Ss,e("div",Ps,n(t(o).no_pol),1)]),e("div",Vs,[Os,e("div",js,n(t(o).xto),1)]),e("div",Ms,[Ns,e("div",Bs,n(t(o).note_for_remarks),1)]),e("div",Fs,[Ys,e("div",Rs,n(t(o).ref),1)])]),e("div",Us,[e("div",Es,[Is,e("div",zs,[Hs,e("div",Ls,n(t(o).cost_center_code),1)]),e("div",Ks,[Js,e("div",Gs,n(t(o).cost_center_desc),1)])])]),e("div",Xs,[e("div",Zs,[Qs,e("div",Ws,[eo,e("div",to,n(t(o).pvr_no),1)]),e("div",lo,[ao,e("div",so,n(t(J)(t(o).pvr_total||0)),1)])])]),e("div",oo,[e("div",no,[io,e("div",ro,[_o,e("div",uo,n(t(o).pv_no),1)]),e("div",co,[po,e("div",vo,n(t(J)(t(o).pv_total)),1)])])]),e("div",fo,[e("div",mo,[e("table",bo,[e("thead",null,[e("tr",yo,[e("td",{colspan:t(pe)?3:4,class:"!bg-slate-800 text-white font-bold"}," Detail Transaction ",8,xo)]),wo]),e("tbody",ho,[(u(!0),m(K,null,ae(t(Z),(M,i)=>(u(),m(K,{key:i},[M.p_status!="Remove"?(u(),m("tr",{key:0,"data-index":i},[e("td",null,n(i+1)+".",1),e("td",ko,[e("div",$o,n(t(Q)(M.tanggal).format("DD-MM-YYYY")),1)]),e("td",Do,[e("div",Co,n(M.note),1)])],8,go)):q("",!0)],64))),128))],512)])])])])]),e("div",Ao,[e("div",To,[qo,t(o).val||t(o).val1||t(o).val2?(u(),m("div",So,[t(o).val?(u(),m("div",Po," App 1 : "+n(t(o).val_by.username)+" ( "+n(t(o).val_at?t(Q)(t(o).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):q("",!0),t(o).val1?(u(),m("div",Vo," App 2 : "+n(t(o).val1_by.username)+" ( "+n(t(o).val1_at?t(Q)(t(o).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):q("",!0),t(o).val2?(u(),m("div",Oo," App 2 : "+n(t(o).val2_by.username)+" ( "+n(t(o).val2_at?t(Q)(t(o).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):q("",!0)])):q("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:D[0]||(D[0]=M=>A.fnClose())}," Cancel "),A.is_view==0?(u(),m("button",{key:0,ref_key:"it_val",ref:l,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:D[1]||(D[1]=Re(M=>T(),["prevent"]))}," Validasi ",512)):q("",!0)])])])],512)),[[Ye,A.show]])}}},Mo=Ie(jo,[["__scopeId","data-v-06ba9b80"]]),No={class:"w-full h-full flex flex-col"},Bo={class:"w-full flex grow flex-col overflow-auto h-0"},Fo={class:"w-full flex justify-between flex-wrap"},Yo={class:"grow flex"},Ro={class:"m-1"},Uo=Vt('<option value="trx_not_done">Undone</option><option value="trx_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Eo=[Uo],Io={key:0,class:"flex"},zo=e("span",{class:"text-xs"},"Mode",-1),Ho={class:"grow mb-5"},Lo=e("b",null,"tidak dapat dibatalkan lagi",-1),Ko={class:"grow mb-5"},Jo=e("b",null,"tidak dapat dibatalkan lagi",-1),yn={__name:"trx",async setup(A){let w,Q;const{$moment:J}=Ve(),{pointFormat:ie}=Oe(),o=a=>a.deleted==1?"!bg-red-400":a.pvr_id>0&&a.req_deleted==1?"!bg-yellow-300":a.pv_id>0?"!bg-blue-300":"",W=a=>(a.map(s=>{s.class_h=o(s)}),a),S=f("trx_not_done");_e(()=>S.value,a=>{Me.value.map(s=>{let C=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(s.key)>-1;return["all","deleted","req_deleted"].indexOf(a)>-1?C&&(s.tbl_show=1):C&&(s.tbl_show=0),s}),he()},{immediate:!1});const l={};l._TimeZoneOffset=new Date().getTimezoneOffset(),l.sort="tanggal:desc";const Z=f({}),T=f({from:"",to:""}),I=Ce("token"),pe=Ce("role"),h=a=>a.includes(pe.value),{data:D}=([w,Q]=Tt(async()=>Pt(async()=>{y().loading_full=!0;let a=[];const[s,C]=await Promise.all([E("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{filter_status:S},retry:0})]);return s.status.value!=="error"&&(a=W(s.data.value.data)),s.status.value==="error"?(U().trigger(s.error),{standby_trxs:a}):(y().loading_full=!1,{standby_trxs:a})},"$rVBHTgwE0s")),w=await w,Q(),w),_=f(D.value.standby_trxs||[]),k=f([]),j=f(!1),ee=async()=>{y().loading_full=!0;const{data:a,error:s,status:C}=await E("/standby_trx_load_sqlsrv",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{online_status:j.value},retry:0});if(y().loading_full=!1,C.value==="error"){U().trigger(s);return}k.value=a.value.list_cost_center},M=f({field:"tanggal",by:"desc"}),i=f(-1),b=L(()=>_.value[i.value]),B=f({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),xe=()=>{l.like="";let a=JSON.parse(JSON.stringify(y()._tv.global_keyword));a!=""&&(l.like=`id:%${a}%,transition_target:%${a}%,transition_type:%${a}%,standby_mst_name:%${a}%,standby_mst_type:%${a}%,supir:%${a}%,kernet:%${a}%,no_pol:%${a}%,xto:%${a}%,pvr_no:%${a}%,pv_no:%${a}%,pvr_no:%${a}%,tanggal:%${a}%,transition_target:%${a}%,cost_center_code:%${a}%`),l.sort="",M.value.field&&(l.sort=M.value.field+":"+M.value.by),l.date_from=T.value.from?J(T.value.from).format("YYYY-MM-DD"):"",l.date_to=T.value.to?J(T.value.to).format("YYYY-MM-DD"):"",l.filter_model=JSON.stringify(y()._tv.filter_model)},we=async()=>{y().loading_full=!0,Z.value={},B.value.may_get_data=!1,l.page=B.value.page,l.page==1&&(_.value=[]),l.first_row&&delete l.first_row,l.page>1&&(l.first_row=JSON.stringify(_.value[0])),l.filter_status=S.value;const{data:a,error:s,status:C}=await E("/standby_trxs",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:l,retry:0});if(y().loading_full=!1,B.value.may_get_data=!0,C.value==="error"){U().trigger(s,Z);return}B.value.page==1?_.value=W(a.value.data):B.value.page>1&&(_.value=[..._.value,...W(a.value.data)]),a.value.data.length==0&&(B.value.is_last_record=!0),y()._tv.filter_box=!1},he=()=>{i.value=-1,B.value.page=1,B.value.is_last_record=!1,xe(),we()},ue=f(!1),ve=f(0),Ae=()=>{ve.value=0,ue.value=!0},{display:d}=Se();qt(Se());const c=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ve.value=_.value[i.value].id,ue.value=!0)},V=f(!1),Y=f(0),R=f(!1),fe=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Y.value=_.value[i.value].id,V.value=!0,R.value=!1)},me=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Y.value=_.value[i.value].id,V.value=!0,R.value=!0)},z=f(!1),re=f({}),se=f(!1),te=f(""),ge=async()=>{se.value&&(se.value=!1)},ke=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(te.value="",re.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto},se.value=!0)};_e(()=>te.value,a=>{a.trim().length>0?z.value=!0:z.value=!1},{immediate:!1});const r=async()=>{y().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("deleted_reason",te.value),a.append("_method","DELETE");const{data:s,error:C,status:G}=await E("/standby_trx",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,G.value==="error"){U().trigger(C);return}let p={..._.value[i.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,se.value=!1},oe=f(!1),ne=f({}),be=f(!1),ce=f(""),ze=async()=>{be.value&&(be.value=!1)},He=()=>{i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(ce.value="",ne.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto},be.value=!0)},je=f({}),ye=f(!1),Le=f(""),Ke=async()=>{ye.value&&(ye.value=!1)},Je=()=>{var a;i.value==-1?d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(Le.value="",je.value={id:_.value[i.value].id,"no pol":_.value[i.value].no_pol,tujuan:_.value[i.value].xto,permintaan:(a=_.value[i.value].approve_void_by)==null?void 0:a.username,alasan:_.value[i.value].approve_void_reason},ye.value=!0)},Ge=async()=>{y().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("_method","DELETE");const{data:s,error:C,status:G}=await E("/standby_trx_approve_void",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,G.value==="error"){U().trigger(C);return}let p={..._.value[i.value]};p.deleted=s.value.deleted,p.deleted_user=s.value.deleted_user,p.deleted_at=s.value.deleted_at,p.deleted_by=s.value.deleted_by,p.deleted_reason=s.value.deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,ye.value=!1};_e(()=>ce.value,a=>{a.trim().length>0?oe.value=!0:oe.value=!1},{immediate:!1});const Xe=async()=>{y().loading_full=!0;const a=new FormData;a.append("id",_.value[i.value].id),a.append("req_deleted_reason",ce.value),a.append("_method","DELETE");const{data:s,error:C,status:G}=await E("/standby_trx_req_delete",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,G.value==="error"){U().trigger(C);return}let p={..._.value[i.value]};p.req_deleted=s.value.req_deleted,p.req_deleted_user=s.value.req_deleted_user,p.req_deleted_by=s.value.req_deleted_by,p.req_deleted_at=s.value.req_deleted_at,p.req_deleted_reason=s.value.req_deleted_reason,p.class_h=o(p),S.value!="all"?_.value.splice(i.value,1):_.value.splice(i.value,1,{...p}),i.value=-1,be.value=!1},{printHtml:Ze}=Ot(),Qe=async()=>{if(i.value==-1){d({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}y().loading_full=!0;const{data:a,error:s,status:C}=await E("/standby_trx_preview_file",{method:"get",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},params:{id:_.value[i.value].id},retry:0});if(y().loading_full=!1,C.value==="error"){U().trigger(s);return}Ze(a.value.html,318)},We=async()=>{y().loading_full=!0;const a=new FormData;a.append("online_status",j.value);const{data:s,error:C,status:G}=await E("/standby_trx_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,G.value==="error"){U().trigger(C);return}s.value.forEach(p=>{let le=_.value.map(P=>P.id).indexOf(p.id);if(le!==-1){let P=_.value[le];P.pvr_id=p.pvr_id,P.pvr_no=p.pvr_no,P.pvr_total=p.pvr_total,P.pvr_had_detail=p.pvr_had_detail,P.updated_at=p.updated_at,_.value.splice(le,1,{...P})}}),d({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},et=async()=>{y().loading_full=!0;const a=new FormData;a.append("online_status",j.value);const{data:s,error:C,status:G}=await E("/standby_trx_do_update_pv",{method:"post",headers:{Authorization:`Bearer ${I.value}`,Accept:"application/json"},body:a,retry:0});if(y().loading_full=!1,G.value==="error"){U().trigger(C);return}s.value.data.forEach(p=>{let le=_.value.map(P=>P.id).indexOf(p.id);if(le!==-1){let P=_.value[le];P.pv_id=p.pv_id,P.pv_no=p.pv_no,P.pv_total=p.pv_total,P.pv_datetime=p.pv_datetime,P.updated_at=p.updated_at,_.value.splice(le,1,{...P})}}),d({show:!0,status:"Success",message:"Update PV Done"})},Me=f([{key:"no",label:"No",isai:!0},{key:"val",label:"App 1",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"App 2",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"App 3",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"id",label:"ID",filter_on:1,type:"number"},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"xto",label:"Tujuan",filter_on:1,type:"string"},{key:"standby_mst_name",label:"Nama Standby",filter_on:1,type:"string"},{key:"standby_mst_type",label:"Tipe Standby",filter_on:1,type:"string"},{key:"standby_mst_amount",label:"Nilai SB",class:" justify-end",type:"number"},{key:"details_count",label:"Jlh SB",class:" justify-end",type:"number"},{key:"sb_total",label:"Total SB",class:" justify-end",type:"number"},{key:"note_for_remarks",label:"Note untuk Remarks"},{key:"ref",label:"Ref"},{key:"transition_target",label:"Pengalihan",filter_on:1,type:"select",select_item:y().list_pabrik},{key:"transition_type",label:"Tipe Pengalihan",type:"select",select_item:[{k:"From",v:"Dari"},{k:"To",v:"Ke"}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"}]},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1,tbl_show:0},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),tt=L(()=>["trx_not_done","all"].indexOf(S.value)>-1&&h(["PabrikTransport"])),lt=L(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,0].indexOf(b.value.val)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),at=L(()=>i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&(h(["PabrikTransport"])&&[void 0,0].indexOf(b.value.val)>-1||h(["PabrikMandor"])&&[void 0,0].indexOf(b.value.val1)>-1||h(["Logistic"])&&[void 0,0].indexOf(b.value.val2)>-1)&&[void 0,""].indexOf(b.value.pvr_id)>-1),st=L(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&[void 0,""].indexOf(b.value.pvr_id)>-1),ot=L(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.pvr_id!=""),nt=L(()=>h(["Logistic"])&&i.value>-1&&b.value.deleted==0&&b.value.req_deleted==1&&b.value.val2==0),dt=L(()=>h(["PabrikTransport"])&&i.value>-1&&[void 0,0].indexOf(b.value.deleted)>-1&&[void 0,0].indexOf(b.value.req_deleted)>-1&&b.value.val==1);return(a,s)=>{const C=pt,G=Be,p=vt,le=ft,P=mt,Ne=bt,it=yt,rt=xt,$e=wt,De=ht,_t=gt,Te=kt,ut=Ga,ct=Mo;return u(),m("div",No,[$(C,{title:"List Transaction"}),e("div",Bo,[e("div",Fo,[e("div",Yo,[e("div",Ro,[N(e("select",{class:"","onUpdate:modelValue":s[0]||(s[0]=v=>qe(S)?S.value=v:null)},Eo,512),[[Pe,t(S)]])]),t(tt)?(u(),m("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[1]||(s[1]=v=>Ae())},[$(G)])):q("",!0),t(lt)?(u(),m("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[2]||(s[2]=v=>c())},[$(p)])):q("",!0),t(i)>-1?(u(),m("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[3]||(s[3]=v=>me())},[$(le)])):q("",!0),t(st)?(u(),m("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[4]||(s[4]=v=>ke())},[$(P)])):q("",!0),t(ot)?(u(),m("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[5]||(s[5]=v=>He())},[$(Ne)])):q("",!0),t(nt)?(u(),m("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[6]||(s[6]=v=>Je())},[$(Ne)])):q("",!0),t(at)?(u(),m("button",{key:6,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[7]||(s[7]=v=>fe())},[$(it)])):q("",!0),t(dt)?(u(),m("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:s[8]||(s[8]=v=>Qe())},[$(rt)])):q("",!0)]),h(["PabrikTransport"])?(u(),m("div",Io,[e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[9]||(s[9]=v=>We())}," Gen/Update PVR "),e("button",{type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:s[10]||(s[10]=v=>et())}," Update PV "),e("div",{class:"m-1 card-border cursor-pointer",onClick:s[11]||(s[11]=v=>j.value=!t(j))},[zo,H(" : "),e("span",{class:St(["font-bold",t(j)?"text-green-600":"text-red-600"])},n(t(j)?"ONLINE":"OFFLINE"),3)])])):q("",!0)]),$(_t,{thead:t(Me),selected:t(i),onSetSelected:s[12]||(s[12]=v=>i.value=v),tbody:t(_),fnCallData:we,scrolling:t(B),onSetScrollingPage:s[13]||(s[13]=v=>t(B).page=v),onDoFilter:s[14]||(s[14]=v=>he())},{val:F(({item:v})=>[v.val?(u(),de(De,{key:1})):(u(),de($e,{key:0}))]),val1:F(({item:v})=>[v.val1?(u(),de(De,{key:1})):(u(),de($e,{key:0}))]),val2:F(({item:v})=>[v.val2?(u(),de(De,{key:1})):(u(),de($e,{key:0}))]),standby_mst_name:F(({item:v})=>{var O;return[H(n((O=v.standby_mst_)==null?void 0:O.name),1)]}),standby_mst_type:F(({item:v})=>{var O;return[H(n((O=v.standby_mst_)==null?void 0:O.tipe),1)]}),standby_mst_amount:F(({item:v})=>{var O;return[H(" Rp. "+n(t(ie)(((O=v.standby_mst_)==null?void 0:O.amount)||0)),1)]}),sb_total:F(({item:v})=>{var O;return[H(" Rp. "+n(t(ie)(((O=v.standby_mst_)==null?void 0:O.amount)*v.details_count||0)),1)]}),pvr_had_detail:F(({item:v})=>[v.pvr_had_detail?(u(),de(De,{key:1})):(u(),de($e,{key:0}))]),deleted_by_username:F(({item:v})=>{var O;return[H(n((O=v.deleted_by)==null?void 0:O.username),1)]}),req_deleted_by_username:F(({item:v})=>{var O;return[H(n((O=v.req_deleted_by)==null?void 0:O.username),1)]}),_:2},1032,["thead","selected","tbody","scrolling"])]),$(Te,{type:"delete",show:t(se),data:t(re),fnClose:ge,fnConfirm:r,enabledOk:t(z)},{footer:F(()=>[H(" Masukkan Alasan Penghapusan: "),e("div",Ho,[N(e("textarea",{"onUpdate:modelValue":s[15]||(s[15]=v=>qe(te)?te.value=v:null)},null,512),[[X,t(te)]])])]),_:1},8,["show","data","enabledOk"]),$(Te,{type:"custome",show:t(be),data:t(ne),fnClose:ze,fnConfirm:Xe,enabledOk:t(oe)},{words:F(()=>[H(" Data akan diproses dan "),Lo,H(", yakin untuk melanjutkan ? ")]),footer:F(()=>[H(" Masukkan Alasan Permintaan Penghapusan: "),e("div",Ko,[N(e("textarea",{"onUpdate:modelValue":s[16]||(s[16]=v=>qe(ce)?ce.value=v:null)},null,512),[[X,t(ce)]])])]),_:1},8,["show","data","enabledOk"]),$(Te,{type:"custome",show:t(ye),data:t(je),fnClose:Ke,fnConfirm:Ge},{words:F(()=>[H(" Data akan diproses dan "),Jo,H(", apakah Anda menyetujui permintaan penghapusan data berikut? ")]),_:1},8,["show","data"]),$(ut,{show:t(ue),fnClose:()=>{ue.value=!1},fnLoadDBData:ee,id:t(ve),p_data:t(_),list_cost_center:t(k),online_status:t(j)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),$(ct,{show:t(V),fnClose:()=>{V.value=!1},id:t(Y),p_data:t(_),is_view:t(R)},null,8,["show","fnClose","id","p_data","is_view"])])}}};export{yn as default};
