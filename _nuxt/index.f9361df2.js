import{r as _,f as W,g as bt,h as xt,i as C,j as gt,x as d,c as g,b as f,a as m,k as pe,v as ht,l as o,m as ve,n as h,d as b,t as w,G as wt,w as c,q as Dt,y as $,o as i,z as x,A as je,B as K,I as Pt,H as At,_ as Y}from"./entry.01300184.js";import Ct from"./Header.93c6b012.js";import $t from"./Plus.5394c517.js";import Tt from"./Eyes.31a96f56.js";import jt from"./Delete.8ac84417.js";import Ot from"./Void.dbc0db37.js";import St from"./Signature.ccd711a9.js";import qt from"./SignatureOff.073271de.js";import Et from"./PrinterEye.c571a4c8.js";import It from"./Table2Column.b739ad9c.js";import Ut from"./Chain.47043121.js";import Mt from"./Image.1e5fdecb.js";import Ft from"./Line.bfcce5ec.js";import Nt from"./Check.3e060314.js";import zt from"./TableView.67657bf8.js";import{u as y}from"./useUtils.0bf8b490.js";import{u as T}from"./useMyFetch.c219548f.js";import{u as Oe}from"./useDownload.174f4da2.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Search.cc85de0b.js";import"./Adjust.54ccfed8.js";import"./TableHeaderEye.5b9e8dfc.js";import"./Times.1174e386.js";import"./ClearAll.d9f48a94.js";import"./client-only.37219188.js";import"./ClearEach.2ba56b53.js";import"./CaretLeftDoubleBold.67cd304f.js";import"./CaretLeftBold.37bbced5.js";import"./CaretRightBold.46bd9137.js";import"./CaretRightDoubleBold.609b1c1c.js";const Bt=K(()=>Y(()=>import("./PopupMini.72d85be6.js"),["./PopupMini.72d85be6.js","./PopupMini.vue.dd14eb51.js","./Times.1174e386.js","./_plugin-vue_export-helper.c27b6911.js","./entry.01300184.js","./entry.c5f8f180.css","./Exclamation.27e629ed.js"],import.meta.url).then(D=>D.default||D)),Rt=K(()=>Y(()=>import("./trx_trp.ceb726dc.js"),["./trx_trp.ceb726dc.js","./HeaderPopup.vue.ee97b6b0.js","./Times.1174e386.js","./_plugin-vue_export-helper.c27b6911.js","./entry.01300184.js","./entry.c5f8f180.css","./client-only.37219188.js","./WidthMiniList.vue.85426d35.js","./WidthMiniPart.vue.7c26ee64.js","./useUtils.0bf8b490.js","./useMyFetch.c219548f.js"],import.meta.url).then(D=>D.default||D)),Vt=K(()=>Y(()=>import("./trx_trp_validasi.ccd07411.js"),["./trx_trp_validasi.ccd07411.js","./HeaderPopup.vue.ee97b6b0.js","./Times.1174e386.js","./_plugin-vue_export-helper.c27b6911.js","./entry.01300184.js","./entry.c5f8f180.css","./WidthMiniPart.vue.7c26ee64.js","./CaretTop.9ea410ee.js","./CaretDown.6dc3bd65.js","./useUtils.0bf8b490.js","./useMyFetch.c219548f.js"],import.meta.url).then(D=>D.default||D)),Lt=K(()=>Y(()=>import("./trx_absen.b91da6c4.js"),["./trx_absen.b91da6c4.js","./HeaderPopup.vue.ee97b6b0.js","./Times.1174e386.js","./_plugin-vue_export-helper.c27b6911.js","./entry.01300184.js","./entry.c5f8f180.css","./Check.3e060314.js","./PopupMini.vue.dd14eb51.js","./Exclamation.27e629ed.js","./useUtils.0bf8b490.js","./useMyFetch.c219548f.js"],import.meta.url).then(D=>D.default||D)),Kt=K(()=>Y(()=>import("./trx_trp_full.c457b9b1.js"),["./trx_trp_full.c457b9b1.js","./HeaderPopup.vue.ee97b6b0.js","./Times.1174e386.js","./_plugin-vue_export-helper.c27b6911.js","./entry.01300184.js","./entry.c5f8f180.css","./uj.1cf8203f.js","./ClockAnalog.13e62e15.js","./Calendar.9aaa5770.js","./Truck.202fdb25.js","./LocationOn.66a466bb.js","./TruckDriver.7a52d678.js","./useUtils.0bf8b490.js","./useMyFetch.c219548f.js","./emt.0f932a36.js","./Person.32b7bb5c.js","./AttachmentSingleV1.9bf4909c.js","./PDFJsView.05b58346.js","./PDFJsView.4e9fad9f.css","./AttachmentSingleV1.84bd4f13.css","./CaretTop.9ea410ee.js","./CaretDown.6dc3bd65.js"],import.meta.url).then(D=>D.default||D)),Yt={class:"w-full h-full flex flex-col"},Ht={class:"w-full flex grow flex-col overflow-auto h-0"},Jt={class:"w-full flex justify-between flex-wrap"},Gt={class:"grow flex flex-wrap"},Wt={class:"m-1"},Zt=Pt('<option value="pv_not_done">Undone</option><option value="pv_done">Done</option><option value="deleted">Trash</option><option value="all">All</option><option value="req_deleted">Req Delete</option>',5),Qt=[Zt],Xt=m("span",{class:"text-xs ml-1"}," Download ",-1),ea=m("span",{class:"text-xs ml-1"}," With UJ ",-1),ta={class:"flex"},aa={class:"m-1 p-1 border-2 border-gray-600 whitespace-nowrap flex flex-col"},la=m("span",{class:"w-full text-[10px] -mt-[3px]"}," No Paid ",-1),na={class:"w-full text-xs font-bold -mt-1"},ra={class:"m-1 p-1 border-2 border-blue-600 text-blue-600 whitespace-nowrap flex flex-col"},oa=m("span",{class:"w-full text-[10px] -mt-[3px]"}," All Total ",-1),sa={class:"w-full text-xs font-bold -mt-1"},ia=m("span",{class:"text-xs"},"Mode",-1),ua={key:0},_a={class:"w-full flex flex-col items-center justify-center"},da={key:2,class:"text-xs"},pa={key:0},va={key:0},ca={class:"grow mb-5"},ma=m("b",{class:"text-red-500"},"divalidasi",-1),fa=m("b",null,"tidak dapat dibatalkan lagi",-1),ya={class:"grow mb-5"},Ga={__name:"index",async setup(D){let H,ce;const{$moment:Z}=At(),{pointFormat:Q}=y();let me=_({clearCheckBox:!1});const X=t=>t.deleted==1?"!bg-red-400":t.pvr_id>0&&t.req_deleted==1?"!bg-yellow-300":t.absen_not_done&&t.absen_not_done.length>0?"!bg-gray-300":t.pv_id>0?"!bg-blue-300":"",ee=t=>(t.map(e=>{e.class_h=X(e)}),t),j=_("pv_not_done");W(()=>j.value,t=>{Ae.value.map(e=>{let u=["deleted_by_username","deleted_at","deleted_reason","req_deleted_by_username","req_deleted_at","req_deleted_reason"].indexOf(e.key)>-1;return["all","deleted","req_deleted"].indexOf(t)>-1?u&&(e.tbl_show=1):u&&(e.tbl_show=0),e}),be()},{immediate:!1});const k={};k._TimeZoneOffset=new Date().getTimezoneOffset(),k.sort="tanggal:desc";const fe=_({}),J=_({from:"",to:""}),P=bt("token"),{data:Se}=([H,ce]=xt(async()=>Dt(async()=>{d().loading_full=!0;let t=[];const[e,u]=await Promise.all([T("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{filter_status:j},retry:0})]);return e.status.value!=="error"&&(t=ee(e.data.value.data)),e.status.value==="error"?($().trigger(e.error),{trx_trps:t}):(d().loading_full=!1,{trx_trps:t})},{lazy:!0,server:!1,default:()=>({trx_trps:[]})},"$pFLmKcrKj9")),H=await H,ce(),H),s=_([]);W(()=>{var t;return(t=Se.value)==null?void 0:t.trx_trps},t=>{t&&(s.value=[...t])},{immediate:!0});const ye=_([]),U=_(!1),qe=async()=>{d().loading_full=!0;const{data:t,error:e,status:u}=await T("/trx_load_cost_center",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{online_status:U.value},retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}ye.value=t.value.list_cost_center},te=_({field:"tanggal",by:"desc"}),r=_(-1),v=C(()=>s.value[r.value]),q=_({page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}),ae=()=>{k.like="";let t=JSON.parse(JSON.stringify(d()._tv.global_keyword));t!=""&&(k.like=`id:%${t}%,xto:%${t}%,jenis:%${t}%,pv_no:%${t}%,ticket_a_no:%${t}%,ticket_b_no:%${t}%,no_pol:%${t}%,supir:%${t}%,kernet:%${t}%,cost_center_code:%${t}%,cost_center_desc:%${t}%,pvr_no:%${t}%,tanggal:%${t}%,transition_target:%${t}%,uj_asst_opt:%${t}%`),k.sort="",te.value.field&&(k.sort=te.value.field+":"+te.value.by),k.date_from=J.value.from?Z(J.value.from).format("YYYY-MM-DD"):"",k.date_to=J.value.to?Z(J.value.to).format("YYYY-MM-DD"):"",k.filter_model=JSON.stringify(d()._tv.filter_model)},ke=async()=>{d().loading_full=!0,fe.value={},q.value.may_get_data=!1,k.page=q.value.page,k.page==1&&(s.value=[]),k.first_row&&delete k.first_row,k.page>1&&(k.first_row=JSON.stringify(s.value[0])),k.filter_status=j.value;const{data:t,error:e,status:u}=await T("/trx_trps",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(d().loading_full=!1,q.value.may_get_data=!0,u.value==="error"){$().trigger(e,fe);return}q.value.page==1?s.value=ee(t.value.data):q.value.page>1&&(s.value=[...s.value,...ee(t.value.data)]),t.value.data.length==0&&(q.value.is_last_record=!0),d()._tv.filter_box=!1},be=()=>{r.value=-1,q.value.page=1,q.value.is_last_record=!1,ae(),ke()},N=_(1),xe=_(1),le=_(!1),ge=_(0),Ee=()=>{ge.value=0,N.value=-1,le.value=!0},{display:O}=gt(),z=_(!1),B=_(0),Ie=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=s.value[r.value].id,N.value=1,z.value=!0)},ne=_(!1),re=_(0),Ue=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(re.value=s.value[r.value].id,xe.value=1,ne.value=!0)},Me=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=s.value[r.value].id,N.value=0,z.value=!0)},Fe=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(B.value=s.value[r.value].id,N.value=-1,z.value=!0)},oe=_(!1),he=_(0),Ne=t=>{he.value=t,oe.value=!0},se=_(!1),we=_({}),R=_(!1),M=_(""),ze=async()=>{R.value&&(R.value=!1)},Be=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(M.value="",we.value={id:s.value[r.value].id,"no pol":s.value[r.value].no_pol,tujuan:s.value[r.value].xto},R.value=!0)};W(()=>M.value,t=>{t.trim().length>0?se.value=!0:se.value=!1},{immediate:!1});const Re=async()=>{d().loading_full=!0;const t=new FormData;t.append("id",s.value[r.value].id),t.append("deleted_reason",M.value),t.append("_method","DELETE");const{data:e,error:u,status:S}=await T("/trx_trp",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(d().loading_full=!1,S.value==="error"){$().trigger(u);return}let l={...s.value[r.value]};l.deleted=e.value.deleted,l.deleted_user=e.value.deleted_user,l.deleted_at=e.value.deleted_at,l.deleted_by=e.value.deleted_by,l.deleted_reason=e.value.deleted_reason,l.class_h=X(l),j.value!="all"?s.value.splice(r.value,1):s.value.splice(r.value,1,{...l}),r.value=-1,R.value=!1},ie=_(!1),De=_({}),V=_(!1),F=_(""),Ve=async()=>{V.value&&(V.value=!1)},Le=()=>{r.value==-1?O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"}):(F.value="",De.value={id:s.value[r.value].id,"no pol":s.value[r.value].no_pol,tujuan:s.value[r.value].xto},V.value=!0)};W(()=>F.value,t=>{t.trim().length>0?ie.value=!0:ie.value=!1},{immediate:!1});const Ke=async()=>{d().loading_full=!0;const t=new FormData;t.append("id",s.value[r.value].id),t.append("req_deleted_reason",F.value),t.append("_method","DELETE");const{data:e,error:u,status:S}=await T("/trx_trp_req_delete",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(d().loading_full=!1,S.value==="error"){$().trigger(u);return}let l={...s.value[r.value]};l.req_deleted=e.value.req_deleted,l.req_deleted_user=e.value.req_deleted_user,l.req_deleted_by=e.value.req_deleted_by,l.req_deleted_at=e.value.req_deleted_at,l.req_deleted_reason=e.value.req_deleted_reason,l.class_h=X(l),j.value!="all"?s.value.splice(r.value,1):s.value.splice(r.value,1,{...l}),r.value=-1,V.value=!1},ue=_([]),G=_(!1),Ye=async()=>{d().loading_full=!0;const t=new FormData;t.append("ids",JSON.stringify(ue.value)),t.append("_method","PUT");const{data:e,error:u,status:S}=await T("/trx_trp_validasis",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(d().loading_full=!1,S.value==="error"){$().trigger(u);return}G.value=!1,e.value.val_lists.forEach(l=>{let A=s.value.map(n=>n.id).indexOf(l.id);if(A>-1){let n=s.value[A];n.val=l.val,n.val_by=l.val_by,n.val_at=l.val_at,n.val1=l.val1,n.val1_by=l.val1_by,n.val1_at=l.val1_at,n.val2=l.val2,n.val2_by=l.val2_by,n.val2_at=l.val2_at,n.val3=l.val3,n.val3_by=l.val3_by,n.val3_at=l.val3_at,n.val4=l.val4,n.val4_by=l.val4_by,n.val4_at=l.val4_at,n.val5=l.val5,n.val5_by=l.val5_by,n.val5_at=l.val5_at,n.val6=l.val6,n.val6_by=l.val6_by,n.val6_at=l.val6_at,n.updated_at=l.updated_at,s.value.splice(A,1,{...n})}}),me.value.clearCheckBox=!0},{printHtml:Pe}=Oe(),He=async()=>{if(r.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}d().loading_full=!0;const{data:t,error:e,status:u}=await T("/trx_trp_preview_file",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:s.value[r.value].id},retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}Pe(t.value.html,318)},Je=async()=>{if(r.value==-1){O({show:!0,status:"Failed",message:"Silahkan Pilih Data Terlebih Dahulu"});return}d().loading_full=!0;const{data:t,error:e,status:u}=await T("/trx_trp_preview_file_bt",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:{id:s.value[r.value].id},retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}Pe(t.value.html,318)},Ge=async()=>{d().loading_full=!0;const t=new FormData;t.append("online_status",U.value);const{data:e,error:u,status:S}=await T("/trx_trp_do_gen_pvr",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(d().loading_full=!1,S.value==="error"){$().trigger(u);return}e.value.forEach(l=>{let A=s.value.map(n=>n.id).indexOf(l.id);if(A!==-1){let n=s.value[A];n.pvr_id=l.pvr_id,n.pvr_no=l.pvr_no,n.pvr_total=l.pvr_total,n.pvr_had_detail=l.pvr_had_detail,n.updated_at=l.updated_at,s.value.splice(A,1,{...n})}}),O({show:!0,status:"Success",message:"Generate Or Update PVR Done"})},We=async()=>{d().loading_full=!0;const t=new FormData;t.append("online_status",U.value);const{data:e,error:u,status:S}=await T("/trx_trp_do_gen_pv",{method:"post",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},body:t,retry:0});if(d().loading_full=!1,S.value==="error"){$().trigger(u);return}e.value.forEach(l=>{let A=s.value.map(n=>n.id).indexOf(l.id);if(A!==-1){let n=s.value[A];n.pv_id=l.pv_id,n.pv_no=l.pv_no,n.pv_total=l.pv_total,n.pv_datetime=l.pv_datetime,n.pv_complete=l.pv_complete,n.updated_at=l.updated_at,s.value.splice(A,1,{...n})}}),O({show:!0,status:"Success",message:"Generate Or Update PV Done"})},Ze=async()=>{d().loading_full=!0;const{data:t,error:e,status:u}=await T("/trx_trp/link_to_extramoney_trx",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}O({show:!0,status:"Success",message:t.value.message})},Ae=_([{key:"cb",label:"",checkbox:"id"},{key:"no",label:"No",isai:!0},{key:"val",label:"APP",childs:[{key:"val",label:"Kasir",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val1",label:"Mandor",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val2",label:"KTU/W",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val3",label:"Marketing",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val4",label:"Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val5",label:"SPV Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]},{key:"val6",label:"MGR Logistik",filter_on:1,type:"select",select_item:[{k:"1",v:"Approve"},{k:"0",v:"Unapprove"}]}]},{key:"id",label:"ID",filter_on:1,type:"number",sort:{priority:2,type:"desc"}},{key:"absen",label:"Absen"},{key:"tanggal",label:"U.Jalan Per",type:"date",dateformat:"DD-MM-Y",filter_on:1,sort:{priority:1,type:"desc"}},{key:"no_pol",label:"No Pol",freeze:1,filter_on:1,type:"string"},{key:"uj_xto",label:"Tujuan",filter_on:1,type:"string"},{key:"uj_asst_opt",label:"Info",filter_on:1,type:"select",select_item:["DENGAN KERNET","TANPA KERNET"]},{key:"uj_tipe",label:"Tipe",filter_on:1,type:"string"},{key:"jenis",label:"Jenis",filter_on:1,type:"string"},{key:"uj_harga",label:"Amount",class:" justify-end",filter_on:1,type:"number"},{key:"transition",label:"Peralihan",childs:[{key:"transition_type",label:"Type",type:"select",filter_on:1,select_item:["To","From"]},{key:"transition_target",label:"Target",type:"select",filter_on:1,select_item:d().list_pabrik}]},{key:"cost_center",label:"Cost Center",childs:[{key:"cost_center_code",label:"Code",type:"string",class:" justify-start",filter_on:1},{key:"cost_center_desc",label:"Desc",filter_on:1,type:"string"}]},{key:"pvr",label:"PVR",childs:[{key:"pvr_no",label:"No",filter_on:1,type:"string"},{key:"pvr_total",label:"Total",filter_on:1,type:"number"},{key:"pvr_had_detail",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"pv",label:"PV",childs:[{key:"pv_datetime",label:"Date",type:"date",dateformat:"DD-MM-Y",filter_on:1},{key:"pv_no",label:"No",filter_on:1,type:"string"},{key:"pv_total",label:"Total",filter_on:1,type:"number"},{key:"pv_complete",label:"Completed",filter_on:1,type:"select",select_item:[{k:"1",v:"Completed"},{k:"0",v:"Uncompleted"}]}]},{key:"supir",label:"Supir",filter_on:1,type:"string"},{key:"supir_rek_no",label:"No Rek Supir",filter_on:1,type:"string"},{key:"supir_rek_name",label:"Nama Rek Supir",filter_on:1,type:"string"},{key:"kernet",label:"Kernet",filter_on:1,type:"string"},{key:"kernet_rek_no",label:"No Rek Kernet",filter_on:1,type:"string"},{key:"kernet_rek_name",label:"Nama Rek Kernet",filter_on:1,type:"string"},{key:"payment_method_name",label:"Payment Method Name",type:"string"},{key:"received_payment",label:"Sudah Dibayarkan?",type:"string"},{key:"duitku_supir_disburseId",label:"ID Duitku Supir",type:"string"},{key:"duitku_supir_inv_res_desc",label:"Ket Inquery Duitku Supir",type:"string"},{key:"duitku_supir_trf_res_desc",label:"Ket Pengiriman Duitku Supir",type:"string"},{key:"duitku_kernet_disburseId",label:"ID Duitku Kernet",type:"string"},{key:"duitku_kernet_inv_res_desc",label:"Ket Inquery Duitku Kernet",type:"string"},{key:"duitku_kernet_trf_res_desc",label:"Ket Pengiriman Duitku Kernet",type:"string"},{key:"created_at",label:"Created At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"updated_at",label:"Updated At",type:"datetime",dateformat:"DD-MM-Y HH:mm:ss",filter_on:1},{key:"salary_paid",label:"Salary Paid",type:"string"},{key:"deleted_by_username",label:"Deleted By",tbl_show:0},{key:"deleted_at",label:"Deleted At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"deleted_reason",label:"Deleted Reason",tbl_show:0,type:"string",filter_on:1},{key:"req_deleted_by_username",label:"Req Deleted By",tbl_show:0},{key:"req_deleted_at",label:"Req Delete At",dateformat:"DD-MM-Y HH:mm:ss",tbl_show:0,type:"datetime",filter_on:1},{key:"req_deleted_reason",label:"Req Delete Reason",tbl_show:0,type:"string",filter_on:1}]),Qe=C(()=>["pv_not_done","all"].indexOf(j.value)>-1&&y().checkPermission("trp_trx.create")),Xe=C(()=>r.value>-1&&y().checkPermission("trp_trx.view")),et=C(()=>r.value>-1&&y().checkPermission("trp_trx.ticket.views"));C(()=>r.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,0].indexOf(v.value.val4)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&y().checkPermission("trp_trx.modify"));const tt=C(()=>r.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&([void 0,""].indexOf(v.value.pvr_id)>-1&&y().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2"])||v.value.val3==0&&y().checkPermissions(["trp_trx.val3"])||v.value.val4==0&&y().checkPermissions(["trp_trx.val4"])||v.value.val5==0&&y().checkPermissions(["trp_trx.val5"])||v.value.val6==0&&y().checkPermissions(["trp_trx.val6"]))),at=C(()=>r.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&(v.value.val1==1&&y().checkPermissions(["trp_trx.unval1"])||v.value.val2==1&&y().checkPermissions(["trp_trx.unval2"])||v.value.val3==1&&y().checkPermissions(["trp_trx.unval3"])||v.value.val4==1&&y().checkPermissions(["trp_trx.unval4"])||v.value.val5==1&&y().checkPermissions(["trp_trx.unval5"])||v.value.val6==1&&y().checkPermissions(["trp_trx.unval6"]))),lt=C(()=>r.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&[void 0,""].indexOf(v.value.pvr_id)>-1&&y().checkPermission("trp_trx.remove")),nt=C(()=>r.value>-1&&[void 0,0].indexOf(v.value.deleted)>-1&&[void 0,0].indexOf(v.value.req_deleted)>-1&&v.value.pvr_id!=""&&y().checkPermission("trp_trx.request_remove")),rt=C(()=>r.value>-1&&v.value.val==1&&y().checkPermission("trp_trx.preview_file")),ot=C(()=>r.value>-1&&v.value.payment_method_id==2&&v.value.received_payment==1&&y().checkPermission("trp_trx.preview_file")),{downloadFile:Ce,viewFile:ka}=Oe(),st=async()=>{ae(),d().loading_full=!0,k.filter_status=j.value;const{data:t,error:e,status:u}=await T("/trx_trp/report_raw_excel",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}Ce(t.value)},it=async()=>{ae(),d().loading_full=!0,k.filter_status=j.value;const{data:t,error:e,status:u}=await T("/trx_trp/report_excel_w_uj",{method:"get",headers:{Authorization:`Bearer ${P.value}`,Accept:"application/json"},params:k,retry:0});if(d().loading_full=!1,u.value==="error"){$().trigger(e);return}Ce(t.value)},ut=C(()=>s.value.filter(e=>e.received_payment==0).reduce((e,u)=>e+parseFloat(u.uj.harga),0)),_t=C(()=>s.value.reduce((t,e)=>t+parseFloat(e.uj.harga),0));return(t,e)=>{const u=Ct,S=$t,l=Tt,A=jt,n=Ot,L=St,dt=qt,$e=Et,Te=It,pt=Ut,vt=Mt,E=Ft,I=Nt,ct=zt,_e=Bt,mt=Rt,ft=Vt,yt=Lt,kt=Kt;return i(),g("div",Yt,[f(u,{title:"List Transaction"}),m("div",Ht,[m("div",Jt,[m("div",Gt,[m("div",Wt,[pe(m("select",{class:"","onUpdate:modelValue":e[0]||(e[0]=a=>ve(j)?j.value=a:null)},Qt,512),[[ht,o(j)]])]),Qe.value?(i(),g("button",{key:0,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[1]||(e[1]=a=>Ee())},[f(S)])):h("",!0),Xe.value?(i(),g("button",{key:1,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[2]||(e[2]=a=>Fe())},[f(l)])):h("",!0),lt.value?(i(),g("button",{key:2,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[3]||(e[3]=a=>Be())},[f(A)])):h("",!0),nt.value?(i(),g("button",{key:3,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[4]||(e[4]=a=>Le())},[f(n)])):h("",!0),tt.value?(i(),g("button",{key:4,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[5]||(e[5]=a=>Ie())},[f(L)])):h("",!0),at.value?(i(),g("button",{key:5,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[6]||(e[6]=a=>Me())},[f(dt)])):h("",!0),et.value?(i(),g("button",{key:6,type:"button",name:"button",class:"m-1 text-4xl p-0",onClick:e[7]||(e[7]=a=>Ue())},[f(l)])):h("",!0),rt.value?(i(),g("button",{key:7,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[8]||(e[8]=a=>He())},[f($e)])):h("",!0),ot.value?(i(),g("button",{key:8,type:"button",name:"button",class:"m-1 text-2xl",onClick:e[9]||(e[9]=a=>Je())},[f($e)])):h("",!0),m("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[10]||(e[10]=a=>st())},[f(Te),b(),Xt]),m("button",{type:"button",name:"button",class:"m-1 text-2xl flex items-center",onClick:e[11]||(e[11]=a=>it())},[f(Te),b(),ea]),o(ue).length>0&&("useUtils"in t?t.useUtils:o(y))().checkPermissions(["trp_trx.val","trp_trx.val1","trp_trx.val2","trp_trx.val3","trp_trx.val4","trp_trx.val5","trp_trx.val6"])?(i(),g("button",{key:9,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap grid grid-cols-2",onClick:e[12]||(e[12]=a=>G.value=!0)},[f(L),f(L),f(L),f(L)])):h("",!0)]),m("div",ta,[m("div",aa,[la,m("span",na," Rp. "+w(o(Q)(ut.value||0))+" ",1)]),m("div",ra,[oa,m("span",sa," Rp. "+w(o(Q)(_t.value||0)),1)]),m("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:e[13]||(e[13]=a=>Ze())},[f(pt)]),("useUtils"in t?t.useUtils:o(y))().checkPermission("trp_trx.generate_pvr")?(i(),g("button",{key:0,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[14]||(e[14]=a=>Ge())}," Gen/Update PVR ")):h("",!0),("useUtils"in t?t.useUtils:o(y))().checkPermission("trp_trx.generate_pv")?(i(),g("button",{key:1,type:"button",name:"button",class:"m-1 text-xs whitespace-nowrap",onClick:e[15]||(e[15]=a=>We())}," Gen/Update PV ")):h("",!0),("useUtils"in t?t.useUtils:o(y))().checkPermissions(["trp_trx.generate_pvr","trp_trx.generate_pv","trp_trx.get_pv"])?(i(),g("div",{key:2,class:"m-1 card-border cursor-pointer",onClick:e[16]||(e[16]=a=>U.value=!o(U))},[ia,b(" : "),m("span",{class:wt(["font-bold",o(U)?"text-green-600":"text-red-600"])},w(o(U)?"ONLINE":"OFFLINE"),3)])):h("",!0)])]),f(ct,{thead:o(Ae),selected:o(r),onSetSelected:e[17]||(e[17]=a=>r.value=a),tbody:o(s),fnCallData:ke,scrolling:o(q),onSetScrollingPage:e[18]||(e[18]=a=>o(q).page=a),onDoFilter:e[19]||(e[19]=a=>be()),onSetCheckbox:e[20]||(e[20]=a=>ue.value=a),deep_state:o(me)},{id:c(({item:a})=>[b(w(a.id),1),a.potongan&&a.potongan.length>0?(i(),g("span",ua,"*")):h("",!0)]),absen:c(({item:a,index:p})=>[a.trx_absens&&a.trx_absens.length>0?(i(),x(vt,{key:0,class:"cursor-pointer",onClick:de=>Ne(p)},null,8,["onClick"])):h("",!0)]),val:c(({item:a})=>[a.val?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),val1:c(({item:a})=>[m("div",_a,[a.val1?(i(),x(I,{key:1})):(i(),x(E,{key:0})),a.absen_not_done&&a.absen_not_done.length>0?(i(),g("div",da,w(a.absen_not_done.join(",")),1)):h("",!0)])]),val2:c(({item:a})=>[a.val2?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),val3:c(({item:a})=>[a.val3?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),val4:c(({item:a})=>[a.val4?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),val5:c(({item:a})=>[a.val5?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),val6:c(({item:a})=>[a.val6?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),salary_paid:c(({item:a})=>{var p,de;return[b(w(a.salary_paid?o(Z)((p=a.salary_paid)==null?void 0:p.period_end).format("MM-Y")+"["+((de=a.salary_paid)==null?void 0:de.period_part)+"]":""),1)]}),uj_xto:c(({item:a})=>{var p;return[b(w((p=a.uj)==null?void 0:p.xto),1)]}),uj_asst_opt:c(({item:a})=>{var p;return[b(w((p=a.uj)==null?void 0:p.asst_opt),1)]}),uj_tipe:c(({item:a})=>{var p;return[b(w((p=a.uj)==null?void 0:p.tipe),1)]}),uj_harga:c(({item:a})=>{var p;return[b(w(o(Q)((p=a.uj)==null?void 0:p.harga)),1)]}),payment_method_name:c(({item:a})=>{var p;return[b(w((p=a.payment_method)==null?void 0:p.name),1)]}),received_payment:c(({item:a})=>[b(w(a.received_payment?"Ya":"Tidak"),1)]),pvr_had_detail:c(({item:a})=>[a.pvr_had_detail?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),pv_complete:c(({item:a})=>[a.pv_complete?(i(),x(I,{key:1})):(i(),x(E,{key:0}))]),deleted_by_username:c(({item:a})=>{var p;return[b(w((p=a.deleted_by)==null?void 0:p.username),1)]}),req_deleted_by_username:c(({item:a})=>{var p;return[b(w((p=a.req_deleted_by)==null?void 0:p.username),1)]}),supir:c(({item:a})=>[b(w(a.supir)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(p=>p.potongan_mst.employee_id).indexOf(a.supir_id)>-1?(i(),g("span",pa," * ")):h("",!0)]),kernet:c(({item:a})=>[b(w(a.kernet)+" ",1),a.potongan&&a.potongan.length>0&&a.potongan.map(p=>p.potongan_mst.employee_id).indexOf(a.kernet_id)>-1?(i(),g("span",va," * ")):h("",!0)]),_:2},1032,["thead","selected","tbody","scrolling","deep_state"])]),f(_e,{type:"delete",show:o(R),data:o(we),fnClose:ze,fnConfirm:Re,enabledOk:o(se)},{footer:c(()=>[b(" Masukkan Alasan Penghapusan: "),m("div",ca,[pe(m("textarea",{"onUpdate:modelValue":e[21]||(e[21]=a=>ve(M)?M.value=a:null)},null,512),[[je,o(M)]])])]),_:1},8,["show","data","enabledOk"]),f(_e,{type:"custome",show:o(G),fnClose:()=>G.value=!1,fnConfirm:Ye},{words:c(()=>[b(" Ticket akan "),ma,b(" sesuai dengan data-data yang telah di pilih, yakin untuk melanjutkan ? ")]),_:1},8,["show","fnClose"]),f(_e,{type:"custome",show:o(V),data:o(De),fnClose:Ve,fnConfirm:Ke,enabledOk:o(ie)},{words:c(()=>[b(" Data akan diproses dan "),fa,b(", yakin untuk melanjutkan ? ")]),footer:c(()=>[b(" Masukkan Alasan Permintaan Penghapusan: "),m("div",ya,[pe(m("textarea",{"onUpdate:modelValue":e[22]||(e[22]=a=>ve(F)?F.value=a:null)},null,512),[[je,o(F)]])])]),_:1},8,["show","data","enabledOk"]),f(mt,{show:o(le),fnClose:()=>{le.value=!1},fnLoadDBData:qe,id:o(ge),p_data:o(s),list_cost_center:o(ye),online_status:o(U)},null,8,["show","fnClose","id","p_data","list_cost_center","online_status"]),f(ft,{show:o(z),fnClose:()=>{z.value=!1},id:o(B),p_data:o(s),it_state:o(N),onSetID:e[23]||(e[23]=a=>B.value=a),onSetIndex:e[24]||(e[24]=a=>r.value=a)},null,8,["show","fnClose","id","p_data","it_state"]),f(yt,{show:o(oe),fnClose:()=>{oe.value=!1},index:o(he),p_data:o(s)},null,8,["show","fnClose","index","p_data"]),f(kt,{show:o(ne),fnClose:()=>{ne.value=!1},id:o(re),p_data:o(s),it_state:o(xe),onSetID:e[25]||(e[25]=a=>re.value=a),onSetIndex:e[26]||(e[26]=a=>r.value=a)},null,8,["show","fnClose","id","p_data","it_state"])])}}};export{Ga as default};
