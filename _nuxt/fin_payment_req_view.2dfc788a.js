import{_ as B}from"./HeaderPopup.vue.9b4798a3.js";import F from"./Table2Column.dc10fd7b.js";import{r as v,f as T,G as A,j as D,m as K,J as P,o as h,c as m,a as t,b as y,d as c,t as s,k as n,F as $,y as z,A as f,B as j}from"./entry.c23774bf.js";import{u as E}from"./useUtils.fc8ffcf7.js";import{u as b}from"./useMyFetch.f406b52d.js";import{u as S}from"./useDownload.174f4da2.js";import"./Times.f61f7a80.js";import"./_plugin-vue_export-helper.c27b6911.js";const V={class:"box-fixed"},J={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},L={class:"w-full flex flex-col items-center grow overflow-auto"},R={class:"w-full"},G={class:"w-full flex p-1 2xl:overflow-hidden justify-between flex-wrap"},H={class:"w-full",role:"sticky"},I={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},M=t("tr",{class:"sticky top-0 !z-[2]"},[t("td",{colspan:13,class:"!bg-slate-800 text-white font-bold"}," List Transaksi ")],-1),U={class:"sticky top-7 !z-[2]"},O=t("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1),Q=t("th",null,"Tujuan",-1),W=t("th",null,"Produk",-1),X=t("th",null,"No Trx",-1),Y=t("th",{class:"min-w-[75px] !w-[75px] max-w-[75px]"},"No Pol",-1),Z=t("th",null,"Jabatan",-1),tt=t("th",null,"Nama",-1),et=t("br",null,null,-1),st=t("br",null,null,-1),lt=t("th",null,null,-1),ot=t("th",null,"No Rek",-1),nt=t("th",null,"Nama Di Bank",-1),at=t("br",null,null,-1),ct={ref:"to_move"},it={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},rt={class:"w-full h-full flex items-center justify-center"},ut={class:"cell min-w-[150px] !w-[150px] max-w-[150px]"},_t={class:"w-full h-full flex items-center justify-center"},dt={class:"cell"},ft={class:"w-full h-full flex items-center justify-center"},ht={class:"cell"},mt={class:"w-full h-full flex items-center justify-center"},pt={class:"cell"},wt={class:"w-full h-full flex items-center justify-center"},xt={class:"cell"},vt={class:"w-full h-full flex items-center justify-center"},yt={class:"cell"},jt={class:"w-full h-full flex items-center justify-center"},bt={class:"cell"},kt={class:"w-full h-full flex items-center justify-end p-2"},gt={class:"cell"},Nt={class:"w-full h-full flex items-center justify-end p-2"},qt=t("td",null,[t("div",{class:"w-full h-full flex items-center justify-end p-2"})],-1),Ct={class:"cell"},Bt={class:"w-full h-full flex items-center justify-center"},Ft={class:"cell"},Tt={class:"w-full h-full flex items-center justify-center"},At={class:"cell"},Dt={class:"w-full h-full flex items-center justify-end p-1"},Kt={class:"w-full flex items-center justify-end"},Gt={__name:"fin_payment_req_view",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0}},setup(u){const i=u,{pointFormat:a}=E(),p={id:-1,details:[]},_=v({...p}),w=T("token"),d=v([]),x=A(()=>{let o=0;return d.value.forEach(l=>{o+=l.jumlah}),o}),k=async()=>{f().loading_full=!0;const{data:o,error:l,status:r}=await b("/fin_payment_req",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(f().loading_full=!1,r.value==="error"){j().trigger(l);return}_.value=o.value.data,i.is_copy&&(_.value.val=0,_.value.val1=0),d.value=o.value.data.details},{downloadFile:g,viewFile:Pt}=S(),N=async()=>{f().loading_full=!0;const{data:o,error:l,status:r}=await b("/fin_payment_req/download_view",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:i.id},retry:0});if(f().loading_full=!1,r.value==="error"){j().trigger(l);return}g(o.value)};return D(()=>i.show,(o,l)=>{o==!0&&(_.value={...p},d.value=[],i.id!=0&&k())},{immediate:!0}),(o,l)=>{const r=B,q=F;return K((h(),m("section",V,[t("div",null,[y(r,{title:"Finance Payment Request",fn:u.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",J,[t("div",L,[t("div",R,[t("button",{type:"button",name:"button",class:"m-1 text-2xl",onClick:l[0]||(l[0]=e=>N())},[y(q)])]),t("div",G,[t("div",H,[t("table",I,[t("thead",null,[M,t("tr",U,[O,Q,W,X,Y,Z,tt,t("th",null,[c("Jumlah "),et,c(" ("+s(n(a)(n(x)||0))+") ",1)]),t("th",null,[c("Potongan "),st,c(" ("+s(n(a)(0))+")",1)]),lt,ot,nt,t("th",null,[c("Nominal Transfer "),at,c(" ("+s(n(a)(n(x)||0))+")",1)])])]),t("tbody",ct,[(h(!0),m($,null,z(n(d),(e,C)=>(h(),m("tr",{key:C},[t("td",it,[t("div",rt,s(e.jabatan!="Kernet"?e.no:""),1)]),t("td",ut,[t("div",_t,s(e.jabatan!="Kernet"?e.tujuan:""),1)]),t("td",dt,[t("div",ft,s(e.jabatan!="Kernet"?e.produk:""),1)]),t("td",ht,[t("div",mt,s(e.jabatan!="Kernet"?e.id:""),1)]),t("td",pt,[t("div",wt,s(e.jabatan!="Kernet"?e.no_pol:""),1)]),t("td",xt,[t("div",vt,s(e.jabatan),1)]),t("td",yt,[t("div",jt,s(e.nama),1)]),t("td",bt,[t("div",kt,s(n(a)(e.jumlah||0)),1)]),t("td",gt,[t("div",Nt,s(n(a)(0)),1)]),qt,t("td",Ct,[t("div",Bt,s(e.rek_no),1)]),t("td",Ft,[t("div",Tt,s(e.rek_name),1)]),t("td",At,[t("div",Dt,s(n(a)(e.jumlah||0)),1)])]))),128))],512)])])])]),t("div",Kt,[t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[1]||(l[1]=e=>u.fnClose())}," Cancel ")])])])],512)),[[P,u.show]])}}};export{Gt as default};
