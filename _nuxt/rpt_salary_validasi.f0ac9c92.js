import{_ as kt}from"./HeaderPopup.vue.a2d38707.js";import{r as y,g as jt,i as _,f as xt,k as it,K as Et,o as d,c as m,a as t,b as Dt,t as e,l as a,m as Mt,A as Tt,n as b,d as r,F as pt,D as St,C as Nt,G as Pt,x as w,y as ct,p as Ct,e as Bt}from"./entry.c2c646d2.js";import{u as At}from"./useUtils.6d9c04df.js";import{u as dt}from"./useMyFetch.19718bbf.js";import{_ as Vt}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.3ee06605.js";const p=c=>(Ct("data-v-f776eb61"),c=c(),Bt(),c),Gt={class:"box-fixed"},Jt={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},Yt={class:"w-full flex flex-col items-center grow overflow-auto"},$t={class:"w-full flex flex-row flex-wrap"},qt={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},It=p(()=>t("label",{for:""},"Period End",-1)),Lt={class:"card-border"},zt={key:0,class:"w-full sm:w-6/12 md:w-4/12 lg:w-4/12 p-1"},Kt=p(()=>t("div",{class:"font-bold"}," Filter Nama ",-1)),Rt={key:0,class:"w-full flex p-1 justify-between flex-wrap"},Ut={class:"w-full",role:"sticky"},Ht={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Ot=p(()=>t("tr",{class:"sticky -top-1 !z-[2]"},[t("td",{colspan:"43",class:"!bg-slate-800 text-white font-bold"}," Detail ")],-1)),Qt={class:"sticky top-7 !z-[2]"},Wt=p(()=>t("th",{rowspan:"2"},"No",-1)),Xt=p(()=>t("th",{rowspan:"2"},"ID",-1)),Zt=p(()=>t("th",{rowspan:"2"},"Nama Pekerja",-1)),ts=p(()=>t("th",{rowspan:"2"},"Jabatan",-1)),ss=p(()=>t("th",{rowspan:"2"},"Tmpt Lahir",-1)),as=p(()=>t("th",{rowspan:"2"},"Tgl Lahir",-1)),es=p(()=>t("th",{rowspan:"2"},"TMK",-1)),os=p(()=>t("th",{rowspan:"2"},"No KTP",-1)),ns=p(()=>t("th",{rowspan:"2"},"Alamat",-1)),ls=p(()=>t("th",{rowspan:"2"},"Status",-1)),_s=p(()=>t("th",{rowspan:"2"},"No Rek",-1)),rs=p(()=>t("th",{rowspan:"2"},"Nama Rek",-1)),us=p(()=>t("th",{rowspan:"2"},"Nama Bank",-1)),is={colspan:"3"},ps={class:"text-sm"},cs={rowspan:"2"},ds={class:"text-sm"},ms={rowspan:"2"},hs={class:"text-sm"},vs={colspan:"3"},bs={class:"text-sm"},fs={rowspan:"2"},gs={class:"text-sm"},ys={rowspan:"2"},Fs={class:"text-sm"},ws={rowspan:"2"},ks={class:"text-sm"},js={rowspan:"2"},xs={class:"text-sm"},Es={colspan:"3"},Ds={class:"text-sm"},Ms={colspan:"4"},Ts={class:"text-sm"},Ss={colspan:"3",class:"whitespace-nowrap"},Ns={class:"text-sm"},Ps={colspan:"3"},Cs={class:"text-sm"},Bs={rowspan:"2"},As={class:"text-sm"},Vs={rowspan:"2"},Gs={class:"text-sm"},Js={rowspan:"2"},Ys={class:"text-sm"},$s={rowspan:"2"},qs={class:"text-sm"},Is={rowspan:"2"},Ls={class:"text-sm"},zs={class:"sticky top-[60px] !z-[2]"},Ks={class:"text-sm"},Rs={class:"text-sm"},Us={class:"text-sm"},Hs={class:"text-sm"},Os={class:"text-sm"},Qs={class:"text-sm"},Ws={class:"text-sm"},Xs={class:"text-sm"},Zs={class:"text-sm"},ta={class:"text-sm"},sa={class:"text-sm"},aa={class:"text-sm"},ea={class:"text-sm"},oa={class:"text-sm"},na={class:"text-sm"},la={class:"text-sm"},_a={class:"text-sm"},ra={class:"text-sm"},ua={class:"text-sm"},ia={ref:"to_move"},pa=["data-index"],ca={class:"w-full flex items-center justify-end"},da={class:"w-full flex flex-wrap p-3 items-center"},ma=p(()=>t("div",null," Di Validasi oleh : ",-1)),ha={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},va={key:0},ba={__name:"rpt_salary_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(c){const h=c,{$moment:F}=Pt(),{pointFormat:l}=At(),i=y({...{id:-1,name:"",tipe:"",is_transition:!1,amount:0,details:[],val1:0,val1_by:{username:""},val1_at:"",val2:0,val2_by:{username:""},val2_at:"",val3:0,val3_by:{username:""},val3_at:""}}),k=jt("token"),j=y({}),x=y(null),u=y([]),mt=async()=>{w().loading_full=!0,j.value={};const s=new FormData;let o="post",v=h.id;v==0||(s.append("id",v),s.append("_method","PUT"));const{data:n,error:g,status:Ft}=await dt("/rpt_salary_validasi",{method:o,headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},body:s,retry:0});if(w().loading_full=!1,Ft.value==="error"){ct().trigger(g,j);return}i.value.val1=n.value.val1,i.value.val1_user=n.value.val1_user,i.value.val1_by=n.value.val1_by,i.value.val1_at=n.value.val1_at,i.value.val2=n.value.val2,i.value.val2_user=n.value.val2_user,i.value.val2_by=n.value.val2_by,i.value.val2_at=n.value.val2_at,i.value.val3=n.value.val3,i.value.val3_user=n.value.val3_user,i.value.val3_by=n.value.val3_by,i.value.val3_at=n.value.val3_at;let ut=h.p_data.map(wt=>wt.id).indexOf(h.id);ut>=-1&&h.p_data.splice(ut,1,{...i.value}),h.fnClose()};_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.standby_nominal)}),s});const E=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_gaji)}),s}),D=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_makan)}),s}),M=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_dinas)}),s}),T=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_gaji_2)}),s}),S=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_makan_2)}),s}),N=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.sb_dinas_2)}),s}),P=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_gaji)}),s}),C=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_makan)}),s}),B=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.uj_dinas)}),s});_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain)}),s});const ht=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain)}),s}),A=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_gaji)}),s}),V=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_makan)}),s}),G=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_lain_dinas)}),s}),vt=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu)}),s}),J=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu_gaji)}),s}),Y=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_tunggu_dinas)}),s}),bt=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo)+parseFloat(o.trip_pk)+parseFloat(o.trip_tbs)+parseFloat(o.trip_tbsk)}),s}),$=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo_bonus_gaji)+parseFloat(o.trip_pk_bonus_gaji)+parseFloat(o.trip_tbs_bonus_gaji)+parseFloat(o.trip_tbsk_bonus_gaji)}),s}),q=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.trip_cpo_bonus_dinas)+parseFloat(o.trip_pk_bonus_dinas)+parseFloat(o.trip_tbs_bonus_dinas)+parseFloat(o.trip_tbsk_bonus_dinas)}),s}),I=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.employee_bpjs_kesehatan)}),s}),L=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.employee_bpjs_jamsos)}),s}),z=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.nominal_cut)}),s}),K=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.salary_bonus_nominal)}),s}),R=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.salary_bonus_nominal_2)}),s}),U=_(()=>{let s=0;return u.value.forEach(o=>{s+=parseFloat(o.kerajinan)}),s}),H=_(()=>E.value+D.value+M.value||0),O=_(()=>H.value+K.value||0),Q=_(()=>T.value+S.value+N.value||0),W=_(()=>Q.value+R.value+U.value||0),X=_(()=>O.value+W.value||0),Z=_(()=>P.value+C.value+B.value||0),tt=_(()=>A.value+V.value+G.value||0),st=_(()=>J.value+Y.value||0),at=_(()=>$.value+q.value||0),et=_(()=>X.value+Z.value+tt.value+st.value+at.value-z.value||0),ft=_(()=>et.value+I.value+L.value||0),ot=s=>parseFloat(s.sb_gaji)+parseFloat(s.sb_makan)+parseFloat(s.sb_dinas)+parseFloat(s.salary_bonus_nominal),nt=s=>parseFloat(s.sb_gaji_2)+parseFloat(s.sb_makan_2)+parseFloat(s.sb_dinas_2)+parseFloat(s.salary_bonus_nominal_2)+parseFloat(s.kerajinan),lt=s=>ot(s)+nt(s),_t=s=>lt(s)+parseFloat(s.uj_gaji)+parseFloat(s.uj_makan)+parseFloat(s.uj_dinas)+parseFloat(s.trip_lain_gaji)+parseFloat(s.trip_lain_makan)+parseFloat(s.trip_lain_dinas)+parseFloat(s.trip_tunggu_gaji)+parseFloat(s.trip_tunggu_dinas)+parseFloat(s.trip_cpo_bonus_gaji)+parseFloat(s.trip_cpo_bonus_dinas)+parseFloat(s.trip_pk_bonus_gaji)+parseFloat(s.trip_pk_bonus_dinas)+parseFloat(s.trip_tbs_bonus_gaji)+parseFloat(s.trip_tbs_bonus_dinas)+parseFloat(s.trip_tbsk_bonus_gaji)+parseFloat(s.trip_tbsk_bonus_dinas)-parseFloat(s.nominal_cut),gt=s=>_t(s)+parseFloat(s.employee_bpjs_kesehatan)+parseFloat(s.employee_bpjs_jamsos),yt=async()=>{w().loading_full=!0;const{data:s,error:o,status:v}=await dt("/rpt_salary",{method:"get",headers:{Authorization:`Bearer ${k.value}`,Accept:"application/json"},params:{id:h.id},retry:0});if(w().loading_full=!1,v.value==="error"){ct().trigger(o);return}i.value=s.value.data,u.value=s.value.data.details};_(()=>{let s=0;return u.value.forEach(o=>{o.p_status!="Remove"&&(s+=parseInt(o.amount))}),s}),_(()=>!1);const f=y(""),rt=_(()=>f.value!=""?u.value.filter(s=>s.employee.name.toLowerCase().includes(f.value.toLowerCase())):u.value);return xt(()=>h.show,(s,o)=>{s==!0&&(h.is_view==!1&&setTimeout(()=>{x.value.focus()},1),yt())},{immediate:!0}),(s,o)=>{const v=kt;return it((d(),m("section",Gt,[t("div",null,[Dt(v,{title:"Form Master Standby Validation",fn:c.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",Jt,[t("div",Yt,[t("div",$t,[t("div",qt,[It,t("div",Lt,e(a(F)(a(i).period_end).format("MM-Y")),1)]),a(u).length?(d(),m("div",zt,[Kt,it(t("input",{class:"",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>Mt(f)?f.value=n:null),name:"search",placeholder:"Nama"},null,512),[[Tt,a(f)]])])):b("",!0)]),a(rt).length?(d(),m("div",Rt,[t("div",Ut,[t("table",Ht,[t("thead",null,[Ot,t("tr",Qt,[Wt,Xt,Zt,ts,ss,as,es,os,ns,ls,_s,rs,us,t("th",is,[r("Standby 1 "),t("span",ps,"("+e(a(l)(a(H)))+")",1)]),t("th",cs,[r("Potongan 1 "),t("span",ds,"("+e(a(l)(a(K)||0))+")",1)]),t("th",ms,[r("Periode 1 "),t("span",hs,"("+e(a(l)(a(O)))+")",1)]),t("th",vs,[r("Standby 2 "),t("span",bs,"("+e(a(l)(a(Q)))+")",1)]),t("th",fs,[r("Potongan 2 "),t("span",gs,"("+e(a(l)(a(R)||0))+")",1)]),t("th",ys,[r("U.Kerajinan "),t("span",Fs,"("+e(a(l)(a(U)||0))+")",1)]),t("th",ws,[r("Periode 2 "),t("span",ks,"("+e(a(l)(a(W)))+")",1)]),t("th",js,[r("Periode 1+2 "),t("span",xs,"("+e(a(l)(a(X)))+")",1)]),t("th",Es,[r("Trip "),t("span",Ds,"("+e(a(l)(a(Z)))+")",1)]),t("th",Ms,[r("Trip Lain "),t("span",Ts,"("+e(a(l)(a(tt)))+")",1)]),t("th",Ss,[r("Trip Tunggu "),t("span",Ns,"("+e(a(l)(a(st)))+")",1)]),t("th",Ps,[r("Bonus Trip "),t("span",Cs,"("+e(a(l)(a(at)))+")",1)]),t("th",Bs,[r("Potongan Trip "),t("span",As,"("+e(a(l)(a(z)||0))+")",1)]),t("th",Vs,[r("Total "),t("span",Gs,"("+e(a(l)(a(et)))+")",1)]),t("th",Js,[r("BPJS Kesehatan "),t("span",Ys,"("+e(a(l)(a(I)||0))+")",1)]),t("th",$s,[r("BPJS Jamsos "),t("span",qs,"("+e(a(l)(a(L)||0))+")",1)]),t("th",Is,[r("Grand Total "),t("span",Ls,"("+e(a(l)(a(ft)))+")",1)])]),t("tr",zs,[t("th",null,[r("Gaji "),t("span",Ks,"("+e(a(l)(a(E)||0))+")",1)]),t("th",null,[r("Makan "),t("span",Rs,"("+e(a(l)(a(D)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",Us,"("+e(a(l)(a(M)||0))+")",1)]),t("th",null,[r("Gaji "),t("span",Hs,"("+e(a(l)(a(T)||0))+")",1)]),t("th",null,[r("Makan "),t("span",Os,"("+e(a(l)(a(S)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",Qs,"("+e(a(l)(a(N)||0))+")",1)]),t("th",null,[r("Gaji "),t("span",Ws,"("+e(a(l)(a(P)||0))+")",1)]),t("th",null,[r("Makan "),t("span",Xs,"("+e(a(l)(a(C)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",Zs,"("+e(a(l)(a(B)||0))+")",1)]),t("th",null,[r("Jmlh "),t("span",ta,"("+e(a(l)(a(ht)||0))+")",1)]),t("th",null,[r("Gaji "),t("span",sa,"("+e(a(l)(a(A)||0))+")",1)]),t("th",null,[r("Makan "),t("span",aa,"("+e(a(l)(a(V)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",ea,"("+e(a(l)(a(G)||0))+")",1)]),t("th",null,[r("Jmlh "),t("span",oa,"("+e(a(l)(a(vt)||0))+")",1)]),t("th",null,[r("Gaji "),t("span",na,"("+e(a(l)(a(J)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",la,"("+e(a(l)(a(Y)||0))+")",1)]),t("th",null,[r("Jmlh "),t("span",_a,"("+e(a(l)(a(bt)||0))+")",1)]),t("th",null,[r("Gaji "),t("span",ra,"("+e(a(l)(a($)||0))+")",1)]),t("th",null,[r("Dinas "),t("span",ua,"("+e(a(l)(a(q)||0))+")",1)])])]),t("tbody",ia,[(d(!0),m(pt,null,St(a(rt),(n,g)=>(d(),m(pt,{key:g},[n.p_status!="Remove"?(d(),m("tr",{key:0,"data-index":g},[t("td",null,e(g+1)+".",1),t("td",null,e(n.employee_id),1),t("td",null,e(n.employee_name),1),t("td",null,e(n.employee_role),1),t("td",null,e(n.employee_birth_place),1),t("td",null,e(n.employee_birth_date?a(F)(n.employee_birth_date).format("DD-MM-Y"):""),1),t("td",null,e(n.employee_tmk?a(F)(n.employee_tmk).format("DD-MM-Y"):""),1),t("td",null,e(n.employee_ktp_no),1),t("td",null,e(n.employee_address),1),t("td",null,e(n.employee_status),1),t("td",null,e(n.employee_rek_no),1),t("td",null,e(n.employee_rek_name),1),t("td",null,e(n.employee_bank_name),1),t("td",null,e(a(l)(n.sb_gaji)),1),t("td",null,e(a(l)(n.sb_makan)),1),t("td",null,e(a(l)(n.sb_dinas)),1),t("td",null,e(a(l)(n.salary_bonus_nominal)),1),t("td",null,e(a(l)(ot(n))),1),t("td",null,e(a(l)(n.sb_gaji_2)),1),t("td",null,e(a(l)(n.sb_makan_2)),1),t("td",null,e(a(l)(n.sb_dinas_2)),1),t("td",null,e(a(l)(n.salary_bonus_nominal_2)),1),t("td",null,e(a(l)(n.kerajinan)),1),t("td",null,e(a(l)(nt(n))),1),t("td",null,e(a(l)(lt(n))),1),t("td",null,e(a(l)(n.uj_gaji)),1),t("td",null,e(a(l)(n.uj_makan)),1),t("td",null,e(a(l)(n.uj_dinas)),1),t("td",null,e(a(l)(n.trip_lain)),1),t("td",null,e(a(l)(n.trip_lain_gaji)),1),t("td",null,e(a(l)(n.trip_lain_makan)),1),t("td",null,e(a(l)(n.trip_lain_dinas)),1),t("td",null,e(a(l)(n.trip_tunggu)),1),t("td",null,e(a(l)(n.trip_tunggu_gaji)),1),t("td",null,e(a(l)(n.trip_tunggu_dinas)),1),t("td",null,e(a(l)(n.trip_cpo+n.trip_pk+n.trip_tbs+n.trip_tbsk)),1),t("td",null,e(a(l)(parseFloat(n.trip_cpo_bonus_gaji)+parseFloat(n.trip_pk_bonus_gaji)+parseFloat(n.trip_tbs_bonus_gaji)+parseFloat(n.trip_tbsk_bonus_gaji))),1),t("td",null,e(a(l)(parseFloat(n.trip_cpo_bonus_dinas)+parseFloat(n.trip_pk_bonus_dinas)+parseFloat(n.trip_tbs_bonus_dinas)+parseFloat(n.trip_tbsk_bonus_dinas))),1),t("td",null,e(a(l)(n.nominal_cut)),1),t("td",null,e(a(l)(_t(n))),1),t("td",null,e(a(l)(n.employee_bpjs_kesehatan)),1),t("td",null,e(a(l)(n.employee_bpjs_jamsos)),1),t("td",null,e(a(l)(gt(n))),1)],8,pa)):b("",!0)],64))),128))],512)])])])):b("",!0)]),t("div",ca,[t("div",da,[ma,a(i).val1||a(i).val2||a(i).val3?(d(),m("div",ha,[a(i).val1?(d(),m("div",va," App 1 : "+e(a(i).val1_by.username)+" ( "+e(a(i).val1_at?a(F)(a(i).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):b("",!0)])):b("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:o[1]||(o[1]=n=>c.fnClose())}," Cancel "),c.is_view==0?(d(),m("button",{key:0,ref_key:"it_val",ref:x,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:o[2]||(o[2]=Nt(n=>mt(),["prevent"]))}," Validasi ",512)):b("",!0)])])])],512)),[[Et,c.show]])}}},xa=Vt(ba,[["__scopeId","data-v-f776eb61"]]);export{xa as default};
