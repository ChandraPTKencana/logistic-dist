import{_ as O}from"./_plugin-vue_export-helper.c27b6911.js";import{o,c as i,a as d,r as $,g as E,b as C,k as f,F as g,n as S,q as L,t as N,G as y,h as Z,v as U,N as le,w as se,P as ne,d as G,Q as oe,p as ie,e as re}from"./entry.6be760ba.js";import{_ as ae}from"./Times.51b886a8.js";import{u as ce}from"./useUtils.7cd85c78.js";const de={name:"MdiTableHeadersEye"},ue={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 24 24"},he=d("path",{fill:"currentColor",d:"M1 6v13a2 2 0 0 0 2 2h6V11h12V6a2 2 0 0 0-2-2H3a2 2 0 0 0-2 2m2 0h4v3H3m4 10H3v-3h4m0-2H3v-3h4m2-2V6h4v3m6 0h-4V6h4m-2 10a1 1 0 1 1-1 1a1 1 0 0 1 1-1m0-3a6.45 6.45 0 0 1 6 4a6.5 6.5 0 0 1-12 0a6.45 6.45 0 0 1 6-4m0 1.5a2.5 2.5 0 1 0 2.5 2.5a2.5 2.5 0 0 0-2.5-2.5"},null,-1),fe=[he];function pe(p,b,h,m,v,w){return o(),i("svg",ue,fe)}const _e=O(de,[["render",pe]]),ge={name:"PhCaretDoubleLeftBold"},me={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},ve=d("path",{fill:"currentColor",d:"M208.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L137 128ZM57 128l71.52-71.51a12 12 0 0 0-17-17l-80 80a12 12 0 0 0 0 17l80 80a12 12 0 0 0 17-17Z"},null,-1),we=[ve];function ye(p,b,h,m,v,w){return o(),i("svg",me,we)}const be=O(ge,[["render",ye]]),xe={name:"PhCaretLeftBold"},ke={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},$e=d("path",{fill:"currentColor",d:"M168.49 199.51a12 12 0 0 1-17 17l-80-80a12 12 0 0 1 0-17l80-80a12 12 0 0 1 17 17L97 128Z"},null,-1),Ce=[$e];function Se(p,b,h,m,v,w){return o(),i("svg",ke,Ce)}const Oe=O(xe,[["render",Se]]),Te={name:"PhCaretRightBold"},De={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Le=d("path",{fill:"currentColor",d:"m184.49 136.49l-80 80a12 12 0 0 1-17-17L159 128L87.51 56.49a12 12 0 1 1 17-17l80 80a12 12 0 0 1-.02 17"},null,-1),Ne=[Le];function Be(p,b,h,m,v,w){return o(),i("svg",De,Ne)}const je=O(Te,[["render",Be]]),Ee={name:"PhCaretDoubleRightBold"},Ve={xmlns:"http://www.w3.org/2000/svg",width:"1em",height:"1em",viewBox:"0 0 256 256"},Ie=d("path",{fill:"currentColor",d:"m144.49 136.49l-80 80a12 12 0 0 1-17-17L119 128L47.51 56.49a12 12 0 0 1 17-17l80 80a12 12 0 0 1-.02 17m80-17l-80-80a12 12 0 1 0-17 17L199 128l-71.52 71.51a12 12 0 0 0 17 17l80-80a12 12 0 0 0 .01-17Z"},null,-1),Je=[Ie];function ze(p,b,h,m,v,w){return o(),i("svg",Ve,Je)}const Pe=O(Ee,[["render",ze]]);const Fe=p=>(ie("data-v-892417a2"),p=p(),re(),p),He={class:"w-full flex justify-center items-center grow h-0 pb-1 px-1 flex-col"},qe={class:"w-full flex justify-end"},Ae={key:0,class:"w-full h-full flex items-center justify-center fixed top-0 left-0 z-20 p-3",style:{"background-color":"rgba(255,255,255,0.9)"}},Me={class:"relative",style:{width:"95%",height:"90%"}},Re={class:"absolute -top-7 right-0 bg-white",style:{position:"absolute",padding:"5px 10px",border:"solid 1px #ccc","border-bottom":"none","border-top-right-radius":"5px","border-top-left-radius":"5px"}},Ze={class:"w-full h-full flex flex-col items-center justify-content-center bg-white"},Ue=Fe(()=>d("div",{class:"w-full text-blue-600 font-bold grid-"}," Set Show Column Field ",-1)),Ge={class:"w-full flex flex-wrap overflow-auto"},Qe=["onClick"],Ke={class:"w-full flex justify-end"},We={class:"w-full flex justify-center items-center grow h-0 text-sm flex-col"},Xe={key:0,class:""},Ye={class:"tacky"},et={class:"sticky top-0 !z-[2]"},tt=["rowspan","colspan"],lt=["onClick"],st={key:2,class:"w-full pt-1 flex justify-end"},nt={class:"flex gap-2"},ot={class:"flex gap-2"},it=["onClick"],rt={__name:"TableView",props:{title:{type:String,required:!1,default:"Header Info"},thead:{type:Array,required:!0,default:[]},tbody:{type:Array,required:!1,default:[]},selected:{type:Number,required:!1,default:-1},scrolling:{type:Object,required:!1,default:{page:1,is_last_record:!1,scrollLeft:0,may_get_data:!0}},fnCallData:{type:Function,required:!0},loadDataType:{type:String,required:!1,default:"scroll"}},emits:["setSelected","setScrollingPage"],setup(p,{emit:b}){const h=p,m=$([]),v=$([]);let w=[],T=1;const J=(l,t="",e=[])=>{l.forEach((n,s)=>{if(n.tbl_show==1&&(t&&(n.dChild=t,n.parentIdx=e),w.push(n),n.childs!=null&&n.childs.length>0)){let a=n.key;e=[s],t&&(a=t+","+a,e.push(s)),T=T>=a.split(",").length+1?T:a.split(",").length+1,J(n.childs,a,e)}})},z=(l,t=[])=>{l.forEach((e,n)=>{t.length>0&&(e.parentIdx=[...t]),e.childs==null||e.childs.length==0?m.value.push(e):(t.length>0?t.push(n):t=[n],z(e.childs,t))}),t.pop()},P=l=>{let t=JSON.parse(JSON.stringify(l)),e=JSON.parse(JSON.stringify(l));v.value.push(e.map(s=>(s.tbl_show==null&&(s.tbl_show=1),s.permit==null&&(s.permit=1),s.freeze==null&&(s.freeze=0),delete s.childs,s)));let n=[];if(t.filter(s=>s.childs!=null&&s.childs.length>0).forEach(s=>{let a=JSON.parse(JSON.stringify(s.childs));n=n.concat(a)}),n.length>0)return P(n)};let B=0;const Q=l=>{let t=l.map(e=>e.key);return w.every(e=>{if(e.tbl_show==1){let n=e.childs==null?[]:e.childs.filter(s=>s.tbl_show==1);if(B=n.length>0&&e.tbl_show==1?n.length:1,H(e.childs),e.dChild==null){let s=t.indexOf(e.key);s>-1&&((e.childs==null||e.childs.length==0)&&(l[s].rowspan=T),e.childs!=null&&e.childs.length>0&&(l[s].rowspan=1),l[s].colspan=B)}else{let s=e.dChild.split(","),a=F(l,s,1,e);e.childs==null||e.childs.length==0?a.rowspan=T-e.dChild.split(",").length:a.rowspan=1,a.colspan=B}}return!0}),l},F=(l,t=[],e,n)=>{if(t.length==0){let s=l.childs.map(a=>a.key).indexOf(n.key);return l.childs[s]}if(t.length>0){let s=l;e==0&&(s=l.childs);let a=s.map(I=>I.key).indexOf(t[0]);if(a==-1){console.error("ID not found");return}return t.shift(),F(s[a],t,0,n)}},H=l=>{(l==null?[]:l.filter(e=>e.tbl_show==1)).length>0&&l.forEach(e=>{let n=e.childs==null?[]:e.childs.filter(s=>s.tbl_show==1);n.length>0&&e.tbl_show==1&&(B+=n.length-1,H(e.childs))})},_=$([]),q=(l,t=[])=>{l.forEach((e,n)=>{e.permit!=null&&e.permit==0?l.splice(n,1):(e.permit==null&&(e.permit=1),e.tbl_show==null&&(e.tbl_show=1),e.freeze==null&&(e.freeze=0),l.splice(n,1,e),e.childs!=null&&e.childs.length>0&&(t.push(e),q(e.childs,t)))}),t.reverse(),t.forEach((e,n)=>{e.childs.filter(a=>a.tbl_show==1).length==0?e.tbl_show=0:e.tbl_show=1}),t.reverse(),t.shift()},A=(l,t=[])=>{l.forEach((e,n)=>{e.childs!=null&&e.childs.length>0&&(t.push(e),A(e.childs,t))}),t.reverse(),t.forEach((e,n)=>{e.childs.filter(a=>a.tbl_show==1).length==0?e.tbl_show=0:e.tbl_show=1}),t.reverse(),t.shift()};E(()=>h.thead,(l,t)=>{_.value=JSON.parse(JSON.stringify(l)),q(_.value)},{deep:!0,immediate:!0}),E(()=>_.value,(l,t)=>{w=[],v.value=[],m.value=[],A(l),J(JSON.parse(JSON.stringify(l)));let e=Q(JSON.parse(JSON.stringify(l)));z(e),P(e)},{deep:!0,immediate:!0});const{pointFormat:K}=ce(),W=(l,t="")=>t=="default"?l:l==parseFloat(l)?K(l):l,k=$(null),X=async()=>{if(h.loadDataType!="scroll"||!h.scrolling.may_get_data)return;let l=k.value;if(l.scrollLeft!=h.scrolling.scrollLeft){h.scrolling.scrollLeft=l.scrollLeft;return}if(h.scrolling.is_last_record||!(Math.round(l.scrollTop)+l.clientHeight>=l.scrollHeight-1))return;let e=h.scrolling.page+1;b("setScrollingPage",e),await h.fnCallData()},j=$(!1),Y=l=>{let t=l.label;if(l.parentIdx!=null&&l.parentIdx.length>0){let e="",n=[];l.parentIdx.forEach((s,a)=>{a==0?e=_.value[s]:e=e.childs[s],n.push(e.label)}),t=n.join(" ")+" "+t}return t},ee=l=>{if(l.parentIdx!=null&&l.parentIdx.length>0){let t="";l.parentIdx.forEach((n,s)=>{s==0?t=_.value[n]:t=t.childs[n]});let e=t.childs.map(n=>n.key).indexOf(l.key);e!=-1&&(t.childs[e].tbl_show=!t.childs[e].tbl_show)}else{let t=_.value.map(e=>e.key).indexOf(l.key);t!=-1&&(_.value[t].tbl_show=!_.value[t].tbl_show)}},M=l=>{let t=JSON.parse(JSON.stringify(_.value));l=="select"?V(t,1):V(t,0),_.value=t},V=(l,t)=>{l.forEach(e=>{e.tbl_show=t,e.childs!==void 0&&e.childs.length>0&&V(e.childs,t)})},r=$({current_page:1,list_page:[],last_page:7,piece:2}),R=()=>{if(r.value.current_page=h.scrolling.page,h.scrolling.is_last_record&&r.value.current_page--,r.value.list_page=[],r.value.current_page>0){let l=0,t=0,e=0,n=0;for(let s=r.value.current_page;s>=r.value.current_page-r.value.piece;s--)s>0?l=s:e++;if(e+=r.value.piece,r.value.current_page+e>r.value.last_page){t=r.value.last_page;for(let s=l-1;s>=l-(r.value.current_page+e-t);s--)s>0&&n++;l-=n}else t=r.value.current_page+e;for(let s=l;s<=t;s++)r.value.list_page.push(s)}};E(()=>h.scrolling.page,(l,t)=>{l==1&&k.value&&(k.value.scrollTop=0),R()},{deep:!0,immediate:!0}),E(()=>h.scrolling.is_last_record,(l,t)=>{R()},{deep:!0,immediate:!0});const D=async l=>{h.loadDataType=="paginate"&&(b("setScrollingPage",l),await h.fnCallData(),k.value&&(k.value.scrollTop=0))};return(l,t)=>{const e=_e,n=ae,s=be,a=Oe,I=je,te=Pe;return o(),i("div",He,[d("div",qe,[d("button",{type:"button",name:"button",class:"m-1 text-xs",onClick:t[0]||(t[0]=c=>j.value=!0)},[C(e)])]),f(j)?(o(),i("div",Ae,[d("div",Me,[d("div",Re,[C(n,{style:{color:"black",cursor:"pointer"},onClick:t[1]||(t[1]=c=>j.value=!1)})]),d("div",Ze,[Ue,d("div",Ge,[(o(!0),i(g,null,S(f(m),(c,x)=>(o(),i("div",{class:L(["p-2 m-1 font-bold cursor-pointer",c.tbl_show==1?"bg-green-600 text-white":"bg-gray-400 text-black"]),onClick:u=>ee(c)},N(Y(c)),11,Qe))),256))]),d("div",Ke,[d("button",{class:"bg-white font-bold mr-2",onClick:t[2]||(t[2]=c=>M("select"))}," Select All "),d("button",{class:"bg-white font-bold",onClick:t[3]||(t[3]=c=>M("invert"))}," Invert All ")])]),d("div",{style:{position:"absolute",top:"12px",right:"98px","background-color":"rgba(255,255,255,0)",width:"37px",height:"36px","z-index":"1",cursor:"pointer"},onClick:t[4]||(t[4]=c=>j.value=!1)})])])):y("",!0),d("div",We,[p.tbody.length==0?(o(),i("div",Xe," Maaf Tidak Ada Record ")):(o(),i("div",{key:1,class:"w-full h-full overflow-auto",role:"sticky",ref_key:"loadRef",ref:k,onScroll:X},[d("table",Ye,[d("thead",et,[(o(!0),i(g,null,S(f(v),(c,x)=>(o(),i("tr",null,[(o(!0),i(g,null,S(c,u=>(o(),i(g,null,[u.permit?Z((o(),i("th",{key:0,rowspan:u.rowspan,colspan:u.colspan,class:L(u.freeze==1?"freeze":"")},N(u.label),11,tt)),[[U,u.tbl_show]]):y("",!0)],64))),256))]))),256))]),d("tbody",null,[(o(!0),i(g,null,S(p.tbody,(c,x)=>(o(),i("tr",{key:x,onClick:u=>l.$emit("setSelected",x),class:L(p.selected==x?"active":"")},[(o(!0),i(g,null,S(f(m),u=>(o(),i(g,null,[u.permit?Z((o(),le(oe(u.freeze==0?"td":"th"),{key:0,class:"my-list"},{default:se(()=>[d("div",{class:L(["flex items-center",u.class?u.class:"justify-center"])},[ne(l.$slots,u.key,{item:c,index:x},()=>[u.dateformat?(o(),i(g,{key:0},[G(N(c[u.key]?l.$moment(c[u.key]).format(u.dateformat):""),1)],64)):(o(),i(g,{key:1},[G(N(c[u.key]?W(c[u.key],u.type):""),1)],64))],!0)],2)]),_:2},1536)),[[U,u.tbl_show]]):y("",!0)],64))),256))],10,lt))),128))])])],544)),p.loadDataType=="paginate"?(o(),i("div",st,[d("div",nt,[f(r).list_page.indexOf(1)==-1?(o(),i("div",{key:0,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[5]||(t[5]=c=>D(1))},[C(s)])):y("",!0),f(r).list_page.indexOf(1)==-1?(o(),i("div",{key:1,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[6]||(t[6]=c=>D(f(r).current_page-1))},[C(a)])):y("",!0),d("div",ot,[(o(!0),i(g,null,S(f(r).list_page,c=>(o(),i("div",{class:L([c==f(r).current_page?"bg-slate-800 text-white":"bg-white text-slate-800","px-3 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm"]),onClick:x=>D(c)},N(c),11,it))),256))]),f(r).list_page.indexOf(f(r).last_page)==-1?(o(),i("div",{key:2,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[7]||(t[7]=c=>D(f(r).current_page+1))},[C(I)])):y("",!0),f(r).list_page.indexOf(f(r).last_page)==-1?(o(),i("div",{key:3,class:"w-7 h-7 flex items-center justify-center ring-2 ring-slate-800 cursor-pointer text-sm",onClick:t[8]||(t[8]=c=>D(f(r).last_page))},[C(te)])):y("",!0)])])):y("",!0)])])}}},ht=O(rt,[["__scopeId","data-v-892417a2"]]);export{ht as _};
