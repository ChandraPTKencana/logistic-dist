import{_ as N}from"./HeaderPopup.vue.013ce12d.js";import{_ as q}from"./WidthMiniPart.vue.b1c52855.js";import{r as p,g as $,f as B,k as V,L as j,o as n,c as d,a as t,b as D,t as s,l as a,n as v,D as F,H as I,x as w,y as k,p as P,e as T}from"./entry.64cd1aac.js";import{u as E}from"./useUtils.5c007a0a.js";import{u as M}from"./useMyFetch.26817b29.js";import{_ as J}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.580cbe5f.js";const o=i=>(P("data-v-2d6823ae"),i=i(),T(),i),O={class:"box-fixed"},z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},U={class:"w-full flex flex-col items-center grow overflow-auto"},K={class:"w-full flex flex-row flex-wrap"},L={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},Q=o(()=>t("label",{for:""},"Tujuan",-1)),W={class:"w-full card-border"},G={class:"w-6/12 sm:w-4/12 md:w-4/12 lg:w-3/12 flex flex-col flex-wrap p-1"},R=o(()=>t("label",{for:""},"Jenis",-1)),X={class:"w-full card-border"},Z={class:"w-full sm:w-3/12 flex px-2 py-3"},ee={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-end"},ae=o(()=>t("div",{class:"absolute bg-white -top-3"}," Peralihan ",-1)),te={class:"w-6/12 flex flex-col flex-wrap p-1"},le={class:"w-full card-border"},se={class:"w-6/12 flex flex-col flex-wrap p-1"},oe={class:"card-border"},ie={class:"w-full sm:w-12/12 flex px-2 py-3"},re={class:"w-full flex flex-wrap ring-1 ring-gray-500 p-2 relative items-start"},ne=o(()=>t("div",{class:"absolute bg-white -top-3"}," Account ",-1)),de={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},_e=o(()=>t("label",{for:""},"Info",-1)),ce={class:"card-border"},ve={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ue=o(()=>t("label",{for:""},"Deskripsi",-1)),fe={class:"w-full card-border"},me={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},pe=o(()=>t("label",{for:""},"Nominal",-1)),we={class:"w-full card-border"},he={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},xe=o(()=>t("label",{for:""},"Qty",-1)),ye={class:"w-full card-border"},be={class:"w-full sm:w-4/12 md:w-4/12 lg:w-4/12 flex flex-col flex-wrap p-1"},ge=o(()=>t("label",{for:""},"Total",-1)),Ye={class:"w-full card-border"},De={class:"w-full flex items-center justify-end"},ke={class:"w-full flex flex-wrap p-3 items-center"},Me=o(()=>t("div",null," Di Validasi oleh : ",-1)),He={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},Ae={key:0},Ce={key:1},Se={key:2},Ne={key:3},qe={key:4},$e={key:5},Be={__name:"extra_money_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(i){const _=i,{$moment:f}=I(),{pointFormat:h}=E(),e=p({...{id:"",tanggal:new Date,type:"Kerajinan",nominal:0,note:"",attachment_1:"",attachment_1_preview:""}}),y=$("token"),b=p({}),g=p(null);p([]);const u=p(JSON.parse(JSON.stringify({_:{id:{tcon:"",text:"ID",val:""},code:{tcon:"",text:"Code",val:""},name:{tcon:"",text:"Name",val:""}},id:"",name:"",title:""}))),H=async()=>{w().loading_full=!0,b.value={};const c=new FormData;let r="post",m=_.id;m==0||(c.append("id",m),c.append("_method","PUT"));const{data:l,error:x,status:C}=await M("/extra_money_validasi",{method:r,headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},body:c,retry:0});if(w().loading_full=!1,C.value==="error"){k().trigger(x,b);return}e.value.val=l.value.val,e.value.val_user=l.value.val_user,e.value.val_by=l.value.val_by,e.value.val_at=l.value.val_at,e.value.val1=l.value.val1,e.value.val1_user=l.value.val1_user,e.value.val1_by=l.value.val1_by,e.value.val1_at=l.value.val1_at,e.value.val2=l.value.val2,e.value.val2_user=l.value.val2_user,e.value.val2_by=l.value.val2_by,e.value.val2_at=l.value.val2_at;let Y=_.p_data.map(S=>S.id).indexOf(_.id);Y>-1&&_.p_data.splice(Y,1,{...e.value}),_.fnClose()},A=async()=>{w().loading_full=!0;const{data:c,error:r,status:m}=await M("/extra_money",{method:"get",headers:{Authorization:`Bearer ${y.value}`,Accept:"application/json"},params:{id:_.id},retry:0});if(w().loading_full=!1,m.value==="error"){k().trigger(r);return}let l=c.value.data;e.value=l,u.value._.id.val=l.ac_account_id,u.value._.name.val=l.ac_account_name,u.value._.code.val=l.ac_account_code,u.value.id=l.ac_account_id,u.value.name=l.ac_account_code,u.value.title=l.ac_account_name};return B(()=>_.show,(c,r)=>{c==!0&&(_.is_view==!1&&setTimeout(()=>{g.value.focus()},1),A())},{immediate:!0}),(c,r)=>{const m=N,l=q;return V((n(),d("section",O,[t("div",null,[D(m,{title:"Form Transaction Extra Money Validation",fn:i.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),t("form",z,[t("div",U,[t("div",K,[t("div",L,[Q,t("div",W,s(a(e).xto),1)]),t("div",G,[R,t("div",X,s(a(e).jenis),1)]),t("div",Z,[t("div",ee,[ae,t("div",te,[t("div",le,s(a(e).transition_type),1)]),t("div",se,[t("div",oe,s(a(e).transition_target),1)])])]),t("div",ie,[t("div",re,[ne,t("div",de,[_e,t("div",ce,[D(l,{selected:a(u)},null,8,["selected"])])]),t("div",ve,[ue,t("div",fe,s(a(e).description),1)]),t("div",me,[pe,t("div",we,s(a(h)(a(e).nominal)),1)]),t("div",he,[xe,t("div",ye,s(a(h)(a(e).qty)),1)]),t("div",be,[ge,t("div",Ye,s(a(h)(a(e).nominal*a(e).qty)),1)])])])])]),t("div",De,[t("div",ke,[Me,a(e).val1||a(e).val2?(n(),d("div",He,[a(e).val1?(n(),d("div",Ae," App 1 : "+s(a(e).val1_by.username)+" ( "+s(a(e).val1_at?a(f)(a(e).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),a(e).val2?(n(),d("div",Ce," App 2 : "+s(a(e).val2_by.username)+" ( "+s(a(e).val2_at?a(f)(a(e).val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),a(e).val3?(n(),d("div",Se," App 3 : "+s(a(e).val3_by.username)+" ( "+s(a(e).val3_at?a(f)(a(e).val3_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),a(e).val4?(n(),d("div",Ne," App 4 : "+s(a(e).val4_by.username)+" ( "+s(a(e).val4_at?a(f)(a(e).val4_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),a(e).val5?(n(),d("div",qe," App 5 : "+s(a(e).val5_by.username)+" ( "+s(a(e).val5_at?a(f)(a(e).val5_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0),a(e).val6?(n(),d("div",$e," App 6 : "+s(a(e).val6_by.username)+" ( "+s(a(e).val6_at?a(f)(a(e).val6_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):v("",!0)])):v("",!0)]),t("button",{type:"button",name:"button",class:"w-36 m-1",onClick:r[0]||(r[0]=x=>i.fnClose())}," Cancel "),i.is_view==0?(n(),d("button",{key:0,ref_key:"it_val",ref:g,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:r[1]||(r[1]=F(x=>H(),["prevent"]))}," Validasi ",512)):v("",!0)])])])],512)),[[j,i.show]])}}},ze=J(Be,[["__scopeId","data-v-2d6823ae"]]);export{ze as default};
