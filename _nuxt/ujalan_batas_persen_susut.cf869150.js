import{_ as A}from"./HeaderPopup.vue.c8240606.js";import{_ as F}from"./InputPointFormat.vue.3596e09b.js";import{r as b,g as P,i as $,f as I,k as D,K as N,o as h,c as x,a as e,b as g,t as r,l as t,C as T,n as K,x as c,y,p as V,e as M}from"./entry.420fadb3.js";import{u as U}from"./useUtils.47ff20fa.js";import{u as k}from"./useMyFetch.777b6a87.js";import{_ as z}from"./_plugin-vue_export-helper.c27b6911.js";import"./Times.47e6407b.js";const i=d=>(V("data-v-cf559b51"),d=d(),M(),d),E={class:"box-fixed"},R={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},H={class:"w-full flex flex-col items-center grow overflow-auto"},J={class:"w-full flex flex-row flex-wrap"},O={class:"w-full sm:w-8/12 md:w-6/12 lg:w-5/12 flex flex-col flex-wrap p-1"},G=i(()=>e("label",{for:""},"To",-1)),L={class:"card-border disabled"},Q={class:"w-1/2 sm:w-4/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},W=i(()=>e("label",{for:""},"Jenis",-1)),X={class:"card-border disabled"},Y={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},Z=i(()=>e("label",{for:""},"Trip Bonus Supir",-1)),ee={class:"card-border disabled"},se={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},te=i(()=>e("label",{for:""},"Trip Bonus Kernet",-1)),ae={class:"card-border disabled"},oe={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},le=i(()=>e("label",{for:""},"KM Range",-1)),re={class:"card-border disabled"},ie={class:"w-1/2 sm:w-3/12 md:w-3/12 lg:w-2/12 flex flex-col flex-wrap p-1"},de=i(()=>e("label",{for:""},"Asal Peralihan",-1)),ne={class:"card-border disabled"},_e={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},ue=i(()=>e("label",{for:""},"Tipe",-1)),ce={class:"card-border disabled"},fe={class:"w-full sm:w-6/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},pe=i(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),me={class:"card-border disabled"},we={class:"w-1/2 sm:w-3/12 md:w-2/12 lg:w-2/12 flex flex-col flex-wrap p-1"},ve=i(()=>e("label",{for:""},"Batas Persen Susut",-1)),be={class:"w-full"},he={class:"text-red-500"},xe={class:"w-full flex items-center justify-end"},ge={__name:"ujalan_batas_persen_susut",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_copy:{type:[Boolean,Number],required:!0,default:!1}},setup(d){const o=d,{pointFormat:f}=U(),m={id:-1,xto:"",km_range:0,bonus_trip_supir:0,bonus_trip_kernet:0,batas_persen_susut:0,tipe:"",jenis:"",harga:0,note_for_remarks:"",transition_from:""},s=b({...m}),w=P("token"),p=b({}),S=async()=>{c().loading_full=!0,p.value={};const l=new FormData;l.append("batas_persen_susut",s.value.batas_persen_susut);let a="post",n=o.is_copy?0:o.id;n==0||(l.append("id",n),l.append("_method","PUT"));const{data:_,error:u,status:C}=await k("/ujalan/batas_persen_susut",{method:a,headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},body:l,retry:0});if(c().loading_full=!1,C.value==="error"){y().trigger(u,p);return}if(n<=0)s.value.id=_.value.id,s.value.created_at=_.value.created_at,s.value.updated_at=_.value.updated_at,o.p_data.unshift(s.value);else{s.value.updated_at=_.value.updated_at;let v=o.p_data.map(q=>q.id).indexOf(n);v>=-1&&o.p_data.splice(v,1,{...s.value})}o.fnClose()},j=$(()=>!1),B=async()=>{c().loading_full=!0;const{data:l,error:a,status:n}=await k("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:o.id},retry:0});if(c().loading_full=!1,n.value==="error"){y().trigger(a);return}s.value=l.value.data,o.is_copy&&(s.value.val=0,s.value.val1=0)};return I(()=>o.show,(l,a)=>{l==!0&&(s.value={...m},o.id!=0&&B())},{immediate:!0}),(l,a)=>{const n=A,_=F;return D((h(),x("section",E,[e("div",null,[g(n,{title:"Form Batas Persen Susut",fn:d.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",R,[e("div",H,[e("div",J,[e("div",O,[G,e("div",L,r(t(s).xto),1)]),e("div",Q,[W,e("div",X,r(t(s).jenis),1)]),e("div",Y,[Z,e("div",ee,r(t(f)(t(s).bonus_trip_supir||0)),1)]),e("div",se,[te,e("div",ae,r(t(f)(t(s).bonus_trip_kernet||0)),1)]),e("div",oe,[le,e("div",re,r(t(f)(t(s).km_range||0)),1)]),e("div",ie,[de,e("div",ne,r(t(s).transition_from),1)]),e("div",_e,[ue,e("div",ce,r(t(s).tipe),1)]),e("div",fe,[pe,e("div",me,r(t(s).note_for_remarks),1)]),e("div",we,[ve,e("div",be,[g(_,{class:"w-full h-full p-1",type:"text",value:t(s).batas_persen_susut||0,onInput:a[0]||(a[0]=u=>t(s).batas_persen_susut=u)},null,8,["value"])]),e("p",he,r(t(p).batas_persen_susut),1)])])]),e("div",xe,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:a[1]||(a[1]=u=>d.fnClose())}," Cancel "),t(j)?K("",!0):(h(),x("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:a[2]||(a[2]=T(u=>S(),["prevent"]))}," Save "))])])])],512)),[[N,d.show]])}}},Ae=z(ge,[["__scopeId","data-v-cf559b51"]]);export{Ae as default};
