import{_ as D}from"./HeaderPopup.vue.e8f8ba03.js";import{r as M,f as k,j as H,m as A,J as C,o as n,c as d,a as e,b as j,t as a,k as s,l as c,x as B,E as N,A as m,B as b}from"./entry.1af0e639.js";import"./useUtils.06e9219f.js";import{u as h}from"./useMyFetch.6a27c764.js";import"./Times.7c581167.js";import"./_plugin-vue_export-helper.c27b6911.js";const S={class:"box-fixed"},V={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},$={class:"w-full flex flex-col items-center grow overflow-auto"},q={class:"w-full"},T={class:"w-full flex flex-wrap p-3 items-center text-xs"},F=e("label",{for:""},"U.jalan Per",-1),P={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},E=e("label",{for:""},"Jenis",-1),z={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},J=e("label",{for:""},"Supir",-1),K={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},U={key:0},O=e("label",{for:""},"Kernet",-1),G={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},I=e("label",{for:""},"No Pol",-1),L={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Q=e("label",{for:""},"Tujuan",-1),R={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},W=e("label",{for:""},"Tipe",-1),X={class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white"},Z={class:"w-full flex flex-wrap items-center grow overflow-auto"},ee={class:"w-full sm:w-1/2 text-center p-1"},te={class:"border-[1px] p-1"},se={class:"font-bold"},ae=["src"],le={class:"w-full sm:w-1/2 text-center p-1"},ie={class:"border-[1px] p-1"},re={class:"border-[1px] p-1"},oe={class:"font-bold"},_e=["src"],ne={class:"w-full sm:w-1/2 text-center p-1"},de={class:"border-[1px] p-1"},ve={class:"border-[1px] p-1"},ce={class:"font-bold"},ue=["src"],me={class:"w-full sm:w-1/2 text-center p-1"},fe={class:"border-[1px] p-1"},pe={class:"border-[1px] p-1"},be={class:"font-bold"},he=["src"],ge={class:"w-full p-1"},we=e("label",{for:""}," Note ",-1),xe={class:"card-border"},ye={class:"w-full flex items-center justify-end"},Ye={class:"w-full flex flex-wrap p-3 items-center"},De=e("div",null," Di Validasi oleh : ",-1),Me={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},ke={key:0},He={key:1},Ae={key:2},qe={__name:"trx_trp_absen_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]},is_view:{type:Boolean,required:!1,default:!1}},setup(u){const _=u,{$moment:r}=N(),t=M({...{id:-1,tanggal:new Date,id_uj:-1,xto:"",tipe:"",jenis:"",amount:0,img_leaves:[],img_leave:"",img_arrive:"",img_return:"",img_till:"",img_leave_file:"",img_arrive_file:"",img_return_file:"",img_till_file:"",img_leave_ts:"",img_arrive_ts:"",img_return_ts:"",img_till_ts:"",ritase_note:"",ritase_val:0,ritase_val_by:{username:""},ritase_val_at:"",ritase_val1:0,ritase_val1_by:{username:""},ritase_val1_at:"",ritase_val2:0,ritase_val2_by:{username:""},ritase_val2_at:""}}),f=k("token"),g=async()=>{m().loading_full=!0;const o=new FormData;let i="post",v=_.id;v==0||(o.append("id",v),o.append("_method","PUT"));const{data:l,error:x,status:y}=await h("/trx_trp/absen/validasi",{method:i,headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},body:o,retry:0});if(m().loading_full=!1,y.value==="error"){b().trigger(x);return}t.value.ritase_val=l.value.ritase_val,t.value.ritase_val_user=l.value.ritase_val_user,t.value.ritase_val_by=l.value.ritase_val_by,t.value.ritase_val_at=l.value.ritase_val_at,t.value.ritase_val1=l.value.ritase_val1,t.value.ritase_val1_user=l.value.ritase_val1_user,t.value.ritase_val1_by=l.value.ritase_val1_by,t.value.ritase_val1_at=l.value.ritase_val1_at,t.value.ritase_val2=l.value.ritase_val2,t.value.ritase_val2_user=l.value.ritase_val2_user,t.value.ritase_val2_by=l.value.ritase_val2_by,t.value.ritase_val2_at=l.value.ritase_val2_at;let p=_.p_data.map(Y=>Y.id).indexOf(_.id);p>=-1&&_.p_data.splice(p,1,{...t.value}),_.fnClose()},w=async()=>{m().loading_full=!0;const{data:o,error:i,status:v}=await h("/trx_trp/absen",{method:"get",headers:{Authorization:`Bearer ${f.value}`,Accept:"application/json"},params:{id:_.id},retry:0});if(m().loading_full=!1,v.value==="error"){b().trigger(i);return}t.value=o.value.data};return H(()=>_.show,(o,i)=>{o==!0&&w()},{immediate:!0}),(o,i)=>{const v=D;return A((n(),d("section",S,[e("div",null,[j(v,{title:"Form Transaction Validation",fn:u.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",V,[e("div",$,[e("div",q,[e("div",T,[e("div",null,[F,e("div",P,a(s(t).tanggal?s(r)(s(t).tanggal).format("DD-MM-YYYY"):""),1)]),e("div",null,[E,e("div",z,a(s(t).jenis),1)]),e("div",null,[J,e("div",K,a(s(t).supir),1)]),s(t).kernet?(n(),d("div",U,[O,e("div",G,a(s(t).kernet),1)])):c("",!0),e("div",null,[I,e("div",L,a(s(t).no_pol),1)]),e("div",null,[Q,e("div",R,a(s(t).xto),1)]),e("div",null,[W,e("div",X,a(s(t).tipe),1)])])]),e("div",Z,[e("div",ee,[e("div",te,[e("label",se,"Berangkat : "+a(s(t).img_leave_ts?s(r)(s(t).img_leave_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_leave,alt:""},null,8,ae)])])]),e("div",le,[e("div",ie,[e("div",re,[e("label",oe,"Tiba : "+a(s(t).img_arrive_ts?s(r)(s(t).img_arrive_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_arrive,alt:""},null,8,_e)])])])]),e("div",ne,[e("div",de,[e("div",ve,[e("label",ce,"Kembali : "+a(s(t).img_return_ts?s(r)(s(t).img_return_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_return,alt:""},null,8,ue)])])])]),e("div",me,[e("div",fe,[e("div",pe,[e("label",be,"Sampai : "+a(s(t).img_till_ts?s(r)(s(t).img_till_ts).format("DD-MM-YYYY HH:mm"):""),1),e("div",null,[e("img",{src:s(t).img_till,alt:""},null,8,he)])])])]),e("div",ge,[we,e("div",xe,a(s(t).ritase_note),1)])])]),e("div",ye,[e("div",Ye,[De,s(t).ritase_val||s(t).ritase_val1||s(t).ritase_val2?(n(),d("div",Me,[s(t).ritase_val?(n(),d("div",ke," App 1 : "+a(s(t).ritase_val_by.username)+" ( "+a(s(t).ritase_val_at?s(r)(s(t).ritase_val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),s(t).ritase_val1?(n(),d("div",He," App 2 : "+a(s(t).ritase_val1_by.username)+" ( "+a(s(t).ritase_val1_at?s(r)(s(t).ritase_val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0),s(t).ritase_val2?(n(),d("div",Ae," App 3 : "+a(s(t).ritase_val2_by.username)+" ( "+a(s(t).ritase_val2_at?s(r)(s(t).ritase_val2_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):c("",!0)])):c("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:i[0]||(i[0]=l=>u.fnClose())}," Cancel "),u.is_view==0?(n(),d("button",{key:0,type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:i[1]||(i[1]=B(l=>g(),["prevent"]))}," Validasi ")):c("",!0)])])])],512)),[[C,u.show]])}}};export{qe as default};
