import{_ as q}from"./HeaderPopup.vue.efc68b23.js";import{g as D,r as f,j as A,f as F,k as $,L as B,o as _,c as h,a as e,b as T,F as P,E,t as n,l as y,D as I,x as d,y as v}from"./entry.36c38a87.js";import{u as O}from"./useUtils.a0510d7f.js";import{u as g}from"./useMyFetch.933fc75d.js";import"./Times.1c210fa8.js";import"./_plugin-vue_export-helper.c27b6911.js";const z={class:"box-fixed"},K={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto p-2 bg-white"},L={class:"w-full flex flex-col items-center grow overflow-auto"},U={class:"w-full",role:"sticky"},V={class:"tacky",style:{"white-space":"normal"}},J={class:"sticky top-0 !z-[2]"},M={class:"min-w-[50px] !w-[50px] max-w-[50px]"},H=e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1),R=e("th",null,"ID",-1),G=e("th",null,"No Pol",-1),Q=e("th",null,"Tujuan",-1),W=e("th",null,"Info",-1),X=e("th",null,"Tipe",-1),Y=e("th",null,"Jenis",-1),Z=e("th",null,"Amount",-1),ee=e("th",null,"Supir Name",-1),te=e("th",null,"Kernet Name",-1),se={ref:"to_move"},le=["data-index"],oe={class:"tools cell"},ne={class:"w-full h-full flex items-center justify-center"},ie=["checked","onClick"],ae={class:"cell min-w-[50px] !w-[50px] max-w-[50px]"},ce={class:"w-full h-full flex items-center justify-center"},re={class:"cell min-w-[150px] !w-[150px] max-w-[150px]"},ue={class:"w-full h-full flex items-center justify-center"},de={class:"cell"},fe={class:"w-full h-full flex items-center justify-center"},_e={class:"cell"},he={class:"w-full h-full flex items-center justify-center"},me={class:"cell"},pe={class:"w-full h-full flex items-center justify-center"},we={class:"cell"},xe={class:"w-full h-full flex items-center justify-center"},ye={class:"cell"},ve={class:"w-full h-full flex items-center justify-center"},ge={class:"cell"},be={class:"w-full h-full flex items-center justify-center"},ke={class:"cell"},je={class:"w-full h-full flex items-center justify-center"},Ce={class:"w-full flex items-center justify-end"},$e={__name:"fin_payment_req_trx_trps",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},excludes:{type:String,required:!1},exclude_lists:{type:Array,required:!1},id:{type:Number,required:!1,default:0}},emits:["setKData","setIsNew"],setup(r,{emit:m}){const u=r,{pointFormat:b}=O(),p=D("token"),w=f({});A();const k=async()=>{d().loading_full=!0,w.value={};const s=new FormData;s.append("details",JSON.stringify(i.value));let l="post",o=u.id;o==0||(s.append("id",o),s.append("_method","PUT"));const{data:t,error:c,status:x}=await g("/fin_payment_req",{method:l,headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},body:s,retry:0});if(d().loading_full=!1,x.value==="error"){v().trigger(c,w);return}m("setKData",t.value.data),m("setIsNew",u.id==0),u.fnClose()},i=f([]),j=s=>i.value.map(o=>o.id).indexOf(s.id)!==-1,C=s=>{const l=i.value.map(o=>o.id).indexOf(s.id);l===-1?i.value.push(s):i.value.splice(l,1)},S=s=>{i.value.length<a.value.length?i.value=[...a.value]:i.value=[]},a=f([]),N=async()=>{d().loading_full=!0;const{data:s,error:l,status:o}=await g("/fin_payment_req/get_trx_trp_unprocessed",{method:"get",headers:{Authorization:`Bearer ${p.value}`,Accept:"application/json"},params:{},retry:0});if(d().loading_full=!1,o.value==="error"){v().trigger(l);return}a.value=s.value.data};return F(()=>u.show,async(s,l)=>{s==!0&&(a.value=[],await N(),i.value=[])},{immediate:!0}),(s,l)=>{const o=q;return $((_(),h("section",z,[e("div",null,[T(o,{title:"Pilih Trip yang akan dibayar",fn:r.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",K,[e("div",L,[e("div",U,[e("table",V,[e("thead",null,[e("tr",J,[e("th",M,[e("button",{type:"button",name:"button",class:"bg-yellow-600",onClick:l[0]||(l[0]=t=>S())}," U/Ch ")]),H,R,G,Q,W,X,Y,Z,ee,te])]),e("tbody",se,[(_(!0),h(P,null,E(y(a),(t,c)=>(_(),h("tr",{key:c,"data-index":c},[e("td",oe,[e("div",ne,[e("input",{type:"checkbox",checked:j(t),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:bg-gray-700 dark:border-gray-600 cursor-pointer",onClick:x=>C(t)},null,8,ie)])]),e("td",null,n(c+1)+".",1),e("td",ae,[e("div",ce,n(t.id),1)]),e("td",re,[e("div",ue,n(t.no_pol),1)]),e("td",de,[e("div",fe,n(t.uj.xto),1)]),e("td",_e,[e("div",he,n(t.uj.asst_opt),1)]),e("td",me,[e("div",pe,n(t.uj.tipe),1)]),e("td",we,[e("div",xe,n(t.uj.jenis),1)]),e("td",ye,[e("div",ve,n(y(b)(t.amount||0)),1)]),e("td",ge,[e("div",be,n(t.supir),1)]),e("td",ke,[e("div",je,n(t.kernet),1)])],8,le))),128))],512)])])]),e("div",Ce,[e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:l[1]||(l[1]=t=>r.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:l[2]||(l[2]=I(t=>k(),["prevent"]))}," Select ")])])])],512)),[[B,r.show]])}}};export{$e as default};
