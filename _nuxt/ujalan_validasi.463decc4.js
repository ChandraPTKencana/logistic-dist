import{_ as T}from"./HeaderPopup.vue.5d5e0ea9.js";import $ from"./Times.14b13dbc.js";import M from"./Check.2a337176.js";import{r as v,f as R,G as F,j as U,m as E,J as P,o as i,c as r,a as e,b as J,t as l,k as t,d as y,F as b,y as N,C as m,D as S,l as w,x as Q,E as G,A as g,B as V,p as K,e as L}from"./entry.e2a348bc.js";import{u as O}from"./useUtils.eac65038.js";import{u as B}from"./useMyFetch.e2cc1362.js";import{_ as W}from"./_plugin-vue_export-helper.c27b6911.js";const a=f=>(K("data-v-77e05035"),f=f(),L(),f),X={class:"box-fixed"},Z={action:"#",class:"w-full flex grow flex-col h-0 overflow-auto bg-white"},ee={class:"w-full flex flex-col items-center grow overflow-auto"},te={class:"w-full flex flex-row flex-wrap"},se={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},le=a(()=>e("label",{for:""},"To",-1)),ae={class:"card-border"},oe={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ce=a(()=>e("label",{for:""},"Jenis",-1)),ne={class:"card-border"},ie={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},re=a(()=>e("label",{for:""},"Harga",-1)),_e={class:"card-border"},de={class:"w-full sm:w-4/12 md:w-3/12 lg:w-3/12 flex flex-col flex-wrap p-1"},ue=a(()=>e("label",{for:""},"Asal Peralihan",-1)),fe={class:"card-border"},he={class:"w-full sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},pe=a(()=>e("label",{for:""},"Tipe",-1)),me={class:"card-border"},xe={class:"w-full sm:w-4/12 md:w-6/12 lg:w-6/12 flex flex-col flex-wrap p-1"},we=a(()=>e("label",{for:""},"Ket. Untuk Remarks",-1)),ve={class:"card-border"},ye={class:"w-full flex flex-col sm:flex-row grow p-1 justify-between flex-wrap 2xl:overflow-hidden"},be={class:"w-full p-0 2xl:pr-1 2xl:w-1/2 2xl:h-full 2xl:overflow-auto"},ge={class:"w-full",role:"sticky"},ke={class:"tacky w-full",style:{"white-space":"normal"}},je=a(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"6",class:"!bg-slate-800 text-white font-bold"}," Detail Uang Jalan ")],-1)),De={class:"sticky top-8 !z-[2]"},Ae=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),Ce=a(()=>e("th",null,"Desc",-1)),qe=a(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Harga @",-1)),Fe=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"Qty",-1)),Ne={class:"min-w-[100px] !w-[100px] max-w-[100px]"},Se=a(()=>e("br",null,null,-1)),Ve={class:"text-sm"},Be=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"For Remarks",-1)),Ye={ref:"to_move"},ze=["data-index"],He={class:"cell"},Ie={class:"w-full h-full flex items-center justify-center"},Te={class:"cell bold"},$e={class:"w-full h-full flex items-center justify-center"},Me={class:"cell"},Re={class:"w-full h-full flex items-center justify-center"},Ue={class:"cell"},Ee={class:"w-full h-full flex items-center justify-center"},Pe={class:"cell"},Je={class:"w-full h-full flex items-center justify-center"},Qe={class:"w-full px-0 py-2 2xl:pl-1 2xl:py-0 2xl:w-1/2 2xl:h-full 2xl:overflow-auto"},Ge={class:"w-full",role:"sticky"},Ke={class:"tacky w-full !table-auto",style:{"white-space":"normal"}},Le=a(()=>e("tr",{class:"sticky top-0 !z-[2]"},[e("td",{colspan:"9",class:"!bg-slate-800 text-white font-bold"}," Detail PVR ")],-1)),Oe={class:"sticky top-8 !z-[2]"},We=a(()=>e("th",{class:"min-w-[50px] !w-[50px] max-w-[50px]"},"No",-1)),Xe=a(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Acc ID",-1)),Ze=a(()=>e("th",{class:"!min-w-[100px] !w-[100px] !max-w-[100px]"},"Acc Code",-1)),et=a(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Acc Name",-1)),tt=a(()=>e("th",{class:"!min-w-[150px] !w-[150px] !max-w-[150px]"},"Desc",-1)),st=a(()=>e("th",{class:"min-w-[100px] !w-[100px] max-w-[100px]"},"Amount",-1)),lt=a(()=>e("th",{class:"min-w-[40px] !w-[40px] max-w-[40px]"},"Qty",-1)),at=a(()=>e("th",{class:"min-w-[80px] !w-[80px] max-w-[80px]"},"For",-1)),ot={class:"min-w-[100px] !w-[100px] max-w-[100px]"},ct=a(()=>e("br",null,null,-1)),nt={class:"text-sm"},it={ref:"to_move"},rt=["data-index"],_t={class:"w-full h-full flex items-center justify-center"},dt={class:"w-full h-full flex items-center justify-center"},ut={class:"w-full h-full flex items-center justify-center"},ft={key:0,class:"cell"},ht={class:"w-full h-full flex items-center justify-center"},pt={class:"w-full h-full flex items-center justify-center"},mt={class:"cell"},xt={class:"w-full h-full flex items-center justify-center"},wt={class:"w-full flex items-center justify-end"},vt={class:"w-full flex flex-wrap p-3 items-center"},yt=a(()=>e("div",null," Di Validasi oleh : ",-1)),bt={key:0,class:"border-solid border-2 w-fit p-1 bg-slate-700 text-white text-xs"},gt={key:0},kt={key:1},jt={__name:"ujalan_validasi",props:{show:{type:Boolean,required:!0},fnClose:{type:Function,required:!1},fnSelect:{type:Function,required:!1},id:{type:Number,required:!1,default:0},p_data:{type:Array,required:!0,default:[]}},setup(f){const h=f,{$moment:D}=G(),{pointFormat:u}=O(),s=v({...{id:-1,xto:"",tipe:"",jenis:"",harga:0,note_for_remarks:0,details:[],val:0,val_by:{username:""},val_at:"",val1:0,val1_by:{username:""},val1_at:""}}),A=R("token"),C=v({}),q=v([]),k=v([]),Y=async()=>{g().loading_full=!0,C.value={};const c=new FormData;let n="post",x=h.id;x==0||(c.append("id",x),c.append("_method","PUT"));const{data:_,error:j,status:o}=await B("/ujalan_validasi",{method:n,headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},body:c,retry:0});if(g().loading_full=!1,o.value==="error"){V().trigger(j,C);return}s.value.val=_.value.val,s.value.val_user=_.value.val_user,s.value.val_by=_.value.val_by,s.value.val_at=_.value.val_at,s.value.val1=_.value.val1,s.value.val1_user=_.value.val1_user,s.value.val1_by=_.value.val1_by,s.value.val1_at=_.value.val1_at;let d=h.p_data.map(I=>I.id).indexOf(h.id);d>=-1&&h.p_data.splice(d,1,{...s.value}),h.fnClose()},z=async()=>{g().loading_full=!0;const{data:c,error:n,status:x}=await B("/ujalan_",{method:"get",headers:{Authorization:`Bearer ${A.value}`,Accept:"application/json"},params:{id:h.id},retry:0});if(g().loading_full=!1,x.value==="error"){V().trigger(n);return}s.value=c.value.data,q.value=c.value.data.details,k.value=c.value.data.details2},H=F(()=>{let c=0;return k.value.forEach(n=>{n.p_status!="Remove"&&(c+=n.qty*n.amount)}),c}),p=F(()=>!1);return U(()=>h.show,(c,n)=>{c==!0&&z()},{immediate:!0}),(c,n)=>{const x=T,_=$,j=M;return E((i(),r("section",X,[e("div",null,[J(x,{title:"Form Ujalan Validation",fn:f.fnClose,class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("form",Z,[e("div",ee,[e("div",te,[e("div",se,[le,e("div",ae,l(t(s).xto),1)]),e("div",oe,[ce,e("div",ne,l(t(s).jenis),1)]),e("div",ie,[re,e("div",_e,l(t(u)(t(s).harga||0)),1)]),e("div",de,[ue,e("div",fe,l(t(s).transition_from),1)]),e("div",he,[pe,e("div",me,l(t(s).tipe),1)]),e("div",xe,[we,e("div",ve,l(t(s).note_for_remarks),1)])]),e("div",ye,[e("div",be,[e("div",ge,[e("table",ke,[e("thead",null,[je,e("tr",De,[Ae,Ce,qe,Fe,e("th",Ne,[y("Total "),Se,y(),e("span",Ve,"("+l(t(u)(t(s).harga||0))+")",1)]),Be])]),e("tbody",Ye,[(i(!0),r(b,null,N(t(q),(o,d)=>(i(),r(b,{key:d},[o.p_status!="Remove"?(i(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",He,[e("div",Ie,l(o.xdesc),1)]),e("td",Te,[e("div",$e,l(t(u)(o.harga||0)),1)]),e("td",Me,[e("div",Re,l(t(u)(o.qty||0)),1)]),e("td",Ue,[e("div",Ee,l(t(u)(o.qty*o.harga||0)),1)]),e("td",Pe,[e("div",Je,[e("div",{class:m(["text-white rounded text-xl w-5 h-5",o.for_remarks?"bg-green-600":"bg-red-600"])},[o.for_remarks==0?(i(),S(_,{key:0})):(i(),S(j,{key:1}))],2)])])],8,ze)):w("",!0)],64))),128))],512)])])]),e("div",Qe,[e("div",Ge,[e("table",Ke,[e("thead",null,[Le,e("tr",Oe,[We,Xe,Ze,et,tt,st,lt,at,e("th",ot,[y("Total "),ct,y(),e("span",nt,"("+l(t(u)(t(H)))+")",1)])])]),e("tbody",it,[(i(!0),r(b,null,N(t(k),(o,d)=>(i(),r(b,{key:d},[o.p_status!="Remove"?(i(),r("tr",{key:0,"data-index":d},[e("td",null,l(d+1)+".",1),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",_t,l(o.ac_account_id),1)],2),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",dt,l(o.ac_account_code),1)],2),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",ut,l(o.ac_account_name),1)],2),t(p)?w("",!0):(i(),r("td",ft,[e("div",ht,l(o.description),1)])),e("td",{class:m(["cell bold",t(p)?"unselectable":""])},[e("div",pt,l(t(u)(o.amount||0)),1)],2),e("td",{class:m(["cell",t(p)?"unselectable":""])},l(t(u)(o.qty||0)),3),e("td",{class:m(["cell",t(p)?"unselectable":""])},l(o.xfor),3),e("td",mt,[e("div",xt,l(t(u)(o.qty*o.amount||0)),1)])],8,rt)):w("",!0)],64))),128))],512)])])])])]),e("div",wt,[e("div",vt,[yt,t(s).val||t(s).val1?(i(),r("div",bt,[t(s).val?(i(),r("div",gt," App 1 : "+l(t(s).val_by.username)+" ( "+l(t(s).val_at?t(D)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0),t(s).val1?(i(),r("div",kt," App 2 : "+l(t(s).val1_by.username)+" ( "+l(t(s).val1_at?t(D)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss"):"")+" ) ",1)):w("",!0)])):w("",!0)]),e("button",{type:"button",name:"button",class:"w-36 m-1",onClick:n[0]||(n[0]=o=>f.fnClose())}," Cancel "),e("button",{type:"submit",name:"button",class:"w-36 m-1 bg-blue-600 text-white rounded-sm",onClick:n[1]||(n[1]=Q(o=>Y(),["prevent"]))}," Validasi ")])])])],512)),[[P,f.show]])}}},Bt=W(jt,[["__scopeId","data-v-77e05035"]]);export{Bt as default};
