import J from"./Header.3f30b1f9.js";import R from"./Calendar.e7f16197.js";import W from"./CarTag.446ed14d.js";import Q from"./TruckDriver.e575da2d.js";import X from"./LocationOn.63e30270.js";import{_ as Z}from"./HeaderPopup.vue.ddf221df.js";import ee from"./GAPIN.e6aa8dbd.js";import{g as te,h as se,r as x,j as oe,i as ae,f as le,c as i,b as m,a as e,k as b,A as ne,l as t,m as re,F as ie,D as ce,J as j,t as a,n as p,q as de,x as y,y as T,o as c,d as P,G as _e}from"./entry.44bd997f.js";import{u as xe}from"./useUtils.659de25d.js";import{u as M}from"./useMyFetch.e12a8cb7.js";import"./_plugin-vue_export-helper.c27b6911.js";import"./Times.c42519c7.js";const ue={class:"w-full h-full flex flex-col relative"},fe={class:"grow flex flex-col"},me={class:"w-full flex items-center p-1"},pe={class:"grow"},ve={class:"grow overflow-auto h-0"},he={class:"p-1 grow"},ye={class:"bg-white flex py-2 justify-between"},ge={class:"flex flex-wrap"},be={class:"flex items-center justify-center m-2 text-xs"},we={class:"bg-blue-400 p-2 font-bold text-white"},ke={class:"flex flex-col m-2"},Ye=e("span",{class:"text-xs"}," Tgl Terima Uang ",-1),De={class:"flex items-center justify-center"},je={class:"flex flex-col m-2"},Te=e("span",{class:"text-xs"}," Nomor Kendaraan ",-1),Me={class:"flex items-center justify-center"},Ce=["data-real"],Ae={class:"flex flex-col m-2"},He=e("span",{class:"text-xs"}," Nama Pekerja ",-1),Le={class:"flex items-center justify-center"},Ne=["data-real"],$e={class:"flex flex-col m-2"},Pe=e("span",{class:"text-xs"}," Tujuan ",-1),Se={class:"flex items-center justify-center"},Ve=["onClick"],Ie={class:"w-full h-full fixed top-0 left-0 bg-gray-100 bg-opacity-80 flex items-center justify-center z-10"},Be={class:"w-full sm:w-10/12 md:w-10/12 lg:w-8/12 bg-white flex flex-col border-solid border-gray-200 max-w-full max-h-full overflow-auto",style:{"border-width":"1px"}},Fe={class:"p-1 flex flex-wrap overflow-auto items-start"},Ue={class:"w-full flex flex-wrap"},ze={class:"w-full flex flex-wrap"},Ke={class:"flex flex-col m-2 border-solid border-l-4 border-blue-400 px-2 bg-gray-200"},Ee=e("span",{class:"text-xs font-bold"}," ID ",-1),Oe={class:""},qe={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ge=e("span",{class:"text-xs font-bold"}," Tgl Terima Uang ",-1),Je={class:""},Re={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},We=e("span",{class:"text-xs font-bold"}," Nomor Kendaraan ",-1),Qe={class:""},Xe={class:"flex flex-row flex-wrap m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},Ze={class:"flex flex-col"},et=e("span",{class:"text-xs font-bold"}," Nama Pekerja ",-1),tt={class:""},st={class:"flex flex-col pl-2"},ot=e("span",{class:"text-xs font-bold"}," No rek ",-1),at={class:""},lt={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},nt=e("span",{class:"text-xs font-bold"}," Tujuan ",-1),rt={class:""},it={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},ct=e("span",{class:"text-xs font-bold"}," Jenis ",-1),dt={class:""},_t={key:0,class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},xt=e("span",{class:"text-xs font-bold"}," Pengalihan ",-1),ut={class:""},ft={class:"flex flex-col m-1 border-solid border-l-4 border-blue-400 px-2 py-1 bg-gray-200"},mt=e("span",{class:"text-xs font-bold"}," Nominal Dibayarkan ",-1),pt={class:""},vt={class:"w-full flex flex-wrap justify-center"},ht={key:0,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},yt=e("span",{class:"text-xs font-bold"}," App Kasir ",-1),gt={class:"text-xs"},bt={key:1,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},wt=e("span",{class:"text-xs font-bold"}," App Mandor ",-1),kt={class:"text-xs"},Yt={key:2,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Dt=e("span",{class:"text-xs font-bold"}," App KTU/W ",-1),jt={class:"text-xs"},Tt={key:3,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Mt=e("span",{class:"text-xs font-bold"}," App Marketing ",-1),Ct={class:"text-xs"},At={key:4,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},Ht=e("span",{class:"text-xs font-bold"}," App Logistik ",-1),Lt={class:"text-xs"},Nt={key:5,class:"flex flex-col m-2 ring-1 ring-gray-400 p-1 text-center justify-center items-center rounded text-xs"},$t=e("span",{class:"text-xs font-bold"}," App SPV Logistik ",-1),Pt={class:"text-xs"},St={class:"flex p-1 justify-end flex-wrap"},Vt={class:"flex p-1 justify-center flex-wrap bg-yellow-100"},It=e("div",{class:"w-full text-center"}," Akan dilakukan Transfer dengan data diatas. Apakah Informasi Diatas Sudah Benar Dan Tepat? ",-1),Zt={__name:"transfer",async setup(Bt){let g,C;const{$moment:u}=_e(),{pointFormat:S}=xe(),w=te("token");new Date().getTimezoneOffset();const{data:V}=([g,C]=se(async()=>de(async()=>{y().loading_full=!0;let l=[];const[o,r]=await Promise.all([M("/extra_money_trx/transfers",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},retry:0})]);return o.status.value==="error"?(T().trigger(o.error),{extra_money_trxs:l}):(y().loading_full=!1,l=o.data.value.data,{extra_money_trxs:l})},"$0Pi8hCNVwD")),g=await g,C(),g),k=x(V.value.extra_money_trxs||[]),Y=x({}),s=x({id:-1,tanggal:new Date,extra_money:{xto:"",tipe:"",jenis:"",amount:0},employee:"",kernet:"",no_pol:"",details_uj:[]}),D=x(-1),f=x(""),I=async l=>{y().loading_full=!0;const{data:o,error:r,status:d}=await M("/extra_money_trx/transfer/detail",{method:"get",headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},params:{id:l.id},retry:0});if(y().loading_full=!1,d.value==="error"){T().trigger(r,Y);return}s.value=o.value.data},B=async()=>{y().loading_full=!0,Y.value={};const l=new FormData;l.append("id",s.value.id),l.append("_method","PUT");let o="post";const{data:r,error:d,status:_}=await M("/extra_money_trx/transfer",{method:o,headers:{Authorization:`Bearer ${w.value}`,Accept:"application/json"},body:l,retry:0});if(y().loading_full=!1,_.value==="error"){T().trigger(d,Y);return}k.value.splice(D.value,1),D.value=-1,h.value=!1,v.value=!1},v=x(!1),F=x(0),h=x(!1);oe();const U=(l,o)=>{D.value=l,F.value=o,v.value=!0,I(o)},A=ae(()=>f.value!=""?k.value.filter(l=>l.no_pol.toLowerCase().includes(f.value.toLowerCase())||l.employee.toLowerCase().includes(f.value.toLowerCase())||l.kernet.toLowerCase().includes(f.value.toLowerCase())):k.value),z=()=>{let l=f.value;document.querySelectorAll(".to_hl").forEach(o=>{let r=o.dataset.real;var d=o.innerHTML,_=r==null?void 0:r.toLowerCase().indexOf(l.toLowerCase());_>-1&&l!=""?(d=r.substring(0,_)+"<span class='highlight'>"+r.substring(_,_+l.length)+"</span>"+r.substring(_+l.length),o.innerHTML=d):o.innerHTML=d=r})};le(()=>A,(l,o)=>{setTimeout(()=>{z()},0)},{deep:!0,immediate:!0});const H=x(0);return(l,o)=>{var L;const r=J,d=R,_=W,K=Q,E=X,O=Z,q=ee;return c(),i("div",ue,[m(r,{title:"List Transaction"}),e("section",fe,[e("div",me,[e("div",pe,[b(e("input",{class:"flex-grow",type:"text","onUpdate:modelValue":o[0]||(o[0]=n=>re(f)?f.value=n:null),name:"search",placeholder:"Keyword"},null,512),[[ne,t(f)]])])]),e("div",ve,[(c(!0),i(ie,null,ce(t(A),(n,G)=>{var N,$;return c(),i("div",he,[e("div",ye,[e("div",ge,[e("div",be,[e("div",we,a(n.id),1)]),e("div",ke,[Ye,e("div",De,[m(d,{class:"mr-1"}),P(" "+a(t(u)(n.tanggal).format("DD-MM-YYYY")),1)])]),e("div",je,[Te,e("div",Me,[m(_,{class:"mr-1"}),e("span",{class:"to_hl","data-real":n.no_pol},a(n.no_pol),9,Ce)])]),e("div",Ae,[He,e("div",Le,[m(K,{class:"mr-1"}),e("span",{class:"to_hl","data-real":(N=n.employee)==null?void 0:N.name},a(($=n.employee)==null?void 0:$.name),9,Ne)])]),e("div",$e,[Pe,e("div",Se,[m(E,{class:"mr-1"}),P(" "+a(n.extra_money.xto),1)])])]),e("button",{class:"bg-blue-500 text-white rounded",onClick:Ft=>U(G,n)}," Detail ",8,Ve)])])}),256))])]),b(e("div",Ie,[e("div",Be,[m(O,{title:"Detail Information",fn:()=>{v.value=!1,h.value=!1},class:"w-100 flex align-items-center",style:{color:"white"}},null,8,["fn"]),e("div",Fe,[e("div",Ue,[e("div",ze,[e("div",Ke,[Ee,e("div",Oe,a(t(s).id),1)]),e("div",qe,[Ge,e("div",Je,a(t(u)(t(s).tanggal).format("DD-MM-YYYY")),1)]),e("div",Re,[We,e("div",Qe,a(t(s).no_pol),1)]),e("div",Xe,[e("div",Ze,[et,e("div",tt,a((L=t(s).employee)==null?void 0:L.name),1)]),e("div",st,[ot,e("div",at,a(t(s).employee_rek_no),1)])]),e("div",lt,[nt,e("div",rt,a(t(s).extra_money.xto),1)]),e("div",it,[ct,e("div",dt,a(t(s).extra_money.jenis),1)]),t(s).extra_money.transition_type=="From"?(c(),i("div",_t,[xt,e("div",ut,a(t(s).extra_money.transition_target),1)])):p("",!0),e("div",ft,[mt,e("div",pt,a(t(S)(t(s).extra_money.total)),1)])]),e("div",vt,[t(s).val?(c(),i("div",ht,[yt,e("div",null," ( "+a(t(s).val_by.username)+" ) ",1),e("div",gt,a(t(u)(t(s).val_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val1?(c(),i("div",bt,[wt,e("div",null," ( "+a(t(s).val1_by.username)+" ) ",1),e("div",kt,a(t(u)(t(s).val1_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val2?(c(),i("div",Yt,[Dt,e("div",null," ( "+a(t(s).val2_by.username)+" ) ",1),e("div",jt,a(t(u)(t(s).val2_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val3?(c(),i("div",Tt,[Mt,e("div",null," ( "+a(t(s).val3_by.username)+" ) ",1),e("div",Ct,a(t(u)(t(s).val3_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val4?(c(),i("div",At,[Ht,e("div",null," ( "+a(t(s).val4_by.username)+" ) ",1),e("div",Lt,a(t(u)(t(s).val4_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0),t(s).val5?(c(),i("div",Nt,[$t,e("div",null," ( "+a(t(s).val5_by.username)+" ) ",1),e("div",Pt,a(t(u)(t(s).val5_at).format("DD-MM-YYYY HH:mm:ss")),1)])):p("",!0)])])]),b(e("div",St,[e("button",{class:"rounded m-1",onClick:o[1]||(o[1]=n=>v.value=!1)}," Cancel "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[2]||(o[2]=n=>h.value=!0)}," Transfer ")],512),[[j,!t(h)]]),b(e("div",Vt,[It,e("button",{class:"rounded m-1 bg-white",onClick:o[3]||(o[3]=n=>(h.value=!1,v.value=!1))}," Tidak "),e("button",{class:"rounded m-1 text-white bg-blue-500",onClick:o[4]||(o[4]=n=>B())}," Ya ")],512),[[j,t(h)]])])],512),[[j,t(v)]]),m(q,{show:t(H),onSetTimeout:o[5]||(o[5]=n=>H.value=n)},null,8,["show"])])}}};export{Zt as default};
